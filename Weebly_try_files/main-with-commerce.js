function str_repeat(e,t){for(var i=[];t>0;i[--t]=e);return i.join("")}function sprintf(){for(var e,t,i,n,o,s=0,r=arguments[s++],a=[],l="";r;){if(t=/^[^\x25]+/.exec(r))a.push(t[0]);else if(t=/^\x25{2}/.exec(r))a.push("%");else{if(!(t=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw"Oops ?!";if(null==(e=arguments[t[1]||s++])||void 0==e)throw"Too few arguments.";if(/[^s]/.test(t[7])&&"number"!=typeof e)throw"Expecting number but found "+typeof e;switch(t[7]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e);break;case"e":e=t[6]?e.toExponential(t[6]):e.toExponential();break;case"f":e=t[6]?parseFloat(e).toFixed(t[6]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&t[6]?e.substring(0,t[6]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(t[7])&&t[2]&&e>=0?"+"+e:e,n=t[3]?"0"==t[3]?"0":t[3].charAt(1):" ",o=t[5]-String(e).length-l.length,i=t[5]?str_repeat(n,o):"",a.push(l+(t[4]?e+i:i+e))}r=r.substring(t[0].length)}return a.join("")}function getInnerHeight(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0}function _goPageHistory(e){var t="/weebly/goPage.php?"+e;_goPageIframe?_goPageIframe.contentWindow.location.href=t:($(document.body).insert(_goPageIframe=new Element("iframe",{style:"height:0;width:0;border:0;overflow:hidden;position:absolute;top:0px;left:0px;",frameBorder:0})),_goPageIframe.src=t)}function startWait(e,t){try{e=e||_W.tl("Loading"),window.pushLoading(),jQuery("#pleaseWait").toggleClass("no-delay",!!t).find(".loading-text").text(e)}catch(i){}}function endWait(){var e;try{window.popLoading(),e=jQuery("#pleaseWait").find(".loading-text").text(_W.tl("Loading"))}catch(t){}}function setSetting(setting,value){"string"==typeof value&&value.match(/{/)&&(value=value.replace(/^'/,""),value=value.replace(/'$/,"")),eval(setting+" = "+value+";")}function handleLogout(e,t){var i;try{i=e.getHeader("Weebly-Auth-Msg")}catch(n){}if(i=i||"",i.match("not-logged-in"))window.onbeforeunload=null,document.location="/?session-expired=1";else if(i.match("database-error"))retriableErrFunc(t,e,i);else if(i.match("query-error"))retriableErrFunc(t,e,i);else if(i.match("account-deleted"))window.onbeforeunload=null,document.location="logout.php";else if(i.match("refresh-build"))"undefined"!=typeof currentBlog&&currentBlog.postId&&1==currentBlog.postId||Weebly.headerEditor&&Weebly.headerEditor.isEditing||(window.onbeforeunload=null,refreshMe());else if(i.match("maintenance-soon")){var o=i.match(/maintenance-soon\(([^\)]+)\)/);window.onbeforeunload=null,maintenanceSoon(o[1])}}function maintenanceSoon(e){$("maintenanceLength").innerHTML=e,Element.show("maintenanceDiv")}function refreshMe(){Element.show("refreshingDiv"),Element.show("grayedOut"),setTimeout("window.location.reload();",4e3)}function retriableErrFunc(e,t,i){endWait(),e.options.failSilently||exiting||(0==t.status?showRetriableError(_W.tl("There seems to be a problem connecting to the server. Please check your Internet connection."),e,!1):i.match("database-error")?showRetriableError(_W.tl("The system isn't working quite right. This is most likely a temporary glitch.<br/><br/>Please wait a bit and try again."),e,!1):i.match("query-error")&&showRetriableError(_W.tl("That didn't work as intended. This is most likely a temporary glitch.<br/><br/>Please wait a bit and try again."),e,!0))}function errFunc(e){e&&e.request&&e.request.isRetriable()||showError(_W.tl("The system encountered an error. Please try your last request again."),e)}function exceptionFunc(e,t){if(!e.isRetriable())if(e&&(!e.getStatus||!e.getStatus()||e.getStatus()<100||e.getStatus()>500))try{var i=e.options||{},n=i._retryCount||0;1>=n?(i._retryCount=++n,new Ajax.Request(e.url,i)):showError(_W.tl("The system encountered an exception. Please try your last request again.<br/><br/>")+t.message)}catch(o){}else if(window.console&&console.log)if("object"==typeof t)for(var s in t)"function"!=typeof t[s]&&console.log(s+": "+t[s]);else console.log(t)}function checkAjaxRequestStatus(e){e._complete||!Prototype.Browser.IE||e.times.sent||e.abort()}function RGBColor(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in t)e==i&&(e=t[i]);for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],o=0;o<n.length;o++){var s=n[o].re,r=n[o].process,a=s.exec(e);a&&(channels=r(a),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i},this.getHelpXML=function(){for(var e=new Array,i=0;i<n.length;i++)for(var o=n[i].example,s=0;s<o.length;s++)e[e.length]=o[s];for(var r in t)e[e.length]=r;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(var i=0;i<e.length;i++)try{var l=document.createElement("li"),c=new RGBColor(e[i]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; "+"color:"+c.toHex(),u.appendChild(document.createTextNode("test"));var d=document.createTextNode(" "+e[i]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(u),l.appendChild(d),a.appendChild(l)}catch(h){}return a}}function setContentFieldProperty(e,t,i){var n=getContentFieldProperty(e,t);if(n){n.property_result=i;var o=$(n.ucfpid);o&&(o.value=i)}return!!n}function getContentFieldProperty(e,t){var i=getContentField(e);return i?i.getProperty(t):void 0}function getContentFieldProperties(e){var t=getContentField(e);return t?t.properties:void 0}function getContentField(e){return Weebly.pageContext.contentFieldsByID[e]||Weebly.siteContext.contentFieldsByID[e]}function getElementObject(e){"object"==typeof e&&e.id&&(e=e.id.replace("inside_",""));var t;return Weebly&&Weebly.pageContext&&Weebly.pageContext.elementsByID&&(t=Weebly.pageContext.elementsByID[e])?t:Weebly&&Weebly.siteContext&&Weebly.siteContext.elementsByID?Weebly.siteContext.elementsByID[e]:void 0}function getElementParentString(e){var t,i="",n=e.up();n&&(t=n.up());var o;return t&&(o=t.up()),n&&n.hasClassName("wsite-com-long-description")?i=n.id:o&&o.className.match(/column/)?i=o.id:t&&t.className.match(/wsite-multicol-col/)?i=t.id:e.up(".formlist")&&(i=e.up(".formlist").id),i}function getElementParentObject(e){return e?getElementObject($(e).up("li.inside")):null}function getElementSiblings(e){var t,i=getElementParentObject(e);return(t=e.match(/^(\d+)-lhs$/))?i.leftChildren||i.columns[0]:(t=e.match(/^(\d+)-rhs$/))?i.rightChildren||i.columns[1]:(t=e.match(/^(\d+)-col(\d+)$/))?(i.columns[t[2]]||(i.columns[t[2]]=[]),i.columns[t[2]]):i.children}function repositionElements(){jQuery("#scroll_container").is(":visible")&&(Weebly.siteContext.reposition(),Weebly.pageContext.reposition(),Weebly.Slideshow.updateSize())}function getAreaInstance(e,t,i){return e?Weebly.siteContext.getArea(t,i):Weebly.pageContext.getArea(t,i)}function getAreaInstanceForElement(e){if(Weebly){var t;return Weebly.pageContext&&(t=Weebly.pageContext.getAreaForElement(e)),!t&&Weebly.siteContext&&(t=Weebly.siteContext.getAreaForElement(e)),t}}function done(){return!1}function isFlashInstalled(){function e(e){return e=e.match(/[\d]+/g),e.length=3,e.join(".")}if(void 0!==hasFlash)return hasFlash;var t=!1,i="";if(navigator.plugins&&navigator.plugins.length){var n=navigator.plugins["Shockwave Flash"];n&&(t=!0,n.description&&(i=e(n.description))),navigator.plugins["Shockwave Flash 2.0"]&&(t=!0,i="2.0.0.11")}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var o=navigator.mimeTypes["application/x-shockwave-flash"];(t=o&&o.enabledPlugin)&&(i=e(o.enabledPlugin.description))}else try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),t=!0,i=e(s.GetVariable("$version"))}catch(r){try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t=!0,i="6.0.21"}catch(a){try{s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t=!0,i=e(s.GetVariable("$version"))}catch(l){}}}return hasFlash=!!t}function showFlashWarning(e){var t=_W.tl("Adobe Flash Player is required in order to use this feature."),i=e?e:t;showError('<div style="text-align:center;">'+i+"<br/><br/><a target='_new' href='http://www.adobe.com/go/getflashplayer'><img style='border:0;' onClick='Effect.Fade(\"error2\");' src='http://"+editorStatic+"/weebly/images/get_flash.jpg'><a/></div>")}function checkContentEditable(){var e=new Element("div");"undefined"==typeof e.contentEditable&&showError('<div style="text-align:center;">'+_W.tl("You are using an outdated browser. In order to edit text in the Weebly Editor you need to upgrade to a modern web browser.")+"<br/><br/><div style='width:350px; margin:10px auto; background:#FEEFDA;'><a href='http://www.firefox.com' target='_blank' style='margin-right:15px;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-firefox.jpg' style='border: none;' alt='Get Firefox 3.5'/></a><a href='http://www.browserforthebetter.com/download.html' target='_blank' style='margin-right:15px;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-ie8.jpg' style='border: none;' alt='Get Internet Explorer 8'/></a><a href='http://www.apple.com/safari/download/' target='_blank' style='margin-right:15px;'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-safari.jpg' style='border: none;' alt='Get Safari 4'/></a><a href='http://www.google.com/chrome' target='_blank'><img src='http://www.ie6nomore.com/files/theme/ie6nomore-chrome.jpg' style='border: none;' alt='Get Google Chrome'/></a></div></div>")}function showEvent(e){hasDoneUserEvent(e)||(EventTooltip.show(e),userEvents[e]=1,_markUserEventDone(e))}function markUserEventDone(e){userEvents[e]=1,_markUserEventDone(e)}function _markUserEventDone(e){preventAJAX()||(new Ajax.Request(ajax,{parameters:{pos:"doevent",event:e,cookie:document.cookie,token:Weebly.RequestToken}}),fireTrackingEvent("Event",e))}function fireTrackingEvent(e,t,i,n){try{if(n=n?n:0,!doTrackingEvent(e,t,i,n))throw"Did not process tracking event";if(Weebly.trackingArray.length>0){for(var o=0;o<Weebly.trackingArray.length;o++){var s=Weebly.trackingArray[o];doTrackingEvent(s.category,s.action,s.optional_label,s.optional_value)}Weebly.trackingArray=Array()}}catch(r){Weebly.trackingArray.push({category:e,action:t,optional_label:i,optional_value:n})}}function doTrackingEvent(e,t,i,n){try{"object"==typeof pageTracker?pageTracker("send","event",e,t,i,parseInt(n)):window.ga("send","event",e,t,i,parseInt(n)),mpmetrics.track(e,{type:t})}catch(o){return!1}return!0}function fireTransactionEvent(e,t,i,n,o){try{"object"==typeof pageTracker?(pageTracker("require","ecommerce"),pageTracker("ecommerce:addTransaction",{id:e,affiliation:n,revenue:i,shipping:0,tax:0}),pageTracker("ecommerce:addItem",{id:e,name:t,sku:t,category:o,price:i,quantity:1}),pageTracker("ecommerce:send")):window.ga&&(window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,affiliation:n,revenue:i,shipping:0,tax:0}),window.ga("ecommerce:addItem",{id:e,name:t,sku:t,category:o,price:i,quantity:1}),window.ga("ecommerce:send")),mpmetrics.track("Purchase "+o)}catch(s){}}function showError(e,t,i){"string"==typeof e?($("red-error-title").update(_W.tl("Oops!")),$("red-error-text").update(e)):($("red-error-title").update(e.title),$("red-error-text").update(e.message)),errorDialog||(errorDialog=new Weebly.Dialog($("red-error"),{inner_class:"weebly-dialog-inner-red",zIndex:9999,modal:1})),errorDialog.open(),i||fireTrackingEvent("WeeblyError","Error",e);var n={pos:"oopserror",message:e,token:Weebly.RequestToken};return"object"==typeof t&&t.request&&(n.ajax_request=t.request.body.match(/^.*?&cookie/)[0],n.ajax_response=t.responseText,n.ajax_status=t.status,n.server=t.getHeader("X-Host"),t.request.times&&(n.ajax_start=t.request.times.start,n.ajax_initialized=t.request.times.initialized,n.ajax_sent=t.request.times.sent,n.ajax_response_start=t.request.times.response,n.ajax_complete=(new Date).getTime()-t.request.times.start,n.current_upload=t.request.concurrentUpload?1:0)),n.cookie=document.cookie,new Ajax.Request(ajax,{parameters:n,bgRequest:!0}),errorDialog}function hideError(){errorDialog&&errorDialog.close()}function showRetriableError(e,t,i){"object"==typeof retriableErrorDialog&&retriableErrorDialog.close();var n="undefined"!=typeof isClientSite?isClientSite:!1,o="undefined"!=typeof removeSupportEmail?removeSupportEmail:!1,s=o?"":"<br/><br/>"+_W.tl("If you're still having trouble, please contact support at support@weebly.com.");s+="<br/><br/>",s+=n?"":"<a href='#' onclick='window.location.href=\"http://"+configSiteName+"/\"' class='big-grey-button'><span class='button-inner'>"+_W.tl("Exit")+"</span></a>&nbsp;&nbsp;",s+="<a href='#' onclick='retryRetriableError();' class='big-blue-button'><span class='button-inner'>"+_W.tl("Retry")+"</span></a>","string"==typeof e?($("red-error-title").update(_W.tl("Oops!")),$("red-error-text").update(e+s),fireTrackingEvent("WeeblyError","Retriable Error",e)):($("red-error-title").update(e.title),$("red-error-text").update(e.message+s),fireTrackingEvent("WeeblyError","Retriable Error",e.message)),retriableErrorDialog=new Weebly.Dialog($("red-error"),{inner_class:"weebly-dialog-inner-red",modal:1,showClose:i}),retriableErrorDialog.open();try{var r={pos:"oopserror",message:"string"==typeof e?e:e.message,token:Weebly.RequestToken};"object"!=typeof t||t.body.match(/oopserror/)||(r.ajax_request=t.body.match(/^.*?&cookie/)[0],r.ajax_response=t.transport.responseText,r.ajax_status=t.transport.status,r.server=t.getHeader("X-Host"),t.times&&(r.ajax_start=t.times.start,r.ajax_initialized=t.times.initialized,r.ajax_sent=t.times.sent,r.ajax_response_start=t.times.response,r.ajax_complete=(new Date).getTime()-t.times.start,r.current_upload=0),r.cookie=document.cookie,new Ajax.Request("/weebly/getElements.php",{parameters:r,bgRequest:!0}),retriableAjax=t)}catch(a){}return retriableErrorDialog}function retryRetriableError(){hideRetriableError(),retriableAjax.retry(!0)}function hideRetriableError(){retriableErrorDialog&&retriableErrorDialog.close()}function showWarning(e,t){return t=Object.extend({width:"585px",titleFontSize:"36px",showClose:!0,closeFunction:null},t),$("orange-error").setStyle({width:t.width}),$("orange-error-title").setStyle({fontSize:t.titleFontSize}),"string"==typeof e?($("orange-error-title").update(_W.tl("Oops!")),$("orange-error-text").update(e),fireTrackingEvent("WeeblyError","Warning",e)):($("orange-error-title").update(e.title),$("orange-error-text").update(e.message),fireTrackingEvent("WeeblyError","Warning",e.message)),t.okButton?$("orange-error-button").show().stopObserving("click").observe("click",function(){warningDialog.close()}):$("orange-error-button").hide(),warningDialog=new Weebly.Dialog($("orange-error"),{inner_class:"weebly-dialog-inner-orange",modal:1,showClose:t.showClose,closeFunction:t.closeFunction}),warningDialog.open(),warningDialog}function showDeniedAction(e){jQuery("orange-error-title").setStyle({fontSize:"30px"}).update("Text Not Allowed"),jQuery("orange-error-text").setStyle({marginTop:"25px",marginBottom:"25px"});var t=new Element("a",{"class":"orange-button-29",href:"#",id:"closeWarning"}).update('<span class="bi">'+window._W.tl("OK")+"</span>").setStyle({marginBottom:"10px"}).observe("click",function(){window.warningDialog.close(),jQuery("closeWarning").hide()});jQuery("orange-error-text").insert({after:t}),window.showWarning(e)}function hideWarning(){warningDialog&&warningDialog.close()}function showDialog(e,t){if(t=t||{},!showDialogElement){var i=new Element("div",{id:"showDialogElement","class":"orange-error weebly-text w-ui"}),n="";t.title&&(n+="<div class='orange-error-heading'><span class='orange-error-title' style='font-size:24px'>"+t.title+"</span>"+"</div>"),n+="<div class='orange-error-text'>"+e+"<div class='orange-error-buttons' style='margin-top:2em'></div>"+"</div>",i.update(n),showDialogElement=new Weebly.Dialog(i,{inner_class:"weebly-dialog-inner-orange"})}showDialogElement.open()}function showConfirm(e){var t;lastConfirmOk=!1,confirmDialog?t=$("confirmDialogContent"):(t=new Element("div",{id:"confirmDialogContent","class":"orange-error weebly-text w-ui"}),confirmDialog=new Weebly.Dialog(t,{inner_class:"weebly-dialog-inner-orange"})),confirmDialog.options.onClose=function(){!lastConfirmOk&&e.onCancel&&e.onCancel()},t.update("<div class='orange-error-heading'><div class='orange-error-title'>"+e.title+"</div>"+"</div>"+"<div class='orange-error-text'>"+e.message+"<div class='orange-error-buttons' style='margin-top:2em'></div>"+"</div>");var i=new Element("button",{style:"padding:.5em 1em;cursor:pointer","class":"btn btn-default"}).update(e.okText||"OK").observe("click",function(){e.onConfirm(),lastConfirmOk=!0,confirmDialog.close()}),n=new Element("button",{style:"padding:.5em 1em;cursor:pointer","class":"btn btn-primary"}).update(e.cancelText||_W.tl("Cancel")).observe("click",function(){confirmDialog.close()});t.select("div.orange-error-buttons")[0].insert(i).insert(" ").insert(n),confirmDialog.open()}function showUpdateWhois(e,t,i,n,o,s,r,a,l){$("CCState").value=$("whois-state").value,Event.fire($("CCState"),"liszt:updated"),$("whois-complete").onclick=function(){return submitWhois(),!1},$("whois-complete").style.opacity="1",$("whois-complete").disabled=!1,$("whois-error").innerHTML="";var c=r&&r.amount?r.amount:10*s+".00";r&&r.tax&&(c+='<br><span class="whois-TaxAmount">(includes $'+r.tax+" tax)</span>",$("whois-totalContainer").addClassName("has-tax")),$("whois-totalAmount").update(c),$("whois-fields-domain").innerText=n+"."+o,$("whois-fields-userServiceID").value=i,e.match(/customDomainWhois/)?($("whoisProtectContainer-public").style.display="none",$("whoisProtect-public").name="whois-blank",$("whoisProtectContainer-private").style.display="none",$("whoisProtect-private").name="whois-blank",$("whoisProtectContainer-purchasedPrivate").style.display="block",$("whoisProtect-purchasedPrivate").name="whois-protect"):"PayPal"==t&&($("whoisProtectContainer-public").style.display="none",$("whoisProtect-public").name="whois-blank",$("whoisProtectContainer-private").style.display="none",$("whoisProtect-private").name="whois-blank",$("whoisProtect-purchasedPayPal").name="whois-protect"),whoisDialog=new Weebly.Dialog($("update-whois"),{modal:1,closeFunction:a||Weebly.goHome}),whoisDialog.successFunction=l,whoisDialog.open()}function submitWhois(){$("whois-complete").onclick=function(){return!1},$("whois-complete").style.opacity="0.5",$("whois-complete").disabled=!0,$("whois-error").innerHTML="";for(var e=[],t=["whois-name","whois-email","whois-address","whois-city","whois-state","whois-zip","CCState","CCCountry","whois-phone"],i=0;i<t.length;i++)$(t[i]).parentNode.style.border="1px solid #999",""==$(t[i]).value&&("CCState"==t[i]&&"US"==$("CCCountry").value||"whois-state"==t[i]&&"US"!=$("CCCountry").value||"CCState"!=t[i]&&"whois-state"!=t[i])&&e.push(t[i]),"whois-name"!=t[i]||$(t[i]).value.match(" ")||e.push(t[i]);if(e.length>0){for(var i=0;i<e.length;i++)$(e[i]).parentNode.style.border="1px solid red";$("whois-complete").onclick=function(){return submitWhois(),!1},$("whois-complete").style.opacity="1",$("whois-complete").disabled=!1,$("whois-error").innerHTML=_W.tl("Please complete the missing form fields.")}else{var n=$("whois-form").serialize(!0);n.pos="updatedomainwhois",n.cookie=document.cookie,n.token=Weebly.RequestToken,new Ajax.Request(ajax,{parameters:n,onSuccess:handlerSubmitWhois,onFailure:errFunc})}}function handlerSubmitWhois(e){e.responseText.match("%%SUCCESS%")?(whoisDialog.close(),whoisDialog.successFunction&&whoisDialog.successFunction()):($("whois-complete").onclick=function(){return submitWhois(),!1},$("whois-complete").style.opacity="1",$("whois-complete").disabled=!1,$("whois-error").innerHTML=e.responseText)}function selectWhoisSetting(e){"public"==e?($("whoisProtectContainer-private").removeClassName("multiple-choice-box-selected"),$("whoisProtectContainer-public").addClassName("multiple-choice-box-selected"),$("whoisProtect-public").checked=!0,$("whois-totalContainer").style.display="none"):($("whoisProtectContainer-public").removeClassName("multiple-choice-box-selected"),$("whoisProtectContainer-private").addClassName("multiple-choice-box-selected"),$("whoisProtect-private").checked=!0,$("whois-totalContainer").style.display="inline-block")}function showError2(e){$("errorText2").innerHTML=e,Effect.Appear("error2")}function hoverOn(e,t){if(isIn(lastEventID,e));else if(1==settingTooltips){var i;1==t&&(i=_W.tl("<b>Double click</b> to edit.")),2==t&&(i=_W.tl("<b>Click</b> to change pages.\n<b>Drag</b> to rearrange order.\n<b>Double Click</b> to edit.")),3==t&&(i=_W.tl("<b>Drag</b> to rearrange order.\n<b>Drag to Trash</b> to delete.")),showTip(i,e,"y",e,1),lastEventID.push(e)}}function hoverOff(e){1==settingTooltips&&hideTip("tip"+e),isIn(lastEventID,e)&&lastEventID.splice(isIn(lastEventID,e),1)}function preloadImages(e){for(var t=e.split(","),i=0;i<t.length;i++){var n=preloadedImages.length;preloadedImages[n]=new Image,preloadedImages[n].src=t[i]}}function duplicateStyle(e,t,i){if(e.currentStyle)for(var n in e.currentStyle){var o=e.currentStyle[n];""==o||o instanceof Object||"length"==n||"parentRule"==n||"display"==n||n.match(/border/)||n.match(/margin/)||n.match(/line/)||("display"==n||n.match(/border/)||n.match(/margin/)||(t.style[n]=o),"width"==n||"height"==n||n.match(/padding/)||n.match(/border/)||(i.style[n]=o))}else{var s=document.defaultView.getComputedStyle(e,"");for(var n in s){var o=s[n];""==o||o instanceof Object||"length"==n||"parentRule"==n||"display"==n||n.match(/border/)||n.match(/margin/)||(n.match(/^[0-9]+$/)&&(n=o,o=s[n]),"cssText"==n||"display"==n||n.match(/border/)||n.match(/margin/)||n.match(/webkit/)||(t.style[n]=o),"width"==n||"height"==n||"maxWidth"==n||"maxHeight"==n||n.match(/padding/)||n.match(/border/)||(i.style[n]=o))}}t.style.margin="0"}function tryStealMouse(e){var t=document.getElementById(e);t&&t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.body&&t.contentWindow.document.body.innerHTML&&""!=t.contentWindow.document.body.innerHTML?$.StealMouse.on(t):setTimeout("tryStealMouse('"+e+"');",250)}function isAParent(e,t){if("object"!=typeof t&&(t=$(t)),"object"!=typeof e&&(e=$(e)),t==e)return!0;for(;t.parentNode;){if(t.parentNode==e)return!0;t=t.parentNode}return!1}function isAParentByClass(e,t){var i;if("object"!=typeof t&&(t=$(t)),t.hasClassName(e))return t;for(i=t.up();i&&i!==document;){if(i.hasClassName(e))return i;t=i,i=t.up()}return!1}function isAParentMatch(e,t){if("object"!=typeof t&&(t=$(t)),"string"!=typeof t.id)return!1;if(t.id.match(e))return t;for(;"body"!=t.id;){if(!t.parentNode)return!1;if(t.parentNode&&t.parentNode.id&&t.parentNode.id.match&&t.parentNode.id.match(e))return t.parentNode;t=t.parentNode}return!1}function getXML(e){var t=Try.these(function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t});return t}function getValueXML(e,t){return e.getElementsByTagName(t)[0].firstChild.nodeValue}function getInnerHeight(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0}function cwa(){if(!eval(fcc(97)+fcc(100)+fcc(109)+fcc(105)+"nL"+fcc(111)+fcc(103)+"in == 1"))try{var ustring=Weebly.Storage.get("weebly"+fcc(97)+fcc(117)+fcc(116)+fcc(104));if(!ustring)return Weebly.Storage.set("weebly"+fcc(97)+fcc(117)+fcc(116)+fcc(104),userID),void 0;var users=ustring.split(fcc(124));-1==users.indexOf(userID)&&(users[users.length]=userID),Weebly.Storage.set("weebly"+fcc(97)+fcc(117)+fcc(116)+fcc(104),users.join(fcc(124))),new Ajax.Request(ajax,{parameters:{pos:fcc(118)+fcc(117),s:users.join(fcc(124)),cookie:document.cookie,token:Weebly.RequestToken},onSuccess:cwaHandler,bgRequest:!0})}catch(e){}}function cwaHandler(e){e.responseText.match("%%"+fcc(71)+fcc(84)+fcc(70)+fcc(79)+"%%")&&(document.location="/weebly/"+fcc(108)+fcc(111)+fcc(103)+fcc(111)+fcc(117)+fcc(116)+".php?"+fcc(98)+"=1")}function isPro(){return Weebly.Restrictions.hasPro()}function modalProFeatures(e,t,i){var n=new Weebly.Dialog("pro-upgrade-modal",{modal:!0,onClose:function(){$("pro-upgrade-accept").stopObserving(),$("pro-upgrade-okay").stopObserving()}});$("pro-upgrade-accept").observe("click",function(e){n.close(),showPremiumPurchaseScreen({refer:t,level:i}),e.preventDefault()}),$("pro-upgrade-okay").observe("click",function(e){n.close(),e.preventDefault()}),$("pro-upgrade-modal-body").update(e),n.open()}function monitorHref(e){var t=(new Date).getTime();if(!(firstTime+500>t||document.location.href==currentHref&&!e)){if(e)var i=e;else{var i=document.location.href.replace(/.*#/,"");document.location.href=document.location.href.replace(/(.*#)[^#]*$/,"$1"),currentHref=document.location.href}i.match("refresh")?document.location.reload():i.match("addService")?(i.replace("addService:",""),updateList()):"closePollDaddy"==i&&(Pages.openPages.indexOf("goBlogPost")>-1?Pages.go("goBlogPost"):Pages.go("main"))}}function alertPremiumFeature(e,t){var i=Weebly.Restrictions.is_trial&&("without_credit_card"===Weebly.freeTrialTest||"with_credit_card"===Weebly.freeTrialTest);if(i&&"without_credit_card"===Weebly.freeTrialTest){var n=require("editor/dialogs/TrialPremiumFeatureWarning");editorApp.showDialog(new n({restrictionID:e}))}else i&&"with_credit_card"===Weebly.freeTrialTest?showPremiumPurchaseScreen({restrictionID:e,refer:t,customTitle:_W.tl("Upgrade Your Trial Plan"),closeCallback:function(){startWait(),location.reload()}}):showPremiumPurchaseScreen({restrictionID:e,refer:t})}function showPremiumPurchaseScreen(e){return e=e||{},Weebly.Developer&&Weebly.Developer.isMaster?(editorApp.designer.showPlanChooser(function(e){Weebly.Restrictions.level=e},e.level),void 0):Weebly.Permissions&&Weebly.Permissions.isContributor?(alert("The site owner must upgrade this site in order for this feature to be available."),void 0):(!e.level&&e.restrictionID&&(e.level=Weebly.Restrictions.requiredService(e.restrictionID),e.level==Weebly.Restrictions.freeLevel&&Weebly.Restrictions.isUpgradable(e.restrictionID)&&(e.level=Weebly.Restrictions.isUpgradable(e.restrictionID))),e.level||e.type||(e.type="premium"),void 0===e.siteID&&window.location.href.match(/\/userHome\.php(\?|#|$)/)&&(e.siteID=!1),showPurchaseScreen(e),void 0)}function showDesignerPurchaseScreen(e){showPurchaseScreen({type:Weebly.Restrictions.designerSitesService,refer:e})}function showUpdateBillingScreen(e,t,i,n,o,s,r){showPurchaseScreen({refer:e,userServiceID:t,type:n||"update",hideCard:o,deleteCard:s,extraArgs:r})}function showPurchaseScreen(e){e=e||{};var t=null;e.closeCallback&&(t=e.closeCallback);var i="/weebly/apps/purchasePage.php?s="+encodeURIComponent(configSiteName)+(e.type?"&type="+encodeURIComponent(e.type):"")+(e.level?"&level="+encodeURIComponent(e.level):"")+(e.restrictionID?"&restrictionID="+encodeURIComponent(e.restrictionID):"")+(e.refer?"&refer="+encodeURIComponent(e.refer):"")+(void 0!==e.siteID?"&siteID="+encodeURIComponent(e.siteID):"")+(e.forceComparison?"&comparison=1":"")+(e.userServiceID?"&userServiceID="+e.userServiceID:"")+(e.customTitle?"&customTitle="+e.customTitle:"")+(e.startTrial?"&startTrial=1":"")+(e.hideCard?"&hideCard="+e.hideCard:"")+(e.deleteCard?"&deleteCard="+e.deleteCard:"")+(e.extraArgs?"&"+e.extraArgs:""),n=window.open(buildSecureUrl(i),"weebly_billingPage"+Math.floor(10000001*Math.random()),"width="+PURCHASE_WINDOW_WIDTH+","+"height="+PURCHASE_WINDOW_HEIGHT+","+"toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes,dependent=yes");e.makePopupGlobal&&(window.billingPopup=n),monitorBillingWindow(n,t)}function buildSecureUrl(e){var t=window.secureBase;return t&&t.length&&(e="https://"+t+"/weebly/setSession.php"+"?WeeblySession="+sid+"&redirect="+encodeURIComponent(e)),e}function monitorBillingWindow(e,t){t=t||function(){loadLastTransaction()},e&&e.closed?t():setTimeout(function(){monitorBillingWindow(e,t)},200)}function loadLastTransaction(){preventAJAX()||new Ajax.Request(ajax,{parameters:{pos:"getlasttransaction",cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:function(e){var t=e.responseText;if(t.isJSON){var i=t.evalJSON();i.action&&processLastTransaction(i)
}}})}function fireBillingTransactionEvent(e,t){fireTransactionEvent(e.transaction_id,e.service_id,e.amount,e.payment_type,t)}function showTrackingFrame(e,t){$(document.body).insert('<iframe frameborder="0" style="position:absolute; display:block; top:0; left:0; width:0; height:0; border:0; overflow:hidden" src="/editor/apps/tracking_frame_dynamic.php?trigger='+e+(t||"")+'"></iframe>')}function processLastTransaction(e){if(e.action&&Weebly.Transactions&&Weebly.Transactions[e.action])return Weebly.Transactions[e.action](e);switch(e.action){case"successBillingPremium":if(fireBillingTransactionEvent(e,e.other_vars.plan.title),window.inEditor&&inEditor()){if(makePremium(e.other_vars.plan,e.service_id),isDomainChooserOpen?domainChoiceContinue():Pages.openPages.indexOf("exportSite")>-1?Pages.go("exportSite"):window.editorApp&&window.editorApp.isStorePanelOpen||Pages.go("main"),e.other_vars.bundled_domain){fireBillingTransactionEvent(e,"Domain");var t=e.other_vars.bundled_domain.domain,i=t.fqdn;Weebly.Location.all_purchased_domains.push(i),Weebly.Location.custom_domain=i,Weebly.Location.purchased_domain=!0,settingQuickExport=1,domainDialog.close(),showUpdateWhois(t.service_id,e.payment_type,e.other_vars.bundled_domain.user_service_id,t.domain_name,t.tld,t.years,{},void 0,function(){domainChoiceFinish()})}}else window.location.reload();break;case"successBilling":fireBillingTransactionEvent(e,"Other"),window.location.reload();break;case"successBillingExtend":fireBillingTransactionEvent(e,"Extend"),window.location.reload();break;case"successBillingUpdate":window.location.reload();break;case"successTrialPlanChange":window.location.reload();break;case"successBillingDomain":fireBillingTransactionEvent(e,"Domain");var i="www."+e.other_vars.sld+"."+e.other_vars.tld;Weebly.Location.all_purchased_domains.push(i),Weebly.Location.custom_domain=i,Weebly.Location.purchased_domain=!0,domainDialog.close(),settingQuickExport=1;var n={};e.other_vars.whoisTax&&(n.tax=e.other_vars.whoisTax,n.amount=e.other_vars.whoisAmount),showUpdateWhois(e.service_id,e.payment_type,e.user_service_id,e.other_vars.sld,e.other_vars.tld,e.other_vars.years,n,void 0,function(){domainChoiceFinish()});break;case"successStockMedia":fireBillingTransactionEvent(e,"StockMedia"),stockMediaPurchased(e.other_vars.media_info);break;case"designerBillingSetup":fireBillingTransactionEvent(e,"DesignerBilling"),Weebly.Restrictions.designerBillingSetup=!0,Weebly.AllDialogs["designer-billing-setup"]&&(Weebly.AllDialogs["designer-billing-setup"].close(),$("designerBillingSuccessMessage")&&$("designerBillingSuccessMessage").show(),"function"==typeof openDomainContainer?openDomainContainer():exportSite())}if(e.other_vars&&e.other_vars.plan&&e.other_vars.plan.level){var o=e.other_vars.plan.level;Weebly.Restrictions.level=o,"object"==typeof editorApp&&editorApp.vent.trigger("user:upgrade");try{swfu.setFileSizeLimit(Math.floor(Weebly.Restrictions.accessValue("file_upload_limit")/1e3))}catch(s){}}}function removeService(e){$("serviceError").innerHTML="",new Ajax.Request(ajax,{parameters:{pos:"removeservice",userServiceId:e,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){handlerRemoveService(t,e)},onFailure:errFunc})}function handlerRemoveService(e,t){e.responseText.match("%%SUCCESS%%")?$(t).innerHTML="<em>This service has been removed.</em>":e.responseText.match("%%SUCCESSREFUND%%")?$(t).innerHTML="<em>"+_W.tl("This service has been removed. Please contact support@weebly.com if you believe you are entitled to a refund.")+"</em>":$("serviceError").innerHTML=e.responseText}function onDropElements(e){var t=e.getElementsByTagName("input");if(t&&t[0]&&t[0].value&&t[0].value.startsWith("def:")){var i=t[0].value.match(/def:(\d*)/)[1];allowProElementsTrial||Weebly.Restrictions.hasAccess(i)||alertPremiumFeature(i)}}function deleteAccount(){new Ajax.Request(ajax,{parameters:{pos:"deleteaccount",feedback:$("deleteAccountComments").value,email:$("deleteAccountEmailPref").checked,token:Weebly.RequestToken,cookie:document.cookie},onSuccess:handlerDeleteAccount,onFailure:errFunc})}function handlerDeleteAccount(e){e.responseText.match("%%SUCCESS%%")&&(document.location="/index.html?account-deleted")}function goModerateBlog(e,t,i){currentBlog.saving=0,currentBlog.blogId=e,currentBlog.params=t,i=i||"comments",new Ajax.Request(ajax,{parameters:{pos:"blogmoderateblog",blogid:e,params:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:handlerModerateBlog(i)})}function handlerModerateBlog(e){return function(t){var i=new Weebly.Dialog("blog-manage-"+e+"-dialog",{modal:!1,showClose:!0,closeFunction:function(){i.close(),Pages.go("main")}});i.open(),currentBlog.settingsDialog=i,$("blog-manage-"+e+"-dialog-content").update(t.responseText),"comments"==e&&($("blog_moderation_iframe").addClassName("is-overlay"),$$(".blog-moderation-filter a.all")[0].onclick())}}function showBlogComments(e,t){if(null===e){var i=$$(".blog-moderation-filter")[0].select("a.selected");e=i?i[0].readAttribute("class").replace("selected","").strip():"all"}var n=$("site-blogs-select").select("option[selected]")[0],t=n.readAttribute("value"),o=n.readAttribute("data-site-id"),s=n.readAttribute("data-user-id"),i=$$(".blog-moderation-filter a.selected");i.length&&i[0].removeClassName("selected"),$$(".blog-moderation-filter a."+e)[0].addClassName("selected");var r=getBlogCommentsUrl(e,t,o,s);$("blog_moderation_iframe").src=r}function getBlogCommentsUrl(e,t,i,n){var o=new Hash({blog_id:t,type:e,site_id:i,user_id:n,size:"slim",r:parseInt(99999999*Math.random())});return"viewBlogModeration.php?"+o.toQueryString()}function blogModerationAction(e){var t=$("blog_moderation_iframe");if(t){var i=t.contentWindow;if(i){var n={approve:i.approveComments,"delete":i.deleteComments,spam:i.markSpamComments};n[e]&&n[e]()}}}function changeUserLanguage(e){new Ajax.Request(ajax,{parameters:{pos:"changeuserlanguage",lang:e,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc})}function ieVersion(){var e=navigator.appVersion.match(/MSIE.*?(\d+)/i);return e?parseInt(e[1]):!1}function clearPrefilledInput(e,t){e.value==t&&(e.value="",$(e).setStyle({color:""}))}function getPagePermissionHtml(e,t){return e.each(function(e){t+="<label>",t+="store"!==e.kind&&""===e.extlink?'<input type="checkbox" name="allowed_pages[]" value="'+e.id+'" /> ':"-- ",t+=e.title+"</label>",e.children.size()>0&&(t+='<div class="subpages">',t=getPagePermissionHtml(e.children,t),t+="</div>")}),t}function pushLoading(){_loadingLevel||$("pleaseWait")&&jQuery("#pleaseWait").addClass("loading"),_loadingLevel++}function popLoading(){_loadingLevel>0&&_loadingLevel--,_loadingLevel||$("pleaseWait")&&jQuery("#pleaseWait").removeClass("loading")}function htmlEscape(e){return void 0===e||null===e?"":"number"==typeof e?e.toString():e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")}function eventStop(e){e.stop()}function handleDesignerPublishCodes(e,t,i){if(i=i||$("exportText"),e.responseText.match(/%%PURCHASESITES%%/)&&(Weebly.AllDialogs["publishing-status"]&&Weebly.AllDialogs["publishing-status"].close(),showDesignerBillingSetup()),e.responseText.match(/%%GOLIVEWARNING%%/)){var n=i.up(".titled-box");i.show().innerHTML=$("designer-publish-message").innerHTML,Weebly.AllDialogs[n.id].positionDialog()}e.responseText.match(/%%CARDSETUPREQUIRED%%/)&&(i.show().innerHTML='<div style="font-family: Helvetica, Arial, Verdana, sans-serif; font-size: 16px; line-height:1.5; text-align:left; margin-bottom:10px;">Sites cannot be published live until the account holder has setup a credit card</div>'),e.responseText.match(/%%CANTCREATECHARGE%%/)&&(i.show().innerHTML="Error:E119190")}function showDesignerBillingSetup(){Weebly.Restrictions.isDesignerMaster?($("designer-billing-setup-body").update("Before publishing your first website live, you need to setup a billing method."),$("setup-buttons-master").show(),$("setup-buttons-admin").hide()):($("designer-billing-setup-body").update(_W.tl("Before publishing a website live, the account holder needs to setup a billing method.  Please contact the account holder for further information.")),$("setup-buttons-master").hide()),new Weebly.Dialog($("designer-billing-setup"),{modal:!0}).open()}function getInnerWidth(e){return e.offsetWidth-(parseInt(e.getStyle("border-left-width"))||0)-(parseInt(e.getStyle("border-right-width"))||0)-(parseInt(e.getStyle("padding-left"))||0)-(parseInt(e.getStyle("padding-right"))||0)}function ensureObject(e){return e=e||{},0===e.length&&(e={}),e}function hashEach(e,t){$H(e).each(function(e){t(e.key,e.value)})}function hashMap(e,t){var i={};return $H(e).each(function(e){i[e.key]=t(e.key,e.value)}),i}function hashSearch(e,t){if(!t)return $H(e).values()[0];if("object"!=typeof t)return e[t];for(var i in e){var n=e[i];if("object"==typeof n)for(var o in t){var s=t[o];if("function"!=typeof s&&n[o]==s)return n}}}function arraySearch(e,t){if(!t)return e[0];if("object"==typeof t)for(var i=0;i<e.length;i++){var n=e[i];if("object"==typeof n)for(var o in t){var s=t[o];if("function"!=typeof s&&n[o]==s)return n}}}function preventParentScroll(e){attachMousewheelListener(e,function(t,i){Event.stop(t),e.scrollTop-=i})}function attachMousewheelListener(e,t){var i=function(e){var i=e.wheelDelta?e.wheelDelta/4:-(e.detail||0);return t.call(this,e,i)};e.observe(getMousewheelEventName(),i)}function getMousewheelEventName(){var e="_mousewheelEventName",t="mousewheel",i="DOMMouseScroll";if(!window[e]){var n=document.createElement("div");window[e]=void 0!==n["on"+t]?t:i,n=null}return window[e]}function getTextNodesIn(e,t){function i(e){if(3==e.nodeType)(t||!o.test(e.nodeValue))&&n.push(e);else for(var s=0,r=e.childNodes.length;r>s;++s)i(e.childNodes[s])}var n=[],o=/^\s*$/;return i(e),n}function doEvent(e){new Ajax.Request(ajax,{parameters:{pos:"doevent",event:e,cookie:document.cookie,token:Weebly.RequestToken}})}function confirmBouncedEmail(e,t){var i=e.getOffsetParent().id.replace("user-note-","");removeUserNote(i),new Ajax.Request(ajax,{parameters:{pos:"confirmBouncedEmail",email:t,cookie:document.cookie,token:Weebly.RequestToken}})}function preventAJAX(){if(window.inEditor&&inEditor()){var e=require("config");if(e.chromeless)try{throw new Error("Invalid ajax request attempted in script")}catch(t){return console.log(t.message),!0}}return!1}function drawGalleryLoading(e){isGalleryLoading=!0;var t=currentGalleryList(e);if(t){var i=_drawGalleryLoading(),n=t.select("li:last")[0];n?n.insert({after:i}):t.insert({top:i})}}function _drawGalleryLoading(){return"<li class='gallery-loading' style='position:relative;z-index:5;float:left;width:"+Weebly.ImageGallery.framePercentWidth+"%;'>"+"<div style='width:100%;padding:0 0 "+Weebly.ImageGallery.framePercentHeight+"%'></div></li>"}function clearGalleryLoading(e){isGalleryLoading=!1;var t=currentGalleryList(e);t&&t.select("li.gallery-loading").each(Element.remove)}function currentGalleryList(e){var t=Weebly.ImageGallery.currentElement||e;return t?t=$(t+"-gallery"):void 0}function filterCaptionData(e){return _.escape(e)}function unfilterCaptionData(e){return _.unescape(e)}function setupFileUploader(e){$("flashContainer").observe("mousemove",function(e){e.stop()}),e.el.observe("mousemove",function(e){e.stop()}),e.el.stopObserving("mouseover").addClassName("weebly-upload-initiator").observe("mouseover",function(){_fileUploaderMouseover(e)}),setupTouchUploader(e)}function setupTouchUploader(e){var t=Weebly.jQuery(e.el).siblings(".file-input-uploader");return isFlashInstalled()||"video"==e.type||!Modernizr.touch||"slideshow"==e.type?(t.attr("disabled","disabled"),void 0):(t.removeAttr("disabled"),t.attr("accept",getMimeFileTypes(e.type,e.areaType)),e.multipleFiles?t.attr("multiple","multiple"):t.removeAttr("multiple"),t.one("change",function(){if(this.files){("gallery"==e.type||"slideshow"==e.type)&&Weebly.ImageGallery.uploadStart(e.ucfid),"video"==e.type&&(dndEnabled&&Weebly.DragAndDropDialog.close(),showVideoUploading(e.ucfid));var t=this.files[0];initProgressBar(t);var i={};i.action="/weebly/fileUpload.php",i.success=function(i){uploadFileComplete(t,o),"function"==typeof e.successCallback&&e.successCallback({},i.responseText)};var n=Weebly.AjaxUploader(i);t.name;var o={Filedata:t,Filename:t.name,ext:t.name.replace(/.*\.([^\.]*)/,"$1"),cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],newid:Math.floor(10000001*Math.random()),type:e.type||"",size:e.width||"",ucfid:e.ucfid||"",ucfpid:e.ucfpid||"",area_page_id:e.area_page_id||"",area_type:e.areaType||"",area_name:e.areaName||"",height:e.height||""};n.send(o)}}),void 0)}function _fileUploaderMouseover(e){if(isFlashInstalled()){var t=$("flashContainer");showFlashContainer(e.zIndex||19),Prototype.Browser.Gecko?t.clonePosition(e.el):(t.style.position="relative",t.clonePosition(e.el),t.style.position="absolute"),forceFlashPosition=!0,t.stopObserving("mousedown").observe("mousedown",function(){selectUpload(e.type,e.size,e.ucfid,e.ucfpid,e.successCallback,e.areaPageID,e.areaType,e.areaName,e.height,e.multipleFiles)}),document.observe("mousemove",removeFlashUploader)}}function removeFlashUploader(e){var t=Event.element(e);isInitialVideo(t)||isInitialImage(t)||t.hasClassName("weebly-upload-initiator")||"flashContainer"===t.id||!t.up||t.up("#flashContainer")||(forceFlashPosition=!1,hideFlashContainer(),Weebly.Elements.skipMenuBar=!1,$("flashContainer").stopObserving("mousedown"),document.stopObserving("mousemove",removeFlashUploader))}function hideFlashContainer(){if($("flashContainer")&&!forceFlashPosition){$("flashContainer").style.zIndex="-1";try{swfu.setButtonDimensions(1,1)}catch(e){}}}function showFlashContainer(e){if(swfu.containerShown=1,$("flashContainer")&&!forceFlashPosition){$("flashContainer").style.zIndex=void 0===typeof e?"21":e;try{swfu.setButtonDimensions(600,600)}catch(t){}}isFlashInstalled()||jQuery("#flashContainer").css({opacity:"0","-moz-opacity":"0","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",cursor:"pointer"})}function uploadSuccess(e,t){if(t&&"%%TOOMANYPHOTOS%%"==t)showWarning(_W.tl("There are too many photos in your photo gallery. Please create a new gallery and try re-uploading the photo. Thanks!"));else if(t&&"%%TOOLARGE%%"==t)$("upload"+e.id).innerHTML=_W.tl('<span style="color: red;">Image is too large. Please resize and try again.</span>'),removeProgressBox(e.id);else if(t&&"%%LARGESITE%%"==t)$("upload"+e.id).innerHTML=_W.tl('<span style="color: red;">Your site is too large. Please delete a few elements, and try again.</span>'),removeProgressBox(e.id);else if(t&&"%%LARGESITESOFTLIMIT%%"==t)$("upload"+e.id).innerHTML=_W.tl('<span style="color: red;">Your account has uploaded quite a few files. Please contact support to continue uploading.</span>'),removeProgressBox(e.id);else if(t&&"%%INVALIDFILETYPE%%"==t)$("upload"+e.id).innerHTML=_W.tl('<span style="color: red;">You are not allowed to upload this type of file.</span>'),removeProgressBox(e.id);else if(t&&"%%CLIENTSTORAGEUPRADE%%"==t)showWarning(_W.tl("You've reached the space limit for your website plan.  Please contact your designer for more information.")),removeProgressBox(e.id);else{if(e._parameters&&(swfu.uploadOptions[e.id]=e._parameters),t&&t.match(/%%QUEUEID:[0-9]+%%[^%]+%%/)){var i=t.match(/%%QUEUEID:([0-9]+)%%([^%]+)%%/);swfu.uploadOptions[e.id].qid=i[1],swfu.uploadOptions[e.id].video_name=i[2]}var n=swfu.uploadOptions[e.id].callbackID;n&&swfuCallbacks[n](e,t)}}function uploadFileComplete(e,t){var i=t||swfu.uploadOptions[e.id],n=$("upload"+e.id);if(!i.done){if(n&&(n.down(".title").update(_W.tl("Upload Complete")),_uploadProgress(1),removeProgressBox(e.id)),!i.callbackID){if("image"==i.type){var o=i.ext.toLowerCase();"bmp"==o&&(o="jpg"),updateImageElement("/uploads/"+userIDLocation+"/"+i.newid+"."+o,i.ucfid,i.ucfpid)}else"file"==i.type||"audio"==i.type||"gallery"==i.type||"doc"==i.type||"flash"==i.type||"slideshow"==i.type?("gallery"!==i.type&&"file"!==i.type||!dndEnabled||Weebly.DragAndDropDialog.close(),swfu.dontSave=1,updateList(currentPage),editorApp.vent.once("editorListUpdated",function(){swfu.dontSave=0})):"video"==i.type&&(dndEnabled&&Weebly.DragAndDropDialog.close(),refreshVideoElement(i.ucfid));("gallery"==i.type||"slideshow"==i.type)&&Weebly.ImageGallery.uploadComplete(i.ucfid)}if(isFlashInstalled()){var s=swfu.getStats();s&&s.files_queued>0&&swfu.startUpload()}}}function dialogStart(){swfu.currentDialog||(swfu.currentDialog={}),swfu.currentDialog.ucfid=swfu.current.ucfid,swfu.currentDialog.ucfpid=swfu.current.ucfpid}function dialogComplete(){var e=swfu.getStats();e&&e.files_queued>0&&swfu.startUpload()}function queueError(e,t){if(t==SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT)if(this&&this.current&&this.current.type&&"video"==this.current.type)showVideoSizeError();else{var i=Weebly.Restrictions.accessValue("file_upload_limit"),n=Math.floor(i/1024e3),o=Weebly.Restrictions.isUpgradable("file_upload_limit");o&&!isClientSite?modalProFeatures(_W.tl("The maximum file upload size for your current plan is:")+n+"MB. "+_W.tl("Please upgrade to upload larger files!"),"main",o):showError(_W.tl("The maximum file upload size is: .")+n+"MB")}}function uploadError(e,t,i){if(t==SWFUpload.UPLOAD_ERROR.FILE_CANCELLED||t==SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED)$("upload"+e.id).innerHTML=_W.tl("Upload cancelled.");else if(-200==t&&"403"===i){var n=require("editor/dialogs/UploadVirusError");Weebly.DragAndDropDialog.close(),editorApp.showDialog(new n)}else-220==t?showError("<p>"+_W.tl("There was an error uploading your file")+".<br /><br />"+(isClientSite?"":_W.tl("Please try the upload again or take a look at our ")+"<br/><a href='http://kb.weebly.com/troubleshoot-upload.html' target='_blank'>"+_W.tl("troubleshooting guide")+"</a> "+_W.tl("to find the cause and solution."))+"</p>","",!0):showUploadError(t,i);fireTrackingEvent("WeeblyError","Upload Error",t+" - "+i),removeProgressBox(e.id);var o=swfu.uploadOptions[e.id];("gallery"==o.type||"slideshow"==o.type)&&Weebly.ImageGallery.uploadError(o.ucfid)}function uploadStart(e){if(swfu.currentUpload=e.id,"video"==swfu.uploadOptions[e.id].type&&!isValidVideoFile(e.name))return showVideoTypeError(),swfu.cancelUpload(e.id),!1;var t,i;if(e.plainUploader)t=e._parameters.type,i=e._parameters.ucfid;else{t=swfu.uploadOptions[e.id].type||"",i=swfu.uploadOptions[e.id].ucfid||"",swfu.uploadOptions[e.id].ext=e.name.replace(/.*\.([^\.]*)/,"$1");var n={type:t,width:swfu.uploadOptions[e.id].size||"",ucfid:i,ucfpid:swfu.uploadOptions[e.id].ucfpid||"",newid:swfu.uploadOptions[e.id].newid||"",cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],area_page_id:swfu.uploadOptions[e.id].area_page_id||"",area_type:swfu.uploadOptions[e.id].area_type||"",area_name:swfu.uploadOptions[e.id].area_name||"",height:swfu.uploadOptions[e.id].height||""};swfu.setPostParams(n),swfu.setUploadURL("/weebly/fileUpload.php")}initProgressBar(e),("gallery"==t||"slideshow"==t)&&Weebly.ImageGallery.uploadStart(i),"video"==t&&(dndEnabled&&Weebly.DragAndDropDialog.close(),showVideoUploading(i)),"flash"==t&&dndEnabled&&Weebly.DragAndDropDialog.close()}function initProgressBar(e){var t=document.createElement("li");t.id="upload"+e.id;var i=Mustache.compile('<div class="content"><span class="title">{{title}}</span><div class="messages"><div><div class="upload-meter"><span id="{{fileId}}progress" class="upload-meter-progress"></span></div><span id="uploadContainer{{fileId}}" class="upload-status"></span><a href="#" class="btn btn-danger abort" onclick="cancelFile(\'{{fileId}}\'); return false;">'+_W.tl("Cancel")+"</a>"+"</div>"+"</div>"+"</div>");t.className="w-ui w-upload-dialog",t.innerHTML=i({title:_W.tl("Uploading File"),fileId:e.id}),$("notifications").appendChild(t)}function uploadProgress(e,t){if(e.size==t){var i=$("uploadContainer"+swfu.currentUpload);i.innerHTML=_W.tl("Virus scanning..."),_uploadProgress(1)}else _uploadProgress(t/e.size)}function _uploadProgress(e){var t=document.getElementById(swfu.currentUpload+"progress");t&&(t.style.width=Math.min(Math.ceil(100*e),100)+"%")}function getMimeFileTypes(e,t){var i="*.*";return"audio"==e?i="audio/*":"imageperfect"==e||"image"==e||"gallery"==e||"slideshow"==e||"headerslideshow"==e||"logo"==t||"image"==t?i="image/*":"file"==e||"link_file"==e?i="*/*":"doc"==e?i="*/*":"video"==e?i="video/*":"flash"==e&&(i="application/x-shockwave-flash"),i}function uploadFileQueued(e){swfu.uploadOptions||(swfu.uploadOptions={}),swfu.uploadOptions[e.id]||(swfu.uploadOptions[e.id]={}),swfu.uploadOptions[e.id].ext=e.name.replace(/.*\.([^\.]*)/,"$1"),swfu.uploadOptions[e.id].newid=Math.floor(10000001*Math.random()),swfu.uploadOptions[e.id].size=swfu.current.size,swfu.uploadOptions[e.id].type=swfu.current.type,swfu.uploadOptions[e.id].callbackID=swfu.current.callbackID,swfu.uploadOptions[e.id].area_page_id=swfu.current.area_page_id,swfu.uploadOptions[e.id].area_type=swfu.current.area_type,swfu.uploadOptions[e.id].area_name=swfu.current.area_name,swfu.uploadOptions[e.id].height=swfu.current.height,swfu.uploadOptions[e.id].ucfid=swfu.currentDialog.ucfid,swfu.uploadOptions[e.id].ucfpid=swfu.currentDialog.ucfpid,swfu.uploadOptions[e.id].fileid=e.id,swfu.uploadOptions[e.id].done=null,stopChoosingImage()}function determineUpload(e,t,i,n,o,s,r,a,l,c){dndEnabled&&(Weebly.DragAndDropDialog.open({type:e,ucfid:i,ucfpid:n,areaName:a,areaPageID:s,areaType:r,height:l,size:t}),Weebly.Elements.unselectElement()),selectUpload(e,t,i,n,o,s,r,a,l,c)}function selectUpload(e,t,i,n,o,s,r,a,l,c){if(Weebly.Elements.upload=1,dndEnabled)switch(e){case"audio":o=function(){Weebly.DragAndDropDialog.close(),swfu.dontSave=0,updateList(currentPage)};case"video":case"image":case"gallery":case"slideshow":case"file":case"flash":Weebly.Elements.skipMenuBar=!0}else if(!isFlashInstalled())return showFlashWarning(_W.tl("Adobe Flash Player is required in order to upload files.")),void 0;var u="All files...",d="*.*";"audio"==e?(u="MP3 files...",d="*.mp3;*.MP3"):"imageperfect"==e||"image"==e||"background"==e||"gallery"==e||"slideshow"==e||"headerslideshow"==e||"logo"==r||"image"==r?(u="Image files...",d="*.gif;*.GIF;*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.bmp;*.BMP"):"file"==e||"link_file"==e?(u="All files...",d="*.*"):"doc"==e?(u="Document files...",d="*.doc;*.DOC;*.docx;*.DOCX;*.ppt;*.PPT;*.pptx;*.PPTX;*.pps;*.PPS;*.xls;*.XLS;*.xlsx;*.XLSX;*.pdf;*.PDF;*.ps;*.PS;*.odt;*.ODT;*.odp;*.ODP;*.ods;*.ODS;*.odf;*.ODF;*.odg;*.ODG;*.sxw;*.SXW;*.sxi;*.SXI;*.sxc;*.SXC;*.sxd;*.SXD;*.tif;*.TIF;*.tiff;*.TIFF;*.txt;*.TXT;*.rtf;*.RTF"):"video"==e?(u="Video files...",d="*.*"):"flash"==e&&(u="SWF files...",d="*.swf;*.SWF"),swfu.current||(swfu.current={}),swfu.current.size=t,swfu.current.type=e,swfu.current.ucfid=i,swfu.current.ucfpid=n,swfu.current.area_page_id=s,swfu.current.area_type=r,swfu.current.area_name=a,swfu.current.height=l,o?(swfu.current.callbackID=++swfuCallbackGUID,swfuCallbacks[swfu.current.callbackID]=o):swfu.current.callbackID=null,plainUploaderFileTypes(d,u);try{"video"==e?swfu.setFileSizeLimit(Math.floor(Weebly.Restrictions.accessValue("video_upload_limit")/1e3)):swfu.setFileSizeLimit(Math.floor(Weebly.Restrictions.accessValue("file_upload_limit")/1e3)),swfu.setFileTypes(d,u),"gallery"==e||"slideshow"==e||"headerslideshow"==e||c===!0?swfu.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES):swfu.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}catch(h){}}function cancelFile(e){$("upload"+e).innerHTML="Upload Canceled",cancelPlainUpload(e)||(e==swfu.currentUpload&&swfu.stopUpload(),swfu.cancelUpload(swfu.uploadOptions[e].fileid)),removeProgressBox(e);var t=swfu.uploadOptions[e];("gallery"==t.type||"slideshow"==t.type)&&Weebly.ImageGallery.uploadCancel(swfu.uploadOptions[e].ucfid),"video"==t.type&&refreshVideoElement(swfu.uploadOptions[e].ucfid)}function removeProgressBox(e){e=e?e:swfu.currentUpload,swfu.uploadOptions&&swfu.uploadOptions[e]&&(swfu.uploadOptions[e].done=1),setTimeout(function(){Effect.Fade("upload"+e)},2e3),setTimeout(function(){$("upload"+e)&&$("notifications").removeChild($("upload"+e))},5e3)}function swfUploadLoaded(){try{swfu.containerShown||(showFlashContainer(),hideFlashContainer())}catch(e){}}function showVideoUploading(e){var t=$(e);if(!t)return!1;var i=t.down("iframe");return i?(i.src+="&uploading=1",!0):!1}function refreshVideoElement(e){var t=$(e),i=$("video-type-error"),n=t.down(".wsite-video-wrapper ");if(t){var o=t.down("iframe").contentWindow.location;try{o.href.match(/video\=\&/)&&n&&n.hasClassName("wsite-video-height-282")&&!i&&n.removeClassName("wsite-video-height-282").addClassName("wsite-video-height-auto"),o.href.match(/&uploading/)?o.href=o.href.replace(/&uploading=1/g,""):o.reload()}catch(s){updateList()}}}function isValidVideoFile(e){var t=["wlmp",".htm",".exe",".mp3","tch1","swmm","pptx","html","docx",".url",".mht","hive","bloc",".wma",".ppt",".pdf",".ifo",".zip",".doc",".bup",".wp3",".key",".wpl","proj","atch",".wav","xspf",".fla","prel","tch2",".jpg","jpeg",".gif",".png"],i=!0,n=e.substr(-4).toLowerCase();return t.each(function(e){n===e&&(i=!1)}),i}function showVideoSizeError(){new Weebly.Dialog("video-size-error",{modal:!0}).open()}function showVideoTypeError(){new Weebly.Dialog("video-type-error",{modal:!0}).open()}function handleVideoEncodingMessages(e){var t=e.originalEvent;if(t&&t.data&&t.data.type){var i=t.data;switch(i.type){case"updateEncodedVideo":updateEncodedVideo(i.ucfid,i.videoFile,i.imageFile);break;case"videoClick":clickHandler(i.event,i.ucfid)}}}function updateEncodedVideo(e,t,i){if(swfu.dontSave=0,$(e))try{Weebly.Elements.currentElement&&Weebly.Elements.currentElement.id==e?(Weebly.Elements.getPropertyByReference("<!IMAGEFILE!>").property_result=i,Weebly.Elements.getPropertyByReference("<!VIDEOFILE!>").property_result=t,hideFlashContainer()):updateList(currentPage)}catch(n){}}function getPlainUploader(e){var t=plainUploaderHash[e];if(!t){var i={queued:function(e){Weebly.Elements.unselectElement(),e._parameters={ext:e.name.replace(/.*\.([^\.]*)/,"$1"),newid:e.id,width:swfu.current.size,type:swfu.current.type,ucfid:swfu.current.ucfid,ucfpid:swfu.current.ucfpid,area_page_id:swfu.current.area_page_id,area_type:swfu.current.area_type,area_name:swfu.current.area_name,height:swfu.current.height},hideError(),fireTrackingEvent("WeeblyAltUpload","Start","orig swfu error: "+this._swfu_msg+" - "+this._swfu_errcode)},start:function(e){this.parameters=e._parameters,uploadStart(e)},progress:function(){},complete:function(e,t){uploadSuccess(e,t),uploadFileComplete(e,e._parameters),fireTrackingEvent("WeeblyAltUpload","Complete","orig swfu error: "+this._swfu_msg+" - "+this._swfu_errcode)}};plainUploaderHash[e]=t=new Weebly.PlainUploader(i)}return t}function showUploadError(e,t){showError("<p>"+_W.tl("There was an error uploading your file")+" (error "+e+"). <br />"+_W.tl("Would you like to try again using our basic file uploader?")+"</p>"+"<div style='padding-bottom:10px'>"+"<span id='upload-fallback-button' style='position:relative;display:inline-block'>"+"<button style='font-size:16px'>"+_W.tl("Try Basic Uploader")+"</button>"+"</span>"+"</div>","",!0);var i=getPlainUploader("error");i._swfu_errcode=e,i._swfu_msg=t;var n=$("upload-fallback-button");i.show(n,n)}function showTip(e,t,i,n,o,s,r){var a=jQuery;n||(n=tipsShown,tipsShown++);var l="string"==typeof t?a("#"+t):a(t);if(1==l.length){1==o?s=s||200:s||(s=400);var c=s+11+11,u=a(document.body).width(),d=l.offset(),h={height:l.height(),width:l.width()},p=d.top+h.height+12,f=d.left+h.width/2-c/2;20>f?f=20:f+c>u-20&&(f=u-20-c);var m=d.left+h.width/2-13-f;a("#tips").prepend("<div id='tip"+n+"' class='tooltip' style='display:none'>"+"<div class='carrot' style='left:"+m+"px'></div>"+"<a class='close'></a>"+"<div class='content' style='width:"+s+"px'>"+e+"</div>"+"</div>");var g=a("#tip"+n).outerHeight();p+g>a(window).height()&&(p=d.top-g-10,a("#tip"+n+" .carrot").remove()),r&&(tooltipCallbacks["tip"+n]=r),a("#tip"+n).css({position:"absolute",top:p+"px",left:f+"px"}).on("mouseup",function(e){e.stop()}),a("#tip"+n+" a.close").on("click",function(){hideTip("tip"+n,1)}),1==o?a("#tip"+n).show():2==o?a("#tip"+n).fadeIn():setTimeout(function(){a("#tip"+n).css({position:"absolute",left:f+"px",top:getInnerHeight()/2+h.height+"px"}),a("#tip"+n).show(),a("#tip"+n).animate({top:p+"px"},1e3,"easeOutBounce")},500)}}function hideTip(e,t){var i=jQuery;if(e&&i("#"+e).length){var n=tooltipCallbacks[e];n&&delete tooltipCallbacks[e],1==t?(i("#"+e).hide(),i("#tips").remove("#"+e),n&&n()):i("#"+e).fadeOut(function(){i("#"+e).length&&i("#"+e).parent()==i("#tips")&&(i("#tips").remove(i("#"+e)),n&&n())})}}function hideAllTips(){for(var e=jQuery,t=0;t<e("#tips").children().length;t++)hideTip(e("#tips").children()[t].id)}function inEditor(){return!0}function setWidth(){setResponsiveWidth();var e=jQuery(window).width(),t=jQuery(window).height(),i=t-jQuery("#scroll_container").offset().top;jQuery("#icontent_container").css("minHeight",i),updateElementCategoryHeights(),Weebly.PageManager.updateSize(),window.resizeThemeBrowser&&window.resizeThemeBrowser(e,t)}function setResponsiveWidth(){var e=jQuery(window).width()<1200;require("editor/app").vent.trigger("editor:toolbar:toggleCollapse",e)}function setHeight(){var e=document.body.clientHeight-100;Element.setStyle("initial_loading",{height:e+"px"})}function resizeCustomHtml(e){var t=$("custom-frame-"+e);t.setStyle({height:jQuery(t.contentWindow.document.body).outerHeight()+"px"})}function submitExternal(e){$(e+"ErrorDiv").style.display="none",$("externalSubmitBtn").style.opacity=.5,$("externalSubmitBtn").style.filter="alpha(opacity=50)",$("externalSubmitBtn").style.display="inline-block";var t=Form.serialize(e+"_form",!0);t.pos="externalaccount",t.type=e,t.cookie=document.cookie,t.token=Weebly.RequestToken,new Ajax.Request(ajax,{parameters:t,onSuccess:function(t){handlerSubmitExternal(t,e)},onFailure:errFunc,bgRequest:!0})}function handlerSubmitExternal(e,t){if(e.responseText.match("SUCCESS")){var i=e.responseText.replace("SUCCESS:","");remoteAccounts[t]={remoteSite:t,remoteId:i},updateList(),Pages.go("main"),Weebly.AllDialogs[t].close(),$(t+"ErrorDiv").style.display="none",$("externalSubmitBtn").style.opacity=1,$("externalSubmitBtn").style.filter="alpha(opacity=100)",$("externalSubmitBtn").style.display="none"}else e.responseText.match("ERROR")||(e.responseText=_W.tl("ERROR: Temporary error. Please try again.")),$(t+"ErrorDiv").innerHTML=e.responseText,$(t+"ErrorDiv").style.display="block",$(t+"ErrorDiv").setStyle({color:"#FF0000"}),$("externalSubmitBtn").style.opacity=1,$("externalSubmitBtn").style.filter="alpha(opacity=100)",$("externalSubmitBtn").style.display="none"}function safeCumulativeOffset(e){return jQuery(e).offset()}function setDrag(){recentDrag=1}function notBeenDragged(){return-1==navigator.appVersion.indexOf("MSIE")?1==recentDrag?(recentDrag=0,!1):!0:!0}function handlerDragEndSplitpane(e,t,i,n){for(var o=e.serialize(),s=o.split(/&/),r=new Array,a=0;a<s.length;a++){var l=s[a].split(/=/);r[l[0]]=l[1]}for(var c=i.split(/-/),u=new Array,a=0;a<c.length;a++)u.push(c[a]+"-"+r["div"+(a+1)+"_width"]);var d=u.join(":");Weebly.Slideshow.updateSize()&&$(n).select(".columnlist").each(MultiColumnElement.resizeColumns),new Ajax.Request(ajax,{parameters:{pos:"savecolumn",elementid:n,width:d,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerFuncDragEndSplitpane,onFailure:errFunc,bgRequest:!0})}function handlerFuncDragEndSplitpane(){}function flashMouseUpHandler(e,t){if(document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("mouseup",!0,!1,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),t.parentNode.dispatchEvent(i)}}function clickHandler(e,t){if(!_W.pauseClickHandler&&(hideAllTips(!0),!Weebly.SlideshowAdmin.isManaging()&&!Weebly.ImageGallery.isSorting)){var i;if(t)i=$(t+"");else{if(!e)var e=window.event;
e.target?i=e.target:e.srcElement&&(i=e.srcElement),3==i.nodeType&&(i=i.parentNode)}if(!i||"weebly_image_extras_helper"!==i.id){if(i&&"string"==typeof i.id){if(i.id.match(/coverbox/)&&(i=i.up(".element")),jQuery(i).closest("#form-cover, #link-info-box, .weebly-dialog, #image-chooser, .w-element-controls").length)return;var n=$(i).hasClassName("editable-text")?$(i):$(i).up(".editable-text")}if("string"!=typeof i.id||!n||"H2"!=n.tagName&&"P"!=n.tagName&&"DIV"!=n.tagName)if(n&&n.id.match(/[0-9]Edit/));else if(("string"!=typeof i.id||"scroll_container"==i.id)&&"string"==typeof i.id||isAParent("editMenu",i)||isAParent("commerce_editor_product_short_description_controls",i)||isAParent("createLink",i)||isAParent("colorChooserDiv",i)||isAParent("new-color-chooser",i)||isAParent("editmenu-color-chooser",i)||isAParentMatch(/menuBar(Advanced)?Div/,i)||isAParent("notifications",i)||isAParentByClass("customhtml_textarea",i)||isAParent("flashContainer",i)||isInitialImage(i)||isPageLayoutImage(i)||isInitialVideo(i)||isAPlatformElement(i)||!isAParent(document,i))"string"==typeof i.id&&"colorSwatch"==i.id&&myColorPicker.toggle(e);else{if(editBoxSelectingText||optionsBoxSelectingText)return optionsBoxSelectingText=!1,void 0;var o=i.up("li");if(o&&o.hasClassName("wsite-multicol-li"))return Weebly.Elements.unselectElement(),void 0;var s=isAParentByClass("element",i);s?Weebly.Elements.selectElement(s):isAParentByClass("wsite-header",i)?Weebly.Elements.unselectElement():isAParent("weeblyLightbox",i)&&!isAParent("weeblyLightboxInside",i)?Pages.go("main"):Weebly.Elements.unselectElement()}else n.ondblclick&&n.ondblclick(),Weebly.Elements.unselectElement();editBoxSelectingText=!1}}}function saveProperties(e,t,i){if(uploadInProgress>0)showError(_W.tl("Your image file is still uploading. Please wait until the upload is finished."));else{Element.setStyle("errorProperties",{display:"none"});for(var n="",o="",s=$("propertiesBasic").getElementsByTagName("td"),r=s.length,a=!1,l=0;r>l;l++)for(var c=s[l].getElementsByTagName("form"),u=0;u<c.length;u++){var d,h=c[u].childNodes[0],p=h.name;if(d="checkbox"==h.type?c[u].childNodes[0].checked?1:0:c[u].childNodes[0].value,o+=p+String.fromCharCode(3)+d+String.fromCharCode(2),"enable_nav_more"==p&&(DISABLE_NAV_MORE=!d),"site_title"==p){currentSiteTitle=c[u].childNodes[0].value;var f=$("wsite-title");f&&(f.innerHTML=currentSiteTitle)}"hide_title"==p&&(hideTitle="1"==c[u].childNodes[0].value),"copyright_show"==p&&(!a&&parseInt(c[u].childNodes[0].value)?updateFooterTextShown(!0):updateFooterTextShown(!1)),"copyright_text"==p&&(updateFooterText(c[u].childNodes[0].value),c[u].childNodes[0].value||(a=!0)),"site_password"==p&&Weebly.Restrictions.hasAccess("editable_site_password")&&(newSitePassword=c[u].childNodes[0].value,Weebly.PageManager.sitePasswordChanged(sitePassword,newSitePassword),sitePassword=newSitePassword)}for(var m=$("propertiesAdvanced").getElementsByTagName("td"),g=m.length,l=0;g>l;l++)for(var c=m[l].getElementsByTagName("form"),u=0;u<c.length;u++)n+=c[u].childNodes[0].name+String.fromCharCode(3)+c[u].childNodes[0].value+String.fromCharCode(2);new Ajax.Request(ajax,{parameters:{pos:e,reqid:t,keys:o+n,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){handlerFuncSaveProperties(e,i)},onFailure:errFunc,bgRequest:!0})}}function handlerFuncSaveProperties(e,t){if(1==e.responseText.isJSON()){var i=e.responseText.evalJSON();0==i.result&&showDeniedAction(i.error)}e.responseText.indexOf("RELOAD")>=0&&window.location.reload(),e.responseText.indexOf("the following problems")>0?($("errorProperties").innerHTML=e.responseText,Effect.Appear("errorProperties",{duration:.5})):(updateList(),t||Pages.go("main"))}function isAPlatformElement(e){return jQuery(e).closest(".platform-element-settings").length>0}function goBlogPage(e){resetScrollTop=1,e=e.startsWith("/")?e:"/"+e;var t=currentPage.replace(/^(\d+).*$/,"$1")+e;Pages.go("updateList",t)}function goCommercePage(e){return require("config").chromeless?(require("tablet/api/external").navClicked(e),void 0):(resetScrollTop=1,e=e.startsWith("/")?e:"/"+e,Pages.pageConstructor.editMenu.go(),Pages.go("updateList","0"+e),clearTimeout(Weebly.Commerce.Editor.shouldUpdateListTimer),void 0)}function goNewBlogPost(){currentBlog.saving=0,Pages.go("goBlogPost",1,1)}function goBlogPost(e,t){currentBlog.skipToComments=t,Pages.go("goBlogPost",e)}function goBlogComment(e,t){currentBlog.skipToComments="comments",currentBlog.skipToCommentId=t,Pages.go("goBlogPost",e)}function goDiscardDraft(e,t){if(t)var i="cancel-blog-post-prompt",n="cancel-blog-post-ok",o="cancel-blog-post-cancel";else var i="discard-blog-draft-prompt",n="discard-blog-draft-ok",o="discard-blog-draft-cancel";var s=function(){new Ajax.Request(ajax,{parameters:{pos:"blogdiscard",pageid:e,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:function(){Pages.go("updateList",currentPage)}})};if(Weebly.BlogEditor.neverEdited&&t)return s(),void 0;var r=new Weebly.Dialog(i,{modal:!0,inner_class:"weebly-dialog-inner-red",showClose:!0});$(n).stopObserving("click").observe("click",function(e){r.close(),s(),e.stop()}),$(o).stopObserving("click").observe("click",function(e){r.close(),e.stop()}),r.open()}function goPublishPost(e){return 0==settingQuickExport&&!isClientSite&&currentPagePublished?(Weebly.BlogEditor.allowSwitch=!0,_W.domainMenuLocation="repeat-use",Pages.go("domainMenu","blogpostpublish",jQuery.extend(!0,{},currentBlog)),Weebly.BlogEditor.allowSwitch=!1,void 0):(1!=currentBlog.publishingPost&&(currentBlog.publishingPost=1,1==currentBlog.postId&&(currentBlog.saving=1),new Ajax.Request(ajax,{bgRequest:!0,parameters:{pos:"blogpublish",pageid:e,title:Weebly.BlogEditor.getTitleValue(),categories:Weebly.BlogEditor.getCategoriesValue(),comments:Weebly.BlogEditor.getCommentsValue(),date:Weebly.BlogEditor.getDateValue(),shares:Weebly.BlogEditor.getSharesValue(),cookie:document.cookie,token:Weebly.RequestToken},onComplete:function(){currentBlog.publishingPost=0},onFailure:errFunc,onException:exceptionFunc,onCreate:function(){currentPagePublished&&Weebly.PublishWindow.open(Weebly.PublishWindow.NewBlogPost)},onSuccess:function(e){var t=e.responseText.evalJSON(!0);t&&(currentPagePublished?(Weebly.PublishWindow.defer(t.html),Weebly.BlogEditor.allowSwitch=!0,Pages.go("blogPostPublishSuccess"),Weebly.BlogEditor.allowSwitch=!1):Pages.go("updateList",currentPage))}})),void 0)}function goSavePost(e){var t=function(){new Ajax.Request(ajax,{bgRequest:!0,parameters:{pos:"blogsave",postid:e,title:Weebly.BlogEditor.getTitleValue(),categories:Weebly.BlogEditor.getCategoriesValue(),comments:Weebly.BlogEditor.getCommentsValue(),date:Weebly.BlogEditor.getDateValue(),permalink:Weebly.BlogEditor.getPermalinkValue(),shares:Weebly.BlogEditor.getSharesValue(),cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onCreate:function(){currentPagePublished&&Weebly.PublishWindow.open(Weebly.PublishWindow.BlogPost)},onSuccess:function(e){currentPagePublished?(Weebly.PublishWindow.defer(e.responseText),Weebly.BlogEditor.allowSwitch=!0,Pages.go("blogPostPublishSuccess"),Weebly.BlogEditor.allowSwitch=!1):Pages.go("updateList",currentPage)}})};window.isContentSaving?Weebly.Events.addListener("saveContentSuccess",{once:!0,func:t,removeOn:"saveContentFailure"}):t()}function goStashPost(e,t,i){t=t||function(){Pages.go("updateList",currentPage)},new Ajax.Request(ajax,{parameters:{pos:"blogstash",postid:e,title:Weebly.BlogEditor.getTitleValue(),categories:Weebly.BlogEditor.getCategoriesValue(),comments:Weebly.BlogEditor.getCommentsValue(),date:Weebly.BlogEditor.getDateValue(),permalink:Weebly.BlogEditor.getPermalinkValue(),shares:Weebly.BlogEditor.getSharesValue(),cookie:document.cookie,token:Weebly.RequestToken},bgRequest:i||!1,onFailure:errFunc,onException:exceptionFunc,onSuccess:t})}function goDeletePost(e,t){var i=function(){new Ajax.Request(ajax,{parameters:{pos:"blogdeletepost",postid:e,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:function(){t?Pages.go("updateList",currentPage):updateList(currentPage)}})};if(t){var n=new Weebly.Dialog("delete-blog-post-prompt",{modal:!0,showClose:!0,inner_class:"weebly-dialog-inner-red"}),o=$("delete-blog-post-ok");o.stopObserving("click"),o.observe("click",function(e){n.close(),i(),e.stop()});var s=$("delete-blog-post-cancel");s.stopObserving("click"),s.observe("click",function(e){n.close(),e.stop()}),n.open()}else i()}function showBlogCaptchaDetails(e){"smart"==e?$("smartCaptchaDetails").show():$("smartCaptchaDetails").hide()}function goDeleteComment(e,t){t=t?"1":"0";var i="data-blog-comment-parent-id",n=$(e),o=n.readAttribute(i),s=$$("div["+i+"="+o+"]"),r=function(e){var t=[];return $$("div["+i+"="+e+"]").each(function(e){t.push(e),t=t.concat(r(e.readAttribute("id")))}),t},a=function(t){var i=t.responseText.evalJSON(!0);if(i)if("deleted"==i.action){if(o&&1==s.length){var a=$(o).select("span.delete-replies")[0];if(a){var l=a.select("input")[0];l.writeAttribute("checked"),a.hide()}}i.deletedReplies&&r(e).each(Element.remove),new Effect.Fade(n,{afterFinish:Element.remove.curry(n)})}else if("hidden"==i.action){var c=n.select(".blogCommentText p")[0];c.update("<em>"+i.hiddenText+"</em>");var u=n.select(".delete-replies input[type=checkbox]")[0];u.writeAttribute("checked"),u.writeAttribute("disabled")}};new Ajax.Request(ajax,{parameters:{pos:"blogdeletecomment",commentid:e,deleteReplies:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc,onException:exceptionFunc,onSuccess:a})}function resetBlogGlobals(){currentBlog.postId=0,currentBlog.title="",currentBlog.categories="",currentBlog.permalink="",currentBlog.comments="",currentBlog.date="",currentBlog.shares=""}function handlerTrackback(e){$("trackback-url").value="",$("trackback-status").innerHTML=e.responseText.match("%%SUCCESS%")?_W.tl("Success!"):_W.tl("Trackback failed.")}function calendarCallback(e,t){var i=$("blogTable").select(".blog-date span.date-text")[0];i.innerHTML=t;var n=$("blog-date-field");n.value=t,n.hidden_change&&n.hidden_change()}function handlerDisplayPageProperties(e){$("saveProperties").innerHTML="<div style='height: 50px; margin-top: 20px;'><a href='#' style='float: left;' onClick=\"saveProperties('editpage', '"+currentPage+"'); return false;\"><img src='http://"+editorStatic+_W.tli("/weebly/images/savebtn.jpg")+"' border='0'/></a><div style='margin: 23px 0 0 5px; font-size: 14px; float: left;'> "+_W.tl("or")+"&nbsp;<a href='#' onClick=\"Pages.go('main'); return false;\" style='position: absolute; font-weight: bold; font-size: 14px; color: #CE2424; text-decoration: underline;'>cancel</a></div></div>",$("propertiesTitle").innerHTML=_W.tl("Edit Page Properties");var t=$("propertiesBasic");t.innerHTML="<br/><p>"+_W.tl("In this section you can make various changes to your page, including changing its title, and marking it for deletion.")+"</p><br/>"+e.responseText,Element.hide("propertiesBasicHeader"),Element.hide("textEditBox"),$("textEditorBox").value="",Element.hide("propertiesAdvancedHeader"),Element.hide("propertiesAdvanced"),$("propertiesAdvanced").innerHTML="",showProperties(45),Element.show("propertiesBasic")}function displayUserSettings(){new Ajax.Request(ajax,{parameters:{pos:"usersettings",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerDisplayUserSettings,onFailure:errFunc,onException:exceptionFunc})}function handlerDisplayUserSettings(e){$("saveProperties").innerHTML="<div style='height: 50px; margin-top: 20px;'><a href='#' style='float: left;' onClick=\"saveProperties('usersettings', ''); return false;\"><img src='http://"+editorStatic+_W.tli("/weebly/images/savebtn.jpg")+"' border='0'/></a><div style='margin: 23px 0 0 5px; font-size: 14px; float: left;'> "+_W.tl("or")+"&nbsp;<a href='#' onClick=\"Pages.go('main'); return false;\" style='position: absolute; font-weight: bold; font-size: 14px; color: #CE2424; text-decoration: underline;'>"+_W.tl("cancel")+"</a></div></div>",$("propertiesTitle").innerHTML=_W.tl("Edit Profile");var t=$("propertiesBasic");t.innerHTML=e.responseText,Element.hide("propertiesBasicHeader"),Element.hide("textEditBox"),$("textEditorBox").value="",Element.hide("propertiesAdvancedHeader"),Element.hide("propertiesAdvanced"),$("propertiesAdvanced").innerHTML="",showProperties(),Element.show("propertiesBasic")}function displaySiteSettings(){Weebly.SlidingPanel.show("site-settings-container")}function handlerFunctionHttps(e){if(e.match(/%%SUCCESS%%/)){var t=e.split("|");t=t[1],completeDomainPurchase(t)}else $("purchaseDomainLoading")&&$("purchaseDomainLoading").parentNode&&$("purchaseDomainLoading").parentNode.removeChild($("purchaseDomainLoading")),$("purchaseDomain").style.display="block",$("domainError").innerHTML=e}function updatePageTitle(e,t){sitePages[e]=t.innerHTML}function doClick(e){var t,i=document.getElementById(e);document.createEvent&&(t=document.createEvent("MouseEvents"),t.initMouseEvent?t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):t=!1),t?i.dispatchEvent(t):i.click&&i.click()}function exportSite(){var e="undefined"!=typeof siteNeedsCategory&&siteNeedsCategory;0==settingQuickExport?(_W.domainMenuLocation="pre-publish",e?Pages.go("domainMenu","categorizeSite"):Pages.go("domainMenu","publish")):e?Pages.go("categorizeSite"):Pages.go("doExport")}function doExport(e){function t(){new Ajax.Request(ajax,{parameters:Object.extend({pos:"exportsite",cookie:document.cookie,token:Weebly.RequestToken},e),onSuccess:function(e){Weebly.PublishWindow.success(e.responseText)},onFailure:errFunc,bgRequest:!0})}e=e||{};var i=0;showPublishingAnimation(),i?setTimeout(t,350):t()}function openVerifyWindow(){window.open("http://www.weebly.com/weebly/verify.php","Verify","height=600,width=910,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes,dependent=yes"),pollMemberVerify()}function pollMemberVerify(e,t){"undefined"==typeof e&&(e=$("memberId").innerHTML,t=$("memberVerifyToken").innerHTML);var i;i="action=checkVerify",i+="&token="+t,i+="&memberId="+e,new Ajax.Request("apps/verifyJSON.php",{parameters:i,evalJSON:!0,bgRequest:!0,onSuccess:function(i){1==i.responseJSON.verified&&(exportSite(),clearTimeout(verifyPoller)),0==i.responseJSON.verified&&(verifyPoller=setTimeout(function(){pollMemberVerify(e,t)},3e3))}})}function submitPublishCaptcha(e,t){var i;i="action=verifyResponse&token="+Weebly.RequestToken+"&recaptcha_challenge_field="+e+"&recaptcha_response_field="+t+"&location=sitePublish",new Ajax.Request("apps/captchaJSON.php",{parameters:i,evalJSON:!0,bgRequest:!0,onSuccess:function(e){1==e.responseJSON.verified&&(showPublishingAnimation(),doExport()),0==e.responseJSON.verified&&(Recaptcha.reload(),$("publish-captcha-error").show())}})}function handlerPreviewSite(e){e.responseText&&window.open("http://"+configSiteName+"/weebly/previewSite.php?req_id="+e.responseText)}function exportSiteZip(){new Ajax.Request(ajax,{parameters:{pos:"exportsitezip",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerExportSiteZip,onFailure:errFunc})}function handlerExportSiteZip(e){e.responseText.match("error")?showError(e.responseText):window.open("http://"+configSiteName+"/weebly/exports/"+userID+"/"+e.responseText+".zip")}function showAbout(){showTip("Thanks for using Weebly!",$("weebly_tab_edit"),"y","101"),setTimeout("hideTip('tip101'); showTip('Weebly was created by David Rusenko, Dan Veltri, and Chris Fanini.', $('weebly_tab_themes'), 'y', '102');",4e3),setTimeout("hideTip('tip102'); showTip('We are!', $('weebly_tab_pages'), 'y', '103');",8e3),setTimeout("hideTip('tip103'); showTip('Penn State!<br/><br/><img src=\"http://rusenko.weebly.com/drusenko/pennstate.jpg\" width=\"300\" height=\"220\"/>', $('weebly_tab_settings'), 'w', '104');",14e3),setTimeout("hideTip('tip104');",2e4)}function showPublishingAnimation(){publishingAnim=1,$("publishing-status-title").update(_W.tl("Publishing")),$("exportText").innerHTML=Weebly.Restrictions.hasAccess("ftp_publish")?'<div style="text-align: center;"><img src="http://'+editorStatic+'/weebly/images/ajax-loader.gif"/><br/><br/>'+_W.tl("Please be patient. It may take a few minutes to update your site.")+"</div><br/><br/>":'<div style="text-align: center;"><img src="http://'+editorStatic+'/weebly/images/ajax-loader.gif"/><br/><br/>'+_W.tl("Please wait while we publish your site.")+"</div><br/><br/>"}function expandAdvanced(){$("propertiesAdvancedHeader").innerHTML='<br/><h3><a href="#" onClick="collapseAdvanced();" style="color: black;"><img border="0" src="http://'+editorStatic+'/weebly/images/arrow_down.gif"/> '+_W.tl("Advanced Properties")+"</a></h3>",Element.setStyle("propertiesAdvanced",{display:"block"})}function collapseAdvanced(){Element.setStyle("propertiesAdvanced",{display:"none"}),$("propertiesAdvancedHeader").innerHTML='<br/><h3><a href="#" onClick="expandAdvanced();" style="color: black;"><img border="0" src="http://'+editorStatic+'/weebly/images/arrow_right.gif"/> '+_W.tl("Advanced Properties")+"</a></h3>"}function showProperties(e){e=e?e:145,$("textEditor").style.top=e+"px",Element.show("scroll_container_properties"),1==settingAnimations?window.setTimeout("Effect.Appear('textEditor')",1e3):Element.show("textEditor")}function fadeProperties(){Weebly.Linker.close(),Element.hide("scroll_container_properties")}function fadeMain(){Element.setStyle("grayedOut",{height:getInnerHeight()-35+"px"}),1==settingAnimations?Effect.Appear("grayedOut"):Element.show("grayedOut")}function showMain(){1==settingAnimations?(setTimeout("Effect.Fade('grayedOut')",1e3),Element.setStyle("grayedOut",{visibility:"visible"})):Element.hide("grayedOut")}function displayThemes(){Element.setStyle("themes",{top:Position.realOffset(window)[1]+30+"px"}),1==settingAnimations?(Effect.Appear("themes"),Effect.Appear("themeChoices",{duration:.5})):(Element.show("themes"),Element.show("themeChoices")),currentThemesPage=1}function fadeThemes(){1==settingAnimations?window.setTimeout("Effect.Fade('themes')",1e3):Element.hide("themes"),Element.setStyle("nextThemes",{display:"block"}),Element.setStyle("previousThemes",{display:"none"}),currentThemesPage=0}function editCustomHTML(e,t,i){var n=$(""+e),o=n.parentNode,s=n.getHeight(),r=n.getWidth();s=s>150?s+"px":"150px",r=r>200?r-6+"px":"100%",n.style.display="none";var a=$(""+i+"CustomHTML"),l=a.parentNode;Weebly.Elements.customHTML[i]&&(a.value=Weebly.Elements.customHTML[i]);var c=document.createElement("div");c.style.display="none",c.id="customHTMLDummy",l.appendChild(c),o.appendChild(a),a.style.height=s,a.style.width=r,a.style.display="block",a.focus(),a.select(),Weebly.Elements.editing=t}function hideCustomHTML(e,t,i){if(Weebly.Elements.editing){Weebly.Elements.editing=null;var n=$(""+e),o=$("customHTMLDummy").parentNode,s=$(""+i+"CustomHTML");s.parentNode,s.style.display="none",n.style.display="block",o.appendChild(s),o.removeChild($("customHTMLDummy")),new Ajax.Request(ajax,{parameters:{pos:"savecustomhtml",ucfid:e,ucfpid:i,customhtml:s.value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){if(1==t.responseText.isJSON()){var i=t.responseText.evalJSON();0==i.result&&showDeniedAction(i.error)}else refreshCustomHtml(e,s.value)},onFailure:errFunc,bgRequest:!0}),Weebly.Elements.customHTML[i]=s.value,Weebly.Elements.onChange(i,t)}}function refreshCustomHtml(e,t){var i=$("custom-frame-"+e);t.match(/script/i)&&i.src?i.src=i.src+"&w="+(new Date).getTime():i.contentWindow.setContent(t)}function updateCustomHtmlAlign(e,t){$("custom-frame-"+e).contentWindow.updateAlign(t)}function refreshAllCustomHtml(){$$("iframe.custom-html-frame").each(function(e){e.src&&(e.src=e.src+"&w="+(new Date).getTime())})}function hideElement(e){Element.hide(e)}function showElement(e){Element.setStyle(e,{display:"block",visibility:"visible"})}function validateOK(){Weebly.Elements.continueOnChange()}function validateNoGo(){}function contentDecode(e){return e=e.replace(new RegExp("\\+","g")," "),unescape(e)}function contentEncode(e){return e=escape(e),e=e.replace(new RegExp("\\+","g"),"%2B"),e.replace(new RegExp("%20","g"),"+")}function showUploader(e){Element.hide("uploadSize"),Element.show("imageUploader"),imageUploadSize=e}function getScrollTop(){var e;return self.pageYOffset?e=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e}function setProperty(e,t,i){if("string"==typeof t)document.getElementsByClassName(t).each(function(t){$(t).style[e]=i});else if("object"==typeof t)for(var n=0;n<t.length;n++)setProperty(e,t[n],i)}function makePremium(e,t){Weebly.Restrictions.addService(t),Weebly.Restrictions.level=e.level,Weebly.Restrictions.is_trial=!1,Weebly.Restrictions.days_left=-1,initPlanDropdown(),hideUpgradePrompts(),hideAllTips(),showTip(_W.tl("Thanks for signing up for a")+" "+e.noun+"! "+_W.tl("We hope you enjoy the extra features, and thank you for supporting us."),jQuery("#w-editor-top .plan-dropdown-toggle")[0],"y");try{swfu.setFileSizeLimit(Math.floor(Weebly.Restrictions.accessValue("file_upload_limit")/1e3))}catch(i){}updateElements(),updateList(),Weebly.SiteSettings&&Weebly.SiteSettings.updatePremium(e.level),require("editor/app").vent.trigger("plan:upgraded")}function hideUpgradePrompts(){jQuery(".upgrade_prompt").hide()}function handlerMovePageElement(e){if(e.responseText.match(/^Authentication error/))return showWarning("You don't have access to edit the target page"),void 0;var t=e.responseText.replace("\n","");$H(sitePages).get(t)&&(t==currentPage?updateList(t):(noJump=1,goUpdateList(t,1)))}function copyElement(e){new Ajax.Request(ajax,{parameters:{pos:"copyelement",pageElementID:e,pageID:currentPage,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(){updateList(currentPage)},onFailure:errFunc})}function saveSiteTitle(){currentSiteTitle=$("newSiteTitle").value,new Ajax.Request(ajax,{parameters:{pos:"sitetitle",newtitle:currentSiteTitle,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerSaveSiteTitle,onFailure:errFunc});var e=$("wsite-title");e&&(e.innerHTML=currentSiteTitle)}function handlerSaveSiteTitle(){settingQuickExport||1==tempUser||isClientSite||"edstudent"==source?Pages.go("main"):(_W.domainMenuLocation="repeat-use",Pages.go("domainMenu"))}function load_twitter(){$("twitterMessage").value="I just updated my "+Weebly.PROPERTY_NAME+" website, check it out: "+currentSiteLocation,$("twitter-publish").style.display="block"}function tweet(){new Ajax.Request(ajax,{parameters:{pos:"tweet",username:$("twitterUser").value,password:$("twitterPass").value,message:$("twitterMessage").value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerTweet,onFailure:errFunc})}function handlerTweet(){$("twitter-publish").style.display="none"}function load_email(){new Ajax.Request(ajax,{parameters:{pos:"doevent",event:"tellFriendsPublish",cookie:document.cookie,token:Weebly.RequestToken}});var e="I just updated my website, "+currentSiteTitle+", and thought you'd like to check it out. You can get to the site by visiting: \n\n"+currentSiteLocation+"\n\n"+Weebly.EMAIL_FOOTER;abookwin=window.open("/weebly/apps/abook.php?type=update&message="+encodeURIComponent(e),"abook","toolbar=0,status=0,width=700,height=526"),setTimeout("abookwin.focus()",300)}function uploadFaviconStart(){if(!faviconUploading&&$("favicon-path").value.length>0){var e=new Element("iframe",{id:"favicon-iframe",name:"favicon-iframe",src:"about:blank"}).setStyle({display:"none"});return e.observe("load",uploadFaviconFinish),$("body").insert({bottom:e}),$("favicon-loading").show(),faviconUploading=!0,!0}return!1}function uploadFaviconFinish(){var e=$("favicon-iframe").contentWindow.document.body.innerHTML,t=e.evalJSON();"success"===t.status?($("current-favicon").show().setAttribute("src",t.imagePath+"?"+Math.floor(10000000001*Math.random())),$("remove-favicon").show(),$("upload-favicon-link").update(_W.tl("Replace")),$("favicon-upload-area").hide()):alert(t.message),$("favicon-iframe").remove(),$("favicon-loading").hide(),faviconUploading=!1}function redrawProduct(){var e=getContentFieldProperties(Weebly.Elements.ucfid),t=e[69650731].ucfpid,i=e[69650731].property_result,n=$(""+t)?$(""+t).value:null,o=$(""+e[94961376].ucfpid).value,s=$(""+e[36726176].ucfpid).value,r=$(""+e[45179529].ucfpid).value,a=e[45179529].property_result,l=$(""+e[90426618].ucfpid).value,c=Weebly.Elements.ucfid;if(n&&i!==n){var u=$(""+Weebly.Elements.ucfid).down(".product-image").src;new Ajax.Request(ajax,{parameters:{pos:"redrawproduct",productID:Weebly.Elements.getCurrentProductID(),ucfid:c,image:u,displayStyle:n,hideImage:o,hideDescription:s,buttonStyle:r,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){$(""+c).update(e.responseText),makeProductEditable(c)},onFailure:errFunc})}0==o?$(""+c).down(".product-image").show():$(""+c).down(".product-image").hide();var d=$(""+c).down(".product-description");0==s&&d?d.show():d&&d.hide(),"right"===l?$(""+c).down(".product").setStyle({marginRight:"0px",marginLeft:"auto"}):"center"===l?$(""+c).down(".product").setStyle({marginRight:"auto",marginLeft:"auto"}):"left"===l&&$(""+c).down(".product").setStyle({marginRight:"0px",marginLeft:"0px"}),r!==a&&(updateProductButton(c,r),setUserPreference("productButtonStyle",r)),Weebly.Elements.continueOnChange(),Weebly.Elements.saveProperties()}function updateProductButton(e,t){var i=$(""+e).down(".product-button"),n=i.src.match(/small|big/),o="buy_now";"add_to_cart"===t&&(o="add_to_cart"),i.src="http://"+editorStatic+"/weebly/images/"+o+"_"+n+".gif"}function makeProductEditable(e){jQuery("#"+e+" .product-image").off("mouseover",initialImageMouseover).on("mouseover",initialImageMouseover);var t=$(""+e).down(".product-title");t&&(t.onclick=function(){showEditBox(t.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!0})},t.addClassName("editable-text").writeAttribute("contentEditable","true"));var i=$(""+e).down(".product-price");i&&(i.onclick=function(){showEditBox(i.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!1})},i.addClassName("editable-text").writeAttribute("contentEditable","true"));var n=$(""+e).down(".product-description");n&&(n.onclick=function(){showEditBox(n.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!0})},n.addClassName("editable-text").writeAttribute("contentEditable","true"));var o=$(""+e).down("form");o&&(o.onsubmit=function(){return!1})}function setUserPreference(e,t){new Ajax.Request(ajax,{parameters:{pos:"setuserpreference",key:e,value:t,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc})}function loadExternalLibraries(){externalLibariesLoaded=!0,checkContentEditable(),isClientSite&&($("reserve-domain-now").hide(),$("domainSubdomain").hide(),$("domainNewDomain").hide(),$("existingDomainSubtitle").hide()),Weebly.Permissions&&Weebly.Permissions.hasContributors&&document.observe("mousemove",function(){var e=(new Date).getTime(),t=Weebly.lastMouseMove||e;e-t>3e5&&checkForPageUpdate(),Weebly.lastMouseMove=e})}function showMerchantSettingsOption(){if($("site_settings_merchantaccount"))switch($("site_settings_paypal").hide(),$F("site_settings_merchantaccount")){case"paypal":$("site_settings_paypal").show(),$("site_settings_curr_warning").hide(),$("site_settings_currency").enable()}}function editPollDaddy(e,t,i){Pages.go("pollDaddy");var n=isPro()?"1":"0";setTimeout("$('poll-daddy-iframe').writeAttribute( 'src', 'http://jr.polldaddy.com/auth-weebly.php?userid='+userID+'&proUser="+n+"&ucfpid="+i+"&callback=test&finalUrl='+encodeURIComponent('http://'+configSiteName+'/weebly/main.php#closePollDaddy') );",500)}function viewFormData(e){window.open("viewFormData.php?ucfid="+e+"&site_id="+currentSite+"&user_id="+userID,"weebly_view_form","height=650,width=960,toolbar=yes,status=yes,resizable=yes,scrollbars=yes,dependent=yes")}function checkClientDomain(){new Ajax.Request(ajax,{parameters:{pos:"checkclientdomain",domain:$("client-domain").value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){$("purchaseClientSiteTitlePreview").hide(),$("purchaseClientSiteTitleSetup").show(),$("purchaseClientSiteBodyPreview").hide(),"%%SUCCESS%%"==e.responseText?($("purchaseClientSiteBodySuccess").show(),$("purchaseClientSiteBodyInstructions").hide()):($("purchaseClientSiteBodySuccess").hide(),$("purchaseClientSiteBodyInstructions").show()),$$(".client-chosen-domain").invoke("update",$("client-domain").value)}})}function saveClientDomain(){new Ajax.Request(ajax,{parameters:{pos:"savedomain",domain:$("client-domain").value,type:"domain",continue_not_configured:"1",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){e.responseText.length<2||e.responseText.match("%%notconfigured%%")?(clientPreviewDialog.close(),Pages.go("exportSite")):$("client-domain-error").update(e.responseText)},onError:errFunc,onException:errFunc})}function loadClientPreview(){$("purchaseClientSiteTitlePreview").show(),$("purchaseClientSiteTitleSetup").hide(),$("purchaseClientSiteBodyPreview").show(),$("purchaseClientSiteBodySuccess").hide(),$("purchaseClientSiteBodyInstructions").hide(),new Ajax.Request(ajax,{parameters:{pos:"getclientpreviewaddress",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){var t='<a href="'+e.responseText+'" target="_blank">'+e.responseText+"</a>";$("previewAddress").update(t)}}),clientPreviewDialog=new Weebly.Dialog($("purchaseClientSite"),{modal:!0}),clientPreviewDialog.open()}function initialImageClick(e){if(isInitialImage(this)||isPageLayoutImage(this)){var t=$(this),i=initialMediaInfo(t.up(".element").id),n=isImageLiquid(t);chooseImage({type:i.type,width:n?"":i.width,ucfid:i.ucfid,ucfpid:i.ucfpid,copyFlickr:!0,onChoose:function(e){updateImageElement("/uploads/"+e.url,i.ucfid,i.ucfpid,e.transparent_corners,n,e.attributionUrl,e.attributionAuthor)}}),e.stop()}}function initialGalleryImageClick(){var e=$(this),t=initialMediaInfo(e.up(".element").id);determineUpload("gallery","thumbnail:333-250",t.ucfid,t.ucfpid)}function initialGalleryImageMouseover(){var e=$(this),t=initialMediaInfo(e.up(".element").id);_fileUploaderMouseover({el:this,type:t.type,size:t.width,ucfid:t.ucfid,ucfpid:t.ucfpid})}function isImageLiquid(e){return-1!=(e.readAttribute("style")||"").indexOf("max-width")}function initialImageMouseover(){if(isInitialImage(this)||isPageLayoutImage(this)){var e=initialMediaInfo(this.up(".element").id);_fileUploaderMouseover({el:this,type:e.type,size:e.width,ucfid:e.ucfid,ucfpid:e.ucfpid})}}function initialVideoMouseover(){isInitialVideo(this)&&(info=initialMediaInfo(this.up(".element").id),_fileUploaderMouseover({el:this,type:info.type,size:info.width,ucfid:info.ucfid,ucfpid:info.ucfpid}))}function menuBarChooseImage(e,t,i,n,o){var s=isImageLiquid(e);chooseImage({clickElement:e,clickDiff:{left:0,top:10},type:t,width:i,ucfid:n,ucfpid:o,copyFlickr:!0,onChoose:function(e){updateImageElement("/uploads/"+e.url,n,o,e.transparent_corners,s,e.attributionUrl,e.attributionAuthor)}})}function isInitialVideo(e){return isInitialVideoSrc(e.src||"")}function isInitialVideoSrc(e){return e.match(/video_click_to_upload\.jpg/)&&!e.match(/uploading=1/)}function initialMediaInfo(e){var t=$(""+e).up(".inside"),i=getContentFieldProperties(e),n="",o="",s=250;return $H(i).each(function(e){var r=e.value;if("<!VIDEOFILE!>"===r.reference_property)o="video",s="",n=r.ucfpid;else if("<!IMAGESET!>"===r.reference_property)n=r.ucfpid,o="gallery";else if("<!IMAGES!>"===r.reference_property)n=r.ucfpid,o="slideshow";else if(r.property_result&&(isInitialImageSrc(r.property_result)||isPageLayoutImageSrc(r.property_result))&&(n=r.ucfpid,(r.property_result.match(/na\.jpg/)||r.property_result.match(/na\.png/)||r.property_result.match(/\/page-layouts-[^\.]*.jpg/)||r.property_result.match(/\/page-layouts-[^\.]*.jpeg/)||r.property_result.match(/\/page-layouts-[^\.]*.png/))&&(o="image",t.down(".product-image"))))switch(i[69650731].property_result){case"grid":s=164;
break;case"large":s=225;break;case"small":s=125;break;case"long":s=175}}),{type:o,width:s,ucfid:e,ucfpid:n}}function updateImageElement(e,t,i,n,o,s,r){t+="",setContentFieldProperty(t,i,e);var a=!1,l="";if(s&&r&&(a={url:s,author:r},l=Object.toJSON(a)),setContentFieldProperty(t,"<!ATTRIBUTION!>",l)&&(setContentFieldAttribution(t,a),updateFooterAttribution()),setContentFieldProperty(t,"<!DATA!>",""),n){var c=1;setContentFieldProperty(t,"<!BORDER!>","none"),getContentFieldProperty(t,"<!BORDER!>")}var u=$(t),d=null;if(u){if(u.up){var h=u.up("li.inside");h&&h.removeClassName("wsite-initial-image")}u.down&&(d=u.down(".product-image"))}if(d)d.src=e;else try{var p=u.getElementsByTagName("IMG")[0];p.onload=function(){function i(){ImageExtras.reinit(u),Weebly.Elements.currentElement==u&&ImageExtras.showControls(u,!0),resizeAllColumns(),Weebly.Elements.currentElement&&(Weebly.Elements.showMenuBar(),positionElementOptions())}if(p.onload="",c&&(p.style.border="none"),setContentFieldProperty(t,"<!WIDTH!>","auto"),setContentFieldProperty(t,"<!MAXWIDTH!>","100%"),o){var n=new Image;$(n).observe("load",function(){p.style.maxWidth="100%",p.style.width="auto",p.style.height="auto",i()}),n.src=e}else p.style.width="auto",p.style.height="auto",i()},p.src=e}catch(f){}editorApp.vent.trigger("editor:elements:changed")}function updateContributorsList(e){if(Weebly.Contributors=$H(e.evalJSON()),!e.match(/^\[\]/)&&Weebly.Contributors.size()>0){var t="";Weebly.Contributors.each(function(e){var i=e.value,n="<tr>";n+='<td class="email-cell">'+i.email+"</td>",n+='<td class="role-cell">'+i.display_role+' <a href="#" onclick="editContributor(\''+e.key+"', "+!i.user_id+')" class="btn edit-contributor"><span class="bi">Edit</span></a></td>',n+='<td class="login-cell">'+(i.last_login||'Emailed. <a href="http://www.weebly.com/weebly/contributors.php?user='+userID+"&pc="+e.key+'" target="_blank" class="invitation-link">Invitation</a> not accepted yet.')+"</td>",n+='<td class="remove-column"><a href="#" onclick="deleteContributor(\''+e.key+"', "+!i.user_id+')" class="btn remove-contributor"><span class="bi">Remove Access</span></a></td>',n+="</tr>",t+=n}),$("contributor-table-body").update(t),$("empty-contributor-list").hide()}else $("contributor-table-body").update(""),$("empty-contributor-list").show()}function openEditContributors(){new Weebly.Dialog("edit-contributors",{modal:!0}).open(),$("author-pages-selector").update(getPagePermissionHtml(Weebly.PageManager.topLevelPages,"")),resetEditContributors()}function resetEditContributors(){$("contributor-emails").show(),$("editors-emails").update("").value="",$("editors-invitation").update("").value="",$("edit-contributors-title").update(_W.tl("Add Editors")),$("contributors-customize-email").show(),$("edit-contributor-user-id").value="",$("edit-contributor-pc-id").value="",$("edit-contributors-button").update("Add Editors"),roleSelect("admin",!0),$$(".multiple-choice-box-selected").invoke("removeClassName","multiple-choice-box-selected");var e=$("role-admin").select(".multiple-choice-box-inner-left input")[0];e.checked=!0,e.checked=!1,$("edit-contributors-form").disable_select_pages[0].checked=!0,$("author-page-chooser").hide(),$("edit-contributors-form").disable_stats.checked=!1,$("edit-contributors-form").disable_form.checked=!1,$("edit-contributors-form").disable_comments.checked=!1,$("edit-contributors-error").update("")}function editContributor(e,t){openEditContributors(),$("contributor-emails").hide(),$("contributors-customize-email").hide(),t?$("edit-contributor-pc-id").value=e:$("edit-contributor-user-id").value=e,$("edit-contributors-button").update("Save Settings");var i=Weebly.Contributors.get(e);switch($("edit-contributors-title").update("Edit: "+i.email.truncate(20)),i.role){case"admin":roleSelect("admin");break;case"author":roleSelect("author"),i.restrict_pages||i.allowed_pages?($("edit-contributors-form").disable_select_pages[1].checked=!0,$("author-page-chooser").show(),$("author-page-chooser").select("input").each(function(e){e.checked=i.allowed_pages.include(e.value)?!0:!1})):($("author-page-chooser").hide(),$("edit-contributors-form").disable_select_pages.checked=!1),$("edit-contributors-form").disable_publish.checked=!!i.disable_publishing;break;case"dashboard":roleSelect("dashboard"),i.view_stats||($("edit-contributors-form").disable_stats.checked=!0),i.manage_form_entries||($("edit-contributors-form").disable_form.checked=!0),i.moderate_comments||($("edit-contributors-form").disable_comments.checked=!0)}Weebly.AllDialogs["edit-contributors"].positionDialog()}function resizeContributorInput(e){e=$(e);var t=Math.min(30*Math.floor(e.textLength/70)+30,90);e.setStyle({height:t+"px"})}function roleSelect(e,t){if(Weebly.Restrictions.hasAccess("allow_"+e+"_contributors")){$$(".contributors-role-detail").invoke("hide");var i=$("role-"+e),n=i.select(".contributors-role-detail");n=n&&n[0]?n[0]:null,n&&n.show(),$$(".multiple-choice-box-selected").invoke("removeClassName","multiple-choice-box-selected"),i.addClassName("multiple-choice-box-selected"),t||setTimeout(function(){i.select(".multiple-choice-box-inner-left input")[0].checked=!0},10),resizeRoleBoxes(i)}else editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"allow_"+e+"_contributors",restrictionType:"feature",refer:"contributors"})}function resizeRoleBoxes(e){$$(".multiple-choice-box-inner-left").invoke("setStyle",{height:"auto"});var t=e.select(".multiple-choice-box-inner-left")[0],i=e.select(".multiple-choice-box-inner-right")[0];t.setStyle({height:i.getHeight()-48+"px"}),Weebly.AllDialogs["edit-contributors"].positionDialog()}function submitContributors(){var e=$("edit-contributors-form"),t=e.serialize(!0),i=Weebly.Contributors._object,n=t.emails.replace(/\s/g,"").split(","),o=$("contributor-emails").style.display;if(""===t.emails&&"none"!==o)return $("edit-contributors-error").update("Please enter at least one email address."),void 0;if(!t["contributor-role"])return $("edit-contributors-error").update(_W.tl("Please choose a role.")),void 0;for(id in i)for(var s=0;s<n.length;s++)if(n[s]===i[id].email)return $("edit-contributors-error").update(_W.tl("You already have an editor with the email:")+" "+i[id].email),void 0;new Ajax.Request(ajax,{parameters:Object.extend({pos:"savecontributors",cookie:document.cookie,token:Weebly.RequestToken},t),onSuccess:function(e){e.responseText?e.responseText.isJSON()?(updateContributorsList(e.responseText),Weebly.AllDialogs["edit-contributors"].close()):$("edit-contributors-error").update(e.responseText):Weebly.AllDialogs["edit-contributors"].close()}})}function deleteContributor(e,t){var i=Weebly.Contributors.get(e);confirm("Are you sure you want to remove access for "+i.email+"?")&&new Ajax.Request(ajax,{parameters:{pos:"deletecontributor",contributor_user_id:t?null:e,pc_id:t?e:null,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){updateContributorsList(e.responseText)}})}function getPageChooser(e){var t='<div class="page-chooser">';return t+=_getPageChooserHelper(Weebly.PageManager.topLevelPages,e,"",0),t+"</div>"}function _getPageChooserHelper(e,t,i,n){var o=0;switch(n){case 0:break;case 1:o=30;break;default:o=30+25*(n-1)}return e.each(function(e){alt=!alt;var s=pageIsLocked(e.id,t),r=canGoToPage(e.id,t),a='<img class="page-chooser-icon" src="/weebly/images/page-chooser-stop.jpg" />',l=_W.tl("You don't have access to edit this page");if(s){var c=t[e.id];a='<img class="page-chooser-icon page-locked" src="/weebly/images/person-pencil.png" />',l=_W.tl("Currently being edited by %%EMAIL%%"),l=l.replace("%%EMAIL%%",c.email)}else r&&(a='<img class="page-chooser-icon" src="/weebly/images/boxed-pencil.png" />',l=_W.tl("Click to edit this page"));i+='<div title="'+l+'" class="page-chooser-page '+(r?"page-chooser-allowed-page":"page-chooser-denied-page")+" "+(alt?"page-chooser-alt-row":"")+'" onclick="'+(r?"hideWarning(); goUpdateList('"+e.id+"', 1); return false;":"return false;")+'"><div class="page-chooser-page-inner '+(n>0?"page-chooser-subpage":"")+'" style="margin-left:'+o+'px">'+a+e.title+"</div></div>\n",e.children.size()>0&&(i=_getPageChooserHelper(e.children,t,i,n+1))}),i}function canGoToPage(e,t){var i=pageIsLocked(e,t);return!i&&isAllowedPage(e)}function isAllowedPage(e){return!Weebly.Permissions.allowed_pages||0==Weebly.Permissions.allowed_pages.size()||Weebly.Permissions.allowed_pages.include(e)}function hasAllowedPages(){return Weebly.Permissions.allowed_pages&&Weebly.Permissions.allowed_pages.size()>0}function pageIsLocked(e,t){var i=t[e];return i&&i.user_id!=Weebly.Permissions.true_user_id}function reloadAllowedPages(){new Ajax.Request(ajax,{parameters:{pos:"getallowedpages",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){Weebly.Permissions.allowed_pages=e.responseText.evalJSON()},asynchronous:!1})}function checkForPageUpdate(){if(Weebly.PageManager.pages[currentPage]&&!Weebly.PageManager.pages[currentPage].blog&&!$("contributor-page-updated").visible()){var e=new Element("li",{id:"page-update-notification"});e.update("Checking for page updates..."),new Ajax.Request(ajax,{parameters:{pos:"checkpageupdates",page_id:currentPage,cookie:document.cookie,token:Weebly.RequestToken},onComplete:function(){var e=$("page-update-notification");e&&setTimeout("$('page-update-notification').remove();",2e3)},onSuccess:function(e){var t=e.responseText.evalJSON();t.last_updated_by&&t.last_updated_by!=Weebly.Permissions.true_user_id&&new Weebly.Dialog("contributor-page-updated",{modal:!0,showClose:!1}).open()}})}}function showPageChooser(e,t,i){i=Object.extend({page_locked:!1,page_locks:{},load_page_locks:!1},i),i.load_page_locks?new Ajax.Request(ajax,{parameters:{pos:"getpagelocks",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(n){_finishShowPageChooser(e,t,Object.extend(i,{page_locks:n.responseText.evalJSON()}))}}):_finishShowPageChooser(e,t,i)}function _finishShowPageChooser(e,t,i){var n={title:e,message:'<div class="page-chooser-text">'+t+"</div>"+getPageChooser(i.page_locks)};showWarning(n,{width:"613px",titleFontSize:"26px",showClose:!0,closeFunction:function(){obtainedPage?(hideWarning(),goUpdateList(window.currentPage,1)):window.location.href="/weebly/userHome.php"}})}function checkForPageChanges(){new Ajax.Request(ajax,{parameters:{pos:"checkpagedata",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){e.responseText.match(/%%CHANGED%%/)||addNotification('The number of pages has been chaged by another editor. <a style="display:inline;" href="#" onclick="window.location.reload(); return false;">Click here</a> to reload Weebly and view the updated pages.<br /><br /><a href="#" onclick="$(this).up(\'li\').remove(); return false;">Close Message</a>')}})}function refreshPageData(){new Ajax.Request(ajax,{parameters:{pos:"refreshpagedata",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){e.responseText.isJSON()&&updatePageData(e.responseText.evalJSON())}})}function addNotification(e){var t=new Element("li").update(e);$("notifications").appendChild(t)}function openPlanningInfo(){var e,t=new Weebly.Dialog("planning-info",{modal:!0,blackoutOpacity:.4,outerClass:"chromeless chromeless-outer-close w-ui",onClose:function(e){jQuery("#planning-info").remove(),e&&(Weebly.SlidingPanel.isOpened("site-store-container")||setTimeout(function(){showEvent("x-elements")},100))}});if(t.open(),e=jQuery("#planning-info").find("iframe")[0],e.src=e.getAttribute("data-src"),!Weebly.autoplayVideo){var i="autoplay=0";e.src=e.src.replace(/(autoplay=\d)/,i)}jQuery("#planning-info .planning-info-close").on("click",function(){t.close(),Weebly.SlidingPanel.isOpened("site-store-container")||setTimeout(function(){showEvent("x-elements")},100)}),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/welcome-video?location=onboarding",title:"Welcome Video"})}function chooseMobileColor(){var e=$("mobile_color_chooser"),t=jQuery(e);if(t.is(":hidden")){e.update().show(),t.show();var i=new Weebly.ColorChooser(e,{closeOnClick:!1,onUpdate:function(e){$("mobile_color_square").style.background=e,$("mobile_color").value=e,t.hide()}});i.draw(),e.select("table")[0].style.width="auto"}else t.hide()}function showNoEditablePagesWarning(){showWarning({title:_W.tl("No Editing Access"),message:_W.tl("The site owner has not granted you permission to edit any pages on this site. Please contact the site owner to resolve this issue.")},{closeFunction:Weebly.goHome})}function initCategorizeSite(){function e(){siteNeedsCategory=0,i.close(),document.getElementById("categorize-site-dont-ask").checked&&jQuery.ajax(ajax,{type:"POST",data:{pos:"doevent",event:"siteTypesNeverAsk",token:Weebly.RequestToken}})}var t=Mustache.compile('<select id="categorize-site-subcategory" data-placeholder="Select Category"><option data-no-render="true" value="">'+_W.tl("Select Category")+"</option>"+"{{#subcategories}}"+'<option value="{{value}}">{{text}}</option>'+"{{/subcategories}}"+"</select>"),i=new Weebly.Dialog("categorize-site",{modal:!0,blackoutOpacity:.3,showClose:!1,onClose:function(){domainNextStep="publish",domainChoiceFinish()}});i.open(),jQuery("#categorize-site-category").wSelectbox().on("change",function(e){jQuery("#categorize-site-subcategory, #categorize-site-subcategory-selectbox").remove(),jQuery("#categorize-site-category-selectbox").children(".btn").removeClass("btn-warning"),siteSubcategories[e.currentTarget.value]&&(jQuery(this).parent().append(t({subcategories:siteSubcategories[e.currentTarget.value]})),i.positionDialog(),jQuery("#categorize-site-subcategory").wSelectbox().on("change",function(){jQuery("#categorize-site-subcategory-selectbox").children(".btn").removeClass("btn-warning")}))}),jQuery("#categorize-site-skip").on("click",e),jQuery("#categorize-site-continue").on("click",function(){var t=!0,i=jQuery("#categorize-site-category"),n=jQuery("#categorize-site-subcategory"),o=jQuery("#categorize-site-category-selectbox"),s=jQuery("#categorize-site-subcategory-selectbox");if(i.length&&!i.val()&&(t=!1,o.children(".btn").addClass("btn-warning")),n.length&&!n.val()&&(t=!1,s.children(".btn").addClass("btn-warning")),t){var r={};r[currentSite]={type:i.val()||"",category:n.val()||""},jQuery.ajax(ajax,{type:"POST",data:{pos:"savesitetypes",data:Object.toJSON(r),cookie:document.cookie,token:Weebly.RequestToken}}),e()}}),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/categorize-site",title:"Categorize Site"})}function callPreventDefault(e){e.preventDefault()}function initMain(e){function t(){$$("#w-editor-top .device-switcher")[0].hide()}function i(){$$("#w-editor-top .device-switcher")[0].show()}function n(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}window.initEditBox(),Weebly.SlidingPanel.init(),e.userID>0&&(userID=e.userID),""!=e.userIDLocation&&(userIDLocation=e.userIDLocation),"1"==e.pageid[0]&&(currentPage=e.pageid[1]),"1"==e.setSettingAnimations?(setSetting("settingAnimations",1),Pages.optAnimations=1):Pages.optAnimations=0,("1"==e.siteVersion||"2"==e.siteVersion||Weebly.Location.custom_domain&&Weebly.Location.purchased_domain||"reseller"==window.source)&&setSetting("settingQuickExport",1),"1"==e.setSettingTooltips&&setSetting("settingTooltips",1),e.currentTheme&&setCurrentTheme(e.currentTheme),e.currentMobileTheme&&(currentMobileTheme=e.currentMobileTheme),e.siteCategory&&setSetting("siteCategory","'"+e.siteCategory+"'"),e.currentHeader&&setSetting("currentHeader","'"+e.currentHeader+"'"),e.siteType&&setSetting("siteType","'"+e.siteType+"'"),e.updatedTheme&&setSetting("updatedTheme","'"+e.updatedTheme+"'"),e.friendRequests&&setSetting("friendRequests","'"+e.friendRequests+"'"),e.adsenseID&&setSetting("adsenseID","'"+e.adsenseID+"'"),e.tempUser&&setSetting("tempUser","'"+e.tempUser+"'"),e.userEvents&&setSetting("userEvents","'"+e.userEvents+"'"),e.hideTitle&&setSetting("hideTitle","'"+e.hideTitle+"'"),setWidth(),jQuery("body").addClass("allow-collapse-transition"),currentSite=e.currentSite,Pages.pageConstructor.main={element:"grayedOut",go:function(){}},Pages.pageDestructor.main={element:"grayedOut",maxHeight:["$('left').clientHeight+135","$('container').clientHeight+30","$('right').clientHeight+135"],go:function(){document.getElementById(currentBox+"Edit")&&hideEditBox(currentBox)}},Pages.pageWindows.main=["main","themesMenu"],Pages.pageConstructor.headerEditor={go:function(e){activeTab(""),activeContainer("headerEditor"),Weebly.headerEditor.start(e)}},Pages.pageDestructor.headerEditor={go:function(){}},Pages.pageWindows.headerEditor=["headerEditor","main"],Pages.pageConstructor.showElements={go:function(){showElements()}},Pages.pageDestructor.showElements={go:function(){hideElements()}},Pages.pageWindows.showElements=["showElements","main"],Pages.pageConstructor.save={element:"tip13"},Pages.pageDestructor.save={element:"tip13"},Pages.pageWindows.save=["save","main"],Pages.pageConstructor.exportSite={go:function(){1==tempUser?setTimeout("Pages.go('goSignup', 'publish');",100):exportSite()}},Pages.pageDestructor.exportSite={element:"textEditor",go:function(){fadeProperties()}},Pages.pageWindows.exportSite=["exportSite","themesMenu"],Pages.pageConstructor.doExport={go:function(){doExport(),Weebly.PublishWindow.open()}},Pages.pageDestructor.doExport={element:"publishingWait",go:function(){publishingAnim=0}},Pages.pageWindows.doExport=["doExport","themesMenu","main"],Pages.pageConstructor.friendRequests={element:"friendRequests"},Pages.pageDestructor.friendRequests={element:"friendRequests"},Pages.pageWindows.friendRequests=["friendRequests","themesMenu"],Pages.pageConstructor.showMyspaceLogin={go:function(){showMyspaceLogin()}},Pages.pageDestructor.showMyspaceLogin={element:"publishMyspaceDialog"},Pages.pageWindows.showMyspaceLogin=["showMyspaceLogin","themesMenu"],Pages.pageConstructor.exportSuccess={element:"publishing-status"},Pages.pageDestructor.exportSuccess={element:"publishing-status"},Pages.pageWindows.exportSuccess=["exportSuccess","themesMenu","main"],Pages.pageConstructor.addPage={go:function(){AddPage()}},Pages.pageDestructor.addPage={element:"textEditor",go:function(){fadeProperties()}},Pages.pageWindows.addPage=["addPage"],Pages.pageConstructor.displayUserSettings={go:function(){displayUserSettings()}},Pages.pageDestructor.displayUserSettings={element:"textEditor"},Pages.pageWindows.displayUserSettings=["displayUserSettings"],Pages.pageConstructor.domainMenu={go:function(e,t){var i;if(domainNextStep=e,isDomainChooserOnboarding="planningModal"==domainNextStep,"publish"==domainNextStep?$("domainChoiceSkip")&&$("domainChoiceSkip").hide():"blogpostpublish"==domainNextStep?domainNextBlog=t:"planningModal"==domainNextStep?i=!0:"categorizeSite"==domainNextStep?i=!0:"displaySiteSettings"==domainNextStep&&$("domainChoiceSkip")&&$("domainChoiceSkip").hide(),domainDialog=new Weebly.Dialog($("domainContainer"),{showClose:!0,modal:i,closeFunction:function(){if("displaySiteSettings"!=domainNextStep&&(domainNextStep="main"),domainChoiceFinish(),"function"==typeof window.ga){var e=_W.domainMenuLocation?"?location="+_W.domainMenuLocation:"";window.ga("send","pageview",{page:"/choose-domain-skip"+e,title:"Choose Domain Skip"})}_W.domainMenuLocation=null},onClose:function(){isDomainChooserOpen=!1}}),domainDialog.open(),isDomainChooserOpen=!0,domainChoiceReset(),"function"==typeof window.ga){var n=_W.domainMenuLocation?"?location="+_W.domainMenuLocation:"";window.ga("send","pageview",{page:"/choose-domain"+n,title:"Choose Domain"})}}},Pages.pageDestructor.domainMenu={go:function(){domainDialog.close()}},Pages.pageWindows.domainMenu=["domainMenu","main","editMenu","themesMenu","pagesMenu"],ENABLE_THEME_BROWSER?(Pages.pageConstructor.themesMenu={go:function(){var e=function(){window.litePageChange||enteringDesignTab(),activeTab("weebly_tab_themes")};activeContainer("themes"),Weebly.view.isMobileView?Weebly.view.setStandardView(e):(e(),userEvents&&hasDoneUserEvent("x-pages")&&hasDoneUserEvent("x-design")&&!hasDoneUserEvent("x-publish")&&!hasDoneUserEvent("x-golive")&&(isClientSite?showEvent("x-golive"):showEvent("x-publish")))}},Pages.pageDestructor.themesMenu={go:function(){leavingDesignTab()}}):(Pages.pageConstructor.themesMenu={go:function(){var e=function(){activeTab("weebly_tab_themes"),showThemes(),activeContainer("themes")};Weebly.view.isMobileView?Weebly.view.setStandardView(e):e()}},Pages.pageDestructor.themesMenu={}),Pages.pageWindows.themesMenu=["themesMenu","main"],Pages.pageConstructor.customThemeEditor={go:function(){openCustomThemeEditor()},element:"customThemeContainer"},Pages.pageDestructor.customThemeEditor={go:function(){closeCustomThemeEditor()},element:"customThemeContainer"},Pages.pageWindows.customThemeEditor=["customThemeEditor","themesMenu","main"],Pages.pageConstructor.importTheme={go:function(){Weebly.lightbox.show({element:"#themeEditBoxImport",width:600,height:400})}},Pages.pageDestructor.importTheme={go:function(){Weebly.lightbox.hide()}},Pages.pageWindows.importTheme=["importTheme","themesMenu","main"],Pages.pageConstructor.pagesMenu={go:function(){t(),activeContainer("pages"),activeTab("weebly_tab_pages"),Weebly.PageManager.entering()}},Pages.pageDestructor.pagesMenu={element:"pageManager",go:function(){Weebly.PageManager.cleanup(),i(),activeContainer("elements"),activeTab("weebly_tab_edit"),fadeProperties()}},Pages.pageWindows.pagesMenu=["pagesMenu","main"],Pages.pageConstructor.editMenu={go:function(){setElementsPageType(),activeTab("weebly_tab_edit"),activeContainer("elements")}},Pages.pageDestructor.editMenu={},Pages.pageWindows.editMenu=["editMenu","main"],Pages.pageConstructor.planningModal={go:function(){var e=function(e){var t="; "+document.cookie,i=t.split("; "+e+"=");return 2==i.length?i.pop().split(";").shift():void 0};hasDoneUserEvent("seen_planning_info_modal")||("en"==Weebly.userLang&&"1"!=e("has_seen_welcome_video")?openPlanningInfo():showEvent("x-elements"),new Ajax.Request(ajax,{parameters:{pos:"doevent",event:"seen_planning_info_modal",cookie:document.cookie,token:Weebly.RequestToken}}))}},Pages.pageDestructor.planningModal={go:function(){}},Pages.pageWindows.planningModal=["main"],Pages.pageConstructor.categorizeSite={go:function(){initCategorizeSite()}},Pages.pageDestructor.categorizeSite={go:function(){}},Pages.pageWindows.categorizeSite=["main"],Pages.pageConstructor.updateList={go:function(e){updateList(e)}},Pages.pageDestructor.updateList={},Pages.pageWindows.updateList=["updateList","main","themesMenu"],Pages.pageConstructor.userHome={go:function(){window.location="userHome.php"}},Pages.pageDestructor.userHome={},Pages.pageWindows.userHome=["userHome"],Pages.pageWindows.mobileView=["mobileView","main"],Pages.pageConstructor.mobileView={go:function(e,t){activeTab("weebly_tab_edit"),activeContainer("elements"),Weebly.view.setMobileView(e,t)}},Pages.pageWindows.webView=["webView","main"],Pages.pageConstructor.webView={go:function(e,t){activeTab("weebly_tab_edit"),activeContainer("elements"),Weebly.view.setStandardView(e,t)}},Pages.pageConstructor.showHelp={element:"helpFrame",go:function(){$("helpIframe").src=helpLocation}},Pages.pageDestructor.showHelp={element:"helpFrame"},Pages.pageWindows.showHelp=["showHelp","themesMenu","main"],Pages.pageConstructor.giveFeedback={go:showFeedback},Pages.pageDestructor.giveFeedback={go:hideFeedback},Pages.pageWindows.giveFeedback=["giveFeedback","main"],Pages.pageConstructor.goSignup={go:function(e){showSignup(e)}},Pages.pageDestructor.goSignup={go:hideSignup},Pages.pageWindows.goSignup=["goSignup"],Pages.pageConstructor.goBlogPost={go:function(e,t){var i=function(){window.blogPostFirstLoad=!0,currentBlog.postId=e,updateList(currentPage,t)};Weebly.view.isMobileView?(Weebly.mobile.isMobileEditor(!1),Weebly.view.setStandardView(i)):i()}},Pages.pageDestructor.goBlogPost={go:function(){resetBlogGlobals()}},Pages.pageWindows.goBlogPost=["goBlogPost","themesMenu","main"],Pages.pageConstructor.saveBlogPost={go:function(e){goSavePost(e)}},Pages.pageDestructor.saveBlogPost={},Pages.pageWindows.saveBlogPost=["saveBlogPost","goBlogPost","main"],Pages.pageConstructor.publishBlogPost={go:function(e){goPublishPost(e)}},Pages.pageWindows.publishBlogPost=["publishBlogPost","goBlogPost","main"],Pages.pageConstructor.blogPostPublishSuccess={go:function(e){$("secondlist-blog").remove(),updateList(e,0,!0)}},Pages.pageDestructor.blogPostPublishSuccess={go:function(){resetBlogGlobals()}},Pages.pageWindows.blogPostPublishSuccess=["blogPostPublishSuccess","main"],Pages.pageConstructor.domainEditor={go:function(){Element.show("domainEditor")}},Pages.pageDestructor.domainEditor={go:function(){Element.hide("domainEditor")}},Pages.pageWindows.domainEditor=["domainEditor"],Pages.pageConstructor.adsenseSetup={go:function(){if(1==tempUser)setTimeout("Pages.go('goSignup', 'adsense');",100);else{var e=new Weebly.Dialog($("adsense_terms"),{closeFunction:close_adsense_dialog});e.open(),new Ajax.Request(ajax,{parameters:{pos:"doevent",event:"viewAdsense",cookie:document.cookie,token:Weebly.RequestToken}})}}},Pages.pageDestructor.adsenseSetup={go:function(){Weebly.lightbox.hide()}},Pages.pageWindows.adsenseSetup=["adsenseSetup","main","goBlogPost"],Pages.pageConstructor.externalSetup={go:function(e){1==tempUser?setTimeout("Pages.go('goSignup');",100):new Weebly.Dialog(e,{modal:!0}).open()}},Pages.pageDestructor.externalSetup={go:function(){Weebly.lightbox.hide()}},Pages.pageWindows.externalSetup=["externalSetup","main"],Pages.pageConstructor.pollDaddy={go:function(){Weebly.lightbox.show({element:"#edit-poll-daddy",onHide:function(){updateList()}})}},Pages.pageDestructor.pollDaddy={go:function(){Weebly.lightbox.hide()}},Pages.pageWindows.pollDaddy=["pollDaddy","goBlogPost","main"],Pages.pageConstructor.upgradeWarning={go:function(){var e=jQuery("#upgrade-warning-alert, #upgrade-warning-button"),t=jQuery("#upgrade-warning-try"),i=Weebly.Restrictions.is_trial&&("without_credit_card"===Weebly.freeTrialTest||"with_credit_card"===Weebly.freeTrialTest),n=new Weebly.Dialog("upgrade-warning",{modal:!0,showClose:!1,onClose:function(){e.off("click.upgrade-warning"),t.off("click.upgrade-warning"),i&&$$("#icontent .outside_top")[0].remove(),updateList()}});e.on("click.upgrade-warning",function(e){i?"without_credit_card"===Weebly.freeTrialTest?(Weebly.Editor.RPC.Billing.changeFreeTrialService("Weebly.proSite12").done(function(){location.reload()}),startWait()):"with_credit_card"===Weebly.freeTrialTest&&editorApp.vent.trigger("billing:upgrade:window",{restrictionID:Weebly.Elements.getNewElementID(),restrictionType:"element",refer:"element_trial",customTitle:_W.tl("Upgrade Your Trial Plan"),closeCallback:function(){startWait(),location.reload()}}):editorApp.vent.trigger("billing:upgrade:window",{restrictionID:Weebly.Elements.getNewElementID(),restrictionType:"element",refer:"element_trial"}),e.preventDefault()}),t.on("click.upgrade-warning",function(e){n.close(),Pages.returnToEditor(),e.preventDefault()}),i&&(jQuery("#upgrade-warning-try").text(_W.tl("Cancel")),jQuery("#upgrade-warning-button").text(_W.tl("Try Pro")),jQuery("#upgrade-warning .titled-box-title").text(_W.tl("Pro Plan Feature")),jQuery("#upgrade-warning .titled-box-body").text(_W.tl("You will need to upgrade your trial plan to Pro in order to use this element.")),"with_credit_card"===Weebly.freeTrialTest&&jQuery("#upgrade-warning-button").text(_W.tl("Upgrade Trial Plan"))),n.open()}},Pages.pageWindows.upgradeWarning=["upgradeWarning","goBlogPost","main"],Pages.pageConstructor.formElementWarning={go:function(){Weebly.lightbox.show({element:"#form-element-warning",options:{hideClose:!0},onHide:function(){updateList()}})}},Pages.pageDestructor.formElementWarning={go:function(){Weebly.lightbox.hide()}},Pages.pageWindows.formElementWarning=["formElementWarning","goBlogPost","main"],Pages.pageConstructor.moderateBlog={go:function(e,t,i){goModerateBlog(e,t,i)}},Pages.pageWindows.moderateBlog=["moderateBlog","themesMenu"],Pages.pageDestructor.moderateBlog={go:function(){currentBlog.settingsDialog&&currentBlog.settingsDialog.close()}},newColorChooser=new Weebly.ColorChooser($("new-color-chooser"),{onUpdate:function(e){currentRange&&selectRange(currentRange),runCommand(currentBox,"forecolor",e)}}),maxFileSize=Math.floor(Weebly.Restrictions.accessValue("file_upload_limit")/1e3),swfu=new SWFUpload({file_size_limit:maxFileSize,file_types:"*.*",file_types_description:"All files...",file_queue_limit:501,file_dialog_start_handler:dialogStart,file_dialog_complete_handler:dialogComplete,upload_start_handler:uploadStart,file_queue_error_handler:queueError,file_queued_handler:uploadFileQueued,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_progress_handler:uploadProgress,upload_complete_handler:uploadFileComplete,swfupload_loaded_handler:swfUploadLoaded,prevent_swf_caching:!0,button_placeholder_id:"flashButtonPlaceholder",button_width:600,button_height:600,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_cursor:SWFUpload.CURSOR.HAND,flash_url:"/weebly/libraries/swfupload/swfupload.swf"}),Pages.go("editMenu");var o=Weebly.Location&&Weebly.Location.weebly_subdomain?Weebly.Location.weebly_subdomain:"",s=e.siteTitle==DEFAULT_SITE_TITLE&&o.match(/^[\d]+$/)&&!Weebly.Location.custom_domain;if(_W.isFirstPublish=s,Weebly.Location.custom_domain||Weebly.Location.weebly_subdomain||isClientSite?s&&(Weebly.Location.custom_domain||isClientSite?Pages.go("planningModal"):(_W.domainMenuLocation="onboarding",Pages.go("domainMenu","planningModal"),activeContainer("elements"))):(_W.domainMenuLocation="repeat-use",Pages.go("domainMenu")),_W.Reseller&&(_W.Reseller.isResellerTestMode||_W.Reseller.isUserTestMode)){var r;r=_W.Reseller.isResellerTestMode?_W.tl('This is a test site. More than likely it was marked as a test site because your Weebly Cloud account is in "test mode". Once your Weebly Cloud account is moved out of test mode you can start creating real production sites.'):_W.tl('This is a test site. More than likely it was marked as a test site because your Weebly Cloud account was in "test mode" when this user was created. You can change a user from test mode in Cloud Admin.'),showWarning({title:_W.tl("Test Site"),message:r},{okButton:!0})}Weebly.Permissions.isContributor&&Weebly.Permissions.restrict_pages&&!hasAllowedPages()&&showNoEditablePagesWarning(),Weebly.PageManager.init(),updateList(currentPage);var a=((new Date).getTime()-loadStarted)/1e3;fireTrackingEvent("EditorLoadTime","Load","",a),EventTooltip.init(userEvents),setTimeout(function(){preloadImagePerfect()},500),e.pageToSendTo&&setTimeout(function(){goUpdateList(e.pageToSendTo)},500),Weebly.DragAndDrop.init.all(),window.getParameterByName=n,n("theme_edit")&&editCustomTheme(n("theme_id"))}function setupThemeImporter(){var e={upload_url:"/weebly/themeImport.php?cookies="+escape(document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]),flash_url:"/weebly/libraries/swfupload/swfupload.swf",file_size_limit:maxFileSize,file_types:"*.zip",file_types_description:"Zip Archives",button_image_url:"../.."+_W.tl("/weebly/images/upload_theme_button_states.png"),button_width:"116",button_height:"30",button_placeholder_id:"theme-import-button",file_dialog_complete_handler:themeImportDialogComplete,upload_start_handler:themeImportUploadStart,upload_progress_handler:themeImportUploadProgress,upload_success_handler:themeImportUploadSuccess,upload_error_handler:themeImportUploadError,upload_complete_handler:themeImportUploadComplete};themeImportUploader=new SWFUpload(e)}function themeImportDialogComplete(){themeImportUploader.startUpload()}function themeImportUploadStart(e){$("theme-import-status").update("File: "+e.name+"<br />"+_W.tl("Status")+': <span id="theme-import-status-short">'+_W.tl("Uploading")+'</span><div class="theme-progress-outer"><div class="theme-progress-inner" id="import-progress-inner-'+e.id+'"></div></div><div id="theme-import-status-long"></div>')
}function themeImportUploadProgress(e,t){var i=Math.floor(100*t/e.size);$("import-progress-inner-"+e.id).setStyle({width:i+"%"})}function themeImportUploadError(){$("theme-import-status-long").update(_W.tl("Error: upload failed"))}function themeImportUploadSuccess(e,t){$("theme-import-status-short").update(_W.tl("Upload complete")),t.isJSON()&&$("theme-import-status-long").update(response.status+": "+response.message)}function themeImportUploadComplete(){}function positionConfirmTheme(){document.body.style.overflow="hidden",document.getElementsByTagName("html")[0].style.overflow="hidden";var e=document.viewport.getScrollOffsets(),t=document.viewport.getDimensions();confirmThemeContainer.style.top=e.top+"px",confirmThemeIframe.setStyle({width:t.width+"px",height:t.height-40+"px"})}function confirmConfirmTheme(){confirmThemeCallback&&confirmThemeCallback(),closeConfirmTheme()}function closeConfirmTheme(){Element.stopObserving(window,"resize",positionConfirmTheme),confirmThemeContainer.hide(),document.body.style.overflow="",document.getElementsByTagName("html")[0].style.overflow=""}function HeDialog(e,t){function i(){var e=document.viewport.getDimensions();n.setStyle({top:e.height/2-n.getHeight()/2+"px",left:e.width/2-n.getWidth()/2+"px"})}t=t||{};var n=new Element("div",{"class":"heDialog"+(t.className?" "+t.className:""),style:"display:none"}).update("<div class='heDialogInner1'><div class='heDialogInner2'><div class='heDialogInner3'></div></div></div><div class='heDialogCorner1'></div><div class='heDialogCorner2'></div><div class='heDialogCarrot'></div>"),o=n.select("div.heDialogInner3")[0].insert(e);if(t.buttons){var s=new Element("div",{"class":"heDialogButtons"});$H(t.buttons).each(function(e){var i=e.key,n=e.value;n="string"==typeof n?{text:n}:n;var o=new Element("span",{"class":"heButton"+(n.className?" "+n.className:"")}),r=new Element("span").update(n.text);o.insert(r),o.observe("click",function(e){var n="on"+i.capitalize();t[n]&&t[n](e)}),s.insert(o)}),o.insert(s)}$(document.body).insert(n),this.open=function(e,t){if(e){var o=e.cumulativeOffset();n.addClassName("heDialogDirectional").setStyle({top:o.top+e.getHeight()+(t?t.top:0)+"px",left:o.left-10+(t?t.left:0)+"px"}).show()}else document.viewport.getDimensions(),n.removeClassName("heDialogDirectional").show(),i()},this.center=i,this.close=function(){n.hide()},this.getOuter=function(){return n},this.setOptions=function(e){t=e}}function ElementSet(e,t){function i(){r=t.itemSelector?e.select(t.itemSelector):e.childElements();var i;r.each(function(e){e.stopObserving("click").observe("click",n),e.hasClassName(l)&&(i=e)}),!i&&a&&(selected=null,o())}function n(e){s(this),o(),e.stop()}function o(){t.onUpdate&&t.onUpdate(a)}function s(e){e?e!=a&&(a&&a.removeClassName(l),a=$(e),a.addClassName(l)):(a&&a.removeClassName(l),a=null)}e=$(e),t=t||{};var r,a,l=t.selectedClass||"selected";this.refresh=i,this.setSelected=s,this.getSelected=function(){return a},this.first=function(e){s(r[0]),e&&o()},i()}function PatternChooser(e,t){var i;this.draw=function(){for(var n="<div class='hePatternChooser'><div class='hePatternChooserInner'>",o=0;o<availablePatterns.length;o++)n+="<div class='hePattern' title='"+availablePatterns[o]+"'>"+"<div class='hePatternInner' style='background-image:url("+availablePatterns[o]+")'></div>"+"</div>";n+="<div style='clear:both'></div>",n+="</div></div>",e.update(n),i=new ElementSet(e.down().down(),{itemSelector:"div.hePattern",onUpdate:function(e){t.onUpdate&&t.onUpdate(e.title)}})},this.setImage=function(t){var n=e.select("div.hePattern[title="+t+"]");n&&i.setSelected(n[0])}}function getFlexApp(e){return-1!=navigator.appName.indexOf("Microsoft")?window[e]:document[e]}function ControlVersion(){var e,t;try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),e=t.GetVariable("$version")}catch(i){}if(!e)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e="WIN 6,0,21,0",t.AllowScriptAccess="always",e=t.GetVariable("$version")}catch(i){}if(!e)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),e=t.GetVariable("$version")}catch(i){}if(!e)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),e="WIN 3,0,18,0"}catch(i){}if(!e)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e="WIN 2,0,0,11"}catch(i){e=-1}return e}function GetSwfVer(){var e=-1;if(null!=navigator.plugins&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var t=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",i=navigator.plugins["Shockwave Flash"+t].description,n=i.split(" "),o=n[2].split("."),s=o[0],r=o[1],a=n[3];""==a&&(a=n[4]),"d"==a[0]?a=a.substring(1):"r"==a[0]&&(a=a.substring(1),a.indexOf("d")>0&&(a=a.substring(0,a.indexOf("d"))));var e=s+"."+r+"."+a}}else-1!=navigator.userAgent.toLowerCase().indexOf("webtv/2.6")?e=4:-1!=navigator.userAgent.toLowerCase().indexOf("webtv/2.5")?e=3:-1!=navigator.userAgent.toLowerCase().indexOf("webtv")?e=2:isIE&&isWin&&!isOpera&&(e=ControlVersion());return e}function DetectFlashVer(e,t,i){if(versionStr=GetSwfVer(),-1==versionStr)return!1;if(0!=versionStr){isIE&&isWin&&!isOpera?(tempArray=versionStr.split(" "),tempString=tempArray[1],versionArray=tempString.split(",")):versionArray=versionStr.split(".");var n=versionArray[0],o=versionArray[1],s=versionArray[2];if(n>parseFloat(e))return!0;if(n==parseFloat(e)){if(o>parseFloat(t))return!0;if(o==parseFloat(t)&&s>=parseFloat(i))return!0}return!1}}function AC_AddExtension(e,t){return-1!=e.indexOf("?")?e.replace(/\?/,t+"?"):e+t}function AC_Generateobj(e,t,i){var n="";if(isIE&&isWin&&!isOpera){n+="<object ";for(var o in e)n+=o+'="'+e[o]+'" ';n+=">";for(var o in t)n+='<param name="'+o+'" value="'+t[o]+'" /> ';n+="</object>"}else{n+="<embed ";for(var o in i)n+=o+'="'+i[o]+'" ';n+="> </embed>"}return n}function AC_FL_RunContent(){var e=AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");return AC_Generateobj(e.objAttrs,e.params,e.embedAttrs)}function AC_SW_RunContent(){var e=AC_GetArgs(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);return AC_Generateobj(e.objAttrs,e.params,e.embedAttrs)}function AC_GetArgs(e,t,i,n,o){var s=new Object;s.embedAttrs=new Object,s.params=new Object,s.objAttrs=new Object;for(var r=0;r<e.length;r+=2){var a=e[r].toLowerCase();switch(a){case"classid":break;case"pluginspage":s.embedAttrs[e[r]]=e[r+1];break;case"src":case"movie":e[r+1]=AC_AddExtension(e[r+1],t),s.embedAttrs.src=e[r+1],s.params[i]=e[r+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblclick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":s.objAttrs[e[r]]=e[r+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":s.embedAttrs[e[r]]=s.objAttrs[e[r]]=e[r+1];break;default:s.embedAttrs[e[r]]=s.params[e[r]]=e[r+1]}}return s.objAttrs.classid=n,o&&(s.embedAttrs.type=o),s}function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(e){mejs.YouTubeApi.flashReady(e)}function showFeedback(){new Effect.Move("feedback",{y:100,mode:"absolute"})}function hideFeedback(){new Effect.Move("feedback",{y:-700,mode:"absolute"})}function giveFeedback(){new Ajax.Request(ajax,{parameters:{pos:"givefeedback",feedback:$("feedbackText").value,referral:$("referralText").value,cookie:document.cookie},onFailure:errFunc}),$("feedbackText").value="",$("referralText").value="",feedbackInit()}function feedbackInit(){new Effect.Move("feedback",{y:-700,mode:"absolute"})}function showSignup(e){return $("signupNote").innerHTML="exit"==e?"<font style='color: red; font-size: 18px;'>"+_W.tl("Sign-up to save your website.")+"</font><br/>"+_W.tl("Otherwise, click Cancel to exit."):"publish"==e?"<font style='color: red; font-size: 18px;'>"+_W.tl("Sign-up to publish your website.")+"</font><br/>"+_W.tl("Otherwise, click Cancel to continue working."):"zip"==e?"<font style='color: red; font-size: 18px;'>"+_W.tl("Sign-up to export your website.")+"</font><br/>"+_W.tl("Otherwise, click Cancel to continue working."):"<font style='font-size: 22px; font-weight: bold;'>"+_W.tl("Sign-up now")+"</font>",new Effect.Move("signup",{y:65,mode:"absolute"}),signupAction=e,!1}function hideSignup(){new Effect.Move("signup",{y:-900,mode:"absolute"}),"adsense"==signupAction&&onHideLightbox("adsense")}function submitSignup(){Element.setStyle("signupUser",{border:"1px solid #DDD"}),Element.setStyle("signupPass",{border:"1px solid #DDD"}),Element.setStyle("signupEmail",{border:"1px solid #DDD"}),Element.setStyle("signupInvitationID",{border:"1px solid #DDD"}),Element.hide("signupError");var e=1;$("signupUser").value.match(/[^a-zA-Z0-9\-\_]/)?(Element.setStyle("signupUser",{border:"2px solid red"}),showTip(_W.tl("Your username may only contain numbers, letters, a dash (-) or an underscore (_)."),"signupUser"),e=0):""==$("signupUser").value&&(Element.setStyle("signupUser",{border:"2px solid red"}),showTip(_W.tl("Please enter a username."),"signupUser"),e=0),$("signupPass").value.match(/.{4}/)?""==$("signupPass").value&&(Element.setStyle("signupPass",{border:"2px solid red"}),showTip(_W.tl("Please enter a password."),"signupPass"),e=0):(Element.setStyle("signupPass",{border:"2px solid red"}),showTip(_W.tl("Your password is not long enough. It must be at least 4 characters long."),"signupPass"),e=0),""!=$("signupEmail").value&&$("signupEmail").value.match("@")||(Element.setStyle("signupEmail",{border:"2px solid red"}),showTip(_W.tl("Please enter an email."),"signupEmail"),e=0),1==e&&new Ajax.Request(ajax,{parameters:{pos:"signup",user:$F("signupUser"),pass:$F("signupPass"),email:$F("signupEmail"),cookie:document.cookie},onSuccess:handlerSubmitSignup,onFailure:errFunc})}function handlerSubmitSignup(e){e.responseText.indexOf("%%SUCCESS%%")>-1?(tempUser=0,"exit"==signupAction?Pages.go("userHome"):"publish"==signupAction?Pages.go("exportSite"):"zip"==signupAction?($("exportSiteZipFrame").src="downloadZip.php?"+Math.floor(1001*Math.random()),Pages.go("main")):Pages.go("main"),$("weebly-signup-button").innerHTML='<a class="weebly-top-links" href="#" onClick="Pages.go(\'userHome\'); return false;"><img style="position: relative; top: -1px;" src="images/action_stop.gif" /> <font style="position: relative; top: -5px; color: white;">'+_W.tl("Close")+"</font></a>"):($("signupError").innerHTML=e.responseText,""==e.responseText&&($("signupError").innerHTML=_W.tl("There was an error creating your account. Please try again.")),Effect.Appear("signupError"))}function resetPassword(){Element.hide("signupError"),new Ajax.Request("/weebly/publicBackend.php",{parameters:{pos:"resetpassword",email:$F("resetEmail")},onSuccess:handlerResetPassword,onFailure:errFunc})}function handlerResetPassword(e){e.responseText.indexOf("%%SUCCESS%%")>-1?($("resetSuccess").innerHTML=_W.tl("Instructions for reseting your password have been sent. Please check your email.")+" "+"<a href='http://"+(window.CONFIG_DOMAIN||"www.weebly.com")+"/'>Click here</a> "+_W.tl("to return to the main page."),Effect.Appear("resetSuccess")):($("signupError").innerHTML=e.responseText,Effect.Appear("signupError"))}function changePassword(){Element.hide("signupError"),new Ajax.Request("/weebly/publicBackend.php",{parameters:{pos:"changepassword",new_password:$F("resetPass2"),v:$F("resetKey")},onSuccess:handlerChangePassword,onFailure:errFunc})}function handlerChangePassword(e){e.responseText.indexOf("%%SUCCESS%%")>-1?($("resetSuccess").innerHTML=_W.tl("Your password has been successfully changed.")+" "+"<a href='http://"+(window.CONFIG_DOMAIN||"www.weebly.com")+"/'>Click here</a> "+_W.tl("to return to the main page and login."),Effect.Appear("resetSuccess")):($("signupError").innerHTML=e.responseText,""==e.responseText&&($("signupError").innerHTML="Error"),Effect.Appear("signupError"))}function close_adsense_dialog(){return Pages.go("main"),Weebly.AllDialogs.adsense_terms.close(),!1}function close_adsense_confirmation_dialog(){return Weebly.AllDialogs.adsense_confirmation.close(),!1}function open_adsense_confirmation_dialog(){var e=new Weebly.Dialog($("adsense_confirmation"),{modal:!0});e.open()}function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(window.location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function domainChoiceSelect(e){var t=Array("domainSubdomain","domainNewDomain","domainExistingDomain");if(e!=domainChoiceSelected){for(var i,n=0;n<t.length;n++)if(i=$(t[n])){if(t[n]==e){$(t[n]).addClassName("multiple-choice-box-selected");var o=$(t[n]).down("input[type=radio]");setTimeout(function(){o.checked=!0},10)}else $(t[n]).removeClassName("multiple-choice-box-selected"),$(t[n]).down("input[type=radio]").checked=!1;(t[n]==e||"none"==$(t[n]+"-2").style.display)&&(t.splice(n,1),n--)}domainChoiceSelected=e}}function domainChoiceReset(){isDomainChooserOnboarding=isDomainChooserOnboarding||!!window.location.pathname.match("newSite.php"),isDomainChooserOnboarding?(jQuery("#reserve-domain-now").show(),jQuery("#existingDomainSubtitle").text(_W.tl("We'll help you connect your domain when you're ready to publish"))):(jQuery("#reserve-domain-now").hide(),Weebly.Restrictions.hasAccess("existing_domain")?jQuery("#existingDomainSubtitle").text(_W.tl("We'll help you connect your domain in the next step.")):jQuery("#existingDomainSubtitle").text(_W.tl("Choose a plan and connect your domain in the next step"))),jQuery("#domainChoiceSkip").show();var e;Array("domainSubdomain","domainNewDomain","domainExistingDomain"),$$(".multiple-choice-box-selected").invoke("removeClassName","multiple-choice-box-selected"),(e=$("domainSubdomain-2"))&&(e.style.display="block"),(e=$("domainNewDomain-2"))&&(e.style.display="block",$("domain_sld").value="",$("domainStatus").innerHTML=""),(e=$("domainExistingDomain-2"))&&($("weeblyExistingDomain").value=""),domainChoiceSelected="";var t=Weebly.Location&&Weebly.Location.weebly_subdomain?Weebly.Location.weebly_subdomain:"";t=t.match(/^[\d]+$/)?"":t,$("domainChoiceTitle")&&$("domainChoiceTitle").update("string"==typeof defaultDomainChoiceTitle?defaultDomainChoiceTitle:_W.tl("Choose Your Website Domain")),Weebly.Restrictions&&Weebly.Restrictions.hasAccess("domain_buying")&&($("domainExistingTitleDefault").show(),$("domainExistingTitleClient").hide(),$("clientDomainHelp").hide()),$("designerDomainSetupMessage").hide(),Weebly.Restrictions&&Weebly.Restrictions.isClientSite&&($("domainChoiceTitle").update("Setup a Client Domain"),$("domainExistingTitleDefault").hide(),$("domainExistingTitleClient").show(),$("designerDomainSetupMessage").show(),$("clientDomainHelp").show()),$("chooseDomainDiv").style.display="block",$("domainWrapper").style.display="block",$("domainRegisterComplete").style.display="none",$("domainExistingException").style.display="none",$("clientDomainExistingException").style.display="none",$("weeblyDomain").value=t,$("weeblyExistingDomain")&&($("weeblyExistingDomain").value=Weebly.Location&&Weebly.Location.custom_domain&&!Weebly.Location.purchased_domain?Weebly.Location.custom_domain:"www.example.com",$("existingDomainInvalid").hide()),$("domainChoiceError").innerHTML="",$("domainChoiceError").style.display="none",$("weeblyDomainStatus").innerHTML="",$("finalDomainName").update(""),$("weeblyExistingDomain")&&"www.example.com"!=$("weeblyExistingDomain").value?(domainChoiceSelect("domainExistingDomain"),$("weeblyExistingDomain").setStyle({color:""})):$("weeblyDomain").value&&!Weebly.Location.purchased_domain?domainChoiceSelect("domainSubdomain"):domainChoiceSelect(void 0)}function handlerSaveSubdomain(e){if(e.responseText.indexOf("the following problems")>0)$("domainChoiceError").innerHTML=e.responseText,$("domainChoiceError").style.display="block";else if(Weebly.Location&&(Weebly.Location.weebly_subdomain=$("weeblyDomain").value,Weebly.Location.custom_domain="",Weebly.Location.purchased_domain=!1),domainChoiceFinish(),"function"==typeof window.ga){var t=_W.domainMenuLocation?"?location="+_W.domainMenuLocation:"";window.ga("send","pageview",{page:"/choose-domain-success"+t,title:"Choose Domain Success"}),_W.domainMenuLocation=null}}function openCompetitorWindow(){"$217.82"==$("competitorTotal").innerHTML?window.open("http://"+editorStatic+"/weebly/images/godaddy1year.png","godaddy1","toolbar=0,status=0,width=746,height=549"):window.open("http://"+editorStatic+"/weebly/images/godaddy2years.png","godaddy2","toolbar=0,status=0,width=820,height=562")}function completeDomainPurchase(e){$("finalDomainNameConfirmation").innerHTML=e,$("finalDomainNameComplete").innerHTML=$("finalDomainName").innerHTML,$("domainRegisterComplete").style.display="block",$("domainWrapper").style.display="block",$("chooseDomain").style.width="566px"}function continueFromPublish(){if(""!=$("publish_domain_sld").value){if(!$("domainStatus").innerHTML.match(/Not Available/)&&!$("domainStatus").innerHTML.match(/Checking/)&&""!=$("domainStatus").innerHTML){var e="domain",t=filterDomain($("publish_domain_sld").value);$("finalDomainName").innerHTML=t+"."+$("publish_domain_tld").value;var i="domain="+$("finalDomainName").innerHTML;"1"==Weebly.bundlePlanTest&&(Weebly.Restrictions.level?e="domain":(e="premium",i+="&fromDomain=1",i+="&comparison=1")),showPurchaseScreen({refer:domainPurchaseRefer,type:e,extraArgs:i})}}else $("domainStatus").innerHTML="Please choose a Domain"}function continuePostPurchase(){if($("domain-search-box").hasClassName("available")){var e=$("domain_sld").value,t=$("domain_tld").value,i=e+"."+t;window.location=buildSecureUrl("/weebly/apps/purchasePage.php?type=domain&s="+configSiteName+"&domain="+i),monitorBillingWindow(window)}else alert(_W.tl("Domain is not available"))}function domainChoiceFinish(){if("publish"==domainNextStep)settingQuickExport=1,Pages.go("doExport");else if("blogpostpublish"==domainNextStep)settingQuickExport=1,currentBlog=jQuery.extend(!0,{},domainNextBlog),goPublishPost(domainNextBlog.postId);else if("editor"==domainNextStep){var e=$("pro-referral-dialog");if(e){domainDialog&&domainDialog.close();var t=new Weebly.Dialog(e,{showClose:!1});t.open()}else window.location="main.php"}else"categorizeSite"===domainNextStep?Pages.go("categorizeSite"):"planningModal"===domainNextStep?Pages.go("planningModal"):"displaySiteSettings"===domainNextStep?(require("editor/app").settings.refreshSettings(),domainDialog.close(),Pages.currentNavPage="none",showTrackingFrame("setup_custom_domain")):Pages.go("main")}function onTextChange(e,t){var i=$(e);if(""==i.value)return isUserTyping=0,$("domainStatus").innerHTML="",void 0;if(t||0==isUserTyping)if(t)if(i&&i.value&&i.value==t){isUserTyping=0;var n=i.up(".multiple-choice-box");n||(n=$("exportText")),showDomainCheckChecking(n),"domain_sld"==e||"publish_domain_sld"==e?checkDomain():checkWeeblyDomain()}else setTimeout(function(){onTextChange(e,i.value)},700);else isUserTyping=e,setTimeout(function(){onTextChange(e,i.value)},700)}function checkWeeblyDomain(){var e=$("weeblyDomain").value,t=new Array;if(""!=e){t.push(new RegExp("^.*:\\/\\/","")),t.push(new RegExp("^.*@","")),t.push(new RegExp("^\\-+","")),t.push(new RegExp("\\+$","")),t.push(new RegExp("[^a-zA-Z0-9-]","g"));for(var i=e,n=0;n<t.length;n++)e=e.replace(t[n],"");e=e.substr(0,40),i!=e&&($("weeblyDomain").value=e),new Ajax.Request(ajax,{parameters:{pos:"checkWeeblyDomain",weeblySubDomain:e,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerCheckWeeblyDomain,onFailure:errFunc,bgRequest:!0,onException:exceptionFunc})}}function handlerCheckWeeblyDomain(e){e.responseText.match(/%%SUCCESS%%/)?($("domainSubdomain").down(".domain-check-success").show(),$("domainSubdomain").down(".domain-check-taken").hide(),$("domainSubdomain").down(".domain-check-checking").hide()):($("domainSubdomain").down(".domain-check-success").hide(),$("domainSubdomain").down(".domain-check-taken").show(),$("domainSubdomain").down(".domain-check-checking").hide())}function genericCheckDomain(e){new Ajax.Request(ajax,{parameters:{pos:"checkdomain",domainname:e.sld,domaintld:e.tld,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){var i=t.responseText;i.match(/%%SUCCESS%%/)?e.available(t):i.match(/%%FAILURE%%/)&&e.unavailable(t)},onFailure:errFunc,onException:exceptionFunc,bgRequest:!0})}function checkDomain(){if($("publish_domain_sld"))var e=$("publish_domain_sld"),t=$("publish_domain_tld");else var e=$("domain_sld"),t=$("domain_tld");if(domainName=e.value,domainNameTld=t.value,""!=domainName){var i=domainName;domainName=filterDomain(domainName),i!=domainName&&(e.value=domainName),$("domainStatus").innerHTML='<a style="color: grey;">'+_W.tl("Checking ..")+"</a>",$("finalDomainName").innerHTML=domainName+"."+domainNameTld,new Ajax.Request(ajax,{parameters:{pos:"checkdomain",domainname:domainName,domaintld:domainNameTld,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerCheckDomain,onFailure:errFunc,bgRequest:!0,onException:exceptionFunc})}}function filterDomain(e){var t=new Array;if(""!=e){t.push(new RegExp("\\.com","")),t.push(new RegExp("\\.net","")),t.push(new RegExp("\\.org","")),t.push(new RegExp("^.*:\\/\\/","")),t.push(new RegExp("^.*@","")),t.push(new RegExp("www\\.","")),t.push(new RegExp("^\\-+","")),t.push(new RegExp("\\+$","")),t.push(new RegExp("[^a-zA-Z0-9-]","g"));for(var i=0;i<t.length;i++)e=e.replace(t[i],"");return e.substr(0,63)}return""}function handlerCheckDomain(e){var t=$("publish_domain_sld")?$("exportText"):$("domainNewDomain");e.responseText.match(/%%SUCCESS%%/)?(t.down(".domain-check-success").show(),t.down(".domain-check-taken").hide(),t.down(".domain-check-checking").hide(),$("domainStatus").innerHTML='<a style="color: green;">'+_W.tl("Available")+"</a>",$("finalDomainName").innerHTML=domainName+"."+domainNameTld):e.responseText.match(/%%FAILURE%%/)&&(t.down(".domain-check-success").hide(),t.down(".domain-check-checking").hide(),t.down(".domain-check-taken").show(),$("domainStatus").innerHTML='<a style="color: red;">'+_W.tl("Not Available")+"</a>",$("finalDomainName").update(""))}function showDomainCheckChecking(e){e.down(".domain-check-success").hide(),e.down(".domain-check-taken").hide(),e.down(".domain-check-checking").show()}function curvyCorners(){if("object"!=typeof arguments[0])throw newCurvyError("First parameter of curvyCorners() must be an object.");if("object"!=typeof arguments[1]&&"string"!=typeof arguments[1])throw newCurvyError("Second parameter of curvyCorners() must be an object or a class name.");if("string"==typeof arguments[1])var e=0,t=getElementsByClass(arguments[1]);else var e=1,t=arguments;var i=new Array;if(arguments[0].validTags)var n=arguments[0].validTags;else var n=["div"];for(var o=e,s=t.length;s>o;o++){var r=t[o].tagName.toLowerCase();inArray(n,r)!==!1&&(i[i.length]=new curvyObject(arguments[0],t[o]))}this.objects=i,this.applyCornersToAll=function(){for(var e=0,t=this.objects.length;t>e;e++)this.objects[e].applyCorners()}}function curvyObject(){this.box=arguments[1],this.settings=arguments[0],this.topContainer=null,this.bottomContainer=null,this.masterCorners=new Array,this.contentDIV=null;var e=get_style(this.box,"height","height"),t=get_style(this.box,"width","width"),i=get_style(this.box,"borderTopWidth","border-top-width"),n=get_style(this.box,"borderTopColor","border-top-color"),o=get_style(this.box,"backgroundColor","background-color"),s=get_style(this.box,"backgroundImage","background-image"),r=get_style(this.box,"position","position"),a=get_style(this.box,"paddingTop","padding-top");this.boxHeight=parseInt(""!=e&&"auto"!=e&&-1==e.indexOf("%")?e.substring(0,e.indexOf("px")):this.box.scrollHeight),this.boxWidth=parseInt(""!=t&&"auto"!=t&&-1==t.indexOf("%")?t.substring(0,t.indexOf("px")):this.box.scrollWidth),this.borderWidth=parseInt(""!=i&&-1!==i.indexOf("px")?i.slice(0,i.indexOf("px")):0),this.boxColour=format_colour(o),this.boxPadding=parseInt(""!=a&&-1!==a.indexOf("px")?a.slice(0,a.indexOf("px")):0),this.borderColour=format_colour(n),this.borderString=this.borderWidth+"px"+" solid "+this.borderColour,this.backgroundImage="none"!=s?s:"",this.boxContent=this.box.innerHTML,"absolute"!=r&&(this.box.style.position="relative"),this.box.style.padding="0px",isIE&&"auto"==t&&"auto"==e&&(this.box.style.width="100%"),1==this.settings.autoPad&&this.boxPadding>0&&(this.box.innerHTML=""),this.applyCorners=function(){for(var e=0;2>e;e++)switch(e){case 0:if(this.settings.tl||this.settings.tr){var t=document.createElement("DIV");t.style.width="100%",t.style.fontSize="1px",t.style.overflow="hidden",t.style.position="absolute",t.style.paddingLeft=this.borderWidth+"px",t.style.paddingRight=this.borderWidth+"px";var i=Math.max(this.settings.tl?this.settings.tl.radius:0,this.settings.tr?this.settings.tr.radius:0);t.style.height=i+"px",t.style.top=0-i+"px",t.style.left=0-this.borderWidth+"px",this.topContainer=this.box.appendChild(t)}break;case 1:if(this.settings.bl||this.settings.br){var t=document.createElement("DIV");t.style.width="100%",t.style.fontSize="1px",t.style.overflow="hidden",t.style.position="absolute",t.style.paddingLeft=this.borderWidth+"px",t.style.paddingRight=this.borderWidth+"px";var n=Math.max(this.settings.bl?this.settings.bl.radius:0,this.settings.br?this.settings.br.radius:0);t.style.height=n+"px",t.style.bottom=0-n+"px",t.style.left=0-this.borderWidth+"px",this.bottomContainer=this.box.appendChild(t)}}this.topContainer&&(this.box.style.borderTopWidth="0px"),this.bottomContainer&&(this.box.style.borderBottomWidth="0px");var o=["tr","tl","br","bl"];for(var s in o)if(4>(s>-1)){var r=o[s];if(this.settings[r]){if(this.masterCorners[this.settings[r].radius])var a=this.masterCorners[this.settings[r].radius].cloneNode(!0);else{var a=document.createElement("DIV");a.style.height=this.settings[r].radius+"px",a.style.width=this.settings[r].radius+"px",a.style.position="absolute",a.style.fontSize="1px",a.style.overflow="hidden";for(var l=parseInt(this.settings[r].radius-this.borderWidth),c=0,u=this.settings[r].radius;u>c;c++){if(c+1>=l)var d=-1;else var d=Math.floor(Math.sqrt(Math.pow(l,2)-Math.pow(c+1,2)))-1;if(l!=u){if(c>=l)var h=-1;else var h=Math.ceil(Math.sqrt(Math.pow(l,2)-Math.pow(c,2)));if(c+1>=u)var p=-1;else var p=Math.floor(Math.sqrt(Math.pow(u,2)-Math.pow(c+1,2)))-1}if(c>=u)var f=-1;else var f=Math.ceil(Math.sqrt(Math.pow(u,2)-Math.pow(c,2)));if(d>-1&&this.drawPixel(c,0,this.boxColour,100,d+1,a,-1,this.settings[r].radius),l!=u){for(var m=d+1;h>m;m++)if(this.settings.antiAlias)if(""!=this.backgroundImage){var g=100*pixelFraction(c,m,l);30>g?this.drawPixel(c,m,this.borderColour,100,1,a,0,this.settings[r].radius):this.drawPixel(c,m,this.borderColour,100,1,a,-1,this.settings[r].radius)}else{var v=BlendColour(this.boxColour,this.borderColour,pixelFraction(c,m,l));this.drawPixel(c,m,v,100,1,a,0,this.settings[r].radius,r)}this.settings.antiAlias?p>=h&&(-1==h&&(h=0),this.drawPixel(c,h,this.borderColour,100,p-h+1,a,0,0)):p>=d&&this.drawPixel(c,d+1,this.borderColour,100,p-d,a,0,0);var b=this.borderColour}else var b=this.boxColour,p=d;if(this.settings.antiAlias)for(var m=p+1;f>m;m++)this.drawPixel(c,m,b,100*pixelFraction(c,m,u),1,a,this.borderWidth>0?0:-1,this.settings[r].radius)}this.masterCorners[this.settings[r].radius]=a.cloneNode(!0)}if("br"!=r)for(var e=0,y=a.childNodes.length;y>e;e++){var w=a.childNodes[e],_=parseInt(w.style.top.substring(0,w.style.top.indexOf("px"))),M=parseInt(w.style.left.substring(0,w.style.left.indexOf("px"))),C=parseInt(w.style.height.substring(0,w.style.height.indexOf("px")));switch(("tl"==r||"bl"==r)&&(w.style.left=this.settings[r].radius-M-1+"px"),("tr"==r||"tl"==r)&&(w.style.top=this.settings[r].radius-C-_+"px"),r){case"tr":w.style.backgroundPosition="-"+Math.abs(this.boxWidth-this.settings[r].radius+this.borderWidth+M)+"px -"+Math.abs(this.settings[r].radius-C-_-this.borderWidth)+"px";break;case"tl":w.style.backgroundPosition="-"+Math.abs(this.settings[r].radius-M-1-this.borderWidth)+"px -"+Math.abs(this.settings[r].radius-C-_-this.borderWidth)+"px";break;case"bl":w.style.backgroundPosition="-"+Math.abs(this.settings[r].radius-M-1-this.borderWidth)+"px -"+Math.abs(this.boxHeight+this.settings[r].radius+_-this.borderWidth)+"px"}}}else if(("tr"==r||"tl"==r)&&null!=this.topContainer||("br"==r||"bl"==r)&&null!=this.bottomContainer){var a=document.createElement("DIV");switch(a.style.position="relative",a.style.fontSize="1px",a.style.overflow="hidden",""==this.backgroundImage?a.style.backgroundColor=this.boxColour:a.style.backgroundImage=this.backgroundImage,r){case"tl":a.style.height=i-this.borderWidth+"px",a.style.marginRight=this.settings.tr.radius-2*this.borderWidth+"px",a.style.borderLeft=this.borderString,a.style.borderTop=this.borderString,a.style.left=-this.borderWidth+"px";break;case"tr":a.style.height=i-this.borderWidth+"px",a.style.marginLeft=this.settings.tl.radius-2*this.borderWidth+"px",a.style.borderRight=this.borderString,a.style.borderTop=this.borderString,a.style.backgroundPosition="-"+(i+this.borderWidth)+"px 0px",a.style.left=this.borderWidth+"px";break;case"bl":a.style.height=n-this.borderWidth+"px",a.style.marginRight=this.settings.br.radius-2*this.borderWidth+"px",a.style.borderLeft=this.borderString,a.style.borderBottom=this.borderString,a.style.left=-this.borderWidth+"px",a.style.backgroundPosition="-"+this.borderWidth+"px -"+(this.boxHeight+(n+this.borderWidth))+"px";break;case"br":a.style.height=n-this.borderWidth+"px",a.style.marginLeft=this.settings.bl.radius-2*this.borderWidth+"px",a.style.borderRight=this.borderString,a.style.borderBottom=this.borderString,a.style.left=this.borderWidth+"px",a.style.backgroundPosition="-"+(n+this.borderWidth)+"px -"+(this.boxHeight+(n+this.borderWidth))+"px"}}if(a)switch(r){case"tl":"absolute"==a.style.position&&(a.style.top="0px"),"absolute"==a.style.position&&(a.style.left="0px"),this.topContainer&&this.topContainer.appendChild(a);break;case"tr":"absolute"==a.style.position&&(a.style.top="0px"),"absolute"==a.style.position&&(a.style.right="0px"),this.topContainer&&this.topContainer.appendChild(a);break;case"bl":"absolute"==a.style.position&&(a.style.bottom="0px"),"absolute"==a.style.position&&(a.style.left="0px"),this.bottomContainer&&this.bottomContainer.appendChild(a);break;case"br":"absolute"==a.style.position&&(a.style.bottom="0px"),"absolute"==a.style.position&&(a.style.right="0px"),this.bottomContainer&&this.bottomContainer.appendChild(a)}}var x=new Array;x.t=Math.abs(this.settings.tl.radius-this.settings.tr.radius),x.b=Math.abs(this.settings.bl.radius-this.settings.br.radius);for(z in x)if("t"==z||"b"==z){if(x[z]){var k=this.settings[z+"l"].radius<this.settings[z+"r"].radius?z+"l":z+"r",S=document.createElement("DIV");switch(S.style.height=x[z]+"px",S.style.width=this.settings[k].radius+"px",S.style.position="absolute",S.style.fontSize="1px",S.style.overflow="hidden",S.style.backgroundColor=this.boxColour,k){case"tl":S.style.bottom="0px",S.style.left="0px",S.style.borderLeft=this.borderString,this.topContainer.appendChild(S);break;case"tr":S.style.bottom="0px",S.style.right="0px",S.style.borderRight=this.borderString,this.topContainer.appendChild(S);break;case"bl":S.style.top="0px",S.style.left="0px",S.style.borderLeft=this.borderString,this.bottomContainer.appendChild(S);break;case"br":S.style.top="0px",S.style.right="0px",S.style.borderRight=this.borderString,this.bottomContainer.appendChild(S)
}}var T=document.createElement("DIV");switch(T.style.position="relative",T.style.fontSize="1px",T.style.overflow="hidden",T.style.backgroundColor=this.boxColour,T.style.backgroundImage=this.backgroundImage,z){case"t":this.topContainer&&(this.settings.tl.radius&&this.settings.tr.radius&&(T.style.height=i-this.borderWidth+"px",T.style.marginLeft=this.settings.tl.radius-this.borderWidth+"px",T.style.marginRight=this.settings.tr.radius-this.borderWidth+"px",T.style.borderTop=this.borderString,""!=this.backgroundImage&&(T.style.backgroundPosition="-"+(i+this.borderWidth)+"px 0px"),this.topContainer.appendChild(T)),this.box.style.backgroundPosition="0px -"+(i-this.borderWidth)+"px");break;case"b":this.bottomContainer&&this.settings.bl.radius&&this.settings.br.radius&&(T.style.height=n-this.borderWidth+"px",T.style.marginLeft=this.settings.bl.radius-this.borderWidth+"px",T.style.marginRight=this.settings.br.radius-this.borderWidth+"px",T.style.borderBottom=this.borderString,""!=this.backgroundImage&&(T.style.backgroundPosition="-"+(n+this.borderWidth)+"px -"+(this.boxHeight+(i+this.borderWidth))+"px"),this.bottomContainer.appendChild(T))}}if(1==this.settings.autoPad&&this.boxPadding>0){var A=document.createElement("DIV");A.style.position="relative",A.innerHTML=this.boxContent,A.className="autoPadDiv";var D=Math.abs(i-this.boxPadding);Math.abs(n-this.boxPadding),i<this.boxPadding&&(A.style.paddingTop=D+"px"),n<this.boxPadding&&(A.style.paddingBottom=n+"px"),A.style.paddingLeft=this.boxPadding+"px",A.style.paddingRight=this.boxPadding+"px",this.contentDIV=this.box.appendChild(A)}},this.drawPixel=function(e,t,i,n,o,s,r,a){var l=document.createElement("DIV");l.style.height=o+"px",l.style.width="1px",l.style.position="absolute",l.style.fontSize="1px",l.style.overflow="hidden";var c=Math.max(this.settings.tr.radius,this.settings.tl.radius);-1==r&&""!=this.backgroundImage?(l.style.backgroundImage=this.backgroundImage,l.style.backgroundPosition="-"+(this.boxWidth-(a-e)+this.borderWidth)+"px -"+(this.boxHeight+c+t-this.borderWidth)+"px"):l.style.backgroundColor=i,100!=n&&setOpacity(l,n),l.style.top=t+"px",l.style.left=e+"px",s.appendChild(l)}}function insertAfter(e,t,i){e.insertBefore(t,i.nextSibling)}function BlendColour(e,t,i){var n=parseInt(e.substr(1,2),16),o=parseInt(e.substr(3,2),16),s=parseInt(e.substr(5,2),16),r=parseInt(t.substr(1,2),16),a=parseInt(t.substr(3,2),16),l=parseInt(t.substr(5,2),16);(i>1||0>i)&&(i=1);var c=Math.round(n*i+r*(1-i));c>255&&(c=255),0>c&&(c=0);var u=Math.round(o*i+a*(1-i));u>255&&(u=255),0>u&&(u=0);var d=Math.round(s*i+l*(1-i));return d>255&&(d=255),0>d&&(d=0),"#"+IntToHex(c)+IntToHex(u)+IntToHex(d)}function IntToHex(e){return base=e/16,rem=e%16,base-=rem/16,baseS=MakeHex(base),remS=MakeHex(rem),baseS+""+remS}function MakeHex(e){if(e>=0&&9>=e)return e;switch(e){case 10:return"A";case 11:return"B";case 12:return"C";case 13:return"D";case 14:return"E";case 15:return"F"}}function pixelFraction(e,t,i){var n=0,o=new Array(1),s=new Array(1),r=0,a="",l=Math.sqrt(Math.pow(i,2)-Math.pow(e,2));l>=t&&t+1>l&&(a="Left",o[r]=0,s[r]=l-t,r+=1);var l=Math.sqrt(Math.pow(i,2)-Math.pow(t+1,2));l>=e&&e+1>l&&(a+="Top",o[r]=l-e,s[r]=1,r+=1);var l=Math.sqrt(Math.pow(i,2)-Math.pow(e+1,2));l>=t&&t+1>l&&(a+="Right",o[r]=1,s[r]=l-t,r+=1);var l=Math.sqrt(Math.pow(i,2)-Math.pow(t,2));switch(l>=e&&e+1>l&&(a+="Bottom",o[r]=l-e,s[r]=0),a){case"LeftRight":n=Math.min(s[0],s[1])+(Math.max(s[0],s[1])-Math.min(s[0],s[1]))/2;break;case"TopRight":n=1-(1-o[0])*(1-s[1])/2;break;case"TopBottom":n=Math.min(o[0],o[1])+(Math.max(o[0],o[1])-Math.min(o[0],o[1]))/2;break;case"LeftBottom":n=s[0]*o[1]/2;break;default:n=1}return n}function rgb2Hex(e){try{var t=rgb2Array(e),i=parseInt(t[0]),n=parseInt(t[1]),o=parseInt(t[2]),s="#"+IntToHex(i)+IntToHex(n)+IntToHex(o)}catch(r){alert("There was an error converting the RGB value to Hexadecimal in function rgb2Hex")}return s}function rgb2Array(e){var t=e.substring(4,e.indexOf(")")),i=t.split(", ");return i}function setOpacity(e,t){if(t=100==t?99.999:t,isSafari&&"IFRAME"!=e.tagName){var i=rgb2Array(e.style.backgroundColor),n=parseInt(i[0]),o=parseInt(i[1]),s=parseInt(i[2]);e.style.backgroundColor="rgba("+n+", "+o+", "+s+", "+t/100+")"}else"undefined"!=typeof e.style.opacity?e.style.opacity=t/100:"undefined"!=typeof e.style.MozOpacity?e.style.MozOpacity=t/100:"undefined"!=typeof e.style.filter?e.style.filter="alpha(opacity:"+t+")":"undefined"!=typeof e.style.KHTMLOpacity&&(e.style.KHTMLOpacity=t/100)}function inArray(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return!1}function inArrayKey(e,t){for(key in e)if(key===t)return!0;return!1}function addEvent(e,t,i,n){if(e.addEventListener)return e.addEventListener(t,i,n),!0;if(e.attachEvent){var o=e.attachEvent("on"+t,i);return o}e["on"+t]=i}function removeEvent(e,t,i,n){if(e.removeEventListener)return e.removeEventListener(t,i,n),!0;if(e.detachEvent){var o=e.detachEvent("on"+t,i);return o}alert("Handler could not be removed")}function format_colour(e){var t="#ffffff";return""!=e&&"transparent"!=e&&(t="rgb"==e.substr(0,3)?rgb2Hex(e):4==e.length?"#"+e.substring(1,2)+e.substring(1,2)+e.substring(2,3)+e.substring(2,3)+e.substring(3,4)+e.substring(3,4):e),t}function get_style(obj,property,propertyNS){try{if(obj.currentStyle)var returnVal=eval("obj.currentStyle."+property);else{if(isSafari&&"none"==obj.style.display){obj.style.display="";var wasHidden=!0}var returnVal=document.defaultView.getComputedStyle(obj,"").getPropertyValue(propertyNS);isSafari&&wasHidden&&(obj.style.display="none")}}catch(e){}return returnVal}function getElementsByClass(e,t,n){var o=new Array;null==t&&(t=document),null==n&&(n="*");var s=t.getElementsByTagName(n),r=s.length,a=new RegExp("(^|s)"+e+"(s|$)");for(i=0,j=0;r>i;i++)a.test(s[i].className)&&(o[j]=s[i],j++);return o}function newCurvyError(e){return new Error("curvyCorners Error:\n"+e)}var _wAMD;!function(){if(!_wAMD||!_wAMD.requirejs){_wAMD?t=_wAMD:_wAMD={};var e,t,i;!function(n){function o(e,t){return w.call(e,t)}function s(e,t){var i,n,o,s,r,a,l,c,u,d,h=t&&t.split("/"),p=b.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(h=h.slice(0,h.length-1),e=h.concat(e.split("/")),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||f)&&p){for(i=e.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),h)for(u=h.length;u>0;u-=1)if(o=p[h.slice(0,u).join("/")],o&&(o=o[n])){s=o,r=c;break}if(s)break;!a&&f&&f[n]&&(a=f[n],l=c)}!s&&a&&(s=a,r=l),s&&(i.splice(0,r,s),e=i.join("/"))}return e}function r(e,t){return function(){return p.apply(n,_.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return s(t,e)}}function l(e){return function(t){g[e]=t}}function c(e){if(o(v,e)){var t=v[e];delete v[e],y[e]=!0,h.apply(n,t)}if(!o(g,e)&&!o(y,e))throw new Error("No "+e);return g[e]}function u(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function d(e){return function(){return b&&b.config&&b.config[e]||{}}}var h,p,f,m,g={},v={},b={},y={},w=Object.prototype.hasOwnProperty,_=[].slice;f=function(e,t){var i,n=u(e),o=n[0];return e=n[1],o&&(o=s(o,t),i=c(o)),o?e=i&&i.normalize?i.normalize(e,a(t)):s(e,t):(e=s(e,t),n=u(e),o=n[0],e=n[1],o&&(i=c(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:i}},m={require:function(e){return r(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:d(e)}}},h=function(e,t,i,s){var a,u,d,h,p,b,w=[];if(s=s||e,"function"==typeof i){for(t=!t.length&&i.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(h=f(t[p],s),u=h.f,"require"===u)w[p]=m.require(e);else if("exports"===u)w[p]=m.exports(e),b=!0;else if("module"===u)a=w[p]=m.module(e);else if(o(g,u)||o(v,u)||o(y,u))w[p]=c(u);else{if(!h.p)throw new Error(e+" missing "+u);h.p.load(h.n,r(s,!0),l(u),{}),w[p]=g[u]}d=i.apply(g[e],w),e&&(a&&a.exports!==n&&a.exports!==g[e]?g[e]=a.exports:d===n&&b||(g[e]=d))}else e&&(g[e]=i)},e=t=p=function(e,t,i,o,s){return"string"==typeof e?m[e]?m[e](t):c(f(e,t).f):(e.splice||(b=e,t.splice?(e=t,t=i,i=null):e=n),t=t||function(){},"function"==typeof i&&(i=o,o=s),o?h(n,e,t,i):setTimeout(function(){h(n,e,t,i)},4),p)},p.config=function(e){return b=e,b.deps&&p(b.deps,b.callback),p},i=function(e,t,i){t.splice||(i=t,t=[]),o(g,e)||o(v,e)||(v[e]=[e,t,i])},i.amd={jQuery:!0}}(),_wAMD.requirejs=e,_wAMD.require=t,_wAMD.define=i}}(),_wAMD.define("vendor/almond",function(){}),function(){function e(e,t){s>0&&0>=r?e():t?a.unshift(e):a.push(e)}function t(){var e=Array.prototype.slice.apply(arguments);if(1===e.length&&"string"==typeof e[0]);else{var t;"function"==typeof e[e.length-1]&&(t=e.pop()),s++,r++,e.push(function(){var e;if(t&&(e=t.apply(this,arguments)),r--,s>0&&0>=r)for(;a.length;)a.shift()();return e})}return p.apply(this,e)}function i(){window.define=l,window.require=c,window.requirejs=u}function n(){Weebly.jQuery.noConflict(!0),window.jQuery=window.jQuery||Weebly.jQuery}function o(){i(),n()}_W=Weebly=window.Weebly||{},_W.tl=_W.tl||function(e){return e},Weebly.ns=function(e,t){for(var t=t||window,i=e.split("."),n=0,o=i.length;o>n;n++){var s=i[n];"string"!=typeof s?t=s:(t[s]||(t[s]={}),t=t[s])}return t};var s=0,r=0,a=[];Weebly.ready=e;var l=window.define,c=window.require,u=window.requirejs,d=window._wAMD||{},h=d.define||window.define,p=d.require||window.require,f=d.requirejs||window.requirejs;window.define=d.define=h,window.require=d.require=t,window.requirejs=d.requirejs=f,Weebly.relinquishAMD=i,Weebly.jQuery=jQuery,Weebly.relinquishJQuery=n;var m=jQuery.fn.ready;jQuery.fn.ready=function(){var t=this,i=arguments;return e(function(){m.apply(t,i)}),t},Weebly.relinquish=o}(),window.console||(window.console={}),window.console.log||(window.console.log=function(){},window.console.warn=window.console.log,window.console.info=window.console.log,window.console.error=window.console.log),_wAMD.define("init",function(){}),_wAMD.define("jquery",[],function(){return Weebly.jQuery}),function(e){!function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("public_legacy/mustache",t):e.Mustache=t}(this,function(){function e(e,t){return b.call(e,t)}function t(t){return!e(f,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return _[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function s(e,t){this.view=e,this.parent=t,this._cache={}}function r(){this.clearCache()}function a(e,t,i,n){for(var o,s,r,l="",c=0,u=e.length;u>c;++c)switch(o=e[c],s=o[1],o[0]){case"#":if(r=i.lookup(s),"object"==typeof r)if(w(r))for(var h=0,p=r.length;p>h;++h)l+=a(o[4],t,i.push(r[h]),n);else r&&(l+=a(o[4],t,i.push(r),n));else if("function"==typeof r){var f=null==n?null:n.slice(o[3],o[5]);r=r.call(i.view,f,function(e){return t.render(e,i)}),null!=r&&(l+=r)}else r&&(l+=a(o[4],t,i,n));break;case"^":r=i.lookup(s),(!r||w(r)&&0===r.length)&&(l+=a(o[4],t,i,n));break;case">":r=t.getPartial(s),"function"==typeof r&&(l+=r(i));break;case"&":r=i.lookup(s),null!=r&&(l+=r);break;case"name":r=i.lookup(s),null!=r&&(l+=d.escape(r));break;case"text":l+=s}return l}function l(e){for(var t,i=[],n=i,o=[],s=0,r=e.length;r>s;++s)switch(t=e[s],t[0]){case"#":case"^":o.push(t),n.push(t),n=t[4]=[];break;case"/":var a=o.pop();a[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}function c(e){for(var t,i,n=[],o=0,s=e.length;s>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function u(e){return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}var d={};d.name="mustache.js",d.version="0.7.2",d.tags=["{{","}}"],d.Scanner=o,d.Context=s,d.Writer=r;var h=/\s*/,p=/\s+/,f=/\S/,m=/\s*=/,g=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,y=Object.prototype.toString,w=Array.isArray||function(e){return"[object Array]"===y.call(e)},_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.escape=n,o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},s.make=function(e){return e instanceof s?e:new s(e)},s.prototype.push=function(e){return new s(e,this)},s.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var n=e.split("."),o=0;t&&o<n.length;)t=t[n[o++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},r.prototype.clearCache=function(){this._cache={},this._partialCache={}},r.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=d.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},r.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},r.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},r.prototype.compileTokens=function(e,t){var i=this;return function(n,o){if(o)if("function"==typeof o)i._loadPartial=o;else for(var r in o)i.compilePartial(r,o[r]);return a(e,i,s.make(n),t)}},r.prototype.render=function(e,t,i){return this.compile(e)(t,i)},d.parse=function(e,n){function s(){if(k&&!S)for(;x.length;)delete C[x.pop()];else x=[];k=!1,S=!1}if(e=e||"",n=n||d.tags,"string"==typeof n&&(n=n.split(p)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var r,a,f,b,y,w=u(n),_=new o(e),M=[],C=[],x=[],k=!1,S=!1;!_.eos();){if(r=_.pos,f=_.scanUntil(w[0]))for(var T=0,A=f.length;A>T;++T)b=f.charAt(T),t(b)?x.push(C.length):S=!0,C.push(["text",b,r,r+1]),r+=1,"\n"==b&&s();if(!_.scan(w[0]))break;if(k=!0,a=_.scan(v)||"name",_.scan(h),"="===a?(f=_.scanUntil(m),_.scan(m),_.scanUntil(w[1])):"{"===a?(f=_.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),_.scan(g),_.scanUntil(w[1]),a="&"):f=_.scanUntil(w[1]),!_.scan(w[1]))throw new Error("Unclosed tag at "+_.pos);if(y=[a,f,r,_.pos],C.push(y),"#"===a||"^"===a)M.push(y);else if("/"===a){if(0===M.length)throw new Error('Unopened section "'+f+'" at '+r);var D=M.pop();if(D[1]!==f)throw new Error('Unclosed section "'+D[1]+'" at '+r)}else if("name"===a||"{"===a||"&"===a)S=!0;else if("="===a){if(n=f.split(p),2!==n.length)throw new Error("Invalid tags at "+r+": "+n.join(", "));w=u(n)}}var D=M.pop();if(D)throw new Error('Unclosed section "'+D[1]+'" at '+_.pos);return C=c(C),l(C)};var M=new r;return d.clearCache=function(){return M.clearCache()},d.compile=function(e,t){return M.compile(e,t)},d.compilePartial=function(e,t,i){return M.compilePartial(e,t,i)},d.compileTokens=function(e,t){return M.compileTokens(e,t)},d.render=function(e,t,i){return M.render(e,t,i)},d.to_html=function(e,t,i,n){var o=d.render(e,t,i);return"function"!=typeof n?o:(n(o),void 0)},d}()),e.mustache=function(e,t,i){return Mustache.render(e,t,i)},e.fn.mustache=function(t,i){return e(this).map(function(n,o){var s=e.trim(e(o).html()),r=e.mustache(s,t,i);return e(r).get()})}}(jQuery),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e){vt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var i=!0;return d(function(){return i&&(n(e),i=!1),t.apply(this,arguments)},t)}function s(e,t){pi[e]||(n(t),pi[e]=!0)}function r(e,t){return function(i){return f(e.call(this,i),t)}}function a(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function l(){}function c(e,t){t!==!1&&E(e),h(this,e),this._d=new Date(+e._d)}function u(e){var t=C(e),i=t.year||0,n=t.quarter||0,o=t.month||0,s=t.week||0,r=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+r+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=vt.localeData(),this._bubble()}function d(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t){var i,n,o;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Pt.length>0)for(i in Pt)n=Pt[i],o=t[n],"undefined"!=typeof o&&(e[n]=o);return e}function p(e){return 0>e?Math.ceil(e):Math.floor(e)}function f(e,t,i){for(var n=""+Math.abs(e),o=e>=0;n.length<t;)n="0"+n;return(o?i?"+":"":"-")+n}function m(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function g(e,t){var i;return t=F(t,e),e.isBefore(t)?i=m(e,t):(i=m(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function v(e,t){return function(i,n){var o,r;return null===n||isNaN(+n)||(s(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,o=vt.duration(i,n),b(this,o,e),this}}function b(e,t,i,n){var o=t._milliseconds,s=t._days,r=t._months;n=null==n?!0:n,o&&e._d.setTime(+e._d+o*i),s&&dt(e,"Date",ut(e,"Date")+s*i),r&&ct(e,ut(e,"Month")+r*i),n&&vt.updateOffset(e,s||r)}function y(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function _(e,t,i){var n,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&k(e[n])!==k(t[n]))&&r++;return r+s}function M(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ri[e]||ai[t]||t}return e}function C(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=M(i),t&&(n[t]=e[i]));return n}function x(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}vt[t]=function(o,s){var r,a,l=vt._locale[t],c=[];if("number"==typeof o&&(s=o,o=e),a=function(e){var t=vt().utc().set(n,e);return l.call(vt._locale,t,o||"")},null!=s)return a(s);for(r=0;i>r;r++)c.push(a(r));return c}}function k(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function S(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function T(e,t,i){return st(vt([e,11,31+t-i]),t,i).week}function A(e){return D(e)?366:365}function D(e){return 0===e%4&&0!==e%100||0===e%400}function E(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[xt]<0||e._a[xt]>11?xt:e._a[kt]<1||e._a[kt]>S(e._a[Ct],e._a[xt])?kt:e._a[St]<0||e._a[St]>23?St:e._a[Tt]<0||e._a[Tt]>59?Tt:e._a[At]<0||e._a[At]>59?At:e._a[Dt]<0||e._a[Dt]>999?Dt:-1,e._pf._overflowDayOfYear&&(Ct>t||t>kt)&&(t=kt),e._pf.overflow=t)}function P(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function R(e){return e?e.toLowerCase().replace("_","-"):e}function z(e){for(var t,i,n,o,s=0;s<e.length;){for(o=R(e[s]).split("-"),t=o.length,i=R(e[s+1]),i=i?i.split("-"):null;t>0;){if(n=O(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&_(o,i,!0)>=t-1)break;t--}s++}return null}function O(e){var t=null;if(!Et[e]&&Rt)try{t=vt.locale(),require("./locale/"+e),vt.locale(t)}catch(i){}return Et[e]}function F(e,t){return t._isUTC?vt(e).zone(t._offset||0):vt(e).local()}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,i,n=e.match(Wt);for(t=0,i=n.length;i>t;t++)n[t]=hi[n[t]]?hi[n[t]]:W(n[t]);return function(o){var s="";for(t=0;i>t;t++)s+=n[t]instanceof Function?n[t].call(o,e):n[t];return s}}function N(e,t){return e.isValid()?(t=L(t,e.localeData()),li[t]||(li[t]=I(t)),li[t](e)):e.localeData().invalidDate()}function L(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(It.lastIndex=0;n>=0&&It.test(e);)e=e.replace(It,i),It.lastIndex=0,n-=1;return e}function B(e,t){var i,n=t._strict;switch(e){case"Q":return Gt;case"DDDD":return Jt;case"YYYY":case"GGGG":case"gggg":return n?Kt:Bt;case"Y":case"G":case"g":return Zt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Qt:Ht;case"S":if(n)return Gt;case"SS":if(n)return Xt;case"SSS":if(n)return Jt;case"DDD":return Lt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"X":return Ut;case"Z":case"ZZ":return jt;case"T":return $t;case"SSSS":return qt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Xt:Nt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Nt;case"Do":return Yt;default:return i=new RegExp(X(G(e.replace("\\","")),"i"))}}function H(e){e=e||"";var t=e.match(jt)||[],i=t[t.length-1]||[],n=(i+"").match(oi)||["-",0,0],o=+(60*n[1])+k(n[2]);return"+"===n[0]?-o:o}function q(e,t,i){var n,o=i._a;switch(e){case"Q":null!=t&&(o[xt]=3*(k(t)-1));break;case"M":case"MM":null!=t&&(o[xt]=k(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t),null!=n?o[xt]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[kt]=k(t));break;case"Do":null!=t&&(o[kt]=k(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=k(t));break;case"YY":o[Ct]=vt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":o[Ct]=k(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":o[St]=k(t);break;case"m":case"mm":o[Tt]=k(t);break;case"s":case"ss":o[At]=k(t);break;case"S":case"SS":case"SSS":case"SSSS":o[Dt]=k(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=H(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=k(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=vt.parseTwoDigitYear(t)}}function V(e){var i,n,o,s,r,a,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(r=1,a=4,n=t(i.GG,e._a[Ct],st(vt(),1,4).year),o=t(i.W,1),s=t(i.E,1)):(r=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[Ct],st(vt(),r,a).year),o=t(i.w,1),null!=i.d?(s=i.d,r>s&&++o):s=null!=i.e?i.e+r:r),l=rt(n,o,s,a,r),e._a[Ct]=l.year,e._dayOfYear=l.dayOfYear}function j(e){var i,n,o,s,r=[];if(!e._d){for(o=U(e),e._w&&null==e._a[kt]&&null==e._a[xt]&&V(e),e._dayOfYear&&(s=t(e._a[Ct],o[Ct]),e._dayOfYear>A(s)&&(e._pf._overflowDayOfYear=!0),n=tt(s,0,e._dayOfYear),e._a[xt]=n.getUTCMonth(),e._a[kt]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=r[i]=o[i];for(;7>i;i++)e._a[i]=r[i]=null==e._a[i]?2===i?1:0:e._a[i];e._d=(e._useUTC?tt:et).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function $(e){var t;e._d||(t=C(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],j(e))}function U(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Y(e){if(e._f===vt.ISO_8601)return K(e),void 0;e._a=[],e._pf.empty=!0;var t,i,n,o,s,r=""+e._i,a=r.length,l=0;for(n=L(e._f,e._locale).match(Wt)||[],t=0;t<n.length;t++)o=n[t],i=(r.match(B(o,e))||[])[0],i&&(s=r.substr(0,r.indexOf(i)),s.length>0&&e._pf.unusedInput.push(s),r=r.slice(r.indexOf(i)+i.length),l+=i.length),hi[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),q(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-l,r.length>0&&e._pf.unusedInput.push(r),e._isPm&&e._a[St]<12&&(e._a[St]+=12),e._isPm===!1&&12===e._a[St]&&(e._a[St]=0),j(e),E(e)}function G(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e){var t,n,o,s,r;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(s=0;s<e._f.length;s++)r=0,t=h({},e),t._pf=i(),t._f=e._f[s],Y(t),P(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==o||o>r)&&(o=r,n=t));d(e,n||t)}function K(e){var t,i,n=e._i,o=ei.exec(n);if(o){for(e._pf.iso=!0,t=0,i=ii.length;i>t;t++)if(ii[t][1].exec(n)){e._f=ii[t][0]+(o[6]||" ");break}for(t=0,i=ni.length;i>t;t++)if(ni[t][1].exec(n)){e._f+=ni[t][0];break}n.match(jt)&&(e._f+="Z"),Y(e)}else e._isValid=!1}function Q(e){K(e),e._isValid===!1&&(delete e._isValid,vt.createFromInputFallback(e))}function Z(t){var i,n=t._i;n===e?t._d=new Date:w(n)?t._d=new Date(+n):null!==(i=zt.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?Q(t):y(n)?(t._a=n.slice(0),j(t)):"object"==typeof n?$(t):"number"==typeof n?t._d=new Date(n):vt.createFromInputFallback(t)}function et(e,t,i,n,o,s,r){var a=new Date(e,t,i,n,o,s,r);return 1970>e&&a.setFullYear(e),a}function tt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function nt(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function ot(e,t,i){var n=vt.duration(e).abs(),o=Mt(n.as("s")),s=Mt(n.as("m")),r=Mt(n.as("h")),a=Mt(n.as("d")),l=Mt(n.as("M")),c=Mt(n.as("y")),u=o<ci.s&&["s",o]||1===s&&["m"]||s<ci.m&&["mm",s]||1===r&&["h"]||r<ci.h&&["hh",r]||1===a&&["d"]||a<ci.d&&["dd",a]||1===l&&["M"]||l<ci.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=i,nt.apply({},u)}function st(e,t,i){var n,o=i-t,s=i-e.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=vt(e).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function rt(e,t,i,n,o){var s,r,a=tt(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:o,s=o-a+(a>n?7:0)-(o>a?7:0),r=7*(t-1)+(i-o)+s+1,{year:r>0?e:e-1,dayOfYear:r>0?r:A(e-1)+r}}function at(t){var i=t._i,n=t._f;return t._locale=t._locale||vt.localeData(t._l),null===i||n===e&&""===i?vt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),vt.isMoment(i)?new c(i,!0):(n?y(n)?J(t):Y(t):Z(t),new c(t)))}function lt(e,t){var i,n;if(1===t.length&&y(t[0])&&(t=t[0]),!t.length)return vt();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function ct(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),S(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function ut(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function dt(e,t,i){return"Month"===t?ct(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function ht(e,t){return function(i){return null!=i?(dt(this,e,i),vt.updateOffset(this,t),this):ut(this,e)}}function pt(e){return 400*e/146097}function ft(e){return 146097*e/400}function mt(e){vt.duration.fn[e]=function(){return this._data[e]}}function gt(e){"undefined"==typeof ender&&(bt=_t.moment,_t.moment=e?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",vt):vt)}for(var vt,bt,yt,wt="2.8.1",_t="undefined"!=typeof global?global:this,Mt=Math.round,Ct=0,xt=1,kt=2,St=3,Tt=4,At=5,Dt=6,Et={},Pt=[],Rt="undefined"!=typeof module&&module.exports,zt=/^\/?Date\((\-?\d+)/i,Ot=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ft=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,It=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Nt=/\d\d?/,Lt=/\d{1,3}/,Bt=/\d{1,4}/,Ht=/[+\-]?\d{1,6}/,qt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,jt=/Z|[\+\-]\d\d:?\d\d/gi,$t=/T/i,Ut=/[\+\-]?\d+(\.\d{1,3})?/,Yt=/\d{1,2}/,Gt=/\d/,Xt=/\d\d/,Jt=/\d{3}/,Kt=/\d{4}/,Qt=/[+-]?\d{6}/,Zt=/[+-]?\d+/,ei=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ti="YYYY-MM-DDTHH:mm:ssZ",ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ni=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],oi=/([\+\-]|\d\d)/gi,si=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ri={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ai={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},li={},ci={s:45,m:45,h:22,d:26,M:11},ui="DDD w W M D d".split(" "),di="M D H h m s w W".split(" "),hi={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return f(this.year()%100,2)},YYYY:function(){return f(this.year(),4)},YYYYY:function(){return f(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+f(Math.abs(e),6)},gg:function(){return f(this.weekYear()%100,2)},gggg:function(){return f(this.weekYear(),4)},ggggg:function(){return f(this.weekYear(),5)},GG:function(){return f(this.isoWeekYear()%100,2)},GGGG:function(){return f(this.isoWeekYear(),4)},GGGGG:function(){return f(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return k(this.milliseconds()/100)},SS:function(){return f(k(this.milliseconds()/10),2)},SSS:function(){return f(this.milliseconds(),3)},SSSS:function(){return f(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(k(e/60),2)+":"+f(k(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(k(e/60),2)+f(k(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},pi={},fi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ui.length;)yt=ui.pop(),hi[yt+"o"]=a(hi[yt],yt);
for(;di.length;)yt=di.pop(),hi[yt+yt]=r(hi[yt],2);hi.DDDD=r(hi.DDD,3),d(l.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=vt.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=vt([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return st(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),vt=function(t,n,o,s){var r;return"boolean"==typeof o&&(s=o,o=e),r={},r._isAMomentObject=!0,r._i=t,r._f=n,r._l=o,r._strict=s,r._isUTC=!1,r._pf=i(),at(r)},vt.suppressDeprecationWarnings=!1,vt.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),vt.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)},vt.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)},vt.utc=function(t,n,o,s){var r;return"boolean"==typeof o&&(s=o,o=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=o,r._i=t,r._f=n,r._strict=s,r._pf=i(),at(r).utc()},vt.unix=function(e){return vt(1e3*e)},vt.duration=function(e,t){var i,n,o,s,r=e,a=null;return vt.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(a=Ot.exec(e))?(i="-"===a[1]?-1:1,r={y:0,d:k(a[kt])*i,h:k(a[St])*i,m:k(a[Tt])*i,s:k(a[At])*i,ms:k(a[Dt])*i}):(a=Ft.exec(e))?(i="-"===a[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},r={y:o(a[2]),M:o(a[3]),d:o(a[4]),h:o(a[5]),m:o(a[6]),s:o(a[7]),w:o(a[8])}):"object"==typeof r&&("from"in r||"to"in r)&&(s=g(vt(r.from),vt(r.to)),r={},r.ms=s.milliseconds,r.M=s.months),n=new u(r),vt.isDuration(e)&&e.hasOwnProperty("_locale")&&(n._locale=e._locale),n},vt.version=wt,vt.defaultFormat=ti,vt.ISO_8601=function(){},vt.momentProperties=Pt,vt.updateOffset=function(){},vt.relativeTimeThreshold=function(t,i){return ci[t]===e?!1:i===e?ci[t]:(ci[t]=i,!0)},vt.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return vt.locale(e,t)}),vt.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?vt.defineLocale(e,t):vt.localeData(e),i&&(vt.duration._locale=vt._locale=i)),vt._locale._abbr},vt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Et[e]||(Et[e]=new l),Et[e].set(t),vt.locale(e),Et[e]):(delete Et[e],null)},vt.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return vt.localeData(e)}),vt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return vt._locale;if(!y(e)){if(t=O(e))return t;e=[e]}return z(e)},vt.isMoment=function(e){return e instanceof c||null!=e&&e.hasOwnProperty("_isAMomentObject")},vt.isDuration=function(e){return e instanceof u};for(yt=fi.length-1;yt>=0;--yt)x(fi[yt]);vt.normalizeUnits=function(e){return M(e)},vt.invalid=function(e){var t=vt.utc(0/0);return null!=e?d(t._pf,e):t._pf.userInvalidated=!0,t},vt.parseZone=function(){return vt.apply(null,arguments).parseZone()},vt.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)},d(vt.fn=c.prototype,{clone:function(){return vt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=vt(this).utc();return 0<e.year()&&e.year()<=9999?N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return this._a?this.isValid()&&_(this._a,(this._isUTC?vt.utc(this._a):vt(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){var t=N(this,e||vt.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,i){var n,o,s=F(e,this),r=6e4*(this.zone()-s.zone());return t=M(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+s.daysInMonth()),o=12*(this.year()-s.year())+(this.month()-s.month()),o+=(this-vt(this).startOf("month")-(s-vt(s).startOf("month")))/n,o-=6e4*(this.zone()-vt(this).startOf("month").zone()-(s.zone()-vt(s).startOf("month").zone()))/n,"year"===t&&(o/=12)):(n=this-s,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?o:p(o)},from:function(e,t){return vt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(vt(),e)},calendar:function(e){var t=e||vt(),i=F(t,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=it(e,this.localeData()),this.add(e-t,"d")):t},month:ht("Month",!0),startOf:function(e){switch(e=M(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=M(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+vt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+vt(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+F(e,this).startOf(t)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=vt.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=vt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i,n=this._offset||0;return null==e?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof e&&(e=H(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?b(this,vt.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,vt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?vt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(e){var t=Mt((vt(this).startOf("day")-vt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=st(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=st(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return T(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return T(this.year(),e.dow,e.doy)},get:function(e){return e=M(e),this[e]()},set:function(e,t){return e=M(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){return t===e?this._locale._abbr:(this._locale=vt.localeData(t),this)},lang:o("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():(this._locale=vt.localeData(t),this)}),localeData:function(){return this._locale}}),vt.fn.millisecond=vt.fn.milliseconds=ht("Milliseconds",!1),vt.fn.second=vt.fn.seconds=ht("Seconds",!1),vt.fn.minute=vt.fn.minutes=ht("Minutes",!1),vt.fn.hour=vt.fn.hours=ht("Hours",!0),vt.fn.date=ht("Date",!0),vt.fn.dates=o("dates accessor is deprecated. Use date instead.",ht("Date",!0)),vt.fn.year=ht("FullYear",!0),vt.fn.years=o("years accessor is deprecated. Use year instead.",ht("FullYear",!0)),vt.fn.days=vt.fn.day,vt.fn.months=vt.fn.month,vt.fn.weeks=vt.fn.week,vt.fn.isoWeeks=vt.fn.isoWeek,vt.fn.quarters=vt.fn.quarter,vt.fn.toJSON=vt.fn.toISOString,d(vt.duration.fn=u.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,o=this._days,s=this._months,r=this._data,a=0;r.milliseconds=n%1e3,e=p(n/1e3),r.seconds=e%60,t=p(e/60),r.minutes=t%60,i=p(t/60),r.hours=i%24,o+=p(i/24),a=p(pt(o)),o-=p(ft(a)),s+=p(o/30),o%=30,a+=p(s/12),s%=12,r.days=o,r.months=s,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return p(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*k(this._months/12)},humanize:function(e){var t=ot(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=vt.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=vt.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=M(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=M(e),t=this._days+this._milliseconds/864e5,"month"===e||"year"===e)return i=this._months+12*pt(t),"month"===e?i:i/12;switch(t+=ft(this._months/12),e){case"week":return t/7;case"day":return t;case"hour":return 24*t;case"minute":return 60*24*t;case"second":return 60*60*24*t;case"millisecond":return 1e3*60*60*24*t;default:throw new Error("Unknown unit "+e)}},lang:vt.fn.lang,locale:vt.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}});for(yt in si)si.hasOwnProperty(yt)&&mt(yt.toLowerCase());vt.duration.fn.asMilliseconds=function(){return this.as("ms")},vt.duration.fn.asSeconds=function(){return this.as("s")},vt.duration.fn.asMinutes=function(){return this.as("m")},vt.duration.fn.asHours=function(){return this.as("h")},vt.duration.fn.asDays=function(){return this.as("d")},vt.duration.fn.asWeeks=function(){return this.as("weeks")},vt.duration.fn.asMonths=function(){return this.as("M")},vt.duration.fn.asYears=function(){return this.as("y")},vt.locale("en",{ordinal:function(e){var t=e%10,i=1===k(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Rt?module.exports=vt:"function"==typeof _wAMD.define&&_wAMD.define.amd?(_wAMD.define("moment",["require","exports","module"],function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(_t.moment=bt),vt}),gt(!0)):gt()}.call(this),_wAMD.define("mustache",["jquery","public_legacy/mustache","moment"],function(e,t,i){window.Mustache=t;var n=Weebly?Weebly.AdminType:"",o={date:"MMMM D, YYYY",shortDate:"M/D/YY",longDate:"M/D/YYYY",time:"h:mm a"},s=function(e){return function(t,n){var s=n(t),r=i.unix(s);return r.format(o[e])}},r={buildTime:"undefined"!=typeof buildTime?buildTime:null,ASSETS_BASE:"undefined"!=typeof ASSETS_BASE?ASSETS_BASE:null,tl:function(){return function(e,t){return t(_W.tl(e))}},esc_attr:function(){return function(e,t){return _.escape(t(e))}},fmt:{date:function(){return s("date")},shortDate:function(){return s("shortDate")},longDate:function(){return s("longDate")},time:function(){return s("time")}},isWeeblyAdmin:function(){return"weebly"===n},td:function(){return function(e,t){var n=["d","j","m","n","y","Y","a","A","g","h","G","H","i","s"],o=["DD","D","MM","M","YY","YYYY","a","A","hh","h","HH","H","mm","ss"];_.each(n,function(t,i){e=e.replace(t,o[i])});var s=e.split(/\|/),r=s[0],a=t("{{"+s[1]+"}}"),l=i(a).format(r);return l}}};t.origRender=t.render,t.render=function(i,n){return e.extend(n,r),t.origRender.apply(this,arguments)};var a=t.Writer.prototype;return a.origCompile=a.compile,a.compile=function(t){var i=a.origCompile.apply(this,[t]);return function(){var t=Array.prototype.slice.call(arguments);return t[0]=e.extend(t[0]||{},r),i.apply(this,t)}},t}),function(){var e=this,t=e._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=o.toString,u=o.hasOwnProperty,d=n.forEach,h=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,b=n.indexOf,y=n.lastIndexOf,w=Array.isArray,_=Object.keys,M=s.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.6.0";var x=C.each=C.forEach=function(e,t,n){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,s=e.length;s>o;o++)if(t.call(n,e[o],o,e)===i)return}else for(var r=C.keys(e),o=0,s=r.length;s>o;o++)if(t.call(n,e[r[o]],r[o],e)===i)return;return e};C.map=C.collect=function(e,t,i){var n=[];return null==e?n:h&&e.map===h?e.map(t,i):(x(e,function(e,o,s){n.push(t.call(i,e,o,s))}),n)};var k="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=C.bind(t,n)),o?e.reduce(t,i):e.reduce(t);if(x(e,function(e,s,r){o?i=t.call(n,i,e,s,r):(i=e,o=!0)}),!o)throw new TypeError(k);return i},C.reduceRight=C.foldr=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=C.bind(t,n)),o?e.reduceRight(t,i):e.reduceRight(t);var s=e.length;if(s!==+s){var r=C.keys(e);s=r.length}if(x(e,function(a,l,c){l=r?r[--s]:--s,o?i=t.call(n,i,e[l],l,c):(i=e[l],o=!0)}),!o)throw new TypeError(k);return i},C.find=C.detect=function(e,t,i){var n;return S(e,function(e,o,s){return t.call(i,e,o,s)?(n=e,!0):void 0}),n},C.filter=C.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(x(e,function(e,o,s){t.call(i,e,o,s)&&n.push(e)}),n)},C.reject=function(e,t,i){return C.filter(e,function(e,n,o){return!t.call(i,e,n,o)},i)},C.every=C.all=function(e,t,n){t||(t=C.identity);var o=!0;return null==e?o:g&&e.every===g?e.every(t,n):(x(e,function(e,s,r){return(o=o&&t.call(n,e,s,r))?void 0:i}),!!o)};var S=C.some=C.any=function(e,t,n){t||(t=C.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,n):(x(e,function(e,s,r){return o||(o=t.call(n,e,s,r))?i:void 0}),!!o)};C.contains=C.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):S(e,function(e){return e===t})},C.invoke=function(e,t){var i=a.call(arguments,2),n=C.isFunction(t);return C.map(e,function(e){return(n?t:e[t]).apply(e,i)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var n=-1/0,o=-1/0;return x(e,function(e,s,r){var a=t?t.call(i,e,s,r):e;a>o&&(n=e,o=a)}),n},C.min=function(e,t,i){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var n=1/0,o=1/0;return x(e,function(e,s,r){var a=t?t.call(i,e,s,r):e;o>a&&(n=e,o=a)}),n},C.shuffle=function(e){var t,i=0,n=[];return x(e,function(e){t=C.random(i++),n[i-1]=n[t],n[t]=e}),n},C.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var T=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,t,i){return t=T(t),C.pluck(C.map(e,function(e,n,o){return{value:e,index:n,criteria:t.call(i,e,n,o)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,i,n){var o={};return i=T(i),x(t,function(s,r){var a=i.call(n,s,r,t);e(o,a,s)}),o}};C.groupBy=A(function(e,t,i){C.has(e,t)?e[t].push(i):e[t]=[i]}),C.indexBy=A(function(e,t,i){e[t]=i}),C.countBy=A(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,i,n){i=T(i);for(var o=i.call(n,t),s=0,r=e.length;r>s;){var a=s+r>>>1;i.call(n,e[a])<o?s=a+1:r=a}return s},C.toArray=function(e){return e?C.isArray(e)?a.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:a.call(e,0,t)},C.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},C.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var D=function(e,t,i,n){if(t&&C.every(e,C.isArray))return l.apply(n,e);for(var o=0,s=e.length;s>o;o++){var a=e[o];C.isArray(a)||C.isArguments(a)?t?r.apply(n,a):D(a,t,i,n):i||n.push(a)}return n};C.flatten=function(e,t){return D(e,t,!1,[])},C.without=function(e){return C.difference(e,a.call(arguments,1))},C.partition=function(e,t,i){t=T(t);var n=[],o=[];return x(e,function(e){(t.call(i,e)?n:o).push(e)}),[n,o]},C.uniq=C.unique=function(e,t,i,n){C.isFunction(t)&&(n=i,i=t,t=!1);var o=i?C.map(e,i,n):e,s=[],r=[];return x(o,function(i,n){(t?n&&r[r.length-1]===i:C.contains(r,i))||(r.push(i),s.push(e[n]))}),s},C.union=function(){return C.uniq(D(arguments,!0,!0,[]))},C.intersection=function(e){var t=a.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.contains(t,e)})})},C.difference=function(e){var t=D(a.call(arguments,1),!0,!0,[]);return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=C.pluck(arguments,""+i);return t},C.object=function(e,t){if(null==e)return{};for(var i={},n=0,o=e.length;o>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},C.indexOf=function(e,t,i){if(null==e)return-1;var n=0,o=e.length;if(i){if("number"!=typeof i)return n=C.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,o+i):i}if(b&&e.indexOf===b)return e.indexOf(t,i);for(;o>n;n++)if(e[n]===t)return n;return-1},C.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(y&&e.lastIndexOf===y)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var o=n?i:e.length;o--;)if(e[o]===t)return o;return-1},C.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=0,s=new Array(n);n>o;)s[o++]=e,e+=i;return s};var E=function(){};C.bind=function(e,t){var i,n;if(M&&e.bind===M)return M.apply(e,a.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));E.prototype=e.prototype;var o=new E;E.prototype=null;var s=e.apply(o,i.concat(a.call(arguments)));return Object(s)===s?s:o}},C.partial=function(e){var t=a.call(arguments,1);return function(){for(var i=0,n=t.slice(),o=0,s=n.length;s>o;o++)n[o]===C&&(n[o]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},C.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return x(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var i={};return t||(t=C.identity),function(){var n=t.apply(this,arguments);return C.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},C.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(a.call(arguments,1)))},C.throttle=function(e,t,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:C.now(),r=null,s=e.apply(n,o),n=o=null};return function(){var c=C.now();a||i.leading!==!1||(a=c);var u=t-(c-a);return n=this,o=arguments,0>=u?(clearTimeout(r),r=null,a=c,s=e.apply(n,o),n=o=null):r||i.trailing===!1||(r=setTimeout(l,u)),s}},C.debounce=function(e,t,i){var n,o,s,r,a,l=function(){var c=C.now()-r;t>c?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(s,o),s=o=null))};return function(){s=this,o=arguments,r=C.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(s,o),s=o=null),a}},C.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=function(e){if(!C.isObject(e))return[];if(_)return _(e);var t=[];for(var i in e)C.has(e,i)&&t.push(i);return t},C.values=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=e[t[o]];return n},C.pairs=function(e){for(var t=C.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=[t[o],e[t[o]]];return n},C.invert=function(e){for(var t={},i=C.keys(e),n=0,o=i.length;o>n;n++)t[e[i[n]]]=i[n];return t},C.functions=C.methods=function(e){var t=[];for(var i in e)C.isFunction(e[i])&&t.push(i);return t.sort()},C.extend=function(e){return x(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},C.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return x(i,function(i){i in e&&(t[i]=e[i])}),t},C.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var o in e)C.contains(i,o)||(t[o]=e[o]);return t},C.defaults=function(e){return x(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var P=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=i.length;s--;)if(i[s]==e)return n[s]==t;var r=e.constructor,a=t.constructor;if(r!==a&&!(C.isFunction(r)&&r instanceof r&&C.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),n.push(t);var l=0,u=!0;if("[object Array]"==o){if(l=e.length,u=l==t.length)for(;l--&&(u=P(e[l],t[l],i,n)););}else{for(var d in e)if(C.has(e,d)&&(l++,!(u=C.has(t,d)&&P(e[d],t[d],i,n))))break;if(u){for(d in t)if(C.has(t,d)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};C.isEqual=function(e,t){return P(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=w||function(e){return"[object Array]"==c.call(e)},C.isObject=function(e){return e===Object(e)},x(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(e){return"function"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(e){return function(t){return t[e]}},C.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},C.times=function(e,t,i){for(var n=Array(Math.max(0,e)),o=0;e>o;o++)n[o]=t.call(i,o);return n},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};R.unescape=C.invert(R.escape);var z={escape:new RegExp("["+C.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(R.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(z[e],function(t){return R[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var i=e[t];return C.isFunction(i)?i.call(e):i},C.mixin=function(e){x(C.functions(e),function(t){var i=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),N.call(this,i.apply(C,e))}})};var O=0;C.uniqueId=function(e){var t=++O+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,i){var n;i=C.defaults({},i,C.templateSettings);var o=new RegExp([(i.escape||F).source,(i.interpolate||F).source,(i.evaluate||F).source].join("|")+"|$","g"),s=0,r="__p+='";e.replace(o,function(t,i,n,o,a){return r+=e.slice(s,a).replace(I,function(e){return"\\"+W[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),s=a+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(t)return n(t,C);var l=function(e){return n.call(this,e,C)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},C.chain=function(e){return C(e).chain()};var N=function(e){return this._chain?C(e).chain():e};C.mixin(C),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];C.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],N.call(this,i)}}),x(["concat","join","slice"],function(e){var t=n[e];C.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("underscore",[],function(){return C})}.call(this),function(e,t){if("function"==typeof _wAMD.define&&_wAMD.define.amd)_wAMD.define("backbone",["underscore","jquery","exports"],function(i,n,o){e.Backbone=t(e,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){var o=e.Backbone,s=[];s.push;var r=s.slice;s.splice,t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var o=this,s=i.once(function(){o.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var o,s,r,a,l,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;
for(a=e?[e]:i.keys(this._events),l=0,u=a.length;u>l;l++)if(e=a[l],r=this._events[e]){if(this._events[e]=o=[],t||n)for(d=0,h=r.length;h>d;d++)s=r[d],(t&&t!==s.callback&&t!==s.callback._callback||n&&n!==s.context)&&o.push(s);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&u(i,t),n&&u(n,arguments),this},stopListening:function(e,t,n){var o=this._listeningTo;if(!o)return this;var s=!t&&!n;n||"object"!=typeof t||(n=this),e&&((o={})[e._listenId]=e);for(var r in o)e=o[r],e.off(t,n,this),(s||i.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),r=0,a=s.length;a>r;r++)e[t].apply(e,[s[r]].concat(n));return!1}return!0},u=function(e,t){var i,n=-1,o=e.length,s=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(e,t){a[t]=function(t,n,o){var s=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=i.uniqueId("l"));return s[r]=t,o||"object"!=typeof n||(o=this),t[e](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var h=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var o,s,r,a,l,c,u,d;if(null==e)return this;if("object"==typeof e?(s=e,n=t):(s={})[e]=t,n||(n={}),!this._validate(s,n))return!1;r=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(o in s)t=s[o],i.isEqual(d[o],t)||a.push(o),i.isEqual(u[o],t)?delete this.changed[o]:this.changed[o]=t,r?delete d[o]:d[o]=t;if(!l){a.length&&(this._pending=n);for(var h=0,p=a.length;p>h;h++)this.trigger("change:"+a[h],this,d[a[h]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var s in e)i.isEqual(o[s],t=e[s])||((n||(n={}))[s]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},I(this,e),this.sync("read",this,e)},save:function(e,t,n){var o,s,r,a=this.attributes;if(null==e||"object"==typeof e?(o=e,n=t):(o={})[e]=t,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=i.extend(o||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),l.trigger("sync",l,e,n),void 0)},I(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=o),r=this.sync(s,this,n),o&&n.wait&&(this.attributes=a),r},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&o(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||o(),s},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||W();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,g))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var o,s,r,a;for(o=0,s=e.length;s>o;o++)a=e[o]=this.get(e[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var o,s,r,a,l,c,u,d=t.at,p=this.model,f=this.comparator&&null==d&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],b=[],y={},w=t.add,_=t.merge,M=t.remove,C=!f&&w&&M?[]:!1;for(o=0,s=e.length;s>o;o++){if(l=e[o]||{},r=l instanceof h?a=l:l[p.prototype.idAttribute||"id"],c=this.get(r))M&&(y[c.cid]=!0),_&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!u&&c.hasChanged(g)&&(u=!0)),e[o]=c;else if(w){if(a=e[o]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=c||a,!C||!a.isNew()&&y[a.id]||C.push(a),y[a.id]=!0}if(M){for(o=0,s=this.length;s>o;++o)y[(a=this.models[o]).cid]||b.push(a);b.length&&this.remove(b,t)}if(v.length||C&&C.length)if(f&&(u=!0),this.length+=v.length,null!=d)for(o=0,s=v.length;s>o;o++)this.models.splice(d+o,0,v[o]);else{C&&(this.models.length=0);var x=C||v;for(o=0,s=x.length;s>o;o++)this.models.push(x[o])}if(u&&this.sort({silent:!0}),!t.silent){for(o=0,s=v.length;s>o;o++)(a=v[o]).trigger("add",a,this,t);(u||C&&C.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,o=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),o&&o(e,i,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(e){f.prototype[e]=function(t,n){var o=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,o,n)}});var y=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var o=t.match(w),s=o[1],r=o[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,n):this.$el.on(s,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,o){var s=C[e];i.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=i.result(n,"url")||W()),null!=o.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===r.type||o.emulateJSON||(r.processData=!1),"PATCH"===r.type&&M&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(i.extend(r,o));return n.trigger("request",n,l,o),l};var M=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var x=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(x.prototype,a,{initialize:function(){},route:function(e,n,o){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return t.history.route(e,function(i){var r=s._extractParameters(e,i);s.execute(o,r),s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),t.history.trigger("route",s,n,r)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(k,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,R=/msie [\w.]+/,z=/\/$/,O=/#.*$/;D.started=!1,i.extend(D.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(z,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(E,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,s=R.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(P,"/"),s&&this._wantsHashChange){var r=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl(),void 0)},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(O,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new D;var F=function(e,t){var n,o=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,t);var s=function(){this.constructor=n};return s.prototype=o.prototype,n.prototype=new s,e&&i.extend(n.prototype,e),n.__super__=o.prototype,n};h.extend=f.extend=x.extend=y.extend=D.extend=F;var W=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),function(e){if("object"==typeof exports)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)_wAMD.define("backbone-pageable",["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,i=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,i}}}(function(e,t){function i(t,i){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t}function n(e){for(var t,i,n,o,s={},r=decodeURIComponent,a=e.split("&"),l=0,c=a.length;c>l;l++){var u=a[l];t=u.split("="),i=t[0],n=t[1]||!0,i=r(i),n=r(n),o=s[i],f(o)?o.push(n):s[i]=o?[o,n]:n}return s}function o(e,t,i){var n=e._events[t];if(n&&n.length){var o=n[n.length-1],s=o.callback;o.callback=function(){try{s.apply(this,arguments),i()}catch(e){throw e}finally{o.callback=s}}}else i()}var s=e.extend,r=e.omit,a=e.clone,l=e.each,c=e.pick,u=e.contains,d=e.isEmpty,h=e.pairs,p=e.invert,f=e.isArray,m=e.isFunction,g=e.isObject,v=e.keys,b=e.isUndefined,y=e.result,w=Math.ceil,_=Math.floor,M=Math.max,C=t.Collection.prototype,x=/[\s'"]/g,k=/[<>\s'"]/g,S=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){C.constructor.apply(this,arguments),t=t||{};var i=this.mode=t.mode||this.mode||T.mode,n=s({},T.queryParams,this.queryParams,t.queryParams||{});n.directions=s({},T.queryParams.directions,this.queryParams.directions,n.directions||{}),this.queryParams=n;var o=this.state=s({},T.state,this.state,t.state||{});o.currentPage=null==o.currentPage?o.firstPage:o.currentPage,f(e)||(e=e?[e]:[]),"server"==i||null!=o.totalRecords||d(e)||(o.totalRecords=e.length),this.switchMode(i,s({fetch:!1,resetState:!1,models:e},t));var r=t.comparator;if(o.sortKey&&!r&&this.setSorting(o.sortKey,o.order,t),"server"!=i){var l=this.fullCollection;r&&t.full&&(this.comparator=null,l.comparator=r),t.full&&l.sort(),e&&!d(e)&&(this.reset([].slice.call(e),s({silent:!0},t)),this.getPage(o.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(e,i){var n,o,s,r=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(n=0,o=r.length;o>n;n++)s=r[n],b(a[s])||(l[s]=a[s]);var c=new(t.Collection.extend(l))(e,i);for(n=0,o=r.length;o>n;n++)s=r[n],this[s]!==a[s]&&(c[s]=this[s]);return c},_makeCollectionEventHandler:function(e,t){return function(i,n,r,c){var u=e._handlers;l(v(u),function(i){var n=u[i];e.off(i,n),t.off(i,n)});var d=a(e.state),h=d.firstPage,p=0===h?d.currentPage:d.currentPage-1,f=d.pageSize,m=p*f,g=m+f;if("add"==i){var y,_,M,C,c=c||{};if(r==t)_=t.indexOf(n),_>=m&&g>_&&(C=e,y=M=_-m);else{y=e.indexOf(n),_=m+y,C=t;var M=b(c.at)?_:c.at+m}if(c.onRemove||(++d.totalRecords,delete c.onRemove),e.state=e._checkState(d),C){C.add(n,s({},c||{},{at:M}));var x=y>=f?n:!b(c.at)&&g>M&&e.length>f?e.at(f):null;x&&o(r,i,function(){e.remove(x,{onAdd:!0})})}}if("remove"==i)if(c.onAdd)delete c.onAdd;else{if(--d.totalRecords){var k=d.totalPages=w(d.totalRecords/f);d.lastPage=0===h?k-1:k||h,d.currentPage>k&&(d.currentPage=d.lastPage)}else d.totalRecords=null,d.totalPages=null;e.state=e._checkState(d);var S,T=c.index;r==e?((S=t.at(g))&&o(e,i,function(){e.push(S,{onRemove:!0})}),t.remove(n)):T>=m&&g>T&&((S=t.at(g-1))&&o(e,i,function(){e.push(S,{onRemove:!0})}),e.remove(n))}if("reset"==i)if(c=r,r=n,r==e&&null==c.from&&null==c.to){var A=t.models.slice(0,m),D=t.models.slice(m+e.models.length);t.reset(A.concat(e.models).concat(D),c)}else r==t&&((d.totalRecords=t.models.length)||(d.totalRecords=null,d.totalPages=null),"client"==e.mode&&(d.lastPage=d.currentPage=d.firstPage),e.state=e._checkState(d),e.reset(t.models.slice(m,g),s({},c,{parse:!1})));"sort"==i&&(c=r,r=n,r===t&&e.reset(t.models.slice(m,g),s({},c,{parse:!1}))),l(v(u),function(i){var n=u[i];l([e,t],function(e){e.on(i,n);var t=e._events[i]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,o=e.totalRecords,s=e.pageSize,r=e.currentPage,a=e.firstPage,l=e.totalPages;if(null!=o&&null!=s&&null!=r&&null!=a&&("infinite"==t?n:!0)){if(o=i(o,"totalRecords"),s=i(s,"pageSize"),r=i(r,"currentPage"),a=i(a,"firstPage"),1>s)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=w(o/s),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===a?M(0,l-1):l||a,"infinite"==t){if(!n[r+""])throw new RangeError("No link found for page "+r)}else if(a>r||l>0&&(a?r>l:r>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+r+".")}return e},setPageSize:function(e,t){e=i(e,"pageSize"),t=t||{first:!1};var n=this.state,o=w(n.totalRecords/e),a=o?M(n.firstPage,_(o*(n.firstPage?n.currentPage:n.currentPage+1)/n.totalPages)):n.firstPage;return n=this.state=this._checkState(s({},n,{pageSize:e,currentPage:t.first?n.firstPage:a,totalPages:o})),this.getPage(n.currentPage,r(t,["first"]))},switchMode:function(t,i){if(!u(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');i=i||{fetch:!0,resetState:!0};var n=this.state=i.resetState?a(this._initState):this._checkState(s({},this.state));this.mode=t;var o,c=this,d=this.fullCollection,h=this._handlers=this._handlers||{};if("server"==t||d)"server"==t&&d&&(l(v(h),function(e){o=h[e],c.off(e,o),d.off(e,o)}),delete this._handlers,this._fullComparator=d.comparator,delete this.fullCollection);else{d=this._makeFullCollection(i.models||[],i),d.pageableCollection=this,this.fullCollection=d;var p=this._makeCollectionEventHandler(this,d);l(["add","remove","reset","sort"],function(t){h[t]=o=e.bind(p,{},t),c.on(t,o),d.on(t,o)}),d.comparator=this._fullComparator}if("infinite"==t)for(var f=this.links={},m=n.firstPage,g=w(n.totalRecords/n.pageSize),b=0===m?M(0,g-1):g||m,y=n.firstPage;b>=y;y++)f[y]=this.url;else this.links&&delete this.links;return i.fetch?this.fetch(r(i,"fetch","resetState")):this},hasPrevious:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNext:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var n=this.mode,o=this.fullCollection;t=t||{fetch:!1};var a=this.state,l=a.firstPage,c=a.currentPage,u=a.lastPage,h=a.pageSize,p=e;switch(e){case"first":p=l;break;case"prev":p=c-1;break;case"next":p=c+1;break;case"last":p=u;break;default:p=i(e,"index")}this.state=this._checkState(s({},a,{currentPage:p})),t.from=c,t.to=p;var f=(0===l?p:p-1)*h,m=o&&o.length?o.models.slice(f,f+h):[];return"client"!=n&&("infinite"!=n||d(m))||t.fetch?("infinite"==n&&(t.url=this.links[p]),this.fetch(r(t,"fetch"))):(this.reset(m,r(t,"fetch")),this)},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=i(e);var n=_(e/this.state.pageSize);return 0!==this.state.firstPage&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,i,n){var o=this;if("infinite"==o.mode){var r=n.success,a=o.state.currentPage;n.success=function(e,t,i){var l=o.links,c=o.parseLinks(e,s({xhr:i},n));c.first&&(l[o.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),r&&r(e,t,i)}}return(C.sync||t.sync).call(o,e,i,n)},parseLinks:function(e,t){var i={},n=t.xhr.getResponseHeader("Link");if(n){var o=["first","prev","next"];l(n.split(","),function(e){var t=e.split(";"),n=t[0].replace(k,""),s=t.slice(1);l(s,function(e){var t=e.split("="),s=t[0].replace(x,""),r=t[1].replace(x,"");"rel"==s&&u(o,r)&&(i[r]=n)})})}return i},parse:function(e,t){var i=this.parseState(e,a(this.queryParams),a(this.state),t);return i&&(this.state=this._checkState(s({},this.state,i))),this.parseRecords(e,t)},parseState:function(t,i,n){if(t&&2===t.length&&g(t[0])&&f(t[1])){var o=a(n),s=t[0];return l(h(r(i,"directions")),function(t){var i=t[0],n=t[1],r=s[n];b(r)||e.isNull(r)||(o[i]=s[n])}),s.order&&(o.order=1*p(i.directions)[s.order]),o}},parseRecords:function(e){return e&&2===e.length&&g(e[0])&&f(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),i=this.mode;"infinite"!=i||e.url||(e.url=this.links[t.currentPage]);var o=e.data||{},l=y(e,"url")||y(this,"url")||"",u=l.indexOf("?");-1!=u&&(s(o,n(l.slice(u+1))),l=l.slice(0,u)),e.url=l,e.data=o;var d,p,f,g,w="client"==this.mode?c(this.queryParams,"sortKey","order"):r(c(this.queryParams,v(T.queryParams)),"directions"),_=h(w),M=a(this);for(d=0;d<_.length;d++)p=_[d],f=p[0],g=p[1],g=m(g)?g.call(M):g,null!=t[f]&&null!=g&&(o[g]=t[f]);t.sortKey&&t.order?o[w.order]=this.queryParams.directions[t.order+""]:t.sortKey||delete o[w.order];var x=h(r(this.queryParams,v(T.queryParams)));for(d=0;d<x.length;d++)p=x[d],g=p[1],g=m(g)?g.call(M):g,null!=g&&(o[p[0]]=g);if("server"!=i){var k=this,S=this.fullCollection,A=e.success;return e.success=function(t,n,o){o=o||{},b(e.silent)?delete o.silent:o.silent=e.silent;var r=t.models;"client"==i?S.reset(r,o):(S.add(r,s({at:S.length},s(o,{parse:!1}))),k.trigger("reset",k,o)),A&&A(t,n,o)},C.fetch.call(this,s({},e,{silent:!0}))}return C.fetch.call(this,e)},_makeComparator:function(e,t,i){var n=this.state;return e=e||n.sortKey,t=t||n.order,e&&t?(i||(i=function(e,t){return e.get(t)}),function(n,o){var s,r=i(n,e),a=i(o,e);return 1===t&&(s=r,r=a,a=s),r===a?0:a>r?-1:1}):void 0},setSorting:function(t,i,n){var o=this.state;o.sortKey=t,o.order=i=i||o.order;var r=this.fullCollection,a=!1,l=!1;t||(a=l=!0);var c=this.mode;n=s({side:"client"==c?c:"server",full:!0},n);var u=this._makeComparator(t,i,n.sortValue),d=n.full,h=n.side;return"client"==h?d?(r&&(r.comparator=u),a=!0):(this.comparator=u,l=!0):"server"!=h||d||(this.comparator=u),a&&(this.comparator=null),l&&r&&(r.comparator=null),this.fetchOptions=e.extend({},this.fetchOptions,{sort:[{property:t,direction:i>0?"ASC":"DESC"}]}),this}}),T=S.prototype;return S}),function(e){"object"==typeof exports?module.exports=e(require("backbone"),require("underscore")):"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone-validation",["backbone","underscore"],e)}(function(e,t){return e.Validation=function(t){var i={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},n={formatLabel:function(e,t){return c[i.labelFormatter](e,t)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})}},o=function(i,n,s){return n=n||{},s=s||"",t.each(i,function(t,r){i.hasOwnProperty(r)&&(!t||"object"!=typeof t||t instanceof Array||t instanceof Date||t instanceof RegExp||t instanceof e.Model||t instanceof e.Collection?n[s+r]=t:o(t,n,s+r+"."))}),n},s=function(){var e=function(e){return t.reduce(t.keys(t.result(e,"validation")||{}),function(e,t){return e[t]=void 0,e},{})},s=function(e,i){var n=e.validation?t.result(e,"validation")[i]||{}:{};return(t.isFunction(n)||t.isString(n))&&(n={fn:n}),t.isArray(n)||(n=[n]),t.reduce(n,function(e,i){return t.each(t.without(t.keys(i),"msg"),function(t){e.push({fn:u[t],val:i[t],msg:i.msg})}),e},[])},a=function(e,i,o,r){return t.reduce(s(e,i),function(s,a){var l=t.extend({},n,u),c=a.fn.call(l,o,i,a.val,e,r);return c===!1||s===!1?!1:c&&!s?t.result(a,"msg")||c:s},"")},l=function(e,i){var n,s={},r=!0,l=t.clone(i),c=o(i);return t.each(c,function(t,i){n=a(e,i,t,l),n&&(s[i]=n,r=!1)}),{invalidAttrs:s,isValid:r}},c=function(i,n){return{preValidate:function(e,i){var n,o=this,s={};return t.isObject(e)?(t.each(e,function(e,t){n=o.preValidate(t,e),n&&(s[t]=n)}),t.isEmpty(s)?void 0:s):a(this,e,i,t.extend({},this.attributes))},isValid:function(e){var i=o(this.attributes);return t.isString(e)?!a(this,e,i[e],t.extend({},this.attributes)):t.isArray(e)?t.reduce(e,function(e,n){return e&&!a(this,n,i[n],t.extend({},this.attributes))},!0,this):(e===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(s,r){var a=this,c=!s,u=t.extend({},n,r),d=e(a),h=t.extend({},d,a.attributes,s),p=o(s||h),f=l(a,h);return a._isValid=f.isValid,t.each(d,function(e,t){var n=f.invalidAttrs.hasOwnProperty(t);n||u.valid(i,t,u.selector)}),t.each(d,function(e,t){var n=f.invalidAttrs.hasOwnProperty(t),o=p.hasOwnProperty(t);n&&(o||c)&&u.invalid(i,t,f.invalidAttrs[t],u.selector)}),t.defer(function(){a.trigger("validated",a._isValid,a,f.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,f.invalidAttrs)}),!u.forceUpdate&&t.intersection(t.keys(f.invalidAttrs),t.keys(p)).length>0?f.invalidAttrs:void 0}}},d=function(e,i,n){t.extend(i,c(e,n))},h=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){d(this.view,e,this.options)},f=function(e){h(e)};return{version:"0.9.1",configure:function(e){t.extend(i,e)},bind:function(e,n){n=t.extend({},i,r,n);var o=n.model||e.model,s=n.collection||e.collection;if("undefined"==typeof o&&"undefined"==typeof s)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";o?d(e,o,n):s&&(s.each(function(t){d(e,t,n)}),s.bind("add",p,{view:e,options:n}),s.bind("remove",f))
},unbind:function(e,i){i=t.extend({},i);var n=i.model||e.model,o=i.collection||e.collection;n?h(n):o&&(o.each(function(e){h(e)}),o.unbind("add",p),o.unbind("remove",f))},mixin:c(null,i)}}(),r=s.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},a=s.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,domain:/^(?:[a-zA-Z0-9]+(?:\-*[a-zA-Z0-9])*\.)+[a-zA-Z]{2,6}$/},l=s.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number","int":"{0} must be a whole number",email:"{0} must be a valid email",url:"{0} must be a valid url",domain:"{0} must be a valid domain",inlinePattern:"{0} is invalid"},c=s.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||c.sentenceCase(e,t)}},u=s.validators=function(){var e=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(e){return t.isNumber(e)||t.isString(e)&&e.match(a.number)},n=function(i){return!(t.isNull(i)||t.isUndefined(i)||t.isString(i)&&""===e(i)||t.isArray(i)&&t.isEmpty(i))};return{fn:function(e,i,n,o,s){return t.isString(n)&&(n=o[n]),n.call(o,e,i,s)},required:function(e,i,o,s,r){var a=t.isFunction(o)?o.call(s,e,i,r):o;return a||n(e)?a&&!n(e)?this.format(l.required,this.formatLabel(i,s)):void 0:!1},acceptance:function(e,i,n,o){return"true"===e||t.isBoolean(e)&&e!==!1?void 0:this.format(l.acceptance,this.formatLabel(i,o))},min:function(e,t,n,o){return!i(e)||n>e?this.format(l.min,this.formatLabel(t,o),n):void 0},max:function(e,t,n,o){return!i(e)||e>n?this.format(l.max,this.formatLabel(t,o),n):void 0},range:function(e,t,n,o){return!i(e)||e<n[0]||e>n[1]?this.format(l.range,this.formatLabel(t,o),n[0],n[1]):void 0},length:function(e,i,n,o){return t.isString(e)&&e.length===n?void 0:this.format(l.length,this.formatLabel(i,o),n)},minLength:function(e,i,n,o){return!t.isString(e)||e.length<n?this.format(l.minLength,this.formatLabel(i,o),n):void 0},maxLength:function(e,i,n,o){return!t.isString(e)||e.length>n?this.format(l.maxLength,this.formatLabel(i,o),n):void 0},rangeLength:function(e,i,n,o){return!t.isString(e)||e.length<n[0]||e.length>n[1]?this.format(l.rangeLength,this.formatLabel(i,o),n[0],n[1]):void 0},oneOf:function(e,i,n,o){return t.include(n,e)?void 0:this.format(l.oneOf,this.formatLabel(i,o),n.join(", "))},equalTo:function(e,t,i,n,o){return e!==o[i]?this.format(l.equalTo,this.formatLabel(t,n),this.formatLabel(i,n)):void 0},pattern:function(e,t,i,o){return n(e)&&e.toString().match(a[i]||i)?void 0:this.format(l[i]||l.inlinePattern,this.formatLabel(t,o),i)},url:function(e,t,i,n){return a.url.test(e)?void 0:this.format(l.url,this.formatLabel(t,n))},domain:function(e,t,i,n){return a.domain.test(e)?void 0:this.format(l.domain,this.formatLabel(t,n))},email:function(e,t,i,n){return a.email.test(e)?void 0:this.format(l.email,this.formatLabel(t,n))},number:function(e,t,i,n){return isNaN(parseFloat(e))||!isFinite(e)?this.format(l.number,this.formatLabel(t,n)):void 0},"int":function(e,t,i,n){return 0!==e%1?this.format(l.int,this.formatLabel(t,n)):void 0}}}();return t.each(u,function(e,i){u[i]=t.bind(u[i],t.extend({},n,u))}),s}(t),e.Validation}),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("backbone-relational",["exports","backbone","underscore"],t):"undefined"!=typeof exports?t(exports,require("backbone"),require("underscore")):t(e,e.Backbone,e._)}(this,function(e,t,i){t.Relational={showWarnings:!0},t.Semaphore={_class:"Backbone.Semaphore",_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(0===this._permitsUsed)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=e}},t.BlockingQueue=function(){this._queue=[]},i.extend(t.BlockingQueue.prototype,t.Semaphore,{_class:"Backbone.BlockingQueue",_queue:null,add:function(e){this.isBlocked()?this._queue.push(e):e()},process:function(){var e=this._queue;for(this._queue=[];e&&e.length;)e.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),t.Relational.eventQueue=new t.BlockingQueue,t.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[e]},i.extend(t.Store.prototype,t.Events,{_class:"Backbone.Store",initializeRelation:function(e,n,o){var s=i.isString(n.type)?t[n.type]||this.getObjectByName(n.type):n.type;s&&s.prototype instanceof t.Relation?new s(e,n,o):t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; missing or invalid relation type!",n)},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=i.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){i.find(this._subModels,function(t){return i.each(t.subModels||[],function(i,n){var o=this.getObjectByName(i);return e===o?(t.superModelType._subModels[n]=e,e._superModel=t.superModelType,e._subModelTypeValue=n,e._subModelTypeAttribute=t.superModelType.prototype.subModelTypeAttribute,!0):void 0},this)},this)},addReverseRelation:function(e){var t=i.any(this._reverseRelations,function(t){return i.all(e||[],function(e,i){return e===t[i]})});!t&&e.model&&e.type&&(this._reverseRelations.push(e),this._addRelation(e.model,e),this.retroFitRelation(e))},addOrphanRelation:function(e){var t=i.any(this._orphanRelations,function(t){return i.all(e||[],function(e,i){return e===t[i]})});!t&&e.model&&e.type&&this._orphanRelations.push(e)},processOrphanRelations:function(){i.each(this._orphanRelations.slice(0),function(e){var n=t.Relational.store.getObjectByName(e.relatedModel);n&&(this.initializeRelation(null,e),this._orphanRelations=i.without(this._orphanRelations,e))},this)},_addRelation:function(e,t){e.prototype.relations||(e.prototype.relations=[]),e.prototype.relations.push(t),i.each(e._subModels||[],function(e){this._addRelation(e,t)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,!1);t&&t.each(function(t){t instanceof e.model&&new e.type(t,e)},this)},getCollection:function(e,n){e instanceof t.RelationalModel&&(e=e.constructor);for(var o=e;o._superModel;)o=o._superModel;var s=i.find(this._collections,function(e){return e.model===o});return s||n===!1||(s=this._createCollection(o)),s},getObjectByName:function(e){var t=e.split("."),n=null;return i.find(this._modelScopes,function(e){return n=i.reduce(t||[],function(e,t){return e?e[t]:void 0},e),n&&n!==e?!0:void 0},this),n},_createCollection:function(e){var i;return e instanceof t.RelationalModel&&(e=e.constructor),e.prototype instanceof t.RelationalModel&&(i=new t.Collection,i.model=e,this._collections.push(i)),i},resolveIdForItem:function(e,n){var o=i.isString(n)||i.isNumber(n)?n:null;return null===o&&(n instanceof t.RelationalModel?o=n.id:i.isObject(n)&&(o=e.prototype._getNewId(n))),o||0===o||(o=null),o},find:function(e,t){var i=this.resolveIdForItem(e,t),n=this.getCollection(e);if(n){var o=n.get(i);if(o instanceof e)return o}return null},register:function(e){var t=this.getCollection(e);if(t){var i=e.collection;t.add(e),e.collection=i}},checkId:function(e,i){var n=this.getCollection(e),o=n&&n.get(i);if(o&&e!==o)throw t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",o,e),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(e){var t=this.getCollection(e);t.contains(e)||this.register(e),t._onModelEvent("change:"+e.idAttribute,e,t),e.trigger("relational:change:id",e,t)},unregister:function(e){var n,o;e instanceof t.Model?(n=this.getCollection(e),o=[e]):e instanceof t.Collection?(n=this.getCollection(e.model),o=i.clone(e.models)):(n=this.getCollection(e),o=i.clone(n.models)),i.each(o,function(e){this.stopListening(e),i.invoke(e.getRelations(),"stopListening")},this),i.contains(this._collections,e)?n.reset([]):i.each(o,function(e){n.get(e)?n.remove(e):n.trigger("relational:remove",e,n)},this)},reset:function(){this.stopListening(),i.each(this._collections,function(e){this.unregister(e)},this),this._collections=[],this._subModels=[],this._modelScopes=[e]}}),t.Relational.store=new t.Store,t.Relation=function(e,n,o){if(this.instance=e,n=i.isObject(n)?n:{},this.reverseRelation=i.defaults(n.reverseRelation||{},this.options.reverseRelation),this.options=i.defaults(n,this.options,t.Relation.prototype.options),this.reverseRelation.type=i.isString(this.reverseRelation.type)?t[this.reverseRelation.type]||t.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,!i.isFunction(this.relatedModel)||this.relatedModel.prototype instanceof t.RelationalModel||(this.relatedModel=i.result(this,"relatedModel")),i.isString(this.relatedModel)&&(this.relatedModel=t.Relational.store.getObjectByName(this.relatedModel)),this.checkPreconditions()&&(!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&t.Relational.store.addReverseRelation(i.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation)),e)){var s=this.keySource;s!==this.key&&"object"==typeof this.instance.get(this.key)&&(s=this.key),this.setKeyContents(this.instance.get(s)),this.relatedCollection=t.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(o),this.options.autoFetch&&this.instance.fetchRelated(this.key,i.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},t.Relation.extend=t.Model.extend,i.extend(t.Relation.prototype,t.Events,t.Semaphore,{_class:"Backbone.Relation",options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,n=this.key,o=this.model,s=this.relatedModel,r=t.Relational.showWarnings&&"undefined"!=typeof console;if(!o||!n||!s)return r&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,o,n,s),!1;if(!(o.prototype instanceof t.RelationalModel))return r&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e),!1;if(!(s.prototype instanceof t.RelationalModel))return r&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,s),!1;if(this instanceof t.HasMany&&this.reverseRelation.type===t.HasMany)return r&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(e&&i.keys(e._relations).length){var a=i.find(e._relations,function(e){return e.key===n},this);if(a)return r&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,n,e,a),!1}return!0},setRelated:function(e){this.related=e,this.instance.attributes[this.key]=e},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){var t=[],n=i.isUndefined(e)?this.related&&(this.related.models||[this.related]):[e];return i.each(n||[],function(e){i.each(e.getRelations()||[],function(e){this._isReverseRelation(e)&&t.push(e)},this)},this),t},destroy:function(){this.stopListening(),this instanceof t.HasOne?this.setRelated(null):this instanceof t.HasMany&&this.setRelated(this._prepareCollection()),i.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}}),t.HasOne=t.Relation.extend({_class:"Backbone.HasOne",options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var t=this.findRelated(e);this.setRelated(t),i.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var t=null;if(e=i.defaults({parse:this.options.parse},e),this.keyContents instanceof this.relatedModel)t=this.keyContents;else if(this.keyContents||0===this.keyContents){var n=i.defaults({create:this.options.createModels},e);t=this.relatedModel.findOrCreate(this.keyContents,n)}return t&&(this.keyId=null),t},setKeyContents:function(e){this.keyContents=e,this.keyId=t.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,n,o){if(!this.isLocked()){this.acquire(),o=o?i.clone(o):{};var s=i.isUndefined(o.__related),r=s?this.related:o.__related;if(s){this.setKeyContents(n);var a=this.findRelated(o);this.setRelated(a)}if(r&&this.related!==r&&i.each(this.getReverseRelations(r),function(e){e.removeRelated(this.instance,null,o)},this),i.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,o)},this),!o.silent&&this.related!==r){var l=this;this.changed=!0,t.Relational.eventQueue.add(function(){l.instance.trigger("change:"+l.key,l.instance,l.related,o,!0),l.changed=!1})}this.release()}},tryAddRelated:function(e,t,i){!this.keyId&&0!==this.keyId||e.id!==this.keyId||(this.addRelated(e,i),this.keyId=null)},addRelated:function(e,t){var n=this;e.queue(function(){if(e!==n.related){var o=n.related||null;n.setRelated(e),n.onChange(n.instance,e,i.defaults({__related:o},t))}})},removeRelated:function(e,t,n){if(this.related&&e===this.related){var o=this.related||null;this.setRelated(null),this.onChange(this.instance,e,i.defaults({__related:o},n))}}}),t.HasMany=t.Relation.extend({_class:"Backbone.HasMany",collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:t.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(e){if(this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,!i.isFunction(this.collectionType)||this.collectionType===t.Collection||this.collectionType.prototype instanceof t.Collection||(this.collectionType=i.result(this,"collectionType")),i.isString(this.collectionType)){var n=this.collectionType;this.collectionType=t.Relational.store.getObjectByName(this.collectionType)}if(this.collectionType||(n&&t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("`collectionType` of "+n+" not found, using Backbone.Collection in its place."),this.collectionType=t.Collection),this.collectionType!==t.Collection&&!(this.collectionType.prototype instanceof t.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var o=this.findRelated(e);this.setRelated(o)},_prepareCollection:function(e){if(this.related&&this.stopListening(this.related),!(e&&e instanceof t.Collection)){var n=i.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,n)}if(e.model=this.relatedModel,this.options.collectionKey){var o=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;e[o]&&e[o]!==this.instance?t.Relational.showWarnings&&"undefined"!=typeof console&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,o,this.options.collectionKey):o&&(e[o]=this.instance)}return this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset),e},findRelated:function(e){var n=null;if(e=i.defaults({parse:this.options.parse},e),this.keyContents instanceof t.Collection)this._prepareCollection(this.keyContents),n=this.keyContents;else{var o=[];i.each(this.keyContents,function(t){if(t instanceof this.relatedModel)var n=t;else n=this.relatedModel.findOrCreate(t,i.extend({merge:!0},e,{create:this.options.createModels}));n&&o.push(n)},this),n=this.related instanceof t.Collection?this.related:this._prepareCollection(),n.set(o,i.defaults({merge:!1,parse:!1},e))}return this.keyIds=i.difference(this.keyIds,i.pluck(n.models,"id")),n},setKeyContents:function(e){this.keyContents=e instanceof t.Collection?e:null,this.keyIds=[],this.keyContents||!e&&0!==e||(this.keyContents=i.isArray(e)?e:[e],i.each(this.keyContents,function(e){var i=t.Relational.store.resolveIdForItem(this.relatedModel,e);(i||0===i)&&this.keyIds.push(i)},this))},onChange:function(e,n,o){o=o?i.clone(o):{},this.setKeyContents(n),this.changed=!1;var s=this.findRelated(o);if(this.setRelated(s),!o.silent){var r=this;t.Relational.eventQueue.add(function(){r.changed&&(r.instance.trigger("change:"+r.key,r.instance,r.related,o,!0),r.changed=!1)})}},handleAddition:function(e,n,o){o=o?i.clone(o):{},this.changed=!0,i.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,o)},this);var s=this;!o.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("add:"+s.key,e,s.related,o)})},handleRemoval:function(e,n,o){o=o?i.clone(o):{},this.changed=!0,i.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,o)},this);var s=this;!o.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("remove:"+s.key,e,s.related,o)})},handleReset:function(e,n){var o=this;n=n?i.clone(n):{},!n.silent&&t.Relational.eventQueue.add(function(){o.instance.trigger("reset:"+o.key,o.related,n)})},tryAddRelated:function(e,t,n){var o=i.contains(this.keyIds,e.id);o&&(this.addRelated(e,n),this.keyIds=i.without(this.keyIds,e.id))},addRelated:function(e,t){var n=this;e.queue(function(){n.related&&!n.related.get(e)&&n.related.add(e,i.defaults({parse:!1},t))})},removeRelated:function(e,t,i){this.related.get(e)&&this.related.remove(e,i)}}),t.RelationalModel=t.Model.extend({_class:"Backbone.RelationalModel",relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,keydefs:{},compoundKeyDelim:"-",constructor:function(e,n){if(n&&n.collection){var o=this,s=this.collection=n.collection;delete n.collection,this._deferProcessing=!0;var r=function(e){e===o&&(o._deferProcessing=!1,o.processQueue(),s.off("relational:add",r))};s.on("relational:add",r),i.defer(function(){r(o)})}t.Relational.store.processOrphanRelations(),t.Relational.store.listenTo(this,"relational:unregister",t.Relational.store.unregister),this._queue=new t.BlockingQueue,this._queue.block(),t.Relational.eventQueue.block();try{t.Model.apply(this,arguments)}finally{t.Relational.eventQueue.unblock()}this.createSavepoint(),this.on("sync",this.createSavepoint,this)},createSavepoint:function(){return this.savepoint=JSON.parse(JSON.stringify(this)),this},rollback:function(e){e=e||{},this.set(this.savepoint),this.changed=[],e.silent||this.trigger("rollback",this,e)},commit:function(e){e=e||{};var n=this,o=n.isNew(),s=[],r=[];return(o||n.hasChangedDeepSinceSavepoint())&&(o||i.each(n.relations,function(t){if(t.includeInJSON&&(s.push(t),t.includeInJSON=!1,!t.isAutoRelation)){var i=n.get(t.key);r.push(i.commit(e))}}),r.push(n.save(null,e)),i.each(s,function(e){e.includeInJSON=!0}),e.silent||n.trigger("commit",n,e)),t.$.when.apply(t.$,r)},hasChangedDeepSinceSavepoint:function(){return!i.isEqual(this.toJSON(),this.savepoint)},trigger:function(e){if(e.length>5&&0===e.indexOf("change")){var i=this,n=arguments;t.Relational.eventQueue.add(function(){if(i._isInitialized){var o=!0;if("change"===e)o=i.hasChanged()||i._attributeChangeFired,i._attributeChangeFired=!1;else{var s=e.slice(7),r=i.getRelation(s);r?(o=n[4]===!0,o?i.changed[s]=n[2]:r.changed||delete i.changed[s]):o&&(i._attributeChangeFired=!0)}o&&t.Model.prototype.trigger.apply(i,n)}})}else"destroy"===e?(t.Model.prototype.trigger.apply(this,arguments),t.Relational.store.unregister(this)):t.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(e){this.acquire(),this._relations={},i.each(this.relations||[],function(i){t.Relational.store.initializeRelation(this,i,e)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(e,t){this._isInitialized&&!this.isLocked()&&i.each(this._relations,function(i){if(!e||i.keySource in e||i.key in e){var n=this.attributes[i.keySource]||this.attributes[i.key],o=e&&(e[i.keySource]||e[i.key]);(i.related!==n||null===n&&null===o)&&this.trigger("relational:change:"+i.key,this,n,t||{})}i.keySource!==i.key&&delete this.attributes[i.keySource]},this)},queue:function(e){this._queue.add(e)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(e){return this._relations[e]},getRelations:function(){return i.values(this._relations)},fetchRelated:function(e,n,o){n=i.extend({update:!0,remove:!1},n);var s,r,a=[],l=this.getRelation(e),c=l&&(l.keyIds&&l.keyIds.slice(0)||(l.keyId||0===l.keyId?[l.keyId]:[]));if(o&&(s=l.related instanceof t.Collection?l.related.models:[l.related],i.each(s,function(e){(e.id||0===e.id)&&c.push(e.id)})),c&&c.length){var u=[];if(s=i.map(c,function(e){var t=l.relatedModel.findModel(e);if(!t){var i={};i[l.relatedModel.prototype.idAttribute]=e,t=l.relatedModel.findOrCreate(i,n),u.push(t)}return t},this),l.related instanceof t.Collection&&i.isFunction(l.related.url)&&(r=l.related.url(s)),r&&r!==l.related.url()){var d=i.defaults({error:function(){var e=arguments;i.each(u,function(t){t.trigger("destroy",t,t.collection,n),n.error&&n.error.apply(t,e)})},url:r},n);a=[l.related.fetch(d)]}else a=i.map(s,function(e){var t=i.defaults({error:function(){i.contains(u,e)&&(e.trigger("destroy",e,e.collection,n),n.error&&n.error.apply(e,arguments))}},n);return e.fetch(t)},this)}return a},get:function(e){var n=t.Model.prototype.get.call(this,e);if(!this.dotNotation||-1===e.indexOf("."))return n;var o=e.split("."),s=i.reduce(o,function(e,n){if(i.isNull(e)||i.isUndefined(e))return void 0;if(e instanceof t.Model)return t.Model.prototype.get.call(e,n);if(e instanceof t.Collection)return t.Collection.prototype.at.call(e,n);throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+e+", currentSplit: "+n)},this);if(void 0!==n&&void 0!==s)throw new Error("Ambiguous result for '"+e+"'. direct result: "+n+", dotNotation: "+s);return n||s},_getNewId:function(e){var t,i=this,n=null,o="",s=!1,r=i.keydefs.PRIMARY;return r&&(r.forEach(function(n){t=e[n]||i.attributes&&i.attributes[n],t||0===t?o+=(o?i.compoundKeyDelim:"")+(e[n]||i.attributes&&i.attributes[n]):s=!0}),s||(n=o)),n||(n=e&&i.idAttribute in e&&e[i.idAttribute]),n},set:function(e,n,o){t.Relational.eventQueue.block();var s;i.isObject(e)||null==e?(s=e,o=n):(s={},s[e]=n);try{var r=this.id,a=this._getNewId(s);t.Relational.store.checkId(this,a);var l=t.Model.prototype.set.apply(this,arguments);a&&(this.id=a),this._isInitialized||this.isLocked()?a&&a!==r&&t.Relational.store.update(this):(this.constructor.initializeModelHierarchy(),(a||0===a)&&t.Relational.store.register(this),this.initializeRelations(o)),s&&this.updateRelations(s,o)}finally{t.Relational.eventQueue.unblock()}return l},clone:function(){var e=i.clone(this.attributes);return i.isUndefined(e[this.idAttribute])||(e[this.idAttribute]=null),i.each(this.getRelations(),function(t){delete e[t.key]}),new this.constructor(e)},toJSON:function(e){if(this.isLocked())return this.id;this.acquire();var n=t.Model.prototype.toJSON.call(this,e);return!this.constructor._superModel||this.constructor._subModelTypeAttribute in n||(n[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),i.each(this._relations,function(o){var s=n[o.key],r=o.options.includeInJSON,a=null;r===!0?s&&i.isFunction(s.toJSON)&&(a=s.toJSON(e)):i.isString(r)?(s instanceof t.Collection?a=s.pluck(r):s instanceof t.Model&&(a=s.get(r)),r===o.relatedModel.prototype.idAttribute&&(o instanceof t.HasMany?a=a.concat(o.keyIds):o instanceof t.HasOne&&(a=a||o.keyId,a||i.isObject(o.keyContents)||(a=o.keyContents||null)))):i.isArray(r)?s instanceof t.Collection?(a=[],s.each(function(e){var t={};i.each(r,function(i){t[i]=e.get(i)}),a.push(t)})):s instanceof t.Model&&(a={},i.each(r,function(e){a[e]=s.get(e)})):delete n[o.key],r&&(n[o.keyDestination]=a),o.keyDestination!==o.key&&delete n[o.key]}),this.release(),n}},{setup:function(){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?t.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,i.each(this.prototype.relations||[],function(e){if(e.model||(e.model=this),e.reverseRelation&&e.model===this){var n=!0;if(i.isString(e.relatedModel)){var o=t.Relational.store.getObjectByName(e.relatedModel);n=o&&o.prototype instanceof t.RelationalModel}n?t.Relational.store.initializeRelation(null,e):i.isString(e.relatedModel)&&t.Relational.store.addOrphanRelation(e)}},this),this},build:function(e,t){this.initializeModelHierarchy();var i=this._findSubModelType(this,e)||this;return new i(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var i=t[e.prototype.subModelTypeAttribute],n=e._subModels[i];if(n)return n;for(i in e._subModels)if(n=this._findSubModelType(e._subModels[i],t))return n}return null},initializeModelHierarchy:function(){if(this.inheritRelations(),this.prototype.subModelTypes){var e=i.keys(this._subModels),n=i.omit(this.prototype.subModelTypes,e);i.each(n,function(e){var i=t.Relational.store.getObjectByName(e);i&&i.initializeModelHierarchy()})}},inheritRelations:function(){if(i.isUndefined(this._superModel)||i.isNull(this._superModel))if(t.Relational.store.setupSuperModel(this),this._superModel){if(this._superModel.inheritRelations(),this._superModel.prototype.relations){var e=i.filter(this._superModel.prototype.relations||[],function(e){return!i.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(e,t){t||(t={});var n=i.isObject(e)&&t.parse&&this.prototype.parse?this.prototype.parse(i.clone(e)):e,o=this.findModel(n);return i.isObject(e)&&(o&&t.merge!==!1?(delete t.collection,delete t.url,o.set(n,t)):o||t.create===!1||(o=this.build(e,t))),o},find:function(e,t){return t||(t={}),t.create=!1,this.findOrCreate(e,t)},findModel:function(e){return t.Relational.store.find(this,e)}}),i.extend(t.RelationalModel.prototype,t.Semaphore);var n=t.Collection.prototype.__initialize=t.Collection.prototype.initialize;t.Collection.prototype.initialize=function(){n.apply(this,arguments),this.createSavepoint(),this.on("sync",this.createSavepoint,this)},t.Collection.prototype.createSavepoint=function(){return this._added=[],this._removed=[],this},t.Collection.prototype.rollback=function(e){return e=e||{},this.add(this._removed,{silent:!0}),i.each(this.models,function(e){e.rollback()}),this.remove(this._added,{silent:!0}),this.createSavepoint(),e.silent||this.trigger("rollback",this,e),this},t.Collection.prototype.hasChangedDeepSinceSavepoint=function(){return this._removed.length||this._added.length?!0:!!i.find(this.models,function(e){return e.hasChangedDeepSinceSavepoint()})},t.Collection.prototype.commit=function(e){var n=[];return this.hasChangedDeepSinceSavepoint()&&(e=e||{},i.each(this._removed,function(e){n.push(e.destroy())}),i.each(this.models,function(e){n.push(e.commit())}),this.createSavepoint(),e.silent||this.trigger("commit",this,e)),t.$.when.apply(t.$,n)},t.Collection.prototype._class="Backbone.Collection",t.Collection.prototype.__prepareModel=t.Collection.prototype._prepareModel,t.Collection.prototype._prepareModel=function(e,n){var o;return e instanceof t.Model?(e.collection||(e.collection=this),o=e):(n=n?i.clone(n):{},n.collection=this,o="undefined"!=typeof this.model.findOrCreate?this.model.findOrCreate(e,n):new this.model(e,n),o&&o.validationError&&(this.trigger("invalid",this,e,n),o=!1)),o};var o=t.Collection.prototype.__set=t.Collection.prototype.set;t.Collection.prototype.set=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return o.apply(this,arguments);n&&n.parse&&(e=this.parse(e,n));var s=!i.isArray(e),r=[],a=[];e=s?e?[e]:[]:i.clone(e),i.each(e,function(e){e instanceof t.Model||(e=t.Collection.prototype._prepareModel.call(this,e,n)),e&&(a.push(e),this.get(e)||this.get(e.cid)?null!=e.id&&(this._byId[e.id]=e):r.push(e))},this),a=s?a.length?a[0]:null:a;var l=o.call(this,a,i.defaults({parse:!1},n));return i.each(r,function(e){(this.get(e)||this.get(e.cid))&&this.trigger("relational:add",e,this,n)},this),l};var s=t.Collection.prototype.__get=t.Collection.prototype.get;t.Collection.prototype.get=function(e){if(!(this.model.prototype instanceof t.RelationalModel))return s.apply(this,arguments);if(null==e)return void 0;var i=t.Relational.store.resolveIdForItem(this.model,e);return this._byId[null!=i?i:e.cid||e]};var r=t.Collection.prototype.__add=t.Collection.prototype.add;t.Collection.prototype.add=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return r.apply(this,arguments);
var o=r.call(this,e,i.defaults(n||{},{add:!0,merge:!1,remove:!1}));return this._added=this._added.concat(o),o};var a=t.Collection.prototype.__remove=t.Collection.prototype.remove;t.Collection.prototype.remove=function(e,n){if(!(this.model.prototype instanceof t.RelationalModel))return this._removed=this._removed.concat(e),a.apply(this,arguments);var o=!i.isArray(e),s=[];e=o?e?[e]:[]:i.clone(e),n||(n={}),i.each(e,function(e){e=this.get(e)||e&&this.get(e.cid),e&&s.push(e)},this);var r=a.call(this,o?s.length?s[0]:null:s,n);return i.each(s,function(e){this.trigger("relational:remove",e,this,n)},this),this._removed=this._removed.concat(s),r};var l=t.Collection.prototype.__reset=t.Collection.prototype.reset;t.Collection.prototype.reset=function(e,n){n=i.extend({merge:!0},n);var o=l.call(this,e,n);return this._added=[],this._removed=[],this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,n),this.createSavepoint(),o};var c=t.Collection.prototype.__sort=t.Collection.prototype.sort;t.Collection.prototype.sort=function(e){var i=c.call(this,e);return this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,e),i};var u=t.Collection.prototype.__trigger=t.Collection.prototype.trigger;t.Collection.prototype.trigger=function(e){if(!(this.model.prototype instanceof t.RelationalModel))return u.apply(this,arguments);if("add"===e||"remove"===e||"reset"===e||"sort"===e){var n=this,o=arguments;i.isObject(o[3])&&(o=i.toArray(o),o[3]=i.clone(o[3])),t.Relational.eventQueue.add(function(){u.apply(n,o)})}else u.apply(this,arguments);return this},t.RelationalModel.extend=function(){var e=t.Model.extend.apply(this,arguments);return e.setup(this),e}}),function(e,t){if("object"==typeof exports){var i=require("underscore"),n=require("backbone");module.exports=t(i,n)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone.wreqr",["underscore","backbone"],t)}(this,function(e,t){return t.Wreqr=function(e,t,i){var n={};return n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,i),n.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},i.isFunction(this.initialize)&&this.initialize(e)};return i.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var o=this.storage.getCommands(e);i.each(o.instances,function(e){t.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=i.isFunction(n)?new n:n,this.storage=t}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,i),n}(t,t.Marionette,e),t.Wreqr}),function(e,t){if("object"==typeof exports){var i=require("underscore"),n=require("backbone");module.exports=t(i,n)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone.babysitter",["underscore","backbone"],t)}(this,function(e,t){"option strict";return t.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===i?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[i],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(t,e),t.ChildViewContainer}),function(e,t){if("object"==typeof exports){var i=require("underscore"),n=require("backbone"),o=require("backbone.wreqr"),s=require("backbone.babysitter");module.exports=t(i,n,o,s)}else"function"==typeof _wAMD.define&&_wAMD.define.amd&&_wAMD.define("backbone-marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){return function(e,t,i){function n(e){return r.call(e)}function o(e,t){var i=new Error(e);throw i.name=t||"Error",i}var s={};t.Marionette=s,s.$=t.$;var r=Array.prototype.slice;return s.extend=t.Model.extend,s.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},s.normalizeMethods=function(e){var t,n={};return i.each(e,function(e,o){t=e,i.isFunction(t)||(t=this[t]),t&&(n[o]=t)},this),n},s.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,n=function(n){var o="on"+n.replace(t,e),s=this[o];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(s)?s.apply(this,i.tail(arguments)):void 0};return n}(),s.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,o(e)}function n(e){e._isRendered=!0,o(e)}function o(e){e._isShown&&e._isRendered&&s(e)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function s(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){n(e)})}}(document.documentElement),function(e){function t(e,t,n,s){var r=s.split(/\s+/);i.each(r,function(i){var s=e[i];s||o("Method '"+i+"' was configured as an event handler, but does not exist."),e.listenTo(t,n,s,e)})}function n(e,t,i,n){e.listenTo(t,i,n,e)}function s(e,t,n,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];e.stopListening(t,n,o,e)})}function r(e,t,i,n){e.stopListening(t,i,n,e)}function a(e,t,n,o,s){t&&n&&(i.isFunction(n)&&(n=n.call(e)),i.each(n,function(n,r){i.isFunction(n)?o(e,t,r,n):s(e,t,r,n)}))}e.bindEntityEvents=function(e,i,o){a(e,i,o,n,t)},e.unbindEntityEvents=function(e,t,i){a(e,t,i,r,s)}}(s),s.Callbacks=function(){this._deferred=s.$.Deferred(),this._callbacks=[]},i.extend(s.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,n){t&&(i=t),e.call(i,n)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=s.$.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),s.Controller=function(e){this.triggerMethod=s.triggerMethod,this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},s.Controller.extend=s.extend,i.extend(s.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),s.Region=function(e){if(this.options=e||{},this.el=s.getOption(this,"el"),!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},i.extend(s.Region,{buildRegion:function(e,t){var n="string"==typeof e,o="string"==typeof e.selector,s="undefined"==typeof e.regionType,r="function"==typeof e;if(!r&&!n&&!o)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var a,l;n&&(a=e),e.selector&&(a=e.selector,delete e.selector),r&&(l=e),!r&&s&&(l=t),e.regionType&&(l=e.regionType,delete e.regionType),(n||r)&&(e={}),e.el=a;var c=new l(e);return e.parentEl&&(c.getEl=function(t){var n=e.parentEl;return i.isFunction(n)&&(n=n()),n.find(t)}),c}}),i.extend(s.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||i.isUndefined(e.$el),n=e!==this.currentView;n&&this.close(),e.render(),(n||t)&&this.open(e),this.currentView=e,s.triggerMethod.call(this,"show",e),s.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return s.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),s.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),s.Region.extend=s.extend,s.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var n={};return i.each(e,function(e,o){"string"==typeof e&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var s=this.addRegion(o,e);n[o]=s},this),n},addRegion:function(t,n){var o,s=i.isObject(n),r=i.isString(n),a=!!n.selector;return o=r||s&&a?e.Region.buildRegion(n,e.Region):i.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,o),this.triggerMethod("region:add",t,o),o},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){i.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){i.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return i.each(n,function(e){t.prototype[e]=function(){var t=i.values(this._regions),n=[t].concat(i.toArray(arguments));return i[e].apply(i,n)}}),t}(s),s.TemplateCache=function(e){this.templateId=e},i.extend(s.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new s.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=n(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(s.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=s.$(e).html();return t&&0!==t.length||o("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return i.template(e)}}),s.Renderer={render:function(e,t){if(!e){var i=new Error("Cannot render the template since it's false, null or undefined.");throw i.name="TemplateNotFoundError",i}var n;return n="function"==typeof e?e:s.TemplateCache.get(e),n(t)}},s.View=t.View.extend({constructor:function(e){i.bindAll(this,"render");var n=Array.prototype.slice.apply(arguments);this.options=i.extend({},i.result(this,"options"),i.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(i.result(this,"events")),t.View.prototype.constructor.apply(this,n),s.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:s.triggerMethod,normalizeMethods:s.normalizeMethods,getTemplate:function(){return s.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=s.getOption(this,"templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(e,t)},normalizeUIKeys:function(e){return"undefined"!=typeof e?(i.each(i.keys(e),function(t){var i=t.split("@ui.");2===i.length&&(e[i[0]+this.ui[i[1]]]=e[t],delete e[t])},this),e):void 0},configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,function(t,n){var o=i.isObject(t),s=o?t.event:t;e[n]=function(e){if(e){var i=e.preventDefault,n=e.stopPropagation,r=o?t.preventDefault:i,a=o?t.stopPropagation:n;r&&i&&i.apply(e),a&&n&&n.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,l)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),s.bindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.bindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,i.isFunction(e)&&(e=e.call(this));var n={},o=this.configureTriggers();i.extend(n,e,o),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),s.unbindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.unbindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),s.ItemView=s.View.extend({constructor:function(){s.View.prototype.constructor.apply(this,n(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=s.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),s.View.prototype.close.apply(this,n(arguments)),this.triggerMethod("item:closed"))}}),s.CollectionView=s.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),s.View.prototype.constructor.apply(this,n(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(e){s.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,t,i)},onShowCalled:function(){this.children.each(function(e){s.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return s.getOption(this,"emptyView")},getItemView:function(){var e=s.getOption(this,"itemView");return e||o("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,n){var o=s.getOption(this,"itemViewOptions");i.isFunction(o)&&(o=o.call(this,e,n));var r=this.buildItemView(e,t,o);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,n),this._isShown&&!this.isBuffering&&s.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(e){var t=s.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var o=n(arguments),r=o[0],a=this.normalizeMethods(this.getItemEvents());o[0]=t+":"+r,o.splice(1,0,e),"undefined"!=typeof a&&i.isFunction(a[r])&&a[r].apply(this,o),s.triggerMethod.apply(this,o)},this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,n){var o=i.extend({model:e},n);return new t(o)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(e,t){e.$el.append(t)},appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),s.View.prototype.close.apply(this,n(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),s.CompositeView=s.CollectionView.extend({constructor:function(){s.CollectionView.prototype.constructor.apply(this,n(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var e=s.getOption(this,"itemView")||this.constructor;return e||o("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),s.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return s.Renderer.render(t,e)},appendBuffer:function(e,t){var i=this.getItemViewContainer(e);i.append(t)},appendHtml:function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var i=this.getItemViewContainer(e);i.append(t.el)}},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,n=s.getOption(e,"itemViewContainer");if(n){var r=i.isFunction(n)?n.call(this):n;t=e.$(r),t.length<=0&&o("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),s.Layout=s.ItemView.extend({regionType:s.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),s.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=s.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);s.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,i={regionType:s.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new s.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),s.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,n(arguments)),this.options=e||{};var i=s.getOption(this,"appRoutes"),o=this._getController();this.processAppRoutes(o,i)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return s.getOption(this,"controller")},_addAppRoute:function(e,t,n){var o=e[n];if(!o)throw new Error("Method '"+n+"' was not found on the controller");this.route(t,n,i.bind(o,e))}}),s.Application=function(e){this._initRegionManager(),this._initCallbacks=new s.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},i.extend(this,e),this.triggerMethod=s.triggerMethod},i.extend(s.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=s.Module;t&&(i=t.moduleClass||i);var o=n(arguments);return o.unshift(this),i.create.apply(i,o)},_initRegionManager:function(){this._regionManager=new s.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),s.Application.extend=s.extend,s.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=s.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,e,t)},s.Module.extend=s.extend,i.extend(s.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,s.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),s.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var o=i.flatten([this,this.app,t,s,s.$,i,n]);e.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks}}),i.extend(s.Module,{create:function(e,t,o){var s=e,r=n(arguments);r.splice(0,3),t=t.split(".");var a=t.length,l=[];return l[a-1]=o,i.each(t,function(t,i){var n=s;s=this._getModule(n,t,e,o),this._addModuleDefinition(n,s,l[i],r)},this),s},_getModule:function(e,t,n,o){var r=s.Module,a=i.extend({},o);o&&(r=o.moduleClass||r);var l=e[t];return l||(l=new r(t,n,a),e[t]=l,e.submodules[t]=l),l},_addModuleDefinition:function(e,t,n,o){var s,r;i.isFunction(n)?(s=n,r=!0):i.isObject(n)?(s=n.define,r="undefined"!=typeof n.startWithParent?n.startWithParent:!0):r=!0,s&&t.addDefinition(s,o),t.startWithParent=t.startWithParent&&r,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),s}(this,t,e),t.Marionette}),_wAMD.define("util/backbone-prevent",["jquery","underscore","backbone"],function(e,t,i){i.preventClose=function(n){var o=this;if(!this.defer){if(this.defer=e.Deferred(),i.preventClose.preventer){var s=i.preventClose.preventer();s&&s.promise?this.defer=s:s?this.defer.resolve():this.defer.reject(),this.defer.fail(function(){delete i.preventClose.preventer})}else this.defer.reject();this.defer.always(function(){t.defer(function(){delete o.defer})})}this.defer.fail(function(){n()})},i.preventClose.ifModelChanged=function(i){if(!i.hasChangedDeepSinceSavepoint())return!1;var n=e.Deferred();return t.defer(function(){confirm("Are you sure? You'll lose your current changes.")?n.reject():n.resolve()}),n.promise()};var n=i.View.prototype.constructor;i.View.prototype.constructor=function(){n.apply(this,arguments),this.preventClose&&(i.preventClose.preventer=t.bind(this.preventClose,this))}}),jsonrpc={},jsonrpc.CallStack=function(e,t,i,n){this._counter=0,this._enterFn=e,this._exitFn=i,this._enterScope=t,this._exitScope=n},jsonrpc.CallStack.prototype={enter:function(){this._counter=this._counter<0?1:this._counter+1,1===this._counter&&this._enterFn.apply(this._enterScope,arguments)},exit:function(){this._counter-=1,0===this._counter&&this._exitFn.apply(this._exitScope,arguments)}},jsonrpc.DelayedTask=function(e,t,i){this._fn=e||function(){},this._scope=t||void 0,this._args=i||[],this._id=null},jsonrpc.Observable=function(){this._listeners=[]},jsonrpc.Observable.prototype={bind:function(e,t){var i={fn:e,scope:t||this};return this._listeners.push(i),i},unbind:function(e){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)},trigger:function(){var e;for(e=0;e<this._listeners.length;e+=1)this._listeners[e].fn.apply(this._listeners[e].scope,arguments)}},jsonrpc.DelayedTask.prototype={delay:function(e,t,i,n){var o=this;this._fn=t||this._fn,this._scope=i||this._scope,this._args=n||this._args,this.cancel(),this._id=window.setInterval(function(){window.clearInterval(o._id),o._id=null,o._fn.apply(o._scope,o._args)},e)},cancel:function(){this._id&&(window.clearInterval(this._id),this._id=null)}},jsonrpc.JsonRpc=function(e){this._url=e,this.loading=new jsonrpc.Observable,this.loaded=new jsonrpc.Observable,this.unhandledFailure=new jsonrpc.Observable,this._loadingState=new jsonrpc.CallStack(this.loading.trigger,this.loading,this.loaded.trigger,this.loaded),this._requests=[],this._batchingMilliseconds=10,this._delayedTask=new jsonrpc.DelayedTask},jsonrpc.JsonRpc.prototype={setBatchingMilliseconds:function(e){this._batchingMilliseconds=e},call:function(){var e=this._getParams.apply(this,arguments);this._loadingState.enter(),e.standalone?this._sendRequests([e]):(this._requests.push(e),this._batchingMilliseconds?this._delayedTask.delay(this._batchingMilliseconds,this._sendRequests,this):this._sendRequests())},_sendRequests:function(e){function t(t,o,s){var r;if(t)r=n._isArray(o)?o:[o];else for(r=[],i=0;i<e.length;i+=1)r[i]={id:i,error:{message:o}};n._handleResponses(e,r,s)}var i,n=this,o=[],s=[];for("undefined"==typeof e&&(e=n._requests,n._requests=[]),i=0;i<e.length;i+=1)e[i].request.id=i,e[i].secure?s.push(e[i].request):o.push(e[i].request);o.length>0&&(1===o.length&&(o=o[0]),n._doJsonPost(n._url,o,t)),s.length>0&&(1===s.length&&(s=s[0]),n._doJsonpGet(n._url,s,t))},_handleResponses:function(e,t,i){var n,o,s;for(n=0;n<t.length;n+=1)o=t[n],s=e[o.id],this._handleResponse(s,o,i)},_handleResponse:function(e,t,i){var n=!t.error,o=n?t.result:t.error.message;this._loadingState.exit(),n?e.success.call(e.scope,o,i):e.failure.call(e.scope,o,i),e.callback.call(e.scope,n,o,i)},_getParams:function(){var e=this,t=Array.prototype.slice.call(arguments),i={request:{jsonrpc:"2.0",method:t.shift()}};for(i.request.params=[];t.length>1&&!this._isFunction(t[0]);)i.request.params.push(t.shift());return this._isFunction(t[0])?(i.success=t[0],i.scope=t[1]):(i.success=t[0].success,i.failure=t[0].failure,i.callback=t[0].callback,i.scope=t[0].scope,i.secure=!!t[0].secure,i.standalone=!!t[0].standalone),i.success=i.success||function(){},i.failure=i.failure||function(){e.unhandledFailure.trigger.apply(e.unhandledFailure,arguments)
},i.callback=i.callback||function(){},i},_isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},_isFunction:function(e){return"[object Function]"===Object.prototype.toString.apply(e)},_beforeSend:function(){},_doJsonPost:function(e,t,i){var n=Weebly.jQuery.ajax({type:"POST",url:e,cache:!1,contentType:"application/json; charset=UTF-8",dataType:"json",beforeSend:this._beforeSend,data:JSON.stringify(t),headers:{"x-wtok":Weebly.RequestToken}}).done(function(e){var t=n.getResponseHeader("Content-Type");200!==n.status?i(!1,'Expected HTTP response "200 OK", found "'+n.status+" "+n.statusText+'"',n):0!==t.indexOf("application/json")?i(!1,'Expected JSON encoded response, found "'+t+'"',n):i(!0,e,n)})},_doJsonpGet:function(e,t,i){e="https://"+_W.securePrefix+e,Weebly.jQuery.ajax({type:"GET",url:e,cache:!1,jsonpCallback:"WJsonp",dataType:"jsonp",beforeSend:this._beforeSend,data:t,headers:{"x-wtok":Weebly.RequestToken}}).done(function(e){i(!0,e)})}},_wAMD.define("vendor/jsonrpc",function(){}),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/backbone-rpc",["underscore","backbone"],t):t(e._,e.Backbone)}(this,function(e,t){var i=t.sync;e.extend(t,{sync:function(n,o,s){if(!o.rpc)return i.apply(t,arguments);var r;switch(n){case"delete":n="destroy";case"create":case"update":case"patch":r=s.attrs||o.toJSON(s);break;case"read":if(o.rpc&&"read"==n){s=e.extend({},e.omit(s,"data"),s.data),r=e.extend({filter:[]},s);var a=o.keydefs||o.model.prototype.keydefs;if(a.PRIMARY)for(var l=0;l<a.PRIMARY.length;l++){var c=a.PRIMARY[l];void 0==o.get(c)||e.findWhere(r.filter,{property:c})||r.filter.push({property:c,value:o.get(c)})}}break;default:console.warn(n+" params not defined for this model ",o),r=s.attrs||o.toJSON()}if(o.rpc[n]){var u=o.rpc[n](r);return u.done(function(e){return e.success===!1?s.error(e):s.success(e)}),u.fail(function(e){return s.error(e)}),u}console.warn(n+" not defined for this model ",o)}})}),function(){Weebly.setup_rpc=function(e){var t=Weebly.ns(e.namespace),i=new jsonrpc.JsonRpc(e.url),n=function(e,t,n,o,s){return function(){var o=Array.prototype.slice.call(arguments);if(o.length<t)return console.error("Wrong number of args for "+e),void 0;n=!!n,o.unshift(e);var r=Weebly.jQuery.Deferred();return o.push({success:r.resolve,failure:r.reject,scope:r,secure:n,standalone:s}),i.call.apply(i,o),r}};for(var o in e.actions)if(e.actions.hasOwnProperty(o))for(var s=Weebly.ns(o,t),r=e.actions[o]||[],a=0;a<r.length;a++){var l=r[a];s[l.name]=n(o+"::"+l.name,l.len,l.secure,l.multiple,l.standalone)}},Weebly.setup_model_rpc=function(e){var t=Weebly.ns(e.rpc_namespace),i=Weebly.ns(e.model_namespace),n=Weebly.ns(e.collection_namespace),o=Weebly.ns(e.bootstrap_namespace);_.extend(i,e.models),_.extend(n,e.collections),_.extend(o,e.bootstrap);for(var s in n)t[s]&&(n[s].rpc=t[s]);for(var s in i)if(t[s]){i[s].rpc=t[s];var r=i[s].relations;if(r)for(var a=0;a<r.length;a++){var l=r[a];n[l.relatedModel]&&(l.collectionType=l.relatedModel+"Collection")}}}}(),_wAMD.define("backbone-all",["backbone","backbone-pageable","backbone-validation","backbone-relational","backbone-marionette","util/backbone-prevent","util/backbone-rpc"],function(e){var t={},i=e.RelationalModel.extend;return e.Relational.store.addModelScope(t),e.RelationalModel.extend=function(e){var n=i.apply(this,arguments),o=e._class;return o&&(o=o.split("."),o=o[o.length-1],t[o]=n),n},e}),function(e){e.Event.prototype.stop=function(){this.preventDefault(),this.stopPropagation()},e.fn.extend({getValue:function(){var e=this;return"checkbox"===e.attr("type")||"radio"===e.attr("type")?e.prop("checked"):e.is(":input")?e.val():e.html()},setValue:function(e){var t=this;return"checkbox"===t.attr("type")||"radio"===t.attr("type")?t.prop("checked",!!e):t.is(":input")?t.val(null==e||void 0==e?"":e):t.html("string"==typeof e?e:""),t},getValues:function(t){t=t||"";var i={};return this.find(":input,.input").each(function(){var n=e(this),o=n.attr("name")||n.attr("id");o&&0===o.indexOf(t)&&(o=o.substring(t.length),i[o]=n.getValue())}),i},setValues:function(t,i){return i=i||"",this.find(":input,.input").each(function(){var n=e(this),o=n.attr("name")||n.attr("id");o&&0===o.indexOf(i)&&(o=o.substring(i.length),n.setValue(t[o]))}),this},equals:function(e){return this.data()===e.data()},padInput:function(t){var i,n="auto",o="auto";return t=t||"all",this.each(function(s,r){i=e(r),("ns"===t||"all"===t)&&(n=Math.floor((i.parent().height()-i.height())/2)),("ew"===t||"all"===t)&&(o=Math.floor((i.parent().width()-i.width())/2)),i.css({"padding-top":n,"padding-right":o,"padding-bottom":n,"padding-left":o})}),this}})}(Weebly.jQuery),"undefined"==typeof JSON&&(JSON={stringify:Object.toJSON,parse:function(e){return(e||"").evalJSON()}}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,i=Array.prototype.slice.call(arguments,1);return function(){var n=Array.prototype.slice.call(arguments);return t.apply(e,i.concat(n))}}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n>i;++i)i in this&&e.call(t,this[i],i,this)}),Array.prototype.find||(Array.prototype.find=function(e,t){for(var i=0,n=this.length;n>i;++i){var o=this[i];if(e.call(t,o))return o}return null}),Array.prototype.push||(Array.prototype.push=function(e){this[this.length]=e}),Array.prototype.remove||(Array.prototype.remove=function(e,t){var i=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,i)}),String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})},_wAMD.define("util/misc",function(){}),Weebly.Commerce=Weebly.Commerce||{},Weebly.Commerce.Editor=Weebly.Commerce.Editor||{},Weebly.Commerce.Site=Weebly.Commerce.Site||{},"undefined"!=typeof initCommerceModels&&initCommerceModels(),"undefined"!=typeof initEditorRPC&&initEditorRPC(),_wAMD.define("editor/commerce-init",["util/backbone-rpc"],function(){}),Weebly.Membership=Weebly.Membership||{},Weebly.Membership.Editor=Weebly.Membership.Editor||{},Weebly.Membership.Site=Weebly.Membership.Site||{},_wAMD.require(["util/backbone-rpc"],function(){initMembershipModels()}),_wAMD.define("editor/membership-init",function(){});var Swiper=function(e,t){function i(e){return document.querySelectorAll?document.querySelectorAll(e):jQuery(e)}function n(){var e=S-D;return t.freeMode&&(e=S-D),t.slidesPerView>C.slides.length&&(e=0),0>e&&(e=0),e}function o(){function e(e){var i=new Image;i.onload=function(){C.imagesLoaded++,C.imagesLoaded==C.imagesToLoad.length&&(C.reInit(),t.onImagesReady&&t.onImagesReady(C))},i.src=e}if(C.browser.ie10?(C.h.addEventListener(C.wrapper,C.touchEvents.touchStart,p,!1),C.h.addEventListener(document,C.touchEvents.touchMove,f,!1),C.h.addEventListener(document,C.touchEvents.touchEnd,m,!1)):(C.support.touch&&(C.h.addEventListener(C.wrapper,"touchstart",p,!1),C.h.addEventListener(C.wrapper,"touchmove",f,!1),C.h.addEventListener(C.wrapper,"touchend",m,!1)),t.simulateTouch&&(C.h.addEventListener(C.wrapper,"mousedown",p,!1),C.h.addEventListener(document,"mousemove",f,!1),C.h.addEventListener(document,"mouseup",m,!1))),t.autoResize&&C.h.addEventListener(window,"resize",C.resizeFix,!1),s(),C._wheelEvent=!1,t.mousewheelControl){void 0!==document.onmousewheel&&(C._wheelEvent="mousewheel");try{WheelEvent("wheel"),C._wheelEvent="wheel"}catch(n){}C._wheelEvent||(C._wheelEvent="DOMMouseScroll"),C._wheelEvent&&C.h.addEventListener(C.container,C._wheelEvent,l,!1)}if(t.keyboardControl&&C.h.addEventListener(document,"keydown",a,!1),t.updateOnImagesReady){document.querySelectorAll?C.imagesToLoad=C.container.querySelectorAll("img"):window.jQuery&&(C.imagesToLoad=i(C.container).find("img"));for(var o=0;o<C.imagesToLoad.length;o++)e(C.imagesToLoad[o].getAttribute("src"))}}function s(){if(t.preventLinks){var e=[];document.querySelectorAll?e=C.container.querySelectorAll("a"):window.jQuery&&(e=i(C.container).find("a"));for(var n=0;n<e.length;n++)C.h.addEventListener(e[n],"click",d,!1)}if(t.releaseFormElements)for(var o=document.querySelectorAll?C.container.querySelectorAll("input, textarea, select"):i(C.container).find("input, textarea, select"),n=0;n<o.length;n++)C.h.addEventListener(o[n],C.touchEvents.touchStart,h,!0);if(t.onSlideClick)for(var n=0;n<C.slides.length;n++)C.h.addEventListener(C.slides[n],"click",c,!1);if(t.onSlideTouch)for(var n=0;n<C.slides.length;n++)C.h.addEventListener(C.slides[n],C.touchEvents.touchStart,u,!1)}function r(){if(t.onSlideClick)for(var e=0;e<C.slides.length;e++)C.h.removeEventListener(C.slides[e],"click",c,!1);if(t.onSlideTouch)for(var e=0;e<C.slides.length;e++)C.h.removeEventListener(C.slides[e],C.touchEvents.touchStart,u,!1);if(t.releaseFormElements)for(var n=document.querySelectorAll?C.container.querySelectorAll("input, textarea, select"):i(C.container).find("input, textarea, select"),e=0;e<n.length;e++)C.h.removeEventListener(n[e],C.touchEvents.touchStart,h,!0);if(t.preventLinks){var o=[];document.querySelectorAll?o=C.container.querySelectorAll("a"):window.jQuery&&(o=i(C.container).find("a"));for(var e=0;e<o.length;e++)C.h.removeEventListener(o[e],"click",d,!1)}}function a(e){var t=e.keyCode||e.charCode;if(37==t||39==t||38==t||40==t){for(var i=!1,n=C.h.getOffset(C.container),o=C.h.windowScroll().left,s=C.h.windowScroll().top,r=C.h.windowWidth(),a=C.h.windowHeight(),l=[[n.left,n.top],[n.left+C.width,n.top],[n.left,n.top+C.height],[n.left+C.width,n.top+C.height]],c=0;c<l.length;c++){var u=l[c];u[0]>=o&&u[0]<=o+r&&u[1]>=s&&u[1]<=s+a&&(i=!0)}if(!i)return}z?((37==t||39==t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),39==t&&C.swipeNext(),37==t&&C.swipePrev()):((38==t||40==t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1),40==t&&C.swipeNext(),38==t&&C.swipePrev())}function l(e){var i,o=C._wheelEvent;if(e.detail?i=-e.detail:"mousewheel"==o?i=e.wheelDelta:"DOMMouseScroll"==o?i=-e.detail:"wheel"==o&&(i=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY),t.freeMode){z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y");var s,r;z?(s=C.getWrapperTranslate("x")+i,r=C.getWrapperTranslate("y"),s>0&&(s=0),s<-n()&&(s=-n())):(s=C.getWrapperTranslate("x"),r=C.getWrapperTranslate("y")+i,r>0&&(r=0),r<-n()&&(r=-n())),C.setWrapperTransition(0),C.setWrapperTranslate(s,r,0)}else 0>i?C.swipeNext():C.swipePrev();return t.autoplay&&C.stopAutoplay(),e.preventDefault?e.preventDefault():e.returnValue=!1,!1}function c(){C.allowSlideClick&&(C.clickedSlide=this,C.clickedSlideIndex=C.slides.indexOf(this),t.onSlideClick(C))}function u(){C.clickedSlide=this,C.clickedSlideIndex=C.slides.indexOf(this),t.onSlideTouch(C)}function d(e){return C.allowLinks?void 0:(e.preventDefault?e.preventDefault():e.returnValue=!1,!1)}function h(e){return e.stopPropagation?e.stopPropagation():e.returnValue=!1,!1}function p(e){if(t.preventLinks&&(C.allowLinks=!0),C.isTouched||t.onlyExternal)return!1;if(t.noSwiping&&e.target&&e.target.className&&e.target.className.indexOf(t.noSwipingClass)>-1)return!1;if(j=!1,C.isTouched=!0,V="touchstart"==e.type,!V||1==e.targetTouches.length){t.loop&&C.fixLoop(),C.callPlugins("onTouchStartBegin"),V||(e.preventDefault?e.preventDefault():e.returnValue=!1);var i=V?e.targetTouches[0].pageX:e.pageX||e.clientX,n=V?e.targetTouches[0].pageY:e.pageY||e.clientY;C.touches.startX=C.touches.currentX=i,C.touches.startY=C.touches.currentY=n,C.touches.start=C.touches.current=z?i:n,C.setWrapperTransition(0),C.positions.start=C.positions.current=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y"),z?C.setWrapperTranslate(C.positions.start,0,0):C.setWrapperTranslate(0,C.positions.start,0),C.times.start=(new Date).getTime(),A=void 0,t.moveStartThreshold>0&&(B=!1),t.onTouchStart&&t.onTouchStart(C),C.callPlugins("onTouchStartEnd")}}function f(e){if(C.isTouched&&!t.onlyExternal&&(!V||"mousemove"!=e.type)){var i=V?e.targetTouches[0].pageX:e.pageX||e.clientX,o=V?e.targetTouches[0].pageY:e.pageY||e.clientY;if("undefined"==typeof A&&z&&(A=!!(A||Math.abs(o-C.touches.startY)>Math.abs(i-C.touches.startX))),"undefined"!=typeof A||z||(A=!!(A||Math.abs(o-C.touches.startY)<Math.abs(i-C.touches.startX))),A)return C.isTouched=!1,void 0;if(e.assignedToSwiper)return C.isTouched=!1,void 0;if(e.assignedToSwiper=!0,C.isMoved=!0,t.preventLinks&&(C.allowLinks=!1),t.onSlideClick&&(C.allowSlideClick=!1),t.autoplay&&C.stopAutoplay(),!V||1==e.touches.length){if(C.callPlugins("onTouchMoveStart"),e.preventDefault?e.preventDefault():e.returnValue=!1,C.touches.current=z?i:o,C.positions.current=(C.touches.current-C.touches.start)*t.touchRatio+C.positions.start,C.positions.current>0&&t.onResistanceBefore&&t.onResistanceBefore(C,C.positions.current),C.positions.current<-n()&&t.onResistanceBefore&&t.onResistanceAfter(C,Math.abs(C.positions.current+n())),t.resistance&&"100%"!=t.resistance){if(C.positions.current>0){var s=1-C.positions.current/D/2;C.positions.current=.5>s?D/2:C.positions.current*s}if(C.positions.current<-n()){var r=(C.touches.current-C.touches.start)*t.touchRatio+(n()+C.positions.start),s=(D+r)/D,a=C.positions.current-r*(1-s)/2,l=-n()-D/2;C.positions.current=l>a||0>=s?l:a}}if(t.resistance&&"100%"==t.resistance&&(C.positions.current>0&&(!t.freeMode||t.freeModeFluid)&&(C.positions.current=0),C.positions.current<-n()&&(!t.freeMode||t.freeModeFluid)&&(C.positions.current=-n())),!t.followFinger)return;return t.moveStartThreshold?Math.abs(C.touches.current-C.touches.start)>t.moveStartThreshold||B?(B=!0,z?C.setWrapperTranslate(C.positions.current,0,0):C.setWrapperTranslate(0,C.positions.current,0)):C.positions.current=C.positions.start:z?C.setWrapperTranslate(C.positions.current,0,0):C.setWrapperTranslate(0,C.positions.current,0),(t.freeMode||t.watchActiveIndex)&&C.updateActiveSlide(C.positions.current),t.grabCursor&&(C.container.style.cursor="move",C.container.style.cursor="grabbing",C.container.style.cursor="-moz-grabbin",C.container.style.cursor="-webkit-grabbing"),H||(H=C.touches.current),q||(q=(new Date).getTime()),C.velocity=(C.touches.current-H)/((new Date).getTime()-q)/2,Math.abs(C.touches.current-H)<2&&(C.velocity=0),H=C.touches.current,q=(new Date).getTime(),C.callPlugins("onTouchMoveEnd"),t.onTouchMove&&t.onTouchMove(C),!1}}}function m(){if(A&&C.swipeReset(),!t.onlyExternal&&C.isTouched){C.isTouched=!1,t.grabCursor&&(C.container.style.cursor="move",C.container.style.cursor="grab",C.container.style.cursor="-moz-grab",C.container.style.cursor="-webkit-grab"),C.positions.current||0===C.positions.current||(C.positions.current=C.positions.start),t.followFinger&&(z?C.setWrapperTranslate(C.positions.current,0,0):C.setWrapperTranslate(0,C.positions.current,0)),C.times.end=(new Date).getTime(),C.touches.diff=C.touches.current-C.touches.start,C.touches.abs=Math.abs(C.touches.diff),C.positions.diff=C.positions.current-C.positions.start,C.positions.abs=Math.abs(C.positions.diff);var e=C.positions.diff,i=C.positions.abs,o=C.times.end-C.times.start;if(5>i&&300>o&&0==C.allowLinks&&(t.freeMode||0==i||C.swipeReset(),t.preventLinks&&(C.allowLinks=!0),t.onSlideClick&&(C.allowSlideClick=!0)),setTimeout(function(){t.preventLinks&&(C.allowLinks=!0),t.onSlideClick&&(C.allowSlideClick=!0)},100),!C.isMoved)return C.isMoved=!1,t.onTouchEnd&&t.onTouchEnd(C),C.callPlugins("onTouchEnd"),void 0;C.isMoved=!1;var s=n();if(C.positions.current>0)return C.swipeReset(),t.onTouchEnd&&t.onTouchEnd(C),C.callPlugins("onTouchEnd"),void 0;if(C.positions.current<-s)return C.swipeReset(),t.onTouchEnd&&t.onTouchEnd(C),C.callPlugins("onTouchEnd"),void 0;if(t.freeMode){if(t.freeModeFluid){var r,a=1e3*t.momentumRatio,l=C.velocity*a,c=C.positions.current+l,u=!1,d=20*Math.abs(C.velocity)*t.momentumBounceRatio;-s>c&&(t.momentumBounce&&C.support.transitions?(-d>c+s&&(c=-s-d),r=-s,u=!0,j=!0):c=-s),c>0&&(t.momentumBounce&&C.support.transitions?(c>d&&(c=d),r=0,u=!0,j=!0):c=0),0!=C.velocity&&(a=Math.abs((c-C.positions.current)/C.velocity)),z?C.setWrapperTranslate(c,0,0):C.setWrapperTranslate(0,c,0),C.setWrapperTransition(a),t.momentumBounce&&u&&C.wrapperTransitionEnd(function(){j&&(t.onMomentumBounce&&t.onMomentumBounce(C),z?C.setWrapperTranslate(r,0,0):C.setWrapperTranslate(0,r,0),C.setWrapperTransition(300))}),C.updateActiveSlide(c)}return(!t.freeModeFluid||o>=300)&&C.updateActiveSlide(C.positions.current),t.onTouchEnd&&t.onTouchEnd(C),C.callPlugins("onTouchEnd"),void 0}T=0>e?"toNext":"toPrev","toNext"==T&&300>=o&&(30>i||!t.shortSwipes?C.swipeReset():C.swipeNext(!0)),"toPrev"==T&&300>=o&&(30>i||!t.shortSwipes?C.swipeReset():C.swipePrev(!0));var h=0;if("auto"==t.slidesPerView){for(var p,f=Math.abs(z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y")),m=0,g=0;g<C.slides.length;g++)if(p=z?C.slides[g].getWidth(!0):C.slides[g].getHeight(!0),m+=p,m>f){h=p;break}h>D&&(h=D)}else h=k*t.slidesPerView;"toNext"==T&&o>300&&(i>=.5*h?C.swipeNext(!0):C.swipeReset()),"toPrev"==T&&o>300&&(i>=.5*h?C.swipePrev(!0):C.swipeReset()),t.onTouchEnd&&t.onTouchEnd(C),C.callPlugins("onTouchEnd")}}function g(e,i,n){function o(){r+=a,c="toNext"==l?r>e:e>r,c?(z?C.setWrapperTranslate(Math.round(r),0):C.setWrapperTranslate(0,Math.round(r)),C._DOMAnimating=!0,window.setTimeout(function(){o()},1e3/60)):(t.onSlideChangeEnd&&t.onSlideChangeEnd(C),z?C.setWrapperTranslate(e,0):C.setWrapperTranslate(0,e),C._DOMAnimating=!1)}if(C.support.transitions||!t.DOMAnimation){z?C.setWrapperTranslate(e,0,0):C.setWrapperTranslate(0,e,0);var s="to"==i&&n.speed>=0?n.speed:t.speed;C.setWrapperTransition(s)}else{var r=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y"),s="to"==i&&n.speed>=0?n.speed:t.speed,a=Math.ceil((e-r)/s*(1e3/60)),l=r>e?"toNext":"toPrev",c="toNext"==l?r>e:e>r;if(C._DOMAnimating)return;o()}C.updateActiveSlide(e),t.onSlideNext&&"next"==i&&t.onSlideNext(C,e),t.onSlidePrev&&"prev"==i&&t.onSlidePrev(C,e),t.onSlideReset&&"reset"==i&&t.onSlideReset(C,e),("next"==i||"prev"==i||"to"==i&&1==n.runCallbacks)&&v()}function v(){if(C.callPlugins("onSlideChangeStart"),t.onSlideChangeStart)if(t.queueStartCallbacks&&C.support.transitions){if(C._queueStartCallbacks)return;C._queueStartCallbacks=!0,t.onSlideChangeStart(C),C.wrapperTransitionEnd(function(){C._queueStartCallbacks=!1})}else t.onSlideChangeStart(C);if(t.onSlideChangeEnd)if(C.support.transitions)if(t.queueEndCallbacks){if(C._queueEndCallbacks)return;C._queueEndCallbacks=!0,C.wrapperTransitionEnd(t.onSlideChangeEnd)}else C.wrapperTransitionEnd(t.onSlideChangeEnd);else t.DOMAnimation||setTimeout(function(){t.onSlideChangeEnd(C)},10)}function b(){for(var e=C.paginationButtons,t=0;t<e.length;t++)C.h.removeEventListener(e[t],"click",w,!1)}function y(){for(var e=C.paginationButtons,t=0;t<e.length;t++)C.h.addEventListener(e[t],"click",w,!1)}function w(e){for(var t,i=e.target||e.srcElement,n=C.paginationButtons,o=0;o<n.length;o++)i===n[o]&&(t=o);C.swipeTo(t)}function _(){C.calcSlides(),t.loader.slides.length>0&&0==C.slides.length&&C.loadSlides(),t.loop&&C.createLoop(),C.init(),o(),t.pagination&&t.createPagination&&C.createPagination(!0),t.loop||t.initialSlide>0?C.swipeTo(t.initialSlide,0,!1):C.updateActiveSlide(0),t.autoplay&&C.startAutoplay()}if(document.body.__defineGetter__&&HTMLElement){var M=HTMLElement.prototype;M.__defineGetter__&&M.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})}if(window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;n>i;i++)if(this[i]===e)return i;return-1}),(document.querySelectorAll||window.jQuery)&&"undefined"!=typeof e&&(e.nodeType||0!==i(e).length)){var C=this;C.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0},C.positions={start:0,abs:0,diff:0,current:0},C.times={start:0,end:0},C.id=(new Date).getTime(),C.container=e.nodeType?e:i(e)[0],C.isTouched=!1,C.isMoved=!1,C.activeIndex=0,C.activeLoaderIndex=0,C.activeLoopIndex=0,C.previousIndex=null,C.velocity=0,C.snapGrid=[],C.slidesGrid=[],C.imagesToLoad=[],C.imagesLoaded=0,C.wrapperLeft=0,C.wrapperRight=0,C.wrapperTop=0,C.wrapperBottom=0;var x,k,S,T,A,D,E={mode:"horizontal",touchRatio:1,speed:300,freeMode:!1,freeModeFluid:!1,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,simulateTouch:!0,followFinger:!0,shortSwipes:!0,moveStartThreshold:!1,autoplay:!1,onlyExternal:!1,createPagination:!0,pagination:!1,paginationElement:"span",paginationClickable:!1,paginationAsRange:!0,resistance:!0,scrollContainer:!1,preventLinks:!0,noSwiping:!1,noSwipingClass:"swiper-no-swiping",initialSlide:0,keyboardControl:!1,mousewheelControl:!1,useCSS3Transforms:!0,loop:!1,loopAdditionalSlides:0,calculateHeight:!1,updateOnImagesReady:!0,releaseFormElements:!0,watchActiveIndex:!1,visibilityFullFit:!1,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:!1,queueStartCallbacks:!1,queueEndCallbacks:!1,autoResize:!0,resizeReInit:!1,DOMAnimation:!0,loader:{slides:[],slidesHTMLType:"inner",surroundGroups:1,logic:"reload",loadAllSlides:!1},slideElement:"div",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",wrapperClass:"swiper-wrapper",paginationElementClass:"swiper-pagination-switch",paginationActiveClass:"swiper-active-switch",paginationVisibleClass:"swiper-visible-switch"};t=t||{};for(var P in E)if(P in t&&"object"==typeof t[P])for(var R in E[P])R in t[P]||(t[P][R]=E[P][R]);else P in t||(t[P]=E[P]);C.params=t,t.scrollContainer&&(t.freeMode=!0,t.freeModeFluid=!0),t.loop&&(t.resistance="100%");var z="horizontal"===t.mode;C.touchEvents={touchStart:C.support.touch||!t.simulateTouch?"touchstart":C.browser.ie10?"MSPointerDown":"mousedown",touchMove:C.support.touch||!t.simulateTouch?"touchmove":C.browser.ie10?"MSPointerMove":"mousemove",touchEnd:C.support.touch||!t.simulateTouch?"touchend":C.browser.ie10?"MSPointerUp":"mouseup"};for(var O=C.container.childNodes.length-1;O>=0;O--)if(C.container.childNodes[O].className)for(var F=C.container.childNodes[O].className.split(" "),W=0;W<F.length;W++)F[W]===t.wrapperClass&&(x=C.container.childNodes[O]);C.wrapper=x,C._extendSwiperSlide=function(e){return e.append=function(){return t.loop?(e.insertAfter(C.slides.length-C.loopedSlides),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):C.wrapper.appendChild(e),C.reInit(),e},e.prepend=function(){return t.loop?(C.wrapper.insertBefore(e,C.slides[C.loopedSlides]),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):C.wrapper.insertBefore(e,C.wrapper.firstChild),C.reInit(),e},e.insertAfter=function(i){if("undefined"==typeof i)return!1;var n;return t.loop?(n=C.slides[i+1+C.loopedSlides],C.wrapper.insertBefore(e,n),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):(n=C.slides[i+1],C.wrapper.insertBefore(e,n)),C.reInit(),e},e.clone=function(){return C._extendSwiperSlide(e.cloneNode(!0))},e.remove=function(){C.wrapper.removeChild(e),C.reInit()},e.html=function(t){return"undefined"==typeof t?e.innerHTML:(e.innerHTML=t,e)},e.index=function(){for(var t,i=C.slides.length-1;i>=0;i--)e===C.slides[i]&&(t=i);return t},e.isActive=function(){return e.index()===C.activeIndex?!0:!1},e.swiperSlideDataStorage||(e.swiperSlideDataStorage={}),e.getData=function(t){return e.swiperSlideDataStorage[t]},e.setData=function(t,i){return e.swiperSlideDataStorage[t]=i,e},e.data=function(t,i){return i?(e.setAttribute("data-"+t,i),e):e.getAttribute("data-"+t)},e.getWidth=function(t){return C.h.getWidth(e,t)},e.getHeight=function(t){return C.h.getHeight(e,t)},e.getOffset=function(){return C.h.getOffset(e)},e},C.calcSlides=function(e){var i=C.slides?C.slides.length:!1;C.slides=[],C.displaySlides=[];for(var n=0;n<C.wrapper.childNodes.length;n++)if(C.wrapper.childNodes[n].className)for(var o=C.wrapper.childNodes[n].className,a=o.split(" "),l=0;l<a.length;l++)a[l]===t.slideClass&&C.slides.push(C.wrapper.childNodes[n]);for(n=C.slides.length-1;n>=0;n--)C._extendSwiperSlide(C.slides[n]);i&&(i!==C.slides.length||e)&&(r(),s(),C.updateActiveSlide(),t.createPagination&&C.params.pagination&&C.createPagination(),C.callPlugins("numberOfSlidesChanged"))},C.createSlide=function(e,i,n){var i=i||C.params.slideClass,n=n||t.slideElement,o=document.createElement(n);return o.innerHTML=e||"",o.className=i,C._extendSwiperSlide(o)},C.appendSlide=function(e,t,i){return e?e.nodeType?C._extendSwiperSlide(e).append():C.createSlide(e,t,i).append():void 0},C.prependSlide=function(e,t,i){return e?e.nodeType?C._extendSwiperSlide(e).prepend():C.createSlide(e,t,i).prepend():void 0},C.insertSlideAfter=function(e,t,i,n){return"undefined"==typeof e?!1:t.nodeType?C._extendSwiperSlide(t).insertAfter(e):C.createSlide(t,i,n).insertAfter(e)},C.removeSlide=function(e){if(C.slides[e]){if(t.loop){if(!C.slides[e+C.loopedSlides])return!1;C.slides[e+C.loopedSlides].remove(),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()}else C.slides[e].remove();return!0}return!1},C.removeLastSlide=function(){return C.slides.length>0?(t.loop?(C.slides[C.slides.length-1-C.loopedSlides].remove(),C.removeLoopedSlides(),C.calcSlides(),C.createLoop()):C.slides[C.slides.length-1].remove(),!0):!1},C.removeAllSlides=function(){for(var e=C.slides.length-1;e>=0;e--)C.slides[e].remove()},C.getSlide=function(e){return C.slides[e]},C.getLastSlide=function(){return C.slides[C.slides.length-1]},C.getFirstSlide=function(){return C.slides[0]},C.activeSlide=function(){return C.slides[C.activeIndex]};var I=[];for(var N in C.plugins)if(t[N]){var L=C.plugins[N](C,t[N]);L&&I.push(L)}C.callPlugins=function(e,t){t||(t={});for(var i=0;i<I.length;i++)e in I[i]&&I[i][e](t)},C.browser.ie10&&!t.onlyExternal&&(z?C.wrapper.classList.add("swiper-wp8-horizontal"):C.wrapper.classList.add("swiper-wp8-vertical")),t.freeMode&&(C.container.className+=" swiper-free-mode"),C.initialized=!1,C.init=function(e,i){var n=C.h.getWidth(C.container),o=C.h.getHeight(C.container);if(n!==C.width||o!==C.height||e){C.width=n,C.height=o,D=z?n:o;var s=C.wrapper;if(e&&C.calcSlides(i),"auto"===t.slidesPerView){var r=0,a=0;t.slidesOffset>0&&(s.style.paddingLeft="",s.style.paddingRight="",s.style.paddingTop="",s.style.paddingBottom=""),s.style.width="",s.style.height="",t.offsetPxBefore>0&&(z?C.wrapperLeft=t.offsetPxBefore:C.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(z?C.wrapperRight=t.offsetPxAfter:C.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(z?(C.wrapperLeft=(D-this.slides[0].getWidth(!0))/2,C.wrapperRight=(D-C.slides[C.slides.length-1].getWidth(!0))/2):(C.wrapperTop=(D-C.slides[0].getHeight(!0))/2,C.wrapperBottom=(D-C.slides[C.slides.length-1].getHeight(!0))/2)),z?(C.wrapperLeft>=0&&(s.style.paddingLeft=C.wrapperLeft+"px"),C.wrapperRight>=0&&(s.style.paddingRight=C.wrapperRight+"px")):(C.wrapperTop>=0&&(s.style.paddingTop=C.wrapperTop+"px"),C.wrapperBottom>=0&&(s.style.paddingBottom=C.wrapperBottom+"px"));var l=0,c=0;C.snapGrid=[],C.slidesGrid=[];for(var u=0,d=0;d<C.slides.length;d++){var h=C.slides[d].getWidth(!0),p=C.slides[d].getHeight(!0);t.calculateHeight&&(u=Math.max(u,p));var f=z?h:p;if(t.centeredSlides){var m=d===C.slides.length-1?0:C.slides[d+1].getWidth(!0),g=d===C.slides.length-1?0:C.slides[d+1].getHeight(!0),v=z?m:g;if(f>D){for(var b=0;b<=Math.floor(f/(D+C.wrapperLeft));b++)0===b?C.snapGrid.push(l+C.wrapperLeft):C.snapGrid.push(l+C.wrapperLeft+D*b);C.slidesGrid.push(l+C.wrapperLeft)}else C.snapGrid.push(c),C.slidesGrid.push(c);c+=f/2+v/2}else{if(f>D)for(var b=0;b<=Math.floor(f/D);b++)C.snapGrid.push(l+D*b);else C.snapGrid.push(l);C.slidesGrid.push(l)}l+=f,r+=h,a+=p}t.calculateHeight&&(C.height=u),z?(S=r+C.wrapperRight+C.wrapperLeft,s.style.width=r+"px",s.style.height=C.height+"px"):(S=a+C.wrapperTop+C.wrapperBottom,s.style.width=C.width+"px",s.style.height=a+"px")}else if(t.scrollContainer){s.style.width="",s.style.height="";var y=C.slides[0].getWidth(!0),w=C.slides[0].getHeight(!0);S=z?y:w,s.style.width=y+"px",s.style.height=w+"px",k=z?y:w}else{if(t.calculateHeight){var u=0,w=0;z||(C.container.style.height=""),s.style.height="";for(var d=0;d<C.slides.length;d++)C.slides[d].style.height="",u=Math.max(C.slides[d].getHeight(!0),u),z||(w+=C.slides[d].getHeight(!0));var p=u;if(z)var w=p;D=C.height=p,z||(C.container.style.height=D+"px")}else var p=z?C.height:C.height/t.slidesPerView,w=z?C.height:C.slides.length*p;var h=z?C.width/t.slidesPerView:C.width,y=z?C.slides.length*h:C.width;k=z?h:p,t.offsetSlidesBefore>0&&(z?C.wrapperLeft=k*t.offsetSlidesBefore:C.wrapperTop=k*t.offsetSlidesBefore),t.offsetSlidesAfter>0&&(z?C.wrapperRight=k*t.offsetSlidesAfter:C.wrapperBottom=k*t.offsetSlidesAfter),t.offsetPxBefore>0&&(z?C.wrapperLeft=t.offsetPxBefore:C.wrapperTop=t.offsetPxBefore),t.offsetPxAfter>0&&(z?C.wrapperRight=t.offsetPxAfter:C.wrapperBottom=t.offsetPxAfter),t.centeredSlides&&(z?(C.wrapperLeft=(D-k)/2,C.wrapperRight=(D-k)/2):(C.wrapperTop=(D-k)/2,C.wrapperBottom=(D-k)/2)),z?(C.wrapperLeft>0&&(s.style.paddingLeft=C.wrapperLeft+"px"),C.wrapperRight>0&&(s.style.paddingRight=C.wrapperRight+"px")):(C.wrapperTop>0&&(s.style.paddingTop=C.wrapperTop+"px"),C.wrapperBottom>0&&(s.style.paddingBottom=C.wrapperBottom+"px")),S=z?y+C.wrapperRight+C.wrapperLeft:w+C.wrapperTop+C.wrapperBottom,s.style.width=y+"px",s.style.height=w+"px";var l=0;C.snapGrid=[],C.slidesGrid=[];for(var d=0;d<C.slides.length;d++)C.snapGrid.push(l),C.slidesGrid.push(l),l+=k,C.slides[d].style.width=h+"px",C.slides[d].style.height=p+"px"}C.initialized?C.callPlugins("onInit"):C.callPlugins("onFirstInit"),C.initialized=!0}},C.reInit=function(e){C.init(!0,e)},C.resizeFix=function(e){if(C.callPlugins("beforeResizeFix"),C.init(t.resizeReInit||e),t.freeMode){var i=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y");if(i<-n()){var o=z?-n():0,s=z?0:-n();C.setWrapperTransition(0),C.setWrapperTranslate(o,s,0)}}else t.loop?C.swipeTo(C.activeLoopIndex,0,!1):C.swipeTo(C.activeIndex,0,!1);C.callPlugins("afterResizeFix")},C.destroy=function(){C.browser.ie10?(C.h.removeEventListener(C.wrapper,C.touchEvents.touchStart,p,!1),C.h.removeEventListener(document,C.touchEvents.touchMove,f,!1),C.h.removeEventListener(document,C.touchEvents.touchEnd,m,!1)):(C.support.touch&&(C.h.removeEventListener(C.wrapper,"touchstart",p,!1),C.h.removeEventListener(C.wrapper,"touchmove",f,!1),C.h.removeEventListener(C.wrapper,"touchend",m,!1)),t.simulateTouch&&(C.h.removeEventListener(C.wrapper,"mousedown",p,!1),C.h.removeEventListener(document,"mousemove",f,!1),C.h.removeEventListener(document,"mouseup",m,!1))),t.autoResize&&C.h.removeEventListener(window,"resize",C.resizeFix,!1),r(),t.paginationClickable&&b(),t.mousewheelControl&&C._wheelEvent&&C.h.removeEventListener(C.container,C._wheelEvent,l,!1),t.keyboardControl&&C.h.removeEventListener(document,"keydown",a,!1),t.autoplay&&C.stopAutoplay(),C.callPlugins("onDestroy")},t.grabCursor&&(C.container.style.cursor="move",C.container.style.cursor="grab",C.container.style.cursor="-moz-grab",C.container.style.cursor="-webkit-grab"),C.allowSlideClick=!0,C.allowLinks=!0;var B,H,q,V=!1,j=!0;C.swipeNext=function(e){!e&&t.loop&&C.fixLoop(),C.callPlugins("onSwipeNext");var i=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y"),o=i;if("auto"==t.slidesPerView){for(var s=0;s<C.snapGrid.length;s++)if(-i>=C.snapGrid[s]&&-i<C.snapGrid[s+1]){o=-C.snapGrid[s+1];break}}else{var r=k*t.slidesPerGroup;o=-(Math.floor(Math.abs(i)/Math.floor(r))*r+r)}return o<-n()&&(o=-n()),o==i?!1:(g(o,"next"),!0)},C.swipePrev=function(e){!e&&t.loop&&C.fixLoop(),!e&&t.autoplay&&C.stopAutoplay(),C.callPlugins("onSwipePrev");var i,n=Math.ceil(z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y"));if("auto"==t.slidesPerView){i=0;for(var o=1;o<C.snapGrid.length;o++){if(-n==C.snapGrid[o]){i=-C.snapGrid[o-1];break}if(-n>C.snapGrid[o]&&-n<C.snapGrid[o+1]){i=-C.snapGrid[o];break}}}else{var s=k*t.slidesPerGroup;i=-(Math.ceil(-n/s)-1)*s
}return i>0&&(i=0),i==n?!1:(g(i,"prev"),!0)},C.swipeReset=function(){C.callPlugins("onSwipeReset");var e,i=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y"),o=k*t.slidesPerGroup;if(-n(),"auto"==t.slidesPerView){e=0;for(var s=0;s<C.snapGrid.length;s++){if(-i===C.snapGrid[s])return;if(-i>=C.snapGrid[s]&&-i<C.snapGrid[s+1]){e=C.positions.diff>0?-C.snapGrid[s+1]:-C.snapGrid[s];break}}-i>=C.snapGrid[C.snapGrid.length-1]&&(e=-C.snapGrid[C.snapGrid.length-1]),i<=-n()&&(e=-n())}else e=0>i?Math.round(i/o)*o:0;return t.scrollContainer&&(e=0>i?i:0),e<-n()&&(e=-n()),t.scrollContainer&&D>k&&(e=0),e==i?!1:(g(e,"reset"),!0)},C.swipeTo=function(e,i,o){e=parseInt(e,10),C.callPlugins("onSwipeTo",{index:e,speed:i}),t.loop&&(e+=C.loopedSlides);var s=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y");if(!(e>C.slides.length-1||0>e)){var r;return r="auto"==t.slidesPerView?-C.slidesGrid[e]:-e*k,r<-n()&&(r=-n()),r==s?!1:(o=o===!1?!1:!0,g(r,"to",{index:e,speed:i,runCallbacks:o}),!0)}},C._queueStartCallbacks=!1,C._queueEndCallbacks=!1,C.updateActiveSlide=function(e){if(C.initialized&&0!=C.slides.length){if(C.previousIndex=C.activeIndex,e>0&&(e=0),"undefined"==typeof e&&(e=z?C.getWrapperTranslate("x"):C.getWrapperTranslate("y")),"auto"==t.slidesPerView){if(C.activeIndex=C.slidesGrid.indexOf(-e),C.activeIndex<0){for(var i=0;i<C.slidesGrid.length-1&&!(-e>C.slidesGrid[i]&&-e<C.slidesGrid[i+1]);i++);var n=Math.abs(C.slidesGrid[i]+e),o=Math.abs(C.slidesGrid[i+1]+e);C.activeIndex=o>=n?i:i+1}}else C.activeIndex=t.visibilityFullFit?Math.ceil(-e/k):Math.round(-e/k);if(C.activeIndex==C.slides.length&&(C.activeIndex=C.slides.length-1),C.activeIndex<0&&(C.activeIndex=0),C.slides[C.activeIndex]){C.calcVisibleSlides(e);for(var s=new RegExp("\\s*"+t.slideActiveClass),r=new RegExp("\\s*"+t.slideVisibleClass),i=0;i<C.slides.length;i++)C.slides[i].className=C.slides[i].className.replace(s,"").replace(r,""),C.visibleSlides.indexOf(C.slides[i])>=0&&(C.slides[i].className+=" "+t.slideVisibleClass);if(C.slides[C.activeIndex].className+=" "+t.slideActiveClass,t.loop){var a=C.loopedSlides;C.activeLoopIndex=C.activeIndex-a,C.activeLoopIndex>=C.slides.length-2*a&&(C.activeLoopIndex=C.slides.length-2*a-C.activeLoopIndex),C.activeLoopIndex<0&&(C.activeLoopIndex=C.slides.length-2*a+C.activeLoopIndex)}else C.activeLoopIndex=C.activeIndex;t.pagination&&C.updatePagination(e)}}},C.createPagination=function(e){t.paginationClickable&&C.paginationButtons&&b();var n="",o=C.slides.length,s=o;t.loop&&(s-=2*C.loopedSlides);for(var r=0;s>r;r++)n+="<"+t.paginationElement+' class="'+t.paginationElementClass+'"></'+t.paginationElement+">";C.paginationContainer=t.pagination.nodeType?t.pagination:i(t.pagination)[0],C.paginationContainer.innerHTML=n,C.paginationButtons=[],document.querySelectorAll?C.paginationButtons=C.paginationContainer.querySelectorAll("."+t.paginationElementClass):window.jQuery&&(C.paginationButtons=i(C.paginationContainer).find("."+t.paginationElementClass)),e||C.updatePagination(),C.callPlugins("onCreatePagination"),t.paginationClickable&&y()},C.updatePagination=function(e){if(!(C.slides.length<1)){if(document.querySelectorAll)var n=C.paginationContainer.querySelectorAll("."+t.paginationActiveClass);else if(window.jQuery)var n=i(C.paginationContainer).find("."+t.paginationActiveClass);if(n){for(var o=C.paginationButtons,s=0;s<o.length;s++)o[s].className=t.paginationElementClass;var r=t.loop?C.loopedSlides:0;if(t.paginationAsRange){C.visibleSlides||C.calcVisibleSlides(e);for(var a=[],s=0;s<C.visibleSlides.length;s++){var l=C.slides.indexOf(C.visibleSlides[s])-r;t.loop&&0>l&&(l=C.slides.length-2*C.loopedSlides+l),t.loop&&l>=C.slides.length-2*C.loopedSlides&&(l=C.slides.length-2*C.loopedSlides-l,l=Math.abs(l)),a.push(l)}for(s=0;s<a.length;s++)o[a[s]]&&(o[a[s]].className+=" "+t.paginationVisibleClass);t.loop?o[C.activeLoopIndex].className+=" "+t.paginationActiveClass:o[C.activeIndex].className+=" "+t.paginationActiveClass}else t.loop?o[C.activeLoopIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass:o[C.activeIndex].className+=" "+t.paginationActiveClass+" "+t.paginationVisibleClass}}},C.calcVisibleSlides=function(e){var i=[],n=0,o=0,s=0;z&&C.wrapperLeft>0&&(e+=C.wrapperLeft),!z&&C.wrapperTop>0&&(e+=C.wrapperTop);for(var r=0;r<C.slides.length;r++){n+=o,o="auto"==t.slidesPerView?z?C.h.getWidth(C.slides[r],!0):C.h.getHeight(C.slides[r],!0):k,s=n+o;var a=!1;t.visibilityFullFit?(n>=-e&&-e+D>=s&&(a=!0),-e>=n&&s>=-e+D&&(a=!0)):(s>-e&&-e+D>=s&&(a=!0),n>=-e&&-e+D>n&&(a=!0),-e>n&&s>-e+D&&(a=!0)),a&&i.push(C.slides[r])}0==i.length&&(i=[C.slides[C.activeIndex]]),C.visibleSlides=i};var $=void 0;C.startAutoplay=function(){return"undefined"!=typeof $?!1:(t.autoplay&&!t.loop&&($=setInterval(function(){C.swipeNext(!0)||C.swipeTo(0)},t.autoplay)),t.autoplay&&t.loop&&(autoPlay=setInterval(function(){C.swipeNext()},t.autoplay)),C.callPlugins("onAutoplayStart"),void 0)},C.stopAutoplay=function(){$&&clearInterval($),$=void 0,C.callPlugins("onAutoplayStop")},C.loopCreated=!1,C.removeLoopedSlides=function(){if(C.loopCreated)for(var e=0;e<C.slides.length;e++)C.slides[e].getData("looped")===!0&&C.wrapper.removeChild(C.slides[e])},C.createLoop=function(){if(0!=C.slides.length){C.loopedSlides=t.slidesPerView+t.loopAdditionalSlides;for(var e="",i="",n=0;n<C.loopedSlides;n++)e+=C.slides[n].outerHTML;for(n=C.slides.length-C.loopedSlides;n<C.slides.length;n++)i+=C.slides[n].outerHTML;for(x.innerHTML=i+x.innerHTML+e,C.loopCreated=!0,C.calcSlides(),n=0;n<C.slides.length;n++)(n<C.loopedSlides||n>=C.slides.length-C.loopedSlides)&&C.slides[n].setData("looped",!0);C.callPlugins("onCreateLoop")}},C.fixLoop=function(){if(C.activeIndex<C.loopedSlides){var e=C.slides.length-3*C.loopedSlides+C.activeIndex;C.swipeTo(e,0,!1)}else if(C.activeIndex>C.slides.length-2*t.slidesPerView){var e=-C.slides.length+C.activeIndex+C.loopedSlides;C.swipeTo(e,0,!1)}},C.loadSlides=function(){var e="";C.activeLoaderIndex=0;for(var i=t.loader.slides,n=t.loader.loadAllSlides?i.length:t.slidesPerView*(1+t.loader.surroundGroups),o=0;n>o;o++)e+="outer"==t.loader.slidesHTMLType?i[o]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+o+'">'+i[o]+"</"+t.slideElement+">";C.wrapper.innerHTML=e,C.calcSlides(!0),t.loader.loadAllSlides||C.wrapperTransitionEnd(C.reloadSlides,!0)},C.reloadSlides=function(){var e=t.loader.slides,i=parseInt(C.activeSlide().data("swiperindex"),10);if(!(0>i||i>e.length-1)){C.activeLoaderIndex=i;var n=Math.max(0,i-t.slidesPerView*t.loader.surroundGroups),o=Math.min(i+t.slidesPerView*(1+t.loader.surroundGroups)-1,e.length-1);if(i>0){var s=-k*(i-n);z?C.setWrapperTranslate(s,0,0):C.setWrapperTranslate(0,s,0),C.setWrapperTransition(0)}if("reload"===t.loader.logic){C.wrapper.innerHTML="";for(var r="",a=n;o>=a;a++)r+="outer"==t.loader.slidesHTMLType?e[a]:"<"+t.slideElement+' class="'+t.slideClass+'" data-swiperindex="'+a+'">'+e[a]+"</"+t.slideElement+">";C.wrapper.innerHTML=r}else{for(var l=1e3,c=0,a=0;a<C.slides.length;a++){var u=C.slides[a].data("swiperindex");n>u||u>o?C.wrapper.removeChild(C.slides[a]):(l=Math.min(u,l),c=Math.max(u,c))}for(var a=n;o>=a;a++){if(l>a){var d=document.createElement(t.slideElement);d.className=t.slideClass,d.setAttribute("data-swiperindex",a),d.innerHTML=e[a],C.wrapper.insertBefore(d,C.wrapper.firstChild)}if(a>c){var d=document.createElement(t.slideElement);d.className=t.slideClass,d.setAttribute("data-swiperindex",a),d.innerHTML=e[a],C.wrapper.appendChild(d)}}}C.reInit(!0)}},_()}};Swiper.prototype={plugins:{},wrapperTransitionEnd:function(e,t){function i(){if(e(n),n.params.queueEndCallbacks&&(n._queueEndCallbacks=!1),!t)for(var r=0;r<s.length;r++)o.removeEventListener(s[r],i,!1)}var n=this,o=n.wrapper,s=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if(e)for(var r=0;r<s.length;r++)o.addEventListener(s[r],i,!1)},getWrapperTranslate:function(e){var t,i,n=this.wrapper;if(window.WebKitCSSMatrix){var o=new WebKitCSSMatrix(window.getComputedStyle(n,null).webkitTransform);t=o.toString().split(",")}else{var o=window.getComputedStyle(n,null).MozTransform||window.getComputedStyle(n,null).OTransform||window.getComputedStyle(n,null).MsTransform||window.getComputedStyle(n,null).msTransform||window.getComputedStyle(n,null).transform||window.getComputedStyle(n,null).getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");t=o.toString().split(",")}return this.params.useCSS3Transforms?("x"==e&&(i=16==t.length?parseFloat(t[12]):window.WebKitCSSMatrix?o.m41:parseFloat(t[4])),"y"==e&&(i=16==t.length?parseFloat(t[13]):window.WebKitCSSMatrix?o.m42:parseFloat(t[5]))):("x"==e&&(i=parseFloat(n.style.left,10)||0),"y"==e&&(i=parseFloat(n.style.top,10)||0)),i||0},setWrapperTranslate:function(e,t,i){var n=this.wrapper.style;e=e||0,t=t||0,i=i||0,this.params.useCSS3Transforms?this.support.transforms3d?n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform="translate3d("+e+"px, "+t+"px, "+i+"px)":(n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform="translate("+e+"px, "+t+"px)",this.support.transforms||(n.left=e+"px",n.top=t+"px")):(n.left=e+"px",n.top=t+"px"),this.callPlugins("onSetWrapperTransform",{x:e,y:t,z:i})},setWrapperTransition:function(e){var t=this.wrapper.style;t.webkitTransitionDuration=t.MsTransitionDuration=t.msTransitionDuration=t.MozTransitionDuration=t.OTransitionDuration=t.transitionDuration=e/1e3+"s",this.callPlugins("onSetWrapperTransition",{duration:e})},h:{getWidth:function(e,t){var i=window.getComputedStyle(e,null).getPropertyValue("width"),n=parseFloat(i);return(isNaN(n)||i.indexOf("%")>0)&&(n=e.offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),t&&(n+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))),n},getHeight:function(e,t){if(t)return e.offsetHeight;var i=window.getComputedStyle(e,null).getPropertyValue("height"),n=parseFloat(i);return(isNaN(n)||i.indexOf("%")>0)&&(n=e.offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),t&&(n+=parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))+parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))),n},getOffset:function(e){var t=e.getBoundingClientRect(),i=document.body,n=e.clientTop||i.clientTop||0,o=e.clientLeft||i.clientLeft||0,s=window.pageYOffset||e.scrollTop,r=window.pageXOffset||e.scrollLeft;return document.documentElement&&!window.pageYOffset&&(s=document.documentElement.scrollTop,r=document.documentElement.scrollLeft),{top:t.top+s-n,left:t.left+r-o}},windowWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:void 0},windowHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:void 0},windowScroll:function(){return"undefined"!=typeof pageYOffset?{left:window.pageXOffset,top:window.pageYOffset}:document.documentElement?{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:void 0},addEventListener:function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},removeEventListener:function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}},setTransform:function(e,t){var i=e.style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t},setTranslate:function(e,t){var i=e.style,n={x:t.x||0,y:t.y||0,z:t.z||0},o=this.support.transforms3d?"translate3d("+n.x+"px,"+n.y+"px,"+n.z+"px)":"translate("+n.x+"px,"+n.y+"px)";i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=o,this.support.transforms||(i.left=n.x+"px",i.top=n.y+"px")},setTransition:function(e,t){var i=e.style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t+"ms"},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div");return"webkitPerspective"in e.style||"MozPerspective"in e.style||"OPerspective"in e.style||"MsPerspective"in e.style||"perspective"in e.style}(),transforms:window.Modernizr&&Modernizr.csstransforms===!0||function(){var e=document.createElement("div").style;return"transform"in e||"WebkitTransform"in e||"MozTransform"in e||"msTransform"in e||"MsTransform"in e||"OTransform"in e}(),transitions:window.Modernizr&&Modernizr.csstransitions===!0||function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"MsTransition"in e||"OTransition"in e}()},browser:{ie8:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return-1!=e&&9>e}(),ie10:window.navigator.msPointerEnabled}},(window.jQuery||window.Zepto)&&function(e){e.fn.swiper=function(t){var i=new Swiper(e(this)[0],t);return e(this).data("swiper",i),i}}(window.jQuery||window.Zepto),_wAMD.define("vendor/jquery.swiper",["jquery"],function(e){return function(){var t;return t||e.Swiper}}(this)),function(e){function t(e){for(var t=1;t<arguments.length;t++)e=e.replace("%"+(t-1),arguments[t]);return e}function i(i,n){var o,s,r,a,l,c,u,d,h=e("img:first",i),p=h,f=null,m=null,g=null,v=null,b=null,y=null,w=0,_=0,M=0,C=0,x=0,k=0,S=0,T=this;setTimeout(function(){if(null===m){var e=i.width();i.parent().append(t('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >Loading...</div>',e/3,e/2-e/6)).find(":last").css("opacity",.5)}},200);var A=function(){null!==y&&(y.remove(),y=null)};this.removeBits=function(){g&&(g.remove(),g=null),v&&(v.remove(),v=null),b&&(b.remove(),b=null),A(),e(".cloud-zoom-loading",i.parent()).remove()},this.destroy=function(){i.data("zoom",null),m&&(m.unbind(),m.remove(),m=null),f&&(f.remove(),f=null),this.removeBits()},this.fadedOut=function(){f&&(f.remove(),f=null),this.removeBits()},this.controlLoop=function(){if(g){var e=c-p.offset().left-.5*a>>0,t=u-p.offset().top-.5*l>>0;0>e?e=0:e>p.outerWidth()-a&&(e=p.outerWidth()-a),0>t?t=0:t>p.outerHeight()-l&&(t=p.outerHeight()-l),g.css({left:e,top:t}),g.css("background-position",-e+"px "+-t+"px"),M=e/p.outerWidth()*r.width>>0,C=t/p.outerHeight()*r.height>>0,k+=(M-k)/n.smoothMove,x+=(C-x)/n.smoothMove,f.css("background-position",-(k>>0)+"px "+(-(x>>0)+"px"))}w=setTimeout(function(){T.controlLoop()},30)},this.init2=function(e,t){S++,1===t&&(r=e),2===S&&this.init()},this.init=function(){e(".cloud-zoom-loading",i.parent()).remove(),m=e(".mousetrap",i.parent()),m&&(m.unbind(),m.remove()),m=i.parent().append(t("<div class='mousetrap' style='background-image:url(\"//"+ASSETS_BASE+"/images/blank.gif\");z-index:2;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;'></div>",p.outerWidth(),p.outerHeight(),0,0)).find(":last"),m.bind("mousemove",this,function(e){c=e.pageX,u=e.pageY}),m.bind("mouseleave",this,function(){return clearTimeout(w),clearTimeout(_),g&&g.fadeOut(299),v&&v.fadeOut(299),b&&b.fadeOut(299),f&&f.fadeOut(300,function(){T.fadedOut()}),!1});var o=i.attr("href"),s=i.find("img").attr("src");o!=s&&m.bind("mouseenter",this,function(o){_=setTimeout(function(){d=o.data,f&&(f.stop(!0,!1),f.remove());var s=n.adjustX,c=n.adjustY,u=p.outerWidth(),w=p.outerHeight(),_=n.zoomWidth,M=n.zoomHeight;"auto"==n.zoomWidth&&(_=u),"auto"==n.zoomHeight&&(M=w);var C=i.parent();switch(n.position){case"top":c-=M;break;case"right":s+=u;break;case"bottom":c+=w;break;case"left":s-=_;break;case"inside":_=u,M=w;break;default:C=e("#"+n.position),C.length?(_=C.innerWidth(),M=C.innerHeight()):(C=i,s+=u,c+=w)}f=C.append(t('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none;position:absolute;left:%0px;top:%1px;width:%2px;height:%3px;background-image:url(\'%4\');z-index:1;"></div>',s,c,_,M,r.src)).find(":last"),h.attr("title")&&n.showTitle&&f.append(t('<div class="cloud-zoom-title">%0</div>',h.attr("title"))).find(":last").css("opacity",n.titleOpacity),e.browser.msie&&e.browser.version<7&&(y=e('<iframe frameborder="0" src="#"></iframe>').css({position:"absolute",left:s,top:c,zIndex:1,width:_,height:M}).insertBefore(f)),f.fadeIn(500),g&&(g.remove(),g=null),a=p.outerWidth()/r.width*f.width(),l=p.outerHeight()/r.height*f.height(),g=i.append(t("<div class = 'cloud-zoom-lens' style='display:none;z-index:98;position:absolute;width:%0px;height:%1px;'></div>",a,l)).find(":last"),m.css("cursor",g.css("cursor"));var x=!1;n.tint&&(g.css("background",'url("'+h.attr("src")+'")'),v=i.append(t('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />',p.outerWidth(),p.outerHeight(),n.tint)).find(":last"),v.css("opacity",n.tintOpacity),x=!0,v.fadeIn(500)),n.softFocus&&(g.css("background",'url("'+h.attr("src")+'")'),b=i.append(t('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />',p.outerWidth()-2,p.outerHeight()-2,n.tint)).find(":last"),b.css("background",'url("'+h.attr("src")+'")'),b.css("opacity",.5),x=!0,b.fadeIn(500)),x||g.css("opacity",n.lensOpacity),"inside"!==n.position&&g.fadeIn(500),d.controlLoop()},250)})},o=new Image,e(o).load(function(){T.init2(this,0)}),o.src=h.attr("src"),s=new Image,e(s).load(function(){T.init2(this,1)}),s.src=i.attr("href")}e.fn.CloudZoom=function(t){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}return this.each(function(){var n,o=e(this);if(o.is(".cloud-zoom")){o.css({position:"relative",display:"block"}),e("img",o).css({display:"block"}),"cloudzoom-wrap"!=e(this).parent().attr("id")&&e(this).wrap('<div id="cloudzoom-wrap" style="top:0px;position:relative;"></div>'),n=e.extend({},e.fn.CloudZoom.defaults,t);var s={adjustX:"int",adjustY:"int",zoomWidth:"int",zoomHeight:"int",position:"string",tint:"string",tintOpacity:"float",lensOpacity:"float",softFocus:"bool",smoothMove:"int",showTitle:"bool",titleOpacity:"float"};for(var r in s){var a=e(this).attr("data-"+r);if(a)switch(s[r]){case"int":case"float":n[r]=Number(a);break;case"bool":n[r]=Boolean(a);break;case"string":default:n[r]=a}}e(this).data("zoom",new i(e(this),n))}else e(this).is(".cloud-zoom-gallery")&&(n=e.extend({},{useZoom:e(this).attr("data-zoom-id"),smallImage:e(this).attr("data-small-image")},t),e(this).data("relOpts",n),e(this).bind("click",e(this),function(t){var i=t.data,o=i.data("relOpts");return e("#"+o.useZoom+" div.wsite-show").add("#"+o.useZoom+" div.wsite-show-init"),e("#"+o.useZoom).data("zoom").destroy(),e("#"+o.useZoom).attr("href",i.attr("href")),e("#"+o.useZoom+" img").attr("src",o.smallImage),e("#"+o.useZoom).CloudZoom(n),!1}))}),this},e.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:!1,tintOpacity:.5,lensOpacity:.5,softFocus:!1,smoothMove:3,showTitle:!0,titleOpacity:.5,adjustX:0,adjustY:0}}(jQuery),_wAMD.define("vendor/cloud-zoom.1.0.2",function(){}),function(e){var t;return e.event.fix=function(e){return function(t){return t=e.apply(this,arguments),(0===t.type.indexOf("copy")||0===t.type.indexOf("paste"))&&(t.clipboardData=t.originalEvent.clipboardData),t}}(e.event.fix),t={callback:e.noop,matchType:/image.*/},e.fn.pasteImageReader=function(i){return"function"==typeof i&&(i={callback:i}),i=e.extend({},t,i),this.each(function(){var t,n;return n=this,t=e(this),t.bind("paste",function(e){var t,o;return o=!1,t=e.clipboardData?e.clipboardData:!1,t!==!1?Array.prototype.forEach.call(t.types,function(e,s){var r,a;if(!o)return e.match(i.matchType)||t.items[s].type.match(i.matchType)?(r=t.items[s].getAsFile(),a=new FileReader,a.onload=function(e){return i.callback.call(n,{dataURL:e.target.result,event:e,file:r,name:r.name})},a.readAsDataURL(r),o=!0):void 0}):void 0})})}}(jQuery),_wAMD.define("vendor/jquery.pasteImageReader",function(){}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wInput",["jquery"],e):e(window.jQuery)}(function(e){function t(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if("undefined"==typeof e.fn.wRadio&&"undefined"==typeof e.fn.wCheckbox&&"undefined"==typeof e.fn.wToggle){var i,n,o,s;i=t(Object,{inputName:"winput",bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(e){this.initializing=!0,this.opts=e=this.prepareOpts(e),e.element.data(this.inputName)&&this.destroy(),this.container=this.createContainer();var t=e.element.prop("checked")||e.element.prop("defaultChecked");t&&(this.opts.element.removeAttr("checked"),this.check());var i=e.element.prop("readonly");void 0===i&&(i=!1),this.readonly(i);var n=e.element.prop("disabled");void 0===n&&(n=!1),this.enable(!n),this.initContainer(),this.initializing=!1},initContainer:function(){this._tabindex=this.opts.element.attr("tabindex"),this.opts.element.addClass("w-input-offscreen").data(this.inputName,this).before(this.container).attr("tabindex","-1"),this.container.data(this.inputName,this).attr("tabindex",this._tabindex||0),this.container.on("keypress."+this.inputName,this.bind(function(e){32===e.which&&(this.toggleCheck(),e.preventDefault())})),this.opts.element.on("change",this.bind(function(e){var t=e.currentTarget.checked;e.internal||this.assign(t)}))},prepareOpts:function(e){return e},updateInterface:function(){var e=!this._readonly&&!!this._enabled;return this._enabledInterface===e?!1:(this._enabledInterface=e,this.container.toggleClass("disabled",!e),e)},readonly:function(e){return void 0===e&&(e=!1),this._readyonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.updateInterface(),e)},enable:function(e){return void 0===e&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.updateInterface(),e)},disable:function(){return this.enable(!1)},uncheck:function(){return this.checking(!1)},check:function(){return this.checking(!0)},checking:function(e){return this.opts.element.prop("defaultChecked")||this.opts.element.prop("checked")!==e?(this.assign(e),!0):!1},assign:function(e){return this._readonly===!0||this._enabled===!1?!1:(this.opts.element.prop("checked",e),this.opts.element.closest("label.box").toggleClass("checked",e),this.container.toggleClass("checked",e),void 0)},toggleCheck:function(){this.opts.element.prop("checked")?this.uncheck():this.check()},reset:function(){var e=this.opts.element.prop("checked")||this.opts.element.prop("defaultChecked");this.opts.element.prop("checked",e),this.container.toggleClass("checked",e)},destroy:function(){var e=this.opts.element.data(this.inputName);void 0!==e&&(e.container.remove(),e.opts.element.attr("tabindex",this._tabindex).removeData(this.inputName).removeClass("w-input-offscreen")),this.opts.element.off("."+this.inputName)}}),n=t(i,{inputName:"wcheckbox",prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return e},createContainer:function(){var t=e(document.createElement("span")).addClass("w-checkbox-container");return t},initContainer:function(){this.parent.initContainer.apply(this,arguments),this.container.on("click."+this.inputName,this.bind(function(e){e.preventDefault(),e.stopPropagation(),this.toggleCheck()}))},checking:function(){var t=e.Event("change",{internal:!0});this.parent.checking.apply(this,arguments),this.initializing||this.opts.element.trigger(t)}}),o=t(i,{inputName:"wtoggle",prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return e},createContainer:function(){var t=e(document.createElement("span")).addClass("w-toggle-container");return t},initContainer:function(){this.parent.initContainer.apply(this,arguments),this.container.on("click."+this.inputName,this.bind(function(e){e.preventDefault(),e.stopPropagation(),this.toggleCheck()}))},checking:function(){var t=e.Event("change",{internal:!0});this.parent.checking.apply(this,arguments),this.initializing||this.opts.element.trigger(t)}}),s=t(i,{inputName:"wradio",prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return e},createContainer:function(){var t=e(document.createElement("span")).addClass("w-radio-container");return t},initContainer:function(){this.parent.initContainer.apply(this,arguments),this.initSet(),this.container.on("click."+this.inputName,this.bind(function(t){t.preventDefault(),t.stopPropagation(),this.check(),this._readonly!==!0&&this._enabled!==!1&&this.opts.element.trigger(e.Event("click"))})),label=this.opts.element.closest("label"),0===label.length&&(label=e("label[for="+this.opts.element.attr("id")+"]")),label.on("click."+this.inputName,this.bind(function(e){e.preventDefault(),e.stopPropagation(),this.check()})),this.opts.label=label},check:function(){return this.opts.element.prop("checked")?void 0:(this._enabled&&!this._readonly&&this.uncheckAll(),this.parent.check.apply(this,arguments))},initSet:function(){var t=this.opts.element.closest("form"),i=this.opts.element.attr("name");if(t.length||i){inputs=t.length>0?t.find("input[type=radio][name="+i+"]"):e("input[type=radio][name="+i+"]");for(var n=[],o=0;o<inputs.length;o++)inputs.eq(o).data(this.inputName)&&n.push(inputs.eq(o).data(this.inputName));for(var o=0;o<n.length;o++)n[o]._set=n;this._set=n,inputs.off("reread").on("reread",this.bind(this.resetAll))}},resetAll:function(){for(var e=this._set,t=e.length,i=0;t>i;i++)e[i].reset()},uncheckAll:function(){void 0===this._set&&this.initSet();for(var e=0;e<this._set.length;e++)this._set[e].uncheck()},toggleCheck:function(){this.uncheckAll(),this.parent.toggleCheck.apply(this,arguments)},checking:function(t){if(this.initializing)return this.parent.checking.apply(this,arguments);if(!this._readonly&&this._enabled){var i=this.opts.element.prop("checked"),n=this.parent.checking.apply(this,arguments),o=i!==n;return o&&t&&this.opts.element.trigger(e.Event("change")),n}},destroy:function(){var e=this.opts.element.data(this.inputName);void 0!==e&&e.opts.label.off("."+this.inputName),this.parent.destroy.apply(this,arguments)}}),e.fn.wCheckbox=function(){var t,i,o=Array.prototype.slice.call(arguments,0),s=["check","uncheck","toggleCheck","enable","disable","readonly","destroy"];return this.each(function(r,a){if(0===o.length||"object"==typeof o[0]){if(i=0===o.length?{}:e.extend({},o[0]),"input"!==a.tagName.toLowerCase()||"checkbox"!==a.type.toLowerCase())throw"Invalid input, wCheckbox only allowed for checkboxes";i.element=e(a),t=new n,t.init(i)}else{if("string"!=typeof o[0])throw"Invalid arguments to wCheckbox: "+o;if(method=o[0],radio=e(a).data("wcheckbox"),-1===e.inArray(method,s))throw"Method not found: "+method;if(void 0===radio)throw"Element is not a wCheckbox element";radio[method].apply(radio,o.slice(1))}}),this},e.fn.wToggle=function(){var t,i,n=Array.prototype.slice.call(arguments,0),s=["check","uncheck","toggleCheck","enable","disable","readonly","destroy"];return this.each(function(r,a){if(0===n.length||"object"==typeof n[0]){if(i=0===n.length?{}:e.extend({},n[0]),"input"!==a.tagName.toLowerCase()||"checkbox"!==a.type.toLowerCase())throw"Invalid input, wToggle only allowed for checkboxes";i.element=e(a),t=new o,t.init(i)}else{if("string"!=typeof n[0])throw"Invalid arguments to wToggle: "+n;if(method=n[0],radio=e(a).data("wtoggle"),-1===e.inArray(method,s))throw"Method not found: "+method;if(void 0===radio)throw"Element is not a wToggle element";radio[method].apply(radio,n.slice(1))}}),this},e.fn.wRadio=function(){var t,i,n,o=Array.prototype.slice.call(arguments,0),r=["check","uncheck","enable","disable","readonly","destroy"];return this.each(function(a,l){if(0===o.length||"object"==typeof o[0])if(n=0===o.length?{}:e.extend({},o[0]),"input"===l.tagName.toLowerCase()&&"radio"===l.type.toLowerCase())n.element=e(l),i=new s,i.init(n);else{if("form"!==l.tagName.toLowerCase())throw"Invalid element, wRadio only allowed for radios and forms with radios";e(l).find("input[type=radio]").each(function(){e(this).wRadio()})}else{if("string"!=typeof o[0])throw"Invalid arguments to wRadio: "+o;if(t=o[0],i=e(l).data("wradio"),-1===e.inArray(t,r))throw"Method not found: "+t;if(void 0===i)throw"Element is not a wRadio element";i[t].apply(i,o.slice(1))}}),this}}}),_wAMD.define("editor/app",["backbone-all","jquery"],function(e,t){var i=new e.Marionette.Application,n=!1;return i.addRegions({nav:"#w-editor-top",pages:"#pageManager",platformElementSettings:"#platformElementSettings"}),i.navigate=function(t,i){i=i||{},n&&e.history.navigate(t,i)},i.getCurrentRoute=function(){return n?e.history.fragment:""},i.on("initialize:after",function(){n&&(e.history.start(),""===i.getCurrentRoute()&&i.vent.trigger("build:desktop")),i.vent.triggerCascade=function(e){for(var t=e?e.split(":"):[],n="",o=Array.prototype.slice.apply(arguments),s=0,r=t.length;r>s;s++)n=n?n+":"+t[s]:t[s],o[0]=n,i.vent.trigger.apply(i.vent,o)},i.vent.on({"editor:toolbar:collapse":function(){i.vent.trigger("editor:toolbar:toggleCollapse",!0)},"editor:toolbar:uncollapse":function(){i.vent.trigger("editor:toolbar:toggleCollapse",!1)},"editor:toolbar:toggleCollapse":function(e){t(document.body).toggleClass("editor-collapsed",e)},"editor:toolbar:show":function(){i.vent.trigger("editor:toolbar:toggle",!0)},"editor:toolbar:hide":function(){i.vent.trigger("editor:toolbar:toggle",!1)},"editor:toolbar:toggle":function(e){t(document.body).toggleClass("editor-revealed",e)}}),i.reqres.setHandlers({"editor:toolbar:isCollapsed":function(){return/editor-collapsed/.test(document.body.className)},"editor:toolbar:isRevealed":function(){return/editor-revealed/.test(document.body.className)},"editor:toolbar:isHidden":function(){var e=i.reqres;return e.request("editor:toolbar:isCollapsed")&&e.request("editor:toolbar:isRevealed")}})}),window.editorApp=i,i}),_wAMD.define("editor/collection/_baseCollection",["jquery","underscore","backbone","backbone-pageable","backbone-relational"],function(e,t,i,n){var o=window,s=n,r=s.prototype,a={};i.Relational.store.addModelScope(a);var l=s.extend({_class:this.className,userKey:"owner_id",initialize:function(i,n){n=e.extend({view:"list"},n);var o=this.fetchOptions=t.pick(n,"filter","sort","searchText","view");return this.constructor.addSiteFilter(o),r.initialize.apply(this,arguments)},fetch:function(t){return t=e.extend({},this.fetchOptions,t),r.fetch.call(this,t)},setSearchText:function(e){this.fetchOptions.searchText=e||null},state:{pageSize:25},queryParams:{pageSize:"limit",totalRecords:"total"},parseState:function(e){return{totalRecords:e.total}},parseRecords:function(e){return e.data},parseLinks:function(e){var t=this.state,i=t.currentPage,n=t.pageSize*i;return{first:"#1",prev:i>1?"#"+(i-1):!1,next:n<e.total?"#"+(i+1):!1}}},{addSiteFilter:function(e){e.filter||(e.filter=[]),t.findWhere(e.filter,{property:this.prototype.userKey})||e.filter.push({property:this.prototype.userKey,value:e.user_id||o.com_userID}),t.findWhere(e.filter,{property:"site_id"})||e.filter.push({property:"site_id",value:e.site_id||o.com_currentSite})},count:function(t){t=e.extend({},t),this.addSiteFilter(t);var i=this.prototype.useServerGeneratedDefaultsFor;return this.prototype.rpcSource[i].count(t)}});return l.extendBase=function(e){return s.extend.call(this,e)},l.extend=function(e,i,n){var o={};!n&&Weebly.Editor&&(n=Weebly.Editor.BackboneCollectionData),n&&(o=n[e.useServerGeneratedDefaultsFor]);var r=s.extend.call(this,t.extend(e,o),i),l=e._class;
return l&&(l=l.split("."),l=l[l.length-1],a[l+"Collection"]=r),r},l}),_wAMD.define("commerce/editor/collection/_baseCommerceCollection",["editor/collection/_baseCollection","editor/commerce-init"],function(e){var t=e.extendBase({className:"Commerce.Collection._baseCommerceCollection",rpcSource:Weebly.Commerce.RPC,userKey:"owner_id"});return t.extend=function(t,i){return e.extend.call(this,t,i,window.Weebly.Commerce.BackboneCollectionData)},t}),_wAMD.define("editor/model/_baseModel",["jquery","underscore","backbone-all","editor/app","../collection/_baseCollection"],function(e,t,i,n,o){var s=window,r=i.RelationalModel,a=r.prototype,l=i.RelationalModel.extend({_class:this.className,baseCollection:o,syncEventAggregator:n,unbatchRelatedModels:[],userKey:"owner_id",pageDirtyCheck:function(){return!0},fetch:function(e){return e=t.defaults(e||{},{limit:1,single:!0,view:"detail"}),a.fetch.call(this,e)},parse:function(e){return e&&e.data?e.data:e},sync:function(e,t){var i=e+":"+this.useServerGeneratedDefaultsFor.toLowerCase();l.vent.trigger(i,t),"read"!=e&&this.pageDirtyCheck()&&(n.isPageDirty=!0);var o=arguments,s=t.useServerGeneratedDefaultsFor.toLowerCase(),r=a.sync.apply(this,arguments);return this.syncEventAggregator&&this.syncEventAggregator.trigger(s+":"+e,r,o),r},clone:function(){var e=a.clone.apply(this,arguments);return e.set("updated_date",null),e.set("created_date",null),e},cloneDeep:function(){return this.clone()},cloneDeepCollection:function(e,t,i){var n=[];this.get(e).each(function(e){n.push(e.cloneDeep())}),i||(i=this.baseCollection),t.set(e,new i(n))},fetchChildRelation:function(e){var t=this,i=this.getRelation(e),n=this.get(e),o=i.options.foreignKey;this.get(l);var s,r=[],a=o.length;for(s=0;a>s;s++){var l=o[s];r.push({property:l,value:t.get(l)})}return n.fetchOptions.filter=r,n.fetch()},getRelated:function(i,n,o,s,r){var a=this,l=a.get(i),c=o.prototype.model,u=new o,d=function(e){var t={};return t[n]=e,c.findOrCreate(t)};s&&(u.comparator=function(e){return t.indexOf(a.get(s),e.get(n))},u.listenTo(a,"change:"+s,function(){u.sort()}));var h=!0;a.on("change:"+i,function(e,n){if(!h){h=!0;var o=n||[],s=a.previous(i)||[],r=t.difference(o,s),l=t.difference(s,o);t.each(r,function(e){u.add(d(e))}),t.each(l,function(e){u.remove(d(e))}),h=!1}}),a.listenTo(u,"add remove destroy",function(){h||(h=!0,a.set(i,u.pluck(n)),h=!1)}),t.each(l,function(e){u.add(d(e))});var p=e.Deferred();if(t.contains(a.unbatchRelatedModels,c.prototype._class))p.resolve(u),h=!1;else{var f=50;r=r||"detail";var m=function(i){if(i>u.length)h=!1,p.resolve(u);else{var n=u.slice(i,i+f),o=t.map(n,function(e){return e.fetch({view:r})});e.when.apply(e,o).done(function(){p.notify((i+o.length)/u.length),m(i+f)})}};m(0)}return p.promise()}},{vent:t.extend({},i.Events),findOrCreate:function(e,i){return e=t.defaults(e||{},t.pick(this.prototype.defaults,this.prototype.userKey,"site_id")),r.findOrCreate.call(this,e,i)},getID:function(e){var i=this.prototype,n=i.idAttribute,o=i.useServerGeneratedDefaultsFor.toLowerCase();return t.isObject(e)?e._class?e.get(n):e[n]?e[n]:e[o]?e[o].get(n):!1:e}});return l.setSyncEventAggregator=function(e){l.prototype.syncEventAggregator=e},l.extendBase=function(e){return i.RelationalModel.extend.call(this,e)},l.extend=function(e,n,o,r){var a={};o&&(a=o[e.useServerGeneratedDefaultsFor]);var l=i.RelationalModel.extend.call(this,t.extend(e,a),n),c={site_id:s.com_currentSite,updated_date:null,created_date:null};return c[r]=s.com_userID,l.prototype.defaults||(l.prototype.defaults={}),t.extend(l.prototype.defaults,c),l.prototype.validation&&t.each(l.prototype.validation,function(e){if(e&&e.requiredIf){var i=e.requiredIf;delete e.requiredIf;var n=e.required;e.required=function(){return n||t.result(this,i)}}}),l},l}),_wAMD.define("commerce/editor/model/_baseCommerceModel",["editor/app","editor/model/_baseModel","commerce/editor/collection/_baseCommerceCollection"],function(e,t,i){var n=t.extendBase({className:"Commerce.Model._baseCommerceModel",unbatchRelatedModels:["Commerce.Model.Category"],baseCollection:i,userKey:"owner_id",pageDirtyCheck:function(){return e.isStorePanelOpen}});return n.extend=function(e,i){return t.extend.call(this,e,i,window.Weebly.Commerce.BackboneModelData,"owner_id")},e.commerce?n.setSyncEventAggregator(e.commerce):e.once("commerce:ready",function(){n.setSyncEventAggregator(e.commerce)}),n}),_wAMD.define("util/ui/ImageAspectRatio",["jquery","mustache","backbone-all"],function(e,t,i){function n(t,n,l,d,h){var p,f,m,g=Math.floor(16777216*(1+Math.random())).toString(16).substring(1);if(h=h||n.regenerate&&n.regenerate.bind(n),"string"==typeof n)f=a(n.replace("{size}",l)),m=o(t,f,l,d,h);else if(n instanceof i.Model)l=n.getMaxAvailableWidth(l),f=a(n.uri(l)),p=Math.round(1e4*(n.get("width")/n.get("height")))/1e4;else{if(n.hasOwnProperty("width")){var v=parseInt(n.width);l>v&&(l=v)}f=a(n.url.replace("{size}",l)),p=Math.round(1e4*(n.width/n.height))/1e4}if(p){var b=s(p,d),y=0;if(c())m=u(t,f);else{var w=r(t,b),_=e("<div>").append(w);_.find("img").attr("id",g).error(function(){y++,10==y&&h&&h(),e("#"+g).attr("src","//"+ASSETS_BASE+"/images/blank.gif").addClass("image-waiting"),60>y&&setTimeout(function(){_.find("img").attr("src",f)},2500)}).load(function(){e("#"+g).attr("src",f).removeClass("image-waiting")}).attr("src",f),m=_.html()}}return m}function o(t,i,n,o,r){var a=Math.floor(16777216*(1+Math.random())).toString(16).substring(1),c=i.replace("{size}",n),u=new Image;return e(u).on("load",function(){var e=Math.round(1e4*(this.width/this.height))/1e4,i=s(e,o);l(t,i,c,r,a)}),u.src=i,'<div id="'+a+'" class="aspectratio-image-loading"></div>'}function s(e,t){return e>t?(imagePercentWidth=(100*(e/t)).toFixed(2),imagePercentTop=0,imagePercentLeft=-(100*((e/t-1)/2)).toFixed(2)):(imagePercentWidth=100,imagePercentTop=-(100*((t/e-1)/2)).toFixed(2),imagePercentLeft=0),{width:imagePercentWidth,top:imagePercentTop,left:imagePercentLeft}}function r(e,t){return h({classPrefix:e,imagePercentWidth:t.width,imagePercentTop:t.top,imagePercentLeft:t.left})}function a(e){var t=e,i="/"==e.charAt(0),n=e.indexOf("://")>=0;return i||n||(t="//"+e),t}function l(t,i,n,o,s,a){var d=e("#"+s),h=0;if(d.length>0)if(d.removeClass("aspectratio-image-loading"),c()){var p=u(t,n);d.html(p)}else{var p=r(t,i);d.html(p),d.find("img").error(function(){h++,o&&o(),$html.find("img").hide(),60>h&&setTimeout(function(){$html.find("img").attr("src",n+"?"+Date.now()).show()},2500)}).attr("src",n)}else setTimeout(function(){5>a&&(a=(a||0)+1,l(t,i,n,o,s,a))},50)}function c(){var e=window.CSS&&window.CSS.supports("background-size","cover");if(!e){var t=document.createElement("div");return t.style.backgroundSize="cover","cover"==t.style.backgroundSize}return!1}function u(e,t){var i='<span class="wsite-css-sizer '+e+'-sizer"></span>';return'<div class="wsite-css-aspect '+e+'-css-aspect" style="background-image: url('+t+');">'+i+"</div>"}var d='<div class="{{classPrefix}}-image-container wsite-imageaspectratio-image-container">';d+='  <div class="{{classPrefix}}-image-height   wsite-imageaspectratio-image-height"></div>',d+='    <div class="{{classPrefix}}-image-wrap     wsite-imageaspectratio-image-wrap">',d+='    <img class="{{classPrefix}}-image         wsite-imageaspectratio-image" style="width:{{imagePercentWidth}}%;top:{{imagePercentTop}}%;left:{{imagePercentLeft}}%" />',d+="  </div>",d+="</div>";var h=t.compile(d);return n}),_wAMD.define("commerce/editor/model/CategoryImage",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"CategoryImage",getMaxAvailableWidth:function(e){return e=parseInt(e,10)||this.get("width"),this.get("width")<e?this.get("width"):e},uri:function(e){e=e?e:"{size}";var t=this.attributes;if(!t.site_category_image_id)return t.uri;"{size}"!=e&&e>parseInt(this.get("width"))&&(e=parseInt(this.get("width")));var i="s"+t.site_id+"_c"+t.site_category_id+"_i"+t.site_category_image_id+"_w"+e+"."+t.format;return"/uploads/"+editorApp.commerce.storefrontSettings.get("upload_uid_location")+"/"+i},regenerate:function(){var e=this;e.rpc.resize.call(e,e.get("owner_id"),e.get("site_id"),e.get("site_category_id"),e.get("site_category_image_id"))}})}),_wAMD.define("commerce/editor/collection/CategoryImage",["underscore","./_baseCommerceCollection","../model/CategoryImage"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"CategoryImage"},{})}),_wAMD.define("commerce/editor/model/Category",["jquery","util/ui/ImageAspectRatio","./_baseCommerceModel","../collection/CategoryImage"],function(e,t,i){var n=i,o=n.prototype,s=n.extend({useServerGeneratedDefaultsFor:"Category",thumbnail:function(e){var i,n;return i=editorApp.commerce.storefrontSettings.getRatioAsNumber("product_image_ratio"),n=this.getFirstImage()||"//"+ASSETS_BASE+"/images/util/blank-category-w{size}.png",e=e||80,t("entity-list",n,e,i)},getFirstImage:function(){var e=this.getOrderedImages();return e[0]||null},getOrderedImages:function(){var e=this.get("images"),t=this.get("image_order")||[],i=[],n=[];return e.each(function(e){var o=e.get("site_category_image_id"),s=-1;t.each(function(t,r){t==o&&(s=r),-1==s?n.push(e):i[s]=e})}),i.concat(n)},get:function(e){return"products"==e?this.getRelated("product_ids","site_product_id",require("commerce/editor/collection/Product"),"preferred_order_product_ids","list"):"coupons"==e?this.getRelated("coupon_ids","site_coupon_id",require("commerce/editor/collection/Coupon")):o.get.apply(this,arguments)}});return s}),_wAMD.define("commerce/editor/collection/Category",["jquery","./_baseCommerceCollection","../model/_baseCommerceModel","../model/Category"],function(e,t,i,n){var o=t,s=o.prototype,r=o.extend({model:n,useServerGeneratedDefaultsFor:"Category",fetch:function(e){e=e||{},e.force&&delete r._fetchPromise;var t=this,i=r._fetchPromise;return i?i.done(function(){t.reset(a.models)}):(i=r._fetchPromise=s.fetch.apply(t,arguments),i.done(function(e){a.reset(e.data)})),i},state:{pageSize:null}},{count:function(){var t=e.Deferred(),i=new r;return i.fetch().done(function(){t.resolve(i.length)}),t.promise()}}),a=new r;return i.vent.on({"create:category":function(e){a.add(e)},"delete:category":function(e){a.remove(e)}}),r}),function(e){e.Commerce.Editor||(e.Commerce.Editor={}),e.Commerce.Editor.Pages||(e.Commerce.Editor.Pages={}),e.Commerce.Editor.Pages.View||(e.Commerce.Editor.Pages.View={});var t=e.Commerce.Editor,i=t.Pages.View;_wAMD.require(["jquery","editor/app","commerce/editor/collection/Category"],function(t,n,o){i.PageTypeStorefrontLink={initialize:function(){var e=this;e.storefrontCategoryId=n.commerce.storefrontSettings.get("storefront_category_id"),e.initialized||(e.initialized=!0,e.ui={pageHide:t("#pageManagerHide"),addPage:t("#pageManagerAddStore")},e.allCategories=new o,e.update())},update:function(){var e=this;e.fetchPromise=e.allCategories.fetch().done(function(){e.storefrontCategory=e.allCategories.findWhere({site_category_id:e.storefrontCategoryId})})},updatePage:function(e){var t=this;return t.fetchPromise.done(function(){e.layout=t.storefrontCategory.get("page_layout")})},setLayout:function(e,t){var i=this;i.fetchPromise.done(function(){i.storefrontCategory.set("page_layout",t),i.storefrontCategory.commit()})},select:function(e){var t=this;t.ui.pageHide.toggle("category"==e.store_page_kind&&e.store_page_kind_id==t.storefrontCategoryId)},available:function(){var i=t.Deferred(),n=this;if(e.COMMERCE_ENABLED&&"no"!=n.ui.addPage.data("enabled")){var o=!1;t.each(e.PageManager.topLevelPages,function(t,i){"category"==i.store_page_kind&&i.store_page_kind_id==e.PageManager.storefrontId&&(o=!0)}),i.resolve(!o)}else i.resolve(!1);return i.promise()},toggleAddPage:function(){var e=this;e.ui.addPage.hide(),e.available().done(function(t){e.ui.addPage.toggle(t)})}}})}(Weebly),_wAMD.define("commerce/editor/view/pages/PageTypeStorefrontLink",function(){}),_wAMD.define("commerce/editor/model/CategoryHierarchy",["jquery","underscore","editor/app","./_baseCommerceModel","./Category","../collection/Category"],function(e,t,i,n,o,s){var r,a=n,l=a.prototype;return n.vent.on("create:category delete:category",function(){r=!1}),a.extend({defaults:{hierarchy:[]},idAttribute:"site_id",fetch:function(e){if(e=e||{},e.force&&(r=!1),r){var t=this;r.done(function(e){t.set("hierarchy",e)})}else r=l.fetch.apply(this,arguments);return r},sync:function(e,t,n){var o;switch(e){case"update":case"patch":r=!1,o=i.commerce.RPC.Category.saveHierarchy(window.com_userID,window.com_currentSite,t.get("hierarchy")).done(function(){n.success&&n.success()});break;case"read":o=i.commerce.RPC.Category.getHierarchy(window.com_userID,window.com_currentSite).done(function(e){n.success&&n.success({hierarchy:e})})}return o},find:function(e){for(var t,i=this.get("hierarchy"),n=[i[0]];n.length;){if(t=n.shift(),t.id==e)return t;n.push.apply(n,t.children)}return!1},addCategory:function(e,t){var i=this.find(t?t.get("site_category_id"):"1");i&&(i.children.push({id:e.get("site_category_id"),children:[]}),this.trigger("change:hierarchy"),this.trigger("change"))},removeCategory:function(e){var i=this.get("hierarchy"),n=function(e,i){e.children=t.reject(e.children,function(e){return e.id==i}),t.each(e.children,function(e){n(e,i)})};n(i[0],e.get("site_category_id")),this.trigger("change:hierarchy"),this.trigger("change")},ancestors:function(i){var n,o,r,a,l=[],c=!1;for(t.each(this.get("hierarchy")[0].children,function(e){l.push([e])});l.length;){if(o=l.shift(),r=t.last(o),r.id==i){c=o;break}for(n=0;n<r.children.length;n++)a=t.clone(o),a.push(r.children[n]),l.push(a)}var u=e.Deferred(),d=[],h=new s;return h.fetch().done(function(){c&&t.each(c,function(e){var t=h.findWhere({site_category_id:e.id});d.push(t)}),d.length?u.resolve(new s(d)):u.reject()}),u.promise()}})}),function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var i=e([0]),n=-1,o=this.length;++n<o&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){function i(e){var t,i,n,o;if(!e||e.length<1)return e;for(t="",i=0,n=e.length;n>i;i++)o=e.charAt(i),t+=L[o]||o;return t}function n(e,t){for(var i=0,n=t.length;n>i;i+=1)if(s(e,t[i]))return i;return-1}function o(){var t=e(N);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function s(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function r(t,i){var n,o,s;if(null===t||t.length<1)return[];for(n=t.split(i),o=0,s=n.length;s>o;o+=1)n[o]=e.trim(n[o]);return n}function a(e){return e.outerWidth(!1)-e.width()}function l(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var o=e.data(i,n);o!==t&&i.val()!==o&&(e.removeData(i,n),i.trigger("keyup-change"))})}function c(i){i.on("mousemove",function(i){var n=I;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function u(e,i,n){n=n||t;var o;return function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,t)},e)}}function d(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function h(e,t){var i=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){n(e.target,t.get())>=0&&i(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),i=o.text.length-n}return{offset:i,length:n}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!O){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);O=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),O.attr("class","select2-sizer"),e("body").append(O)}return O.text(t.val()),O.width()}function b(t,i,n){var o,s,r=[];o=t.attr("class"),o&&(o=""+o,e(o.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),o=i.attr("class"),o&&(o=""+o,e(o.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(s=n(this),s&&r.push(s))})),t.attr("class",r.join(" "))}function y(e,t,n,o){var s=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),r=t.length;return 0>s?(n.push(o(e)),void 0):(n.push(o(e.substring(0,s))),n.push("<span class='select2-match'>"),n.push(o(e.substring(s,s+r))),n.push("</span>"),n.push(o(e.substring(s+r,e.length))),void 0)}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(i){var n,o=null,s=i.quietMillis||100,r=i.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){var n=i.data,s=r,c=i.transport||e.fn.select2.ajaxDefaults.transport,u={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);n=n?n.call(a,l.term,l.page,l.context):null,s="function"==typeof s?s.call(a,l.term,l.page,l.context):s,o&&o.abort(),i.params&&(e.isFunction(i.params)?e.extend(d,i.params.call(a)):e.extend(d,i.params)),e.extend(d,{url:s,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page);l.callback(t)}}),o=c.call(a,d)},s)}}function M(t){var i,n,o=t,s=function(e){return""+e.text};e.isArray(o)&&(n=o,o={results:n}),e.isFunction(o)===!1&&(n=o,o=function(){return n});var r=o();return r.text&&(s=r.text,e.isFunction(s)||(i=r.text,s=function(e){return e[i]})),function(t){var i,n=t.term,r={results:[]};return""===n?(t.callback(o()),void 0):(i=function(o,r){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],e(o.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,s(a),o))&&r.push(a)}else t.matcher(n,s(o),o)&&r.push(o)},e(o().results).each2(function(e,t){i(t,r.results)}),t.callback(r),void 0)}}function C(i){var n=e.isFunction(i);return function(o){var s=o.term,r={results:[]};e(n?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===s||o.matcher(s,i))&&r.results.push(e?this:{id:this,text:this})}),o.callback(r)}}function x(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function k(t){return e.isFunction(t)?t():t}function S(t){var i=0;return e.each(t,function(e,t){t.children?i+=S(t.children):i++}),i}function T(e,i,n,o){var r,a,l,c,u,d=e,h=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=o.tokenSeparators.length;c>l&&(u=o.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(r=e.substring(0,a),e=e.substring(a+u.length),r.length>0&&(r=o.createSearchChoice.call(this,r,i),r!==t&&null!==r&&o.id(r)!==t&&null!==o.id(r))){for(h=!1,l=0,c=i.length;c>l;l++)if(s(o.id(r),o.id(i[l]))){h=!0;break}h||n(r)}}return d!==e?e:void 0}function A(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var D,E,P,R,z,O,F,W,I={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},N="<div class='select2-measure-scrollbar'></div>",L={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};F=e(document),z=function(){var e=1;return function(){return e++}}(),F.on("mousemove",function(e){I.x=e.pageX,I.y=e.pageY}),E=A(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,s,r=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+z()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=d(function(){return i.element.closest("body")}),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(k(i.containerCss)),this.container.addClass(k(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(i.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=n=this.container.find(r),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),c(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",r,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&n.mousewheel(function(e,t,i,o){var s=n.scrollTop();o>0&&0>=s-o?(n.scrollTop(0),m(e)):0>o&&n.get(0).scrollHeight-n.scrollTop()+o<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),m(e))}),l(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var u=i.element.prop("readonly");u===t&&(u=!1),this.readonly(u),W=W||o(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,i=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:s(e.attr("locked"),"locked")||s(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,o,a,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=o=i.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,o,s){var r,a=this.opts.id;r=function(n,o,l){var u,d,h,p,f,m,g,v,b,y;for(n=i.sortResults(n,o,s),u=0,d=n.length;d>u;u+=1)h=n[u],f=h.disabled===!0,p=!f&&a(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),y=i.formatResult(h,v,s,c.opts.escapeMarkup),y!==t&&v.html(y),g.append(v),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),r(h.children,b,l+1),g.append(b)),g.data("select2-data",h),o.append(g)},r(o,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(e){var i,o,s,r={results:[],more:!1},a=e.term;
s=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){s(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(o=this.getPlaceholderOption(),o&&(i=i.not(o))),i.each2(function(e,t){s(t,r.results)}),e.callback(r)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=_.call(i.element,i.ajax)):"data"in i?i.query=M(i.data):"tags"in i&&(i.query=C(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,n){var o=[];e(r(t.val(),i.separator)).each(function(){var t={id:this,text:this},n=i.tags;e.isFunction(n)&&(n=n()),e(n).each(function(){return s(this.id,t.id)?(t=this,!1):void 0}),o.push(t)}),n(o)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i,n=this.opts.element;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=n.prop("readonly");i===t&&(i=!1),this.readonly(i),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass))}),n.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,o,s,r=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),d=e(window),h=d.width(),p=d.height(),f=d.scrollLeft()+h,m=d.scrollTop()+p,g=a.top+l,v=a.left,b=m>=g+u,y=a.top-u>=this.body().scrollTop(),w=r.outerWidth(!1),_=f>=v+w,M=r.hasClass("select2-drop-above");M?(i=!0,!y&&b&&(n=!0,i=!1)):(i=!1,!b&&y&&(n=!0,i=!0)),n&&(r.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=r.outerHeight(!1),f=d.scrollLeft()+h,m=d.scrollTop()+p,g=a.top+l,v=a.left,w=r.outerWidth(!1),_=f>=v+w,r.show()),this.opts.dropdownAutoWidth?(s=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),w=r.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:W.width),w>c?c=w:w=c,_=f>=v+w):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),g-=t.top,v-=t.left),_||(v=a.left+c-w),o={left:v,width:c},i?(o.bottom=p-a.top,o.top="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(o.top=g,o.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),o=e.extend(o,k(this.opts.dropdownCss)),r.css(o)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var t,i=this.containerId,n="scroll."+i,o="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var i,n=e("#select2-drop");n.length>0&&(i=n.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+n+" "+s,function(){r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(o)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,n,o,s,r,a,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),o=n.offset().top+n.outerHeight(!0),i===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),s=l.offset().top+l.outerHeight(!0),o>s&&l.scrollTop(l.scrollTop()+(o-s)),r=n.offset().top-l.offset().top,0>r&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var o=e(i[n]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i,o,s=this.findHighlightableChoices();return 0===arguments.length?n(s.filter(".select2-highlighted")[0],s.get()):(t>=s.length&&(t=s.length-1),0>t&&(t=0),this.removeHighlight(),i=e(s[t]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),o=i.data("select2-data"),o&&this.opts.element.trigger({type:"select2-highlight",val:this.id(o),choice:o}),void 0)},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,o=this,s=this.search.val(),r=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:s,page:n,context:r}),o.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(o.opts.formatLoadMore(n+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),h.positionDropdown()}function o(e){u.html(e),n()}var r,a,l,c=this.search,u=this.results,d=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((i===!0||!f||!s(p,f))&&(e.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(r=this.data(),e.isArray(r)&&r.length>=m&&x(d.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(m)+"</li>"),void 0;if(c.val().length<d.minimumInputLength)return x(d.formatInputTooShort,"formatInputTooShort")?o("<li class='select2-no-results'>"+d.formatInputTooShort(c.val(),d.minimumInputLength)+"</li>"):o(""),i&&this.showSearch&&this.showSearch(!0),void 0;if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return x(d.formatInputTooLong,"formatInputTooLong")?o("<li class='select2-no-results'>"+d.formatInputTooLong(c.val(),d.maximumInputLength)+"</li>"):o(""),void 0;d.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+d.formatSearching()+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(r){var a;if(l==this.queryCount){if(!this.opened())return this.search.removeClass("select2-active"),void 0;if(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(h,c.val(),r.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(r.results).filter(function(){return s(h.id(this),h.id(a))}).length&&r.results.unshift(a)),0===r.results.length&&x(d.formatNoMatches,"formatNoMatches"))return o("<li class='select2-no-results'>"+d.formatNoMatches(c.val())+"</li>"),void 0;u.empty(),h.opts.populateResults.call(this,u,r.results,{term:c.val(),page:this.resultsPage,context:null}),r.more===!0&&x(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),n(),this.opts.element.trigger({type:"select2-loaded",items:r})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function i(){var i,n,o,s,r,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),s=0,r=n.length;r>s;s+=1)if(a=n[s].replace(/\s/g,""),o=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),P=A(E,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,o;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),i=this.search.get(0),i.createTextRange?(n=i.createTextRange(),n.collapse(!1),n.select()):i.setSelectionRange&&(o=this.search.val().length,i.setSelectionRange(o,o)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,i=this.container,n=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+z()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return m(e),void 0;switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),m(e),void 0;case D.ENTER:return this.selectHighlighted(),m(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case D.ESC:return this.cancel(e),m(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(this.opts.openOnEnter===!1&&e.which===D.ENTER)return m(e),void 0;if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),m(e),void 0}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),m(e),void 0):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(t)})),n.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var o=this.getPlaceholderOption();this.opts.element.val(o?o.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val():!1},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find("option").filter(function(){return this.selected});t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var o=i.val(),r=null;t.query({matcher:function(e,i,n){var a=s(o,t.id(n));return a&&(r=n),a},callback:e.isFunction(n)?function(){n(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){return s(o.id(t.data("select2-data")),o.opts.element.val())?(n=e,!1):void 0}),i!==!1&&(t===!0&&n>=0?this.highlight(n):this.highlight(0)),t===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(S(e.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),s(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),o.empty(),null!==e&&(i=this.opts.formatSelection(e,o,this.opts.escapeMarkup)),i!==t&&o.append(i),n=this.opts.formatSelectionCssClass(e,o),n!==t&&o.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,o=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return n=o.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:s});else{if(!e&&0!==e)return this.clear(i),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),i&&o.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,n=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(arguments.length>1&&(n=arguments[1]),e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n),void 0)}}),R=A(E,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var o=r(i.val(),t.separator),a=[];t.query({matcher:function(i,n,r){var l=e.grep(o,function(e){return s(e,t.id(r))}).length;return l&&a.push(r),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<o.length;i++)for(var r=o[i],l=0;l<a.length;l++){var c=a[l];if(s(r,t.id(c))){e.push(c),a.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+z()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),s=f(this.search);if(i.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var r=i;return e.which==D.LEFT&&n.length?r=n:e.which==D.RIGHT?r=o.length?o:null:e.which===D.BACKSPACE?(this.unselect(i.first()),this.search.width(10),r=n.length?n:o):e.which==D.DELETE?(this.unselect(i.first()),this.search.width(10),r=o.length?o:null):e.which==D.ENTER&&(r=null),this.selectChoice(r),m(e),r&&r.length||this.open(),void 0}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),m(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),m(e),void 0;case D.ENTER:return this.selectHighlighted(),m(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case D.ESC:return this.cancel(e),m(e),void 0}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&m(e),e.which===D.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],o=[],s=this;e(t).each(function(){n(s.id(this),i)<0&&(i.push(s.id(this)),o.push(this))}),t=o,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,o,s=!i.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?r:a,c=this.id(i),u=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),o=this.opts.formatSelectionCssClass(i,l.find("div")),o!=t&&l.addClass(o),s&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),m(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var i,o,s=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){for(;(o=n(this.id(i),s))>=0;)s.splice(o,1),this.setVal(s),this.select&&this.postprocessResults();var r=e.Event("select2-removing");r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},postprocessResults:function(e,t,i){var o=this.getVal(),s=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;s.each2(function(e,t){var i=a.id(t.data("select2-data"));n(i,o)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))
}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&x(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var e,t,i,n,o,s=a(this.search);e=v(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,o=i-(t-n)-s,e>o&&(o=i-s),40>o&&(o=i-s),0>=o&&(o=e),this.search.width(Math.floor(o))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),r(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)s(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i>0&&i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var o,s=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange({added:this.data(),removed:o}),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,s.id);s.setVal(i),s.updateSelection(t),s.clearSearch(),n&&s.triggerChange(s.buildChangeDetails(o,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,o,s=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(o=this.data(),t||(t=[]),n=e.map(t,function(e){return s.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(o,this.data())),void 0)}}),e.fn.select2=function(){var i,o,s,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),o=a?new R:new P,o.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(n(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,o=e(this).data("select2"),o===t)return;if(s=l[0],"container"===s?r=o.container:"dropdown"===s?r=o.dropdown:(h[s]&&(s=h[s]),r=o[s].apply(o,l.slice(1))),n(l[0],u)>=0||n(l[0],d)&&1==l.length)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var o=[];return y(e.text,i.term,o,n),o.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:M,tags:C},util:{debounce:u,markMatch:y,escapeMarkup:w,stripDiacritics:i},"class":{"abstract":E,single:P,multi:R}}}}(jQuery),_wAMD.define("select2",function(){}),_wAMD.define("commerce/editor/components/categorySelect",["underscore","jquery","mustache","commerce/editor/collection/Category","commerce/editor/model/CategoryHierarchy","select2"],function(e,t,i,n,o){function s(e,i){this.element=t(e),this.options=t.extend(!0,{},a,i),this.init()}function r(e,t){return new Array(t+1).join(e)}t.fn.categorySelect=function(e){return this.each(function(){t.data(this,"categorySelect")||t.data(this,"categorySelect",new s(this,e))})};var a={};s.prototype={init:function(){var e=this,i=o.findOrCreate();e.categories=new n,e.element.html('<span class="text-loading-animation">'+_W.tl("Loading")+"</span>"),e.promise=t.when(e.categories.fetch(),i.fetch()).done(function(){e.element.html("");var n=e.select=t("<select><option></option></select>").appendTo(e.element);n.width(250);var o=i.get("hierarchy")[0].children;e.buildNav(o),n.select2({placeholder:_W.tl("Select a Category")}),n.on({"select2-open":function(){e.element.trigger("open")},change:function(){var e=n.select2("data");e?n.select2("data",{id:e.id,text:t.trim(e.text)}):n.select2("val",n.children(":first").val())}}),n.change()})},buildNav:function(t,i){var n=this,o=n.options.selected,s=o&&o.get("site_category_id");i=i||0,e.each(t,function(e){var t=n.categories.findWhere({site_category_id:e.id});n.select.append(l({value:t.get("site_category_id"),indent:r("&nbsp;&nbsp;&nbsp;",i),name:t.get("name"),selected:function(){return s&&s==this.value}})),e.children.length&&n.buildNav(e.children,i+1)})},val:function(t){return this.select?e.isUndefined(t)?this.select.select2("val"):this.select.select2("val",t,!0):void 0},close:function(){this.select&&this.select.select2("close")},getPromise:function(){return this.promise}};var l=i.compile('<option value="{{value}}" {{#selected}}selected{{/selected}}>{{{indent}}}{{name}}</option>')}),function(e){e.Commerce.Editor||(e.Commerce.Editor={}),e.Commerce.Editor.Pages||(e.Commerce.Editor.Pages={}),e.Commerce.Editor.Pages.View||(e.Commerce.Editor.Pages.View={});var t=e.Commerce.Editor,i=t.Pages.View;_wAMD.require(["underscore","jquery","commerce/editor/collection/Category","commerce/editor/components/categorySelect"],function(t,n,o){i.PageTypeStoreCategoryLink={initialize:function(){var e=this;e.ui={container:n("#pageManagerStoreCategory"),select:n("#pageManagerStoreCategory .pageManagerSelect"),addPage:n("#pageManagerAddStoreCategory")},e.render()},updatePage:function(){var e=n.Deferred();return e.resolve(),e.promise()},select:function(e){var t=this;t.page=e,t.ui.container.toggle("category"==e.store_page_kind&&"1"!=e.store_page_kind_id),t.val(e.store_page_kind_id)},val:function(e){var i=this.ui.select.data("categorySelect");return i?t.isUndefined(e)?i.val():i.val(e):void 0},toggleAddPage:function(){var t=this;t.ui.addPage.hide(),e.COMMERCE_ENABLED&&"no"!=t.ui.addPage.data("enabled")&&o.count().done(function(e){e>1&&t.ui.addPage.show()})},render:function(){var e=this;e.ui.select.categorySelect().data("categorySelect").getPromise().done(function(){e.page&&e.val(e.page.store_page_kind_id)})}}})}(Weebly),_wAMD.define("commerce/editor/view/pages/PageTypeStoreCategoryLink",function(){}),_wAMD.define("commerce/editor/model/ProductSkuFile",["jquery","backbone-all","./_baseCommerceModel"],function(e,t,i){var n=i.extend({useServerGeneratedDefaultsFor:"ProductSkuFile",rollback:function(){i.prototype.rollback.apply(this,arguments)}});return n}),_wAMD.define("commerce/editor/collection/ProductSkuFile",["underscore","./_baseCommerceCollection","../model/ProductSkuFile"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"ProductSkuFile"},{})}),_wAMD.define("commerce/editor/model/ProductSkuOptionchoice",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ProductSkuOptionchoice",cloneDeep:function(){var e=t.prototype.cloneDeep.apply(this,arguments);return e.set("site_product_id",null),e.set("site_product_sku_id",null),e}})}),_wAMD.define("commerce/editor/collection/ProductSkuOptionchoice",["underscore","./_baseCommerceCollection","../model/ProductSkuOptionchoice"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"ProductSkuOptionchoice"},{})}),_wAMD.define("commerce/editor/model/ProductSku",["backbone-all","./_baseCommerceModel","../collection/ProductSkuFile","../collection/ProductSkuOptionchoice"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ProductSku",cloneDeep:function(){var e=t.prototype.cloneDeep.apply(this,arguments);return e.set("site_product_id",null),this.cloneDeepCollection("optionchoices",e),e},product_tracks_inventory:function(){var e=this.get("product");return e&&e.inventoryTrackingEnabled()},hasOptionchoices:function(e,t,i){e=_.isArray(e)?e:[e],t=_.isUndefined(t)?[]:t,t=_.isArray(t)?t:[t],i=_.isUndefined(i)?"all":i;var n,o,s=this.getOptionchoices();return _.some(e,function(e){return n=0,o=_.every(e,function(e,i){return-1!==_.indexOf(t,i)?(n++,!0):s[i]===e}),o&&"all"===i&&(o=_.keys(e).length===_.keys(s).length+n),o})},getOptionchoices:function(){var e={};return this.get("optionchoices").each(function(t){e[t.get("name")]=t.get("choice")}),e}})}),_wAMD.define("commerce/editor/collection/ProductSku",["underscore","./_baseCommerceCollection","../model/ProductSku"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"ProductSku"},{})}),_wAMD.define("commerce/editor/model/ProductImage",["jquery","backbone-all","./_baseCommerceModel","editor/app"],function(e,t,i,n){var o=i.extend({useServerGeneratedDefaultsFor:"ProductImage",rollback:function(){i.prototype.rollback.apply(this,arguments)},getMaxAvailableWidth:function(e){return e=parseInt(e,10)||this.get("width"),this.get("width")<e?this.get("width"):e},uri:function(e){e=e?e:"{size}";var t=this.attributes;"{size}"!=e&&e>parseInt(this.get("width"))&&(e=parseInt(this.get("width")));var i="s"+t.site_id+"_p"+t.site_product_id+"_i"+t.site_product_image_id+"_w"+e+"."+t.format;return"/uploads/"+n.commerce.storefrontSettings.get("upload_uid_location")+"/"+i},regenerate:function(){var e=this;e.rpc.resize.call(e,e.get("owner_id"),e.get("site_id"),e.get("site_product_id"),e.get("site_product_image_id"))}});return o}),_wAMD.define("commerce/editor/collection/ProductImage",["underscore","./_baseCommerceCollection","../model/ProductImage"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"ProductImage"},{})}),_wAMD.define("commerce/editor/model/ProductOption",["backbone-all","./_baseCommerceModel"],function(e,t){var i=t.extend({useServerGeneratedDefaultsFor:"ProductOption",cloneDeep:function(){var e=t.prototype.cloneDeep.apply(this,arguments);return e.set("site_product_id",null),e}});return i.prototype.defaults.name="",i}),_wAMD.define("commerce/editor/collection/ProductOption",["underscore","./_baseCommerceCollection","../model/ProductOption"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"ProductOption"},{})}),_wAMD.define("commerce/editor/model/Manufacturer",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"Manufacturer"})}),_wAMD.define("commerce/editor/collection/Manufacturer",["underscore","./_baseCommerceCollection","../model/Manufacturer"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"Manufacturer"},{})}),_wAMD.define("commerce/editor/model/Product",["jquery","underscore","backbone-all","editor/app","util/ui/ImageAspectRatio","./_baseCommerceModel","../collection/ProductSku","../collection/ProductImage","../collection/ProductOption","../collection/Manufacturer"],function(e,t,i,n,o,s){function r(e,t){var i=n.commerce.storefrontSettings,o=i.get("currency_prefix")||"",s=i.get("currency_suffix")||"";return t=t||2,o+parseFloat(e).toFixed(t)+s}function a(){return Weebly.Commerce.RPC.Product}return s.extend({useServerGeneratedDefaultsFor:"Product",clone:function(){var e=s.prototype.clone.apply(this,arguments);return e.set("site_link",null),e},cloneDeep:function(){var e=s.prototype.cloneDeep.apply(this,arguments);return e.set("manufacturer",this.get("manufacturer")),this.cloneDeepCollection("options2",e),this.cloneDeepCollection("skus",e),e.set("image_order",[]),e},thumbnail:function(e,t,i){var s,r;return s=n.commerce.storefrontSettings.getRatioAsNumber("product_image_ratio"),t=t||!1,e=e||80,r=i||this.getImage(t)||"//"+ASSETS_BASE+"/images/util/blank-product-w{size}.png",o("entity-list",r,e,s)},getImageUrl:function(e,t){var i,n;return t=t||!1,e=e||80,i=this.getImage(t),i?(e=i.getMaxAvailableWidth(e),n=i.uri()):n="//"+ASSETS_BASE+"/images/util/blank-product-w{size}.png",n=n.replace("{size}",e)},getFirstImage:function(){var e=this.getOrderedImages();return e[0]||null},getImage:function(e){if(e)var t=this.get("images").select(function(t){return t.get("site_product_image_id")==e});else var t=this.getOrderedImages();return t.length?t[0]:null},getPriceRange:function(){var e=this,t=e.get("price_low"),i=e.get("price_high"),n=e.get("sale_price_low"),o=e.get("sale_price_high");return null===t&&null===i?"":(null!==n&&(t=Math.min(t,n)),null!==o&&(i=o),price=r(t,2),t>=0&&i>t&&(price+=" - "+r(i,2)),price)},getOrderedImages:function(){var t=this,i=t.get("images"),n=t.get("image_order")||[],o=[],s=[];return i.each(function(t){var i=t.get("site_product_image_id"),r=-1;e.each(n,function(e,t){t==i&&(r=e)}),-1===r?o[o.length]=t:s[r]=t}),s=s.concat(o)},get:function(e){return"categories"==e?this.getRelated("category_ids","site_category_id",require("commerce/editor/collection/Category")):"coupons"==e?this.getRelated("coupon_ids","site_coupon_id",require("commerce/editor/collection/Coupon")):s.prototype.get.apply(this,arguments)},commonVariations:function(e){var i=[],n={};this.get("skus").pluck("optionchoices").each(function(t){check=[],n={},t.toJSON().each(function(t){t.name!==e&&(n[t.name]=t.choice)}),i.push(JSON.stringify(n))});var o=[],s=t.unique(i).length===i.length;if(!s){var r=t.filter(i,function(e,n){return t.indexOf(i,e)!==n});o=t.map(r,function(e){return JSON.parse(e)})}return o},findSkuByOptionChoices:function(e,t,i){return this.get("skus").filter(function(n){return n.hasOptionchoices(e,t,i)})},getSkuOptionchoices:function(){return this.get("skus").map(function(e){return e.getOptionchoices()})},inventoryTrackingEnabled:function(){return this.get("track_inventory")&&Weebly.Restrictions.hasAccess("com_inventory_tracking")}},{presets:function(i){var n=e.Deferred(),o=t.pick(this.prototype.defaults,"owner_id","site_id");return i=t.defaults(i||{},o),a().presets(i.owner_id,i.site_id).done(function(e){n.resolve(e.data)}).fail(function(e){n.reject(e.message)}),n.promise()}})}),_wAMD.define("commerce/editor/collection/Product",["jquery","./_baseCommerceCollection","../model/Product"],function(e,t,i){var n=t,o=n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"Product",fetch:function(t){return t=t&&t.searchText?e.extend({},this.fetchOptions,t):e.extend({sort:[{property:"created_date",direction:"DESC"}]},this.fetchOptions,t),o.fetch.call(this,t)}})}),_wAMD.define("commerce/editor/components/productSelect",["jquery","commerce/editor/model/Product","commerce/editor/collection/Product","select2"],function(e,t,i){function n(t,i){this.element=e(t),this.options=e.extend(!0,{},o,i),this.init()}e.fn.productSelect=function(t){return this.each(function(){e.data(this,"productSelect")||e.data(this,"productSelect",new n(this,t))})};var o={className:""};n.prototype={init:function(){var n=this;n.element.html("");var o=n.input=e('<input type="hidden">').appendTo(n.element);n.options.className&&o.addClass(n.options.className),o.width(250),n.options.selected&&o.val(n.options.selected.get("site_product_id")),o.select2({placeholder:_W.tl("Select a Product"),query:function(t){var n=t.context||new i([],{mode:"infinite",state:{pageSize:25},searchText:t.term}),o=n.getPage(t.page);o instanceof i&&(o=!1),e.when(o).done(function(){var e=n.models.map(function(e){return{id:e.get("site_product_id"),text:e.get("name")||""}});t.callback({results:e,more:n.hasNext(),context:n})})},initSelection:function(i,n){var o=i.val();if(o){var s=t.findOrCreate({site_product_id:o}),r=s.get("name")?!1:s.fetch();e.when(r).done(function(){n({id:s.get("site_product_id"),text:s.get("name")})})}}}),o.on({"select2-open":function(){n.element.trigger("open")}})},val:function(e){return this.input?_.isUndefined(e)?this.input.select2("val"):(this.input.select2("val",e,!0),void 0):void 0},close:function(){this.input.select2("close")}}}),function(e){e.Commerce.Editor||(e.Commerce.Editor={}),e.Commerce.Editor.Pages||(e.Commerce.Editor.Pages={}),e.Commerce.Editor.Pages.View||(e.Commerce.Editor.Pages.View={});var t=e.Commerce.Editor,i=t.Pages.View;_wAMD.require(["underscore","jquery","commerce/editor/model/Product","commerce/editor/collection/Product","commerce/editor/components/productSelect"],function(t,n,o,s){i.PageTypeStoreProductLink={initialize:function(){var e=this;e.ui={container:n("#pageManagerStoreProduct"),select:n("#pageManagerStoreProduct .pageManagerSelect"),addPage:n("#pageManagerAddStoreProduct"),pageHide:n("#pageManagerHideInput")},e.ui.select.on("change",e.onChange.bind(e)),e.render()},updatePage:function(e){var t=n.Deferred();if(e.store_page_kind_id){var i=o.findOrCreate({site_product_id:e.store_page_kind_id});i.fetch().done(function(){e.hidden=!i.get("published"),t.resolve()})}else t.resolve();return t.promise()},select:function(e){var t=this;if(t.ui.container.toggle("product"==e.store_page_kind),"product"==e.store_page_kind){t.page=e;var i=t.ui.select.data("productSelect");i&&i.val(e.store_page_kind_id)}},val:function(e){var i=this.ui.select.data("productSelect");return i?t.isUndefined(e)?i.val():i.val(e):void 0},toggleAddPage:function(){var t=this;t.ui.addPage.hide(),e.COMMERCE_ENABLED&&"no"!=t.ui.addPage.data("enabled")&&s.count().done(function(e){e>0&&t.ui.addPage.show()})},onChange:function(){var e=this,t=e.val();t||(t=e.ui.select.children(":first").val(),e.ui.select.data("productSelect").val(t));var i=o.findOrCreate({site_product_id:t});i.fetch().done(function(){var t=i.get("published");e.ui.container.find(".error-message").text(t?"":_W.tl("The product you select hasn't been published yet.")),e.ui.pageHide.attr("checked",!t)})},render:function(){var e=this.ui.select.productSelect({className:"pageManagerStoreModelInput"}).data("productSelect");this.page&&e.val(this.page.store_page_kind_id)}}})}(Weebly),_wAMD.define("commerce/editor/view/pages/PageTypeStoreProductLink",function(){}),window.Weebly||(Weebly={}),Weebly.AllDialogs={},Weebly.Dialog=function(e,t){function i(){a.height(document.body.offsetHeight);var e=r(window).height();e>document.body.offsetHeight&&a.height(e)}function n(i,n){e=i,n||c.empty(),c.append(e),e=c.children().first(),l.show(),s(),t.onOpen&&t.onOpen.call(l,e)}function o(){var e=r("<div>"),i=t.outerClass||"";e.addClass(t.inner_class||"weebly-dialog-inner");var n=document.createElement("div");if(n.innerHTML="<div class='weebly-dialog "+i+"'>"+"  <div class='weebly-dialog-border'>"+"    <div class='weebly-dialog-content'>"+"    </div>"+"  </div>"+"</div>",l=r(n.firstChild),l.find("div.weebly-dialog-content").first().append(e),t.showClose!==!1){"function"!=typeof showClose&&(showClose=function(){d()});var o=r('<div class="weebly-dialog-close">').on("click","function"==typeof t.closeFunction?t.closeFunction:function(){d(!0)});e.append(o)}c=r("<div>"),e.append(c),t.iframe?c.css("line-height",0):(t.width&&c.width(t.width),t.height&&c.height(t.height)),l.css("position","absolute"),l.css("left","-10000px"),l.css("z-index",t.zIndex||999),r(document.body).append(l)}function s(){if(l){var n=e[0].scrollHeight+29,o=r(window).height(),s=l[0].scrollHeight;s=Math.max(n,s),l.css("top",r(window).scrollTop()+Math.max(10,Math.round(o/2-s/2))+"px"),l.css("left",Math.round(r(document.body).width()/2-l.width()/2)+"px"),!t.noScrollbars&&s>o-20?(e.height(e.scrollHeight-(s-(o-20))),t.iframe||e.css("overflow","auto")):t.iframe?t.height&&(e.height=t.height):(e.css("height",""),e.css("overflow","")),a&&a.is(":visible")&&i()}}var r=jQuery;t||"object"!=typeof e||e.nodeName?(e="string"==typeof e?r("#"+e):r(e),t=t||{},Weebly.AllDialogs[e.attr("id")]=this):(t=e,e=null),this.options=t;var a,l,c;this.setOption=function(e,t){void 0===t?delete this.options[e]:this.options[e]=t},this.open=function(s,c){if(s&&(t.url=s),c&&(t.parameters=c),t.modal)if(a)a.show();else{a=r('<div class="weebly-blackout">').attr("id",t.blackoutID||""),r(document.body).append(a),a.css("z-index",t.zIndex||999);var u=void 0!==t.blackoutOpacity?t.blackoutOpacity:.5;a.css("opacity",u),i()}if(l||o(),t.modal&&r(document.body).append(l),t.iframe){var d="";t.parameters&&(d=r.param(t.parameters),d=-1==t.url.indexOf("?")?"?"+d:"&"+d);var h={};h.border=0,t.width&&(h.width=t.width+"px"),t.height&&(h.height=t.width+"px"),n(r('<iframe src="'+t.url+d+'" frameborder="0">').css(h))}else t.url?new r.ajax(t.url,{type:t.method||"get",data:t.parameters,success:function(e){n(e)}}):n(e.show(),!0)},this.update=function(t){e=t,c.empty().append(e),s()},this.positionDialog=s;var u;r(window).on("resize",function(){!u&&e&&e.offsetWidth&&(u=!0,s(),u=!1)});var d=this.close=function(e){l&&(t.onClose&&t.onClose.call(l,e)===!1||(a&&a.hide(),l.hide()))};this.destroy=function(){a&&a.remove(),c&&c.remove()}},!window.getInnerHeight,_wAMD.define("legacy/weebly_dialog",function(e){return function(){var t;return t||e.Weebly.Dialog}}(this)),Weebly.Restrictions={settings:{},services:[],source:"main",level:0,freeLevel:0,defaultSource:"main",disabledLevel:1e7,defaultLevel:"all",starterLevel:5,proLevel:10,businessLevel:15,designerSitesService:"Weebly.designerSites",unlimitedValue:"-1",hasAccess:function(e){var t=Weebly.Restrictions,i=t.getMinimumLevel(e);return t.level>=i},hasService:function(e){var t=Weebly.Restrictions;return t.level==e?!0:-1!=t.services.indexOf(e)},getPlans:function(){var e=Weebly.Restrictions,t=[e.freeLevel,e.starterLevel,e.proLevel,e.businessLevel],i=[];for(index in t)planid=t[index],i.push({plan:planid,name:e.levelToName(planid)});return i},accessValue:function(e){var t=Weebly.Restrictions;if(!t.settings[e])return"";for(var i="",n=t.level;n>=t.freeLevel;n--)if(i=t.settings[e][source]&&"undefined"!=typeof t.settings[e][source][n]?t.settings[e][source][n]:t.settings[e][t.defaultSource][n],"undefined"!=typeof i)return i;return""},isUnlimited:function(e){var t=Weebly.Restrictions,i=t.accessValue(e);return i==t.unlimitedValue},featureEnabled:function(e){var t=Weebly.Restrictions,i=t.getMinimumLevel(e);return i!=t.disabledLevel},isUpgradable:function(e){var t=Weebly.Restrictions;if(!t.settings[e])return!1;var i=t.settings[e][source]?source:t.defaultSource,n=!1;return $H(t.settings[e][i]).keys().each(function(e){!n&&!isNaN(parseFloat(e))&&e>t.level&&(n=e)}),n},getMinimumLevel:function(e){var t=Weebly.Restrictions;if(!t.settings[e])return t.freeLevel;var i=t.settings[e][source]?source:t.defaultSource,n=t.settings[e][i].minimum_level;return n||t.freeLevel},requiredService:function(e){var t=Weebly.Restrictions;return t.getMinimumLevel(e)},requiresUpgrade:function(e){var t=Weebly.Restrictions,i=t.getMinimumLevel(e);return i&&i!=t.freeLevel},addService:function(e){var t=Weebly.Restrictions;t.services.push(e)},removeService:function(e){var t=Weebly.Restrictions;t.services=t.services.without(e)},hasNewElementAccess:function(){var e=Weebly.Restrictions,t=$$("#secondlist .outside_top form");if(1==t.size()){var i=t[0].idfield.value.replace(/[^\d]/g,"");return e.hasAccess(i)}return!0},getSiteLimit:function(){var e=Weebly.Restrictions;return e.siteLimit&&e.siteLimit>0?e.siteLimit:e.accessValue("site_limit")},levelToName:function(e){var t=Weebly.Restrictions;switch("string"==typeof e&&(e=parseInt(e)),e){case t.freeLevel:return _W.tl("Free");case t.proLevel:return _W.tl("Pro");case t.starterLevel:return _W.tl("Starter");case t.businessLevel:return _W.tl("Business");default:return""}},getNextLevel:function(e){var t=Weebly.Restrictions;switch(e){case t.freeLevel:return t.starterLevel;case t.starterLevel:return t.proLevel;case t.proLevel:return t.businessLevel;case t.businessLevel:default:return!1}},hasPro:function(){var e=Weebly.Restrictions;return e.level>=e.proLevel},hasBusiness:function(){var e=Weebly.Restrictions;return e.level>=e.businessLevel}},_wAMD.define("legacy/weebly_restrictions",function(e){return function(){var t;return t||e.Weebly.Restrictions}}(this)),_wAMD.define("config",["require","exports","module"],function(){return{chromeless:!1,content_field_js_render:!1,defaultPlaceholderText:_W.tl("Click here to edit."),areaDefaultPlaceholderText:{phone:_W.tl("Add text"),headline:_W.tl("Click to add headline"),"headline-paragraph":_W.tl("Click to add description. Lorem ipsum dolor sit amet, consectetur adipiscing elit.")}}}),_wAMD.define("tablet/api/external",["jquery"],function(e){function t(t){return n?e.map(t,function(e){return JSON.stringify(e)}):t}var i={},n=!0,o=!1;return i.documentReady=function(){"undefined"!=typeof MobileInterface&&(MobileInterface.callbackWithJSON&&(n=MobileInterface.callbackWithJSON()),MobileInterface.documentReady&&MobileInterface.documentReady())},i.watchDocumentSizeChange=function(){var t=0,i=0,n=setInterval(function(){var n=e("html").outerHeight(!0),s=e(document).outerHeight(!0);(o||n!=t||s!=i)&&(o=!1,t=n,i=s,"undefined"!=typeof MobileInterface&&MobileInterface.documentSizeChanged&&MobileInterface.documentSizeChanged())},500);return n},i.forceDocumentSizeChange=function(){o=!0},i.navClicked=function(){"undefined"!=typeof MobileInterface&&MobileInterface.navClicked&&MobileInterface.navClicked.apply(MobileInterface,t(arguments))},i.navShown=function(){"undefined"!=typeof MobileInterface&&MobileInterface.navShown&&MobileInterface.navShown.apply(MobileInterface,t(arguments))},i.navHidden=function(){"undefined"!=typeof MobileInterface&&MobileInterface.navHidden&&MobileInterface.navHidden.apply(MobileInterface,t(arguments))},i.updateToolbarStates=function(){"undefined"!=typeof MobileInterface&&MobileInterface.updateToolbarStates&&MobileInterface.updateToolbarStates.apply(MobileInterface,t(arguments))},i.finishedEditingText=function(){"undefined"!=typeof MobileInterface&&MobileInterface.finishedEditingText&&MobileInterface.finishedEditingText.apply(MobileInterface,t(arguments))},i.finishedEditingAreaText=function(){"undefined"!=typeof MobileInterface&&MobileInterface.finishedEditingAreaText&&MobileInterface.finishedEditingAreaText.apply(MobileInterface,t(arguments))},i.startedEditingText=function(){"undefined"!=typeof MobileInterface&&MobileInterface.startedEditingText&&MobileInterface.startedEditingText.apply(MobileInterface,t(arguments))},i.startedEditingAreaText=function(){"undefined"!=typeof MobileInterface&&MobileInterface.startedEditingAreaText&&MobileInterface.startedEditingAreaText.apply(MobileInterface,t(arguments))},i.initializeEditorFailed=function(){"undefined"!=typeof MobileInterface&&MobileInterface.initializeEditorFailed&&MobileInterface.initializeEditorFailed.apply(MobileInterface,t(arguments))},i.renderPageFailed=function(){"undefined"!=typeof MobileInterface&&MobileInterface.renderPageFailed&&MobileInterface.renderPageFailed.apply(MobileInterface,t(arguments))},i}),_wAMD.define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),_wAMD.define("tpl",["text"],function(e){var t={};return{load:function(i,n,o,s){if(s.isBuild&&s.inlineTpl===!1)return o();var r=function(e){s.isBuild&&(t[i]=e),o(e)};e.get(n.toUrl("templates/"+i+".tpl"),r,o.error)},write:function(i,n,o){if(t.hasOwnProperty(n)){var s=e.jsEscape(t[n]);o.asModule(i+"!"+n,"define(function () { return '"+s+"'; });\n")}}}}),_wAMD.define("tpl!components/views/confirm",[],function(){return"<p>{{{message}}}</p>\n"}),_wAMD.define("components/views/ConfirmView",["jquery","underscore","backbone-all","mustache","tpl!components/views/confirm"],function(e,t,i,n,o){var s=i.Marionette.ItemView.extend({template:n.compile(o),events:{"click .btn-cancel":"cancel","click .btn-confirm":"confirm"},templateHelpers:function(){var e=this;return{message:function(){return e.message}}},defaultDialog:{buttons:[{group:"control-buttons pull-right",buttons:[{className:"btn-cancel btn-com"},{className:"btn-confirm btn-com btn-success"}]}]},message:void 0,title:_W.tl("Confirmation"),confirmText:_W.tl("Confirm"),cancelText:_W.tl("Cancel"),size:"600x250",modal:!0,callback:function(){},initialize:function(e){var i,n=this;i=n.dialog=t.extend({},n.defaultDialog),n.message=e.message||n.message,i.size=e.size||n.size,i.title=e.title||n.title,e.dialogClass&&(i.dialogClass=e.dialogClass),n.className=e.className||n.classname,n.dialog.modal=t.isUndefined(e.modal)?n.modal:e.modal,i.buttons[0].buttons[0].text=e.cancelText||n.cancelText,i.buttons[0].buttons[1].text=e.confirmText||n.confirmText,e.cancelClass&&(n.dialog.buttons[0].buttons[0].className=e.cancelClass+" btn-cancel"),e.confirmClass&&(n.dialog.buttons[0].buttons[1].className=e.confirmClass+" btn-confirm"),n.responseCallback=e.callback||n.callback},confirm:function(){this.trigger("dialog:close"),this.responseCallback(!0)},cancel:function(){this.trigger("dialog:close"),this.responseCallback(!1)}});return s}),_wAMD.define("tpl!components/views/prompt",[],function(){return'<span class="scaffold-com">\n	<p class="section"><input id="promptInput" type="text" placeholder="{{placeholder}}"></p>\n</span>\n<p style="display:none" class="form-error"></p>\n<p>{{{message}}}</p>\n'}),_wAMD.define("components/views/PromptView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!components/views/prompt"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),className:"w-ui",dialog:function(){var e=this;return{title:e.title,size:"600x300",buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-cancel btn-com"},{text:_W.tl("Submit"),className:"btn-confirm btn-com btn-success"}]}]}},templateHelpers:function(){var e=this;return{placeholder:function(){return e.placeholder},message:function(){return e.message}}},ui:{confirm:".btn-confirm",cancel:".btn-cancel",warning:".form-error",input:"#promptInput"},events:{"click @ui.confirm":"confirm","click @ui.cancel":"cancel","keydown @ui.input":"keydown"},confirm:function(){var e=this,t=e.ui.warning;t.hide();var i=e.ui.input.val();i.match(e.validRegex)?(e.callback(i),e.trigger("dialog:close")):t.show().html(e.warning)
},cancel:function(){this.trigger("dialog:close")},keydown:function(e){(13==e.which||13==e.keyCode)&&this.confirm(e)},initialize:function(e){var t=this;t.placeholder=e.placeholder,t.message=e.message,t.warning=e.warning||_W.tl("Invalid entry."),t.validRegex=e.validRegex||/.+/,t.title=e.title,t.callback=e.callback}});return r}),_wAMD.define("editor/settings/model/SiteSettings",["underscore","backbone-all"],function(e,t){var i=t.RelationalModel,n=i.prototype,o=i.extend({keydefs:{PRIMARY:["owner_id","site_id"]},initialize:function(){var t=this;return t.on("all",function(i){var n=i.split(":");if("change"==n[0]&&n[1]){var o=n[1];e.isUndefined(Weebly.Location[o])||(Weebly.Location[o]=t.get(o))}}),t.listenTo(editorApp.vent,"publish:success",function(){t.set("published",!0)}),n.initialize.apply(this,arguments)},sync:function(e,t,i){var n;switch(i=i||{},e){case"create":case"update":case"patch":var o=i.attrs||t.toJSON(i);n=Weebly.Editor.RPC.SiteSettings.save(o),n.done(function(e){t.set(e),i.success&&i.success()}),n.fail(function(){i.error&&i.error()});break;case"read":n=Weebly.Editor.RPC.SiteSettings.get().done(function(e){t.set(e)});break;default:console.warn(e+" not defined for this model",t)}return n}},{findOrCreate:function(t,n){return t=e.defaults(t||{},{owner_id:window.com_userID,site_id:window.com_currentSite}),i.findOrCreate.call(this,t,n)}});return o}),_wAMD.define("jquery-ui/core",["jquery"],function(e){!function(e,t){function i(t,i){var o,s,r,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,s=o.name,t.href&&s&&"map"===o.nodeName.toLowerCase()?(r=e("img[usemap=#"+s+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,o,s=e(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(t,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function o(t,i,n,o){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,o(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,o(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var o,s=e.ui[t].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i){var n,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<o.length;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)}})}(e)}),_wAMD.define("jquery-ui/widget",["jquery"],function(e){!function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(s){}o(t)},e.widget=function(t,i,n){var o,s,r,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},s=e[c][t],r=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new r(e,t)},e.extend(r,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}(),void 0):(l[t]=n,void 0)}),r.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:t},l,{constructor:r,namespace:c,widgetName:t,widgetFullName:o}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var o,s,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(o in r[a])s=r[a][o],r[a].hasOwnProperty(o)&&s!==t&&(i[o]=e.isPlainObject(s)?e.isPlainObject(i[o])?e.widget.extend({},i[o],s):e.widget.extend({},s):s);return i},e.widget.bridge=function(i,o){var s=o.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,o=e.data(this,s);return o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,l),n!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(r||{})._init():e.data(this,s,new o(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,s,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(s=a[i]=e.widget.extend({},this.options[i]),r=0;r<o.length-1;r++)s[o[r]]=s[o[r]]||{},s=s[o[r]];if(i=o.pop(),n===t)return s[i]===t?null:s[i];s[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,r){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,s,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}})}(e)}),_wAMD.define("jquery-ui/button",["jquery","./core","./widget"],function(e){!function(e){var t,i,n,o,s="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var i=t.name,n=t.form,o=e([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",h="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(h)}),u&&(this.element.bind("change"+this.eventNamespace,function(){o||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(o=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(i!==e.pageX||n!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||o?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var t=r.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,r.document.one("mouseup",function(){t=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+r+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(a),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,s=[];n.primary||n.secondary?(this.options.text&&s.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(s.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(e)}),_wAMD.define("jquery-ui/mouse",["jquery","./widget"],function(e){!function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e)}),_wAMD.define("jquery-ui/draggable",["jquery","./core","./mouse","./widget"],function(e){!function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i,n=this,o=!1,s=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(o=!0);return o||"original"!==this.options.helper?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;if("parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=["document"===o.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===o.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===o.containment?0:e(window).scrollLeft())+e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===o.containment?0:e(window).scrollTop())+(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||o.containment.constructor===Array)o.containment.constructor===Array&&(this.containment=o.containment);else{if(i=e(o.containment),n=i[0],!n)return;t="hidden"!==e(n).css("overflow"),this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderRightWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderBottomWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o,s,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName),c=t.pageX,u=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(c=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(c=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,u=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,s=r.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,c=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)
},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),o=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i){var n=e(this).data("ui-draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,i){var n=e(this).data("ui-draggable"),o=this;e.each(n.sortables,function(){var s=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,o,s,r,a,l,c,u,d,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)a=p.snapElements[d].left,l=a+p.snapElements[d].width,c=p.snapElements[d].top,u=c+p.snapElements[d].height,g>a-m&&l+m>g&&b>c-m&&u+m>b||g>a-m&&l+m>g&&y>c-m&&u+m>y||v>a-m&&l+m>v&&b>c-m&&u+m>b||v>a-m&&l+m>v&&y>c-m&&u+m>y?("inner"!==f.snapMode&&(n=Math.abs(c-y)<=m,o=Math.abs(u-b)<=m,s=Math.abs(a-v)<=m,r=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||o||s||r,"outer"!==f.snapMode&&(n=Math.abs(c-b)<=m,o=Math.abs(u-y)<=m,s=Math.abs(a-g)<=m,r=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(n||o||s||r||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=n||o||s||r||h):(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(e)}),_wAMD.define("jquery-ui/position",["jquery"],function(e){!function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function o(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,o=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var s,p,m,g,v,b,y=e(t.of),w=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(w),M=(t.collision||"flip").split(" "),C={};return b=o(y),y[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===M.length&&(M[1]=M[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),s=i(C.at,p,m),v.left+=s[0],v.top+=s[1],this.each(function(){var o,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),f=n(this,"marginLeft"),b=n(this,"marginTop"),x=d+f+n(this,"marginRight")+_.width,k=h+b+n(this,"marginBottom")+_.height,S=e.extend({},v),T=i(C.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?S.left-=d:"center"===t.my[0]&&(S.left-=d/2),"bottom"===t.my[1]?S.top-=h:"center"===t.my[1]&&(S.top-=h/2),S.left+=T[0],S.top+=T[1],e.support.offsetFractions||(S.left=l(S.left),S.top=l(S.top)),o={marginLeft:f,marginTop:b},e.each(["left","top"],function(i,n){e.ui.position[M[i]]&&e.ui.position[M[i]][n](S,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:o,collisionWidth:x,collisionHeight:k,offset:[s[0]+T[0],s[1]+T[1]],my:t.my,at:t.at,within:w,elem:u})}),t.using&&(c=function(e){var i=g.left-S.left,n=i+p-d,o=g.top-S.top,s=o+m-h,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:S.left,top:S.top,width:d,height:h},horizontal:0>n?"left":i>0?"right":"center",vertical:0>s?"top":o>0?"bottom":"middle"};d>p&&a(i+n)<p&&(l.horizontal="center"),h>m&&a(o+s)<m&&(l.vertical="middle"),l.important=r(a(i),a(n))>r(a(o),a(s))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(S,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&0>=c?(i=e.left+l+t.collisionWidth-s-o,e.left+=l-i):e.left=c>0&&0>=l?o:l>c?o+s-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&0>=c?(i=e.top+l+t.collisionHeight-s-o,e.top+=l-i):e.top=c>0&&0>=l?o:l>c?o+s-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,s=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+h+p+f+t.collisionWidth-r-s,(0>i||i<a(u))&&(e.left+=h+p+f)):d>0&&(n=e.left-t.collisionPosition.marginLeft+h+p+f-l,(n>0||a(n)<d)&&(e.left+=h+p+f))},top:function(e,t){var i,n,o=t.within,s=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-r-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+p+f+m+t.collisionHeight-r-s,e.top+p+f+m>u&&(0>n||n<a(u))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||a(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(a),i=r||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}(e)}),_wAMD.define("jquery-ui/resizable",["jquery","./core","./mouse","./widget"],function(e){!function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,o,s,r=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),s="ui-resizable-"+n,o=e("<div class='ui-resizable-handle "+s+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(t){var i,n,o,s;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,s),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(i){var n,o,s,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=t(this.helper.css("left")),o=t(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,o+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:o},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,o={},s=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[r];return p?(i=p.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==u&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(o)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,o,s,r,a,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,s=n?0:u.sizeDiff.width,r={width:u.helper.width()-s,height:u.helper.height()-o},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,o,s,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,o=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),o>r.minHeight&&(r.minHeight=o),n<r.maxWidth&&(r.maxWidth=n),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,o=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===o&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===o&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,o=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),o&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),r&&u&&(e.left=l-t.minWidth),o&&u&&(e.left=l-t.maxWidth),a&&d&&(e.top=c-t.minHeight),s&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,o,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);o.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,o=i._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,o,s,r,a,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,p=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,o){n[e]=t(i.css("padding"+o))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},o=c.containerOffset,s=c.containerSize.height,r=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:r,l=e.ui.hasScroll(p)?p.scrollHeight:s,c.parentData={element:p,left:o.left,top:o.top,width:a,height:l}))},resize:function(t){var i,n,o,s,r=e(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||t.shiftKey,d={top:0,left:0},h=r.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),o=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),o&&s&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,o=t.containerPosition,s=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),o=n.options,s=n.originalSize,r=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),o=e(this).data("ui-resizable-alsoresize"),s={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(o[t]||0)+(a[t]||0);i&&i>=0&&(s[t]=i||null)}),t.css(s)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,o=t.originalSize,s=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,h=o.width+u,p=o.height+d,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(r)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(r)?(t.size.width=h,t.size.height=p,t.position.top=s.top-d):/^(sw)$/.test(r)?(t.size.width=h,t.size.height=p,t.position.left=s.left-u):(t.size.width=h,t.size.height=p,t.position.top=s.top-d,t.position.left=s.left-u)}})}(e)}),_wAMD.define("jquery-ui/dialog",["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],function(e){!function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;
0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(o.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,n){var o,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(t.element[0],arguments)},s={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,o=n.resizable,s=this.uiDialog.css("position"),r="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,o){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(o,s){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var o=this,s=!1,r={};e.each(n,function(e,n){o._setOption(e,n),e in t&&(s=!0),e in i&&(r[e]=n)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,n,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!t&&o.resizable("destroy"),n&&"string"==typeof t&&o.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],o=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(o[e]=n[e],n[e]=t)}),i={my:n[0]+(o[0]<0?o[0]:"+"+o[0])+" "+n[1]+(o[1]<0?o[1]:"+"+o[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(e)}),_wAMD.define("components/regions/Dialog",["jquery","backbone-all","underscore","jquery-ui/dialog"],function(e,t,i){return t.Marionette.Region.extend({defaults:{title:"Default Title",closeOnEscape:!0,draggable:!1,modal:!0,resizable:!1,position:{my:"center",at:"center",of:window}},constructor:function(){i.extend(this,t.Events)},el:"#dialog-region",dialogClass:"popup-modal",onShow:function(e){i.extend({},e.dialog),this.view=e,this.dialogOptions=i.result(e,"dialog"),this.$el.dialog(this.getDefaultOptions(this.dialogOptions,e)),this.updateDialogCss(e),this.namespace=".dialog-"+Math.floor(1e6*Math.random()+1),this.setupBindings(e),i.result(this.view.options,"onShow")},onClose:function(){i.result(this.view.options,"onClose"),this.stopListening(),e("body").off("keydown"+this.namespace),e("body").off("click"+this.namespace),e(window).off("resize"+this.namespace)},updateDialogCss:function(t){var i=this.$el.find(".dialog-body");if(i.length){var n=i.height(),o=i.parent().height(),s=e(window).height()-170;n>o&&s>o&&(s=o-30),this.$el.addClass("hasBody"),i.css({maxHeight:s+"px"})}else this.$el.removeClass("hasBody");if(t&&this.dialogOptions&&this.dialogOptions.size){var r=this.dialogOptions.size.split("x");if(2==r.length){var a=this.$el.parent(),l=r[0]+"px",c=r[1]+"px";a.css({width:l,minWidth:l,maxWidth:l,height:c,minHeight:c,maxHeight:c,left:(e(window).width()-r[0])/2,top:(e(window).height()-r[1])/2})}}t&&this.dialogOptions&&this.dialogOptions.enableScrolling&&($dialogContent=e(".ui-dialog-content div:first"),$dialogContent.css({"max-height":r[1]-e(".ui-dialog-titlebar").height(),"padding-bottom":0}))},setupBindings:function(t){this.listenTo(t,"render",function(){this.updateView(t),this.updateDialogCss(t)}),this.previousView?this.listenTo(t,"dialog:close",this.restoreMainView):this.listenTo(t,"dialog:close",this.closeDialog),this.$el.dialog("option",{close:i.bind(this.closeDialog,this)}),this.listenTo(t,"dialog:update:buttons",this.createFooter),this.listenTo(t,"dialog:update:title",this.updateDialogTitle),this.listenTo(t,"dialog:reposition",this.reposition),e("body").on("keydown"+this.namespace,i.bind(this.handleKeydown,this)),e("body").on("click"+this.namespace,".ui-widget-overlay",i.bind(this.handleBackgroundClick,this));var n=i.bind(this.reposition,this);e(window).on("resize"+this.namespace,i.throttle(n,100))},reposition:function(){var e=this;e.$el.dialog({position:e.defaults.position})},closeDialog:function(){this.close(),this.$el.dialog("destroy")},cancelDialog:function(e){e&&e.preventDefault(),"function"==typeof this.view.dialogCancel?this.view.dialogCancel():(this.closeDialog(),this.previousView&&(this.previousView.close(),this.previousView=null))},handleKeydown:function(e){27==e.which&&this.$el.dialog("option","closeOnEscape")&&(e&&e.preventDefault(),this.cancelDialog(e))},handleBackgroundClick:function(){this.dialogOptions&&(this.dialogOptions.cancelAll||this.dialogOptions.cancelBg)&&this.cancelDialog()},getDefaultOptions:function(e,t){return this.updateView(t),e=e||{},e.buttons&&this.updateView(t),e.dialogClass=i.compact(["w-ui",e.dialogClass,this.dialogClass]).join(" "),e=i.defaults(e,this.defaults),e=i.omit(e,"buttons")},updateView:function(e){if(e.dialog){var t=i.isFunction(e.dialog)?e.dialog():e.dialog;(t.cancelX||t.cancelAll)&&this.createCancelX(e),t.cancelXThin&&this.createCancelXThin(e),t.buttons&&this.createFooter(t.buttons,e),e.bindUIElements()}},createCancelX:function(e){e.$el.find("a.close-x").length||(e.$el.prepend('<a autofocus href="#"></a>'),e.$el.prepend('<a href="#" class="close-x w-icon-delete"></a>'),e.events=e.events||{},e.events["click a.close-x"]=i.bind(this.cancelDialog,this),e.delegateEvents())},createCancelXThin:function(e){e.$el.find("a.close-x").length||(e.$el.prepend('<a autofocus href="#"></a>'),e.$el.prepend('<a href="#" class="close-x close-x-thin">&times;</a>'),e.events=e.events||{},e.events["click a.close-x"]=i.bind(this.cancelDialog,this),e.delegateEvents())},createFooter:function(t,i){var n,i=i||this.currentView;n=this.$el.find(".dialog-footer").length?this.$el.find(".dialog-footer").empty():e('<div class="dialog-footer" />'),n=this.createButtonFooter(n,t),n.append(i.$el.find(".footer")),i.$el.append(n)},createButtonFooter:function(e,t){return i.each(t,function(t){t.group&&t.buttons?e.append(this.createButtonGroup(t)):(t.html||t.text)&&e.append(this.createButton(t))},this),e},createButtonGroup:function(t){var n=e('<div class="'+t.group+'"/>');return i.each(t.buttons,function(e){n.append(this.createButton(e))},this),n},createButton:function(t){var i=t.type||"button",n=e(document.createElement(i));return t.text?n.text(t.text):t.html&&n.html(t.html),n.addClass(t.className||""),n},updateDialogTitle:function(e){this.$el.dialog("option","title",e)},showSecondaryDialog:function(e){this.ensureEl();var n=this.$el.parent(),o=e.isClosed||i.isUndefined(e.$el),s=e!==this.currentView;if(s)if(1==this.$el.find(">div").length){var r=["width","minWidth","maxWidth","height","minHeight","maxHeight","left","top"],a={};i.each(r,function(e){a[e]=n.css(e)}),this.previousCss=a,this.previousView=this.currentView,this.$el.find(">div").hide()}else this.close();e.render(),(s||o)&&this.$el.append(e.el),this.currentView=e,t.Marionette.triggerMethod.call(this,"show",e),t.Marionette.triggerMethod.call(e,"show")},restoreMainView:function(){this.previousView&&(this.currentView.close(),this.$el.find(">div").show(),t.Marionette.triggerMethod.call(this,"show",this.previousView),t.Marionette.triggerMethod.call(this.previousView,"reloadDialog"),t.Marionette.triggerMethod.call(this.previousView,"show"),this.$el.parent().css(this.previousCss),this.currentView=this.previousView,this.previousView=null)}})}),function(){var e=function(e){var t=function(t,i){e.extend(this,{options:i,element:t,$element:e(t),toggles:e("[rel="+t.id+"]")}),this.init()};t.prototype={constructor:t,init:function(){this.initialDisplay=this.$element.css("display"),this.$element.hide(),this.toggles.removeClass("open"),this.toggles.on("click.drawer",e.proxy(this.click,this))},destroy:function(){},open:function(){this.toggle(!0)},close:function(){this.toggle(!1)},toggle:function(e){var t=this,i="none"!=this.$element.css("display");"undefined"==typeof e&&(e=!i),e!=i&&(this.$element.slideToggle(200,function(){e&&t.options.onOpen&&t.options.onOpen(),!e&&t.options.onClose&&t.options.onClose(),t.options.onToggle&&t.options.onToggle()}),this.toggles.toggleClass("open",e))},click:function(e){e.preventDefault(),this.toggle()}},e.fn.drawer=function(){var i=Array.prototype.slice.call(arguments,0),n=i.shift();return this.each(function(){var o=e(this),s=o.data("drawer"),r=e.extend(!0,{},e.fn.drawer.defaults,"object"==typeof n&&n);s||o.data("drawer",s=new t(this,r)),"string"==typeof n&&s[n](i[0])})}};"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/drawer",["jquery"],e):e(jQuery)}(jQuery),_wAMD.define("membership/editor/collection/_baseMembershipCollection",["editor/collection/_baseCollection"],function(e){var t=e.extendBase({className:"Membership.Collection._baseCollection",rpcSource:_W.Membership.RPC,userKey:"owner_id"});return t.extend=function(t,i){return e.extend.call(this,t,i,_W.Membership.BackboneCollectionData)},t}),_wAMD.define("membership/editor/model/_baseMembershipModel",["editor/app","editor/model/_baseModel","membership/editor/collection/_baseMembershipCollection"],function(e,t,i){var n=t.extendBase({className:"Membership.Model._baseModel",syncEventAggregator:e.vent,unbatchRelatedModels:[],baseCollection:i,userKey:"owner_id",pageDirtyCheck:function(){return!0}});return n.extend=function(e,i){return t.extend.call(this,e,i,_W.Membership.BackboneModelData,"owner_id")},n}),_wAMD.define("membership/editor/model/Page",["./_baseMembershipModel"],function(e){return e.extend({useServerGeneratedDefaultsFor:"Page",className:"Membership.Model.Page",get:function(t){return"members"==t?this.getRelated("member_ids","site_member_id",require("membership/editor/collection/Member")):"groups"==t?this.getRelated("group_ids","site_group_id",require("membership/editor/collection/Group")):e.prototype.get.apply(this,arguments)}})}),_wAMD.define("membership/editor/collection/Page",["./_baseMembershipCollection","../model/Page"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"Page"})}),_wAMD.define("membership/editor/model/Group",["./_baseMembershipModel"],function(e){return e.extend({useServerGeneratedDefaultsFor:"Group",className:"Membership.Model.Group",get:function(t){return"members"==t?this.getRelated("member_ids","site_member_id",require("membership/editor/collection/Member")):"pages"==t?this.getRelated("page_ids","page_id",require("membership/editor/collection/Page")):e.prototype.get.apply(this,arguments)}})}),_wAMD.define("membership/editor/collection/Group",["./_baseMembershipCollection","../model/Group"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"Group"})}),_wAMD.define("membership/editor/model/Member",["./_baseMembershipModel","membership/editor/collection/Group","membership/editor/collection/Page"],function(e,t,i){return e.extend({useServerGeneratedDefaultsFor:"Member",className:"Membership.Model.Member",get:function(n){return"groups"==n?this.getRelated("group_ids","site_group_id",t):"pages"==n?this.getRelated("page_ids","page_id",i):e.prototype.get.apply(this,arguments)}})}),_wAMD.define("membership/editor/collection/Member",["jquery","./_baseMembershipCollection","../model/Member"],function(e,t,i){var n=t,o=n.prototype;return t.extend({model:i,useServerGeneratedDefaultsFor:"Member",fetch:function(t){return t=t&&t.searchText?e.extend({},this.fetchOptions,t):e.extend({sort:[{property:"created_date",direction:"DESC"}]},this.fetchOptions,t),o.fetch.call(this,t)}})}),_wAMD.define("tpl!components/chooser/list/item",[],function(){return'<td width="100%" data-id="{{id}}">\n	<i class="remove w-icon-delete"></i>\n	<i class="sort-handle w-icon-hamburger"></i>\n	{{#hasThumbnail}}\n		<div class="thumbnail-sizer">{{{thumbnail}}}</div>\n	{{/hasThumbnail}}\n	{{#icon}}\n		<span class="icon {{icon}}"></span>\n	{{/icon}}\n	<span title="{{name}}">{{name}}</span>\n	{{#hidden}}<i class="isHidden w-icon-hide"></i>{{/hidden}}\n</td>\n'}),_wAMD.define("components/chooser/list/ItemView",["underscore","backbone-all","mustache","tpl!components/chooser/list/item"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({className:"item",tagName:"tr",template:i.compile(n),templateHelpers:function(){var t=this,i=t.options.chooser,n=i.attrs,o=i.itemView.templateHelpers;return e.extend({},i.text,{id:function(){return this[n.id]},hidden:function(){return!this[n.visible]},hasThumbnail:function(){return!!t.model.thumbnail},thumbnail:function(){return t.model.thumbnail(80)}},e.isFunction(o)?o.call(t):o)},events:{"click .remove":"close"},intialize:function(e){this.options=e},onRender:function(){var e=this;e.options.sortable&&e.$el.addClass("sortable")}});return o}),_wAMD.define("tpl!components/chooser/list/empty",[],function(){return'<td colspan="2">\n	{{#modelsAvailable}}\n		{{noneChosen}}\n		<a href="#" class="add-products">{{select}}</a>\n	{{/modelsAvailable}}\n	{{^modelsAvailable}}\n		{{noneFound}} <a href="#" class="add-products">{{create}}</a>\n	{{/modelsAvailable}}\n</td>'}),_wAMD.define("components/chooser/list/EmptyView",["underscore","backbone-all","mustache","tpl!components/chooser/list/empty"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({className:"empty",tagName:"tr",template:i.compile(n),templateHelpers:function(){var t=this;return e.extend({},t.options.chooser.text,{modelsAvailable:function(){return!!t.options.availableModelCount}})},triggers:{"click a":"addModels"},initialize:function(e){this.options=e}});return o}),_wAMD.define("tpl!components/chooser/list/list",[],function(){return'<table class="list entity-list entity-list-headless entity-chooser" cellspacing="0">\n	<tbody></tbody>\n</table>\n'}),_wAMD.define("jquery-ui/sortable",["jquery","./core","./mouse","./widget"],function(e){!function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,o=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(n=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),n?!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o)?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,n){var o,s,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,s,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),s=this.options.axis,r={};s&&"x"!==s||(r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=e.left,r=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=n+c>a&&l>n+c&&t+u>s&&r>t+u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return o?this.floating?r&&"right"===r||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:o&&("down"===o&&i||"up"===o&&!i)
},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,o,s,r=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(o=e(l[i]),n=o.length-1;n>=0;n--)s=e.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&a.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,s,r,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(o=e(h[i]),n=o.length-1;n>=0;n--)s=e.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(d.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=d.length-1;i>=0;i--)for(r=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",r),u.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),s=o.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e(t.document[0].createElement(n)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?o.append("<td colspan='99'>&#160;</td>"):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var o,s,r,a,l,c,u,d,h,p,f=null,m=null;for(o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&e.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],m=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",n,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)e.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(d=this.items[s].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[s][c]-u)&&(h=!0,d+=this.items[s][c]),Math.abs(d-u)<r&&(r=Math.abs(d-u),a=this.items[s],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,s=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(e)}),_wAMD.define("components/chooser/list/ListView",["jquery","backbone-all","./ItemView","./EmptyView","tpl!components/chooser/list/list","jquery-ui/sortable"],function(e,t,i,n,o){var s=t.Marionette.CompositeView.extend({template:Mustache.compile(o),itemView:i,itemViewContainer:".list tbody",emptyView:n,templateHelpers:function(){return this.options.chooser.text},ui:{list:".list tbody"},onRender:function(){var t=this;if(t.options.sortable){var i=t.updateOrder.bind(t);t.listenTo(t.collection,"add remove",i),t.ui.list.sortable({update:i})}t.options.truncate&&t.collection.length>t.options.truncate&&(t.ui.list.find("tr:gt("+(t.options.truncate-1)+")").css("display","none"),t.ui.list.append('<tr class="viewAllRow"><td><a id="viewAllLink" class="btn btn-block btn-link">'+_W.tl("View All")+"</a></td></tr>"),t.ui.list.find("#viewAllLink").click(function(i){e(i.target).closest("tr").remove(),t.ui.list.find("tr").css("display","")}))},updateOrder:function(){var t=this;if(t.options.sortable){var i=t.ui.list.find("[data-id]").map(function(){return e(this).attr("data-id")});t.model.set(t.options.chooser.orderIdsKey,i.toArray())}},appendHtml:function(e,t,i){var n=e.itemViewContainer?e.$(e.itemViewContainer):e.$el,o=n.children();o.size()<=i?n.append(t.el):o.eq(i).before(t.el)},itemViewOptions:function(){var e=this.options;return{chooser:e.chooser,sortable:e.sortable,availableModelCount:e.availableModelCount}},initialize:function(e){this.options=e},onItemviewClose:function(e){this.collection.remove(e.model)},onItemviewAddModels:function(){this.trigger("addModels")}});return s}),_wAMD.define("tpl!components/chooser/add/item",[],function(){return'<label>\n	<input type="checkbox" name="selected" class="select" {{#selected}}checked{{/selected}}>\n	{{#hasThumbnail}}\n		<div class="thumbnail-sizer thumbnail">{{{thumbnail}}}</div>\n	{{/hasThumbnail}}\n	{{#icon}}\n		<span class="icon {{icon}}"></span>\n	{{/icon}}\n	<span class="name">{{name}}</span>\n</label>'}),_wAMD.define("components/chooser/add/ItemView",["underscore","backbone-all","mustache","tpl!components/chooser/add/item","util/ui/wInput"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({className:function(){var t=this,i=t.model,n=t.options.chooser,o=[],s=i.get(n.attrs.id),r=n.blacklist;return e.indexOf(r,s)>=0&&o.push("blacklist"),i.thumbnail&&o.push("no-thumbnail"),o.join(" ")},tagName:"li",template:i.compile(n),templateHelpers:function(){var t=this,i=t.options.chooser,n=(i.attrs,i.itemView.templateHelpers);return e.extend({},i.text,{selected:function(){return-1!=t.options.chosenModels.indexOf(t.model)},hasThumbnail:function(){return!!t.model.thumbnail},thumbnail:function(){return t.model.thumbnail(80)}},e.isFunction(n)?n.call(t):n)},ui:{selected:"input[name=selected]"},events:{"change input[name=selected]":"update"},initialize:function(e){this.options=e},onRender:function(){var e=this;e.ui.selected.prop("checked")&&e.$el.addClass("selected"),e.pauseUpdate=!0,e.ui.selected.wCheckbox(),e.pauseUpdate=!1},update:function(){var e=this;e.pauseUpdate||(e.$el.toggleClass("selected"),e.$el.hasClass("selected")?e.options.chosenModels.add(e.model,{at:0}):e.options.chosenModels.remove(e.model))}});return o}),_wAMD.define("tpl!components/chooser/add/empty",[],function(){return"<label>{{noneFound}}</label>"}),_wAMD.define("components/chooser/add/EmptyView",["backbone-all","mustache","tpl!components/chooser/add/empty"],function(e,t,i){var n=e.Marionette.ItemView.extend({tagName:"li",template:t.compile(i),templateHelpers:function(){return this.options.chooser.text},initialize:function(e){this.options=e}});return n}),_wAMD.define("tpl!editor/loading",[],function(){return'<div>\n	<span class="text-loading-animation">{{#tl}}Loading{{/tl}}</span>\n	<span class="progress"></span>\n</div>\n'}),_wAMD.define("components/views/LoadingView",["backbone-all","mustache","tpl!editor/loading"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i)});return n}),function(){var e=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("waypoints",["jquery"],function(i){return t(i,e)}):t(e.jQuery,e)}(this,function(i,n){var o,s,r,a,l,c,u,d,h,p,f,m,g,v,b,y;return o=i(n),d=e.call(n,"ontouchstart")>=0,a={horizontal:{},vertical:{}},l=1,u={},c="waypoints-context-id",f="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",b="waypoint",y="waypoints",s=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},e.data(c,this.id),u[this.id]=this,e.bind(m,function(){var e;return t.didScroll||d?void 0:(t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},n.setTimeout(e,i[y].settings.scrollThrottle))}),e.bind(f,function(){var e;return t.didResize?void 0:(t.didResize=!0,e=function(){return i[y]("refresh"),t.didResize=!1},n.setTimeout(e,i[y].settings.resizeThrottle))})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!d||e.vertical.oldScroll&&e.vertical.newScroll||i[y]("refresh"),i.each(e,function(e,n){var o,s,r;return r=[],s=n.newScroll>n.oldScroll,o=s?n.forward:n.backward,i.each(t.waypoints[e],function(e,t){var i,o;return n.oldScroll<(i=t.offset)&&i<=n.newScroll?r.push(t):n.newScroll<(o=t.offset)&&o<=n.oldScroll?r.push(t):void 0}),r.sort(function(e,t){return e.offset-t.offset}),s||r.reverse(),i.each(r,function(e,t){return t.options.continuous||e===r.length-1?t.trigger([o]):void 0})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,n,o=this;return n=i.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:n?0:t.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:t.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?i[y]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},i.each(e,function(e,t){return i.each(o.waypoints[e],function(e,n){var o,s,r,a,l;return o=n.options.offset,r=n.offset,s=i.isWindow(n.element)?0:n.$element.offset()[t.offsetProp],i.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(t.contextDimension*o/100))),n.offset=s-t.contextOffset+t.contextScroll-o,n.options.onlyOnScroll&&null!=r||!n.enabled?void 0:null!==r&&r<(a=t.oldScroll)&&a<=n.offset?n.trigger([t.backward]):null!==r&&r>(l=t.oldScroll)&&l>=n.offset?n.trigger([t.forward]):null===r&&t.oldScroll>=n.offset?n.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){return i.isEmptyObject(this.waypoints.horizontal)&&i.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([f,m].join(" ")),delete u[this.id]):void 0},e}(),r=function(){function e(e,t,n){var o,s;n=i.extend({},i.fn[b].defaults,n),"bottom-in-view"===n.offset&&(n.offset=function(){var e;return e=i[y]("viewportHeight"),i.isWindow(t.element)||(e=t.$element.height()),e-i(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=t,this.enabled=n.enabled,this.id="waypoints"+g++,this.offset=null,this.options=n,t.waypoints[this.axis][this.id]=this,a[this.axis][this.id]=this,o=null!=(s=e.data(v))?s:[],o.push(this.id),e.data(v,o)}return e.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete a[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,n;return(n=i(e).data(v))?(t=i.extend({},a.horizontal,a.vertical),i.map(n,function(e){return t[e]})):[]},e}(),p={init:function(e,t){var n;return null==t&&(t={}),null==(n=t.handler)&&(t.handler=e),this.each(function(){var e,n,o,a;return e=i(this),o=null!=(a=t.context)?a:i.fn[b].defaults.context,i.isWindow(o)||(o=e.closest(o)),o=i(o),n=u[o.data(c)],n||(n=new s(o)),new r(e,n,t)}),i[y]("refresh"),this},disable:function(){return p._invoke(this,"disable")},enable:function(){return p._invoke(this,"enable")},destroy:function(){return p._invoke(this,"destroy")},prev:function(e,t){return p._traverse.call(this,e,t,function(e,t,i){return t>0?e.push(i[t-1]):void 0})},next:function(e,t){return p._traverse.call(this,e,t,function(e,t,i){return t<i.length-1?e.push(i[t+1]):void 0})},_traverse:function(e,t,o){var s,r;return null==e&&(e="vertical"),null==t&&(t=n),r=h.aggregate(t),s=[],this.each(function(){var t;return t=i.inArray(this,r[e]),o(s,t,r[e])}),this.pushStack(s)},_invoke:function(e,t){return e.each(function(){var e;return e=r.getWaypointsByElement(this),i.each(e,function(e,i){return i[t](),!0})}),this}},i.fn[b]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],p[n]?p[n].apply(this,e):i.isFunction(n)?p.init.apply(this,arguments):i.isPlainObject(n)?p.init.apply(this,[null,n]):n?i.error("The "+n+" method does not exist in jQuery Waypoints."):i.error("jQuery Waypoints needs a callback function or handler option.")},i.fn[b].defaults={context:n,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return i.each(u,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=n.innerHeight)?e:o.height()},aggregate:function(e){var t,n,o;return t=a,e&&(t=null!=(o=u[i(e).data(c)])?o.waypoints:void 0),t?(n={horizontal:[],vertical:[]},i.each(n,function(e,o){return i.each(t[e],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),n[e]=i.map(o,function(e){return e.element}),n[e]=i.unique(n[e])}),n):[]},above:function(e){return null==e&&(e=n),h._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=n),h._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=n),h._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=n),h._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return p[e]=t},_invoke:function(e){var t;return t=i.extend({},a.vertical,a.horizontal),i.each(t,function(t,i){return i[e](),!0})},_filter:function(e,t,n){var o,s;return(o=u[i(e).data(c)])?(s=[],i.each(o.waypoints[t],function(e,t){return n(o,t)?s.push(t):void 0}),s.sort(function(e,t){return e.offset-t.offset}),i.map(s,function(e){return e.element})):[]}},i[y]=function(){var e,i;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[i]?h[i].apply(null,e):h.aggregate.call(null,i)},i[y].settings={resizeThrottle:100,scrollThrottle:30},o.load(function(){return i[y]("refresh")})})}.call(this),_wAMD.define("components/chooser/add/ListView",["jquery","backbone-all","./ItemView","./EmptyView","components/views/LoadingView","waypoints"],function(e,t,i,n,o){var s=t.Marionette.CollectionView,r=s.prototype,a=s.extend({tagName:"ul",itemView:i,emptyView:t.View,initialize:function(e){var t=this;t.options=e||{},t.pagedCollection=new e.chooser.fullCollection([],{mode:"infinite",state:{pageSize:10},searchText:e.searchText}),t.collection=t.pagedCollection.fullCollection,t.fetchPromise=t.pagedCollection.fetch().done(function(){t.emptyView=n,!t.isClosed&&t.collection.isEmpty()&&t.render()})},_initialEvents:function(){r._initialEvents.apply(this,arguments),this.listenTo(this.collection,"add remove reset",function(){e.waypoints("refresh")})},onShow:function(){var t=this,i=t.pagedCollection,n=new o({el:e("<div>").insertAfter(t.$el)}).render(),s=function(){i.hasNext()||n.close()};t.fetchPromise.done(s),t.$el.waypoint({context:t.$el.parent(),offset:"bottom-in-view",handler:function(e){"down"==e&&i.hasNext()&&i.getNextPage().done(s)}})},itemViewOptions:function(){var e=this.options;return{chooser:e.chooser,chosenModels:e.chosenModels}},onBeforeClose:function(){this.$el.waypoint("destroy")}});return a}),_wAMD.define("tpl!components/chooser/add/list",[],function(){return'<div class="add-layout">\n	<div class="add-layout-inner">\n		{{#searchEnabled}}\n			<div class="search-container">\n				<span class="input-labeled input-search">\n					<input type="text" class="search" placeholder="{{searchPlaceholder}}">\n				</span>\n			</div>\n		{{/searchEnabled}}\n\n		<div class="add-list">{{! listRegion }}</div>\n	</div>\n</div>'}),_wAMD.define("components/chooser/add/LayoutView",["jquery","backbone-all","mustache","./ListView","tpl!components/chooser/add/list"],function(e,t,i,n,o){var s=t.Marionette.Layout.extend({template:i.compile(o),ui:{search:".search"},regions:{listRegion:".add-list"},events:{click:"onClick","keyup .search":"search"},templateHelpers:function(){return this.options.chooser},initialize:function(t){var i=this;i.options=t||{},i.bodyClickHandler=e.proxy(i.close,i),e("body").bind("click",i.bodyClickHandler)},onRender:function(){this.renderList()},renderList:function(){var e=this;e.listRegion.show(new n({chooser:e.options.chooser,chosenModels:e.options.chosenModels,searchText:e.searchText}))},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;t.listRegion.currentView,clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.searchText=t.ui.search.val(),t.renderList()},n)},onBeforeClose:function(){e("body").unbind("click",this.bodyClickHandler)},onClick:function(e){e.stopPropagation()}});return s}),_wAMD.define("tpl!components/chooser/layout",[],function(){return'<div class="chooser-header">\n	<div class="add-container">\n		<button class="add btn-com btn-icon-left">\n			<span class="w-icon-plus"></span>\n			{{#modelsAvailable}}\n				{{#select}}{{select}}{{/select}}\n				{{^select}}{{#tl}}Select{{/tl}}{{/select}}\n			{{/modelsAvailable}}\n			{{^modelsAvailable}}\n				{{#create}}{{create}}{{/create}}\n				{{^create}}{{#tl}}Create{{/tl}}{{/create}}\n			{{/modelsAvailable}}\n		</button>\n\n		<div class="add-region"></div>\n	</div>\n\n	{{#list}}<h2>{{list}}</h2>{{/list}}\n</div>\n\n<div class="list-region"></div>'}),_wAMD.define("components/chooser/Chooser",["jquery","backbone-all","mustache","./list/ListView","./add/LayoutView","tpl!components/chooser/layout","tpl!editor/loading"],function(e,t,i,n,o,s,r){var a=t.Marionette.Layout.extend({className:function(){var e="chooser";return this.options.mini&&(e+=" chooser-mini"),e},template:i.compile(r),regions:{listRegion:".list-region",addRegion:".add-region"},ui:{numLoaded:".progress"},templateHelpers:function(){var t=this;return e.extend({},t.options.chooser.text,{modelsAvailable:function(){return!!t.availableModelCount}})},events:{click:"closeAddRegion","click .add":"openAddRegion"},initialize:function(t){var n=this;if(n.loading=!0,n.options=t,t.chooser=e.extend({foreignKey:!1,fullCollection:!1,attrs:{},text:{},itemView:{},mini:!1,blacklist:[],searchEnabled:!1},t.chooser),!t.chooser.attrs.relation)throw"Chooser requires option `reverseRelationKey`";var o=n.model.get(n.options.chooser.foreignKey);o.progress(function(e){n.ui.numLoaded.text&&n.ui.numLoaded.text(Math.round(100*e)+"%")}),e.when(o,n.options.chooser.fullCollection.count()).done(function(e,t){n.chosenModels=e,n.trackCollectionChanges(),n.availableModelCount=t,n.template=i.compile(s),n.loading=!1,n.rendered&&n.render()})},onRender:function(){var e=this;if(e.rendered=!0,!e.loading){var t=new n({model:e.model,collection:e.chosenModels,chooser:e.options.chooser,sortable:e.options.sortable,truncate:e.options.chooser.truncate,availableModelCount:e.availableModelCount});e.listRegion.show(t),e.listenTo(t,"addModels",e.openAddRegion)}},openAddRegion:function(e){e&&e.stopPropagation();var t=this;t.availableModelCount?!t.addRegion.currentView||t.addRegion.currentView.isClosed?t.addRegion.show(new o({model:t.model,chosenModels:t.chosenModels,chooser:t.options.chooser})):t.closeAddRegion():t.createModel()},closeAddRegion:function(){this.addRegion.close()},createModel:function(){throw"must override Chooser::createModel()"},trackCollectionChanges:function(){var e=this;e.added=new t.Collection,e.removed=new t.Collection,e.listenTo(e.chosenModels,{add:function(t){e.added.add(t),e.removed.remove(t)},remove:function(t){e.added.remove(t),e.removed.add(t)}})},save:function(){var e=this,t=e.options.chooser.attrs.relation;e.added.each(function(i){i.get(t).done(function(t){t.add(e.model),i.commit()})}),e.removed.each(function(i){i.get(t).done(function(t){t.remove(e.model),i.commit()})})}});return a}),_wAMD.define("membership/editor/settings/components/page/PageMemberChooser",["jquery","backbone-all","editor/app","membership/editor/collection/Member","components/chooser/Chooser"],function(e,t,i,n,o){var s=o.extend({initialize:function(t){t.chooser={foreignKey:"members",fullCollection:n,orderIdsKey:"email",searchEnabled:!0,searchPlaceholder:_W.tl("Search"),truncate:5,attrs:{id:"site_member_id",relation:"pages"},text:e.extend({list:_W.tl("Members"),select:_W.tl("Select Members"),create:_W.tl("Add a Member"),noneChosen:_W.tl("No members chosen."),noneFound:_W.tl("No members found.")},t.text||{}),itemView:{templateHelpers:{icon:"w-icon-user",hidden:!1,name:function(){return this.email
}}}},o.prototype.initialize.apply(this,arguments)},onRender:function(){o.prototype.onRender.apply(this,arguments)}});return s}),_wAMD.define("membership/editor/settings/components/page/PageGroupChooser",["jquery","backbone-all","editor/app","membership/editor/collection/Group","components/chooser/Chooser"],function(e,t,i,n,o){var s=o.extend({initialize:function(t){t.chooser={foreignKey:"groups",fullCollection:n,orderIdsKey:"email",searchEnabled:!0,searchPlaceholder:_W.tl("Search"),truncate:5,attrs:{id:"site_group_id",relation:"pages"},text:e.extend({list:_W.tl("Groups"),select:_W.tl("Select Groups"),create:_W.tl("Add a Group"),noneChosen:_W.tl("No groups chosen."),noneFound:_W.tl("No groups found.")},t.text||{}),itemView:{templateHelpers:{icon:"w-icon-group",hidden:!1}}},o.prototype.initialize.apply(this,arguments)},onRender:function(){o.prototype.onRender.apply(this,arguments)}});return s}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/Clazz",["jquery"],e):e(window.jQuery)}(function(e){function t(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}return t}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSelectbox/Dropdown",["jquery","mustache","util/Clazz"],e):e(window.jQuery,Mustache,clazz)}(function(e,t,i){function n(e){e.stopPropagation(),e.preventDefault()}var o={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,UP:38,DOWN:40,SPACE:32},s=i(Object,{init:function(t){this.opts=e.extend({},{allowClear:!0,iconsOnly:!1},t),this.opts.placeholder=this.opts.placeholder||this.opts.el.getAttribute("data-placeholder"),this._tabindex=this.opts.el.getAttribute("tabindex"),this.$el=e(this.opts.el).hide(),this.$el.attr("tabindex","-1"),this.initTemplates(),this.bufferTimeout,this.buffer=[],this.$el.data("wSelectbox")||this.render()},initTemplates:function(){this.dropdownTemplate=t.compile(this.opts.dropdownTemplate||'{{{display}}}<div class="dropdown-menu w-massless-scroll"><div class="scroll-outer"><div class="scroll"><ul>{{{items}}}</ul></div></div></div>');var e='<div class="wselectbox-search"><span class="input-labeled input-search"><input id="dropdown-search-field" class="flat" type="search" /></span></div>';this.listTemplate=t.compile(this.opts.listTemplate||'<div class="dropdown-menu w-massless-scroll"><div class="scroll-outer"><div class="scroll">'+(this.opts.addSearchbar?e:"")+"<ul>"+"{{{items}}}"+"</ul>"+"</div>"+"</div>"+"</div>"),this.displayTemplate=t.compile(this.opts.displayTemplate||'<a tabindex="{{tabindex}}" class="{{class}}"><span class="inner">{{{innerHTML}}}</span><span class="caret"></span></a>'),this.dropdownMenuTemplate=t.compile(this.opts.itemTemplate||'<li class="{{class}} {{#icon}}selectbox-icon{{/icon}}" data-value="{{value}}" {{#icon}}data-icon="{{icon}}"{{/icon}}>{{#icon}}<span class="icon {{icon}}"></span>{{/icon}}<span class="inner">{{{innerHTML}}}</span></li>')},initEvents:function(){var e=this;e.$el.closest("label").on("click.wSelectbox",function(){e.focus()}),e.$el.on("change",function(){e.updateSelected()}),e.$list.on("click","li[data-value]",function(t){var i=t.currentTarget.getAttribute("data-value");e.$el.val(i).trigger("change"),e.updateSelected(),e.isOpen()&&e.close()}),e.$searchfield.on("keyup",function(){e.filterItems()}),e.$display.on("keydown",function(){e.onKeydown.apply(e,arguments)}),e.$display.on("keyup",function(){e.onKeyup.apply(e,arguments)}),e.$display.on("hover",".dropdown-menu li",function(){e.onHover.apply(e,arguments)}),e.$display.on("click",".dropdown-toggle",function(){e.onClickToggle.apply(e,arguments)})},render:function(){this.$display=this.renderContainer().html(this.renderDisplay()),this.$list=e(this.renderList()),this.$searchfield=this.$list.find("#dropdown-search-field"),this.$choices=this.$list.find("li[data-value]"),this.$display.append(this.$list),this.$el.after(this.$display),this.onShow(),this.initEvents()},focus:function(){return this.$display.find(".dropdown-toggle").focus()},highlight:function(e){this.$choices.removeClass("dropdown-selected").eq(e).addClass("dropdown-selected"),this.ensureShown(e)},useValue:function(){var e=this.$el.val(),t=this.$choices.filter('li[data-value="'+e+'"]');this.highlight(t.index())},onShow:function(){},onClickToggle:function(){this.toggle(),this.isOpen()&&this.useValue()},onHover:function(t){this.$choices.removeClass("dropdown-selected"),e(t.currentTarget).addClass("dropdown-selected")},onKeydown:function(e){var t=!1;switch(e.which){case o.ESC:this.isOpen()&&(n(e),this.close());break;case o.SPACE:if(e.preventDefault(),this.buffer.length)break;t=!0,this.isOpen()?this.select():(this.open(),this.useValue());break;case o.TAB:this.isOpen()&&this.close();break;case o.UP:case o.DOWN:this.isOpen()||this.open(),e.preventDefault(),this.navigate(e.which===o.UP?-1:1);break;case o.BACKSPACE:this.buffer.pop()}!t&&/[A-Za-z0-9 ]/.test(String.fromCharCode(e.which))&&this.findOption(e.keyCode)},onKeyup:function(e){switch(e.which){case o.ENTER:this.isOpen()&&this.select()}},navigate:function(e){var t,i=this.$choices,n=i.filter(".dropdown-selected").get(0);t=n?i.index(n)+e:0,t>=i.length&&(t=i.length-1),0>t&&(t=0),this.highlight(t)},findOption:function(t){var i,n,o,s=this,r=s.$choices,a=String.fromCharCode(t).toLowerCase();clearInterval(s.bufferTimeout),s.bufferTimeout=setTimeout(function(){s.buffer=[]},750),s.buffer.push(a),a=s.buffer.join("").replace(/^\s+/,""),r.each(function(){return n=e(this),i=n.text().toLowerCase().trim(),o=n.index(),0===i.indexOf(a)?(s.highlight(o),!s.isOpen()&&s.select(),!1):void 0})},ensureShown:function(e){var t=this.$choices,i=this.$display.find(".dropdown-menu"),n=i.outerHeight(),o=t.eq(e),s=o.position().top,r=o.outerHeight();delta=s>0?1:0;for(var a=0,l=0;e+delta>l;l++)a+=t.eq(l).outerHeight();0>=s?i.scrollTop(a+1):s+r>=n&&i.scrollTop(a-n)},select:function(){var e=this.$choices.filter(".dropdown-selected");e.trigger("click")},isOpen:function(){return this.$display.hasClass("open")},open:function(){var t=this;this.$display.addClass("open"),e(document).on("mouseup.wSelectbox",function(){t.$list.is(":hover")||t.$display.is(":hover")||t.close.apply(t,arguments)})},close:function(){this.buffer=[],clearInterval(this.bufferTimeout),this.$display.removeClass("open"),e(document).off(".wSelectbox")},toggle:function(){this.$display.hasClass("open")?this.close():this.open()},renderDisplay:function(){var e,t,i=this.$el.children("option");return this.opts.placeholder?t=this.opts.placeholder:(e=i.filter(":selected"),e.length||(e=i.first()),t=e[0]||"Select a value"),this.displayTemplate({innerHTML:this.renderDisplayInnerHTML(t),tabindex:this._tabindex?this._tabindex:"0","class":this.getDisplayClass()})},renderList:function(){var e=this.$el.children("option");return this.listTemplate({items:this.renderItems(e)})},renderContainer:function(){var t=this.opts.block?document.createElement("span"):document.createElement("div"),i=this.getContainerClass().join(" "),n=e(t).addClass(i);return n.attr("id")&&n.attr("id",this.$el.attr("id")+"-selectbox"),n},renderItems:function(e){var t,i,n=this,o="";return e.each(function(e,s){if(i=void 0,!s.getAttribute("data-no-render")){if(n.opts.renderItemHTML&&(i=n.opts.renderItemHTML(s)),void 0===i){if(t=n.renderItemInnerHTML(s),n.$searchfield&&n.$searchfield.val()&&-1==t.indexOf(n.$searchfield.val()))return!0;i=n.dropdownMenuTemplate({value:s.value,icon:s.getAttribute("data-icon"),innerHTML:t,title:t.trim()})}i&&(o+=i)}}),o},filterItems:function(){var t=this;t.$choices.each(function(i,n){t.$searchfield.val()&&(-1==e(n).find(".selectbox-content").html().indexOf(t.$searchfield.val())?e(n).hide():e(n).show())})},getDisplayClass:function(){return"btn dropdown-toggle selectbox-display"},getContainerClass:function(){var e=[];return this.opts.dropup?e.push("dropup"):e.push("dropdown"),this.opts.iconsOnly&&e.push("dropdown-use-icon"),e},updateSelected:function(){var e=this.$el.val(),t=this.$el.find('[value="'+e+'"]');this.opts.allowClear&&this.$display.find(".selectbox-display .inner").html(this.renderDisplayInnerHTML(t[0]))},renderItemInnerHTML:function(e){return this.opts.renderItemInnerHTML?this.opts.renderItemInnerHTML(e):"string"==typeof e?e:e.innerHTML},renderDisplayInnerHTML:function(e){var t;if(_.isUndefined(e))t="";else if(this.opts.renderDisplayInnerHTML)t=this.opts.renderDisplayInnerHTML(e);else if(this.opts.iconsOnly&&e.getAttribute("data-icon")){var i=e.getAttribute("data-icon");t='<span class="selectbox-icon '+i+'"></span>'}else t=this.renderItemInnerHTML(e);return t},destroy:function(){e(document).off(".wSelectbox"),this.$display.remove(),this.$el.attr("tabindex",this._tabindex).removeData("wSelectbox").show(),this.$el.closest("label").off(".wSelectbox")}});return s}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSelectbox/ComDropdown",["jquery","mustache","util/Clazz","./Dropdown"],e):e(window.jQuery,Mustache,clazz,Dropdown)}(function(e,t,i,n){var o=i(n,{initTemplates:function(){n.prototype.initTemplates.apply(this,arguments),this.displayTemplate=t.compile(this.opts.displayTemplate||'<a tabindex="{{tabindex}}" class="{{class}}"><span class="inner">{{{innerHTML}}}</span><span class="arrow w-icon-chevron-down"></span></a>'),this.dropdownMenuTemplate=t.compile(this.opts.itemTemplate||'<li class="{{class}}{{#icon}}selectbox-icon-container{{/icon}}" data-value="{{value}}" {{#icon}}data-icon="{{icon}}"{{/icon}}><span title="{{title}}" class="inner">{{#icon}}<span class="selectbox-icon {{icon}}"></span>{{/icon}}<span class="selectbox-content">{{{innerHTML}}}</span></span></li>')},open:function(){this.$display.find(".arrow").removeClass("w-icon-chevron-down").addClass("w-icon-chevron-up"),n.prototype.open.apply(this,arguments)},close:function(){this.$display.find(".arrow").removeClass("w-icon-chevron-up").addClass("w-icon-chevron-down"),n.prototype.close.apply(this,arguments)},getContainerClass:function(){var e=n.prototype.getContainerClass.apply(this,arguments);return e.push("dropdown-com"),e}});return o}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSelectbox/ControlDropdown",["jquery","mustache","util/Clazz","./Dropdown"],e):e(window.jQuery,Mustache,clazz,Dropdown)}(function(e,t,i,n){var o=i(n,{initTemplates:function(){n.prototype.initTemplates.apply(this,arguments),this.displayTemplate=t.compile(this.opts.displayTemplate||'<a tabindex="{{tabindex}}" class="{{class}}" data-toggle="dropdown"><span class="inner">{{{innerHTML}}}</span><span class="caret"></span></a>')},initEvents:function(){var e=this;e.$display.on("click","li[data-value]",function(t){var i=t.currentTarget.getAttribute("data-value");e.$el.val(i).trigger("change"),e.updateSelected()})},getDisplayClass:function(){var e=n.prototype.getDisplayClass.apply(this,arguments);return e+" btn-control"}});return o}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSelectbox/DetachedDropdown",["jquery","mustache","util/Clazz","./Dropdown"],e):e(window.jQuery,Mustache,clazz,Dropdown)}(function(e,t,i,n){var o=i(n,{identifier:void 0,init:function(t){t=e.extend({},{detachedArrowTarget:".arrow"},t),this.identifier="detached-dropdown-container-"+Math.floor(10000001*Math.random()),n.prototype.init.apply(this,arguments)},initTemplates:function(){n.prototype.initTemplates.apply(this,arguments),this.listTemplate=t.compile(this.opts.listTemplate||'<div id="{{id}}" class="{{menuClasslist}}"><div class="detached-dropdown-mask"></div><div class="detached-dropdown-menu {{classlist}}"><div class="dropdown-menu w-massless-scroll"><span class="dropdown-menu-arrow"></span><div class="scroll-outer"><div class="scroll"><ul>{{{items}}}</ul></div></div></div></div></div>')},render:function(){this.$display=this.renderContainer().html(this.renderDisplay()),this.$detachedContainer=e(this.renderList()),this.$list=this.$detachedContainer.children(".detached-dropdown-menu"),this.$searchfield=this.$list.find("#dropdown-search-field"),this.$detachedArrow=this.$detachedContainer.find(".dropdown-menu-arrow"),this.$choices=this.$list.find("li[data-value]"),this.$detachedArrowTarget=this.$display.find(this.opts.detachedArrowTarget),this.$el.after(this.$display),this.onShow(),this.initEvents()},renderList:function(){var e=this.$el.children("option");return this.listTemplate({id:this.identifier,items:this.renderItems(e),classlist:this.getContainerClass().join(" "),menuClasslist:this.getMenuClass().join(" ")})},open:function(){var t=this.$display.outerHeight(),i=this.$display.outerWidth(),o=this.$display.offset();e(body).append(this.$detachedContainer),n.prototype.open.apply(this,arguments),this.$list.outerWidth()<i&&(o.width=i),o.top=o.top+t;var s=this.$list.css(o);setTimeout(function(){s.addClass("open")},50);var r=this.$detachedArrowTarget.position(),a=this.$detachedArrowTarget.outerWidth(),l=this.$detachedArrow.outerWidth(),c=e(window).height()-this.$display.offset().top-this.$display.outerHeight()-30;this.$choices.parent().css("max-height",c),this.$detachedArrow.css({left:r.left-l/2+a/2})},close:function(){n.prototype.close.apply(this,arguments);var t=this.identifier;this.$list.removeClass("open"),setTimeout(function(){e("#"+t).detach()},100)},destroy:function(){n.prototype.destroy.apply(this,arguments),e("#"+this.identifier).remove()},getContainerClass:function(){var e=n.prototype.getContainerClass.apply(this,arguments);return e.push("dropdown-detached"),e},getMenuClass:function(){var e=["detached-dropdown-menu-container","w-ui"];return _.isArray(this.opts.menuClass)?e=e.concat(this.opts.menuClass):_.isString(this.opts.menuClass)&&e.push(this.opts.menuClass),e}});return o}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSelectbox/ComDetachedDropdown",["jquery","mustache","underscore","util/Clazz","./ComDropdown","./DetachedDropdown"],e):e(window.jQuery,Mustache,_,clazz,Dropdown)}(function(e,t,i,n,o,s){var r=n(s,{initTemplates:function(){o.prototype.initTemplates.apply(this,arguments),this.listTemplate=t.compile(this.opts.listTemplate||'<div id="{{id}}" class="{{menuClasslist}}"><div class="detached-dropdown-mask"></div><div class="detached-dropdown-menu {{classlist}}"><div class="dropdown-menu w-massless-scroll"><span class="dropdown-menu-arrow"></span><div class="scroll-outer"><div class="scroll"><ul>{{{items}}}</ul></div></div></div></div></div>')},getContainerClass:function(){var e=o.prototype.getContainerClass.apply(this,arguments),t=s.prototype.getContainerClass.apply(this,arguments),n=e.concat(t);return i.unique(n)}});return r}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSelectbox",["jquery","mustache","./wSelectbox/Dropdown","./wSelectbox/ComDropdown","./wSelectbox/ControlDropdown","./wSelectbox/DetachedDropdown","./wSelectbox/ComDetachedDropdown"],e):e(window.jQuery,Mustache)}(function(e,t,i,n,o,s,r){"undefined"==typeof e.fn.wSelectbox&&e.fn.extend({wSelectbox:function(t){var a;return t=t||{},this.each(function(l,c){if("select"!==c.tagName.toLowerCase())throw"Invalid element, wSelectbox only allowed for select elements";if("string"==typeof t){if(a=e(c).data("wSelectbox"),!a)throw"Invalid wSelectbox element, initialize select element first.";if("undefined"==typeof a[t])throw"Method not found: "+t;a[t]()}else{switch(t.theme){case"com":a=new n;break;case"control":a=new o;break;case"detached":a=new s;break;case"com_detached":a=new r;break;default:a=new i}t.el=c,a.init(t),e(c).data("wSelectbox",a)}}),this}})}),_wAMD.define("tpl!commerce/editor/store/business-warning",[],function(){return"{{warning}}"}),_wAMD.define("commerce/editor/store/BusinessWarningView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/business-warning"],function(e,t,i,n,o){return t.Marionette.ItemView.extend({template:i.compile(o),dialog:{title:_W.tl("Upgrade Required"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Upgrade"),className:"btn-com btn-upgrade btn-success btn-upgrade-to-business"}]}],dialogClass:"taxes-business-warning-dialog"},initialize:function(){this.isTrialTest=Weebly.Restrictions.is_trial&&("without_credit_card"===Weebly.freeTrialTest||"with_credit_card"===Weebly.freeTrialTest),this.listenTo(n.vent,"user:upgrade",this.handleUpgrade),this.isTrialTest&&this.model.set("warning","You will need to upgrade your trial plan to Business in order to use this feature.")},events:{"click .btn-cancel":"cancel","click .btn-upgrade":"showBilling"},cancel:function(e){e.preventDefault(),this.trigger("dialog:close")},onShow:function(){this.isTrialTest&&("without_credit_card"===Weebly.freeTrialTest?e(".btn-upgrade-to-business").text(_W.tl("Try Business")):e(".btn-upgrade-to-business").text(_W.tl("Upgrade Trial Plan")))},onClose:function(){var e=this.model.get("cancel");_.isFunction(e)&&e()},showBilling:function(e){var t=this;e.preventDefault(),this.isTrialTest?"without_credit_card"===Weebly.freeTrialTest?Weebly.Editor.RPC.Billing.changeFreeTrialService("Weebly.businessSite12").done(function(){t.trigger("dialog:close"),location.reload(),startWait()}):"with_credit_card"===Weebly.freeTrialTest&&n.vent.trigger("billing:upgrade:window",{restrictionID:this.model.get("feature"),restrictionType:"feature",customTitle:_W.tl("Upgrade Your Trial Plan"),refer:"commerce"}):n.vent.trigger("billing:upgrade:window",{restrictionID:this.model.get("feature"),restrictionType:"feature",refer:"commerce"})},handleUpgrade:function(){Weebly.Restrictions.hasAccess(this.model.get("feature"))&&this.trigger("dialog:close")}})}),_wAMD.define("legacy/weebly_page_manager",["config","editor/app","tablet/api/external","legacy/weebly_restrictions","legacy/weebly_dialog"],function(e,t,i){function n(){if(e.chromeless||o(),gt=Weebly.PageManager.topLevelPages=Weebly.initialRight,vt=Weebly.PageManager.pages=it(),Weebly.initialMobileHome){var i=Weebly.initialMobileHome;Weebly.PageManager.pages[i.id]=i}var n=Weebly.Restrictions.accessValue("page_limit");if(Weebly.Restrictions.hasService(Weebly.Restrictions.proLevel)||typeof n===!0||(zt=parseInt(n)),zt>0){var r=Weebly.Restrictions.levelToName(Weebly.Restrictions.level),a=_W.tl('The %s plan is limited to %d pages. Please <a href="javascript:;" style="display:inline" class="upgrade-page-restriction">upgrade</a> to add more.');a=a.replace("%s",r).replace("%d",zt),jQuery("#pageManagerLimitWarning").html(a),jQuery("#pageManagerLimitWarning .upgrade-page-restriction").on("click",function(e){e.preventDefault(),Weebly.Restrictions.is_trial&&"without_credit_card"===Weebly.freeTrialTest?Weebly.Editor.RPC.Billing.changeFreeTrialService("Weebly.proSite12").done(function(){startWait(),location.reload()}):t.vent.trigger("billing:upgrade:window",{restrictionID:"page_limit",restrictionType:"feature",refer:"page_limit",level:"5"})})}else jQuery("#pageManagerLimitWarning").hide();s();var l=st();if(l&&!l.layout){var c=getCurrentThemeData();if(c){var u=getDefaultPageType(c,Weebly.view.isMobileView);u&&(l.layout=u,Weebly.mobile.setMobilePageType(l,l.mobile_layout,!1))}}e.chromeless||jQuery("#pageManagerListWrap").weeblyScroll(),_wAMD.require(["components/views/PromptView","editor/settings/model/SiteSettings","components/regions/Dialog"],function(e,i){var n=jQuery(".set-password-link");n.on("click",function(){Weebly.Restrictions.hasAccess("editable_site_password")?t.showDialog(new e({model:new i,message:_W.tl("You can change your site password later from the Settings tab."),placeholder:_W.tl("Type Password"),title:_W.tl("Set Site Password"),callback:function(e){var t=this,i=e;pushLoading(),t.model.save({password:i}).done(function(){Weebly.PageManager.sitePasswordChanged(sitePassword,i),sitePassword=i,popLoading(),n.parent().hide()})}})):t.vent.trigger("billing:upgrade:window",{restrictionID:"editable_site_password",restrictionType:"feature",refer:"displaySiteSettings"})})})}function o(){var e={"Commerce.Model.Category":{kind:"category",id:"site_category_id"},"Commerce.Model.Product":{kind:"product",id:"site_product_id"}};_wAMD.require(["underscore","commerce/editor/model/_baseCommerceModel"],function(t,i){i.vent.on("delete:category delete:product",function(i){var n=e[i._class];n&&t.each(Weebly.PageManager.pages,function(e){"store"==e.kind&&e.store_page_kind==n.kind&&e.store_page_kind_id==i.get(n.id)&&jQuery.post(ajax,{pos:"page_clean_commerce",page_id:e.id,token:Weebly.RequestToken},function(t){t.success&&(e.hidden=1,e.kind="page",null==e.store_page_kind,null==e.store_page_kind_id)},"json")})})})}function s(){r(),a()}function r(){pageOrder=[];for(var e=0;e<gt.length;e++)pageOrder.push(gt[e].id)}function a(){sitePages={},$H(vt).each(function(e){sitePages[e[0]]=e[1].title})}function l(e){return"nhd"==source&&"password"===e?(I(!1),jQuery("#pageManagerVisibility").hide(),jQuery("#page-manager-visibility-input").val("public"),N(),void 0):(jQuery("#page-manager-visibility-input").val(e),Mt&&Mt.updateSelected(),void 0)}function c(e){var t=jQuery("#pageManagerVisibility .chooser");e.pwprotected?(t.hide(),l("password")):parseInt(e.id,10)<0?(t.hide(),l("public")):(Wt=!0,Weebly.Membership.RPC.Page.getPageMembersOnly(e.id,function(e){e?(t.show(),l("membership")):(t.hide(),l("public")),Wt=!1}))}function u(){var e=Weebly.Commerce.Editor.Pages.View;ft?(e.PageTypeStorefrontLink.update(),e.PageTypeStoreCategoryLink.render(),e.PageTypeStoreProductLink.render()):h(),ft.show(),Weebly.view.isMobileView?(jQuery("#pageManagerLayoutList").hide(),Weebly.view.setStandardView(u)):jQuery("#pageManagerLayoutList").show(),d(),bt?(ft.scrollTop=Rt,x(),R(bt),$H(vt).each(function(e){D(e[1])})):P(gt[0]),Weebly.Permissions&&Weebly.Permissions.hasContributors&&refreshPageData(),jQuery("#pageManagerListWrap").weeblyScroll("update")}function d(){var e=jQuery("#pageManager");0!==e.length&&e.height(getInnerHeight()-e.offset().top)}function h(){function e(e){return i(e)}function i(e){pushLoading(),$("pageManagerSaveButton").addClassName("disabled"),N(function(){popLoading(),$("pageManagerSaveButton").removeClassName("disabled")}),e&&e.stop()}function n(){N(function(){hasDoneUserEvent("x-design")||showEvent("x-design"),Pages.go("editMenu"),bt.extlink?goUpdateList(Weebly.PageManager.topLevelPages[0].id,1):goUpdateList(bt.id,1)})}if(Weebly.Commerce){var o=Weebly.Commerce.Editor.Pages.View;o.PageTypeStorefrontLink.initialize(),o.PageTypeStoreCategoryLink.initialize(),o.PageTypeStoreProductLink.initialize()}ft=$("pageManager"),C(),mt=$("pageManagerList").update(),T(gt,mt),k(),$("pageManagerEditButton")&&$("pageManagerEditButton").observe("click",function(e){e.stop(),N(function(){goUpdateList(bt.id,1)})}),$("pageManagerCopyButton").observe("click",function(e){e.stop(),M()}),$("pageManagerDeleteButton").observe("click",function(e){e.stop(),showConfirm({title:_W.tl("Delete Page"),message:_W.tl("Are you sure you want to delete this page?"),okText:_W.tl("Yes, delete page"),cancelText:_W.tl("Cancel"),onConfirm:function(){w(bt)}})});var s=jQuery("#pageManagerAddButtons"),r=jQuery("#pageManagerAddPageMenuButton"),a=new Weebly.HoverToolbar({targetElement:r.get(0),align:"right"});a.setAutoShow(!1),a.setAutoHide(!1),jQuery(a.getInnerElement()).append(s),jQuery(document).on("click",function(e){jQuery(e.target).closest(r).length||a.hide()}),r.on("click",function(){if(s.is(":visible"))a.hide(),r.blur();else{if(zt>0&&X()>=zt){var e=_W.tl("The %s plan has a %d page limit. Please upgrade to add more.");return e=e.replace("%s",Weebly.Restrictions.levelToName(Weebly.Restrictions.level)),e=e.replace("%d",zt),Weebly.Restrictions.is_trial&&"without_credit_card"===Weebly.freeTrialTest?t.showDialog(new pt({message:e,title:_W.tl("Page Limit"),confirmText:_W.tl("Try Pro"),callback:function(e){e&&Weebly.Editor.RPC.Billing.changeFreeTrialService("Weebly.proSite12").done(function(){startWait(),location.reload()})}})):t.showDialog(new pt({message:e,title:_W.tl("Page Limit"),confirmText:_W.tl("Upgrade"),callback:function(e){e&&t.vent.trigger("billing:upgrade:window",{restrictionID:"page_limit",restrictionType:"feature",refer:"page_limit",level:"5"})}})),void 0}var i=Weebly.Commerce.Editor.Pages.View;i.PageTypeStorefrontLink.toggleAddPage(),i.PageTypeStoreCategoryLink.toggleAddPage(),i.PageTypeStoreProductLink.toggleAddPage(),a.show()}}),$("pageManagerAddPage").observe("click",function(){b("page")}),$("pageManagerAddLink").observe("click",function(){b("link")}),$("pageManagerAddBlog").observe("click",function(){b("blog")}),$("pageManagerAddStore").observe("click",function(){b("storefront")}),$("pageManagerAddStoreCategory").observe("click",function(){b("storeCategory")}),$("pageManagerAddStoreProduct").observe("click",function(){b("storeProduct")}),$("pageManagerContentForm").observe("submit",function(e){e.stop()}),wt=$("pageManagerTitleInput").observe("keypress",function(t){13==t.keyCode&&e(t)}),wt=$("pageManagerTitleInput").observe("input",function(){bt&&(tmpPage=Object.clone(bt),tmpPage.title=W($("pageManagerTitleInput").value),D(tmpPage))}),_t=new ct("pageManagerHideInput",{onUserChange:function(){K(bt)||N()},onChange:function(e){var t=$(this).up().up();e?t.addClassName("pageManagerHide-checked"):t.removeClassName("pageManagerHide-checked")}}),bt&&c(bt),_wAMD.require(["util/ui/drawer"],function(){jQuery("#pageManagerAdvanced").drawer()}),_wAMD.require(["membership/editor/model/Page","membership/editor/collection/Page","membership/editor/settings/components/page/PageMemberChooser","membership/editor/settings/components/page/PageGroupChooser"],function(e,t,i,n){Weebly.Membership.RPC.Page.read({filter:[{property:"owner_id",value:window.userID},{property:"site_id",value:window.currentSite},{property:"page_id",value:bt.id}]}).done(function(t){kt=parseInt(bt.id,10)>=0&&t.data&&t.data.length>0?e.findOrCreate(t.data[0]):new e,St=kt.get("member_ids"),Tt=kt.get("group_ids"),Ct=new i({model:kt,el:"#membership-page-chooser"}),xt=new n({model:kt,el:"#membership-group-chooser"}),Ct.render(),xt.render()})}),_wAMD.require(["util/ui/wSelectbox","components/regions/Dialog","commerce/editor/store/BusinessWarningView"],function(){jQuery("#page-manager-visibility-input").wSelectbox({theme:"com"}).on("change",function(e){var i=jQuery("#pageManagerVisibility .chooser");switch(e.currentTarget.value){case"password":i.hide(),Weebly.Restrictions.hasAccess("editable_site_password")?(bt.pwprotected=!0,I(!0)):(l("public"),t.vent.trigger("billing:upgrade:window",{restrictionID:"editable_site_password",restrictionType:"feature",refer:"pagesMenu"}));break;case"public":i.hide(),bt.pwprotected=!1,I(!1);break;case"membership":Weebly.Restrictions.hasAccess("membership_settings")?(i.show(),bt.pwprotected=!1,I(!1)):(i.hide(),l("public"),t.vent.trigger("billing:upgrade:window",{restrictionID:"membership_settings",restrictionType:"feature",refer:"pagesMenu"}))}N(),Weebly.Menus.updateMenu()}),Mt=jQuery("#page-manager-visibility-input").data("wSelectbox")}),externalWCheckbox=new ct("pageManagerExternalInput",{onUserChange:function(e){e?g(!0,!0):(v(!0),K(bt)||N())}}),jQuery("#pageManagerUrlTargetField").find("input[type=radio]").wRadio(),$("pageManagerUrlInput").observe("keypress",function(t){13==t.keyCode&&e(t)}),$("pageManagerSaveButton").observe("click",n),jQuery("#pageManagerContainer .w-icon-question").popover({trigger:"hover",width:100}),At=new ct("pageManagerHideSearchInput")}function p(e){e=e||bt;var t=e.seo_title||"";$("pageManagerSEOTitleInput").value=W(t),$("pageManagerDescriptionInput").value=W(e.description),$("pageManagerKeywordsInput").value=W(e.keywords),$("pageManagerFooterInput").value=e.footer||"",$("pageManagerHeaderInput").value=e.header||"",At.setValue(e.search_hidden?1:0)}function f(){jQuery("#pageManagerListWrap").weeblyScroll("update"),m();var e=X();e>1?$("pageManagerTip").show():$("pageManagerTip").hide()}function m(){if(zt>0){var e=0;mt.select("div").each(function(t){zt>e?t.removeClassName("overLimit"):t.addClassName("overLimit"),e++})}}function g(e,t){var i=$("pageManagerEditButton"),n=$("pageManagerCopyButton"),o=$("pageManagerHide"),s=$("pageManagerVisibility"),r=$("pageManagerExternal"),a=$("pageManagerUrlField"),l=$("pageManagerUrlInput");$("pageManagerLayout"),$("pageManagerStoreCategory").hide(),$("pageManagerStoreProduct").hide(),r.show(),i&&i.hide(),n.hide(),o.hide(),s.hide(),a.show(),jQuery("#pageManagerAdvancedLink").hide(),t&&l.focus(),Pt=!0}function v(){var e=$("pageManagerEditButton"),t=$("pageManagerCopyButton"),i=$("pageManagerHide"),n=$("pageManagerVisibility"),o=$("pageManagerExternal"),s=$("pageManagerUrlField");o.hide(),e&&e.show(),t.show(),i.show(),n.show(),s.hide(),jQuery("#pageManagerAdvancedLink").show(),Pt=!1}function b(e){var i,n,o,s=getDefaultPageType(currentThemeData,Weebly.view.isMobileView);switch(e){case"blog":i=_W.tl("Blog");break;case"link":var r="http://";i=_W.tl("Link"),e="page";break;case"storefront":i=_W.tl("Store"),e="store",s="no-header",n="category",o=t.commerce.storefrontSettings.get("storefront_category_id");break;case"storeCategory":i=_W.tl("Category"),e="store",s="no-header",n="category";break;case"storeProduct":i=_W.tl("Product"),e="store",s="no-header",n="product";break;default:i=_W.tl("New Page")}y({id:Ft--+"",layout:s,blog:"blog"==e?1:0,title:i,kind:e||"page",store_page_kind:n,store_page_kind_id:o,hidden:0,search_hidden:0,pwprotected:G()?1:0,header:"",footer:"",keywords:"",description:"",mobile_layout:"",editable:!0,children:[],extlink:r,extlinktarget:"",isNewPage:!0})}function y(e){Lt=!0,N(function(){gt.push(e),vt[e.id]=e,s();var t=A(e);mt.insert(t),Et.refresh(),f(),ft.scrollTop=1e7,P(e),gt.length>2&&showEvent("x-pages-subpages")})}function w(e){K(e)?_(e):(q(),new Ajax.Request(ajax,{parameters:{pos:"removepage",page_id:e.id,site_id:currentSite,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){V(),t.responseText.match(/PAGELOCKED/)?showWarning(_W.tl("This page is currently being edited by another user")):_(e)},onFailure:function(){V(),errFunc.apply(this,arguments)},onException:function(){V(),exceptionFunc.apply(this,arguments)}}))}function _(e){Lt=!0;var t=Ot[e.id].up(),i=t.up(),n=t.previous(),o=t.next();if(t.select("> ul > li").each(function(e){i.insertBefore(e,o)}),t.remove(),S(),B(),delete vt[e.id],delete Ot[e.id],f(),a(),e==bt){bt=null;var s;o?s=vt[o.getAttribute("data-id")]:n?s=vt[n.getAttribute("data-id")]:"pageManagerList"!=i.id?s=vt[i.up().getAttribute("data-id")]:gt.length&&(s=gt[0],ft.scrollTop=0),s&&P(s)}}function M(){var e=bt;N(function(){new Ajax.Request(ajax,{parameters:{pos:"copypage",page_id:e.id,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){var i=Object.clone(e);i.id=t.responseText.replace(/[^\d]/g,""),i.children=[],y(i)},onFailure:errFunc})})}function C(){ft.observe("scroll",x);var e=$(document.body);e&&(qt=e.getHeight())}function x(){return}function k(){Weebly.jQuery(mt).touchit(),Et=Weebly.PageManager.nestedSortable=NestedSortable.create(mt,{scroll:"pageManagerListWrap",allowIndent:ENABLE_PAGE_HIERARCHY,constraint:ENABLE_PAGE_HIERARCHY?null:"vertical",onStart:function(){var e=$(this);e.addClassName("dragging")},onPop:function(){S()},onChange:function(){var e=gt[0];Nt=!0,B(),N(null,!0),e!==gt[0]&&Weebly.mobile.setMobilePageType(e,"",!1)},onEnd:function(){var e=$(this);e.removeClassName("dragging"),S(),m(),setTimeout(function(){e.style.zIndex=""},0),setTimeout(function(){Nt=!1},0)}})}function S(){mt.select("div").each(function(e){e.removeClassName("home")}),Dt=mt.select("> li:eq(0) div")[0],Dt&&Dt.addClassName("home")}function T(e,t){for(var i=0;i<e.length&&"member-login"!=e[i].kind&&"member-logout"!=e[i].kind;i++){var n=A(e[i]);if(e[i].children.length){var o=new Element("ul");T(e[i].children,o),n.insert(o)}t.insert(n)}S(),f()}function A(e){var t=new Element("li",{"data-id":e.id}),i=new Element("div").update('<a><span class=\'icons\'><i class="w-icon-hide"></i><i class="w-icon-secure"></i><i class="w-icon-user"></i><i class="w-icon-blog-comment"></i><i class="w-icon-shopping-cart"></i><i class="w-icon-external"></i><i class="w-icon-home"></i></span><span class=\'text\'></span></a>').observe("click",function(){Nt||P(e)
});return t.insert(i),Ot[e.id]=i,D(e),t}function D(e){var t=E(e),i=t&&t.updatePage(e),n=Ot[e.id];n&&n.select("span.text")[0].update(_W.tl("<em>loading...</em>")),jQuery.when(i).done(function(){if(n){var t=e.extlink&&!J(e);t?n.addClassName("external"):n.removeClassName("external"),e.hidden&&!t?n.addClassName("hidden"):n.removeClassName("hidden"),e.pwprotected&&!t?n.addClassName("protected"):n.removeClassName("protected"),"blog"==e.kind?n.addClassName("blog"):n.removeClassName("blog"),"store"==e.kind?n.addClassName("store"):n.removeClassName("store"),e.membership_required?n.addClassName("membership"):n.removeClassName("membership"),n.select("span.text")[0].update(e.title)}})}function E(e){if("store"==e.kind){var i=Weebly.Commerce.Editor.Pages.View;if("category"==e.store_page_kind)return e.store_page_kind_id==t.commerce.storefrontSettings.get("storefront_category_id")?i.PageTypeStorefrontLink:i.PageTypeStoreCategoryLink;if("product"==e.store_page_kind)return i.PageTypeStoreProductLink}return!1}function P(e){function t(){bt&&Ot[bt.id].removeClassName("active"),bt=e,Ot[bt.id].addClassName("active"),R(e),setTimeout(function(){$("pageManager").visible()&&(wt.focus(),x())},0)}bt?N(function(e){e&&t()}):t()}function R(e){var t=$("pageManagerVisibility"),i=$("pageManagerStoreCategory");pageManagerStoreProduct=$("pageManagerStoreProduct"),$("pageManagerDeleteButton").show(),e.editable?($("pageManagerUneditable").hide(),$("pageManagerContentForm").show()):($("pageManagerContentForm").hide(),$("pageManagerUneditable").show()),e.isNewPage&&!e.blog&&"store"!==e.kind?(wt.value="",e.isNewPage=!1):wt.value=W(e.title),_t.setValue(!!e.hidden),jQuery("#pageManagerVisibility .chooser").hide(),Ct&&Ct.remove(),xt&&xt.remove(),_wAMD.require(["membership/editor/collection/Page","membership/editor/model/Page","membership/editor/settings/components/page/PageMemberChooser","membership/editor/settings/components/page/PageGroupChooser"],function(t,i,n,o){Weebly.Membership.RPC.Page.read({filter:[{property:"owner_id",value:window.userID},{property:"site_id",value:window.currentSite},{property:"page_id",value:e.id}]}).done(function(t){kt=parseInt(e.id,10)>=0&&t.data&&t.data.length>0?i.findOrCreate(t.data[0]):new i,0==jQuery("#pageManagerVisibility .chooser").length&&jQuery("#pageManagerVisibility").append('<div id="membership-group-chooser" class="chooser" style="display:none;"></div><div id="membership-member-chooser" class="chooser" style="display:none;"></div>'),Ct=new n({model:kt,el:"#membership-member-chooser"}),xt=new o({model:kt,el:"#membership-group-chooser"}),Ct.render(),xt.render(),c(e),St=kt.get("member_ids"),Tt=kt.get("group_ids"),kt.on("change:member_ids",function(){N()}),kt.on("change:group_ids",function(){N()})})}),I(!!e.pwprotected),$("pageManagerExternal"),J(e)&&e.extlink&&(e.extlink="",e.extlinktarget=""),i.hide(),pageManagerStoreProduct.hide(),e.extlink?($("pageManagerUrlInput").value=e.extlink,e.extlinktarget?jQuery("#pageManagerUrlTargetNewInput").prop("checked",!0).trigger("reread"):jQuery("#pageManagerUrlTargetSameInput").prop("checked",!0).trigger("reread"),externalWCheckbox.setValue(!0),g()):($("pageManagerUrlInput").value="http://",jQuery("#pageManagerUrlTargetSameInput").prop("checked",!0).trigger("reread"),externalWCheckbox.setValue(!1),p(e),v(),Weebly.Commerce&&"store"===e.kind?(l("public"),$("pageManagerHide").hide(),jQuery("#pageManagerAdvancedLink").hide(),jQuery("#pageManagerAdvanced").hide(),$("pageManagerCopyButton").hide(),$("pageManagerEditButton")&&$("pageManagerEditButton").hide(),E(e).select(e)):(t.show(),jQuery("#pageManagerAdvancedLink").show(),jQuery("#pageManagerAdvanced").show()),"nhd"==source&&t.hide()),jQuery("#pageManagerAdvanced").hide(),jQuery("#pageManagerAdvancedLink").removeClass("open");var i=$("pageManagerStoreCategory");1==Object.keys(vt).length&&$("pageManagerDeleteButton").hide(),z(e),Ht=$("pageManagerContent").getHeight()}function z(e){var i=E(e),n=i&&i.updatePage(e);jQuery.when(n).done(function(){var i=currentThemeData.page_type_icons,n=getOrderedPageTypes(currentThemeData.page_type_templates,Weebly.view.isMobileView),o=e.layout;o&&o in currentThemeData.page_type_templates||(o="title"==o&&"no-header"in currentThemeData.page_type_templates?"no-header":n[0]),Bt=n.length>1?!0:!1;var s=$("pageManagerLayout");if(e.extlink)s.hide();else if("store"!==e.kind||"product"!=e.store_page_kind&&e.store_page_kind_id==t.commerce.storefrontSettings.get("storefront_category_id"))if(Bt){var r=$("pageManagerLayoutList");r.update(),n.each(function(e){var t="";t="tall-header"==e||"short-header"==e||"no-header"==e||"landing"==e?"pt-smsquare-"+e+(i[e]||1):"pt-smsquare-custom";var n=htmlEscape(e);switch(e){case"tall-header":n=_W.tl("Tall Header");break;case"short-header":n=_W.tl("Short Header");break;case"no-header":n=_W.tl("No Header");break;case"landing":n=_W.tl("Landing Page");break;case"title":n=_W.tl("Title Page");break;case"splash":n=_W.tl("Splash Page")}var s=new Element("div",{id:"pt-smsquare-"+e,"class":"pt-smsquare "+t}).update("<div>"+(n?"<span>"+n+"</span>":"")+"</div>").observe("click",O);r.insert(s),o==e&&s.addClassName("pt-smsquare-selected")}),s.show()}else s.hide();else s.hide()})}function O(){$("pageManagerLayoutList").childElements().each(function(e){e.removeClassName("pt-smsquare-selected")}),this.addClassName("pt-smsquare-selected"),K(bt)||N()}function F(){var e=$$("#pageManagerLayoutList > .pt-smsquare-selected")[0];return e?e.id.replace("pt-smsquare-",""):"no-header"}function W(e){var t=new Element("span");return t.update(e.replace(/\\'/g,"'").replace(/<\/?script>/g,"")),t.firstChild?t.firstChild.nodeValue:""}function I(e){e&&!window.sitePassword?$("pageManagerProtectWarning").show():$("pageManagerProtectWarning").hide()}function N(e,t,i){e&&It.push(e),Wt||L(e,t,i)}function L(e,i){function n(e){V(),D(a),Wt=!1;var t=It.clone();It=[];for(var i=0;i<t.length;i++)t[i](e)}Wt=!0;var o=Weebly.Commerce.Editor.Pages.View,r=Object.clone(bt),a=bt,l=a.id,c=E(a);if(a.title=W(wt.value),a.hidden=_t.getValue()?1:0,a.pwprotected="password"==jQuery("#page-manager-visibility-input").val()?1:0,a.membership_required="membership"==jQuery("#page-manager-visibility-input").val()?1:0,Bt&&!a.extlink){var u=F();c&&c.setLayout&&c.setLayout(a,u),a.layout=u}if("store"==a.kind&&(a.layout="no-header","category"==a.store_page_kind?a.store_page_kind_id!=t.commerce.storefrontSettings.get("storefront_category_id")&&(a.store_page_kind_id=o.PageTypeStoreCategoryLink.val()):"product"==a.store_page_kind&&(a.store_page_kind_id=o.PageTypeStoreProductLink.val()),""===a.title)){var d="";if("category"===a.store_page_kind){if(t.commerce.storefrontSettings.get("storefront_category_id")===a.store_page_kind_id)d=_W.tl("Store");else if(dt){var h=dt.findOrCreate({site_category_id:a.store_page_kind_id});h.fetch().done(function(){d=h.get("name")})}}else if("product"===a.store_page_kind&&ht){var p=ht.findOrCreate({site_product_id:a.store_page_kind_id});p.fetch().done(function(){d=p.get("name")})}a.title=d}var f="";externalWCheckbox.getValue()&&(f=$("pageManagerUrlInput").value.strip(),f&&(f.match(/^https?\:\/\//)||(f="http://"+f),a.extlinktarget=jQuery("input[name=pageManagerUrlTargetInput]:checked").val())),a.extlink=f,Object.extend(a,{seo_title:$("pageManagerSEOTitleInput").value,description:$("pageManagerDescriptionInput").value,keywords:$("pageManagerKeywordsInput").value,footer:$("pageManagerFooterInput").value,header:$("pageManagerHeaderInput").value,search_hidden:At.getValue()?1:0});var m=!1;if(kt&&((ut.difference(kt.get("member_ids"),St).length||ut.difference(St,kt.get("member_ids")).length)&&(m=!0),(ut.difference(kt.get("group_ids"),Tt).length||ut.difference(Tt,kt.get("group_ids")).length)&&(m=!0)),i||K(a)||!tt(a,r)||m){Lt=!0,q(),kt&&(St=kt.get("member_ids"),Tt=kt.get("group_ids"));var g=K(a);new Ajax.Request(ajax,{parameters:{pos:"right",site_id:currentSite,cookie:document.cookie,pageid:Q(l)?"":l,kind:a.kind||"page",store_page_kind:a.store_page_kind,store_page_kind_id:a.store_page_kind_id,newtitle:a.title,hidden:a.hidden?1:0,search_hidden:a.search_hidden?1:0,pwprotected:a.pwprotected?1:0,membership_required:a.membership_required?1:0,header:a.header||"",footer:a.footer||"",keywords:a.keywords||"",seo_title:a.seo_title||"",description:a.description||"",extlink:a.extlink||"",extlinktarget:a.extlinktarget||"",layout:a.layout||"",mobile_layout:a.mobile_layout||"",hierarchy:Object.toJSON(Z()),token:Weebly.RequestToken},onSuccess:function(e){var t=e.responseText.evalJSON(),i=t.id,o=t.title;i!=l&&(vt[i]=a,delete vt[l],Ot[i]=Ot[l],t.blog_id&&(vt[i].blog_id=t.blog_id),delete Ot[l],Ot[i].up().setAttribute("data-id",i),a.id=i,l=i),o!=a.title&&(a.title=o,R(a)),s(),kt&&(g&&kt.set("page_id",i),Weebly.Membership.RPC.Page.setPageAssociations(kt.get("page_id"),kt.get("member_ids"),kt.get("group_ids"))),n(!0)},onFailure:function(){Object.extend(a,r),errFunc.apply(this,arguments),n(!1)},onException:function(){Object.extend(a,r),exceptionFunc.apply(this,arguments),n(!1)}})}else n(!0)}function B(){gt=Weebly.PageManager.topLevelPages=H(mt),r()}function H(e){var t=[];return e.childElements().each(function(e){var i=e.getAttribute("data-id"),n=vt[i],o=e.select("> ul")[0];n.children=o?H(o):[],t.push(n)}),t}function q(){}function V(){}function j(){K(bt)&&_(bt),N();var e=window.currentPage;if(vt[e]){var i=vt[e].layout;i in currentThemeData.page_type_templates||(i=getDefaultPageType(currentThemeData,Weebly.view.isMobileView)),i!=currentPageType?(Lt=!1,setTimeout(function(){goUpdateList(window.currentPage,1)},0)):Lt&&(Lt=!1,renderTheme())}else t.vent.trigger("forceThemeRerender")}function U(e,t){e!=t&&(t?e||Y()||$H(vt).each(function(e){e[1].pwprotected=1}):$H(vt).each(function(e){e[1].pwprotected=0}))}function Y(){var e=0;return $H(vt).each(function(t){t[1].pwprotected&&e++}),e}function G(){var e=!0;return $H(vt).each(function(t){t[1].pwprotected||(e=!1)}),e}function X(){var e=0;return $H(vt).each(function(){e++}),e}function J(e){return e==gt[0]}function K(e){return Q(e.id)}function Q(e){return 0===(e+"").indexOf("-")}function Z(){return et(gt)}function et(e){for(var t=[],i=0;i<e.length;i++)t.push({id:Q(e[i].id)?"":e[i].id,children:et(e[i].children)});return t}function tt(e,t){for(var i in e)if("children"!=i&&"order"!=i&&"children"!=i)if("title"==i){if(e.title!==W(t.title))return!1}else if(e[i]!==t[i])return!1;return!0}function it(){var e={};return nt(e,Weebly.PageManager.topLevelPages),e}function nt(e,t){for(var i=0;i<t.length;i++)e[t[i].id]=t[i],nt(e,t[i].children)}function ot(){var t=[];return Weebly.PageManager.topLevelPages.each(function(n){if(!n.hidden){var o={id:n.id,title:n.title,onclick:function(){return e.chromeless?jQuery(event.target.parentNode).data("hasChildren")?jQuery(event.target.parentNode).trigger("mouseover"):i.navClicked(n.id):n.extlink||notBeenDragged()&&(noJump=1,goUpdateList(n.id,1)),!1}};n.extlink&&(o.onmouseover=function(e){rt(n.id,this,e||window.event)},o.onmouseout=function(){at()}),t.push(o)}}),t}function st(){return Weebly.PageManager.topLevelPages[0]}function rt(e,t,i){yt||(yt=new Element("div",{"class":"ext-tooltip"}),$(document.body).insert(yt),Weebly.PageManager.extTooltip=yt),yt.setStyle({top:Event.pointerY(i)+20+"px",left:Event.pointerX(i)+20+"px"}).update().show().appendChild(document.createTextNode(_W.tl("External link:")+" "+Weebly.PageManager.pages[e].extlink))}function at(){yt&&yt.hide()}function lt(){return ut.some(gt,function(e){return e.membership_required})}function ct(e,t){function i(){e.checked?s.addClassName("wcheckbox-checked"):s.removeClassName("wcheckbox-checked")}function n(){t.onChange&&t.onChange.call(e,e.checked)}function o(){t.onUserChange&&t.onUserChange.call(e,e.checked)}e=$(e),t=t||{};var s=e.up();s.observe("click",function(){e.checked=!e.checked,i(),o(),n()}),e.observe("click",function(e){i(),o(),n(),e.stopPropagation()}),this.setValue=function(t){!!t!=e.checked&&(e.checked=t,i(),n())},this.getValue=function(){return e.checked},i()}var t,ut,dt,ht,pt;_wAMD.require(["editor/app","underscore","commerce/editor/model/Category","commerce/editor/model/Product","components/views/ConfirmView"],function(e,i,n,o,s){t=e,ut=i,dt=n,ht=o,pt=s}),Weebly.PageManager={topLevelPages:[],pages:{},init:n,buildNav:T,initSorting:k,entering:u,updateSize:d,cleanup:j,getTopLevelSummary:ot,extMouseover:rt,extMouseout:at,sitePasswordChanged:U,deletePage:w,getCurrentHomepage:st,pageElementHash:{},membershipRequired:lt};var ft,mt,gt,vt,bt,yt,wt,_t,Mt,Ct,xt,kt,St,Tt,At,Dt,Et,Pt,Rt=0,zt=0,Ot=Weebly.PageManager.pageElementHash,Ft=-1,Wt=!1,It=[],Nt=!1,Lt=!1,Bt=!1,Ht=0,qt=0;return jQuery(function(){Event.observe(window,"resize",function(){var e=$(document.body);e&&(qt=e.getHeight());var t=jQuery("#pageManagerListWrap");t.weeblyScroll&&t.weeblyScroll("update")})}),Weebly.PageManager}),_wAMD.define("util/general-utils",[],function(){var e={htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},isIE:function(){return/(MSIE|Trident)/.test(navigator.userAgent)},isChrome:function(){return/(Chrome)/.test(navigator.userAgent)},getURLParameter:function(e){for(var t=window.location.search.substring(1),i=t.split("&"),n=0;n<i.length;n++){var o=i[n].split("=");if(o[0]==e)return decodeURIComponent(o[1])}return""},splitName:function(e){var t;return/^[^\s]*\s[^\s]*\s?$/i.test(e)?e.split(" "):(t=e.match(/^([^\s]*\s[^\s]\.?)\s(.*)\s?$/i))?t.slice(1):(t=e.match(/^(.*)\s([^\s]*)\s(jr|sr|ii|iii|iv|v|vi|vii|viii|ix|x)\.?\s?$/i))?t.slice(1):(t=e.match(/^([^\s]*\s[^\s]*)\s(.*)\s?$/i))?t.slice(1):[e,""]},isValidEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getSiteDomain:function(){var e=!1;return Weebly.Location.custom_domain?e=Weebly.Location.custom_domain:Weebly.Location.weebly_subdomain&&(e=Weebly.Location.weebly_subdomain+".weebly.com"),e},generateTimeInterval:function(e,t){var i,n,o=[],e=e||12,t=t||30;for(i=0;23>=i;i++)for(n=0;60>n;n+=t){var s=("00"+n).slice(-2),r=i,a="";12===e?(a="am",0===i?r=12:12===i?(r=i,a="pm"):i>12&&(r=i-e,a="pm")):r=("00"+i).slice(-2),o.push(r+":"+s+" "+a)}return o},hasValidScheme:function(e){var t=["aaa","aaas","about","acap","acct","acr","adiumxtra","afp","afs","aim","apt","attachment","aw","barion","beshare","bitcoin","bolo","callto","cap","chrome","chrome-extension","cid","coap","coaps","com-eventbrite-attendee","content","crid","cvs","data","dav","dict","dlna-playcontainer","dlna-playsingle","dns","dtn","dvb","ed2k","example","facetime","fax","feed","feedready","file","finger","fish","ftp","geo","gg","git","gizmoproject","go","gopher","gtalk","h323","ham","hcp","http","https","iax","icap","icon","im","imap","info","ipn","ipp","ipps","irc","irc6","ircs","iris","iris.beep","iris.lwz","iris.xpc","iris.xpcs","itms","jabber","jar","jms","keyparc","lastfm","ldap","ldaps","magnet","mailserver","mailto","maps","market","message","mid","mms","modem","ms-help","ms-settings-cloudstorage","ms-settings-power","msnim","msrp","msrps","mtqp","mumble","mupdate","mvn","news","nfs","ni","nih","nntp","notes","oid","opaquelocktoken","pack","palm","paparazzi","pkcs11","platform","pop","pres","prospero","proxy","psyc","query","reload","res","resource","rmi","rsync","rtmfp","rtmp","rtsp","rtsps","rtspu","secondlife","service","session","sftp","sgn","shttp","sieve","sip","sips","skype","smb","sms","smtp","snews","snmp","soap.beep","soap.beeps","soldat","spotify","ssh","steam","stun","stuns","submit","svn","tag","teamspeak","tel","teliaeid","telnet","tftp","things","thismessage","tip","tn3270","turn","turns","tv","udp","unreal","urn","ut2004","vemmi","ventrilo","videotex","view-source","wais","webcal","ws","wss","wtai","wyciwyg","xcon","xcon-userid","xfire","xmlrpc.beep","xmlrpc.beeps","xmpp","xri","ymsgr","z39.50","z39.50r","z39.50s"],i=e.split(":");return 1==i.length?!1:-1==t.indexOf(i[0])?!1:!0}};return e}),function(){function e(e){S=e||{},T=S.zIndex||9999,E=!1,A||(t(),A=!0),m.setOption("modal",S.modal),m.open(),c(),u(),M.checked=!1,o(),r("url"),p(C),p(x),setupFileUploader({el:$("wlinker-file-new"),zIndex:T+1e3,type:"link_file",size:"",ucfid:S.ucfid||"",ucfpid:"",successCallback:function(e,t){t.match(/error/i)||Weebly.Linker.uploadCompleted(t)}}),Weebly.Linker.uploadCompleted=function(e){var t=!1;E=!0,e.match(/\.pdf$/)&&(t=!0),S.onChoose("http://weebly-file/"+e,t),i()},Weebly.Linker.uploadFailed=function(e){S.onFailure("http://weebly-file/"+e)},S.remove?k.show():k.hide(),S.disableFile?$("wlinker-choice-file").hide():$("wlinker-choice-file").show(),S.disableEmail?$("wlinker-choice-email").hide():$("wlinker-choice-email").show(),S.disableNewWindow?$("wlinker-url-newwindow").hide():$("wlinker-url-newwindow").show(),Weebly.COMMERCE_ENABLED||$("wlinker-choice-store").hide();var n=S.existing;if(n)if(n.url)r("url"),C.value=n.url,C.parentNode.addClassName(D),M.checked=!!n.newWindow,C.focus();else if(n.pageID){r("page");var s=v.select("option[value="+n.pageID+"]")[0];s&&(s.selected=!0,Event.fire(v,"liszt:updated"))}else n.email?(r("email"),x.value=n.email,x.parentNode.addClassName(D),x.focus()):n.store&&r("store",n);else C.focus(),setTimeout(function(){C.parentNode.removeClassName(D)},0)}function t(){function e(){_wAMD.require(["util/general-utils"],function(e){var t,i;if("url"==_){if(t=C.value.strip(),!t)return n(_W.tl("Please enter a URL")),void 0;if(!t.match(/^[\w-]+:\/\//)){var o=t.indexOf(":")>-1,s=e.hasValidScheme(t);if(t!=t.replace(/<\/?[^>]+>/g,"")||o&&!s)return n(_W.tl("Please enter a URL")),void 0;o||(t="http://"+t)}M.checked&&(i=!0)}else if("page"==_)t="http://weebly-link/"+v.value;else if("store"==_)t="/"+storeSelectedLink;else if("file"==_){if(!g.value)return n(_W.tl("You have no uploaded files. Please select a different option.")),void 0;t="http://weebly-file/"+g.value,g.value.match(/\.pdf$/)&&(i=!0),new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"linkerusingfile",ucfid:S.ucfid||"",location:g.value,token:Weebly.RequestToken}})}else if("email"==_){if(t=x.value.strip(),!t.match(/^[a-zA-Z0-9\-\_\.\+\~\#\*\'']+@[a-zA-Z0-9\-]+\.[a-zA-Z]+[a-z0-9A-Z\.\-\?\=\&]*$/))return n(_W.tl("Invalid email address. Please enter a correct email address.")),void 0;t="mailto:"+t}void 0!==t&&(E=!0,S.onChoose(t,i),m.close())})}m=new Weebly.Dialog($("wlinker"),{onClose:f,zIndex:T}),g=$("wlinker-file-select"),v=$("wlinker-page-select"),b=$("wlinker-store-select"),storeSelectedLink=!1,M=$("wlinker-url-newwindow-input"),w=$$("#wlinker div.multiple-choice-box"),w.each(function(e){e.observe("mousedown",s)}),C=$("wlinker-url-input"),x=$("wlinker-email-input"),h(C),h(x),k=$("wlinker-remove").observe("click",function(){E=!0,S.onChoose(!1),m.close()}),$("wlinker-save").observe("click",e),Prototype.Browser.IE||$("wlinker").observe("keypress",function(t){"13"==t.keyCode&&e()})}function i(){m&&m.close()}function n(e){$("wlinker-error").hide().update(e).appear({duration:.5})}function o(){$("wlinker-error").hide()}function s(){r(this.id.replace("wlinker-choice-",""))}function r(e,t){w.each(function(e){e.removeClassName("multiple-choice-box-selected")}),$("wlinker-choice-"+e).addClassName("multiple-choice-box-selected").select("input")[0].checked=!0,_=e,"store"==e&&a(t)}function a(e){_wAMD.require(["jquery","mustache","editor/app","commerce/editor/model/Product","commerce/editor/collection/Category","commerce/editor/model/CategoryHierarchy","commerce/editor/components/categorySelect","commerce/editor/components/productSelect"],function(t,i,n,o,s,r){var a,l,c,u=t("input[name=wlinker-store-select-type]"),d={storefront:u.filter("[value=storefront]"),category:u.filter("[value=category]"),product:u.filter("[value=product]")},h=t("#wlinker-store-select-category"),p=t("#wlinker-store-select-product"),f=new s,m=e&&e.store;u.closest("label").on("mousedown",function(e){e.stopPropagation()}),m&&((a=m.match(/^store\/c(\d+)\//))&&(l=a[1]),(a=m.match(/^store\/p(\d+)\//))&&(c=a[1]));var g=t('<span class="text-loading-animation">'+_W.tl("Loading")+"</span>");t("#wlinker-store-select-wrap").append(g),t.when(f.fetch(),r.findOrCreate().fetch()).done(function(){g.remove();var e=f.findWhere({site_category_id:n.commerce.storefrontSettings.get("storefront_category_id")}).get("site_link");h.categorySelect();var t=h.data("categorySelect");p.productSelect();var i=p.data("productSelect");t.getPromise().done(function(){function n(){t.close(),i.close();var n=u.filter(":checked").val();if(h.toggle("category"==n),p.toggle("product"==n),"storefront"==n)storeSelectedLink=e;else if("category"==n){var s=f.findWhere({site_category_id:t.val()});storeSelectedLink=s&&s.get("site_link")}else if("product"==n){var r=o.findOrCreate({site_product_id:i.val()});storeSelectedLink=r&&r.get("site_link")}}l&&m!=e?(t.val(l),d.category.prop("checked",!0)):c?(i.val(c),d.product.prop("checked",!0)):d.storefront.prop("checked",!0),u.on("change",n),h.on("change",n),p.on("change",n),n()}),P.push(function(){t.close(),i.close()})})})}function l(){for(var e;e=P.shift();)e()}function c(){g.update(),new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"linkerfiles",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){var t=e.responseText.evalJSON();if(t.length?($("wlinker-file-select-wrap").show(),$("wlinker-file-new-none").hide(),$("wlinker-file-new-or").show(),$("wlinker-file-new").innerHTML=_W.tl("upload a file")):($("wlinker-file-select-wrap").hide(),$("wlinker-file-new-none").show(),$("wlinker-file-new-or").hide(),$("wlinker-file-new").innerHTML=_W.tl("Upload a new file")),t.each(function(e){g.insert(new Element("option",{value:e.location}).update(e.location.replace(/^.*\//,"")+" ("+e.size+")"))}),S.existing){var i=S.existing.location;if(i){r("file");var n=g.select("option[value='"+i+"']")[0];n&&(n.selected=!0)}}Event.fire(g,"liszt:updated")}})}function u(){v.update(),y="",d(Weebly.PageManager.topLevelPages,"",""),v.insert(y),Event.fire(v,"liszt:updated")}function d(e,t,i){e.each(function(e){"member-login"!=e.kind&&"member-logout"!=e.kind&&(y+='<option value="'+e.id+'">'+t+i+e.title+"</option>",e.children&&d(e.children,(i?"&nbsp; &nbsp;":"")+t,"- "))})}function h(e){function t(){e.parentNode.addClassName(D)}e.observe("focus",t).observe("mousedown",t).observe("keydown",t).observe("blur",function(){e.value||e.parentNode.removeClassName(D)})}function p(e){e.value="",e.parentNode.removeClassName(D)}function f(){!E&&S.onCancel&&S.onCancel(),l()}Weebly.Linker={open:e,close:i};var m,g,v,b,y,w,_,M,C,x,k,S,T,A=!1,D="wlinker-text-input-filled",E=!1,P=[]}(Weebly.jQuery),_wAMD.define("legacy/weebly_linker",["legacy/weebly_dialog","legacy/weebly_page_manager"],function(e){return function(){var t;return t||e.Weebly.Linker}}(this)),function(e){function t(e){function t(e,t){e===!0?s=t:"function"==typeof e?l.push([e,t]):"string"==typeof e?a[e]=t:"object"==typeof e&&e.each(function(e){a[e]=t})}function i(t){return n(t)||a[t[e]]||s}function n(e){var t;return l.each(function(i){return i[0](e)?(t=i[1],!1):void 0}),t}function o(e,t,n,o){var s=i(e);return s?new s(e,t,n,o):void 0}var s,r=this,a={},l=[];r.register=t,r.load=o}e.GenericLoader=t}(Weebly),_wAMD.define("legacy/classes/GenericLoader",function(e){return function(){var t;return t||e.Weebly.GenericLoader}}(this)),_wAMD.define("tpl!elements/element",[],function(){return'<li class="inside" id="inside_{{id}}">\n	<form name="id_{{id}}" data-platform-element-id="{{platform_element_id}}" data-platform-element-version="{{platform_element_version}}" style="display:none" autocomplete="off">\n		<input type="hidden" name="idfield" value="{id:\'{{id}}\',eid:\'{{eid}}\'}" />\n	</form>\n	{{{controlHTML}}}\n	<div class="element-box">\n		<div class="element-box-contents"{{#page_element_id}} id="{{{page_element_id}}}"{{/page_element_id}}>\n			{{{contentHTML}}}\n		</div>\n	</div>\n</li>'}),_wAMD.define("tpl!elements/element-controls",[],function(){return'<div class="w-element-controls">\n{{#isMovableElement}}\n	<div class="w-move-outer">\n		<div class="w-move"></div>\n	</div>\n{{/isMovableElement}}\n	<div class="w-handle-outer">\n		<div class="w-handle"></div>\n	</div>\n	<div class="w-delete-outer">\n		<div class="w-delete" title="Delete"></div>\n	</div>\n{{#requiresUpgrade}}\n	<div class="w-upgrade-outer">\n		<div class="w-upgrade" title="Upgrade"></div>\n	</div>\n{{/requiresUpgrade}}\n</div>'}),function(Weebly){function getCustomFunctions(e){var t={};for(var i in e)i.match(/^(%%\w+%%|<!\w+!>|\d+)$/)&&"function"==typeof e[i]&&(t[i]=e[i]);return t}function globalBeforeRender(){elementClasses.each(function(e){e.beforeRender&&e.beforeRender()})}function globalAfterRender(){elementClasses.each(function(e){e.afterRender&&e.afterRender()})}function renderElementsHTML(e){var t="";return e.each(function(e){t+=e.renderHTML(!1)}),t}function fetchElementDefinition(e,t,i){if(e in definitionCache)t(definitionCache[e]);else{var n=require("config");if(n.chromeless)try{throw new Error("Invalid ajax get element definition")}catch(o){return console.log(o.message),void 0}new Ajax.Request("/weebly/get_element_definitions.php",{asynchronous:!i,method:"get",parameters:{eid:e,no_call:1},onSuccess:function(i){var n=new ElementDefinition(e,i.responseText.evalJSON());definitionCache[e]=n,t(n)}})}}function registerDefinitionData(e,t){definitionCache[e]=new ElementDefinition(e,t)}function isMovableElement(e){return-1===NON_MOVABLE_ELEMENTS.indexOf(e.eid)&&!e.isFormField}var MOBILE_ELEMENTS=["75573027","84798836","8532979"],NON_MOVABLE_ELEMENTS=["23247315","63868204","40806018","40197772","33814465","7928374","8220056"],Element=Class.create({initialize:function(e){var t=this;Object.extend(t,e),0===t.content_fields.length&&(t.content_fields={});var i=t.content_fields;t.content_fields={},_.each(i,function(e){t.content_fields[e.ucfid]=new ContentField(t.eid,e)})},renderHTML:function(){var e=this.eid,t=this.id,i="";if(!Weebly.view.isMobileView&&MOBILE_ELEMENTS.indexOf(e)>-1)return"";var n=require("config");_.each(this.content_fields,function(e){var o="36487123"===e.cfid||"59501693"===e.cfid||"68306924"===e.cfid;i+=n.content_field_js_render&&!o?e.render():e.content||"","96854775"===e.cfid&&(i=i.replace("<div",'<div data-platform-peid="'+t+'"')),n.chromeless&&(i=i.replace(/(['"\(])\s*(\/uploads|weebly\/)/gi,"$1http://"+configSiteName+"$2"),i=i.replace(/(['"'\(])\s*\/\//gi,"$1http://"))}),this.li&&jQuery("#inside_"+this.id).remove();var o={id:t,eid:e,platform_element_id:this.platform_element_id,platform_element_version:this.platform_element_version,controlHTML:n.chromeless?"":this.renderControlHTML(),contentHTML:this.processHTML(i,!1)};return"75699656"==e&&(o.page_element_id=t),Mustache.render(require("tpl!elements/element"),o)},renderControlHTML:function(){return Mustache.render(require("tpl!elements/element-controls"),{isMovableElement:isMovableElement(this),requiresUpgrade:this.requiresUpgrade})},processHTML:function(e,t){var i=this;return hashEach(i._customFunctions||{},function(n,o){if(!n.match(/^\d+$/)){var s=o.call(i,void 0,t);void 0!==s&&"undefined"!=s&&(s=s.replace(/\$/g,"$$$$"),e=e.replace(new RegExp(n,"g"),s))}}),e=e.replace(/<input type="submit" class="wsite-form-submit" name="submit" value="([^"]*)" \/>/,"<a class='wsite-button'><span class='wsite-button-inner'>$1</span></a>")},getDimensions:function(){var e=jQuery("#inside_"+this.id),t=!1;e.is(":hidden")&&(e.show(),t=!0);var i=e.offset(),n={id:this.id,draggable:this.draggable,top:i.top,left:i.left,height:e.outerHeight(!1),width:e.outerWidth(!1)};if(this._isGallery){var o=e.find("ul li");n.galleryItems=[];for(var s=0;s<o.length;s++)e=jQuery(o[s]),i=e.offset(),n.galleryItems[s]={top:i.top,left:i.left,height:e.outerHeight(!1),width:e.outerWidth(!1)}}return t&&e.hide(),n},rerenderContentField:function(e,t,i){var n=require("config"),o=this,s=e.fetchDefinition();o._globalBeforeRender&&o._globalBeforeRender(!0),o.beforeRender(!0);var r=s.contentFieldProperties,a=o._customFunctions,l={},c="",u=s.customContent,d=!1;u=u.replace(/%%INEDITOR%%/gi,1),r.each(function(i){var n=i.cfpid,s=i.property,r=i.markupType,h=e.getProperty({cfpid:n}),p=h.property_result,f=a[s]||a[i.referenceProperty]||a[n];if(f){var m=f.call(o,p,!0);void 0!==m&&(p=m)}if("css"==r)l[s.camelize()]=p,c+=s+":"+p+";";else if("html"==r)t.setAttribute(s,p);else if("custom"==r&&s){var g=jQuery(t).hasClass("tablet-placeholder");u=u.replace(new RegExp(s,"gi"),p),"%%DATA%%"==s&&g&&0==JSON.parse(p).placeholder&&jQuery(t).removeClass("tablet-placeholder"),"%%IMAGEFILE%%"==s&&p&&g&&(d=p),"%%VIDEOFILE%%"==s&&p&&g&&jQuery(t).removeClass("tablet-placeholder")}}),t.setStyle(l),2==s.hasContent&&(u=u.replace(/%%ELEMENTID%%/gi,e.ucfid),u=u.replace(/%%PAGEELEMENTID%%/gi,e.cfid),u=u.safeReplace(/%%WEEBLYCONFIGDOMAIN%%/gi,configSiteName),u=u.safeReplace(/%%WEEBLYSUBDOMAIN%%/gi,configSiteName.replace(/\.weebly\.com$/,"")),u=u.replace("%%WEEBLYUSERID%%",userID),u=u.safeReplace(/%%WHITELABELDOMAIN%%/gi,Weebly.WHITE_LABEL_DOMAIN)),d&&(u=u.replace(/282/gi,"auto"),u=u.replace(/<iframe[^>]*>[^<]*<\/iframe>/gim,'<span class="icon icon-video"></span>'+_W.tl("Uploading Video")+'<span class="ellipsis"><span>.</span><span>.</span><span>.</span></span>')),n.chromeless&&(e.isPlaceholder()?(jQuery(t).addClass("tablet-placeholder"),u=e.addPlaceholderHTML(u)):jQuery(t).removeClass("tablet-placeholder")),u=o.processHTML(u,!0),u===!0?t.innerHTML=t.innerHTML:u!==!1&&(t.innerHTML=u),o.li=o.li||jQuery("#inside_"+o.id)[0],o.afterRender(o.li,!0),o._globalAfterRender&&o._globalAfterRender(!0),o.reposition(),i&&i()},rerender:function(e){var t=this;t.rerenderContentField(t.getContentField(),t.li.down(".element"),e),Weebly.view.isMobileView&&Weebly.mobile.reflow()},beforeRender:function(){},afterRender:function(li,isRerender){var t=this;t.li=li,t.requiresUpgrade&&!require("config").chromeless&&(li.addClassName("inside-requires-upgrade"),li.select(".w-upgrade")[0].observe("click",function(){editorApp.vent.trigger("billing:upgrade:window",{restrictionID:t.eid,restrictionType:"element",refer:"element_trial_upgrade"})}));var $=jQuery,form=$(li).find("form");if(form.data("platform-element-id")){var elementScript=$(li).find(".element-script");elementScript.length&&eval(elementScript[0].innerHTML)}},getContentField:function(e){return hashSearch(this.content_fields,e)},fetchDefinition:function(e,t){fetchElementDefinition(this.eid,e,t)},reposition:function(){},unrender:function(){delete this.li}}),ContentField=Class.create({initialize:function(e,t){var i=this,n=Weebly&&Weebly.Elements?Weebly.Elements.unsyncedProperties:{};i.ucfid=t.ucfid,i.eid=e,i.cfid=t.cfid,i.properties={},_.each(t.properties,function(e){var t=e.property_result;i.ucfid&&n.hasOwnProperty(i.ucfid)&&(t=n[i.ucfid]),i.properties[e.cfpid]={cfpid:e.cfpid,ucfpid:e.ucfpid,property_result:t,reference_property:e.reference_property}}),i.content=t.content,i.contentFieldContent=t.content_field_content,i.contentFieldAlign=t.content_field_align},getProperty:function(e){return"number"==typeof e&&(e+=""),"string"==typeof e&&(e=e.match(/^<!\w+!>$/)?{reference_property:e}:{ucfpid:e}),hashSearch(this.properties,e)},fetchDefinition:function(){var e=definitionCache[this.eid];
return e?e.contentfields[this.cfid]:null},parseTagType:function(e){return jQuery(e).prop("tagName")},parseTagAttributes:function(e){for(var t={},i=jQuery(e)[0].attributes,n=0;n<i.length;n++){var o=i.item(n).nodeName,s=i.item(n).nodeValue;t[o]=s}return t},createStartTag:function(e,t){var i="<"+e;for(var n in t)i+=" "+n+'="'+t[n]+'"';return i+">"},render:function(){var e=this,t=e.fetchDefinition();if(!t)return"";var i=t.contentFieldProperties,n=t.htmlStart,o=e.parseTagType(n),s="",r="",a="",l="",c="",u=require("config");return o&&(s=e.parseTagAttributes(n),s["class"]||(s["class"]="")),1==t.hasContent?(r=e.contentFieldContent,r||(r=_W.tl("Click here to edit.")),u.chromeless&&r.match("Click here to edit.")&&(r=_W.tl("Double-tap to edit.")),r=r.replace(/^(title|paragraph).*click here to edit\.$/i,_W.tl("Click here to edit.")),e.contentFieldAlign&&(l+="text-align:"+e.contentFieldAlign)):2==t.hasContent&&(a=t.customContent,a=a.replace(/%%ELEMENTID%%/gi,e.ucfid),a=a.replace(/%%PAGEELEMENTID%%/gi,e.cfid),a=a.safeReplace(/%%WEEBLYCONFIGDOMAIN%%/gi,configSiteName),a=a.safeReplace(/%%WEEBLYSUBDOMAIN%%/gi,configSiteName.replace(/\.weebly\.com$/,"")),a=a.safeReplace(/%%WHITELABELDOMAIN%%/gi,Weebly.WHITE_LABEL_DOMAIN)),i.each(function(t){var i=e.properties[t.cfpid],n=t.property,o=null;i&&"undefined"!=typeof i.property_result&&(o=i.property_result),(null===o||""===o)&&(o=t.propertyDefault),"css"==t.markupType?l+=n+":"+o+";":"html"==t.markupType?s[n]=o:"custom"==t.markupType&&(o=t.resultInEditor||o),"%%CUSTOM%%"==n&&(o=o.replace("<embed",'<embed wmode="transparent" allownetworking="internal"')),n&&(c=new RegExp(n,"mg"),a=a.replace(c,o))}),a=a.replace("%%WEEBLYUSERID%%",userID),a=a.replace("%%INEDITOR%%",Weebly.EDITOR?1:0),a=a.replace(/<weebly only_export[^>]*>([\S\s]*?)<\/weebly>/i,""),u.chromeless&&(this.isPlaceholder()?(s["class"]+=" tablet-placeholder",a=this.addPlaceholderHTML(a)):s["class"]=s["class"].replace("tablet-placeholder"," ")),t.selectable&&(s["class"]+=" element"),1==t.hasContent&&1!=t.hidden&&(s.contentEditable="true",s["class"]+=" editable-text"),s.id=e.ucfid,l&&(s.style=s.style?s.style+";"+l:l),this.createStartTag(o,s)+a+r+t.htmlEnd},isPlaceholder:function(){var e=!1,t=this.getProperty("<!DATA!>")||{},i=t.property_result||"{}",n={};try{n=JSON.parse(i)}catch(o){console.log("Malformed JSON data")}var s=this.getProperty("<!SRC!>")||this.getProperty("<!VIDEOFILE!>")||this.getProperty("<!IMAGESET!>")||this.getProperty("<!IMAGES!>")||this.getProperty("<!PRODUCTID!>")||{},r=s.property_result;return n.placeholder&&(e=!0),"string"==typeof r&&r.match(/na.png/g)&&(e=!0),"string"!=typeof r||""!=r&&"[]"!=r||(e=!0),e},addPlaceholderHTML:function(e){return e=e.replace(/<img[^>]*>[^<]*/gim,'<span class="icon icon-image"></span>'+_W.tl("Add Image")),e=e.replace(/<iframe[^>]*>[^<]*<\/iframe>/gim,'<a><span class="icon icon-video"></span>'+_W.tl("Add Video")+"</a>"),e=e.replace(/<!WEEBLYGALLERY2?\-.*?!>/g,'<a><span class="icon icon-gallery"></span>'+_W.tl("Add Gallery")+"</a>"),e=e.replace(/<!WEEBLYSLIDESHOW\-.*?!>/g,'<a><span class="icon icon-slideshow"></span>'+_W.tl("Add Slideshow")+"</a>"),e=e.replace(/282/gi,"auto"),e=e.replace(/^(<div><!PRODUCT!><\/div>)/gim,'<div class="product-placeholder"><a><span class="icon icon-product"></span>'+_W.tl("Add Product")+"</a></div>")},saveProperties:function(e){var t=require("config");if(t.chromeless)try{throw new Error("Invalid element property save attempted in script")}catch(i){return console.log(i.message),void 0}new Ajax.Request(ajax,{parameters:{pos:"saveproperties",cookie:document.cookie,ucfid:this.ucfid,json:Object.toJSON(this.properties),token:Weebly.RequestToken},onFailure:errFunc,bgRequest:!0,onSuccess:e||function(){}})}});Weebly.GenericLoader.call(Element,"eid");var elementClasses=[],super_register=Element.register;Element.register=function(e,t){t.prototype._customFunctions=getCustomFunctions(t.prototype),t.beforeRender&&(t.prototype._globalBeforeRender=t.beforeRender.bind(t)),t.afterRender&&(t.prototype._globalAfterRender=t.afterRender.bind(t)),super_register(e,t),elementClasses.push(t)};var ElementDefinition=Class.create({initialize:function(e,t){var i=this;i.elementid=e,i.displayname=t.name,i.contentfields={},jQuery.each(t.content_fields,function(e,t){i.contentfields[t.cfid]=new ContentFieldDefinition(t.cfid,t)})},getContentField:function(e){return hashSearch(this.contentfields,e)}}),ContentFieldDefinition=Class.create({initialize:function(e,t){var i=this;i.cfid=e,i.name=t.name,i.htmlStart=t.html_start,i.htmlEnd=t.html_end,i.hasContent=t.has_content,i.hasImage=t.has_image,i.hidden=t.hidden,i.customContent=t.custom_content,i.elementonChangeJs=t.element_onchange_js,i.elementJs=t.element_js,i.selectable=t.selectable,i.contentFieldProperties=t.content_field_properties.map(function(e){return{cfpid:e.cfpid,title:e.title,options:e.options,property:e.property,result:e.result,markupType:e.markup_type,advanced:e.advanced,propertyDefault:e.property_default,resultInEditor:e.result_in_editor,displayOrder:e.display_order,referenceProperty:e.reference_property,hidden:e.hidden}})},getProperty:function(e){return"number"==typeof e&&(e+=""),"string"==typeof e&&(e=e.match(/^%%\w+%%$/)?{property:e}:e.match(/^<!\w+!>$/)?{referenceProperty:e}:{cfpid:e}),arraySearch(this.contentFieldProperties,e)}}),definitionCache={};Element.registerDefinitionData=registerDefinitionData,Element.fetchElementDefinition=fetchElementDefinition,Element.globalBeforeRender=globalBeforeRender,Element.globalAfterRender=globalAfterRender,Element.renderElementsHTML=renderElementsHTML,Weebly.Element=Element}(Weebly),_wAMD.define("legacy/classes/Element",["legacy/classes/GenericLoader","mustache","tpl!elements/element","tpl!elements/element-controls"],function(e){return function(){var t;return t||e.Weebly.Element}}(this)),_wAMD.define("platform/editor/model/PlatformElementSettingModel",["backbone-all"],function(e){var t=e.Model.extend({isValid:function(e){void 0===e&&(e=this.get("value"));var t={"int":"validateInteger",slider:"validateInteger",string:"validateString",text:"validateString",checkbox:"validateBoolean",toggle:"validateBoolean"},i=t[this.get("type")];return i&&this.hasOwnProperty(i)?this[i](e):!0},getOptions:function(){var e=this.get("values"),t=[];return e?_.each(e,function(e){"string"==typeof e&&(e={name:e,value:e}),t.push(e)}):t=null,t},validateInteger:function(e){var t=this.get("max"),i=this.get("min"),n=this.get("step"),o=!0;return null!=i&&void 0!=i&&i>e&&(o=!1),null!=t&&void 0!=t&&e>t&&(o=!1),null!=n&&void 0!=n&&0!=e%n&&(o=!1),o},validateString:function(e){var t=this.get("max"),i=this.get("min"),n=!0;return null!=i&&void 0!=i&&e.length<i&&(n=!1),null!=t&&void 0!=t&&e.length>t&&(n=!1),n},validateBoolean:function(e){return e===!0||e===!1},validateAsFalse:function(){return!1}});return t}),_wAMD.define("platform/editor/view/settings/item-views/BaseSettingsItemView",["backbone-all"],function(e){var t=e.Marionette.ItemView.extend({className:"settings-item",tagName:function(){return"group"===this.model.get("type")?"li":"div"},getValue:function(){throw"PlatformSettingsError: Failed to override BaseSettingsItemView.getValue in subclass"},isValid:function(e){var e=this.getValue();return this.model?this.model.isValid(e):!1},saveValue:function(){this.isValid()?(this.hideError(),this.model.set("value",this.getValue())):this.showError()},showError:function(){this.$el.addClass("invalid")},hideError:function(){this.$el.removeClass("invalid"),this.$el.find(".error").removeClass("error")}});return t}),_wAMD.define("tpl!platform/element/settings/tooltip-string",[],function(){return'<label for="platform-settings-tooltip-{{name}}">\n	{{label}}\n\n	{{#show_limits}}\n	<span class="setting-message">\n		({{#min}}\n			<span class="min-message">Min: {{min}}</span>\n		{{/min}}\n		{{#max}}\n			{{#min}} &nbsp;|&nbsp; {{/min}}\n			<span class="max-message"><span class="remaining">{{remaining}}</span> remaining</span>\n		{{/max}})\n	</span>\n	{{/show_limits}}\n</label>\n<input id="platform-settings-tooltip-{{name}}" type="text" name="{{name}}" value="{{value}}" placeholder="{{default}}">'}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wDatepicker",["jquery"],e):e(window.jQuery)}(function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function i(t,i){var n,o=e(t).data(),s={},r=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in o)i.test(a)&&(n=a.replace(r,function(e,t){return t.toLowerCase()}),s[n]=o[a]);return s}function n(t){var i={};if(u[t]||(t=t.split("-")[0],u[t])){var n=u[t];return e.each(c,function(e,t){t in n&&(i[t]=n[t])}),i}}var o=e(window),s=function(t,i){this._process_options(i),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};s.prototype={constructor:s,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),n=i.language;switch(u[n]||(n=n.split("-")[0],u[n]||(n=l.language)),i.language=n,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=d.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=i.startDate?i.startDate instanceof Date?this._local_to_utc(this._zero_time(i.startDate)):d.parseDate(i.startDate,o,i.language):-1/0),1/0!==i.endDate&&(i.endDate=i.endDate?i.endDate instanceof Date?this._local_to_utc(this._zero_time(i.endDate)):d.parseDate(i.endDate,o,i.language):1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(i.orientation).toLowerCase().split(/\s+/g),r=i.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else r=e.grep(s,function(e){return/^left|right$/.test(e)}),i.orientation.x=r[0]||"auto",r=e.grep(s,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.on(i)},_unapplyEvents:function(e){for(var t,i,n=0;n<e.length;n++)t=e[n][0],i=e[n][1],t.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.date,o=this._utc_to_local(n);this.element.trigger({type:t,date:o,format:e.proxy(function(e){var t=e||this.o.format;return d.formatDate(n,t,this.o.language)},this)})},show:function(e){this.isInline||this.picker.appendTo(this.o.parentElement?this.o.parentElement:"body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),e&&e.preventDefault(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue())},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(this._local_to_utc(e))},setUTCDate:function(e){this.date=e,this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(e){return void 0===e&&(e=this.o.format),d.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t,i=this.picker.outerWidth(),n=this.picker.outerHeight(),s=10,r=o.width(),a=o.height(),l=o.scrollTop(),c=parseInt(this.element.parents().filter(function(){return"auto"!=e(this).css("z-index")}).first().css("z-index"))+10;t=this.component?this.component.parent().offset():this.element.parent().hasClass("input-prepend")?this.element.parent().offset():this.element.offset();var u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=t.left-(this.o.parentElement?e(this.o.parentElement).offset().left:0),p=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=i-d)):(this.picker.addClass("datepicker-orient-left"),t.left<0?h-=t.left-s:t.left+i>r&&(h=r-i-s));var f,m,g=this.o.orientation.y;"auto"===g&&(f=-l+t.top-n,m=l+a-(t.top+u+n),g=Math.max(f,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?p+=u:p-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:h,zIndex:c})}},_allow_update:!0,update:function(){if(this._allow_update){var e,t=new Date(this.date),i=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],e instanceof Date&&(e=this._local_to_utc(e)),i=!0):(e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=d.parseDate(e,this.o.format,this.o.language),i?this.setValue():e?t.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate"),this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date)),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+u[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+u[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=this.date.valueOf(),r=new Date;return t.getUTCFullYear()<n||t.getUTCFullYear()==n&&t.getUTCMonth()<o?i.push("old"):(t.getUTCFullYear()>n||t.getUTCFullYear()==n&&t.getUTCMonth()>o)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==r.getFullYear()&&t.getUTCMonth()==r.getMonth()&&t.getUTCDate()==r.getDate()&&i.push("today"),s&&t.valueOf()==s&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!=e.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,n=new Date(this.viewDate),o=n.getUTCFullYear(),s=n.getUTCMonth(),r=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,a=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,c=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf(),this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[s]+" "+o),this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=t(o,s-1,28,0,0,0,0),p=d.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(p),h.setUTCDate(p-(h.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(h);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];h.valueOf()<f;){if(h.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+h+864e5*((this.o.weekStart-h.getUTCDay()-7)%7)),b=new Date(+v+864e5*((11-v.getUTCDay())%7)),y=new Date(+(y=t(b.getUTCFullYear(),0,1))+864e5*((11-y.getUTCDay())%7)),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}if(m=this.getClassNames(h),m.push("day"),this.o.beforeShowDay!==e.noop){var _=this.o.beforeShowDay(this._utc_to_local(h));void 0===_?_={}:"boolean"==typeof _?_={enabled:_}:"string"==typeof _&&(_={classes:_}),_.enabled===!1&&m.push("disabled"),_.classes&&(m=m.concat(_.classes.split(/\s+/))),_.tooltip&&(i=_.tooltip)}m=e.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var M=this.date&&this.date.getUTCFullYear(),C=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");M&&M==o&&C.eq(this.date.getUTCMonth()).addClass("active"),(r>o||o>l)&&C.addClass("disabled"),o==r&&C.slice(0,a).addClass("disabled"),o==l&&C.slice(c+1).addClass("disabled"),g="",o=10*parseInt(o/10,10);var x=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var k=-1;11>k;k++)g+='<span class="year'+(-1==k?" old":10==k?" new":"")+(M==o?" active":"")+(r>o||o>l?" disabled":"")+'">'+o+"</span>",o+=1;x.html(g)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.o.endDate&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var n=e(i.target).closest("span, td, th");if(1==n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=d.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var s=new Date;s=t(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0),this.showMode(-2);var r="linked"==this.o.todayBtn?null:"view";this._setDate(s,r);break;case"clear":var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){if(this.viewDate.setUTCDate(1),n.is(".month")){var l=1,c=n.parent().find("span").index(n),u=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(c),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(t(u,c,l,0,0,0,0))}else{var u=parseInt(n.text(),10)||0,l=1,c=0;this.viewDate.setUTCFullYear(u),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(t(u,c,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,u=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth();n.is(".old")?0===c?(c=11,u-=1):c-=1:n.is(".new")&&(11==c?(c=0,u+=1):c+=1),this._setDate(t(u,c,l,0,0,0,0))}}},_setDate:function(e,t){t&&"date"!=t||(this.date=new Date(e)),t&&"view"!=t||(this.viewDate=new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||t&&"date"!=t||this.hide()},moveMonth:function(e,t){if(!t)return e;var i,n,o=new Date(e.valueOf()),s=o.getUTCDate(),r=o.getUTCMonth(),a=Math.abs(t);if(t=t>0?1:-1,1==a)n=-1==t?function(){return o.getUTCMonth()==r}:function(){return o.getUTCMonth()!=i},i=r+t,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)o=this.moveMonth(o,t);i=o.getUTCMonth(),o.setUTCDate(s),n=function(){return i!=o.getUTCMonth()}}for(;n();)o.setUTCDate(--s),o.setUTCMonth(i);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return 27==e.keyCode&&this.show(),void 0;var t,i,n,o=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38==e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*t),n=new Date(this.viewDate),n.setUTCDate(this.viewDate.getUTCDate()+7*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 13:this.hide(),e.preventDefault();break;case 9:this.hide()}if(o){this._trigger("changeDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var r=function(t,i){this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};r.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){var i=e(t.target).data("datepicker"),n=i.getUTCDate(),o=e.inArray(t.target,this.inputs),s=this.inputs.length;if(-1!=o){if(n<this.dates[o])for(;o>=0&&n<this.dates[o];)this.pickers[o--].setUTCDate(n);else if(n>this.dates[o])for(;s>o&&n>this.dates[o];)this.pickers[o++].setUTCDate(n);this.updateDates()}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var a=e.fn.datepicker;e.fn.datepicker=function(t){var o=Array.apply(null,arguments);o.shift();var a;return this.each(function(){var c=e(this),u=c.data("datepicker"),d="object"==typeof t&&t;if(!u){var h=i(this,"date"),p=e.extend({},l,h,d),f=n(p.language),m=e.extend({},l,f,h,d);if(c.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||c.find("input").toArray()};c.data("datepicker",u=new r(this,e.extend(m,g)))}else c.data("datepicker",u=new s(this,m))}return"string"==typeof t&&"function"==typeof u[t]&&(a=u[t].apply(u,o),void 0!==a)?!1:void 0}),void 0!==a?a:this};var l=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},c=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=s;var u=e.fn.datepicker.dates={ar:{days:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"],daysShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت","أحد"],daysMin:["ح","ن","ث","ع","خ","ج","س","ح"],months:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthsShort:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],today:"هذا اليوم",rtl:!0},bg:{days:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота","Неделя"],daysShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб","Нед"],daysMin:["Н","П","В","С","Ч","П","С","Н"],months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthsShort:["Ян","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Ное","Дек"],today:"днес"},ca:{days:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte","Diumenge"],daysShort:["Diu","Dil","Dmt","Dmc","Dij","Div","Dis","Diu"],daysMin:["dg","dl","dt","dc","dj","dv","ds","dg"],months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],monthsShort:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],today:"Avui"},cs:{days:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota","Neděle"],daysShort:["Ned","Pon","Úte","Stř","Čtv","Pát","Sob","Ned"],daysMin:["Ne","Po","Út","St","Čt","Pá","So","Ne"],months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],monthsShort:["Led","Úno","Bře","Dub","Kvě","Čer","Čnc","Srp","Zář","Říj","Lis","Pro"],today:"Dnes"},da:{days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag","Søndag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør","Søn"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø","Sø"],months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"I Dag"},de:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam","Son"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa","So"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",weekStart:1,format:"dd.mm.yyyy"},el:{days:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"],daysShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ","Κυρ"],daysMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα","Κυ"],months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthsShort:["Ιαν","Φεβ","Μαρ","Απρ","Μάι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],today:"Σήμερα"},en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"},es:{days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa","Do"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy"},et:{days:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev","Pühapäev"],daysShort:["Püh","Esm","Tei","Kol","Nel","Ree","Lau","Sun"],daysMin:["P","E","T","K","N","R","L","P"],months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthsShort:["Jaan","Veeb","Märts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],today:"Täna"},fi:{days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai","sunnuntai"],daysShort:["sun","maa","tii","kes","tor","per","lau","sun"],daysMin:["su","ma","ti","ke","to","pe","la","su"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],monthsShort:["tam","hel","maa","huh","tou","kes","hei","elo","syy","lok","mar","jou"],today:"tänään",weekStart:1,format:"d.m.yyyy"},fr:{days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],daysMin:["D","L","Ma","Me","J","V","S","D"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jui","Jul","Aou","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",clear:"Effacer",weekStart:1,format:"dd/mm/yyyy"},he:{days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"],daysShort:["א","ב","ג","ד","ה","ו","ש","א"],daysMin:["א","ב","ג","ד","ה","ו","ש","א"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthsShort:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],today:"היום",rtl:!0},hr:{days:["Nedjelja","Ponedjelja","Utorak","Srijeda","Četrtak","Petak","Subota","Nedjelja"],daysShort:["Ned","Pon","Uto","Srr","Čet","Pet","Sub","Ned"],daysMin:["Ne","Po","Ut","Sr","Če","Pe","Su","Ne"],months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthsShort:["Sije","Velj","Ožu","Tra","Svi","Lip","Jul","Kol","Ruj","Lis","Stu","Pro"],today:"Danas"},hu:{days:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat","Vasárnap"],daysShort:["Vas","Hét","Ked","Sze","Csü","Pén","Szo","Vas"],daysMin:["Va","Hé","Ke","Sz","Cs","Pé","Sz","Va"],months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],monthsShort:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Sze","Okt","Nov","Dec"],today:"Ma",weekStart:1,format:"yyyy.mm.dd"},id:{days:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],daysShort:["Mgu","Sen","Sel","Rab","Kam","Jum","Sab","Mgu"],daysMin:["Mg","Sn","Sl","Ra","Ka","Ju","Sa","Mg"],months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],today:"Hari Ini",clear:"Kosongkan"},is:{days:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur","Sunnudagur"],daysShort:["Sun","Mán","Þri","Mið","Fim","Fös","Lau","Sun"],daysMin:["Su","Má","Þr","Mi","Fi","Fö","La","Su"],months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Maí","Jún","Júl","Ágú","Sep","Okt","Nóv","Des"],today:"Í Dag"},it:{days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab","Dom"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa","Do"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",weekStart:1,format:"dd/mm/yyyy"},ja:{days:["日曜","月曜","火曜","水曜","木曜","金曜","土曜","日曜"],daysShort:["日","月","火","水","木","金","土","日"],daysMin:["日","月","火","水","木","金","土","日"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",format:"yyyy/mm/dd"},ka:{days:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი","კვირა"],daysShort:["კვი","ორშ","სამ","ოთხ","ხუთ","პარ","შაბ","კვი"],daysMin:["კვ","ორ","სა","ოთ","ხუ","პა","შა","კვ"],months:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომები","ნოემბერი","დეკემბერი"],monthsShort:["იან","თებ","მარ","აპრ","მაი","ივნ","ივლ","აგვ","სექ","ოქტ","ნოე","დეკ"],today:"დღეს",clear:"გასუფთავება"},kr:{days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일","일요일"],daysShort:["일","월","화","수","목","금","토","일"],daysMin:["일","월","화","수","목","금","토","일"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthsShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},lt:{days:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis","Sekmadienis"],daysShort:["S","Pr","A","T","K","Pn","Š","S"],daysMin:["Sk","Pr","An","Tr","Ke","Pn","Št","Sk"],months:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthsShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],today:"Šiandien",weekStart:1},lv:{days:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena","Svētdiena"],daysShort:["Sv","P","O","T","C","Pk","S","Sv"],daysMin:["Sv","Pr","Ot","Tr","Ce","Pk","St","Sv"],months:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec."],today:"Šodien",weekStart:1},mk:{days:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота","Недела"],daysShort:["Нед","Пон","Вто","Сре","Чет","Пет","Саб","Нед"],daysMin:["Не","По","Вт","Ср","Че","Пе","Са","Не"],months:["Јануари","Февруари","Март","Април","Мај","Јуни","Јули","Август","Септември","Октомври","Ноември","Декември"],monthsShort:["Јан","Фев","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Ное","Дек"],today:"Денес"},ms:{days:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu","Ahad"],daysShort:["Aha","Isn","Sel","Rab","Kha","Jum","Sab","Aha"],daysMin:["Ah","Is","Se","Ra","Kh","Ju","Sa","Ah"],months:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],today:"Hari Ini"},nb:{days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag","Søndag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør","Søn"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø","Sø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"I Dag"},nl:{days:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag","Zondag"],daysShort:["Zo","Ma","Di","Wo","Do","Vr","Za","Zo"],daysMin:["Zo","Ma","Di","Wo","Do","Vr","Za","Zo"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Vandaag"},no:{days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"I dag",clear:"Nullstill",weekStart:0},pl:{days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota","Niedziela"],daysShort:["Nie","Pn","Wt","Śr","Czw","Pt","So","Nie"],daysMin:["N","Pn","Wt","Śr","Cz","Pt","So","N"],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthsShort:["Sty","Lu","Mar","Kw","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],today:"Dzisiaj",weekStart:1},ptBR:{days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa","Do"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"},pt:{days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa","Do"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"},ro:{days:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă","Duminică"],daysShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm","Dum"],daysMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ","Du"],months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthsShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],today:"Astăzi",weekStart:1},rslatin:{days:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota","Nedelja"],daysShort:["Ned","Pon","Uto","Sre","Čet","Pet","Sub","Ned"],daysMin:["N","Po","U","Sr","Č","Pe","Su","N"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas"},rs:{days:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота","Недеља"],daysShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб","Нед"],daysMin:["Н","По","У","Ср","Ч","Пе","Су","Н"],months:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthsShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],today:"Данас"},ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],daysShort:["Вск","Пнд","Втр","Срд","Чтв","Птн","Суб","Вск"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб","Вс"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",weekStart:1},sk:{days:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota","Nedeľa"],daysShort:["Ned","Pon","Uto","Str","Štv","Pia","Sob","Ned"],daysMin:["Ne","Po","Ut","St","Št","Pia","So","Ne"],months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],today:"Dnes"},sl:{days:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota","Nedelja"],daysShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob","Ned"],daysMin:["Ne","Po","To","Sr","Če","Pe","So","Ne"],months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danes"},sq:{days:["E Diel","E Hënë","E martē","E mërkurë","E Enjte","E Premte","E Shtunë","E Diel"],daysShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu","Die"],daysMin:["Di","Hë","Ma","Më","En","Pr","Sht","Di"],months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],monthsShort:["Jan","Shk","Mar","Pri","Maj","Qer","Korr","Gu","Sht","Tet","Nën","Dhjet"],today:"Sot"},sv:{days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag","Söndag"],daysShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör","Sön"],daysMin:["Sö","Må","Ti","On","To","Fr","Lö","Sö"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"I Dag",format:"yyyy-mm-dd",weekStart:1},sw:{days:["Jumapili","Jumatatu","Jumanne","Jumatano","Alhamisi","Ijumaa","Jumamosi","Jumapili"],daysShort:["J2","J3","J4","J5","Alh","Ij","J1","J2"],daysMin:["2","3","4","5","A","I","1","2"],months:["Januari","Februari","Machi","Aprili","Mei","Juni","Julai","Agosti","Septemba","Oktoba","Novemba","Desemba"],monthsShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ago","Sep","Okt","Nov","Des"],today:"Leo"},th:{days:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"],daysShort:["อา","จ","อ","พ","พฤ","ศ","ส","อา"],daysMin:["อา","จ","อ","พ","พฤ","ศ","ส","อา"],months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthsShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],today:"วันนี้"},tr:{days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"],daysShort:["Pz","Pzt","Sal","Çrş","Prş","Cu","Cts","Pz"],daysMin:["Pz","Pzt","Sa","Çr","Pr","Cu","Ct","Pz"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthsShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],today:"Bugün",format:"dd.mm.yyyy"},uk:{days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота","Неділя"],daysShort:["Нед","Пнд","Втр","Срд","Чтв","Птн","Суб","Нед"],daysMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб","Нд"],months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthsShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],today:"Сьогодні"},zhCN:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",format:"yyyy年mm月dd日",weekStart:1},zhTW:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["週日","週一","週二","週三","週四","週五","週六","週日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",format:"yyyy年mm月dd日",weekStart:1}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return 0===e%4&&0!==e%100||0===e%400
},getDaysInMonth:function(e,t){return[31,d.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(i,n,o){if(i instanceof Date)return i;if("string"==typeof n&&(n=d.parseFormat(n)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var r,a,l=/([\-+]\d+)([dmwy])/,c=i.match(/([\-+]\d+)([dmwy])/g);i=new Date;for(var h=0;h<c.length;h++)switch(r=l.exec(c[h]),a=parseInt(r[1]),r[2]){case"d":i.setUTCDate(i.getUTCDate()+a);break;case"m":i=s.prototype.moveMonth.call(s.prototype,i,a);break;case"w":i.setUTCDate(i.getUTCDate()+7*a);break;case"y":i=s.prototype.moveYear.call(s.prototype,i,a)}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,r,c=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=t(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=n.parts.slice();if(c.length!=b.length&&(b=e(b).filter(function(t,i){return-1!==e.inArray(i,g)}).toArray()),c.length==b.length){for(var h=0,y=b.length;y>h;h++){if(p=parseInt(c[h],10),r=b[h],isNaN(p))switch(r){case"MM":f=e(u[o].months).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),p=e.inArray(f[0],u[o].months)+1;break;case"M":f=e(u[o].monthsShort).filter(function(){var e=this.slice(0,c[h].length),t=c[h].slice(0,e.length);return e==t}),p=e.inArray(f[0],u[o].monthsShort)+1}m[r]=p}for(var w,_,h=0;h<g.length;h++)_=g[h],_ in m&&!isNaN(m[_])&&(w=new Date(i),v[_](w,m[_]),isNaN(w)||(i=w))}return i},formatDate:function(t,i,n){"string"==typeof i&&(i=d.parseFormat(i));var o={d:t.getUTCDate(),D:u[n].daysShort[t.getUTCDay()],DD:u[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:u[n].monthsShort[t.getUTCMonth()],MM:u[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;for(var t=[],s=e.extend([],i.separators),r=0,a=i.parts.length;a>=r;r++)s.length&&t.push(s.shift()),t.push(o[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev"><i class="w-icon-chevron-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="w-icon-chevron-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=d,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=a,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))}),e(function(){_W.siteContextData&&_W.siteContextData.jdateFormat&&(e.fn.datepicker.defaults.format=_W.siteContextData.jdateFormat),e('[data-provide="datepicker-inline"]').datepicker()})}),_wAMD.define("platform/editor/view/settings/item-views/StringItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-string","util/ui/wDatepicker"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"blur @ui.input":"saveValue","keyup @ui.input":"handleKeyPress"},ui:{input:"input",remaining:".remaining"},templateHelpers:function(){var e=this;return{remaining:function(){var t=parseInt(e.model.get("max"),10);return t?t-(e.model.get("value")||"").length:!1},show_limits:function(){return!(!e.model.get("min")&&!e.model.get("max"))}}},handleKeyPress:function(e){this.updateCharacterCount(e),this.$el.removeClass("invalid")},updateCharacterCount:function(){var e=parseInt(this.model.get("max"),10);if(e){var t=e-this.ui.input.val().length;0>t?this.ui.input.val(this.ui.input.val().slice(0,e)):this.ui.remaining.text(t)}},getValue:function(){return this.ui.input.val()},isValid:function(){var e=this.getValue(),t=this.model.get("max"),i=this.model.get("min"),n=!0;return null!=i&&void 0!=i&&e.length<i&&(n=!1),null!=t&&void 0!=t&&e.length>t&&(n=!1),n}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-integer",[],function(){return'<label for="platform-settings-tooltip-{{name}}">{{label}}</label>\n<input id="platform-settings-tooltip-{{name}}" type="text" name="{{name}}" value="{{value}}" placeholder="{{default}}">\n{{#step}}\n  <button class="step-up btn">+</button>\n  <button class="step-down btn">-</button>\n{{/step}}'}),_wAMD.define("platform/editor/view/settings/item-views/IntegerItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-integer"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"keypress @ui.input":"onKeyPress","blur @ui.input":"inputBlur","click .step-up":"stepUp","click .step-down":"stepDown"},ui:{input:"input"},onKeyPress:function(e){this.isKeyNumeric(e.which)||e.preventDefault()},stepUp:function(e){e.preventDefault();var t=this.getValueOrDefault(),i=parseInt(this.model.get("max")),n=parseInt(this.model.get("step"),10);i&&t>=i||(this.ui.input.val(t+n),this.ui.input.focus())},stepDown:function(e){e.preventDefault();var t=this.getValueOrDefault(),i=parseInt(this.model.get("min")),n=parseInt(this.model.get("step"),10);i&&i>=t||(this.ui.input.val(t-n),this.ui.input.focus())},getValueOrDefault:function(){return this.getValue()||parseInt(this.model.get("default"),10)||0},getValue:function(){return parseInt(this.ui.input.val(),10)},isKeyNumeric:function(e){return 0===String.fromCharCode(e)%1},inputBlur:function(){var e=this.getValueOrDefault(),t=parseInt(this.model.get("max"),10),i=parseInt(this.model.get("min"),10);this.model.get("step")&&(step=parseInt(this.model.get("step"),10),e=Math.round(e/step)*step),e>t&&(e=t),i>e&&(e=i),this.ui.input.val(e),this.saveValue()}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-select",[],function(){return'<label for="platform-settings-tooltip-{{name}}">{{label}}</label>\n<select id="platform-settings-tooltip-{{name}}" name="{{name}}">\n	{{#options}}\n		<option value="{{value}}" {{#selected}}selected{{/selected}}>{{name}}</option>\n	{{/options}}\n</select>'}),_wAMD.define("platform/editor/view/settings/item-views/SelectItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-select"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue"},ui:{input:"select"},templateHelpers:function(){var e=this;return{selected:function(){var t=e.model.get("value")||e.model.get("default");return this.value==t},options:function(){return e.model.getOptions()}}},getValue:function(){return this.ui.input.val()}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-text",[],function(){return'<label for="platform-settings-tooltip-{{name}}">\n	{{label}}\n\n	{{#show_limits}}\n	<span class="setting-message">\n		({{#min}}\n			<span class="min-message">Min: {{min}}</span>\n		{{/min}}\n		{{#max}}\n			{{#min}} &nbsp;|&nbsp; {{/min}}\n			<span class="max-message"><span class="remaining">{{remaining}}</span> remaining</span>\n		{{/max}})\n	</span>\n	{{/show_limits}}\n</label>\n<textarea id="platform-settings-tooltip-{{name}}" type="text" name="{{name}}" placeholder="{{default}}">{{value}}</textarea>'}),_wAMD.define("platform/editor/view/settings/item-views/TextItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/StringItemView","tpl!platform/element/settings/tooltip-text"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"blur @ui.input":"saveValue","keyup @ui.input":"handleKeyPress"},ui:{input:"textarea",remaining:".remaining"}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-color",[],function(){return'<label for="platform-settings-tooltip-{{name}}" class="inline">{{label}}</label>\n<input id="platform-settings-tooltip-{{name}}" type="input" name="{{name}}" value="{{value}}" class="color-picker">'}),function(e,t,i){function n(e,t,i){for(var n=[],o=0;o<e.length;o++){var s=tinycolor(e[o]),r=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";r+=tinycolor.equals(t,e[o])?" sp-thumb-active":"";var a=g?"background-color:"+s.toRgbString():"filter:"+s.toFilter();n.push('<span title="'+s.toRgbString()+'" data-color="'+s.toRgbString()+'" class="'+r+'"><span class="sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='sp-cf "+i+"'>"+n.join("")+"</div>"}function o(){for(var e=0;e<f.length;e++)f[e]&&f[e].hide()}function s(e,i){var n=t.extend({},p,e);return n.callbacks={move:u(n.move,i),change:u(n.change,i),show:u(n.show,i),hide:u(n.hide,i),beforeShow:u(n.beforeShow,i)},n}function r(r,l){function u(){Ct.toggleClass("sp-flat",U),Ct.toggleClass("sp-input-disabled",!$.showInput),Ct.toggleClass("sp-alpha-enabled",$.showAlpha),Ct.toggleClass("sp-buttons-disabled",!$.showButtons||U),Ct.toggleClass("sp-palette-disabled",!$.showPalette),Ct.toggleClass("sp-palette-only",$.showPaletteOnly),Ct.toggleClass("sp-initial-disabled",!$.showInitial),Ct.addClass($.className),Ct.attr("id",$.id),N()}function p(){function i(e){return e.data&&e.data.ignore?(E(t(this).data("color")),O()):(E(t(this).data("color")),I(!0),O(),X&&A()),!1}if(m&&Ct.find("*:not(input)").attr("unselectable","on"),u(),Ht&&_t.hide().after(qt),U?_t.after(Ct).hide():t(wt).append(Ct),K&&e.localStorage){try{var n=e.localStorage[K].split(",#");n.length>1&&(delete e.localStorage[K],t.each(n,function(e,t){y(t)}))}catch(o){}try{gt=e.localStorage[K].split(";")}catch(o){}}Vt.bind("click.spectrum touchstart.spectrum",function(e){Mt||S(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(_t.is(":disabled")||$.disabled===!0)&&q(),Ct.click(c),Pt.change(k),Pt.bind("paste",function(){setTimeout(k,1)}),Pt.keydown(function(e){13==e.keyCode&&(k(),e.preventDefault())}),Ft.text($.cancelText),Ft.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),A("cancel")}),Wt.text($.chooseText),Wt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),R()&&(I(!0),A())}),It.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),j()}),Nt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),V()}),d(Dt,function(e,t,i){pt=e/at,i.shiftKey&&(pt=Math.round(10*pt)/10),O()}),d(St,function(e,t){ut=parseFloat(t/st),O()},C,x),d(xt,function(e,t){dt=parseFloat(e/it),ht=parseFloat((nt-t)/nt),O()},C,x),$t?(E($t),F(),Gt=Yt||tinycolor($t).format,y($t)):F(),U&&T();var s=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";zt.delegate(".sp-thumb-el",s,i),Ot.delegate(".sp-thumb-el:nth-child(1)",s,{ignore:!0},i)}function y(i){if(J){var n=tinycolor(i).toRgbString();if(-1===t.inArray(n,gt))for(gt.push(n);gt.length>vt;)gt.shift();if(K&&e.localStorage)try{e.localStorage[K]=gt.join(";")}catch(o){}}}function w(){var e,t=[],i=gt,n={};if($.showPalette){for(var o=0;o<mt.length;o++)for(var s=0;s<mt[o].length;s++)e=tinycolor(mt[o][s]).toRgbString(),n[e]=!0;for(o=0;o<i.length;o++)e=tinycolor(i[o]).toRgbString(),n.hasOwnProperty(e)||(t.push(i[o]),n[e]=!0)}return t.reverse().slice(0,$.maxSelectionSize)}function _(){var e=P(),i=t.map(mt,function(t,i){return n(t,e,"sp-palette-row sp-palette-row-"+i)});gt&&i.push(n(w(),e,"sp-palette-row sp-palette-row-selection")),zt.html(i.join(""))}function M(){if($.showInitial){var e=Ut,t=P();Ot.html(n([e,t],t,"sp-palette-row-initial"))}}function C(){(0===nt||0===it||0===st)&&N(),Ct.addClass(bt)}function x(){Ct.removeClass(bt)}function k(){var e=tinycolor(Pt.val());e.ok?E(e)&&Z.move(e):Pt.addClass("sp-validation-error")}function S(){tt?A():T()}function T(){var i=t.Event("beforeShow.spectrum");return tt?(N(),void 0):(_t.trigger(i,[P()]),Z.beforeShow(P())===!1||i.isDefaultPrevented()||(o(),tt=!0,t(yt).bind("click.spectrum",A),t(e).bind("resize.spectrum",et),qt.addClass("sp-active"),Ct.removeClass("sp-hidden"),$.autoExpand&&(z()?V():j()),$.showPalette&&_(),N(),F(),Ut=P(),M(),Z.show(Ut),_t.trigger("show.spectrum",[Ut])),void 0)}function A(i){if((!i||"click"!=i.type||2!=i.button)&&tt&&!U){tt=!1,t(yt).unbind("click.spectrum",A),t(e).unbind("resize.spectrum",et),qt.removeClass("sp-active"),Ct.addClass("sp-hidden");var n=!tinycolor.equals(P(),Ut);n&&(Xt&&"cancel"!==i?I(!0):D()),Z.hide(P()),$.dontHideBoundElement||_t.trigger("hide.spectrum",[P()])}}function D(){E(Ut,!0)}function E(e,t){if(tinycolor.equals(e,P()))return!1;var i=tinycolor(e),n=i.toHsv();return ut=n.h,dt=n.s,ht=n.v,pt=n.a,F(),i.ok&&!t&&(Gt=Yt||i.format),!0}function P(){return tinycolor.fromRatio({h:ut,s:dt,v:ht,a:Math.round(100*pt)/100})}function R(){return!Pt.hasClass("sp-validation-error")}function z(e){var t=!1,e=e||P();e:for(var i=0;i<mt.length;i++)for(var n=0;n<mt[i].length;n++)if(t=tinycolor.equals(e,mt[i][n]))break e;return t}function O(){F(),Z.move(P()),_t.trigger("move.spectrum",[P()])}function F(){Pt.removeClass("sp-validation-error"),W();var e=tinycolor({h:ut,s:"1.0",v:"1.0"});xt.css("background-color",e.toHexString());var t=Gt;1>pt&&("hex"===t||"name"===t)&&(t="rgb");var i=P(),n=i.toHexString(),o=i.toRgbString();if(g||1===i.alpha?jt.css("background-color",o):(jt.css("background-color","transparent"),jt.css("filter",i.toFilter())),$.showAlpha){var s=i.toRgb();s.a=0;var r=tinycolor(s).toRgbString(),a="linear-gradient(left, "+r+", "+n+")";m?At.css("filter",tinycolor(r).toFilter({gradientType:1},n)):(At.css("background","-webkit-"+a),At.css("background","-moz-"+a),At.css("background","-ms-"+a),At.css("background",a))}$.showInput&&(1>pt&&("hex"===t||"name"===t)&&(t="rgb"),Pt.val(i.toString(t))),Lt.css("background-color",i.toString(t)),$.showPalette&&_(),M()}function W(){var e=dt,t=ht,i=e*it,n=nt-t*nt;i=Math.max(-ot,Math.min(it-ot,i-ot)),n=Math.max(-ot,Math.min(nt-ot,n-ot)),kt.css({top:n,left:i});var o=pt*at;Et.css({left:o-lt/2});var s=ut*st;Tt.css({top:s-ct})}function I(e){var t=P();Bt&&_t.val(t.toString(Gt)).change();var i=!tinycolor.equals(t,Ut);Ut=t,y(t),e&&i&&(Z.change(t),_t.trigger("change.spectrum",[t]))}function N(){it=xt.width(),nt=xt.height(),ot=kt.height(),rt=St.width(),st=St.height(),ct=Tt.height(),at=Dt.width(),lt=Et.width(),U||Ct.offset(a(Ct,Vt,G,Y)),W()}function L(){_t.show(),Vt.unbind("click.spectrum touchstart.spectrum"),Ct.remove(),qt.remove(),f[Jt.id]=null}function B(e,n){return e===i?t.extend({},$):n===i?$[e]:($[e]=n,u(),void 0)}function H(){Mt=!1,_t.attr("disabled",!1),Vt.removeClass("sp-disabled")}function q(){A(),Mt=!0,_t.attr("disabled",!0),Vt.addClass("sp-disabled")}function V(){Rt.hide(),It.show(),Ct.find(".sp-palette-input-container").show().find(".sp-custom-el").toggle(!z()),N()}function j(){Rt.show(),Ct.find(".sp-palette-input-container").hide(),N()}var $=s(l,r),U=$.flat,Y=$.containerOffsetY,G=$.containerOffsetX,X=$.clickPaletteToClose,J=$.showSelectionPalette,K=$.localStorageKey,Q=$.theme,Z=$.callbacks,et=h(N,10),tt=!1,it=0,nt=0,ot=0,st=0,rt=0,at=0,lt=0,ct=0,ut=0,dt=0,ht=0,pt=1,ft=$.palette.slice(0),mt=t.isArray(ft[0])?ft:[ft],gt=$.selectionPalette.slice(0),vt=$.maxSelectionSize,bt="sp-dragging",yt=r.ownerDocument,wt=yt.body,_t=t(r),Mt=!1,Ct=t(b,yt).addClass(Q),xt=Ct.find(".sp-color"),kt=Ct.find(".sp-dragger"),St=Ct.find(".sp-hue"),Tt=Ct.find(".sp-slider"),At=Ct.find(".sp-alpha-inner"),Dt=Ct.find(".sp-alpha"),Et=Ct.find(".sp-alpha-handle"),Pt=Ct.find(".sp-input"),Rt=Ct.find(".sp-picker-container"),zt=Ct.find(".sp-palette"),Ot=Ct.find(".sp-initial"),Ft=Ct.find(".sp-cancel"),Wt=Ct.find(".sp-choose"),It=Ct.find(".sp-expand"),Nt=Ct.find(".sp-collapse"),Lt=Ct.find(".sp-custom-inner"),Bt=_t.is("input"),Ht=Bt&&!U,qt=Ht?t(v).addClass(Q):t([]),Vt=Ht?qt:_t,jt=qt.find(".sp-preview-inner"),$t=$.color||Bt&&_t.val(),Ut=!1,Yt=$.preferredFormat,Gt=Yt,Xt=!$.showButtons||$.clickoutFiresChange;p();var Jt={show:T,hide:A,toggle:S,reflow:N,option:B,enable:H,disable:q,collapse:V,expand:j,set:function(e){E(e),I()},get:P,destroy:L,container:Ct,isPaletteColor:function(e){return z(e)}};return Jt.id=f.push(Jt)-1,Jt}function a(e,i,n,o){var s=0,r=function(){var i=0;return e.children(":visible").each(function(){i+=t(this).outerWidth()}),i}(),a=e.outerHeight(),l=i.outerHeight(),c=i.outerWidth(),u=e[0].ownerDocument,d=u.documentElement,h=d.clientWidth+t(u).scrollLeft(),p=d.clientHeight+t(u).scrollTop(),f=i.offset();return f.top+=l,f.left-=Math.min(f.left,f.left+r>h&&h>r?Math.abs(f.left+r-h-(c+f.left-h)):0),f.left+=n,f.top-=Math.min(f.top,f.top+a>p&&p>a?Math.abs(a+l-s):s),f.top+=o,f}function l(){}function c(e){e.stopPropagation()}function u(e,t){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return e.apply(t,n.concat(i.call(arguments)))}}function d(i,n,o,s){function r(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){if(d){if(m&&document.documentMode<9&&!e.button)return c();var t=e.originalEvent.touches,o=t?t[0].pageX:e.pageX,s=t?t[0].pageY:e.pageY,a=Math.max(0,Math.min(o-h.left,f)),l=Math.max(0,Math.min(s-h.top,p));g&&r(e),n.apply(i,[a,l,e])}}function l(e){var n=e.which?3==e.which:2==e.button;e.originalEvent.touches,n||d||o.apply(i,arguments)!==!1&&(d=!0,p=t(i).height(),f=t(i).width(),h=t(i).offset(),t(u).bind(v),t(u.body).addClass("sp-dragging"),g||a(e),r(e))}function c(){d&&(t(u).unbind(v),t(u.body).removeClass("sp-dragging"),s.apply(i,arguments)),d=!1}n=n||function(){},o=o||function(){},s=s||function(){};var u=i.ownerDocument||document,d=!1,h={},p=0,f=0,g="ontouchstart"in e,v={};v.selectstart=r,v.dragstart=r,v[g?"touchmove":"mousemove"]=a,v[g?"touchend":"mouseup"]=c,t(i).bind(g?"touchstart":"mousedown",l)}function h(e,t,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,e.apply(o,s)};i&&clearTimeout(n),(i||!n)&&(n=setTimeout(r,t))}}var p={beforeShow:l,move:l,change:l,show:l,hide:l,autoExpand:!1,color:!1,flat:!1,showInput:!1,showButtons:!0,containerOffsetX:0,containerOffsetY:0,clickoutFiresChange:!1,clickPaletteToClose:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,dontHideBoundElement:!1,localStorageKey:!1,maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,id:"",className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},f=[],m=!!/msie/i.exec(e.navigator.userAgent),g=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),i=t.style;return i.cssText="background-color:rgba(0,0,0,.5)",e(i.backgroundColor,"rgba")||e(i.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var e="";if(m)for(var t=1;6>=t;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-input-container'>","<span class='sp-custom-el' type='text' spellcheck='false'>","<span class='sp-custom-inner'></span>","</span>","<span class='sp-expand'><span class='sp-expand-inner'></span></span>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color-outer'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","</div>","<div class='sp-hue-outer'>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<span class='sp-custom-el' type='text' spellcheck='false'>","<span class='sp-custom-inner'></span>","</span>","<input class='sp-input' type='text' spellcheck='false'  />","<span class='sp-collapse'><span class='sp-collapse-inner'></span></span>","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(e){if("string"==typeof e){var i=this,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=f[t(this).data(y)];if(o){var s=o[e];if(!s)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?i=o.get():"container"==e?i=o.container:"option"==e?i=o.option.apply(o,n):"destroy"==e?(o.destroy(),t(this).removeData(y)):"isPaletteColor"==e?i=o.isPaletteColor.apply(o,n):s.apply(o,n)}}),i}return this.spectrum("destroy").each(function(){var i=r(this,e);t(this).data(y,i.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=d,t.fn.spectrum.defaults=p,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("<input type='color' value='!' />")[0],i="color"===e.type&&"!"!=e.value;i||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(e){function t(e){if("object"==typeof e&&e.hasOwnProperty("_tc_id"))return e;var n=i(e),s=n.r,a=n.g,c=n.b,u=k(n.a),d=n.format;return{ok:n.ok,format:d,_tc_id:y++,alpha:u,toHsv:function(){var e=r(s,a,c);return{h:e.h,s:e.s,v:e.v,a:u}},toHsvString:function(){var e=r(s,a,c),t=_(360*e.h),i=_(100*e.s),n=_(100*e.v);return 1==u?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+u+")"},toHsl:function(){var e=o(s,a,c);return{h:e.h,s:e.s,l:e.l,a:u}},toHslString:function(){var e=o(s,a,c),t=_(360*e.h),i=_(100*e.s),n=_(100*e.l);return 1==u?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+u+")"},toHex:function(){return l(s,a,c)},toHexString:function(e){return"#"+l(s,a,c,e)},toRgb:function(){return{r:_(s),g:_(a),b:_(c),a:u}},toRgbString:function(){return 1==u?"rgb("+_(s)+", "+_(a)+", "+_(c)+")":"rgba("+_(s)+", "+_(a)+", "+_(c)+", "+u+")"},toName:function(){return T[l(s,a,c)]||!1},toFilter:function(e,i){var n=l(s,a,c,!0),o=n,r=Math.round(255*k(u)).toString(16),d=r,h=e&&e.gradientType?"GradientType = 1, ":"";if(i){var p=t(i);o=p.toHex(),d=Math.round(255*k(p.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+h+"startColorstr=#"+m(r)+n+",endColorstr=#"+m(d)+o+")"},toString:function(e){e=e||this.format;var t=!1;return"rgb"===e&&(t=this.toRgbString()),"hex"===e&&(t=this.toHexString()),"hex6"===e&&(t=this.toHexString(!0)),"name"===e&&(t=this.toName()),"hsl"===e&&(t=this.toHslString()),"hsv"===e&&(t=this.toHsvString()),t||this.toHexString(!0)}}}function i(e){var t={r:0,g:0,b:0},i=1,o=!1,r=!1;return"string"==typeof e&&(e=g(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=n(e.r,e.g,e.b),o=!0,r="rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(t=a(e.h,e.s,e.v),o=!0,r="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(t=s(e.h,e.s,e.l),o=!0,r="hsl"),e.hasOwnProperty("a")&&(i=e.a)),t.r=M(255,C(t.r,0)),t.g=M(255,C(t.g,0)),t.b=M(255,C(t.b,0)),t.r<1&&(t.r=_(t.r)),t.g<1&&(t.g=_(t.g)),t.b<1&&(t.b=_(t.b)),{ok:o,format:e&&e.format||r,r:t.r,g:t.g,b:t.b,a:i}}function n(e,t,i){return{r:255*u(e,255),g:255*u(t,255),b:255*u(i,255)}}function o(e,t,i){e=u(e,255),t=u(t,255),i=u(i,255);var n,o,s=C(e,t,i),r=M(e,t,i),a=(s+r)/2;if(s==r)n=o=0;else{var l=s-r;switch(o=a>.5?l/(2-s-r):l/(s+r),s){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:o,l:a}}function s(e,t,i){function n(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e}var o,s,r;if(e=u(e,360),t=u(t,100),i=u(i,100),0===t)o=s=r=i;else{var a=.5>i?i*(1+t):i+t-i*t,l=2*i-a;o=n(l,a,e+1/3),s=n(l,a,e),r=n(l,a,e-1/3)}return{r:255*o,g:255*s,b:255*r}}function r(e,t,i){e=u(e,255),t=u(t,255),i=u(i,255);var n,o,s=C(e,t,i),r=M(e,t,i),a=s,l=s-r;if(o=0===s?0:l/s,s==r)n=0;else{switch(s){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:o,v:a}}function a(e,t,i){e=6*u(e,360),t=u(t,100),i=u(i,100);var n=w.floor(e),o=e-n,s=i*(1-t),r=i*(1-o*t),a=i*(1-(1-o)*t),l=n%6,c=[i,r,s,s,a,i][l],d=[a,i,i,r,s,s][l],h=[s,s,a,i,i,r][l];return{r:255*c,g:255*d,b:255*h}}function l(e,t,i,n){var o=[m(_(e).toString(16)),m(_(t).toString(16)),m(_(i).toString(16))];return n||o[0].charAt(0)!=o[0].charAt(1)||o[1].charAt(0)!=o[1].charAt(1)||o[2].charAt(0)!=o[2].charAt(1)?o.join(""):o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)}function c(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function u(e,t){p(e)&&(e="100%");var i=f(e);return e=M(t,C(0,k(e))),i&&(e*=t/100),w.abs(e-t)<1e-6?1:e>=1?e%t/k(t):e}function d(e){return M(1,C(0,e))}function h(e){return parseInt(e,16)}function p(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===k(e)}function f(e){return"string"==typeof e&&-1!=e.indexOf("%")}function m(e){return 1==e.length?"0"+e:""+e}function g(e){e=e.replace(v,"").replace(b,"").toLowerCase();var t=!1;if(S[e])e=S[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0};var i;return(i=A.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=A.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=A.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=A.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=A.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=A.hex6.exec(e))?{r:h(i[1]),g:h(i[2]),b:h(i[3]),format:t?"name":"hex"}:(i=A.hex3.exec(e))?{r:h(i[1]+""+i[1]),g:h(i[2]+""+i[2]),b:h(i[3]+""+i[3]),format:t?"name":"hex"}:!1}var v=/^[\s,#]+/,b=/\s+$/,y=0,w=Math,_=w.round,M=w.min,C=w.max,x=w.random,k=e.parseFloat;t.fromRatio=function(e){if("object"==typeof e)for(var i in e)1===e[i]&&(e[i]="1.0");return t(e)},t.equals=function(e,i){return e&&i?t(e).toRgbString()==t(i).toRgbString():!1},t.random=function(){return t.fromRatio({r:x(),g:x(),b:x()})},t.desaturate=function(e,i){var n=t(e).toHsl();return n.s-=(i||10)/100,n.s=d(n.s),t(n)},t.saturate=function(e,i){var n=t(e).toHsl();return n.s+=(i||10)/100,n.s=d(n.s),t(n)},t.greyscale=function(e){return t.desaturate(e,100)},t.lighten=function(e,i){var n=t(e).toHsl();return n.l+=(i||10)/100,n.l=d(n.l),t(n)},t.darken=function(e,i){var n=t(e).toHsl();return n.l-=(i||10)/100,n.l=d(n.l),t(n)},t.complement=function(e){var i=t(e).toHsl();return i.h=(i.h+.5)%1,t(i)},t.triad=function(e){var i=t(e).toHsl(),n=360*i.h;return[t(e),t({h:(n+120)%360,s:i.s,l:i.l}),t({h:(n+240)%360,s:i.s,l:i.l})]},t.tetrad=function(e){var i=t(e).toHsl(),n=360*i.h;return[t(e),t({h:(n+90)%360,s:i.s,l:i.l}),t({h:(n+180)%360,s:i.s,l:i.l}),t({h:(n+270)%360,s:i.s,l:i.l})]},t.splitcomplement=function(e){var i=t(e).toHsl(),n=360*i.h;return[t(e),t({h:(n+72)%360,s:i.s,l:i.l}),t({h:(n+216)%360,s:i.s,l:i.l})]},t.analogous=function(e,i,n){i=i||6,n=n||30;var o=t(e).toHsl(),s=360/n,r=[t(e)];for(o.h*=360,o.h=(o.h-(s*i>>1)+720)%360;--i;)o.h=(o.h+s)%360,r.push(t(o));return r},t.monochromatic=function(e,i){i=i||6;for(var n=t(e).toHsv(),o=n.h,s=n.s,r=n.v,a=[],l=1/i;i--;)a.push(t({h:o,s:s,v:r})),r=(r+l)%1;return a},t.readable=function(e,i){var n=t(e).toRgb(),o=t(i).toRgb();return(o.r-n.r)*(o.r-n.r)+(o.g-n.g)*(o.g-n.g)+(o.b-n.b)*(o.b-n.b)>10404};var S=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=t.hexNames=c(S),A=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",o="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();e.tinycolor=t}(this),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}),t.ui&&t.ui.dialog&&t.widget("ui.dialog",t.ui.dialog,{_allowInteraction:function(e){return t(e.target).closest(".sp-container").length?!0:this._super(e)}})}(window,jQuery),_wAMD.define("vendor/spectrum",function(){}),_wAMD.define("platform/editor/view/settings/item-views/ColorItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-color","vendor/spectrum"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue"},ui:{input:"input"},onRender:function(){var e=this.model.get("value")||this.model.get("default")||"#FFF",t=this.ui.input;
t.weeblyColorChooser({color:e,hideAfterPaletteSelect:!0,onBeforeShow:function(){t.weeblyColorChooser("smart"),_W.pauseClickHandler=!0},onChange:function(){_W.pauseClickHandler=!1,t.spectrum("hide")}})},getValue:function(){return this.ui.input.val()}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-checkbox",[],function(){return'<label for="platform-settings-tooltip-{{name}}" class="inline">{{label}}</label>\n<input id="platform-settings-tooltip-{{name}}" type="checkbox" name="{{name}}" {{checked}} >'}),_wAMD.define("platform/editor/view/settings/item-views/CheckboxItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-checkbox","util/ui/wInput"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue","click @ui.inputContainer":"saveValue"},ui:{input:"input",inputContainer:".w-checkbox-container"},templateHelpers:function(){var e=this;return{checked:function(){return e.getParsedValueFromModel()?'checked="checked"':""}}},getParsedValueFromModel:function(){var e=this.model.get("default")||!1,t="undefined"==typeof this.model.get("value")?e:this.model.get("value");return JSON.parse(t)},onRender:function(){this.ui.input.wCheckbox(),this.bindUIElements()},getValue:function(){return this.ui.input.is(":checked")}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-toggle",[],function(){return'<label class="inline">{{label}}</label>\n<div class="toggle-switch inline-toggle-switch control dark">\n	<input\n			type="checkbox"\n			name="{{name}}"\n			id="platform-settings-tooltip-{{name}}"\n			class="toggle-field"\n			{{checked}}\n			>\n\n	<label for="platform-settings-tooltip-{{name}}">\n		<div class="background-container">\n			<div class="background-slider">\n				<span class="label-on">ON</span>\n				<span class="label-off">OFF</span>\n			</div>\n		</div>\n          <span class="blob">\n            <span class="blob-inner"></span>\n          </span>\n	</label>\n</div>'}),_wAMD.define("platform/editor/view/settings/item-views/ToggleItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/CheckboxItemView","tpl!platform/element/settings/tooltip-toggle","util/ui/wInput"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue","click @ui.input":"updateToggleValue"},ui:{input:"input"},templateHelpers:function(){var e=this;return{checked:function(){return e.getParsedValueFromModel()!==!1?'checked="checked"':""}}},onRender:function(){var e=this.getParsedValueFromModel();this.ui.input.prop("checked",e),this.ui.input.toggleClass("checked",e)},updateToggleValue:function(){this.ui.input.toggleClass("checked",this.ui.input.prop("checked"))},getValue:function(){return this.ui.input.is(":checked")},isValid:function(){return!0}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-slider",[],function(){return'<label for="platform-settings-tooltip-{{name}}">{{label}}</label>\n<div class="slider"></div>\n<div class="slider-value">{{value}}</div>'}),_wAMD.define("jquery-ui/slider",["jquery","./core","./mouse","./widget"],function(e){!function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),t=o.length;i>t;t++)r.push(s);this.handles=o.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,s,r,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));(o>i||o===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(o=i,s=e(this),r=t)}),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),l=s.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),s=this._valueMin()+n*o,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,s;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(o=this.values(),o[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),s!==!1&&this.values(t,i,!0))):i!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:i}),s!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,o,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,o,s,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),o=this._valueMin(),s=this._valueMax(),i=s!==o?100*((n-o)/(s-o)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,o,s,r,a=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(r=this.options.step,o=s=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;s=this._trimAlignValue(o+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;s=this._trimAlignValue(o-r)}this._slide(i,a,s)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(e)}),_wAMD.define("platform/editor/view/settings/item-views/SliderItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-slider","jquery-ui/slider"],function(e,t,i,n){var o=i.extend({template:t.compile(n),ui:{input:".slider"},getValue:function(){return parseInt(this.ui.input.val(),10)},onRender:function(){var e={range:"min",value:this.model.get("value")||this.model.get("default")||this.model.get("min")||0};this.model.get("max")&&(e.max=this.model.get("max")),this.model.get("min")&&(e.min=this.model.get("min")),this.model.get("step")&&(e.step=this.model.get("step")||1),e.stop=function(e,t){this.model.set("value",t.value)}.bind(this),this.model.on("change:value",this.render),this.ui.input.slider(e)},isValid:function(){var e=this.getValue(),t=this.model.get("max"),i=this.model.get("min"),n=this.model.get("step"),o=!0;return null!=i&&void 0!=i&&i>e&&(o=!1),null!=t&&void 0!=t&&e>t&&(o=!1),null!=n&&void 0!=n&&0!=e%n&&(o=!1),o},getValue:function(){return this.ui.input.slider("value")},isValid:function(){return!0}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-radio",[],function(){return'<label for="platform-settings-tooltip-{{name}}">{{label}}</label>\n\n<div class="options-wrap">\n	{{#options}}\n		<div class="radio-wrap">\n			<input type="radio" name="{{group_name}}" value="{{value}}" {{#selected}}checked{{/selected}}>\n			<label class="radio-name inline">{{name}}</label>\n		</div>\n	{{/options}}\n</div>'}),_wAMD.define("platform/editor/view/settings/item-views/RadioItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/SelectItemView","tpl!platform/element/settings/tooltip-radio"],function(e,t,i,n){var o=i.extend({template:t.compile(n),events:{"change @ui.input":"saveValue"},templateHelpers:function(){var e=this;return _.extend({group_name:function(){return e.model.get("name")}},i.prototype.templateHelpers.call(this))},ui:{input:"input"},getValue:function(){return this.$el.find("input:checked").val()},isValid:function(){return!0}});return o}),_wAMD.define("tpl!platform/element/settings/tooltip-align",[],function(){return'<label>{{label}}</label>\n\n<div class="switcher dark-switcher alignment-switcher">\n	<div class="inner">\n		<span data-align="left" class="option left" data-value="left">\n			<span class="icon w-icon-align-left"></span>\n		</span>\n\n		<span data-align="center" class="option center" data-value="center">\n			<span class="icon w-icon-align-center"></span>\n		</span>\n\n		<span data-align="right" class="option right" data-value="right">\n			<span class="icon w-icon-align-right"></span>\n		</span>\n	</div>\n</div>'}),_wAMD.define("platform/editor/view/settings/item-views/AlignItemView",["jquery","backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-align"],function(e,t,i,n,o){var s=n.extend({template:i.compile(o),events:{"click .option":"setActive"},ui:{active:".selected",options:".option"},className:"settings-item",setActive:function(t){t.preventDefault(),this.$el.find(".selected").removeClass("selected"),e(t.currentTarget).addClass("selected"),this.saveValue()},onRender:function(){var e=this.model.get("value")||this.model.get("default")||"left";this.ui.options.filter("."+e).addClass("selected")},getValue:function(){return this.ui.options.filter(".selected").data("value")}});return s}),_wAMD.define("platform/editor/view/settings/item-views/HiddenItemView",["backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView"],function(e,t,i){var n=i.extend({template:t.compile("<div></div>"),getValue:function(){return this.model.get("value")},isValid:function(){return!1}});return n}),_wAMD.define("tpl!platform/element/settings/tooltip-group",[],function(){return'<span class=\'group-label\' data-name="{{name}}">{{label}}</span>\n<span class="icon icon-chevron-right"></span>'}),_wAMD.define("platform/editor/view/settings/item-views/GroupItemView",["jquery","backbone-all","mustache","platform/editor/view/settings/item-views/BaseSettingsItemView","tpl!platform/element/settings/tooltip-group"],function(e,t,i,n,o){var s=n.extend({template:i.compile(o),className:"settings-item group-item",onShow:function(){this.displayable()||this.$el.remove()},displayable:function(){var e=_.filter(this.model.get("properties"),function(e){return!e.hidden});return e.length>0}});return s}),_wAMD.define("tpl!platform/element/settings/tooltip-group-wrap",[],function(){return'<div class="back">\n	<div class="inner">\n	<div class="title">\n		{{#icon}}\n			<span class="title-icon">\n				<img src="{{icon}}">\n			</span>\n		{{/icon}}\n		{{#legacy_icon}}\n			<span class="icon w-icon-{{legacy_icon}}"></span>\n		{{/legacy_icon}}\n	</div>\n	<span class="back-icon icon-chevron-left"></span>\n	</div>\n</div>\n\n<div class="content-outer">\n	<div class="title">{{label}}</div>\n	<div class="content">\n		\n	</div>\n</div>\n'}),_wAMD.define("platform/editor/view/settings/GroupTooltipView",["underscore","jquery","backbone-all","mustache","editor/app","platform/editor/view/settings/item-views/StringItemView","platform/editor/view/settings/item-views/IntegerItemView","platform/editor/view/settings/item-views/SelectItemView","platform/editor/view/settings/item-views/TextItemView","platform/editor/view/settings/item-views/ColorItemView","platform/editor/view/settings/item-views/ToggleItemView","platform/editor/view/settings/item-views/CheckboxItemView","platform/editor/view/settings/item-views/SliderItemView","platform/editor/view/settings/item-views/RadioItemView","platform/editor/view/settings/item-views/AlignItemView","platform/editor/view/settings/item-views/HiddenItemView","platform/editor/view/settings/item-views/GroupItemView","tpl!platform/element/settings/tooltip-group-wrap"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v){var b=i.Marionette.CompositeView.extend({template:n.compile(v),className:"subgroup",events:{"click .back":"slideOut"},initialize:function(e){var t=this;t.icon=e.icon,t.legacy_icon=e.legacy_icon},templateHelpers:function(){var e=this;return{icon:e.icon,legacy_icon:e.legacy_icon}},onRender:function(){this.$el.attr("data-name",this.model.get("name")),this.$el.css({left:"460px"})},slideOut:function(){this.$el.css("left","460px"),this.$el.siblings(".main").css("left","0px")},getItemView:function(e){var t=e.get("type"),i=e.get("hidden"),n={string:s,"int":r,checkbox:d,text:l,color:c,toggle:u,select:a,slider:h,radio:p,align:f,hidden:m};return t=i?"hidden":t,t=n.hasOwnProperty(t)?t:"string",n[t]},itemViewContainer:".content"});return b}),_wAMD.define("tpl!platform/element/settings/iframe-wrap",[],function(){return"<iframe src={{built_url}}></iframe>"}),_wAMD.define("platform/editor/view/settings/SettingsIframeDialogView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!platform/element/settings/iframe-wrap"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),dialog:function(){var e=this,t=e.calculateWidth(),i=e.calculateHeight(),n=!!e.model.get("external").modal;return{title:e.model.get("external").label,dialogClass:"flat flat-admin-dialog-small platform-iframe "+e.page_element_id,cancelX:!0,size:t+"x"+i,draggable:!n,modal:n}},className:"dialog-iframe-wrap",ui:{iframe:"iframe"},calculateWidth:function(){var t=this.model.get("external").width||800;return t>e(window).width()?e(window).width():t},calculateHeight:function(){var t=this.model.get("external").height||800;return t>e(window).height()?e(window).height():t},buildURL:function(){return this.model.get("external").url.replace(":user_id",this.model.get("user_id")).replace(":site_id",this.model.get("site_id")).replace(":element_id",this.model.get("element_id"))},templateHelpers:function(){var e=this;return{built_url:function(){return e.buildURL()}}},initialize:function(e){this.settings=e.settings,this.model=e.model,this.page_element_id=e.peid;var t=this.buildURL().split("/");this.receiverOrigin=t[0]+"//"+t[2]},receiveMessage:function(e){var t=e.data,i=t.action,n=t.data,o=this,s=o.ui.iframe;if(e.origin==this.receiverOrigin&&s[0].contentWindow==e.source){var r={"settings:update":function(e){o.saveSettings(e)},"dialog:close":function(){o.trigger("dialog:close")}};r.hasOwnProperty(i)&&r[i](n)}},saveSettings:function(e){var t=this;_W.Editor.RPC.PlatformElementInstance.updateSettings(this.page_element_id,e).done(function(e){if(e.success){t.sendMessage("settings:updated",e.data);var i=require("editor/build/utils");i.renderPage(window.currentPage)}else t.sendMessage("settings:invalid",e.data)}.bind(this)).fail(function(e){t.sendMessage("settings:invalid",e.data)}.bind(this))},sendMessage:function(e,t){var i=this.getTargetWindow();i&&i.postMessage({action:e,data:t},this.receiverOrigin)},getTargetWindow:function(){return this.ui.iframe.get(0).contentWindow},onShow:function(){window.addEventListener("message",this.receiveMessage.bind(this)),this.ui.iframe.on("load",function(){this.sendMessage("settings:load",{settings:this.settings,config:{user_id:this.model.get("user_id"),site_id:this.model.get("site_id"),element_id:this.model.get("element_id")}},this.receiverOrigin)}.bind(this))},onClose:function(){window.removeEventListener("message",this.receiveMessage)}});return r}),_wAMD.define("tpl!platform/element/settings/tooltip-wrap",[],function(){return'<div class="element-options">\n	<div class="main current-panel">\n		<div class="primary">\n			<div class="inner">\n				<div class="title">\n					{{#icon}}\n						<span class="title-icon">\n							<img src="{{icon}}">\n						</span>\n					{{/icon}}\n					{{#legacy_icon}}\n						<span class="icon w-icon-{{legacy_icon}}"></span>\n					{{/legacy_icon}}\n					<span class="text">{{ name }}</span> \n				</div>\n				<div class="content">\n					<div class="two-fields">\n						<div class="field">\n							<button id="iframe-button" class="btn btn-info btn-large btn-block">{{iframe_label}}</button>\n							<div style="clear:both"></div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n		<div class="secondary">\n			<div class="content">\n				<ul>\n					\n				</ul>\n				{{^has_settings}}\n					<div class="settings-missing-wrap">\n						<p>There are no settings for this element</p>\n					</div>\n				{{/has_settings}} \n			</div>\n		</div>\n	</div>\n\n</div>\n'}),_wAMD.define("tpl!platform/element/settings/tooltip-wrap-no-external",[],function(){return'<div class="element-options no-external">\n	<div class="main current-panel">\n		<div class="secondary">\n			<div class="title">\n				{{#icon}}\n					<span class="title-icon">\n						<img src="{{icon}}">\n					</span>\n				{{/icon}}\n				{{#legacy_icon}}\n					<span class="icon w-icon-{{legacy_icon}}"></span>\n				{{/legacy_icon}}\n				<span class="text">{{ name }}</span> \n			</div>\n			<div class="content">\n				<ul>\n					\n				</ul>\n				{{^has_settings}}\n					<div class="settings-missing-wrap">\n						<p>There are no settings for this element</p>\n					</div>\n				{{/has_settings}} \n			</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("platform/editor/view/settings/SettingsTooltipView",["underscore","jquery","backbone-all","mustache","editor/app","platform/editor/model/PlatformElementSettingModel","platform/editor/view/settings/GroupTooltipView","platform/editor/view/settings/SettingsIframeDialogView","platform/editor/view/settings/item-views/GroupItemView","tpl!platform/element/settings/tooltip-wrap","tpl!platform/element/settings/tooltip-wrap-no-external"],function(e,t,i,n,o,s,r,a,l,c,u){var d=i.Marionette.CompositeView.extend({getTemplate:function(){return this.model.get("external")?n.compile(c):n.compile(u)},className:"w-ui platform-element-settings tooltips",itemView:l,templateHelpers:function(){var t=this;return{has_settings:function(){return e.filter(t.collection.models,function(e){return!e.get("hidden")||!0}).length>0},iframe_label:function(){return this.external.label}}},itemViewContainer:".content ul",ui:{panels:".element-options"},events:{"click #iframe-button":"openSettingsIframe","click .toggle-switch":"toggleButtonClickHandler","click .group-item":"changePanel"},initialize:function(e){var t=this;this.peid=e.peid,this.collection.on("change",function(){Weebly.Editor.RPC.PlatformElementInstance.updateSettings(t.peid,t.prepareSettingsSave()).done(function(e){if(e.success){var t=Weebly.Elements.currentElement;Weebly.Elements.currentElement=null;var i=require("editor/build/utils");i.renderPage(window.currentPage),Weebly.Elements.setCurrentElement(t)}})}),this.initGroups()},initGroups:function(){var e=this,t={};this.collection.each(function(n){var o=new i.Collection(n.get("properties"),{model:s});o.groupName=n.get("name"),o.on("change",function(){var t=e.collection.findWhere({name:this.groupName});t.set("properties",this.toJSON())}),t[n.get("name")]=o}),e.panels=e.collection.map(function(i){return new r({icon:e.model.get("icon"),legacy_icon:e.model.get("legacy_icon"),model:i,collection:t[i.get("name")]})})},prepareSettingsSave:function(){var t=this,i={};return t.collection.each(function(t){e.each(t.get("properties"),function(e){var t=e.default||null,n="undefined"==typeof e.value?t:e.value;i[e.name]=n})}),i},onShow:function(){this.renderPanels(),this.displayIframe()&&this.openSettingsIframe()},displayIframe:function(){var e=t(".ui-dialog.platform-iframe"),i=0===this.$el.find(".main .settings-item").length&&this.model.has("external"),n=0===e.length;return i&&this.close(),e.hasClass(this.peid)||(e.remove(),n=!0),n&&i},renderPanels:function(){var e=this;e.panels.each(function(t){e.ui.panels.append(t.render().el)})},changePanel:function(e){var i=t(e.currentTarget).find(".group-label").data("name"),n=this.panels.filter(function(e){return e.model.get("name")==i})[0];n.$el.css("left","0px"),this.$el.find(".element-options .main").css("left","-460px")},openSettingsIframe:function(){o.showDialog(new a({model:this.model,settings:this.prepareSettingsSave(),peid:this.peid})),this.close()},onClose:function(){Weebly.Elements.unselectElement()}});return d}),_wAMD.define("platform/editor/view/settings/SettingsConverter",["underscore","backbone-all","editor/app"],function(e,t){var i=t.Model.extend({TYPE_MAP:{string:["%%VIDEOURL%%"],text:[],"int":["%%ID%%"],slider:[],checkbox:[],toggle:[],radio:[],select:["%%SIZE%%","margin-top","margin-bottom","%%MARGINTOP%%","%%MARGINBOTTOM%%","%%WIDTH%%"],color:[],align:["%%ALIGN%%"]},initialize:function(e){this.elementDef=e,this.config=this._buildConfig()},encode:function(e,t){for(var i=[],n=0;n<e.length;n++){var o=e[n],s=this._mapPropertyType(o.property);s||(s="string");var r;switch(s){case"select":r=this._valuesForSelect(o);break;default:r=""}var a,l=this._getGroupForProp(o);-1==(a=this._arrayHasGroup(i,l))&&(i.push(this._buildGroup(l)),a=i.length-1),i[a].properties.push({name:t.properties[o.cfpid].ucfpid,label:o.title,type:s,"default":o.propertyDefault,values:r})}return i},decode:function(e){console.log(JSON.stringify(e))},getConfig:function(){return this.config},_mapPropertyType:function(e){for(var t in this.TYPE_MAP)if(this.TYPE_MAP.hasOwnProperty(t)){if(t===e)return this.TYPE_MAP[t];if(this.TYPE_MAP[t].indexOf(e)>-1)return t}return void 0},_getGroupForProp:function(e){switch(e.property){case"%%FIELD_INSTRUCTIONS%%":return"instructions";case"%%REQUIRED%%":return"subactions";case"%%WIDTH%%":case"%%HEIGHT%%":return"dimensions";case"%%ALIGN%%":case"%%LEGACYALIGN%%":return"position";case"%%BUTTON_ALIGN%%":case"%%BUTTON_TEXT%%":return"submitButton";case"%%AUDIOTITLE%%":case"%%ARTIST%%":return"trackInfo";case"%%NAV%%":case"%%NAVLOCATION%%":return"navigation";case"%%SPEED%%":return"speed";case"%%BUTTONTYPE%%":case"%%BUTTONSIZE%%":return"button";case"margin-bottom":case"margin-top":return"spacing";default:return"settings"}},_arrayHasGroup:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return-1},_buildGroup:function(e){return{name:e,type:"group",label:e,properties:[]}},_buildConfig:function(){return{name:this.elementDef.displayname,legacy_icon:this.elementDef.elementid,autopop:!1,external:{url:"http://weebly.com",label:"Check out Weebly."}}},_valuesForSelect:function(e){var t=e.options.split("/"),i=e.result.split("/"),n=[];if(t.length>0)for(var o=0;o<i.length;o++)n.push({name:t[o],value:i[o]});else n=i;return n}});return i}),_wAMD.define("platform/editor/view/settings/LegacySettingsTooltipView",["underscore","backbone-all","editor/app","platform/editor/view/settings/SettingsTooltipView","platform/editor/view/settings/SettingsConverter","tpl!platform/element/settings/tooltip-wrap"],function(e,t,i,n){var o=n.extend({collectionEvents:{change:"_collectionChange"},initialize:function(t){var i=this;i.peid=t.peid,i._settings=i.prepareSettingsSave(),i.wElements=t.wElements,i._wElements=e.clone(t.wElements),this.initGroups()},_collectionChange:function(){this.didValuesChange()&&this.wElements.setCurrentElement(this._wElements.currentElement)},getUcfpidForCfpid:function(e){return this.wElements.uproperty.properties[e].ucfpid},getCfpidForUcfpid:function(e){var t=this.wElements.uproperty.properties;for(var i in t)if(t.hasOwnProperty(i)&&t[i].ucfpid===e)return i},didValuesChange:function(){var t=this.prepareSettingsSave();return e.some(t,function(e,t){if(e!==this._settings[t]){this._settings[t]=e;var i=this.getCfpidForUcfpid(t);return this._isAlignment(i)?(setContentFieldProperty(this.wElements.ucfid,t,e),this.wElements.continueOnChange(),!0):(this.wElements.onChange(t,i),!0)}},this)},_isAlignment:function(t){var i=this.wElements,n=i.elementDef.contentfields[i.pfield.cfid].contentFieldProperties,o=e.findWhere(n,{property:"%%ALIGN%%"});return o?o.cfpid===t:!1}});return o}),Weebly.Elements={Version:"0.1",Author:"David Rusenko",Company:"Weebly, Inc.",propertyContainer:null,currentElement:null,currentValidateFunction:null,currentSaveValidateFunction:null,currentCustomProperties:Array(),editing:null,customHTML:Array(),upload:0,skipRerender:!1,skipMenuBar:!1,isFormDirty:!1,unsyncedProperties:{},useNewSettingsPopup:!1,init:function(e){this.propertyContainer=e.propertyContainer},selectElement:function(e){if(e!=this.currentElement){if(this.currentElement&&Weebly.Elements.unselectElement(),!this.isSelectableElement(e))return;this.currentElement=e,this.currentCustomProperties=Array();var t=require("config"),i=$(e.id+"-form-parent");i||t.chromeless||$(e).up("li.inside").addClassName("inside-active"),this.generateProperties(e),ImageExtras.showControls(e)}},isPlatformElement:function(){return null!==this.currentElement&&"string"==typeof this.currentElement.getAttribute("data-platformPeid")},unselectElement:function(){if(this.currentElement){$(this.currentElement).up("li.inside").removeClassName("inside-active");
var e=getElementObject(Weebly.Elements.currentElement.up("li.inside"));if(e instanceof Weebly.SocialElement&&(e.handleToolbarHide(),e.recordTextInputs()),ImageExtras.hideControls(this.currentElement),this.editing&&hideCustomHTML(this.ucfid,this.editing,this.uproperty.properties[this.editing].ucfpid),hideFlashContainer(),("22397704"==this.idfield.eid||"18362204"==this.idfield.eid)&&Weebly.ImageGallery.destroy(),"36391960"==this.idfield.eid){var t;"text"==this.uproperty.properties[96630555].property_result?t="TextOnly":"image"==this.uproperty.properties[96630555].property_result?t="ImageOnly":"text_image"==this.uproperty.properties[96630555].property_result&&(t="TextAndImage"),new Ajax.Request(ajax,{parameters:{pos:"saveadsense",cookie:document.cookie,cfid:this.uproperty.properties.cfid,backgroundColor:this.uproperty.properties[53687540].property_result,borderColor:this.uproperty.properties[52715841].property_result,textColor:this.uproperty.properties[60388297].property_result,titleColor:this.uproperty.properties[10290183].property_result,urlColor:this.uproperty.properties[34189825].property_result,adUnitType:t,layout:this.uproperty.properties[81070942].property_result,elementid:this.idfield.id},onFailure:errFunc,bgRequest:!0})}Weebly.Linker.close(),jQuery(document.activeElement).blur(),""==this.currentSaveValidateFunction||this.closeOnValidate||!this.textChange&&!this.mapChange?(this.mapChange=null,this.closeOnValidate=null,swfu.dontSave||this.currentElement.id===xhrUploading?swfu.dontSave=null:this.saveProperties(),this.isFormDirty&&(this.isFormDirty=!1,this.continueOnChange()),(this.isPlatformElement()||this.useNewSettingsPopup)&&this.hidePlatformSettings(),this.currentElement=null,this.currentValidateFunction=null,this.currentSaveValidateFunction=null,this.hideMenuBar(),repositionElements()):(this.textChange=null,this.mapChange=null,validateFunction(),this.closeOnValidate=1)}this.isFormDirty=!1},setCurrentElement:function(e){if(e!=this.currentElement){if(this.currentElement&&Weebly.Elements.unselectElement(),this.currentElement=e,this.currentCustomProperties=Array(),!this.extractElementProperties(e))return;var t=this;Weebly.Element.fetchElementDefinition(t.idfield.eid,function(e){Weebly.Elements.handlerGenerateProperties({eid:t.idfield.eid,ucfid:t.ucfid,userProperties:t.uproperty,elementDef:e,render:!1})},!0)}},generateProperties:function(e){if(this.currentElement&&this.extractElementProperties(e)){var t=this;Weebly.Element.fetchElementDefinition(t.idfield.eid,function(e){Weebly.Elements.handlerGenerateProperties({eid:t.idfield.eid,ucfid:t.ucfid,userProperties:t.uproperty,elementDef:e,render:!0})},!0)}},_setValidateFunctions:function(e,t,i,n){var o="";this.useNewSettingsPopup&&(o="platform-settings-tooltip-"),this.currentContentFieldDef=e.contentfields[i],this.currentValidateFunction=this.currentContentFieldDef.elementonChangeJs.replace(new RegExp("%%ELEMENTID%%","gi"),t),this.currentSaveValidateFunction=this.currentContentFieldDef.elementJs.replace(new RegExp("%%ELEMENTID%%","gi"),t);for(var s=e.contentfields[i].contentFieldProperties,r=0;r<s.length;r++){var a=s[r],l=a.cfpid,c=n.properties[l];""!=a.referenceProperty&&(this.currentValidateFunction=this.currentValidateFunction.replace(new RegExp(a.referenceProperty,"gi"),o+c.ucfpid),this.currentSaveValidateFunction=this.currentSaveValidateFunction.replace(new RegExp(a.referenceProperty,"gi"),o+c.ucfpid))}},handlerGenerateProperties:function(options){var elementDef=options.elementDef,ucfid=options.ucfid,eid=options.eid,userProperties=options.userProperties,render=options.render||!1;if(this.currentElement){this.elementDef=elementDef;var cfid=userProperties.cfid;this._setValidateFunctions(elementDef,ucfid,cfid,userProperties);var allProperties=elementDef.contentfields[cfid].contentFieldProperties;if(render){var visibleProperties=jQuery.grep(allProperties,function(e){return 1!=e.hidden});if(visibleProperties.length){""!=this.currentValidateFunction&&eval("this.currentValidateFunction = "+this.currentValidateFunction),""!=this.currentSaveValidateFunction&&eval("validateFunction = "+this.currentSaveValidateFunction),this.renderMenuBar(elementDef,visibleProperties,allProperties,userProperties);var isEmptyImage=!1;if(isImageElement(elementDef.elementid)){var srcProperty=getContentFieldProperty(this.ucfid,"<!SRC!>");srcProperty&&(isEmptyImage=!!/\/na\.jpg$/.test(srcProperty.property_result)||!!/\/na\.png$/.test(srcProperty.property_result))}isEmptyImage||Weebly.SlideshowAdmin.isManaging()||this.isPlatformElement()||this.showMenuBar()}if("69807794"==this.idfield.eid)editCustomHTML(this.ucfid,38531508,this.uproperty.properties[38531508].ucfpid);else if("22397704"==this.idfield.eid&&"34873637"==this.uproperty.cfid){var newUcfpid=Weebly.Elements.getPropertyByReference("<!IMAGESET!>");""==newUcfpid.property_result||newUcfpid.property_result.match("'length': '0'")||(Weebly.ImageGallery.setCurrent(this.ucfid),Weebly.ImageGallery.init())}else"18362204"==this.idfield.eid?(Weebly.ImageGallery.setCurrent(this.ucfid),Weebly.ImageGallery.init()):"92495494"==this.idfield.eid&&editCustomHTML(this.ucfid,"77980269",this.uproperty.properties["77980269"].ucfpid);repositionElements()}}},renderMenuBar:function(e,t,i){require("editor/app").vent.trigger("editor:element:props:show"),"%%ELEMENTSETTINGS%%"===t.first().property?this.renderPlatformElementOptions(this.currentElement):this.useNewSettingsPopup?this.renderLegacyOptions(e,i):renderElementOptions(e,i)},renderLegacyOptions:function(e,t){var i=this;_wAMD.require(["editor/app","platform/editor/view/settings/LegacySettingsTooltipView","platform/editor/view/settings/SettingsConverter","platform/editor/model/PlatformElementSettingModel"],function(n,o,s,r){var a=new s(e),l=a.encode(t,i.uproperty),c=a.getConfig(),u=i.currentElement;n.platformElementSettings.show(new o({collection:new Backbone.Collection(l,{model:r}),model:new Backbone.Model(c||{}),peid:123,wElements:i})),i.currentElement=u;var d=jQuery("#scroll_container"),h=n.platformElementSettings.$el.find(".platform-element-settings");h.appendTo("#scroll_container"),positionElementOptions(d,h)})},renderPlatformElementOptions:function(e){window.closePlatformSettingsPanel(),Weebly.Elements.currentElement=e,$(e).up("li.inside").addClassName("inside-active"),_wAMD.require(["editor/app","platform/editor/view/settings/SettingsTooltipView","platform/editor/model/PlatformElementSettingModel"],function(t,i,n){var o=jQuery("#"+e.id).closest(".element"),s=o.data("platform-peid");Weebly.Editor.RPC.PlatformElementInstance.getEditorSettings(s).done(function(o){var r=o.data?o.data.properties||[]:[],a=o.data?o.data.config||{}:{};t.platformElementSettings.show(new i({collection:new Backbone.Collection(r,{model:n}),model:new Backbone.Model(a||{}),peid:s,element:e}));var l=jQuery("#scroll_container"),c=t.platformElementSettings.$el.find(".platform-element-settings");c.appendTo("#scroll_container"),positionElementOptions(l,c)})})},renderOldMenuBar:function(e,t){for(var i='<table id="menuBarItemContainer" spacing="0" padding="0"><tr><td style="position: relative; background: none; vertical-align: top"><div style="position: relative"><div id="menubar-l" style="background-image: url(http://'+editorStatic+'/weebly/images/menubar-l.gif);"></div></div></td>',n="",o="",s=0;s<e.length;++s){var r=this.generateProperty(e[s],e[s].cfpid,t);""!=r&&(1==e[s].advanced?o+="<span>"+r+"</span>":n+="<td><span class='menuBarSpan'>"+r+"</span></td>")}i+=n,""!=o&&(i+='<td style="background: none;"><div id="menuBarAdvancedDiv"><a onclick="Weebly.Elements.showHideAdvanced(); return false;" style="color: #1C4671; text-decoration: none;"><img src="http://'+editorStatic+'/weebly/images/arrow_right.gif" style="border: 0;" id="advancedImg" />'+_W.tl("Advanced")+"</a> <br/><br/>"+'<div id="menuBarAdvancedContainer">'+o+'</div></div> <div id="menuBarAdvancedPlaceholder"></div></td>'),i+='<td style="position: relative; background: none; vertical-align: top"><div style="position: relative"><div id="menubar-r" style="background-image: url(http://'+editorStatic+'/weebly/images/menubar-r.gif);">'+"</div></div></td></tr></table>",$("menuBarDiv").innerHTML=i},getCurrentImageElement:function(){if(this.currentElement){var e={};return e="IMG"==this.currentElement.tagName?$(this.ucfid+""):this.currentElement.getElementsByTagName("IMG")[0]}},saveProperties:function(){var e=require("config");if(!e.chromeless&&this.currentElement){if(swfu&&swfu.getStats)try{var t=swfu.getStats();if(Weebly.SlideshowAdmin.isManaging()&&(t.in_progress||t.files_queued))return}catch(i){}var n=Object.toJSON(this.pfield.properties),o=toJsonString(this.idfield);this.idfieldNode.value=o,this.unsyncedProperties={},new Ajax.Request(ajax,{parameters:{pos:"saveproperties",cookie:document.cookie,ucfid:this.ucfid,json:n,token:Weebly.RequestToken},onFailure:errFunc,onSuccess:function(e){1==e.responseText.isJSON()&&(data=e.responseText.evalJSON(),0==data.result&&showDeniedAction(data.error))},bgRequest:!0})}},showHideAdvanced:function(){this.currentElement&&($("menuBarAdvancedDiv").getWidth()>100?this.hideAdvanced():this.showAdvanced())},hideAdvanced:function(){this.currentElement&&($("menuBarAdvancedDiv").style.width="80px",$("menuBarAdvancedDiv").style.height="15px",$("menuBarAdvancedPlaceholder").style.width="80px",$("advancedImg").src="http://"+editorStatic+"/weebly/images/arrow_right.gif",Weebly.Elements.positionFlash())},showAdvanced:function(){this.currentElement&&($("menuBarAdvancedDiv").style.width="200px",$("menuBarAdvancedDiv").style.height=$("menuBarAdvancedContainer").getHeight()- -40+"px",$("menuBarAdvancedPlaceholder").style.width="200px",$("advancedImg").src="http://"+editorStatic+"/weebly/images/arrow_down.gif",Weebly.Elements.positionFlash())},generateProperty:function(e,t,i){if(this.currentElement){var n="",o=i.properties[t];if(e.title&&"%%fileUpload%%"!==e.options&&"%%fileUploadAudio%%"!==e.options&&"%%fileUploadVideo%%"!==e.options&&"%%fileUploadGallery%%"!==e.options&&"%%fileUploadFile%%"!==e.options&&"%%fileUploadDocument%%"!==e.options&&"%%fileUploadFlash%%"!==e.options&&"%%editPollDaddy%%"!==e.options&&(n+="<label>"+_W.tl(e.title)+"</label> "),n+="<div class='input-wrap'>","custom"==e.markupType&&this.currentCustomProperties.push(t),"%%fileUpload%%"==e.options){try{var s=$(this.ucfid);s&&o.property_result!=s.getElementsByTagName("IMG")[0].src&&(o.property_result=s.getElementsByTagName("IMG")[0].src.replace("http://","").replace(/^[^\/]*/,""))}catch(r){}var a="250";if(Weebly.Elements.isProductElement())switch(i.properties[69650731].property_result){case"grid":a=164;break;case"large":a=225;break;case"small":a=125;break;case"long":a=175}n+=isImageElement(this.elementDef.elementid)?"61719152"==this.elementDef.elementid?"<a class='btn-block btn-large btn-info' onclick='menuBarChooseImage(this, \"image\", \""+a+'", "'+this.ucfid+'", "'+o.ucfpid+"\"); return false'"+">"+_W.tl("Replace image")+"</a>"+"<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>":Weebly.view.isMobileView?"<a class='btn btn-info btn-large btn-block' onclick='menuBarChooseImage(this, \"image\", \""+a+'", "'+this.ucfid+'", "'+o.ucfpid+"\"); return false'"+">"+_W.tl("Replace Image")+"</a>":"<div class='replace-image-wrap'><a class='uploadLink' onclick='menuBarChooseImage(this, \"image\", \""+a+'", "'+this.ucfid+'", "'+o.ucfpid+"\"); return false'"+">"+_W.tl("or replace image")+"</a>"+"<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>"+"</div>":"<a class='uploadLink btn btn-large btn-block' onclick='menuBarChooseImage(this, \"image\", \""+a+'", "'+this.ucfid+'", "'+o.ucfpid+"\"); return false'"+">"+"<span class='button-inner'>"+_W.tl("Replace Photo")+"</span>"+"</a>"+"<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>"}else if("%%fileUploadFile%%"==e.options)selectUpload("file","",this.ucfid,o.ucfpid),n+="<a class=\"uploadLink btn btn-block btn-large btn-info\" onclick=\"determineUpload('file', '', '"+this.ucfid+"', '"+o.ucfpid+"')\""+">"+_W.tl("Upload new File")+"</a>",n+="<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>";else if("%%fileUploadDocument%%"==e.options)selectUpload("doc","",this.ucfid,o.ucfpid),n+='<a class=\'uploadLink btn btn-block btn-large btn-info\' onclick=\'selectUpload("doc", "", "'+this.ucfid+'", "'+o.ucfpid+"\")'"+">"+_W.tl("Upload new File")+"</a>",n+="<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>";else if("%%fileUploadVideo%%"==e.options)selectUpload("video","",this.ucfid,o.ucfpid),n+='<a class=\'uploadLink btn btn-block btn-large btn-info\' onclick=\'determineUpload("video", "", "'+this.ucfid+'", "'+o.ucfpid+"\")'"+">"+_W.tl("Replace Video")+"</a>",n+="<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>";else if("%%fileUploadFlash%%"==e.options)selectUpload("flash","",this.ucfid,o.ucfpid),n+="<a class=\"uploadLink btn btn-block btn-large btn-info\" onclick=\"determineUpload('flash', '', '"+this.ucfid+"', '"+o.ucfpid+"')\""+">"+_W.tl("Upload new File")+"</a>",n+="<input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result+"'/>";else if("%%fileUploadAudio%%"==e.options)selectUpload("audio","",this.ucfid,o.ucfpid),n+="<a class=\"uploadLink btn btn-large btn-block btn-info\" onclick=\"determineUpload('audio', '', '"+this.ucfid+"', '"+o.ucfpid+"'); return false\""+">"+_W.tl("Upload Audio")+"</a>",n+='<input type="hidden" id="'+o.ucfpid+'" value="'+o.property_result+'"/>';else if("%%fileUploadGallery%%"==e.options){var l=Weebly.Elements.getPropertyByReference("<!IMAGESET!>").ucfpid;selectUpload("gallery","thumbnail:333-250",this.ucfid,l),n+="<a class=\"uploadLink btn btn-large btn-block btn-info\" onclick=\"determineUpload('gallery', 'thumbnail:333-250', '"+this.ucfid+"', '"+l+"'); return false\""+">"+_W.tl("Add Images")+"</a>",n+='<input type="hidden" id="'+o.ucfpid+'" value="'+o.property_result+'"/>'}else if("%%manageSlideshow%%"==e.options)n+="<a class='btn btn-large btn-block btn-info' onclick='Weebly.SlideshowAdmin.manage(\""+Weebly.Elements.currentElement.id+"\")'"+">"+_W.tl("Add / Edit Photos")+"</a>";else if("%%LINK%%"==e.options)n+="<a onClick='showCreateLink({ ucfpid: \""+o.ucfpid+"\", useExisting: true})'"+" class='menuIconLink'><img src='http://"+editorStatic+"/weebly/images/icon_link.gif' class='menuIconImage' alt='New Link Icon'/> "+_W.tl("Set Link")+"</a> <i style='font-size: 10px;'>("+_W.tl("website, email, file, etc")+")</i><input type='hidden' id='"+o.ucfpid+"' value=\""+o.property_result+"\" /><input type='hidden' id='linkTargetElement' value=''/>";else if("%%CONFLINK%%"==e.options)n+="<a onClick='showCreateLink({ ucfpid: \""+o.ucfpid+"\", useExisting: true, isConfLink: true})'"+" class='menuIconLink'><img src='http://"+editorStatic+"/weebly/images/icon_link.gif' class='menuIconImage' alt='New Link Icon'/> "+_W.tl("Set Link")+"</a><input type='hidden' id='"+o.ucfpid+"' value=\""+o.property_result+"\" /><input type='hidden' id='linkTargetElement' value=''/>";else if("%%NUMBER%%"==e.options)n+="<input type='text' id='"+o.ucfpid+"' value=\""+o.property_result.replace(/"/g,"&quot;")+'" onBlur=\'Weebly.Elements.onChange("'+o.ucfpid+'", "'+t+"\");' onKeyUp='Weebly.Elements.onTextChange(\""+o.ucfpid+"\");'/>";else if("%%ALPHANUMERIC%%"==e.options)n+="<!CAPTION!>"==o.reference_property?"<textarea onBlur=\"Weebly.Elements.onChange('"+o.ucfpid+"')\""+' id="'+o.ucfpid+'"'+">"+htmlEscape(o.property_result.toString())+"</textarea>":'<input type="text" id="'+o.ucfpid+'"'+' value="'+_W.tl(o.property_result).toString().replace(/"/g,"&quot;")+'"'+" onBlur=\"Weebly.Elements.onChange('"+o.ucfpid+"')\""+"/>";else if("%%URICOMPONENT%%"==e.options)n+="<input type='text' id='"+i.properties[t].ucfpid+"' value=\""+decodeURIComponent(i.properties[t].property_result.toString().replace(/"/g,"&quot;"))+'" onBlur=\'Weebly.Elements.onChange("'+i.properties[t].ucfpid+'", "'+t+"\");' onKeyUp='Weebly.Elements.onTextChange(\""+i.properties[t].ucfpid+"\");'/>";else if("%%EMAIL%%"==e.options){var c=o.property_result?o.property_result.replace(/"/g,"&quot;"):userEmail;n+="<input type='text' id='"+o.ucfpid+"' value=\""+c+'" onBlur=\'Weebly.Elements.onChange("'+o.ucfpid+'", "'+t+"\");' onKeyUp='Weebly.Elements.onTextChange(\""+o.ucfpid+"\");'/>"}else if("%%CUSTOMHTML%%"==e.options)n+="<a class='btn btn-info btn-block btn-edit-custom-html' onclick='editCustomHTML(\""+this.ucfid+'", "'+t+'", "'+o.ucfpid+"\")' class='menuIconLink'><img src='http://"+editorStatic+"/weebly/images/page_script.gif' class='menuIconImage' alt='"+_W.tl("Edit Custom HTML")+"'/>  "+_W.tl("Edit Custom HTML")+"</a><textarea class='customhtml_textarea' onBlur='hideCustomHTML(\""+this.ucfid+'", "'+t+'", "'+o.ucfpid+"\")' id='"+o.ucfpid+"CustomHTML' rows='20' style='border: 1px solid #ccc; display: none; height: 150px; width: 100%;'>"+o.property_result.escapeHTML()+"</textarea>";else if("%%EMBEDCODE%%"==e.options)n+="Custom HTML";else if("%%editPollDaddy%%"==e.options)n+="<a class='btn btn-block btn-large btn-info' onclick='editPollDaddy(\""+o.property_result.replace(/"/g,"&quot;")+'", "'+this.ucfid+'", "'+i.properties["89468692"].ucfpid+"\")'"+">"+_W.tl("Edit Poll")+"</a>";else if("%%longText%%"==e.options)n+='<textarea id="'+o.ucfpid+"'"+" onBlur=\"Weebly.Elements.onChange('"+o.ucfpid+"', '"+t+"')\""+" onKeyUp=\"Weebly.Elements.onTextChange('"+o.ucfpid+"', undefined, true)\""+">"+o.property_result+"</textarea>";else if("%%longTextInstructions%%"==e.options)n+='<textarea id="'+o.ucfpid+'"'+" onBlur=\"Weebly.Elements.onChange('"+o.ucfpid+"', '"+t+"')\""+" onKeyUp=\"Weebly.Elements.onTextChange('"+o.ucfpid+"', undefined, true)\""+">"+o.property_result+"</textarea>";else if("%%inputOptions%%"==e.options)n+="<div class='menuBarExpand' id='longprop-"+o.ucfpid+"'><a onclick='Weebly.Elements.toggleLongProperty(\""+o.ucfpid+'", "250"); Weebly.Elements.editInputOptions('+Object.toJSON(o.property_result||"").replace(/"/g,"&quot;").replace(/'/g,"&#039;")+', "'+this.ucfid+'", "'+o.ucfpid+"\"); return done();' class='menuIconAdvanced'><img src='http://"+editorStatic+"/weebly/images/arrow_right.gif' id='longprop-icon-"+o.ucfpid+"' style='border: none;'/> "+_W.tl("Edit Options")+"</a><div id='inputoptions-"+o.ucfpid+"'></div><div style='position:relative'><div class='predefined-options-container'><div class='predefined-options' style='display:none;'></div><div class='predefined-options-handle'><a onclick='Weebly.Elements.togglePredefinedOptions(\""+o.ucfpid+'", "'+this.ucfid+"\"); return done();'>"+_W.tl("Predefined Options")+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><a onclick='Weebly.Elements.togglePredefinedOptions(\""+o.ucfpid+'", "'+this.ucfid+"\"); return done();'><img src='http://"+editorStatic+"/weebly/images/blog-settings-arrow-down.gif' class='predefined-options-arrow' border='0' /></a></div></div></div><input type='hidden' id='"+o.ucfpid+"' value='"+o.property_result.replace(/'/g,"&#039;")+"'/></div><div class='menuBarExpandPlaceholder'></div>";else{var u=o.ucfpid||"cfpid-"+t;n+="<select id='"+u+"' onChange='Weebly.Elements.onChange(\""+o.ucfpid+'", "'+t+"\");'>";for(var d=e.options.split("/"),h=e.result.split("/"),p=0;p<d.length;p++){var f="";h[p]==o.property_result.replace(/'/g,'"')&&(f=" selected"),n+="<option value='"+h[p]+"'"+f+">"+_W.tl(d[p])+"</option>"}n+="</select>"}return n+="</div>"}},onTextChange:function(e,t,i){if(this.currentElement){this.skipRerender="undefined"!=typeof i?i:!1,this.textChange=1;var n=$(e);"undefined"==typeof t?(this.onTextChangeTracking=e,setTimeout(function(){Weebly.Elements.onTextChange(e,n.value,i)},1500)):n&&n.value&&n.value==t||""==n.value&&""==t?(this.onTextChangeTracking=null,Weebly.Elements.onChange(e,void 0,i)):e!=this.onTextChangeTracking&&setTimeout(function(){Weebly.Elements.onTextChange(e,n.value,i)},1500)}},onChange:function(e,t){if(this.currentElement){if("7423607"==Weebly.Elements.elementDef.elementid&&(this.isFormDirty=!0),"49312965"==t&&Weebly.CommerceProduct.getLegacyMode()){var i=$F(e),n={grid:"164px",small:"125px",large:"225px","long":"175px"}[i],o="36068137",s=this.uproperty.properties[o].ucfpid;this.pfield.properties[o].property_result=n,this.unsyncedProperties[s]=n}""!=this.currentValidateFunction&&"function"==typeof this.currentValidateFunction&&this.currentValidateFunction(e),""!=this.currentSaveValidateFunction&&null!=this.currentSaveValidateFunction?validateFunction():this.continueOnChange()}},continueOnChange:function(){if(this.currentElement){for(var e=0;e<this.currentContentFieldDef.contentFieldProperties.length;++e){var t=this.currentContentFieldDef.contentFieldProperties[e].cfpid;if(this.uproperty.properties[t]){var i,n=this.uproperty.properties[t].ucfpid,o=this.currentContentFieldDef.contentFieldProperties[e],s="";if(i=this.isPlatformElement()||this.useNewSettingsPopup?$("platform-settings-tooltip-"+n):$(n),$("cfpid-"+t)?(s=$("cfpid-"+t).value,this.pfield.properties[t].property_result=s):i&&(i.value||""==i.value)?(s=i.value,this.pfield.properties[t].property_result=s,this.unsyncedProperties[n]=s):"%%CUSTOMHTML%%"==o.options&&(s=$(n+"CustomHTML").value,this.pfield.properties[t].property_result=s,this.unsyncedProperties[n]=s),"%%URICOMPONENT%%"==o.options)s=this.unsyncedProperties[n],""!==s&&(s=encodeURIComponent(s),this.pfield.properties[t].property_result=s,this.unsyncedProperties[n]=s);else if("%%THUMBCAPTIONTYPE%%"==o.property){var r=jQuery("#"+n+"ThumbDisplay").val();"none"==r?(jQuery("#"+n+"ThumbDisplay").closest(".field").find(".thumbNailOptionsHolder").hide(),s="none"):""==r&&(jQuery("#"+n+"ThumbDisplay").closest(".field").find(".thumbNailOptionsHolder").show(),s=jQuery("#"+n+"ThumbOptions").val()),this.pfield.properties[t].property_result=s,this.unsyncedProperties[n]=s}else"%%THUMBCAPTIONHOVER%%"==o.property?(s=s=jQuery("#"+n+"Check").is(":checked")?"1":"0",this.pfield.properties[t].property_result=s,this.unsyncedProperties[n]=s):("<!VIDEODOWNLOADABLE!>"==o.referenceProperty||"%%SHOWIMAGE%%"==o.property||"%%SHOWPRICE%%"==o.property||"%%SHOWDESCRIPTION%%"==o.property)&&(s=jQuery("#"+n).is(":checked")?"1":"0",this.pfield.properties[t].property_result=s,this.unsyncedProperties[n]=s)}}var a=getElementObject(this.idfield.id),l=this.uproperty;if(!this.skipRerender&&!this.isFormDirty){var c=this.currentElement.select(".editable-text")[0];c&&c.id==currentBox&&(currentBox=null),a.rerenderContentField(l,this.currentElement),a.children&&a.children.length&&setTimeout(updateList,250),this.closeOnValidate&&this.unselectElement()}this.skipRerender=!1}},showMenuBar:function(){var e=$("menuBarDiv");e.style.height="",Effect.Queues.get("menuscope").each(function(e){e.cancel()}),Effect.Appear(e,{duration:.3,queue:{position:"end",scope:"menuscope"},afterFinish:function(){Weebly.Elements.positionFlash()}}),jQuery.browser.msie&&"8.0"==jQuery.browser.version&&(jQuery("#menuBarDiv .icon").addClass("hide-icon"),setTimeout(function(){jQuery("#menuBarDiv .icon").removeClass("hide-icon")},100))},toggleLongProperty:function(e,t){var i=$("longprop-"+e);i&&(i.getStyle("width")==t+"px"?($("longprop-"+e).setStyle({width:"",height:"",zIndex:"",paddingBottom:"",overflow:"hidden"}),$("longprop-icon-"+e).src="http://"+editorStatic+"/weebly/images/arrow_right.gif"):($("longprop-"+e).setStyle({width:t+"px",height:"auto",zIndex:"100",paddingBottom:"31px",overflow:"visible",left:"auto",top:"auto"}),$("longprop-icon-"+e).src="http://"+editorStatic+"/weebly/images/arrow_down.gif"))},togglePredefinedOptions:function(e,t){var i=$("longprop-"+e),n=i.down(".predefined-options");n.visible()?(Effect.BlindUp(n),i.down(".predefined-options-arrow").src="/weebly/images/blog-settings-arrow-down.gif"):(0==n.childElements().size()&&Weebly.Elements.createCommonFieldOptions(e,t),Effect.BlindDown(n,{afterFinish:function(e){e.element.setStyle({overflow:""})}}),i.down(".predefined-options-arrow").src="/weebly/images/blog-settings-arrow-up.gif")},itemTemplate:new Template('<li style="position:relative;"><img src="http://'+editorStatic+'/weebly/images/options-move.gif" alt="move" class="options-handle editmenu-input-move" /><input type="text" value="#{value}" /><a onclick="Weebly.Elements.removeInputOption(this); return false;"><img src="http://'+editorStatic+'/weebly/images/options-delete.gif" alt="Delete" class="editmenu-input-delete" /></a></li>'),editInputOptions:function(e,t,i){if($("inputoptions-"+i)&&!$("inputoptions-open-"+i)){var n=$(i).value.split("||"),o=new Element("div"),s=new Element("div",{id:"inputoptions-open-"+i,"class":"editmenu-input-options"});o.insert({top:s}),o.insert({bottom:'<div style="position:relative; width:100%;"><a onclick="Weebly.Elements.addInputOption(); return done();"><img src="http://'+editorStatic+'/weebly/images/options-plus.gif" alt="Add" class="editmenu-input-plus" /></a> <a onclick="Weebly.Elements.undoInputOptions(\''+i+"', '"+t+'\'); return done();"><img src="http://'+editorStatic+'/weebly/images/undo_button.gif" alt="Undo" class="editmenu-input-undo" style="display:none;" /></a> <a onclick="Weebly.Elements.saveInputOptions(\''+i+'\'); return done();"><img src="http://'+editorStatic+'/weebly/images/options-save.gif" alt="Save" class="editmenu-input-save" /></a></div>'});var r=new Element("ul",{id:"inputoptions-list"});s.insert({top:r}),n.each(function(e){e=e.replace(/\"/g,"&quot;"),r.insert({bottom:Weebly.Elements.itemTemplate.evaluate({value:_W.tl(e)})})}),$("inputoptions-"+i).insert({bottom:o}),Sortable.create("inputoptions-list",{handle:"options-handle"}),"undefined"!=typeof predefinedOptionsUndoDisplay&&predefinedOptionsUndoDisplay&&Effect.Appear(o.down(".editmenu-input-undo"))}},removeInputOption:function(e){$(e).up("li").remove()},addInputOption:function(){var e=$("inputoptions-list");e&&(e.insert({bottom:Weebly.Elements.itemTemplate.evaluate({value:""})}),Sortable.create("inputoptions-list",{handle:"options-handle"}),setTimeout(function(){var t=e.select("li");$(t[t.length-1]).select("input")[0].focus()},100))},saveInputOptions:function(e){if($("inputoptions-list")){var t=new Array;$("inputoptions-list").select("input").each(function(e){t.push(e.value)}),$(e).value=t.join("||"),Weebly.Elements.onChange(e),$("inputoptions-open-"+e).up().remove(),Weebly.Elements.toggleLongProperty(e,"250")}},createCommonFieldOptions:function(e,t){var i=$("longprop-"+e),n=i.down(".predefined-options");$H(Weebly.Form.commonFieldOptions).keys().each(function(i){var o=new Element("div",{"class":"predefined-option",title:Weebly.Form.commonFieldOptions[i].join(", ")});o.update(i),o.observe("click",function(){Weebly.Elements.insertCommonFieldOptions(e,t,i)}),n.insert({bottom:o})})},insertCommonFieldOptions:function(e,t,i){var n=$("longprop-"+e);n.down(".predefined-options").hide(),predefinedOptionsUndoDisplay=!0,predefinedOptionsUndo=$(e).value,n.down(".predefined-options-arrow").src="http://"+editorStatic+"/weebly/images/blog-settings-arrow-down.gif";var o=Weebly.Form.commonFieldOptions[i].join("||");$(e).value=o,$("inputoptions-open-"+e).up().remove(),Weebly.Elements.editInputOptions(o,t,e)},undoInputOptions:function(e,t){$("longprop-"+e),predefinedOptionsUndoDisplay=!1,$(e).value=predefinedOptionsUndo,$("inputoptions-open-"+e).up().remove(),Weebly.Elements.editInputOptions(predefinedOptionsUndo,t,e)},positionFlash:function(){if(!forceFlashPosition){if(this.upload&&!this.skipMenuBar){if(!Weebly.Elements.currentElement)return;var e=jQuery("#menuBarDiv .uploadLink").parent()[0];if(!e)return;$("flashContainer").style.position="relative",Element.clonePosition($("flashContainer"),e),$("flashContainer").style.position="absolute",showFlashContainer(21)}else hideFlashContainer();this.skipMenuBar=!1}},hideMenuBar:function(){Effect.Queues.get("menuscope").each(function(e){e.cancel()}),Effect.Fade("menuBarDiv",{duration:.3,queue:{scope:"menuscope"}}),$("editMenu").style.display="none",hideFlashContainer()},hidePlatformSettings:function(){jQuery(".platform-element-settings").fadeOut(.3)},getPropertyByReference:function(e){if(!this.currentElement)return{};var t={};return $H(this.uproperty.properties).values().each(function(i){i.reference_property==e&&(t=i)}),t},isProductElement:function(){return $(this.currentElement).down(".product-image")},extractElementProperties:function(element){for(var ucfid=element.id,parentRef=$(element).up(".inside"),children=parentRef.childElements(),finalChild=void 0,i=0;i<children.size();i++)if(children[i].idfield){finalChild=children[i];break}try{eval("var idfield = "+finalChild.idfield.value)}catch(e){return showError(_W.tl("This element is not compatible with a recent upgrade. Please delete this element and drag on a new one.")),!1}return this.idfield=idfield,this.idfieldNode=finalChild.idfield,this.pfield=getElementObject(idfield.id).content_fields[ucfid],this.ucfid=ucfid,this.uproperty=this.pfield,this.upload=0,!0},isSelectableElement:function(e){var t=e.up("li.inside").up().hasClassName("weebly-single-area"),i=e.select("> .wsite-multicol").length,n=$(e.id+"-form-parent"),o=e.select("> .wsite-button").length,s=Weebly.ElementSpotlight.getCurrent();return!s||s.container.is(e)||s.container.find(e).length?t&&!o?!1:Weebly.view.isMobileView&&i?!1:n&&!Weebly.ElementSpotlight.isCurrentContainer(e)?!1:!0:!1},getCurrentProductID:function(){if(this.isProductElement()){var e=$(this.ucfid+"-product-data");return $F(e.productID)}return!1},isFormElement:function(){return this.currentElement&&$(this.currentElement.id+"-form-parent")?!0:!1},getNewElementID:function(){var e=$$("#secondlist .outside_top form");if(1==e.size()){var t=e[0].idfield.value.replace(/[^\d]/g,"");return t}}},_wAMD.define("legacy/weebly_elements",["legacy/weebly_linker","legacy/classes/Element"],function(e){return function(){var t;return t||e.Weebly.Elements}}(this));var noJump=0,Pages={Version:"0.5",Author:"David Rusenko",Company:"Weebly, Inc.",openPages:new Array("main"),currentNavPage:"load",optConfirmLoad:0,optAnimations:1,history:[],lastPage:"",load:function(){},pageConstructor:{main:{}},pageDestructor:{main:{}},pageWindows:{main:["main"]},currentVar1:"empty",currentVar2:"empty",currentVar3:"empty",currentVar4:"empty",currentVar5:"empty",go:function(){var e=this,t=arguments;if(Weebly.Commerce&&window.editorApp&&editorApp.isStorePanelOpen){var i=require("backbone-all");i.preventClose(function(){e._go.apply(e,t)})}else e._go.apply(e,t)},_go:function(e,t,i,n,o,s){if(window.editorApp&&editorApp.vent.trigger("editor:pages:go",arguments),Pages.updateHistory(e),Weebly.Elements&&Weebly.Elements.unselectElement(),!Weebly.BlogEditor||Weebly.BlogEditor.tryPageSwitch(arguments)){if("saveBlogPost"!==e&&Weebly.BlogEditor&&Weebly.BlogEditor.isEditing&&!Weebly.BlogEditor.isSaving&&Weebly.mobile.isMobileEditor())return Weebly.mobile.isMobileEditor(!1),Pages.go("mobileView"),void 0;var r="undefined"==typeof t||""==t||"undefined"==t?0:1,a="undefined"==typeof i||""==i||"undefined"==i?0:1,l="undefined"==typeof n||""==n||"undefined"==n?0:1,c="undefined"==typeof o||""==o||"undefined"==o?0:1,u="undefined"==typeof s||""==s||"undefined"==s?0:1;if(e!=Pages.currentNavPage||t!=Pages.currentVar1&&r||i!=Pages.currentVar2&&a||n!=Pages.currentVar3&&l||o!=Pages.currentVar4&&c||s!=Pages.currentVar5&&u){Pages.handleMain(e),Pages.closeAll(e),1==noJump?noJump=0:window.scrollTo(0,0);var d=Pages.pageConstructor[e];d&&"main"!=e&&(d.element&&Pages.showElement(d.element),d.go&&d.go(t,i,n,o,s)),window.litePageChange||Pages.optConfirmLoad||Pages.confirmLoad(e,t,i,n,o,s),Pages.currentNavPage=e,Pages.currentVar1="undefined"==typeof t||""==t||"undefined"==t?"empty":t,Pages.currentVar2="undefined"==typeof i||""==i||"undefined"==i?"empty":i,Pages.currentVar3="undefined"==typeof n||""==i||"undefined"==n?"empty":n,Pages.currentVar4="undefined"==typeof o||""==i||"undefined"==o?"empty":o,Pages.currentVar5="undefined"==typeof s||""==i||"undefined"==s?"empty":s,Weebly.Events&&Weebly.Events.fireEvent("navPageChange",e)
}-1==Pages.openPages.indexOf(e)&&Pages.openPages.push(e)}},showElement:function(e){Pages.optAnimations?setTimeout("Effect.Appear('"+e+"');",1e3):Element.show(e)},handleMain:function(e){if(Pages.pageWindows[e].indexOf("main")>-1)Pages.pageConstructor.main&&(Pages.pageConstructor.main.element&&(Pages.optAnimations?setTimeout("Effect.Fade('"+Pages.pageConstructor.main.element+"')",1e3):Element.hide(Pages.pageConstructor.main.element)),Pages.pageConstructor.main.go&&Pages.pageConstructor.main.go()),-1==Pages.openPages.indexOf("main")&&Pages.openPages.push("main");else{if(Pages.pageDestructor.main){if(Pages.pageDestructor.main.element){var t="100%";Element.setStyle(Pages.pageDestructor.main.element,{height:t}),Pages.optAnimations?Effect.Appear(Pages.pageDestructor.main.element):Element.show(Pages.pageDestructor.main.element)}Pages.pageDestructor.main.go&&Pages.pageDestructor.main.go()}-1==Pages.openPages.indexOf("main")&&Pages.openPages.push("main")}"main"==e&&"visible"==$("grayedOut").style.visibility&&Element.hide("grayedOut")},confirmLoad:function(e,t,i,n,o,s){-1==Pages.openPages.indexOf(e)&&Pages.openPages.push(e),"function"==typeof t&&(t=""),_goPageHistory("page="+e+"&1="+encodeURIComponent(t)+"&2="+encodeURIComponent(i)+"&3="+encodeURIComponent(n)+"&4="+encodeURIComponent(o)+"&5="+encodeURIComponent(s))},closeAll:function(e){for(j=Pages.openPages.length-1;j>=0;j--){var t=Pages.pageWindows[e].indexOf(Pages.openPages[j]);if(-1==t&&"main"!=Pages.openPages[j]){var i=Pages.pageDestructor[Pages.openPages[j]];i&&(i.element&&(Pages.optAnimations?Effect.Fade($(i.element)):Element.hide($(i.element))),i.go&&i.go()),Pages.openPages.splice(j,1)}}},returnToEditor:function(){Pages.openPages.indexOf("goBlogPost")>-1?Pages.go("goBlogPost"):Pages.go("main")},updateHistory:function(e){e!=Pages.lastPage&&(Pages.history.push(e),Pages.history.size()>10&&Pages.history.shift()),Pages.lastPage=e},goToPreviousPage:function(){if(Pages.history.size()>1){Pages.history.pop();var e=Pages.history.pop();Pages.go(e)}else Pages.go("editMenu")}},_goPageIframe;_wAMD.define("legacy/weebly_pages",function(){}),function(e,t){function i(e,i,n,o){var s=[];return t(e).each(function(){var e=t(this),r=e.offset();s.push({x:r.left-i.left-o,y:r.top-i.top-n,width:e.outerWidth()+2*o,height:e.outerHeight()+2*n})}),s}function n(e,t,i){function n(e){e.width>0&&e.height>0&&(c.push(e),l.push(e))}for(var l=e.slice(),c=[],u=0;u<e.length;u++){var d=e[u],h=Math.max(i,d.y+d.height),p=o(d.x,d.x+1,d.y,l,t,h),f=s(p,d.y,d.x,l,t,h);n({x:d.x,y:p,width:f-d.x,height:d.y-p});var m=s(d.y,d.y+1,d.x+d.width,l,t,h),g=r(d.x+d.width,m,d.y,l,t,h);n({x:d.x+d.width,y:d.y,width:m-(d.x+d.width),height:g-d.y});var v=r(d.x+d.width-1,d.x+d.width,d.y+d.height,l,t,h),b=a(d.y+d.height,v,d.x+d.width,l,t,h);n({x:b,y:d.y+d.height,width:d.x+d.width-b,height:v-(d.y+d.height)});var y=a(d.y+d.height-1,d.y+d.height,d.x,l,t,h),w=o(y,d.x,d.y+d.height,l,t,h);n({x:y,y:w,width:d.x-y,height:d.y+d.height-w})}return c}function o(e,t,i,n){for(var o=0,s=0;s<n.length;s++){var r=n[s];r.y+r.height<=i&&r.x+r.width>e&&r.x<t&&(o=Math.max(o,r.y+r.height))}return o}function s(e,t,i,n,o){for(var s=o,r=0;r<n.length;r++){var a=n[r];a.x>=i&&a.y+a.height>e&&a.y<t&&(s=Math.min(s,a.x))}return s}function r(e,t,i,n,o,s){for(var r=s,a=0;a<n.length;a++){var l=n[a];l.y>=i&&l.x+l.width>e&&l.x<t&&(r=Math.min(r,l.y))}return r}function a(e,t,i,n){for(var o=0,s=0;s<n.length;s++){var r=n[s];r.x+r.width<=i&&r.y+r.height>e&&r.y<t&&(o=Math.max(o,r.x+r.width))}return o}function l(e){t.each(e,function(e,t){t.hide()})}var c,u=e.Spotlight=Class.create({initialize:function(e){var i=this;e=e||{},i.elements=e.element?[e.element]:e.elements,i.canvasElement=t(e.canvasElement||"body"),i.canvasHeight=e.canvasHeight,i.parentElement=e.parentElement?t(e.parentElement):i.canvasElement,i.isShown=!1,i.dimElements=[],i.antSets=[],i.cornerSets=[],i.zIndex=e.zIndex,i.opacity=e.opacity||.75,i.paddingHeight=e.paddingHeight||e.padding||0,i.paddingWidth=e.paddingWidth||e.padding||0,i.ants=e.ants,i.roundedCorners=e.roundedCorners,i.interval=e.interval===!0?300:e.interval,i.light=e.light||!1,this.onReposition=e.onReposition},show:function(){var e=this;e.isShown||(e.container||(e.container=t("<div class='spotlight'/>").appendTo(e.parentElement)),void 0!==e.zIndex&&e.container.css("z-index",e.zIndex),1==e.light&&e.container.addClass("spotlight-gray"),e.parentElement.is("body")||/relative|absolute/.test(e.parentElement.css("position"))||e.parentElement.css("position","relative"),e.container.show(),e.position(),e.interval&&(e.intervalID=setInterval(function(){e.reposition()},e.interval)),e.isShown=!0,c=e)},hide:function(){var e=this;e.isShown&&(e.container.hide(),e.clearInterval(),e.isShown=!1,c=void 0)},setOpacity:function(e){this.opacity=e,t.each(this.dimElements,function(t,i){i.css("opacity",e)})},position:function(){var e=this,o=e.elements,s=e.parentElement,r=s.offset(),a=e.canvasElement,c=a.outerWidth(),u=e.canvasHeight||a.outerHeight();a.is("body")&&(u=Math.max(u,t(window).height()));var d=a.offset(),h=i(o,d,e.paddingHeight,e.paddingWidth),p=n(h,c,u),f=e.container,m=e.dimElements,g=e.antSets,v=e.cornerSets;f.css({top:d.top-r.top+s.scrollTop(),left:d.left-r.left+s.scrollLeft()}),t.each(p,function(i,n){var o=m[i]=m[i]||t("<div class='spotlight-bg'/>").appendTo(f);o.css({top:n.y,left:n.x,width:n.width,height:n.height,opacity:e.opacity}).show()}),l(m.slice(p.length)),e.ants?(t.each(h,function(e,i){var n=g[e]=g[e]||t("<div class='spotlight-ants-h'/><div class='spotlight-ants-v'/><div class='spotlight-ants-h'/><div class='spotlight-ants-v'/>").appendTo(f);n.eq(0).css({top:i.y,left:i.x,width:i.width}),n.eq(1).css({top:i.y,left:i.x+i.width-1,height:i.height}),n.eq(2).css({top:i.y+i.height-1,left:i.x,width:i.width}),n.eq(3).css({top:i.y,left:i.x,width:1,height:i.height}),n.show()}),l(g.slice(h.length))):l(g),e.roundedCorners?(t.each(h,function(e,i){var n=v[e]=v[e]||t("<div class='spotlight-corner-nw'/><div class='spotlight-corner-ne'/><div class='spotlight-corner-se'/><div class='spotlight-corner-sw'/>").appendTo(f);n.eq(0).css({top:i.y,left:i.x}),n.eq(1).css({top:i.y,left:i.x+i.width-5}),n.eq(2).css({top:i.y+i.height-5,left:i.x+i.width-5}),n.eq(3).css({top:i.y+i.height-5,left:i.x}),n.show()}),l(v.slice(h.length))):l(v)},reposition:function(){var e=this;e.isShown&&(e.position(),e.onReposition&&e.onReposition())},destroy:function(){var e=this;e.hide(),e.container&&e.container.remove()},clearInterval:function(){var e=this;e.intervalID&&(clearInterval(e.intervalID),delete e.intervalID)},setAnts:function(e){var t=this;t.ants=e,t.reposition()}});u.getCurrent=function(){return c}}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/Spotlight",function(e){return function(){var t;return t||e.Weebly.Spotlight}}(this)),function(e,t){function i(s){s=s||{};var r=this,a=e.view.isMobileView;r.container=t(s.container).addClass("weebly-spotlighted").css("position","relative").append(r.cover=t("<div class='wsite-spotlight-cover'><div class='wsite-spotlight-cover-inner'></div></div>")),n=void 0!==s.paddingHeight?s.paddingHeight:a?10:15,o=void 0!==s.paddingWidth?s.paddingWidth:a?5:15,r.options=s,s.clickEditing!==!1&&r.cover.css("cursor","pointer").on("click",function(){r.open()}),r.spotlight=new e.Spotlight({canvasElement:a?"#icontent":"#icontent_container",parentElement:a?"#w-mobile-phone-screen":"#scroll_container",element:r.container,paddingHeight:n,paddingWidth:o,roundedCorners:!0,zIndex:a?12:11,interval:!0,onReposition:function(){r.updateControls()}}),r.isRefresh=!1,s.uid&&i.current&&i.current.options.uid==s.uid&&setTimeout(function(){r.open()},0)}var n=15,o=15;i.isOutside=function(i){return e.ElementSpotlight.current&&!t(i).closest(e.ElementSpotlight.current.container).length},i.isCurrentContainer=function(t){return e.ElementSpotlight.current&&e.ElementSpotlight.current.container.is(t)},i.getCurrent=function(){return e.ElementSpotlight.current},i.prototype={open:function(){var e=this;if(!e.isOpen){var t=i.current;if(t){var n=e.container.closest(t.container).length;e.isRefresh=e.options.uid&&t.options.uid&&e.options.uid==t.options.uid,t.isRefresh=e.isRefresh,t.close(),n&&(t.disableCover(),e.disabledCoverExpose=t)}e.isOpen=!0,e.cover.hide(),e.spotlight.show(),e.updateControls(),i.current=e,initSortables(),e.options.onOpen&&e.options.onOpen(),e.isRefresh=!1}},resize:function(){this.spotlight.reposition()},updateControls:function(){var i=this,s=e.view.isMobileView,r=s?t("#w-mobile-phone-screen"):t("#scroll_container");if(i.controls||(i.controls=t("<div class='spotlight-controls w-ui'><div class='spotlight-controls-inner'></div></div>").appendTo(r)),i.isOpen){var a=r.offset(),l=i.container.offset();i.controls.css({top:l.top-a.top+r.scrollTop()-n,left:l.left-a.left+r.scrollLeft()-o,width:i.container.width()+2*o,zIndex:s?13:21}).show()}else i.controls.hide()},getControlsInner:function(){return this.controls.find("> *")},close:function(){var e=this;e.isOpen&&(e.isOpen=!1,e.cover.show(),e.spotlight.hide(),e.controls&&e.controls.hide(),delete i.current,e.disabledCoverExpose&&e.disabledCoverExpose.enableCover(),initSortables(),e.options.onClose&&e.options.onClose())},destroy:function(){this.spotlight&&this.spotlight.destroy(),this.controls&&this.controls.remove(),this.cover.remove()},disableCover:function(){this.cover.hide()},enableCover:function(){this.isOpen||this.cover.show()}},e.ElementSpotlight=i}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/ElementSpotlight",["legacy/classes/Spotlight"],function(e){return function(){var t;return t||e.Weebly.ElementSpotlight}}(this)),function(e,t){var i=e.ns("Weebly.Commerce.Editor.Product");i.Page={onUpdateElementList:function(){var i=this,n=t("#wsite-com-product-area");n.length&&e.Permissions.store_settings&&(t("#wsite-com-product-gen").bind("mouseover",function(){if(!t("#commerce_editor_editproductinstore").length){var e='<div id="commerce_editor_product_editchoices" class="button-popover w-ui"><div class="button-popover-left"></div><div class="button-popover-content"><a id="commerce_editor_editproductinstore" href="javascript:;" class="btn btn-primary" role="button">'+_W.tl("Edit Product")+"</a>"+"</div>"+'<div class="button-popover-right"></div>'+"</div>";t(this).prepend(e),t("#commerce_editor_editproductinstore").bind("click",i.editProductInStoreTab)}t("#commerce_editor_product_editchoices").show()}).bind("mouseout",function(){t("#commerce_editor_product_editchoices").hide()}),e.Commerce.Site.Product.initialize()),e.view.isMobileView&&t("#wsite-com-area-product").length&&e.Commerce.Site.Mobile.Product.initialize()},editProductInStoreTab:function(){var e=t("#wsite-com-product-gen").attr("data-id");editorApp.vent.triggerCascade("store:product:edit",{site_product_id:e,onSave:function(){editorApp.vent.trigger("build:product:view",{site_product_id:e})}})},showElementsToStoreButton:function(e){0==t("#commerce_editor_product_savedescription").length&&(t("#commerce_editor_product_editchoices").show(),e&&e.stop())},hideElementsToStoreButton:function(){t("#commerce_editor_product_editchoices").hide()}}}(Weebly,Weebly.jQuery),_wAMD.define("commerce/editor/view/elements/ProductPageEdit",["legacy/weebly_elements","legacy/weebly_pages","legacy/classes/ElementSpotlight"],function(e){return function(){var t;return t||e.Weebly.Commerce.Editor.Product.Page}}(this)),function(e,t){function i(e,i){function o(){return e.find(i.items||"> *")}var s=t.extend({},i,{helper:"clone",start:function(){e.sortable("refreshPositions"),maxHeight=n(o()),o().css("height",maxHeight),i.start&&i.start.apply(e[0],arguments)},stop:function(){i.stop&&i.stop.apply(e[0],arguments)}});e.sortable(s)}function n(e){var i=0;return e.each(function(){i=Math.max(i,t(this).height())}),i}var o=require("commerce/editor/collection/Category"),s=require("commerce/editor/model/CategoryHierarchy"),r=e.ns("Weebly.Commerce.Editor.Category");r.Page={onUpdateElementList:function(){if(e.view.isMobileView)return e.Commerce.Site.Mobile.Category.initialize(),void 0;t(".wsite-com-category-product, .wsite-com-category-product-featured, .wsite-com-category-subcategory").attr("title","Drag to reorder");var n=this,r=t("#wsite-com-area-category"),a=r.attr("data-id"),l=a==editorApp.commerce.storefrontSettings.get("storefront_category_id");if(r.length){var c=l?_W.tl("Edit Storefront"):_W.tl("Edit Category"),u="";e.Permissions.store_settings&&(u+='<div id="commerce_editor_category_editchoices" class="button-popover w-ui"><div class="button-popover-left"></div><div class="button-popover-content"><a id="commerce_editor_category_editinstoretab" href="javascript:;" class="btn btn-primary" role="button">'+c+"</a>"+'<a id="commerce_editor_add_product_by_category" href="javascript:;" class="btn btn-primary" role="button">'+_W.tl("Add Product")+"</a>"+"</div>"+'<div class="button-popover-right"></div>'+"</div>"),r.append(u),t("#commerce_editor_category_editinstoretab").on("click",n.editCategoryInStore.bind(n)),r.on("mouseenter",n.showCategoryEditToolbar),r.on("mouseleave",n.hideCategoryEditToolbar),e.Commerce.Site.Category.initialize();var d=r.data("id"),h=new o,p=s.findOrCreate();t.when(h.fetch(),p.fetch()).done(function(){var n=h.findWhere({site_category_id:d+""}),o=r.find(".wsite-com-category-subcategory-group");i(o,{update:function(){var e=o.find("[data-id]").map(function(){var e=t(this).attr("data-id"),i=p.find(e);return i}).toArray(),i=p.find(d);i.children=e,p.save()}});var s=r.find(".wsite-com-category-product-featured-group");i(s,{items:".wsite-com-category-product-featured, .wsite-com-category-product",update:function(){var i=s.find("[data-id]").map(function(){return t(this).attr("data-id")}).toArray(),o=e.Commerce.Site.Category.View.ProductList.offset||0,r=n.get("preferred_order_product_ids");r.splice.apply(r,[o,i.length].concat(i)),n.set("preferred_order_product_ids",r),n.save()}});var a=r.find(".wsite-com-category-product-group");i(a,{items:".wsite-com-category-product",update:function(){var i=a.find("[data-id]").map(function(){return t(this).attr("data-id")}).toArray(),o=e.Commerce.Site.Category.View.ProductList.offset||0,s=n.get("preferred_order_product_ids");s.splice.apply(s,[o,i.length].concat(i)),n.set("preferred_order_product_ids",s),n.save()}});var l=t("#icontent").hasClass("wsite-theme-light")?"wsite-theme-light":"wsite-theme-dark",c=t("#wsite-com-empty-category");c.addClass(l),t.merge(c.find(".com-empty-action"),t("#commerce_editor_add_product_by_category")).on("click",function(){editorApp.vent.triggerCascade("store:product:add",{setCategory:n,closeStoreTab:!0})})});var f=e.Commerce.Site.Category.View.ProductList;e.Commerce.Site.Category.View.Hierarchy,setTimeout(function(){f.clearHeights(),f.setHeights()},500),setTimeout(function(){f.clearHeights(),f.setHeights(),f.showProducts()},1250)}},editCategoryInStore:function(){var e=t("#wsite-com-area-category").attr("data-id");editorApp.vent.triggerCascade("store:category:edit",{site_category_id:e})},showCategoryEditToolbar:function(){if(0==t("#commerce_editor_category_saveheader").length){var e=t("#wsite-com-area-category").attr("data-id"),i=t("#"+currentSite+"c"+e).children().length;t("#commerce_editor_category_editheader > span").text(0==i?_W.tl("Add Header"):_W.tl("Edit Header")),t("#commerce_editor_category_editchoices").show()}},hideCategoryEditToolbar:function(){t("#commerce_editor_category_editchoices").hide()}},require("editor/app").on({"commerce:category:page:change":function(){r.Page.onUpdateElementList()}})}(Weebly,Weebly.jQuery),_wAMD.define("commerce/editor/view/elements/CategoryPageEdit",["legacy/weebly_pages","legacy/weebly_elements","legacy/classes/ElementSpotlight","commerce/editor/model/Category","jquery-ui/sortable"],function(e){return function(){var t;return t||e.Weebly.Commerce.Editor.Category.Page}}(this)),_wAMD.define("commerce/site/view/CategoryPageView",["jquery","underscore"],function(e){Weebly.Commerce.Site.Category||(Weebly.Commerce.Site.Category={}),Weebly.Commerce.Site.Category.View||(Weebly.Commerce.Site.Category.View={});var t=Weebly.Commerce.Site.Category,i=t.View;t.initialize=function(){i.ProductList.initialize();var t=!1;e("body.wsite-mobile").length>0&&e(document).resize(function(){t&&(i.ProductList.clearHeights(),i.ProductList.setHeights()),t=!0})},i.ProductList={Pager:{page:0,onChange:function(t,n,o){var s=e("#wsite-com-category-product-group-pagelimit").val(),r=window.com_userID,a=window.com_currentSite;o=void 0===o?this.page:o,t.stopPropagation(),t.preventDefault(),Weebly.Commerce&&Weebly.Commerce.Editor?(startWait(),Weebly.Commerce.RPC.Category.generateProductList(r,a,n,o,s).done(function(t){e("#wsite-com-category-product-group").replaceWith(t.content),e("#wsite-com-category-product-group-pagelist").html(t.pagelist),Behaviour.apply(),i.ProductList.total=t.total,i.ProductList.offset=o*s,i.ProductList.setHeights(),endWait(),e("#scroll_container").scrollTop(0),editorApp.trigger("commerce:category:page:change",o)})):Weebly.Commerce.RPC.Category.generateProductList(n,o,s).done(function(t){e("#wsite-com-category-product-group").replaceWith(t.content),e("#wsite-com-category-product-group-pagelist").html(t.pagelist),i.ProductList.total=t.total,i.ProductList.offset=o*s,i.ProductList.setHeights(),e("body").scrollTop(0)})}},initialize:function(){i.ProductList.offset=0,this.setHeights();var t=e("#wsite-com-category-id").val();e("#wsite-com-category-product-group-pagelist").off("click.pagechange").on("click.pagechange","a",function(e){var n=e.target,o=n.getAttribute("data-page");i.ProductList.Pager.onChange(e,t,o)})},setHeights:function(){for(var t,i,n=e(".wsite-com-category-product-featured,.wsite-com-category-product"),o=e(".wsite-com-category-subcategory-featured,.wsite-com-category-subcategory"),s="#wsite-com-category-product-group",r=".wsite-com-category-subcategory-group",a=[n,o],l=[s,r],c=0;c<a.length;c++){var u=a[c],d=l[c];if(t=[],i=-1,u.length){var h=Math.round(e(d).width()/u.width());if(h>1){for(var p=0;p<u.length;p++)0==p%h&&i++,t[i]=Math.max(u.eq(p).height(),t[i]||0);for(var f=0;f<t.length;f++)u.slice(h*f,h*(f+1)).each(function(){e(this).height(t[f])})}}}},showProducts:function(){var t=e(".wsite-com-category-product-featured,.wsite-com-category-product"),i=-1,n=0;if(t.length)for(var o=Math.round(e("#wsite-com-category-product-group").width()/t.width()),s=90,r=0;r<t.length;r++)0==r%o&&i++,n=(r-o*i+i)*s,setTimeout(function(e){return function(){t.eq(e).fadeTo(4*s,1,"linear")}}(r),n)},clearHeights:function(){e(".wsite-com-category-product-featured,.wsite-com-category-product").each(function(){e(this).css("height","")})}},e(document).ready(t.initialize)}),_wAMD.define("commerce/site/view/renderers/GenericRenderer",["jquery"],function(e){function t(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var i=t(Object,{initialize:function(t){this.el=t.el,this.$el=e(this.el),this.onChange="function"==typeof t.onChange?t.onChange:function(){},this.initializeEvents(),this.render()},initializeEvents:function(){},render:function(){}});return i}),_wAMD.define("commerce/util/product-utils",["jquery"],function(e){var t={filterOptionText:function(e){return e.replace(/<#[A-Za-z0-9]+>$/,"")},saveProductChanges:function(t,i,n,o){o=o||{};var s=require("commerce/editor/model/Product"),r=s.findOrCreate({site_product_id:i}),a=r.fetch();a.done(function(){if("title"==t)n.text().length?(r.set("name",n.text()),r.save()):n.text(r.get("name")),o.productPage&&e("#wsite-com-breadcrumbs").find(".wsite-com-link-text:last").text(n.text());else if("description"==t){var i=n.html();i==n.attr("placeholder")&&(i=""),r.set("short_description",i),r.save()}}),a.fail(function(){console.log("product load failed")})},saveProductField:function(t,i,n){var o=e("#"+t),s=o[0].className.match(/price|title|description/);s&&(s=s[0]),"price"===s&&(i=o.text(),i=i.replace(/[^\d\.]/g,""));var r;r=s?t.replace(/[^\d]/g,""):Weebly.Elements.getCurrentProductID();var a=o[0].up(".element"),l=a?a.id:"";new Ajax.Request(ajax,{parameters:{pos:"updateproduct",productID:r,type:s,value:i,ucfid:l,align:n,cookie:document.cookie,token:Weebly.RequestToken},onFailure:errFunc})}};return window.saveProductField=t.saveProductField,t}),_wAMD.define("commerce/site/view/renderers/DropdownRenderer",["jquery","commerce/site/view/renderers/GenericRenderer","commerce/util/product-utils"],function(e,t,i){function n(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var o=n(t,{initializeEvents:function(){var e=this;this.select=this.$el.find("select"),this.select.on("change",function(){e.onChange.call(this,e)})},render:function(){},update:function(e){this.select.val(),this.select,this.select.children("option").each(function(t,n){if(""!==n.value){var o=i.filterOptionText(n.value);n.innerText=o+(e[n.value]?"":_W.tl(" (Unavailable)"))}})}});return o}),_wAMD.define("commerce/site/view/renderers/ColorRenderer",["jquery","mustache","commerce/site/view/renderers/GenericRenderer"],function(e,t,i){function n(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var o=t.compile(['<div class="wsite-com-product-option-color-container {{^available}}wsite-com-product-option-color-unavailable{{/available}}">','<span class="wsite-com-product-option-color-select"></span>','<span class="wsite-com-product-option-color-swatch" style="background-color:{{color}}" title="{{name}}" data-value="{{value}}" tabindex="0"></span>',"</div>"].join("")),s=n(i,{initializeEvents:function(){var t=this;this.select=this.$el.find("select"),this.container=e(document.createElement("div")).addClass("wsite-com-product-option-swatches"),this.select.after(this.container),this.$el.on("click",".wsite-com-product-option-color-swatch",function(){t.setValue(this.getAttribute("data-value"))}),this.$el.on("keypress",".wsite-com-product-option-color-swatch",function(e){-1!==_.indexOf([32,13],e.which)&&(e.preventDefault(),e.stopPropagation(),t.setValue(e.target.getAttribute("data-value")))})},setValue:function(e){var t={};t[this.select.attr("name")]=e,this.select.val(e),this.onChange(t),this.highlight(e)},render:function(){var t,i,n,s,r=this;this.select.addClass("w-input-offscreen").attr("tabindex","-1"),this.select.children().each(function(a,l){return""===l.value?!0:(t=l.getAttribute("data-color-hex"),i=l.getAttribute("data-color-name"),n="1"===l.getAttribute("data-available"),s=e(o({available:n,color:t,name:n?i:i+_W.tl(" (Unavailable)"),value:l.value})),r.container.append(s),void 0)}),this.highlight(this.select.val())},highlight:function(e){this.container.find(".wsite-selected").removeClass("wsite-selected"),e&&this.container.find(".wsite-com-product-option-color-swatch").filter('[data-value="'+e+'"]').addClass("wsite-selected")},update:function(t){var i,n;this.select.val(),this.container.children(".wsite-com-product-option-color-container").each(function(o,s){i=e(s),n=i.find("[data-value]").attr("data-value"),""!==n&&i.toggleClass("wsite-com-product-option-color-unavailable",!t[n])})}});return s}),_wAMD.define("commerce/site/view/renderers/RadioRenderer",["jquery","commerce/site/view/renderers/GenericRenderer"],function(e,t){function i(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}var n=i(t,{initializeEvents:function(){var e,t=this;this.radios=this.$el.find("input[type=radio]"),this.radios.on("change",function(){e={},e[this.name]=this.value,t.onChange.call(t,e)})},render:function(){},update:function(t){this.radios.val(),this.radios,this.radios.each(function(i,n){if(""!==n.value){var o=e(n),s=o.closest("label");s=0===s.length?o.siblings("label"):s,s.toggleClass("wsite-com-product-option-label-unavailable",!t[n.value]).find(".wsite-com-product-option-radio-availability").text(t[n.value]?"":_W.tl("(Unavailable)"))}})}});return n}),_wAMD.define("commerce/site/view/BaseProductPageView",["jquery","underscore","commerce/site/view/renderers/DropdownRenderer","commerce/site/view/renderers/ColorRenderer","commerce/site/view/renderers/RadioRenderer"],function(e,t,i,n,o){var s={variationData:{},initialize:function(){},initializeVariations:function(t){var s,r=this;t.each(function(t,a){switch(a.getAttribute("data-type")){case"color":s=new n;break;case"radio":s=new o;break;case"dropdown":default:s=new i}s.initialize({el:a,onChange:function(){r.update.apply(r,arguments)}}),e(a).data("renderer",s)})},updateAvailability:function(i,n,o){var s,r,a,l=this;i.each(function(i,c){s={},a=c.getAttribute("data-option-name"),r=t.omit(o,a),t.each(n,function(e){l.objectContains(e,r)&&t.each(e,function(e,t){t===a&&(s[e]=!0)})}),e(c).data("renderer").update(s)})},getCurrentRecord:function(e){var i;return t.each(this.variationData,function(n){t.isEqual(n.options,e)&&(i=n)}),i},objectContains:function(e,i){var n=!0;return t.each(e,function(e,t){i[t]&&i[t]!==e&&(n=!1)}),n}};return s}),_wAMD.define("commerce/site/view/product/Images",["jquery"],function(e){var t={initialize:function(t){var i=t.find(".cloud-zoom, .cloud-zoom-gallery");i.CloudZoom&&i.CloudZoom(),e(document).off("keydown",this.navigateProductImages).on("keydown",this.navigateProductImages)},navigateProductImages:function(t){var i=["input","textarea"];if(0!==e.inArray(t.target.nodeName.toLowerCase(),i)&&e("#wsite-com-product-images-strip").children("a.wsite-com-product-images-secondary").length&&(!Weebly.Commerce.Editor||e("#wsite-com-product-area").length&&"true"!=t.target.contentEditable)){var n=e("#wsite-com-product-images-strip").children("a.wsite-com-product-images-secondary"),o=e("#zoom1")[0],s=n.filter(function(){return this.href==o.href});37!=t.keyCode||s.prev().click().length?39!=t.keyCode||s.next().click().length||n.first().click():n.last().click()}}};return t}),_wAMD.define("commerce/site/view/product/SocialIcons",["jquery"],function(){var e={networks:{twitter:{height:440,width:585},pinterest:{height:340,width:765},facebook:{height:315,width:485}},initialize:function(t){if(!window.inEditor||!inEditor()){var i;t.find("#wsite-com-product-social-sharing").on("click","a",function(t){i=e.networks[t.currentTarget.getAttribute("data-network")],i=i?i:{height:500,width:500},window.open(t.currentTarget.href,"Share","height="+i.height+", width="+i.width+" scrollbars=no, resizeable=no"),t.preventDefault()})}}};return e}),_wAMD.define("commerce/site/view/product/ProductElement",["jquery"],function(e){var t={initialize:function(t){e(".wsite-product, .product").each(function(i,n){var o=e(n),s=o.find("[data-add-to-cart]");s.length&&(Weebly.Commerce.RPC.Product.isInStock(s.data("site-product-id"),s.data("site-product-sku-id")).done(function(e){e||s.addClass("wsite-soldout-product-button")}),s.on({click:t,keypress:function(e){(32===e.which||13===e.which)&&t()}}))})}};return t}),_wAMD.define("commerce/site/view/checkout/OrderItem/PaypalItem",["jquery","backbone","mustache","commerce/util/product-utils"],function(e,t,i,n){var o=t.View.extend({tagName:"div",initialize:function(e){this.options=e,this.render()},render:function(){var e='<input type="hidden" name="item_name_{{ itemNumber }}" value="{{ name }}"><input type="hidden" name="amount_{{ itemNumber }}" value="{{ price }}"><input type="hidden" name="quantity_{{ itemNumber }}" value="{{ quantity }}">',t=this.model.get("name");t||(t=this.model.get("short_description")?this.model.get("short_description").substring(0,60):_W.tl("Product"));var n={quantity:this.model.get("quantity"),name:t,price:this.model.get("discounted_price"),itemNumber:this.options.itemNumber+1};return e=i.render(e,n),e+=this.renderOptions(),this.$el.html(e),this},renderOptions:function(){var e=this,t="",o='<input type="hidden" name="on{{ index }}_{{ itemNumber }}" value="{{ name }}"><input type="hidden" name="os{{ index }}_{{ itemNumber }}" value="{{ value }}">';if(!_.isEmpty(this.model.get("options"))){var s=0;_.each(this.model.get("options"),function(r,a){context={itemNumber:e.options.itemNumber+1,value:n.filterOptionText(r),name:a,index:s++},t+=i.render(o,context)})}return t}});return o}),_wAMD.define("commerce/site/model/OrderItem",["jquery","backbone"],function(e,t){var i=t.RelationalModel.extend(_.extend({},Weebly.Commerce.BackboneModelData.OrderItem));return i}),_wAMD.define("commerce/site/collection/OrderItems",["jquery","backbone","commerce/site/model/OrderItem"],function(e,t,i){var n=t.Collection.extend({model:i,sync:function(e,t){"read"===e&&Weebly.Commerce.RPC.Checkout.getCart().done(function(e){t.reset(e.data.order.items)})},subtotal:function(){for(var e=this.models,t=0,i=0;i<e.length;i++)t+=e[i].get("total_price");return t}});return n}),_wAMD.define("commerce/site/view/mini-cart/CartItem",["jquery","underscore","backbone","mustache","util/ui/ImageAspectRatio","commerce/util/product-utils"],function(e,t,i,n,o,s){var r=i.View.extend({tagName:"li",className:"wsite-product-item",events:{"click .wsite-remove-button":"handleDeleteButton"},initialize:function(e){this.options=e,this.render(),this.model.on("change",this.handleModelChange,this),this.model.on("remove",this.handleModelRemove,this)},render:function(){var e=this.options.template,i=this.model.get("discounted_price");i=Number(i).toFixed(2);var r=this.model.get("name"),a=this.model.get("options"),l=this.model.get("currency_prefix"),c=this.model.get("currency_suffix"),u=t.map(a,function(e,t){var i=s.filterOptionText(e);return{name:t,option:i}}),d={thumbnail:o("wsite-list",this.model.get("image_info"),80,1),product_link:this.model.get("product_url"),name:r,options:u,price:i,quantity:this.model.get("quantity"),currency_prefix:l,currency_suffix:c};return this.template=n.render(e,d),this.$el.html(this.template),this},handleModelRemove:function(){this.$el.fadeOut(200,function(){e(this).remove()})},handleModelChange:function(){var e=this.model.changedAttributes();e&&0===e.quantity&&this.model.destroy()},handleDeleteButton:function(t){this.model.save({quantity:0,total_price:0});var i=e(t.currentTarget);this.updateQuantity(i,0)},updateQuantity:function(t,i){var n=e.isNumeric(i)?i:parseInt(t.val()),o=this;return e("#wsite-com-checkout-cart .wsite-checkout-server-error").remove(),""===n||isNaN(n)?(t.val(this.model.get("quantity")),void 0):(Weebly.Commerce.RPC.Checkout.updateItemQuantity(this.model.get("site_product_id"),this.model.get("site_product_sku_id"),n).done(function(e){var i=e.quantity;e.success?o.model.save({quantity:n,total_price:o.model.get("discounted_price")*n}):(t.val(i).focus(),o.trigger("error",e.message))}),void 0)}});return r}),_wAMD.define("commerce/site/view/mini-cart/CartItemEmpty",["backbone","mustache"],function(e,t){var i=e.View.extend({tagName:"li",initialize:function(e){var t=this;t.options=e,t.render()},render:function(){var e=this,i=e.options.template,n={};return e.template=t.render(i,n),e.$el.html(e.template),e}});return i}),_wAMD.define("commerce/site/view/mini-cart/CartList",["backbone","commerce/site/view/mini-cart/CartItem","commerce/site/view/mini-cart/CartItemEmpty"],function(e,t,i){var n=e.View.extend({tagName:"ul",className:"wsite-product-list",initialize:function(e){this.options=e,this.render(),this.collection.on("change",this.handleCollectionChange,this)},render:function(){var e,n=this,o=n.options;return this.collection.length?this.collection.each(function(i){e=new t({template:o.template,model:i,id:"item-"+i.get("site_product_id")+"-"+i.get("site_product_sku_id")}),n.$el.append(e.el)}):(e=new i({template:o.emptyTemplate}),n.$el.html(e.el)),n},handleCollectionChange:function(){0===this.collection.length&&this.render()}});return n}),_wAMD.define("jquery-ui/effect",["jquery"],function(e){!function(t,i){var n="ui-effects-";t.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];
return t=t.toLowerCase(),f(l,function(e,o){var s,r=o.re.exec(t),a=r&&o.parse(r),l=o.space||"rgba";return a?(s=i[l](a),i[u[l].cache]=s[u[l].cache],n=i._rgba=s._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,s.transparent),i):s[t]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var s,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,r,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(r),r=t);var d=this,h=e.type(o),p=this._rgba=[];return r!==t&&(o=[o,r,a,l],h="array"),"string"===h?this.parse(n(o)||s._default):"array"===h?(f(u.rgba.props,function(e,t){p[t.idx]=i(o[t.idx],t)}),this):"object"===h?(o instanceof c?f(u,function(e,t){o[t.cache]&&(d[t.cache]=o[t.cache].slice())}):f(u,function(t,n){var s=n.cache;f(n.props,function(e,t){if(!d[s]&&n.to){if("alpha"===e||null==o[e])return;d[s]=n.to(d._rgba)}d[s][t.idx]=i(o[e],t,!0)}),d[s]&&e.inArray(null,d[s].slice(0,3))<0&&(d[s][3]=1,n.from&&(d._rgba=n.from(d[s])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return f(u,function(e,o){var s,r=t[o.cache];return r&&(s=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(e,t){return null!=r[t.idx]?i=r[t.idx]===s[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return f(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),s=u[o],r=0===this.alpha()?c("transparent"):this,a=r[s.cache]||s.to(r._rgba),l=a.slice();return n=n[s.cache],f(s.props,function(e,o){var s=o.idx,r=a[s],c=n[s],u=d[o.type]||{};null!==c&&(null===r?l[s]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[s]=i((c-r)*t+r,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,s=e[2]/255,r=e[3],a=Math.max(n,o,s),l=Math.min(n,o,s),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(o-s)/c+360:o===a?60*(s-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=d?c/u:c/(2-u),[Math.round(t)%360,i,d,null==r?1:r]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*o(a,r,t+1/3)),Math.round(255*o(a,r,t)),Math.round(255*o(a,r,t-1/3)),s]},f(u,function(n,o){var s=o.props,r=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===t)return this[r].slice();var o,a=e.type(n),d="array"===a||"object"===a?n:arguments,h=this[r].slice();return f(s,function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),u?(o=c(u(h)),o[r]=h,o):c(h)},f(s,function(t,i){c.fn[t]||(c.fn[t]=function(o){var s,r=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===r?u:("function"===r&&(o=o.call(this,u),r=e.type(o)),null==o&&i.empty?this:("string"===r&&(s=a.exec(o),s&&(o=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,o){var s,r,a="";if("transparent"!==o&&("string"!==e.type(o)||(s=n(o)))){if(o=c(s||o),!h.rgba&&1!==o._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&r&&r.style;)try{a=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(e),function(){function n(e){var i,n,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,s={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(s[t.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(s[i]=o[i]);return s}function o(e,i){var n,o,s={};for(n in i)o=i[n],e[n]!==o&&(r[n]||(t.fx.step[n]||!isNaN(parseFloat(o)))&&(s[n]=o));return s}var s=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(i,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(e.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),t.effects.animateClass=function(e,i,r,a){var l=t.speed(i,r,a);return this.queue(function(){var i,r=t(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var e=t(this);return{el:e,start:n(this)}}),i=function(){t.each(s,function(t,i){e[i]&&r[i+"Class"](e[i])})},i(),c=c.map(function(){return this.end=n(this.el[0]),this.diff=o(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,c.get()).done(function(){i(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({addClass:function(e){return function(i,n,o,s){return n?t.effects.animateClass.call(this,{add:i},n,o,s):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,o,s){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,o,s):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,o,s,r,a){return"boolean"==typeof o||o===i?s?t.effects.animateClass.call(this,o?{add:n}:{remove:n},s,r,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},o,s,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,o,s){return t.effects.animateClass.call(this,{add:i,remove:e},n,o,s)}})}(),function(){function e(e,i,n,o){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(o=n,n=i,i={}),t.isFunction(n)&&(o=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=o||i.complete,e}function o(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,t){var o,s;for(s=0;s<t.length;s++)null!==t[s]&&(o=e.data(n+t[s]),o===i&&(o=""),e.css(t[s],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},s=document.activeElement;try{s.id}catch(r){s=document.body}return e.wrap(n),(e[0]===s||t.contains(e[0],s))&&t(s).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,o){return o=o||{},t.each(i,function(t,i){var s=e.cssUnit(i);s[0]>0&&(o[i]=s[0]*n+s[1])}),o}}),t.fn.extend({effect:function(){function i(e){function i(){t.isFunction(s)&&s.call(o[0]),t.isFunction(e)&&e()}var o=t(this),s=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):r.call(o[0],n,i)}var n=e.apply(this,arguments),o=n.mode,s=n.queue,r=t.effects.effect[n.effect];return t.fx.off||!r?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(i):this.queue(s||"fx",i)},show:function(t){return function(i){if(o(i))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(t.fn.show),hide:function(t){return function(i){if(o(i))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(i){if(o(i)||"boolean"==typeof i)return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(e){return 1-i(1-e)},t.easing["easeInOut"+e]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(e)}),_wAMD.define("util/effect-slide-custom",["jquery","jquery-ui/effect"],function(e){!function(e){e.effects.effect.slide=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(o,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,s),o.show();var h=t.wrapper;h?(h=e(h).show(),/relative|absolute/.test(o.css("position"))||o.css("position","relative")):h=e.effects.createWrapper(o),h.css("overflow","hidden");var n=t.distance||("top"==c?o.height()?o.outerHeight(!0):h.height():o.width()?o.outerWidth(!0):h.width());a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),t.wrapper?(h.css("overflow",""),"hide"==r&&h.hide()):e.effects.removeWrapper(o),i()}})}}(e)}),function(e){function t(e){var t=e.closest("."+E);return t.length?t:e.parent()}function i(e){var t=e.find("."+R);return t.length?t:e.find("a")}function n(e){var t=e.find("."+P);return t.length?t:e.find("li")}function o(e){var t=e.closest("."+z);return t.length?t:e.parent()}function s(e){return e.find("."+z).first()}function r(e){var t=e.find("."+F);return t.length?t:e.find("li")}function a(e){var t=e.find("."+W);return t.length?t:e.find("a")}function l(t,o,r){if(window.navFlyoutMenu){var l=window.currentPage||x,c=window.navFlyoutMenu.getMainList(),u=c.children(),h=u.filter(function(){return!!e(this).find("#"+H).length});h.length||(h=void 0);var p,f=window.getCartCount(),m=window.location.host,b=window.location.pathname;void 0===window.initCommerceModels||m.indexOf(".checkout.weebly.com")>-1||m.indexOf(".checkout.editmysite.com")>-1||b.indexOf("store/checkout")>-1||"object"==typeof Weebly&&Weebly.EDITOR&&!Weebly.COMMERCE_ENABLED||"object"!=typeof Weebly||!Weebly.Commerce||"boolean"!=typeof Weebly.Commerce.hasCart||"object"==typeof Weebly&&Weebly.Commerce&&Weebly.Commerce.hasCart===!1?h&&(h.remove(),u=c.children(),window.navFlyoutMenu.writeOrderingClassNames()):(h||(h=o.clone(!0,!0),h.find(":contains({{title}})").last().html(function(e,t){return t.replace("{{title}}",window._W.tl("Cart")+" (<span id='"+V+"'></span>)")}),i(h).attr("id",H).css("position","relative"),window.inEditor&&window.inEditor()&&(p=require("config"),p.chromeless||n(h).attr("data-content",window._W.tl("The shopping cart is only visible on your published site.")).popover({trigger:"hover",placement:"bottom",container:"body",delay:{show:500,hide:100}})),_=h,window.reportCartNavElement(),c.append(h),u=c.children(),window.navFlyoutMenu.writeOrderingClassNames()),e("#"+V).text(f));var y;h&&(y=d(h).addClass(q).css("position","relative"));var w=u.filter(function(){return!!e(this).find("#"+j).length});w.length||(w=void 0);var M=Weebly.allowMemberRegistration?window._W.tl("Log In | Register"):window._W.tl("Log In"),C=window.inEditor&&window.inEditor()&&(window._W.PageManager&&window._W.PageManager.membershipRequired()||Weebly.allowMemberRegistration||Weebly.memberCount>0||Weebly.groupCount>0)&&Weebly.showMemberLoginLink,k=window._W&&_W.showLogin;if(!C&&!k||w?C||k||!w||(w.remove(),u=c.children(),window.navFlyoutMenu.writeOrderingClassNames()):(w=o.clone(!0,!0),w.find(":contains({{title}})").last().html(function(e,t){return t.replace("{{title}}","")}),window.inEditor&&window.inEditor()?w.attr("id","pgmember-login"):w.attr("id","member-login"),i(w).attr("id",j),h?w.insertBefore(h):c.append(w),u=c.children(),window.navFlyoutMenu.writeOrderingClassNames()),window.inEditor&&window.inEditor()&&w){p=require("config");var S=i(w);S.text(M),p.chromeless||S.attr("data-content",window._W.tl("Membership Log In only works on your published site.")).popover({trigger:"hover",placement:"bottom",container:"body",delay:{show:500,hide:100}})}if(!window.DISABLE_NAV_MORE){var T=o.clone(!0,!0);T.find(":contains({{title}})").last().html(function(e,t){return t.replace("{{title}}",window._W.tl("more..."))});var E=u.filter(function(){return!!e(this).find("#"+L).length});E.length||(E=void 0);var P=!1;E&&(E.hide(),P=!0);var R;if(P)if(R=d(E),R[0]._flyoutmenu_destroy)R=R[0]._flyoutmenu_destroy(!0);else{var O=n(R)[0];O._flyoutmenu_destroy&&(R=O._flyoutmenu_destroy(!0))}var F,W,N,$,U=[],Y=[],G=!1,X=null;for(N=0;N<t.length;N++)$=v(t[N].id),$&&($.show(),U.push($));for(h&&U.push(h),w&&U.push(w),N=0;N<U.length;N++){$=U[N];var J=d($),K=g(J);if(N){if(1==N)F=Math.abs(K[0].top-Y[0][0].top)>Math.abs(K[0].left-Y[0][0].left),F&&(W=J.closest(".wsite-nav-vertical"),W.length&&(X=W.offset().top+(parseInt(W.css("padding-top"),10)||0)+W.height()));else if(F){if(null!==X&&K[1].top>X){G=!0;break}}else if(Math.abs(K[0].top-Y[N-1][0].top)>5){G=!0;break}}else;Y.push(K)}var Q,Z,et,tt=[];if(G){E?E.show():(E=T,i(E).attr("id",L).css("position","relative").on("click",!1),w?E.insertBefore(w):h?E.insertBefore(h):c.append(E));var it=d(E).addClass(B).css("position","relative"),nt=d(U[0]),ot=null;w&&(ot=d(w));var st=y||ot||it,rt=U.length-1;for(h&&rt--,w&&rt--,N=rt;N>=0;N--){var at=g(nt),lt=g(st);if(!(F&&lt[1].top>X||!F&&Math.abs(at[0].top-lt[0].top)>5))break;U[N].hide(),tt.unshift(N)}if(0===tt.length)E.remove();else if(tt.length==t.length){for(N=0;N<tt.length;N++)v(t[tt[N]].id).show();E.remove()}else{for(var ct,ut=[],dt=0;dt<tt.length;dt++)Q=t[tt[dt]],Weebly.PageManager&&Weebly.PageManager.pages?Q=Weebly.PageManager.pages[Q.id]:(Q=e.extend({},Q),Q.itemtitle=Q.title,Q.itemlink=Q.url,ct=d(v(Q.id))[0]._get_sublist(),!ct&&R&&(ct=!!R.find("#"+D+Q.id+" ."+z).length),ct&&(Q.has_children=!0,Q.children=!1)),ut.push(Q);var ht;r?(ht=(window.require||window._wAMD.require)("mustache").render(r["menu/submenu-main"],{children:ut},r),ht=e(ht)):ht=require("editor/build/themes/rendering").renderSubmenu(ut),a(ht).each(function(){var n=e(this).closest("[id]"),o=n.attr("id").replace(/[^\d]/g,"");if(o){var r;if(e.each(t,function(){return this.id===o?(r=this,!1):void 0}),r){if(n.is("span."+A)&&(n=n.children(),n.unwrap()),Z=D+r.id,n.attr("id",Z),Z.replace(/[^\d]/g,"")==l&&n.addClass(I),et=i(n),!r.onclick){var a=r.url;if(window.IS_ARCHIVE||a.match(/^http:\/\//))et.attr("href",a);else{var c=e(e.map(U,function(e){return e.get()})),u=i(c.filter("[id*="+o+"]")),h=u.attr("href"),p=u.data("membership-required");h?et.attr("href",h):et.attr("href","/"+a),"number"==typeof p&&et.attr("data-membership-required",""+p)}r.target&&et.attr("target",r.target)}var f=d(v(r.id))[0]._flyoutmenu_destroy();!f&&R&&(f=s(R.find("#"+D+r.id)),f.length||(f=void 0)),f&&s(n).replaceWith(f)}}}),it.append(ht),window.navFlyoutMenu.addItem(it)}}if(R)for(N=0;N<tt[0];N++){Q=t[N];var pt=v(Q.id),ft=R.find("#"+D+Q.id+" ."+z+":first");ft.length&&(pt[0]._flyoutmenu_destroy&&pt[0]._flyoutmenu_destroy(),pt.append(ft),window.navFlyoutMenu.addItem(pt))}window.navFlyoutMenu.writeOrderingClassNames()}}}function c(e,t,i){var n=e.closest("."+E);n.length||(n=e.parent(),n.hasClass(A)&&(n=n.parent()));var o=u(n,t,i);if(o.length>=2){var s=o.eq(0).offset(),r=o.eq(1).offset(),a=Math.abs(s.left-r.left)-Math.abs(s.top-r.top);if(0!==a)return 0>a}return!m(e)}function u(t,i,n){var o=t.find("."+P);if(o.length)return o;var s=[];return t.children().each(function(t,o){var r=e(o);if(!i||r.hasClass(A)||r.hasClass(B)||o.id.match(/^pg/)||n&&o.id==n){var a=d(r);a.length&&s.push(a[0])}}),e(s)}function d(e){if(e.hasClass(A)){var t=e.find("."+P).first();e=t.length?t:e.children().first()}return e.hasClass(E)?void 0:e}function h(e){return n(e).add(r(e))}function p(e){var t=e.closest("."+A).siblings().find("."+P+":first-child");return t.length?t:e.parent().hasClass(A)?e.parent().siblings().children(":first-child"):e.siblings()}function f(e){var t=e.find("."+O).first();if(t.length)return t;if(t=e.closest("."+F+", ."+P).find("."+O).first(),t.length)return t;if(t=e.find("ul").first(),!t.length){var i=e.next();i.hasClass(E)&&(t=i.children().first())}return t.length?t:void 0}function m(e){return!e.closest("."+O).length}function g(e){var t=e.is("a")?e:e.find("a"),i=e.offset(),n={top:i.top+e[0].offsetHeight,left:i.left+e[0].offsetWidth};if(!t)return[i,n];var o,s,r=t.offset(),a={top:r.top+t[0].offsetHeight,left:r.left+t[0].offsetWidth};return Math.abs(i.left-n.left)<10?(o=r,s=a):(o={top:Math.min(i.top,r.top),left:Math.min(i.left,r.left)},s={top:Math.max(n.top,a.top),left:Math.max(n.left,a.left)}),[o,s]}function v(t){var i=e("#pg"+t);return!i.length&&C&&(i=e("#"+C)),i.length?i:void 0}function b(){window.refreshNavCondense()}function y(){if(window.inEditor&&window.inEditor()){for(var e=0;e<document.styleSheets.length;e++)try{if(document.styleSheets[e].title==S+"-theme-css"){var t=document.styleSheets[e],i=t.cssRules||t.rules;return i&&i.length>0}}catch(n){}return!1}return!0}function w(e){if(y())e();else var t=setInterval(function(){y()&&(clearInterval(t),e())},200)}window.getCartCount=function(){var e=window.inEditor&&window.inEditor()?0:"-";return e};var _=null;window.getCartNavElement=function(){return _},window.reportCartNavElement=function(){};var M,C,x,k,S=window.STYLE_PREFIX||"weebly",T=300,A=S+"-nav-handle",D=S+"-nav-",E=S+"-menu-default",P=S+"-menu-item-wrap",R=S+"-menu-item",z=S+"-menu-wrap",O=S+"-menu",F=S+"-menu-subitem-wrap",W=S+"-menu-subitem",I=S+"-nav-current",N=S+"-menus",L=S+"-nav-more-a",B=S+"-nav-more",H=S+"-nav-cart-a",q=S+"-nav-cart",V=S+"-nav-cart-num",j=S+"-nav-login-a";if(window.initPublishedFlyoutMenus=function(i,n,o,s,r,a){if(x=n,o instanceof e||(o=e(o)),a&&(k=a),i.length>0){var c=function(){C=s;var n=e("<div>",{id:N}).appendTo("body"),r=v(i[0].id);r&&(window.navFlyoutMenu=new window.FlyoutMenu(t(r),{relocate:n,aLiId:s}),l(i,o,k))};r?c():w(c)}window.refreshPublishedFlyoutMenus=function(){l(i,o,k)},e(".wsite-logo img").on("load",window.refreshPublishedFlyoutMenus),e(window).on("load",window.refreshPublishedFlyoutMenus)},window.flyoutMenusRefreshable=!0,window.initEditorFlyoutMenus=function(){w(function(){function i(){var e=Weebly.PageManager.getTopLevelSummary();if(e.length>0){var i=v(e[0].id);if(i){var n=t(i);n.is("table,tbody,thead,tr")?window.navFlyoutMenu=null:(window.navFlyoutMenu=new window.FlyoutMenu(n,{relocate:"#"+N}),M=window.renderItem({title:"{{title}}"},!1,window.currentNormalItem),M.is("."+A)||(M=M.wrapAll('<span class="'+A+'">').parent()),l(e,M))}else window.navFlyoutMenu=null}else window.navFlyoutMenu=null}if(e.browser.webkit){var n=e("#icontent span."+A);n.hide(),setTimeout(function(){n.show(),i()},0)}else i()})},window.refreshNavCondense=function(){!window.navFlyoutMenu||Weebly.view&&Weebly.view.isMobileView||l(Weebly.PageManager.getTopLevelSummary(),M)},window.inEditor&&window.inEditor())_wAMD.require(["editor/app"],function(e){e.vent.on({"settings:membership:registration:change":function(){window.refreshNavCondense()},"settings:membership:memberCount:change":function(){window.refreshNavCondense()},"settings:membership:groupCount:change":function(){window.refreshNavCondense()}})});else if(window.addEventListener||window.attachEvent){var $=window.addEventListener?window.addEventListener:window.attachEvent;$("inEditor",function(){_wAMD.require(["editor/app"],function(e){e.vent.on({"settings:membership:registration:change":function(){window.refreshNavCondense()},"settings:membership:memberCount:change":function(){window.refreshNavCondense()},"settings:membership:groupCount:change":function(){window.refreshNavCondense()}})})})}window.disableFlyouts=!1,window.FlyoutMenu=function(t,n){function s(t){function s(e){b&&C&&e.preventDefault()}function l(){return window.disableFlyouts?!1:(m.mouseoverItems.push(t),S++,k=!0,x||C||M&&(t.data("hasChildren",!0),p(t).each(function(e,t){t._flyoutmenu_contract&&t._flyoutmenu_contract()}),h(),t.data("isExpanded",!0)),void 0)}function u(){if(window.disableFlyouts)return!1;if(k=!1,x){var e=S;setTimeout(function(){S==e&&x&&!C&&(v(),t.data("isExpanded",!1))},y)}}function d(){return window.disableFlyouts?!1:(S++,void 0)}function h(){C=!0;var i={wrapper:_,duration:T,complete:function(){if(C=!1,x=!0,k?(t[0]._flyoutmenu_contract=v,t[0]._flyoutmenu_hide=function(){C=!1,x=!1,k=!1,t[0]._flyoutmenu_contract=null,t[0]._flyoutmenu_hide=null,_.hide()}):v(),window.inEditor&&window.inEditor()){var i=e(this),n=i.offset();require("tablet/api/external").navShown({top:n.top,left:n.left,width:i.outerWidth(),height:i.outerHeight()})}}},o=g(t);_.css("left",-1e4),_.show();var s=_.offsetParent(),r=s.is("body")?{top:0,left:0}:s.offset();_.hide(),M.show();var a;if(c(t,!0,n.aLiId))A=!1,_.css("top",-r.top+o[0].top),a=_.outerWidth(),o[1].left+a>e("body").outerWidth()?(D=!1,_.css("left",-r.left+o[0].left-a),i.direction="right",M.show("slide",i)):(D=!0,_.css("left",-r.left+o[1].left),i.direction="left",M.show("slide",i));else{A=!0,_.css("top",-r.top+o[1].top),a=_.outerWidth();var l=_.outerHeight();o[0].left+a>e("body").outerWidth()?_.css("left",-r.left+o[1].left-a):_.css("left",-r.left+o[0].left);var u;if(t.parentsUntil("body, #icontent").filter(function(){return"fixed"===e(this).css("position")}).length>0){var d=e(window);u=d.height()+d.scrollTop()}else u=window.inEditor?e("#icontent").height():e(document).height();var h=parseInt(_.css("top"),10)-l-t.outerHeight();o[1].top+l>u&&h>0?(_.css("top",h+"px"),i.direction="down",E=!0):(i.direction="up",E=!1),M.show("slide",i)}}function v(e){if(!window.disableFlyouts&&t.parent().length){e&&(k=!1),C=!0,t[0]._flyoutmenu_contract=null,t[0]._flyoutmenu_hide=null;var i={wrapper:_,duration:T,complete:function(){C=!1,x=!1,k&&h(),window.inEditor&&window.inEditor()&&require("tablet/api/external").navHidden()}};A?(i.direction=E?"down":"up",M.hide("slide",i)):D?(i.direction="left",M.hide("slide",i)):(i.direction="right",M.hide("slide",i))}}t.css("position","relative"),i(t).add(a(t)).css("position","relative");var _,M,C=!1,x=!1,k=!1,S=0,A=!1,D=!1,E=!1;M=f(t),M&&(_=o(M),_.css("position","absolute"),_.hide(),w?(_.on("mouseover",l),_.on("mouseout",u),_.on("click",function(e){s(e)})):(_.on("mouseover",d),_.on("click",function(e){s(e)}))),t.on("mouseover",l),t.on("mouseout",u),t.on("click",function(e){s(e)}),t[0]._flyoutmenu_destroy=function(e){if(t.off("mouseover",l),t.off("mouseout",u),t.off("click",s),_){w?(_.off("mouseover",l),_.off("mouseout",u),_.off("click",s)):(_.off("mouseover",d),_.off("click",s)),r(_).each(function(){this._flyoutmenu_destroy()}),e&&_.detach();var i=_;return _=null,M=null,i}},t[0]._get_sublist=function(){return M}}function l(){var i=1;u(t).each(function(){this.className=this.className.replace(new RegExp(D+"\\d+"),"");var t=e(this);"none"!=t.css("display")&&(t.addClass(D+i),i++)})}var m=this;m.mouseoverItems=[],t=e(t),n=n||{};var v,b="ontouchstart"in window,y=1e3*(n.delay||.5),w=n.relocate?e(n.relocate):!1;this.contract=function(){v.each(function(e,t){t._flyoutmenu_contract&&t._flyoutmenu_contract(!0)})},this.hideSubmenus=function(){v.each(function(e,t){t._flyoutmenu_hide&&t._flyoutmenu_hide()})},this.destroy=function(){v.each(function(e,t){t._flyoutmenu_destroy&&t._flyoutmenu_destroy()})},this.addItem=function(t){t=e(t);var i=d(t);if(i.length){s(i);var n=f(i);n&&r(n).each(function(){s(e(this))}),w&&n&&w.append(o(n)),v=v.add(i),l()}},this.removeItem=function(t){t=e(t);var i=d(t);i.length&&(i[0]._flyoutmenu_destroy&&i[0]._flyoutmenu_destroy(!0),i.remove(),v=v.not(i),l())},this.getMainList=function(){return t},this.writeOrderingClassNames=l,v=h(t),v.each(function(){s(e(this))}),l(),w&&u(t).each(function(t,i){var n=f(e(i));n&&w.append(o(n))})},window.whenThemeCSSLoaded||(window.whenThemeCSSLoaded=w),Weebly.Menus={inVerticalList:c,updateMenu:b}}(Weebly.jQuery),_wAMD.define("legacy/flyout_menus_jq",["util/effect-slide-custom"],function(){}),_wAMD.define("commerce/site/view/mini-cart/MiniCart",["jquery","backbone","mustache","commerce/site/collection/OrderItems","commerce/site/view/mini-cart/CartList","legacy/flyout_menus_jq"],function(e,t,i,n,o){var s=t.View.extend({id:"wsite-mini-cart",className:"wsite-cart-contents",initialize:function(){e("body").append(this.$el),Weebly.Commerce.RPC.Checkout?Weebly.Commerce.RPC.Checkout.getMiniCart().done(this.populate.bind(this)):Weebly.Commerce.RPC.Order&&Weebly.Commerce.RPC.Order.getMiniCart().done(this.populate.bind(this)),this.$el.hide(),this.bindCartNav();var t=this;e(window).on("resize",function(){t.positionCart()})},populate:function(e){if(e.success){this.cart_template=this.cart_template||e.data.cart_template,this.item_template=this.item_template||e.data.cart_item_template,this.currency_prefix=this.currency_prefix||e.data.currency_prefix,this.currency_suffix=this.currency_suffix||e.data.currency_suffix,e.data.checkout_url&&(this.checkout_url=e.data.checkout_url),window.inEditor&&(this.checkout_url=document.URL.indexOf("?")>-1?document.URL+"&cart="+e.data.order_token:document.URL+"?cart="+e.data.order_token),this.item_empty_template=this.item_empty_template||e.data.cart_item_empty_template,this.order=e.data.order,this.OrderItems=new n,this.OrderItems.on("reset",this.render,this),this.OrderItems.on("change",function(){this.render(),this.showCart()},this);var t=this;window.getCartCount=function(){for(var e=0,i=0;i<t.OrderItems.length;i++)e+=t.OrderItems.at(i).get("quantity");return e},void 0!==window.refreshPublishedFlyoutMenus&&window.refreshPublishedFlyoutMenus();var i=_.map(e.data.order.items,function(e){return e.currency_prefix=this.currency_prefix,e.currency_suffix=this.currency_suffix,e},this);this.OrderItems.reset(i),this.positionCart()}},hideCart:function(){var t=e("#wsite-nav-cart-a").parents(".wsite-nav-cart");this.$el.fadeOut(200),t.attr("id",""),this.cartPinned=!1},showCart:function(t){if(!window.inEditor||!inEditor()){var i=this;this.cartPinned=this.cartPinned||t;var n=e("#wsite-nav-cart-a").parents(".wsite-nav-cart");if(this.$el.fadeIn(200),n.attr("id","active"),i.positionCart(),this.cartPinned){var o=function(t){var n=e(t.target);0!==n.parents("#wsite-mini-cart").length||n.is(".wsite-remove-button")?e(document).one("click",o):i.hideCart()};e(document).one("click",o)}}},scrollToCart:function(){var t=e(".wsite-nav-cart");e(window).scrollTop()>t.offset().top?e("html, body").animate({scrollTop:t.offset().top-25},"slow"):e(window).scrollTop()+e(window).height()<t.offset().top+t.height()&&e("html, body").animate({scrollTop:t.offset().top+this.$el.height()+25},"slow")},positionCart:function(){var t=e("#wsite-nav-cart-a").parents(".wsite-nav-cart");if(t.length){var i=t.offset(),n=this.$el.offsetParent();if("undefined"!=typeof safeCumulativeOffset){var o=safeCumulativeOffset(n);i.left-=o.left,i.top-=o.top,i.top+=n.scrollTop(),i.left+=n.scrollLeft()}if(Weebly.Menus&&Weebly.Menus.inVerticalList(t,!0,"active")){this.$el.addClass("arrow-left");var s=i.top+t.outerHeight()/2-.2*this.$el.outerHeight(),r=i.left+t.outerWidth()+8;s=Math.max(s,0),r=Math.max(r,9)}else this.$el.addClass("arrow-top"),s=i.top+t.outerHeight()+8,t.offset().left+t.outerWidth()/2<.8*this.$el.outerWidth()?(this.$el.addClass("arrow-top-left"),r=i.left+t.outerWidth()/2-.2*this.$el.outerWidth()):(this.$el.removeClass("arrow-top-left"),r=i.left+t.outerWidth()/2-.8*this.$el.outerWidth()),s=Math.max(s,9),r=Math.max(r,0);this.$el.css({position:"absolute",left:r+"px",top:s+"px"})}},bindCartNav:function(){var t=this,i=window.getCartNavElement();if(!i)return window.reportCartNavElement=function(){t.bindCartNav()},void 0;e(i).on("click",function(){return t.cartPinned?t.hideCart():t.showCart(!0),!1});var n=function(e){return"mouseleave"!==e.type||t.cartPinned?(window.clearTimeout(t.fadeTimeout),t.showCart()):(window.clearTimeout(t.fadeTimeout),t.fadeTimeout=window.setTimeout(function(){t.hideCart()
},200)),!1};t.positionCart(),e(i).on("hover",n),this.$el.on("hover",n)},render:function(){e("#wsite-nav-cart-num").text(window.getCartCount()),this.$el.empty();var t=new o({collection:this.OrderItems,template:this.item_template,emptyTemplate:this.item_empty_template});this.$el.html(t.el);var n=this.checkout_url;window.inEditor&&(n=document.URL.indexOf("?")>-1?document.URL+"&cart="+this.order_token:document.URL+"?cart="+this.order_token);var s={price:Number(this.OrderItems.subtotal()).toFixed(2),checkout_url:n,currency_prefix:this.currency_prefix,currency_suffix:this.currency_suffix},r=i.render(this.cart_template,s);this.$el.append(r),window.inEditor&&inEditor()&&e("#wsite-mini-cart").on("click",'a[href="'+n+'"]',function(){return!1})}}),r={},a=function(){t.$=e,r.cart=new s};return e(a),r}),_wAMD.define("commerce/site/view/ProductPageView",["jquery","underscore","commerce/site/view/BaseProductPageView","commerce/site/view/product/Images","commerce/site/view/product/SocialIcons","commerce/site/view/product/ProductElement","commerce/site/view/checkout/OrderItem/PaypalItem","commerce/site/view/mini-cart/MiniCart"],function(e,t,i,n,o,s,r,a){function l(t){var i=e('<div id="wsite-com-issue-overlay"><div class="close"></div><p class="warning-message">'+t+"</p></div>");e("body").append(i),i.on("click",function(){e(this).remove()})}var c=t.extend({},i,{$el:null,ui:{},variationData:[],initialize:function(){var t=this,i=e("#wsite-com-product-area").length;if(i&&(this.initializeUI(),this.initializeVariations(),this.variationData.length>1&&this.update(),n.initialize(this.$el),o.initialize(this.$el),this.$el.find("#wsite-com-product-add-to-cart").on({click:this.buy,keypress:function(e){(32===e.which||13===e.which)&&t.buy(e)}}),window.inEditor&&inEditor())){var r=require("commerce/util/product-utils"),a=jQuery("#wsite-com-product-gen").attr("data-id"),l=this.$el.find("#wsite-com-product-title"),c=this.$el.find("#wsite-com-product-short-description").find(".paragraph"),u=_W.tl("Click here to edit");this.ui["add-to-cart"].attr("data-content",_W.tl("The shopping cart is only visible on your published site.")).popover({trigger:"hover",placement:"top",container:"body",delay:{show:500,hide:100}}),l.attr("placeholder",""),makeElementContentEditable(l.get(0),{richTextControls:!1,saveCallback:function(){r.saveProductChanges("title",a,l,{productPage:!0})}}),c.attr("placeholder",u),makeElementContentEditable(c.get(0),{saveCallback:function(){r.saveProductChanges("description",a,c)}})}s.initialize(this.buy)},initializeUI:function(){var i=this;this.$el=e("#wsite-com-product-area");var n={"images-strip":"#wsite-com-product-images-strip",sku:"#wsite-com-product-sku","sku-value":"#wsite-com-product-sku-value",options:"#wsite-com-product-options","option-groups":"#wsite-com-product-options .wsite-com-product-option","price-area":"#wsite-com-product-price-area",price:"#wsite-com-product-price","price-sale":"#wsite-com-product-price-sale","price-unavailable":"#wsite-com-product-price-unavailable","price-amount":"#wsite-com-product-price .wsite-com-product-price-amount","price-sale-amount":"#wsite-com-product-price-sale .wsite-com-product-price-amount","inventory-message":"#wsite-com-product-inventory-message",quantity:"#wsite-com-product-quantity-input","add-to-cart":"#wsite-com-product-add-to-cart"};t.each(n,function(e,t){i.ui[t]=i.$el.find(e)})},initializeVariations:function(){var e=document.getElementById("wsite-com-product-view-variation-data");this.variationData=JSON.parse(e.value)||[],i.initializeVariations.call(this,this.ui["option-groups"])},getValues:function(){var e=this.ui.options.serializeArray(),i={};return t.each(e,function(e){""!==e.value&&(i[e.name]=e.value)}),i},filterOptionText:function(e){return e.replace(/<#[A-Za-z0-9]+>$/,"")},update:function(){var e=this.getCurrentRecord(this.getValues()),i=this,n=t.pluck(this.variationData,"options"),o=this.getValues();if(this.updateAvailability(this.ui["option-groups"],n,o),e){var s,r,a,l="";this.ui["price-area"].attr("class","").toggleClass("wsite-com-product-show-price-on-sale",!t.isNull(e.sale_price)),this.ui["price-amount"].text(e.price.toFixed(2)),this.ui["price-sale-amount"].text(t.isNull(e.sale_price)?"":e.sale_price.toFixed(2)),0===e.inventory?l=_W.tl("Sold Out"):e.inventory<=5&&(l=e.inventory+_W.tl(" available")),this.ui["inventory-message"].text(l),a=this.ui.quantity.val(),r=a>e.inventory||0===e.inventory?e.inventory:parseInt(a)||1,this.ui.quantity.toggleClass("wsite-com-product-disabled",0===e.inventory).attr("max",e.inventory).attr("disabled",0===e.inventory).val(r),void 0===e.inventory&&this.ui.quantity.removeAttr("max"),this.ui["add-to-cart"].toggleClass("wsite-com-product-disabled",0===e.inventory).attr("tabindex",0===e.inventory?-1:0),s=e.image_order?this.ui["images-strip"].find("#wsite-com-product-images-secondary-"+e.image_order[0]):this.ui["images-strip"].children(":first-child"),s.trigger("click"),this.ui.sku.toggleClass("wsite-com-product-sku-none",!e.sku),this.ui["sku-value"].text(e.sku)}else{var c=t.size(this.getValues());if(c===this.ui["option-groups"].length)this.ui["price-area"].attr("class","wsite-com-product-show-price-unavailable"),this.ui["inventory-message"].text(_W.tl("Unavailable")),this.ui["price-amount"].text(""),this.ui["price-sale-amount"].text("");else{var u=this.getValues(),d=t.find(this.variationData,function(e){return i.objectContains(u,e.options)});d&&d.image_order&&this.ui["images-strip"].find("#wsite-com-product-images-secondary-"+d.image_order[0]).trigger("click"),this.ui["price-area"].attr("class","wsite-com-product-show-price-range")}this.ui.sku.toggleClass("wsite-com-product-sku-none",!0),this.ui["sku-value"].text(""),this.ui["add-to-cart"].toggleClass("wsite-com-product-disabled",!0),this.ui.quantity.toggleClass("wsite-com-product-disabled",!0).attr("max",0).attr("disabled",!0).val(0);var h=t.pluck(this.variationData,"price"),p=t.max(h),f=t.min(h),m=t.pluck(this.variationData,"sale_price");if(t.compact(m).length){var g=p==f&&p>t.max(m);g&&this.ui["price-area"].attr("class","wsite-com-product-show-price-range-on-sale")}}},buy:function(i){var n,o,s,u,d=e(this);if(i.stopPropagation(),i.preventDefault(),u=d.parent().data("direct-to-paypal")||d.data("direct-to-paypal"),!(d.hasClass("wsite-com-product-disabled")&&i.currentTarget.blur()||window.inEditor&&inEditor())){if(e("#wsite-com-error").remove(),d.is("[data-add-to-cart]")&&!d.hasClass("wsite-soldout-product-button"))n={price:parseFloat(d.data("price")),sale_price:d.data("sale-price")?parseFloat(d.data("sale-price")):null,site_product_sku_id:d.data("site-product-sku-id"),site_product_id:d.data("site-product-id")},0===d.data("sale-price")&&(n.sale_price=0);else if(n=1===c.variationData.length?c.variationData[0]:c.getCurrentRecord(c.getValues()),!n||"number"==typeof n.inventory&&0==n.inventory)return;n&&(o=null!==n.sale_price&&void 0!==n.sale_price?n.sale_price:n.price,null!==o&&void 0!==o&&(n.site_product_id=n.site_product_id||e("#wsite-com-product-gen").attr("data-id"),s=e("#wsite-com-product-quantity-input").length?e("#wsite-com-product-quantity-input").val():1,0>=s||(!Weebly.Commerce.hasCart&&u&&($text=d.find(".wsite-button-inner"),d.addClass("wsite-disabled"),$text.html(_W.tl("Please wait")+'&nbsp;<span class="animated-ellipsis"><i>.</i><i>.</i><i>.</i></span>')),Weebly.Commerce.RPC.Checkout.addItem(n.site_product_id,n.site_product_sku_id,s).done(function(i){if(i.data.invalid||!i.data.has_payment)return l(i.message),void 0;if(buyNowItem=t.last(i.data.mini_cart.data.order.items),i.data.out_of_stock){var n=e("#wsite-com-error");n.length||(n=e("<div/>",{id:"wsite-com-error"}),n.insertAfter("#wsite-com-product-buy")),n.html(i.message)}Weebly.Commerce.hasCart?(a.cart.populate(i.data.mini_cart),a.cart.showCart(!0),a.cart.scrollToCart()):Weebly.Commerce.RPC.Checkout.getMiniCart().done(function(t){if(u&&0!==o){var i=new Backbone.Model({quantity:s,price:o,discounted_price:buyNowItem.discounted_price,options:buyNowItem.options,name:buyNowItem.name,short_description:buyNowItem.short_description}),n=new r({model:i,itemNumber:0}),a=t.data.checkout_url.replace("?cart=","?receipt=");Weebly.Commerce.RPC.Checkout.getPaypalNotifyUrl().done(function(t){var i=d.parent().find(".wsite-com-paypal-checkout");i.length<1&&(i=e(".wsite-com-paypal-checkout").first()),i.find('input[name="notify_url"]').val(t),i.find('input[name="return"]').val(a),i.append(n.el).submit()})}else window.location.href=t.data.checkout_url})}))))}}});Weebly.Commerce.Site.Product=c,e(document).ready(function(){window.inEditor&&inEditor()||c.initialize()})}),_wAMD.define("commerce/site/view/mobile/CategoryPageView",["jquery"],function(e){if(Weebly.Commerce){Weebly.Commerce.Site.Mobile||(Weebly.Commerce.Site.Mobile={}),Weebly.Commerce.Site.Mobile.Category||(Weebly.Commerce.Site.Mobile.Category={}),Weebly.Commerce.Site.Mobile.Category.View||(Weebly.Commerce.Site.Mobile.Category.View={});var t=Weebly.Commerce.Site.Mobile.Category.View;Weebly.Commerce.Site.Mobile.Category.initialize=function(){t.Hierarchy.initialize(),t.Pager.initialize()},t.Hierarchy={initialize:function(){var i=e("#wsite-com-hierarchy-dropdown");i.on("change",t.Hierarchy.handleDropdownChange),Weebly.mobile_navigation.resizeScreen()},handleDropdownChange:function(){return window.location.pathname=e(this).val(),!1}},t.Pager={categoryId:0,totalPages:1,currentPage:1,initialize:function(){var i=e("#wsite-com-pagination");t.Pager.categoryId=parseInt(i.attr("data-com-category")),t.Pager.totalPages=parseInt(i.attr("data-com-total")),t.Pager.currentPage=parseInt(i.attr("data-com-current"));var n=i.find(".wsite-com-pagination-left, .wsite-com-pagination-right");n.on("click",t.Pager.handleClick)},handleClick:function(){var i=e(this),n=t.Pager.currentPage;if(i.is(".wsite-com-pagination-left")?n--:n++,n>=t.Pager.totalPages-1&&(n=t.Pager.totalPages-1),0>=n&&(n=0),n!=t.Pager.currentPage){t.Pager.currentPage=n;var o=e("#wsite-com-pagination .wsite-com-pagination-left"),s=e("#wsite-com-pagination .wsite-com-pagination-right");o.toggleClass("wsite-disabled",t.Pager.currentPage<=0),s.toggleClass("wsite-disabled",t.Pager.currentPage>=t.Pager.totalPages-1);var r=e("#wsite-com-pagination .wsite-com-current");r.html(t.Pager.currentPage+1);var a;a=Weebly.Commerce&&Weebly.Commerce.Editor?Weebly.Commerce.RPC.Category.generateMobileProductList(window.com_userID,window.com_currentSite,t.Pager.categoryId,t.Pager.currentPage):Weebly.Commerce.RPC.Category.generateMobileProductList(t.Pager.categoryId,t.Pager.currentPage),a.done(function(t){var i=e("#product-list");i.height(i.outerHeight()),i.empty(),i.height("auto"),i.html(t.content),Weebly.mobile_navigation.resizeScreen()})}}},e(document).ready(Weebly.Commerce.Site.Mobile.Category.initialize)}}),_wAMD.define("commerce/site/view/mobile/product/Slider",["jquery"],function(e){var t={indexMap:{},$slider:null,initialize:function(){var t=this;e("#wsite-com-product-slider .wsite-com-slide").each(function(){var i=e(this),n=i.data("image-id");t.indexMap[n]=i.index()}),this.$slider=e("#wsite-com-product-slider .wsite-com-product-images").swiper({pagination:"#wsite-com-product-slider .wsite-images-pager",slideClass:"wsite-com-slide",wrapperClass:"wsite-com-slides",paginationElementClass:"wsite-page-button",paginationVisibleClass:"wsite-page-button-visible",paginationActiveClass:"wsite-page-button-active",slideActiveClass:"wsite-slide-active",slideVisibleClass:"wsite-slide-visible",loop:!0,grabCursor:!0,paginationClickable:!0,calculateHeight:!0,resizeReInit:!0,centeredSlides:!1})}};return t}),_wAMD.define("commerce/site/view/mobile/ProductPageView",["jquery","underscore","commerce/site/view/BaseProductPageView","commerce/site/view/mobile/product/Slider","commerce/site/view/product/ProductElement","commerce/site/view/checkout/OrderItem/PaypalItem"],function(e,t,i,n,o,s){function r(t){var i=e('<div id="wsite-com-issue-overlay"><div class="close"></div><p class="warning-message">'+t+"</p></div>");e("body").append(i),i.on("click",function(){e(this).remove()})}var a=t.extend({},i,{variationData:[],initialize:function(){n.initialize(),this.initializeVariations(),o.initialize(this.buy),e(".wsite-buy-button").on("click",this.buy),this.update()},buy:function(i){var n,o,l,c=e(this);if(i.stopPropagation(),i.preventDefault(),l=c.parent().data("direct-to-paypal")||c.data("direct-to-paypal"),!(c.hasClass("wsite-com-product-disabled")||window.inEditor&&inEditor())){if(c.is("[data-add-to-cart]")&&!c.hasClass("wsite-soldout-product-button"))n={price:parseFloat(c.data("price")),sale_price:c.data("sale-price")?parseFloat(c.data("sale-price")):null,site_product_sku_id:c.data("site-product-sku-id"),site_product_id:c.data("site-product-id")},0===c.data("sale-price")&&(n.sale_price=0);else if(n=1==a.variationData.length?a.variationData[0]:a.getCurrentRecord(a.currentSelectedOptions()),!n||"number"==typeof n.inventory&&0==n.inventory)return;if(o=null!==n.sale_price&&void 0!==n.sale_price?n.sale_price:n.price,null!==o&&void 0!==o){n.site_product_id=n.site_product_id||e("#wsite-product-area").attr("data-id");var u=e("#wsite-quantity");if(u.length)var d=u.val();else d=1;0>=d||(!Weebly.Commerce.hasCart&&l&&($text=c.find(".wsite-button-inner"),c.addClass("wsite-disabled"),$text.html(_W.tl("Please wait")+'&nbsp;<span class="animated-ellipsis"><i>.</i><i>.</i><i>.</i></span>')),Weebly.Commerce.RPC.Checkout.addItem(n.site_product_id,n.site_product_sku_id,d).done(function(i){if(i.data.invalid||!i.data.has_payment)return r(i.message),void 0;buyNowItem=t.last(i.data.mini_cart.data.order.items);var n=i.data.has_ssl_cert,a=i.data.token,l=i.data.host;Weebly.Commerce.hasCart||!c.parent().data("direct-to-paypal")&&!c.data("direct-to-paypal")||0===o?window.location.href=n&&-1==l.indexOf("weebly")?l:l+"?view=mobile&cart="+a:Weebly.Commerce.RPC.Checkout.getMiniCart().done(function(t){var i=new Backbone.Model({quantity:d,price:o,discounted_price:buyNowItem.discounted_price,options:buyNowItem.options,name:buyNowItem.name}),n=new s({model:i,itemNumber:0}),r=t.data.checkout_url.replace("?cart=","?receipt=");Weebly.Commerce.RPC.Checkout.getPaypalNotifyUrl().done(function(t){var i=c.parent().find(".wsite-com-paypal-checkout");i.length<1&&(i=e(".wsite-com-paypal-checkout").first()),i.find('input[name="notify_url"]').val(t),i.find('input[name="return"]').val(r),i.append(n.el).submit()})})}))}}},update:function(){var i=this,o=this.currentSelectedOptions(),s=t.pluck(this.variationData,"options");this.updateAvailability(e(".wsite-product-options .wsite-form-field"),s,o);var r=e("#wsite-product-sale-price .wsite-price"),a=e("#wsite-product-price .wsite-price"),l=e("#wsite-com-product-add-to-cart"),c=e("#wsite-price-line").removeClass(),u=this.getCurrentRecord(this.currentSelectedOptions());if(u){a.text(u.price.toFixed(2)),u.sale_price||0===u.sale_price?(r.text(u.sale_price.toFixed(2)),c.addClass("wsite-product-sale-price")):c.addClass("wsite-product-price"),0===u.inventory&&c.addClass("wsite-product-sold-out"),l.toggleClass("wsite-com-product-disabled",0===u.inventory);var d=u.image_order&&u.image_order[0],h=n.indexMap[d];void 0!==h&&n.$slider.swipeTo(h)}else{var p=e(".wsite-product-options .wsite-form-field"),f=t.size(this.currentSelectedOptions());if(f===p.length)c.addClass("wsite-product-no-item");else{c.addClass("wsite-product-price-range");var m=t.find(this.variationData,function(e){return i.objectContains(o,e.options)}),d=m&&m.image_order&&m.image_order[0],h=n.indexMap[d];void 0!==h&&n.$slider.swipeTo(h)}}var g=u?u.inventory:0;g=void 0===g||g>20?20:g;for(var v="",b=1;g>=b;b++)v+="<option>"+b+"</option>";""===v&&(v="<option>0</option>"),e("#wsite-quantity").html(v)},currentSelectedOptions:function(){if(1===this.variationData.length)return this.variationData[0].options;var t=e(".wsite-product-options select, .wsite-product-options input[type=radio]:checked"),i={};return t.each(function(){var t=e(this),n=t.val(),o=t.attr("name");""!==n&&(i[o]=n)}),i},initializeVariations:function(){var t=document.getElementById("wsite-product-variations");this.variationData=t?JSON.parse(t.value):[],i.initializeVariations.call(this,e(".wsite-product-options .wsite-form-field"))}});Weebly.Commerce.Site.Mobile||(Weebly.Commerce.Site.Mobile={}),Weebly.Commerce.Site.Mobile.Product=a,e(document).ready(function(){window.inEditor&&inEditor()||a.initialize()})}),_wAMD.define("tpl!elements/commerce-product",[],function(){return"<div class='wsite-product' style='margin-top:{{marginTop}}; margin-bottom:{{marginBottom}}'>\n\n	{{#showImage}}\n		<div class='wsite-product-image-wrap' style='width:{{imageWidth}}'>\n			<a class='wsite-product-image' {{{imageLinkAttrs}}}>\n				{{{imageHtml}}}\n			</a>\n		</div>\n	{{/showImage}}\n\n	<div class='wsite-product-right'>\n\n		<div class='wsite-product-top'>\n\n			<h2 class='wsite-product-title'{{#inEditor}} placeholder=''{{/inEditor}}>{{title}}</h2>\n			{{#hasVariants}}\n				<ul class='wsite-product-variations'>\n					{{#variantOptions}}\n						<li class='wsite-product-variant'><span class=\"wsite-option-name\">{{name}}</span>: {{choice}}</li>\n					{{/variantOptions}}\n				</ul>\n			{{/hasVariants}}\n\n			{{#showPrice}}\n				<div class='wsite-product-price'>\n					{{{priceHtml}}}\n				</div>\n			{{/showPrice}}\n\n		</div>\n\n		<div class='wsite-product-button-wrap' data-direct-to-paypal=\"{{isDirectToPayPal}}\">\n			<a href='{{buttonUrl}}' class='{{buttonClass}}' {{{buttonDataAttrs}}} >\n				<span class='wsite-button-inner'>{{buttonText}}</span>\n			</a>\n			{{#isDirectToPayPal}}\n				<div style=\"display: none\">\n					{{> platform/theme/core/shared/commerce/paypal-button}}\n				</div>\n			{{/isDirectToPayPal}}\n		</div>\n\n		{{#showDescription}}\n			<div class='wsite-product-description paragraph'{{#inEditor}} placeholder=\"{{#esc_attr}}{{#tl}}Click here to edit{{/tl}}{{/esc_attr}}\"{{/inEditor}}>{{{descriptionHtml}}}</div>\n		{{/showDescription}}\n\n	</div>\n\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-price",[],function(){return"\n{{#salePrice}}\n	<a class='wsite-product-original-price'>\n		{{{currencyPrefix}}}{{price}}{{{currencySuffix}}}\n	</a>\n	<a class='wsite-product-sale-price'>\n		{{{currencyPrefix}}}{{salePrice}}{{{currencySuffix}}}\n	</a>\n{{/salePrice}}\n\n{{^salePrice}}\n	<a>\n		{{{currencyPrefix}}}{{price}}{{{currencySuffix}}}\n	</a>\n{{/salePrice}}"}),_wAMD.define("tpl!elements/commerce-product-legacy-grid",[],function(){return"<div class='product-block product' style='{{alignCss}}'>\n\n	<div class='product-block-inner'>\n		{{#showImage}}\n			<a {{{imageLinkAttrs}}}>\n				<span class='product-block-image' style='background-image:url(\"{{imageUrl}}\")'></span>\n			</a>\n		{{/showImage}}\n	</div>\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showPrice}}\n		<div class='product-block-price'>\n			{{{priceHtml}}}\n		</div>\n	{{/showPrice}}\n\n	<input\n		class='product-button'\n		type='image'\n		{{#isViewButton}}\n			src='//{{staticDomain}}/editor/images/view_product_small.gif'\n		{{/isViewButton}}\n		{{#isAddToCartButton}}\n			src='//{{staticDomain}}/editor/images/add_to_cart_small.gif'\n		{{/isAddToCartButton}}\n		{{#isBuyNowButton}}\n			src='//{{staticDomain}}/editor/images/buy_now_small.gif'\n		{{/isBuyNowButton}}\n		{{#buttonUrl}}\n			onclick=\"window.location.href='{{.}}'\"\n		{{/buttonUrl}}\n		{{{buttonDataAttrs}}}\n		/>\n\n	{{#isDirectToPayPal}}\n		<div style=\"display: none\">\n			{{> platform/theme/core/shared/commerce/paypal-button}}\n		</div>\n	{{/isDirectToPayPal}}\n	<div style='clear:both'></div>\n	\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-large",[],function(){return"<div class='product-large product'>\n\n	{{#showImage}}\n		<a {{{imageLinkAttrs}}}>\n			<img src='{{imageUrl}}' class='product-image' style='width:{{imageWidth}}' />\n		</a>\n	{{/showImage}}\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showDescription}}\n		<div class='product-description'>\n			{{{descriptionHtml}}}\n		</div>\n	{{/showDescription}}\n\n	{{#showPrice}}\n		<div class='product-large-price'>\n			{{{priceHtml}}}\n			&nbsp;\n		</div>\n	{{/showPrice}}\n\n	<div style='height:24px'>\n		<input\n			class='product-button'\n			type='image'\n			{{#isViewButton}}\n				src='//{{staticDomain}}/editor/images/view_product_big.gif'\n			{{/isViewButton}}\n			{{#isAddToCartButton}}\n				src='//{{staticDomain}}/editor/images/add_to_cart_big.gif'\n			{{/isAddToCartButton}}\n			{{#isBuyNowButton}}\n				src='//{{staticDomain}}/editor/images/buy_now_big.gif'\n			{{/isBuyNowButton}}\n			{{#buttonUrl}}\n				onclick=\"window.location.href='{{.}}'\"\n			{{/buttonUrl}}\n			{{{buttonDataAttrs}}}\n			/>\n	</div>\n\n	{{#isDirectToPayPal}}\n		<div style=\"display: none\">\n			{{> platform/theme/core/shared/commerce/paypal-button}}\n		</div>\n	{{/isDirectToPayPal}}\n\n	<div style='clear:both'></div>\n	\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-long",[],function(){return"<div class='product-long product'>\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showImage}}\n		<a {{{imageLinkAttrs}}}>\n			<img src='{{imageUrl}}' class='product-image' style='width:{{imageWidth}}' />\n		</a>\n	{{/showImage}}\n\n	<div class='product-long-detail'>\n\n		{{#showPrice}}\n			<div class='product-long-price'>\n				{{{priceHtml}}}\n			</div>\n		{{/showPrice}}\n\n		<div style='clear:both'></div>\n\n		<div style='font-size:5px'>&nbsp;</div>\n\n		<div style='height:36px; float:left'>&nbsp;</div>\n\n		<input\n			class='product-button'\n			type='image'\n			{{#isViewButton}}\n				src='//{{staticDomain}}/editor/images/view_product_big.gif'\n			{{/isViewButton}}\n			{{#isAddToCartButton}}\n				src='//{{staticDomain}}/editor/images/add_to_cart_big.gif'\n			{{/isAddToCartButton}}\n			{{#isBuyNowButton}}\n				src='//{{staticDomain}}/editor/images/buy_now_big.gif'\n			{{/isBuyNowButton}}\n			{{#buttonUrl}}\n				onclick=\"window.location.href='{{.}}'\"\n			{{/buttonUrl}}\n			{{{buttonDataAttrs}}}\n			/>\n\n		{{#isDirectToPayPal}}\n			<div style=\"display: none\">\n				{{> platform/theme/core/shared/commerce/paypal-button}}\n			</div>\n		{{/isDirectToPayPal}}\n\n		<div style='clear:both'></div>\n\n	</div>\n\n	{{#showDescription}}\n		<div class='product-description'>\n			{{{descriptionHtml}}}\n		</div>\n	{{/showDescription}}\n\n	<div style='clear:both'></div>\n\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-small",[],function(){return"<div class='product-small product'>\n\n	{{#showImage}}\n		<a {{{imageLinkAttrs}}}>\n			<img src='{{imageUrl}}' class='product-image' style='width:{{imageWidth}}' />\n		</a>\n	{{/showImage}}\n\n	<div class='product-title'>\n		{{title}}\n	</div>\n\n	{{#showDescription}}\n		<div class='product-description'>\n			{{{descriptionHtml}}}\n		</div>\n	{{/showDescription}}\n\n	{{#showPrice}}\n		<div class='product-small-price'>\n			{{{priceHtml}}}\n		</div>\n	{{/showPrice}}\n\n	<input\n		class='product-button'\n		type='image'\n		{{#isViewButton}}\n			src='//{{staticDomain}}/editor/images/view_product_big.gif'\n		{{/isViewButton}}\n		{{#isAddToCartButton}}\n			src='//{{staticDomain}}/editor/images/add_to_cart_big.gif'\n		{{/isAddToCartButton}}\n		{{#isBuyNowButton}}\n			src='//{{staticDomain}}/editor/images/buy_now_big.gif'\n		{{/isBuyNowButton}}\n		{{#buttonUrl}}\n			onclick=\"window.location.href='{{.}}'\"\n		{{/buttonUrl}}\n		{{{buttonDataAttrs}}}\n		/>\n\n	{{#isDirectToPayPal}}\n		<div style=\"display: none\">\n			{{> platform/theme/core/shared/commerce/paypal-button}}\n		</div>\n	{{/isDirectToPayPal}}\n	<div style='clear:both'></div>\n\n</div>\n"}),_wAMD.define("tpl!elements/commerce-product-legacy-price",[],function(){return"\n{{#salePrice}}\n	<div class='product-price'>\n		<span style='text-decoration:line-through; margin-right:8px'>\n			{{{currencyPrefix}}}{{price}}{{{currencySuffix}}}\n		</span>\n		{{{currencyPrefix}}}{{salePrice}}{{{currencySuffix}}}\n	</div>\n{{/salePrice}}\n\n{{^salePrice}}\n	<div class='product-currency' style='float:left'>\n		{{{currencyPrefix}}}\n	</div>\n	<div class='product-price'>\n		{{price}}{{{currencySuffix}}}\n		&nbsp;&nbsp;&nbsp;\n	</div>\n{{/salePrice}}"}),_wAMD.define("commerce/editor/model/EmailCustomMsg",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"EmailCustomMsg"})}),_wAMD.define("commerce/editor/collection/EmailCustomMsg",["underscore","./_baseCommerceCollection","../model/EmailCustomMsg"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"EmailCustomMsg"},{})}),_wAMD.define("commerce/editor/model/PaymentGateway",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"PaymentGateway"})}),_wAMD.define("commerce/editor/collection/PaymentGateway",["underscore","./_baseCommerceCollection","../model/PaymentGateway"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"PaymentGateway"},{})}),_wAMD.define("commerce/editor/model/DefaultTaxRate",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"DefaultTaxRate"})}),_wAMD.define("commerce/editor/model/TaxRate",["backbone-all","./_baseCommerceModel","./DefaultTaxRate"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"TaxRate"})}),_wAMD.define("commerce/editor/collection/TaxRate",["underscore","./_baseCommerceCollection","../model/TaxRate"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"TaxRate"},{})}),_wAMD.define("commerce/editor/collection/DefaultTaxRate",["underscore","./_baseCommerceCollection","../model/DefaultTaxRate"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"DefaultTaxRate"},{})}),_wAMD.define("commerce/editor/model/StorefrontSettings",["backbone-all","./_baseCommerceModel","../collection/EmailCustomMsg","../collection/PaymentGateway","../collection/TaxRate","../collection/DefaultTaxRate"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"StorefrontSettings",getRatioAsNumber:function(e){return this._convertRatioSettingToNumber(this.get(e))},getRatioAsPercent:function(e){return this._convertRatioSettingToPercent(this.get(e))},_convertRatioSettingToNumber:function(e){var t;switch(e){case"w2h3":t=2/3;break;case"w3h2":t=1.5;break;case"w3h4":t=.75;break;case"w4h3":t=4/3;break;default:t=1}return Math.round(100*t)/100},_convertRatioSettingToPercent:function(e){return Math.round(100/this._convertRatioSettingToNumber(e))}})}),_wAMD.define("commerce/editor/build/menu/module",["jquery","editor/app","commerce/editor/collection/Product"],function(e,t,i){t.module("commerce.build",function(n){function o(){var i=Weebly.Commerce.hasCart,n=t.commerce.storefrontSettings,o=n.get("store_mode"),s=n.get("gateway");Weebly.Commerce.hasCart=r&&"buynow"!=o&&s&&-1==e.inArray(s,["None","none"]),i!=Weebly.Commerce.hasCart&&Weebly.Menus&&Weebly.Menus.updateMenu()}function s(){i.count().done(function(e){r=!!e,o()})}var r=!1;t.commerce.on("product:create product:destroy",function(e){e.done(function(){s()})}),n.on("start",function(){t.commerce.storefrontSettings.on("change:store_mode change:gateway",s),s()})})}),_wAMD.define("commerce/editor/build/module",["backbone-all","editor/app","commerce/editor/model/Product","commerce/editor/model/Category","commerce/editor/collection/Category","./menu/module"],function(e,t,i,n,o){t.module("commerce.build",function(s){var r=e.Marionette.AppRouter.extend({appRoutes:{"build/products/:id":"showProduct"}}),a={showProduct:function(e){var t=i.findOrCreate({site_product_id:i.getID(e)});t.fetch().done(function(){goCommercePage(t.get("site_link"))})},showCategory:function(e){var t=new o;t.fetch().done(function(){var i=t.findWhere({site_category_id:n.getID(e)});goCommercePage(i.get("site_link"))})}};t.vent.on({"build:product:view":function(e){l.navigate("store/product/"+i.getID(e)),a.showProduct(e)},"build:category:view":function(e){l.navigate("store/category/"+n.getID(e)),a.showCategory(e)},"build:store:view":function(){a.showCategory({site_category_id:t.commerce.storefrontSettings.get("storefront_category_id")})}});var l=new r({controller:a,appRoutes:{"build/product/:id":"showProduct","build/category/:id":"showCategory"}});s.addInitializer(function(){t.addRegions({})})})}),_wAMD.define("commerce/editor/design/module",["backbone-all","editor/app"],function(e,t){t.module("commerce.design",function(){var i=e.Marionette.AppRouter.extend({appRoutes:{}}),n={};t.vent.on({}),this.addInitializer(function(){t.addRegions({}),new i({controller:n})})})}),_wAMD.define("commerce/editor/pages/module",["editor/app"],function(e){e.module("commerce.pages",function(e,t,i){var n={showPage:function(){}};t.vent.on({"pages:show":function(t){""==t?e.router.navigate("pages"):e.router.navigate("pages/"+t),n.showPage(t)}});var o=i.Marionette.AppRouter.extend({appRoutes:{pages:"showPage","pages/:id":"showPage"}});e.addInitializer(function(){this.router=new o({controller:n})})})}),function(e){var t={"-webkit-transform":"translateZ(0)","-moz-transform":"translateZ(0)","-ms-transform":"translateZ(0)",transform:"translateZ(0)"},i={"-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""};Weebly.SlidingPanel={opened_panels:[],registered_panels:{},selectedTab:!1,isOpening:!1,speed:500,init:function(){var t=Weebly.SlidingPanel;t.resize(),e(window).resize(t.resize),e("#w-editor-top").on("click",".tabs li",function(){function i(){t.selectedTab&&n.attr("id")==t.selectedTab&&(t.hideAllPanels(),"weebly_tab_pages"==n.attr("id")&&Weebly.PageManager.entering())}var n=e(this);Weebly.Commerce?Backbone.preventClose(i):i()})},register:function(e,t){var i=Weebly.SlidingPanel;t=t||{},i.registered_panels[e]=t},resize:function(){var t=Weebly.SlidingPanel,i=e(document.body).width(),n=e(window).width(),o=i-36;1024>=n?(t.getPanels().addClass("narrow"),t.initTooltips()):(t.getPanels().removeClass("narrow"),t.destroyTooltips()),t.getPanels().css({width:o+"px"})},initTooltips:function(){Weebly.SlidingPanel,e(".w-sliding-panel").each(function(){var t=e(this),i=t.attr("id");jQuery("#"+i+' .sliding-panel-menu-inner li i[class^="w-icon-"]').tooltip({placement:"right",container:t})})},destroyTooltips:function(){e('.sliding-panel-menu-inner li i[class^="w-icon-"]').tooltip("destroy")},show:function(n){var o=Weebly.SlidingPanel;if(o.registered_panels[n]){var s=e("#"+n);if(!o.isOpened(n)){o.isOpening=!0,o.hideAllPanels(),o.setOpened(n),o.showBlackout(),s.show().css(t);var r=s.css("right");r.match(/^\-/)&&s.clearQueue().animate({right:"0%"},o.speed,function(){o.registered_panels[n].afterSlideOut&&o.registered_panels[n].afterSlideOut(),s.css(i),o.isOpening=!1}),o.registered_panels[n].onOpen&&o.registered_panels[n].onOpen(),o.registered_panels[n].tab_id&&(o.selectedTab||(o.selectedTab=e("#w-editor-top .tabs .selected").attr("id")),activeTab(o.registered_panels[n].tab_id))}}},hide:function(n){var o=Weebly.SlidingPanel;if(o.registered_panels[n]){var s=e("#"+n);if(o.isOpened(n)&&(o.setClosed(n),o.hideBlackout(),s.css(t),o.registered_panels[n].beforeClose&&o.registered_panels[n].beforeClose(),s.clearQueue().animate({right:"-100%"},o.speed,function(){s.hide().css(i),o.registered_panels[n].afterSlideIn&&o.registered_panels[n].afterSlideIn(),o.registered_panels[n].afterClose&&o.registered_panels[n].afterClose()}),o.registered_panels[n].onClose&&o.registered_panels[n].onClose(),o.selectedTab)){var r=getCurrentSelectedTab();r.attr("id")==o.registered_panels[n].tab_id&&activeTab(o.selectedTab),o.selectedTab=!1}}},hideAllPanels:function(){var e=Weebly.SlidingPanel;_.each(e.opened_panels,function(t){e.hide(t)})},toggle:function(e){var t=Weebly.SlidingPanel;t.registered_panels[e]&&(t.isOpened(e)?t.hide(e):t.show(e),0==Weebly.SlidingPanel.opened_panels.length&&setTimeout(function(){showEvent("x-elements")},600))},getPanels:function(){return e(".w-sliding-panel")},isOpened:function(t){var i=Weebly.SlidingPanel;return-1!==e.inArray(t,i.opened_panels)
},setOpened:function(t){var i=Weebly.SlidingPanel;-1===e.inArray(t,i.opened_panels)&&i.opened_panels.push(t)},setClosed:function(t){var i=Weebly.SlidingPanel,n=e.inArray(t,i.opened_panels);-1!==n&&i.opened_panels.splice(n,1)},showBlackout:function(){var t=Weebly.SlidingPanel;t.hideBlackout();var i=document.body.offsetHeight,n=e(window).height();i=n>i?n:i;var o=e('<div class="weebly-blackout sliding-panel-blackout"></div>');o.css({height:i+"px",zIndex:"12"}).appendTo(document.body),o.click(function(){t.hideAllPanels()})},hideBlackout:function(){e(".sliding-panel-blackout").remove()}}}(Weebly.jQuery),_wAMD.define("legacy/weebly_sliding_panel",function(e){return function(){var t;return t||e.Weebly.SlidingPanel}}(this)),_wAMD.define("commerce/editor/store/nav/NavRegion",["jquery","backbone-all","editor/app"],function(e,t){var i=t.Marionette.Region.extend({className:"store-nav-region",isAnimating:!1,show:function(e,i){var n=this;if(n.isAnimating)return!1;var o=this,s=300;this.ensureEl(),e.isClosed||_.isUndefined(e.$el);var r=e!==this.currentView;if(r&&this.currentView){var a=this.currentView.$el;a.css({position:"relative",left:"0%",width:"100%"}),a.animate({left:"right"==i?"100%":"-100%"},s,function(){o.close(),o.currentView=e})}e.render(),this.currentView?(this.$el.append(e.el),e.$el.css({position:"absolute",left:"right"==i?"-100%":"100%",top:"66px",width:"100%"}),n.isAnimating=!0,e.$el.animate({left:"0%"},s,function(){n.isAnimating=!1,e.$el.css({position:"",left:"",top:"",width:""})})):(this.open(e),this.currentView=e),t.Marionette.triggerMethod.call(this,"show",e),t.Marionette.triggerMethod.call(e,"show")}});return i}),_wAMD.define("tpl!commerce/editor/store/nav/item",[],function(){return'<i class="{{icon_class}}" data-toggle="tooltip" title="{{name}}"></i>\n<span class="menu-name">{{name}}</span>\n{{#subnav}}\n	<i class="w-icon-chevron-right"></i>\n{{/subnav}}\n'}),_wAMD.define("commerce/editor/store/nav/ListItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/nav/item"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({tagName:"li",template:i.compile(o),events:{click:"itemClicked"},initialize:function(){this.model.get("subnav")&&this.$el.addClass("subnav")},itemClicked:function(){var e=this.model.get("clickTrigger");e?n.vent.trigger(e):n.vent.trigger(this.model.get("eventPrefix")+":list")}});return s}),_wAMD.define("commerce/editor/store/nav/ListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/store/nav/ListItemView","legacy/weebly_sliding_panel"],function(e,t,i,n,o,s){var r=new t.Collection([{name:_W.tl("Dashboard"),icon_class:"w-icon-dashboard",eventPrefix:"store:dashboard"}]),a=!1,l=t.Marionette.CompositeView.extend({className:"store-nav-list-view",template:function(){return'<a class="close-x" href="#" onclick="return false;"></a><ul class="commerce-store-nav-items"></ul>'},itemViewContainer:".commerce-store-nav-items",itemView:o,collection:r,initialize:function(){a||(Weebly.Permissions.store_settings&&(r.add({name:_W.tl("Products"),icon_class:"w-icon-product",eventPrefix:"store:product"}),r.add({name:_W.tl("Storefront"),icon_class:"w-icon-storefront",eventPrefix:"store:category",clickTrigger:"store:category:edit:storefront"}),r.add({name:_W.tl("Categories"),icon_class:"w-icon-categories",eventPrefix:"store:category"}),r.add({name:_W.tl("Coupons"),icon_class:"w-icon-coupons",eventPrefix:"store:coupon"})),Weebly.Permissions.store_orders&&r.add({name:_W.tl("Orders"),icon_class:"w-icon-orders",eventPrefix:"store:order"}),Weebly.Permissions.store_settings&&r.add({name:_W.tl("Settings"),icon_class:"w-icon-cog",eventPrefix:"store:setting",subnav:!0}),a=!0),this.listenTo(n.commerce.vent,{all:function(t,i){this.children.each(function(o){if(0===t.search(o.model.get("eventPrefix"))){if("store:category"==o.model.get("eventPrefix")){var s=i&&i.site_category_id&&i.site_category_id==n.commerce.storefrontSettings.get("storefront_category_id"),r="store:category:edit:storefront"==o.model.get("clickTrigger");if(s^r)return}e("#site-store-container .commerce-store-nav-items .selected").removeClass("selected"),o.$el.addClass("selected")}})}})},events:{"click .close-x":"closePanel"},closePanel:function(){s.hide("site-store-container")}});return l}),_wAMD.define("commerce/editor/store/nav/SettingListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/store/nav/ListView"],function(e,t,i,n,o){var s=o.extend({defaultBack:"store:setting:close",className:"store-settings-view",template:function(){return['<a class="settings-back btn-com btn-icon-left">','<i class="w-icon-chevron-left" />',"<span>"+_W.tl("Go Back")+"</span>","</a>",'<ul class="commerce-store-nav-items"></ul>'].join("")},collection:new t.Collection([{name:_W.tl("General"),icon_class:"w-icon-cog",eventPrefix:"store:setting:general"},{name:_W.tl("Checkout"),icon_class:"w-icon-credit-card",eventPrefix:"store:setting:payment"},{name:_W.tl("Display"),icon_class:"w-icon-browser-window",eventPrefix:"store:setting:display"},{name:_W.tl("Shipping"),icon_class:"w-icon-box",eventPrefix:"store:setting:shipping"},{name:_W.tl("Taxes"),icon_class:"w-icon-taxes",eventPrefix:"store:setting:tax"},{name:_W.tl("Emails"),icon_class:"w-icon-email",eventPrefix:"store:setting:emails"},{name:_W.tl("Advanced"),icon_class:"w-icon-html",eventPrefix:"store:setting:advanced"}]),events:{"click .btn-com":"goBack"},initialize:function(e){var t=this;e=e||{},t.backTrigger=e.backTrigger||t.defaultBack,t.listenTo(n.vent,"store:nav:beforeClose",t.reset),o.prototype.initialize.apply(this,arguments)},goBack:function(){var e=this;n.vent.trigger(e.defaultBack),e.defaultBack!==e.backTrigger&&(n.vent.triggerCascade(e.backTrigger),e.reset())},reset:function(){var e=this;e.backTrigger=e.defaultBack}});return s}),_wAMD.define("tpl!components/views/list-detail-layout",[],function(){return'<div class="list-detail-wrapper">\n	<div class="list-detail-container">\n		<div class="sliding-panel-main-region list-detail-region list-detail-list-region">{{! region }}</div>\n		<div class="sliding-panel-main-region list-detail-region list-detail-detail-region">{{! region }}</div>\n	</div>\n</div>\n<div class="list-detail-dialog-region"></div>'}),_wAMD.define("components/views/ListDetailView",["backbone-all","mustache","editor/app","components/regions/Dialog","tpl!components/views/list-detail-layout"],function(e,t,i,n,o){var s,r=e.Marionette.Layout;r.prototype;var a=r.extend({template:t.compile(o),regions:{listRegion:".list-detail-list-region",detailRegion:".list-detail-detail-region",dialogRegion:n.extend({el:".list-detail-dialog-region"})},ui:{container:".list-detail-container",wrapper:".list-detail-wrapper"},actions:["list","edit","add","copy"],transitionSpeed:500,initialize:function(){if(!this.listDetailOptions)throw"list detail options not defined"},onRender:function(){},prefixEvent:function(e){return"store:"+this.listDetailOptions.eventModelName+":"+e},listClosed:function(){return!this.listRegion.currentView||this.listRegion.currentView.isClosed},list:function(){var t=this;e.preventClose(function(){t.listClosed()&&t.listRegion.show(new t.listDetailOptions.ListView),Modernizr.csstransitions?t.ui.container.css({left:"0"}):t.ui.container.animate({left:0},t.transitionSpeed),clearTimeout(s),s=setTimeout(function(){t.detailRegion.close()},t.transitionSpeed)})},edit:function(t){var i=this;t=t||{},e.preventClose(function(){if(!i.isClosed){t._class&&(t={model:t});var e=new i.listDetailOptions.DetailView(t);i.detailRegion.show(e),i.ui.wrapper[0].scrollTop=0,Modernizr.csstransitions?(i.listClosed()&&i.ui.container.addClass("no-transition"),i.ui.container.css({left:"-100%"}),i.ui.container[0].offsetHeight,i.ui.container.removeClass("no-transition")):i.listClosed()?i.ui.container.css({left:"-100%"}):i.ui.container.animate({left:"-100%"},i.transitionSpeed)}})},add:function(e){this.edit(e)},copy:function(e){e._class&&(e={copy:e}),this.add(e)}});return a}),_wAMD.define("tpl!commerce/editor/store/category/list/info",[],function(){return'<div class="actions">\n	<div class="menu">\n		{{>ui/hover-toolbar}}\n	</div>\n</div>\n\n<div class="product-info">\n	<span class="product-count">\n		{{product_count}}\n	</span>\n</div>\n\n<div class="category-info">\n	<i class="sort-handle w-icon-hamburger"></i>\n	<span class="thumbnail-sizer">{{{thumbnail}}}</span>\n	<span class="name">{{name}}</span>\n</div>\n'}),_wAMD.define("tpl!ui/hover-toolbar",[],function(){return'<div class="hover-toolbar hover-toolbar-above">\n	<div class="hover-toolbar-arrow hover-toolbar-arrow-border"></div>\n	<div class="hover-toolbar-arrow" style="left: 126px;"></div>\n	<div class="hover-toolbar-inner">\n		<div class="hover-toolbar-inner2">\n			<div class="hover-toolbar-inner3 w-ui">\n				<ul id="other-actions-dropdown" class="dropdown-content">\n					{{#hoverToolbarActions}}\n						<li>\n							<a class="{{name}}">\n								<span class="icon {{icon}}"></span>\n								{{title}}\n							</a>\n						</li>\n					{{/hoverToolbarActions}}\n				</ul>\n			</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/category/list/CategoryListItemView",["jquery","backbone-all","editor/app","tpl!commerce/editor/store/category/list/info","tpl!ui/hover-toolbar"],function(e,t,i,n,o){Mustache.compilePartial("ui/hover-toolbar",o);var s=t.Marionette.ItemView.extend({template:Mustache.compile(n),className:"category-list-item-view",ui:{menu:".hover-toolbar"},modelEvents:{change:"render"},events:{click:"edit","click .menu .edit":"edit","click .menu .add-sub":"addSubCategory","click .menu .delete":"delete","click .menu":"toggleMenu",mouseleave:"hideMenu"},templateHelpers:function(){var e=this;return{hoverToolbarActions:[{name:"edit",title:_W.tl("Edit Category"),icon:"w-icon-edit"},{name:"add-sub",title:_W.tl("Add Sub Category"),icon:"w-icon-plus"},{name:"delete",title:_W.tl("Delete Category"),icon:"w-icon-delete"}],thumbnail:function(){return e.model.thumbnail(80)}}},toggleMenu:function(e){e.stopPropagation(),this.ui.menu.toggle()},hideMenu:function(){this.ui.menu.hide()},edit:function(){i.commerce.vent.trigger("store:category:edit",this.model)},addSubCategory:function(){i.commerce.vent.trigger("store:category:add",{parent:this.model})},"delete":function(){i.commerce.vent.trigger("store:category:delete",this.model)}});return s}),_wAMD.define("tpl!commerce/editor/store/category/list/view",[],function(){return'<div class="title-bar">\n	<div class="buttons">\n		<button class="btn-com btn-info btn-large btn-icon-left btn-add-category">\n			<span class="w-icon-plus"></span>\n			{{#tl}}Add Category{{/tl}}\n		</button>\n	</div>\n\n	<h1>{{#tl}}Categories{{/tl}}</h1>\n</div>\n\n<div class="category-list-header">\n	<div class="category-info">{{#tl}}Title{{/tl}}</div>\n	<div class="product-info">{{#tl}}Products{{/tl}}</div>\n</div>\n\n<div class="category-list">\n	{{#isLoading}}\n		{{>commerce/editor/store/category/list/loading}}\n	{{/isLoading}}\n	{{^isLoading}}\n		{{#isEmpty}}\n			{{>commerce/editor/store/category/list/empty}}\n		{{/isEmpty}}\n		{{^isEmpty}}\n			{{>commerce/editor/store/category/list/list}}\n		{{/isEmpty}}\n	{{/isLoading}}\n</div>\n'}),_wAMD.define("tpl!commerce/editor/store/category/list/empty",[],function(){return'<ul>\n	<li class="category">\n		<div class="info list-empty">{{#tl}}You currently don\'t have any categories.{{/tl}}</div>\n	</li>\n</ul>\n'}),_wAMD.define("tpl!commerce/editor/store/category/list/list",[],function(){return"<ul>\n	{{#categories}}\n		{{>commerce/editor/store/category/list/item}}\n	{{/categories}}\n</ul>"}),_wAMD.define("tpl!commerce/editor/store/category/list/item",[],function(){return'<li data-id="{{id}}" class="category">\n	<div class="info"></div>\n	{{>commerce/editor/store/category/list/list}}\n</li>'}),_wAMD.define("tpl!commerce/editor/store/category/list/loading",[],function(){return'<ul>\n	<li class="category">\n		<div class="info">\n			<span class="text-loading-animation">{{#tl}}Loading categories{{/tl}}</span>\n		</div>\n	</li>\n</ul>\n'}),_wAMD.define("components/nested-sortable/nested-sortable",["jquery","jquery-ui/draggable"],function(e){var t=function(e,t){this.element=e,this.options=t,this.init()};t.prototype={init:function(){this.$element=e(this.element),this.reset()},reset:function(){this.items=this.$element.find("li").children("ul,ol").add(this.$element).children("li");try{this.items.draggable("destroy")}catch(t){}var i={addClasses:!1,appendTo:this.$element,cursor:"move",distance:this.options.distance,opacity:this.options.opacity,helper:"clone",scroll:!0},n=this;e(["start","stop","drag"]).each(function(e,t){i[t]=function(e,i){n[t](i,this)}}),this.items.draggable(i)},removeItem:function(t){var i=e(t),n=function(t){e(t).children("ul,ol").children().each(function(){i=i.add(this),n(this)})};n(t),this.items=this.items.not(i),i.draggable("destroy"),t.remove()},destroy:function(){this.items.draggable("destroy")},start:function(t,i){this.item=i,this.$item=e(i),this.helper=t.helper,this.$item.addClass(this.options.activeClass),t.helper.addClass(this.options.dragClass),t.helper.removeClass("ui-draggable-dragging"),this.options.onStart&&this.options.onStart.call(this.element,this.item,t),this.update(),t.helper.css("transition","width 0.5s")},stop:function(e){this.options.onStop&&this.options.onStop.call(this.element,this.item,e),this.$item.removeClass(this.options.activeClass),this.helper.removeClass(this.options.dragClass)},drag:function(t){var i=!1,n=this.measurements,o=t.offset.top+n.middleOffset;e.each(this.tops,function(e,t){t.offset<o&&(i=t.item)}),(i==this.item||e.contains(this.item,i))&&(i=!1);var s=!0;i&&e(i).offset().top<n.top?e(i).before(this.item):i?e(i).children("ul,ol").prepend(this.item):n.canIndent&&t.offset.left>n.left+n.indent/2?this.$item.prev().children("ul,ol").append(this.item):n.canOutdent&&t.offset.left<n.left-n.outdent/2?this.$item.parent().parent().after(this.item):s=!1,s&&(this.update(),this.options.onSort&&this.options.onSort.call(this.element,this.item,t))},update:function(){var t=this;this.helper.width(this.$item.width()),this.tops=[],this.items.each(function(i,n){t.tops.push({item:n,offset:e(n).offset().top})}),this.tops.sort(function(e,t){return e.offset-t.offset});var i=!this.$item.children("ul,ol").children().length;if(i)var n=e("<li/>").appendTo(this.$item.children("ul,ol"));var o=this.$item.offset();nonListHeight=0,this.$item.children(":not(ul,ol)").each(function(){nonListHeight+=e(this).outerHeight()}),this.measurements={top:o.top,left:o.left,middleOffset:(this.$item.outerHeight()-nonListHeight)/2,indent:this.$item.children("ul,ol").children().offset().left-o.left,outdent:o.left-this.$item.parent().offset().left,canIndent:!!this.$item.prev().length,canOutdent:!this.$item.next().length&&this.$item.parent().get(0)!=this.element},i&&n.remove()},serialize:function(){var t=this.options,i=function(n){var o=[];return n.children().each(function(n,s){s=e(s),s.hasClass(t.dragClass)||o.push({id:s.attr(t.attribute)||"",children:i(s.children("ul,ol"))})}),o};return i(this.$element)}},e.fn.nestedSortable=function(){var i=Array.prototype.slice.call(arguments,0),n=i.shift(),o=this;return this.each(function(){var s=e(this),r=s.data("nestedSortable"),a=e.extend(!0,{},e.fn.nestedSortable.defaults,"object"==typeof n&&n);if(r||s.data("nestedSortable",r=new t(this,a)),"string"==typeof n){var l=r[n](i[0]);"undefined"!=typeof l&&(o=l)}}),o},e.fn.nestedSortable.defaults={attribute:"data-id",activeClass:"active",dragClass:"dragging",distance:10,opacity:.5,onStart:!1,onSort:!1,onStop:!1}}),_wAMD.define("commerce/editor/store/category/list/CategoryListView",["jquery","underscore","backbone-all","editor/app","commerce/editor/model/_baseCommerceModel","commerce/editor/model/Category","commerce/editor/model/CategoryHierarchy","commerce/editor/collection/Category","./CategoryListItemView","tpl!commerce/editor/store/category/list/view","tpl!commerce/editor/store/category/list/empty","tpl!commerce/editor/store/category/list/list","tpl!commerce/editor/store/category/list/item","tpl!commerce/editor/store/category/list/loading","components/nested-sortable/nested-sortable"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p){Mustache.compilePartial("commerce/editor/store/category/list/list",d),Mustache.compilePartial("commerce/editor/store/category/list/item",h),Mustache.compilePartial("commerce/editor/store/category/list/loading",p),Mustache.compilePartial("commerce/editor/store/category/list/empty",u);var f=i.Marionette.ItemView.extend({template:Mustache.compile(c),className:"category-list-view",templateHelpers:function(){var e=this;return{isEmpty:function(){return e.collection.length<=1},isLoading:function(){return e.loading},categories:function(){return this.children||this.hierarchy&&this.hierarchy[0].children}}},ui:{categories:".category-list > ul"},initialize:function(){var t=this;t.loading=!0;var i=t.model=r.findOrCreate(),n=t.collection=new a([],{state:{pageSize:1e3}});e.when(i.fetch(),n.fetch()).done(function(){t.loading=!1,t.render()}),t.listenTo(o.vent,"create:category",t.close)},onRender:function(){var e=this,i=(e.model,e.collection);e.loading||(e.ui.categories.nestedSortable({opacity:1,onStop:t.bind(e.save,e)}),i.each(function(t){var i=e.$("[data-id="+t.get("site_category_id")+"]");if(i.length){var o=new l({el:i.find("> .info"),model:t});o.render(),n.commerce.vent.on("store:category:delete:confirmed",function(t){e.deleteCategory(t)}),o.listenTo(e,"close",function(){o.close()})}}))},deleteCategory:function(t){var i=this,n=i.$("[data-id="+t.get("site_category_id")+"]"),o=i.model,s=i.collection;i.bindUIElements(),n.slideUp(400,function(){var r=function(t){var i=e(t);i.children("ul,ol").children("li").each(function(){r(this)});var n=i.attr("data-id"),o=s.findWhere({site_category_id:n});o&&o.destroy()};r(n),o.removeCategory(t),o.save(),i.ui.categories.nestedSortable("removeItem",n),i.ui.categories.nestedSortable("reset")})},save:function(){var e=this.ui.categories.nestedSortable("serialize"),t=this.model,i=t.get("hierarchy")[0];t.set("hierarchy",[{id:i.id,children:e}]),t.save()},events:{"click .btn-add-category":"addCategory"},addCategory:function(){n.commerce.vent.trigger("store:category:add")}});return f}),_wAMD.define("commerce/editor/components/chooser/ProductChooser",["jquery","editor/app","commerce/editor/collection/Product","components/chooser/Chooser"],function(e,t,i,n){var o=n.extend({initialize:function(t){t.chooser={foreignKey:"products",fullCollection:i,orderIdsKey:"preferred_order_product_ids",searchEnabled:!0,attrs:{id:"site_product_id",visible:"published",relation:t.reverseRelationKey},text:e.extend({list:_W.tl("Products"),select:_W.tl("Select Products"),create:_W.tl("Add a product"),noneChosen:_W.tl("No products chosen."),noneFound:_W.tl("No products found."),hidden:_W.tl("Product Hidden")},t.text||{})},n.prototype.initialize.apply(this,arguments)},createModel:function(){t.vent.triggerCascade("store:product:add")}});return o}),function(e){function t(t){return e(t).each(function(t,i){var n=e(i),o=n.data("wLoadButton.opt");o&&n.addClass(o.loadingClass),n.attr({disabled:"disabled"})})}function i(t){return e(t).each(function(t,i){var n=e(i),o=n.data("wLoadButton.opt")||{timeout:0};setTimeout(function(){n.removeAttr("disabled"),o&&(o.loadingClass&&n.removeClass(o.loadingClass),o.successIconClass&&n.find(o.successIconClass).show(),o.startClass&&n.removeClass(o.startClass),o.endText&&n.find(".text").text(o.endText))},o.timeout)})}function n(t){return e(t).each(function(t,i){var n=e(i),o=n.data("wLoadButton.opt"),s=n.data("wLoadButton.original");n.removeAttr("disabled"),o&&o.successIconClass&&n.find(o.successIconClass).hide(),s&&(s.hasStartClass&&n.addClass(o.startClass),s.text&&n.find(".text").text(s.text))})}"undefined"==typeof e.fn.wLoadButton&&(e.fn.wLoadButton=function(o){var s=this;if("startWait"==o)return t(s);if("endWait"==o)return i(s);if("reset"==o)return n(s);var r;return o=e.extend({},e.fn.wLoadButton.defaults,o),this.each(function(t,i){$el=e(i),$el.data("wLoadButton.opt",o),($el.hasClass("btn")||$el.hasClass("btn-com")||$el.hasClass("btn-flat"))&&($el.data("wLoadButton.original",{text:$el.find(".text").text(),hasStartClass:$el.hasClass(o.startClass)}),$el.find(o.successIconClass).hide(),0==$el.find("."+o.indicatorClass).length&&(r=e("<span></span>").addClass(o.indicatorClass),$el.append(r)))})},e.fn.wLoadButton.defaults={loadingClass:"btn-loading",indicatorClass:"spinner",successIconClass:".icon",startClass:"btn-success",timeout:0,endText:!1})}(window.Weebly&&window.Weebly.jQuery||window.jQuery),_wAMD.define("util/ui/wLoadButton",function(){}),_wAMD.define("tpl!commerce/editor/store/category/detail/meta",[],function(){return'<div class="row section">\n	<label class="label" for="editor_commerce_category_name">{{#tl}}Category Name{{/tl}}</label>\n	<br>\n	<input id="editor_commerce_category_name" type="text" name="name" value="{{name}}" placeholder="{{#esc_attr}}{{#tl}}Name of Category{{/tl}}{{/esc_attr}}">\n</div>'}),_wAMD.define("commerce/editor/store/category/detail/meta/CategoryDetailMetaView",["backbone-all","mustache","tpl!commerce/editor/store/category/detail/meta"],function(e,t,i){var n=e.Marionette.ItemView.extend({className:"category-meta-view scaffold-com",template:t.compile(i),events:{"change input":"change"},initialize:function(e){this.options=e},onShow:function(){var e=this;e.options.showAnimated.done(function(t){if(!e.isClosed){var i=t?Weebly.SlidingPanel.speed+10:0;setTimeout(function(){e.$("input, textarea").first().focus()},i)}})},change:function(e){var t,i=e.target.name,n=this.$(e.target);switch(i){case"name":t=n.val(),this.model.set(i,t)}}});return n});var SWFUpload;void 0==SWFUpload&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 Beta 2",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=void 0==this.settings[e]?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+"?swfuploadrnd="+Math.floor(999999999*Math.random())),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){""!==this.settings.button_placeholder_id?this.replaceWithFlash():this.appendFlash()},SWFUpload.prototype.appendFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(e=document.getElementsByTagName("body")[0],void 0==e)throw"Could not find the 'body' element.";t=document.createElement("div"),t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",e.appendChild(t),t.innerHTML=this.getFlashHTML()},SWFUpload.prototype.replaceWithFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(e=document.getElementById(this.settings.button_placeholder_id),void 0==e)throw"Could not find the placeholder element.";t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e)},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i.toString())+"="+encodeURIComponent(e[i].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.stopUpload();var e=null;try{e=this.getMovieElement()}catch(t){}if(void 0!=e&&void 0!=e.parentNode&&"function"==typeof e.parentNode.removeChild){var i=e.parentNode;void 0!=i&&(i.removeChild(e),void 0!=i.parentNode&&"function"==typeof i.parentNode.removeChild&&i.parentNode.removeChild(i))}return SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],delete this.movieElement,delete this.settings,delete this.customSettings,delete this.eventQueue,delete this.movieName,delete window[this.movieName],!0}catch(n){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))
},SWFUpload.prototype.addSetting=function(e,t,i){return this.settings[e]=void 0==t?i:t},SWFUpload.prototype.getSetting=function(e){return void 0!=this.settings[e]?this.settings[e]:""},SWFUpload.prototype.callFlash=function(e,t){t=t||[];var i,n=this.getMovieElement();if("function"==typeof n[e]){if(0===t.length)i=n[e]();else if(1===t.length)i=n[e](t[0]);else if(2===t.length)i=n[e](t[0],t[1]);else{if(3!==t.length)throw"Too many arguments";i=n[e](t[0],t[1],t[2])}return void 0!=i&&"object"==typeof i.post&&(i=this.unescapeFilePostParams(i)),i}throw"Invalid function name: "+e},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return"number"==typeof e?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,i){return this.callFlash("AddFileParam",[e,t,i])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){"string"==typeof e&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){void 0==e&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var i=this.getMovieElement();void 0!=i&&(i.style.width=e+"px",i.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){void 0==t?t=[]:t instanceof Array||(t=[t]);var i=this;if("function"==typeof this.settings[e])this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){i.executeNextEvent()},0);else if(null!==this.settings[e])throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;"function"==typeof e&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t,i=/[$]([0-9a-f]{4})/i,n={};if(void 0!=e){for(var o in e.post)if(e.post.hasOwnProperty(o)){t=o;for(var s;null!==(s=i.exec(t));)t=t.replace(s[0],String.fromCharCode(parseInt("0x"+s[1],16)));n[t]=e.post[o]}e.post=n}return e},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();if("function"!=typeof e.StartUpload)throw"ExternalInterface methods failed to initialize.";void 0==window[this.movieName]&&(window[this.movieName]=e),this.queueEvent("swfupload_loaded_handler")},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,i])},SWFUpload.prototype.fileDialogComplete=function(e,t){this.queueEvent("file_dialog_complete_handler",[e,t])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if("function"==typeof this.settings.upload_start_handler)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===t&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,i])},SWFUpload.prototype.uploadError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,i])},SWFUpload.prototype.uploadSuccess=function(e,t){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,i=[];if("object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message){for(var n in e)e.hasOwnProperty(n)&&i.push(n+": "+e[n]);t=i.join("\n")||"",i=t.split("\n"),t="EXCEPTION: "+i.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,i;try{t=document.getElementById("SWFUpload_Console"),t||(i=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(i),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",i.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(n){alert("Exception: "+n.name+" Message: "+n.message)}},_wAMD.define("legacy/swfupload/swfupload",function(e){return function(){var t;return t||e.SWFUpload}}(this)),Weebly.ProgressBar=function(e){function t(t){var i=parseInt(t);e.percent=i,o.style.width=i+"%"}function i(){return n=document.createElement("div"),n.className="upload-meter",e.id&&(n.id=e.id),o=document.createElement("span"),o.className="upload-meter-progress",o.style.width=e.percent+"%",n.appendChild(o),n}var n,o,s={width:"100%",percent:0,id:null},e=e||{};return e=_.extend(s,e),{el:function(){return n},render:function(){return i()},progress:function(e){t(e)}}},_wAMD.define("legacy/weebly_progress_bar",function(e){return function(){var t;return t||e.Weebly.ProgressBar}}(this)),Weebly.Hellos=function(e){function t(e){return e=_.extend(_.clone(u),e),e.id||(e.id="hello_"+Math.floor(10000001*Math.random())),e.now===!0&&(d=[]),d.push(e),d.length&&(i(),h=!1),e.id}function i(){var t;h||(h=!0,t=d.shift(),t?(n(t),c=setTimeout(function(){h=!1,r(),setTimeout(i,e.delay+e.fadeout+200)},t.duration)):h=!1)}function n(t){var i,n,o,s,r=t.icon||e.icon;document.getElementById("hellos")?(n=document.getElementById("hellos"),n.innerHTML=""):(n=document.createElement("div"),n.id="hellos"),n.setAttribute("data-id",t.id),n.style.zIndex=t.zIndex||e.zIndex,i=document.createElement("div"),i.className="content",n.className="",void 0!==r&&(n.className="icon-dialog "+r),n.className+=" w-upload-dialog w-ui",o=document.createElement("span"),o.className="title",jQuery(o).empty().append(t.title),i.appendChild(o),s=document.createElement("div"),s.className="messages",jQuery(s).empty().append(t.body),r&&(icon=document.createElement("span"),icon.className=r,icon.className+=" icon w-icon-comment",n.appendChild(icon)),i.appendChild(s),n.appendChild(i),document.getElementById("hellos")?jQuery("#hellos").show():document.getElementsByTagName("body")[0].appendChild(n)}function o(e){e="undefined"!=typeof e?e:!1,clearInterval(c),h=!1,r(e)}function s(){d=[],o()}function r(){var e=jQuery("#hellos");e&&e.fadeOut(1e3)}function a(){return d.length>0?(clearInterval(c),h=!1,i(),!0):!1}function l(e){var t=document.getElementById("hellos");if(e=e.toString(),t&&t.getAttribute("data-id")===e)return o(),i(),!0;for(var n=0;n<d.length;n++)if(d[n].id===e)return d.splice(n,1),!0;return!1}var c,u={duration:5e3,delay:500,fadeout:250,icon:void 0,zIndex:9998},d=[],h=!1;return e=e||{},e=_.extend(u,e),{say:function(e){return e&&e.title&&e.body?t(e):-1},clearAll:function(){return s(),this},clear:function(e){return o(e)},next:function(){return a(),this},remove:function(e){return l(e)}}},_wAMD.define("legacy/weebly_hellos",function(e){return function(){var t;return t||e.Weebly.Hellos}}(this)),Weebly.AjaxUploader=function(e){function t(e){return _.extend(_.clone(c),e)}function i(t){var i=new FormData,n=_.extend(_.clone(e.parameters),t);for(var o in n)i.append(o,n[o]);return i}function n(t){r=new XMLHttpRequest,r.upload.addEventListener("progress",e.progress,!1),r.addEventListener("abort",e.abort,!1),r.addEventListener("error",e.error,!1),r.addEventListener("load",function(t){l--,s(),e.load(t)},!1),r.addEventListener("loadstart",e.loadstart,!1),r.open(e.method,e.action),r.onreadystatechange=function(){4==r.readyState&&(200==r.status&&"function"==typeof e.success?e.success(r):403==r.status&&"function"==typeof e.error&&e.error(r))},r.send(t)}function o(e){var t;if("[object Array]"!==Object.prototype.toString.call(e))t=i(e),a.push(t);else for(var n=0;n<e.length;n++)t=i(e[n]),a.push(t);s()}function s(){a.length>0&&0===l&&(l++,n(a.shift()))}var r,a=[],l=0,c={parameters:{},method:"POST",action:"",abort:function(){},error:function(){},load:function(){},loadstart:function(){},progress:function(e){return e.lengthComputable?parseInt(100*(e.loaded/e.total)):void 0}};return e=e||{},e=t(e),{setParameters:function(e){return t(e),this},send:function(e){return o(e),this},abort:function(){r.abort()}}},_wAMD.define("legacy/weebly_uploader_ajax",function(e){return function(){var t;return t||e.Weebly.AjaxUploader}}(this)),Weebly.AjaxUploaderProgress=function(e){function t(){var e,t;return e=document.createElement("div"),t=document.createElement("a"),t.href="#",t.className="btn btn-danger abort",t.innerHTML=_W.tl("Cancel"),t.addEventListener("click",function(){o.abort()},!1),progress=document.createElement("span"),progress.className="upload-status",progress.innerHTML=u+" / "+c.length,e.appendChild(a.render()),e.appendChild(progress),e.appendChild(t),e}function i(e){if(e instanceof Array){c.push.apply(c,e);for(var t=0;t<e.length;t++)o.send(e[t])}else c.push(e),o.send(e)}function n(e,t){"function"==typeof e&&e(t)}var o,s,r,a,l={action:"",parameters:{}},c=[],u=0;return e=e||{},e=_.extend(_.clone(l),e),a=new Weebly.ProgressBar,r=new Weebly.Hellos,s=0,o=new Weebly.AjaxUploader({action:e.action,parameters:e.parameters,abort:function(t){n(e.abort,t),r.clearAll(),updateList(currentPage)},error:function(t){"function"==typeof e.error?e.error.apply(this,arguments):errFunc(t)},progress:function(t){if(n(e.progress,t),t.lengthComputable){var i=t.loaded/t.total;a.progress(1e4*((i+u)/(c.length?100*c.length:1)))}},load:function(i){n(e.load,i),c.length>++u?r.next():(s=r.say({title:_W.tl("Upload Complete"),body:t(),duration:500,now:!0}),setTimeout(function(){},500),xhrUploading=null)},loadstart:function(i){n(e.loadstart,i),s=r.say({title:_W.tl("Uploading"),body:t(),duration:9999999})},success:function(t){n(e.success,t)}}),{setParameters:function(e){return o.setParameters(e),this},send:function(e){return i(e),this}}},_wAMD.define("legacy/weebly_uploader_ajax_progress",["legacy/weebly_progress_bar","legacy/weebly_hellos","legacy/weebly_uploader_ajax"],function(e){return function(){var t;return t||e.Weebly.AjaxUploaderProgress}}(this)),_wAMD.define("tpl!components/uploader-view/uploader",[],function(){return'<input class="w-upload-input" type="file" name="files[]" {{#multiple}}multiple{{/multiple}} {{#accept}}accept="{{accept}}"{{/accept}} />\n'}),_wAMD.define("tpl!components/uploader-view/progress-bar",[],function(){return'{{! Template is a list item to be compatible with old notifications container }}\n<li id="uploader-view-progress" class="w-ui w-upload-dialog">\n	<div class="content">\n		<span class="title">{{title}}</span> \n		<div class="messages"> \n			<div class="upload-meter"> \n				<span id="uploader-view-progress-bar" class="upload-meter-progress"></span> \n			</div> \n			<span id="uploader-view-container" class="upload-status"></span> \n			<a href="#" class="btn btn-danger abort"> \n				{{#tl}}Cancel{{/tl}}\n			</a> \n		</div> \n	</div>\n</li>\n'}),_wAMD.define("components/uploader-view/UploaderView",["jquery","underscore","backbone","mustache","legacy/swfupload/swfupload","legacy/weebly_uploader_ajax_progress","tpl!components/uploader-view/uploader","tpl!components/uploader-view/progress-bar"],function(e,t,i,n,o,s,r,a){function l(){this.onUploadLoadstart.apply(this,arguments)}function c(){if(g===!1){var t=n.compile(a),i=e("#notifications");0===i.length&&(i=e(document.createElement("ul")).attr("id","notifications"),e(body).append(i)),g=e(t({title:_W.tl("Uploading File")})),i.append(g)}g.show()}function u(t,i){var n={};"XMLHttpRequest"===Object.prototype.toString.call(t).match(/^\[object (.*)\]$/)[1]?n=t.response:/^SWFUpload/.test(t.id)===!0&&(n=i),this.onUploadSuccess(e.parseJSON(n))}function d(e,t,i){var n;n=/^SWFUpload/.test(e.id)===!0?{file:e,code:t,message:i}:e,this.onUploadError(n)}function h(){var t=this.swfu.getStats();if(t&&t.files_queued>0){this.swfu.startUpload();var i=g.find("#uploader-view-progress-bar").addClass("reset").css("width",0);setTimeout(function(){i.removeClass("reset")},10)}else e("#"+this.swfuId+"-container").hide(),g.fadeOut(1e3,function(){g.find("#uploader-view-progress-bar").css("width",0)}),this.onSWFUploadComplete.apply(this,arguments),this.onUploadComplete.apply(this,arguments)}function p(e,t,i){var n=Math.min(Math.ceil(100*(t/i)),100);g.find("#uploader-view-progress-bar").css("width",n+"%")}function f(e,t,i){t==o.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT&&alert(i)}var m=i.Marionette.ItemView.extend({events:{"drop.uploader-view":"onDrop","dragover.uploader-view":"onDragover","dragleave.uploader-view":"onDragleave","change.uploader-view .w-upload-input":"onChangeFile"},browser:{},_uploadOpts:{target:".w-upload-target",url:"/weebly/fileUpload.php",forceSWFU:!1,type:"all",params:{}},_mimeTypes:{all:{regex:/./,types:"*.*",description:"All files..."},image:{regex:/(?:png|jpg|jpeg|gif)$/,types:"*.gif;*.GIF;*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.bmp;*.BMP",description:"Image files...",accept:"image/*"},zip:{regex:/(?:zip)$/,types:"*.zip;*.ZIP",description:"Zip files..."},audio:{regex:/^(?:audio\/)/,types:"*.mp3;*.MP3",description:"MP3 files...",accept:"audio/*"},video:{regex:/^(?:video\/)/,types:"*.*",description:"Video files...",accept:"video/*"},flash:{regex:/x-shockwave-flash/,types:"*.swf;*.SWF",description:"SWF files..."}},initialize:function(e){return e=e||{},this.uploadOpts=t.extend({},this._uploadOpts,e.uploadOptions),this.options=e,i.Marionette.ItemView.prototype.initialize.apply(this,arguments)},onRender:function(){if(!this.uploadOpts.forceSWFU&&this.browser.xhr){var e=this.$el.find(this.uploadOpts.target);if(!e.length)throw"UploaderView - target not found: "+this.uploadOptions.target;if("button"===e[0].nodeName.toLowerCase())throw"UploaderView - a button cannot be used as target, Firefox does not support this";var t=this._mimeTypes[this.uploadOpts.type.toLowerCase()].accept,i=n.render(r,{multiple:this.uploadOpts.multipleFiles,accept:t});e.addClass("w-upload-button").append(i)}},onShow:function(){if(this.uploadOpts.forceSWFU||!this.browser.xhr){var e=this;setTimeout(function(){e.initializeSWFU()},500)}},remove:function(){return this.swfu&&this.swfu.destroy(),i.Marionette.ItemView.prototype.remove.apply(this,arguments)},setPostParameters:function(e){this.uploadOpts.params=e},initializeSWFU:function(){var i=this._mimeTypes[this.uploadOpts.type.toLowerCase()],n=this.$el.find(this.uploadOpts.target),s="w-upload-target-"+Math.floor(1e5*Math.random()),r=this.uploadOpts.maxFileSize?this.uploadOpts.maxFileSize:maxFileSize;if(0===n.length)throw"UploaderView - target not found: "+this.uploadOpts.target;this.swfuId=s,this.$el.append(['<div id="'+s+'-container" class="swfu-container">','<div id="'+s+'"></div>',"</div>"].join("")),this.swfu=new o({upload_url:this.uploadOpts.url,flash_url:"/weebly/libraries/swfupload/swfupload.swf",file_size_limit:r,file_types:i.types,file_types_description:i.description,button_placeholder_id:s,button_width:600,button_height:600,button_window_mode:o.WINDOW_MODE.TRANSPARENT,button_cursor:o.CURSOR.HAND,file_dialog_complete_handler:t.bind(this.startSWFUpload,this),upload_start_handler:t.bind(c,this),upload_success_handler:t.bind(u,this),upload_error_handler:t.bind(d,this),upload_complete_handler:t.bind(h,this),upload_progress_handler:t.bind(p,this),file_queue_error_handler:t.bind(f,this)}),n.on("mouseover",function(){var t=e(this),i=t.outerWidth(),n=t.outerHeight(),o=t.position();e("#"+s+"-container").show().css({height:n,width:i,left:o.left,top:o.top,zIndex:1})})},startSWFUpload:function(){this.swfu.setPostParams(this.uploadOpts.params),this.swfu.startUpload()},onChangeFile:function(t){var i=t.target.files,o=this._mimeTypes[this.uploadOpts.type.toLowerCase()].accept;newUploader=n.render(r,{multiple:this.uploadOpts.multipleFiles,accept:o}),this.upload(i),e(t.target).replaceWith(newUploader)},onDragleave:function(e){e.preventDefault(),e.stopPropagation(),this.$el.removeClass("upload-view-drag")},onDragover:function(e){var i,n=e.originalEvent,o=t.result(n,"dataTransfer");n&&o&&(i=-1!==t.indexOf(["move","linkMove"],o.effectAllowed),o.dropEffect=i?"move":"copy",this.$el.addClass("upload-view-drag"),e.preventDefault(),e.stopPropagation())},onDrop:function(e){var t=e.originalEvent.dataTransfer.files;e.preventDefault(),e.stopPropagation(),this.$el.removeClass("upload-view-drag"),this.upload(t)},upload:function(e){if(this.uploadOpts.multipleFiles||!(e.length>1)){for(var t=new s({parameters:this.uploadOpts.params,action:this.uploadOpts.url,error:d.bind(this),success:u.bind(this),loadstart:l.bind(this)}),i=[],n=this._mimeTypes[this.uploadOpts.type.toLowerCase()],o=0;o<e.length;o++)e[o].type.match(n.accept)&&(!e[o].size>this.uploadOpts.maxFileSize||i.push({Filedata:e[o],Filename:e[o].name}));t.send(i)}},onUploadLoadstart:function(){},onUploadSuccess:function(){},onUploadError:function(){},onUploadComplete:function(){},onSWFUploadComplete:function(){}}),g=!1;return m.extend=function(e){var n=i.Marionette.ItemView.extend.apply(this,arguments),o=t.result(e,"events")||e.events;return n.prototype.events=t.extend({},this.prototype.events,o),n},m.prototype.browser.xhr=(new XMLHttpRequest).upload?!0:!1,m.prototype.browser.fileReader=!!window.FileReader,m}),_wAMD.define("tpl!components/image-collector/abstract-image-collector-view",[],function(){return'{{! Abstract ImageCollector View }}\n\n<div class="image-collector-header">\n	<div class="image-collector-title"><label class="label">{{title}}</label></div>\n	{{^single}}\n		<div class="image-collector-add-images w-image-upload-target">\n			<span class="w-icon-plus"></span>\n			{{#tl}}Add Images{{/tl}}\n		</div>\n	{{/single}}\n</div>\n<div class="image-collector-body w-massless-scroll">\n	<div class="image-collector-container">\n		<div class="image-collector-empty-outer">\n			<div class="image-collector-empty-inner">\n				<div class="image-collector-empty">\n					<span>{{#tl}}Drag image here{{/tl}}</span>\n					<div class="separator"><span>{{#tl}}or{{/tl}}</span></div>\n					<a class="w-image-upload-target btn-com btn-icon-left" href="#">\n						<span class="w-icon-plus"></span> {{#tl}}Upload Image{{/tl}}\n					</a>\n				</div>\n			</div>\n		</div>\n		<div class="image-collector-gallery-outer">\n			<div class="image-collector-gallery-inner">\n				<ul class="image-collector-gallery"></ul>\n			</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("tpl!components/image-collector/image",[],function(){return'<li data-id="{{id}}">\n	<div class="image-collector-controls">\n		<span class="image-collector-delete"></span>\n	</div>\n	<div class="image-collector-image-container">\n		<img class="image-collector-image" src="{{uri}}" />\n	</div>\n</li>'}),_wAMD.define("components/image-collector/AbstractImageCollectorView",["jquery","backbone","underscore","mustache","components/uploader-view/UploaderView","tpl!components/image-collector/abstract-image-collector-view","tpl!components/image-collector/image","jquery-ui/sortable"],function(e,t,i,n,o,s,r){var a=n.compile(r),l=o.extend({imageTemplate:function(e){var t=e.toJSON();return a(t)},className:"image-collector scaffold-com",template:n.compile(s),events:{"sortupdate .image-collector-gallery":"_onSortupdate","click .image-collector-delete":"_onDeleteImage"},renderImages:function(e,n,o){var s=[];e instanceof t.Collection||(e=new t.Collection(e)),e.comparator=function(e){return i.indexOf(n,e.get(o))},e.sort(),this.$el.toggleClass("image-view-empty",0===e.length),s=e.map(function(e){return this.imageTemplate(e)},this).join(""),this.$el.find(".image-collector-gallery").empty().append(s).sortable({items:"li"})},addImage:function(e){var t=this.$el.find(".image-collector-gallery");t.append(this.imageTemplate(e)),this.$el.toggleClass("image-view-empty",!1)},removeImage:function(e){var t=this.$el.find(".image-collector-gallery");t.find("li[data-id="+e+"]").remove(),this.$el.toggleClass("image-view-empty",0===t.children("li").length)},clearImages:function(){this.$el.find(".image-collector-gallery li").remove(),this.$el.addClass("image-view-empty")},onUploadSuccess:function(){},onUploadError:function(){},onSortupdate:function(){},onDeleteImage:function(){},_onSortupdate:function(t){var i=e(t.currentTarget).children().map(function(e,t){return Number(t.getAttribute("data-id"))});i=e.makeArray(i),this.onSortupdate(i)},_onDeleteImage:function(t){var i=e(t.currentTarget).closest("li"),n=i.attr("data-id");t.preventDefault(),this.removeImage(n),this.onDeleteImage(n)}});return l}),_wAMD.define("components/image-collector/SingleImageCollectorView",["underscore","backbone","components/image-collector/AbstractImageCollectorView"],function(e,t,i){var n=i.extend({templateHelpers:function(){var t=e.result(i.prototype,"templateHelpers")||{};return e.extend(t,{single:!0}),t},className:function(){var t=e.result(i.prototype,"className");return t+" single-image-collector"},addImage:function(e){this.clearImages(),i.prototype.addImage.call(this,e)}});return n}),_wAMD.define("tpl!commerce/editor/store/product/detail/image",[],function(){return'<li data-id="{{id}}">\n	<div class="image-collector-controls">\n		<span class="image-collector-delete"></span>\n	</div>\n	{{{content}}}\n</li>\n'}),_wAMD.define("commerce/editor/store/category/detail/images/CategoryDetailImagesView",["jquery","underscore","backbone-all","mustache","commerce/editor/model/CategoryImage","components/image-collector/SingleImageCollectorView","util/ui/ImageAspectRatio","editor/app","tpl!commerce/editor/store/product/detail/image"],function(e,t,i,n,o,s,r,a,l){var c=n.compile(l),u=s.extend({imageTemplate:function(e){var t=a.commerce.storefrontSettings.getRatioAsNumber("category_image_ratio"),i=e.get("site_product_image_id")||e.cid;return c({id:i,content:r("category-image-collector",e,320,t)})},templateHelpers:function(){var e=t.result(s.prototype,"templateHelpers")||{};return t.extend(e,{title:_W.tl("Category Image")}),e},initialize:function(e){return e.uploadOptions={target:".w-image-upload-target",type:"image",multipleFiles:!1,params:{type:"tmp_image",width:320,cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}},s.prototype.initialize.apply(this,arguments)},initializeScroll:function(){this.$el.find(".image-collector-gallery-inner").weeblyScroll("destroy").weeblyScroll()},onShow:function(){var e=this.model.get("images"),t=this.model.get("image_order")||[];this.renderImages(e,t,"site_category_image_id"),this.initializeScroll(),s.prototype.onShow.apply(this,arguments)},onUploadSuccess:function(e){var t,i=this.model.get("images");t=new o({tmp_resource_id:e.large.tmp_resource_id,width:e.large.width,height:e.large.height,uri:e.normal.uri}),t.set("site_category_id",this.model.get("site_category_id")),i._added=[],i.remove(i.models),i.add(t),this.model.unset("image_order"),this.addImage(t)},onDeleteImage:function(){var e=this.model.get("images");e.remove(e.models),this.model.set("image_order",[])},saveImageOrder:function(t){var i=this,n=e.Deferred();return e.when(t).done(function(){i.model.set("image_order",i.model.get("images").pluck("site_category_image_id")),i.model.commit().done(function(){n.resolve()})}),n.promise()}});return u}),_wAMD.define("tpl!commerce/editor/store/category/detail/advanced",[],function(){return'<div class="sub-title-bar drawer-toggle" rel="category-detail-advanced-options-drawer">\n	<h3>{{#tl}}Advanced Options{{/tl}}</h3>\n	<div class="drawer-caret"></div>\n</div>\n\n<div id="category-detail-advanced-options-drawer" class="drawer scaffold-com">\n	<div class="row section">\n		<label class="label" for="editor_commerce_category_seo_title">{{#tl}}SEO Page Title{{/tl}}</label><br>\n		<input id="editor_commerce_category_seo_title" type="text" name="page-title" placeholder="{{#esc_attr}}{{#tl}}Appears in browser headline{{/tl}}{{/esc_attr}}" value="{{page_title}}">\n	</div>\n\n	<div class="row section">\n		<label class="label" for="editor_commerce_category_seo_description">{{#tl}}SEO Description{{/tl}}</label><br>\n		<textarea id="editor_commerce_category_seo_description" name="page-description" placeholder="{{#esc_attr}}{{#tl}}Appears in search engine results{{/tl}}{{/esc_attr}}">{{page_description}}</textarea>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/category/detail/advanced/CategoryDetailAdvancedView",["jquery","backbone-all","mustache","tpl!commerce/editor/store/category/detail/advanced","util/ui/drawer"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({template:i.compile(n),ui:{drawer:".drawer"},events:{"change [name=page-title]":"updatePageTitle","change [name=page-description]":"updatePageDescription"},onShow:function(){var e=this;this.ui.drawer.drawer({onOpen:function(){e.ui.drawer.find("[name=page-title]").focus()}})},updatePageTitle:function(){this.model.set("page_title",this.$("[name=page-title]").val())},updatePageDescription:function(){this.model.set("page_description",this.$("[name=page-description]").val())}});return o}),_wAMD.define("tpl!commerce/editor/store/category/detail/display",[],function(){return'<label class="label" class="title-bar">{{#tl}}Display Options{{/tl}}</label>\n<div class="display-options">\n\n	<div class="row section">\n		<label class="label" for="site-com-category-layout">{{#tl}}Header Type{{/tl}}</label>\n		<select id="site-com-category-layout" name="category_layout" class="control"></select>\n	</div>\n\n	{{#storeHasCategories}}\n		{{#showSubCategories}}\n		<div class="row section toggle-option">\n			<label class="label" for="site-com-subcategory-toggle">{{#isStorefront}}{{#tl}}Show Categories{{/tl}}{{/isStorefront}}{{^isStorefront}}{{#tl}}Sub-Categories{{/tl}}{{/isStorefront}}</label>\n			<div class="toggle-switch control light">\n				<input name="show_sub_categories" type="checkbox" id="site-com-subcategory-toggle" class="toggle-field {{#show_sub_categories}}checked{{/show_sub_categories}}" {{#show_sub_categories}}checked{{/show_sub_categories}}>\n				<label for="site-com-subcategory-toggle">\n					<div class="background-container">\n						<div class="background-slider">\n							<span class="label-on">{{#tl}}ON{{/tl}}</span>\n							<span class="label-off">{{#tl}}OFF{{/tl}}</span>\n						</div>\n					</div>\n					<span class="blob">\n						<span class="blob-inner"></span>\n					</span>\n				</label>\n			</div>\n		</div>\n		{{/showSubCategories}}\n	{{/storeHasCategories}}\n\n</div>\n'}),_wAMD.define("tpl!editor/mobile/homepage_types",[],function(){return'{{#pages}}\n<div class="homepage-button">\n	<input type="radio" id="homepage-layout-{{value}}" name="homepage-type" {{#selected}}checked class="checked"{{/selected}} value="{{value}}">\n	<label for="homepage-layout-{{value}}" class="btn btn-control btn-block layout-{{value}}">\n		<span class="icon"></span>\n	</label>\n	<label class="homepage-name">{{name}}</label>\n</div>\n{{/pages}}\n'}),_wAMD.define("tpl!editor/mobile/theme_colors",[],function(){return'{{^colors}}\n	{{#colorChooser}}\n		<div class="color-chooser">\n			<label>{{#tl}}Color{{/tl}}</label>\n			<span class=\'dropdown color-dropdown mobile-color-dropdown\'>\n				<span class=\'color-square\' style=\'background-color:#000\'></span>\n				<button class=\'btn btn-control btn-small\'><span class=\'icon-chevron-down\'></span></button>\n			</span>\n		</div>\n	{{/colorChooser}}\n	{{^colorChooser}}\n		<div class="no-colors">{{#tl}}No Color Options{{/tl}}</div>\n	{{/colorChooser}}\n{{/colors}}\n{{#colors}}\n<div class="theme-color color-square {{#selected}}selected{{/selected}}" style="background-color:{{sample}}" alt="{{value}}" data-color="{{value}}">\n	<span></span>\n</div>\n{{/colors}}\n'}),_wAMD.define("tpl!editor/mobile/themes_panel",[],function(){return'{{#themes}}\n<div class="mobile-theme" data-id="{{id}}">\n	<div class="front">\n		<img class="mobile-theme-image" src="{{img}}" alt="{{name}}">\n		<div class="gradient-overlay"></div>\n	</div>\n	<div class="back">\n		<div class="choose-colors">\n			<span class="choose-color-text">{{#tl}}Change Color{{/tl}}</span>\n			<div class="available-colors">\n				{{> editor/mobile/theme_colors}}\n			</div>\n		</div>\n		<div class="cancel-button btn btn-control btn-alternate">Cancel</div>\n	</div>\n</div>\n{{/themes}}'}),Weebly.Cache=function(e){function t(t,i,n){return function(o,s,r){var a={};a.pos=t,a[i||"keys"]=o,a.cookie=document.cookie,a.token=e.RequestToken,new Ajax.Request(ajax,{parameters:a,asynchronous:!r,onSuccess:function(e){n?s(e.responseText.evalJSON()):s(e.responseText)},onFailure:errFunc})}}function i(e){var t=this,i={};t.getCachedValue=function(e){return e in i?i[e]:null},t.get=function(t,n,o){t in i?n(i[t]):e(t,function(e){e[t]&&(e=e[t]),i[t]=e,n(e)},o)},t.insert=function(e,t){i[e]=t
},t.clear=function(e){void 0!==e?delete i[e]:i={}}}e.themeCache=new i(t("gettheme","",!0)),e.mobileThemeCache=new i(t("getmobiletheme","",!0)),e.themeListCache=new i(t("getthemes"));var n=function(e,n,o){return new i(t(e,n,o))};return{create:n}}(Weebly),_wAMD.define("legacy/weebly_cache",function(e){return function(){var t;return t||e.Weebly.Cache}}(this)),function(e){function t(){"placeholder"in document.createElement("input")||e(this).find("input[placeholder]").placeholder()}var i=function(){var t=function(){var t=e(".wsite-view-link-full"),i=e(".wsite-view-link-mobile"),n=window.location.href||"";n+=n.indexOf("?")>-1?"&":"?",t.attr("href",n+"view=full"),i.attr("href",n+"view=mobile")};t();var i=window.History;i&&i.enabled&&History.Adapter.bind(window,"statechange",t)};e(document).ready(i),e(document).ready(t)}(Weebly.jQuery),function(){var e=window.STYLE_PREFIX||"weebly",t=function(){for(var t=0;t<document.styleSheets.length;t++)try{if(document.styleSheets[t].title==e+"-theme-css"){var i=document.styleSheets[t],n=i.cssRules||i.rules;return n&&n.length>0}}catch(o){}return!1},i=function(e){if(t())e();else var i=setInterval(function(){t()&&(clearInterval(i),e())},200)};window.whenThemeCSSLoaded||(window.whenThemeCSSLoaded=i),window.isThemeCSSLoaded||(window.isThemeCSSLoaded=t)}(),_wAMD.define("site/general",function(){}),_wAMD.define("legacy/weebly_mobile",["jquery","underscore","mustache","editor/app","tpl!editor/mobile/homepage_types","tpl!editor/mobile/theme_colors","tpl!editor/mobile/themes_panel","legacy/weebly_cache","site/general"],function(e,t,i,n,o,s,r){function a(){c=null}var l={homepageTypes:i.compilePartial("editor/mobile/homepage_types",o),colors:i.compilePartial("editor/mobile/theme_colors",s),panel:i.compilePartial("editor/mobile/themes_panel",r)},c=null,u=!1,d="",h="",p="",f="",m=function(){var t=function(){e(".wsite-mobile-menu").length>0||(e("#wmobile-menu").find("ul span.wsite-nav-handle").each(function(){e(this).show()}),Weebly.mobile_navigation.init())};isThemeCSSLoaded()?t():whenThemeCSSLoaded(t)},g=function(){e("#w-fixed-bg").remove(),e("#w-mobile-icontent").css({background:""});var t=function(){var t=e("#icontent");t.css("cssText",""),-1!=t.css("background-attachment").indexOf("fixed")&&(e("#w-mobile-phone-screen .scroll-inner").prepend('<div id="w-fixed-bg"/>'),e("#w-fixed-bg").css({"background-color":t.css("background-color"),"background-image":t.css("background-image"),"background-position":t.css("background-position"),"background-size":t.css("background-size"),"background-repeat":t.css("background-repeat"),"background-clip":t.css("background-clip"),position:"absolute",top:0,left:0,height:"100%",width:"320px"}),t.css("cssText","background: none !important;"),e("#w-mobile-icontent").css({background:"none"}))};isThemeCSSLoaded()?t():whenThemeCSSLoaded(t)},v=function(){Weebly.mobile_navigation.closeMenu()},b=function(){Weebly.view.isMobileView&&(y(),U(),ENABLE_MOBILE_HOMEPAGE&&Weebly.PageManager.getCurrentHomepage().id==currentPage?e("#homepage-type-option").show():e("#homepage-type-option").hide(),w())},y=function(){e("#blog-navigation, #blog-navigation-placeholder").hide()},w=function(){var t=e("#secondlist");if(!Weebly.mobile_navigation.isMenuOpen()&&Weebly.view.isMobileView&&0!=t.length){var i,n=e("#icontent"),o=e("#empty-message-inner");if(Weebly.mobile_navigation.resizeMenu(),o.css({"margin-top":""}),t.css({height:""}),i=e("#w-mobile-phone-screen").height(),i-=n.height(),i>0){if("border-box"===t.css("box-sizing"))var s=t.height()+(t.outerHeight()-t.height());else s=t.height();t.css({height:s+i+"px"});var r=(t.outerHeight()-o.outerHeight())/2;o.css({"margin-top":r+"px"})}e("#w-mobile-phone-screen .scroll").weeblyScroll("update")}},_=function(t,i,o,s,r){if(o=o||currentPage,r=r||!1,currentTheme!=t||currentThemeColor!=i||currentPage!=o||r){e("#w-mobile-phone-screen").addClass("blackout"),startWait();var a=function(){currentThemeColor=i,setCurrentTheme(t,!0),n.vent.trigger("forceThemeRerender"),updateList(o),y(),n.vent.once("editorListUpdated",endWait)};if(s){var l=e.support.transition&&e.support.transition.end;l?s.one(l,a):setTimeout(a,50)}else a()}},M=function(){var t=e(this),i=t.parents(".mobile-theme").removeClass("flip");c.mobile_theme=d,c.mobile_theme_color=h,c.mobile_color=p,c.mobile_theme_set=f,H(),_(c.mobile_theme,c.mobile_theme_color,currentPage,i),S(c.mobile_themes[d].colors,currentPage,i)},C=function(){var t=e(this),i=t.parents(".mobile-theme"),n=c.mobile_theme_color;$animationEnd=null;var o=i.data("id");if(t.is(".front")){i.addClass("flip").siblings().removeClass("flip");var s;o==c.mobile_theme&&(s=i.find(".theme-color[data-color='"+n+"']")),s&&0!=s.length||(s=i.find(".theme-color:first")),s.addClass("selected").siblings().removeClass("selected"),n=s.data("color"),$animationEnd=i}else t.is(".theme-color")&&(t.addClass("selected").siblings().removeClass("selected"),n=t.data("color"));_(o,n,currentPage,$animationEnd),c.mobile_theme=o,c.mobile_theme_color=n,c.mobile_theme_set="1",H(),S(c.mobile_themes[o].colors,currentPage,i)},x=function(){var t=e(this);t.addClass("selected").siblings().removeClass("selected"),c.mobile_theme_color=e(this).data("color"),H(),_(c.mobile_theme,c.mobile_theme_color)},k=function(t){var i={},n=[];i.themes=[];for(var o in t){var s=t[o];i.themes.push({id:s.id,name:s.name,img:s.screenshots?s.screenshots.small:"",colors:s.colors,colorChooser:"legacy"===s.id}),s.id==currentMobileTheme&&(n=s.colors)}S(n);var r=l.panel(i),a=e("#mobile-themes-panel");a.html(r),a.find(".mobile-theme .front").on("click",C),a.find(".theme-color").on("click",C),a.find(".cancel-button").on("click",M);var u=a.find(".mobile-color-dropdown");u.weeblyColorChooser({autoExpand:!0,containerOffsetY:5,onUpdate:T,onChange:function(e){T(e),c.mobile_theme_set="1",H()},onRevert:T}),u.weeblyColorChooser("set",c.mobile_color),e("#mobile-themes-container .scroll").weeblyScroll("update")},S=function(t){for(var i={},n=[],o=!1,s=0;s<t.length;s++){var r=t[s],a=c.mobile_theme_color==r.value;n.push({sample:r.sample,value:r.value,selected:a}),a&&(o=!0)}o||(n.length>0?(n[0].selected=!0,c.mobile_theme_color=n[0].value):c.mobile_theme_color=null,H()),i.colorChooser="legacy"===c.mobile_theme,i.colors=n;var u=l.colors(i);e("#mobile-theme-colors").html(u);var d=e("#mobile-theme-colors");d.find(".theme-color").on("click",x),d.find(".mobile-color-dropdown").weeblyColorChooser({autoExpand:!0,containerOffsetY:5,onUpdate:T,onChange:function(e){T(e),H()},onRevert:T}),T(c.mobile_color),e("#mobile-options-container .scroll").weeblyScroll("update")},T=function(t){void 0!==t&&null!==t&&"0"!=t&&(e(".wmobile-bar,.wmobile-button,.wmobile-line").css("background-color",t),e("#mobile-option-slider .mobile-color-dropdown").weeblyColorChooser("set",t),c.mobile_color=t)},A=function(){e("#mobile-option-slider").addClass("show-themes"),d=c.mobile_theme,h=c.mobile_theme_color,p=c.mobile_color,f=c.mobile_theme_set},D=function(){var t=e("#mobile-option-slider");t.removeClass("show-themes"),e(".mobile-theme").removeClass("flip")},E=function(){var t=e(this);if(!Weebly.Restrictions.hasAccess("site_search"))return t.prop("checked",!1),n.vent.trigger("billing:upgrade:window",{restrictionID:"site_search",restrictionType:"feature",refer:"main"}),void 0;var i=getAreaInstance(!0,"search");i&&(t.prop("checked")?(i.show(),O()):i.hide())},P=function(){var t=e(this),i=getAreaInstance(!0,"social");i&&(t.prop("checked")?(i.show(),O()):i.hide())},R=function(){var t=e(this),i=getAreaInstance(!0,"homebutton");i&&(t.prop("checked")?(i.show(),O()):i.hide())},z=function(){var t=e(this),i=getAreaInstance(!0,"text","mobilephone");i&&(t.prop("checked")?(i.show(),O()):i.hide())},O=function(){jQuery("#menu-wrapper").css("height","101%"),setTimeout(function(){jQuery("#menu-wrapper").css("height","")})},F=function(){var t=e(this);t.hasClass("android")?(t.removeClass("android"),e("#w-mobile-phone").removeClass("android"),c.mobile_use_android=!1):(t.addClass("android"),e("#w-mobile-phone").addClass("android"),c.mobile_use_android=!0),H(),w(),K()},W=function(){var t=e(this);c.mobile_headers_disabled=t.prop("checked")?!1:!0,H(),_(c.mobile_theme,c.mobile_theme_color,currentPage,null,!0)},I=function(){e("#phone-toggle-icons").on("click",F);var t=e("#mobile-options-container").find(".options-panel").children();if(c.allow_mobile===!1)return t.hide(),e("#mobile-options-none").show(),n.vent.trigger("editor:mobile:show",{responsive:!0}),void 0;t.show(),e("#mobile-options-none").hide(),e("#change-mobile-theme").on("click",A),e("#mobile-themes-back").on("click",D),k(c.mobile_themes),e("#search-box-toggle").on("click",E),e("#social-icons-toggle").on("click",P),e("#home-icon-toggle").on("click",R),e("#phone-number-toggle").on("click",z),e("#header-image-toggle").on("click",W),e("#homepage-type").on("change",Y);var i=N(currentThemeData.page_type_templates);i?(e("#header-image-toggle").prop("disabled",!0),c.mobile_headers_disabled=!0):e("#header-image-toggle").prop("disabled",!1),setElementsPageType(),L(),_(c.mobile_theme,c.mobile_theme_color,currentPage)},N=function(e){for(var t in e)for(var i=0;i<e[t].body.length;i++)if(e[t].body[i].indexOf("wsite-header")>-1)return!1;return!0},L=function(){var t=c.mobile_use_android?"android":"";e("#w-mobile-phone").addClass(t),e("#phone-toggle-icons").addClass(t),e("#homepage-type-option").hide(),e("#header-image-toggle").prop("checked",!Q()).toggleClass("checked",!Q())},B=function(t){e.ajax({url:ajax,type:"post",data:{pos:"mobilesitesettings",siteid:currentSite,cookie:document.cookie,type:"get",token:Weebly.RequestToken},success:function(e){c=e,t&&t()},error:errFunc})},H=function(t){var i="",n="";for(var o in c)if("mobile_themes"!=o){var s=c[o]?c[o]:0;n+=o+String.fromCharCode(3)+s+String.fromCharCode(2)}e.ajax({url:ajax,type:"post",data:{pos:"mobilesitesettings",siteid:currentSite,keys:n+i,cookie:document.cookie,type:"post",token:Weebly.RequestToken},success:function(){t&&t()},error:errFunc})},q=function(t,i,n){var t=t||Weebly.PageManager.topLevelPages[0];t&&(t.mobile_layout=i,e.ajax({url:ajax,type:"post",data:{pos:"right",site_id:currentSite,cookie:document.cookie,pageid:t.id,kind:t.kind||"page",store_page_kind:t.store_page_kind,store_page_kind_id:t.store_page_kind_id,newtitle:t.title,hidden:t.search_hidden?1:0,pwprotected:t.pwprotected?1:0,header:t.header||"",footer:t.footer||"",keywords:t.keywords||"",seo_title:t.seo_title||"",description:t.description||"",extlink:t.extlink||"",layout:t.layout||"",mobile_layout:t.mobile_layout||""},success:function(){n&&updateList(currentPage)},error:errFunc}))},V=function(){Weebly.Events.removeListener("pageChange",v),n.vent.off("editorListUpdated",b),n.vent.off("themeRendered",X),e("#change-mobile-theme").off("click",A),e("#mobile-themes-back").off("click",D),e("#search-box-toggle").off("click",E),e("#social-icons-toggle").off("click",P),e("#home-icon-toggle").off("click",R),e("#phone-number-toggle").off("click",z),e("#header-image-toggle").off("click",W),e("#phone-toggle-icons").off("click",F),e("#homepage-type").off("change",Y),e("#mobile-themes-panel").empty(),e("#w-mobile-phone-screen .scroll").weeblyScroll("destroy"),e("#mobile-options-container .scroll").weeblyScroll("destroy"),e("#mobile-themes-container .scroll").weeblyScroll("destroy"),e("#w-mobile-phone-screen").addClass("blackout"),e(window).off("resize",K)},j=function(){Weebly.themeCache.get(window.currentStandardTheme,function(t){if(t.responsive){require("editor/build/element_dragging").destroyCurrentSortables(window._W.tl("To add elements switch to Desktop View.")),e("#w-mobile-phone-screen, #scroll_container").hide(),e("#w-mobile-phone-iframe").show();var i=e("#w-mobile-preview-form")[0];i.themeID.value=window.currentStandardTheme.replace(/[^\d]/g,""),i.userID.value=window.userID,i.siteID.value=window.currentSite,i.pageID.value=window.currentPage,i.isMobile.value=!1,i.cookie.value=document.cookie,i.isEditor.value=!0,i.submit()}else e("#icontent").empty(),e("#w-mobile-icontent").html(e("#icontent_container").children()),e("#icontent_container").html(e("#w-mobile-phone")),e("#w-editor-mobile .page").html(e("#scroll_container"))})},$=function(){Weebly.themeCache.get(window.currentStandardTheme,function(t){if(t.responsive)e("#w-mobile-phone-screen, #scroll_container").show(),e("#w-mobile-phone-iframe").hide();else{var i=e("#scroll_container");i.addClass("blackout"),e("#icontent_container").append(e("#w-mobile-icontent").children()),e("#w-editor-mobile .page").append(e("#w-mobile-phone")),e("#view-container").append(i)}})},U=function(){if(!Weebly.view.isMobileView)return e("#search-box-toggle").closest(".toggle-option").hide(),e("#social-icons-toggle").closest(".toggle-option").hide(),e("#home-icon-toggle").closest(".toggle-option").hide(),e("#phone-number-toggle").closest(".toggle-option").hide(),void 0;var t=function(t,i,n){var o=getAreaInstance(!0,i,n);if(o&&e(o.el).length>0){var s=!0;"search"!=i||Weebly.Restrictions.hasAccess("site_search")||(s=!1,o.hide()),t.prop("disabled",!1),t.closest(".toggle-option").show(),o.data.mobileHidden||!s?t.prop("checked",!1).toggleClass("checked",!1):t.prop("checked",!0).toggleClass("checked",!0)}else t.closest(".toggle-option").hide(),t.prop("disabled",!0),t.prop("checked",!1).toggleClass("checked",!1)};t(e("#search-box-toggle"),"search"),t(e("#social-icons-toggle"),"social"),t(e("#home-icon-toggle"),"homebutton"),t(e("#phone-number-toggle"),"text","mobilephone");var i=e("#mobile-area-options");i.show(),0==i.find(".toggle-option:visible").length&&i.hide()},Y=function(){var t=e(this);t.find("input").removeClass("checked");var i=t.find("input:checked").addClass("checked").val();q(Weebly.PageManager.topLevelPages[0],i,!0)},G=function(){if(ENABLE_MOBILE_HOMEPAGE&&!t.isEmpty(currentThemeData)){var i=getOrderedPageTypes(currentThemeData.page_type_templates,Weebly.view.isMobileView),n=Weebly.PageManager.getCurrentHomepage(),o=n.mobile_layout||getPageType(currentPage,currentThemeData,Weebly.view.isMobileView)||"header",s={};s.pages=[];for(var r=0;r<i.length;r++){var a=i[r];s.pages.push({name:a,value:a,selected:o==a})}var c=l.homepageTypes(s);e("#homepage-type").html(c),e("#mobile-options-container .scroll").weeblyScroll("update")}},X=function(){Weebly.view.isMobileView&&(m(),g(),U(),G(),ENABLE_MOBILE_HOMEPAGE&&Weebly.PageManager.getCurrentHomepage().id==currentPage?e("#homepage-type-option").show():e("#homepage-type-option").hide(),c&&T(c.mobile_color),w(),e("#w-mobile-phone-screen").removeClass("blackout"),e("#w-mobile-phone-screen .scroll").weeblyScroll())},J=function(e){return u=void 0!==e?e:u},K=function(){e("#mobile-options-container .scroll").weeblyScroll("update"),e("#mobile-themes-container .scroll").weeblyScroll("update");var t=e("#w-mobile-phone"),i=e("#w-editor-mobile").height(),n=t.height(),o=parseInt(t.css("margin-top"),10)+parseInt(t.css("padding-top"),10),s=(i-n)/2-o;t.css({top:s+"px","padding-bottom":Math.max(i-n-o-s,0)+"px"})},Q=function(){return N(currentThemeData.page_type_templates)||c&&c.mobile_headers_disabled},Z=function(e){var t=function(){e!==c.mobile_header_placeholder&&(c.mobile_header_placeholder=e||"","short-header"==currentPageType?c.mobile_header_placeholder_short=e||"":"tall-header"==currentPageType?c.mobile_header_placeholder_tall=e||"":"landing"==currentPageType&&(c.mobile_header_placeholder_landing=e||""),H())};null===c?B(t):t()},et=function(){var e=getPageType(currentPage,getCurrentThemeData()),t="";return"short-header"==e?t=c.mobile_header_placeholder_short||"":"tall-header"==e?t=c.mobile_header_placeholder_tall||"":"landing"==e&&(t=c.mobile_header_placeholder_landing||""),""==t&&(t=c.mobile_header_placeholder||""),t},tt=function(){Weebly.Events.addListener("navPageChange",v),n.vent.on("editorListUpdated",b),n.vent.on("themeRendered",X),e("#mobile-options-container .scroll").weeblyScroll(),e("#mobile-themes-container .scroll").weeblyScroll(),e(window).on("resize",K);var t=function(){if(c.allow_mobile!==!1&&!c.mobile_view_visited){var t=new Weebly.Dialog("mobile-sync-notice",{modal:!0,blackoutOpacity:.5,outerClass:"chromeless w-ui",onClose:function(){c.mobile_view_visited=!0,H()}});t.open(),e("#mobile-sync-notice .btn").one("click",function(){t.close()})}I(),y()};null===c?B(t):t(),j(),y(),K()},it=require("config");return it.chromeless?{isMobileEditor:function(){return!1},updateAreaOptions:function(){}}:(Weebly.ready(function(){B(L)}),Weebly.mobile={},Weebly.mobile.init=tt,Weebly.mobile.removeBindings=V,Weebly.mobile.resizeScreen=w,Weebly.mobile.swapiContentOut=$,Weebly.mobile.updateAreaOptions=U,Weebly.mobile.isMobileEditor=J,Weebly.mobile.setMobilePageType=q,Weebly.mobile.isHeaderDisabled=Q,Weebly.mobile.reflow=O,Weebly.mobile.setHeaderPlaceholder=Z,Weebly.mobile.getHeaderPlaceholder=et,Weebly.mobile.clearSettingsCache=a,Weebly.mobile)}),_wAMD.define("editor/build/themes/utils",["underscore","legacy/weebly_page_manager","legacy/weebly_mobile"],function(e,t,i){var n={currentTheme:"",currentMobileTheme:"legacy",currentStandardTheme:""};n.setCurrentTheme=function(e,t){t?window.currentMobileTheme=e:window.currentStandardTheme=e,window.currentTheme=e};var o=["index","homepage","header","tall-header","short-header","no-header","landing","splash"],s=["index","no-header","header","tall-header","short-header","homepage","landing","splash"];return n.getDefaultPageType=function(e,t){return n.getOrderedPageTypes(e.page_type_templates,t)[0]},n.getOrderedPageTypes=function(t,i){var n=e.keys(t),r=[],a=[],l=i?s:o;return e.each(l,function(e){-1!=n.indexOf(e)&&r.push(e)}),e.each(n,function(e){-1==l.indexOf(e)&&a.push(e)}),a.sort(),r.concat(a)},n.getPageType=function(e,o,s){var r=t.pages[e],a="no-header";if(r&&(a=s&&r.mobile_layout?r.mobile_layout:r.layout),s&&r&&!r.mobile_layout&&i.isHeaderDisabled()&&(a="no-header"),i.isMobileEditor()&&!s&&r&&("header"==r.mobile_layout?a="tall-header"==r.layout||"short-header"==r.layout?r.layout:"tall-header":"landing"==r.mobile_layout&&(a="landing")),a in o.page_type_templates)return a;if("tall-header"==a||"short-header"==a){if("header"in o.page_type_templates)return"header"}else if("title"==a&&"no-header"in o.page_type_templates)return"no-header";return n.getDefaultPageType(o,s)},e.extend(window,n),n}),function(e){function t(e,t){this.family=e,this._variants=t}function i(e){var t=n(e);t&&t.load()}function n(e){var i=o(e,t.data.google_fonts);if(i)i.source="google";else{var i=o(e,t.data.standalone_fonts);if(i){var n=t.data.system_families[i.family];n&&(i.systemFamily=n)}}return i}function o(e,i){e=e.replace(/(^['"\s]*|['"\s]*$)/g,"");var n,o=i[e];if(o)n=e;else{e=e.toLowerCase();for(var s in i)"string"==typeof s&&s.toLowerCase()==e&&(n=s,o=i[s])}return n?new t(n,o):void 0}var s={};t.prototype.hasRegular=function(){return 1&this._variants},t.prototype.hasBold=function(){return 2&this._variants},t.prototype.hasItalic=function(){return 4&this._variants},t.prototype.hasBoldItalic=function(){return 8&this._variants},t.prototype.hasLight=function(){return 16&this._variants},t.prototype.hasLightItalic=function(){return 32&this._variants},t.prototype.hasUltraLight=function(){return 64&this._variants},t.prototype.hasUltraLightItalic=function(){return 128&this._variants},t.prototype.getLinkTag=function(){if(!this.systemFamily){var e="",i=require("config");if(t.data.familyCSSBaseURL)e=t.data.familyCSSBaseURL+escape(this.family);else if(i.chromeless&&0!=window.currentSite)e="x-com-weebly-font-css:///"+window.currentSite+"/"+escape(this.family);else if("google"==this.source){var n=[];this.hasRegular()&&n.push("400"),this.hasLight()&&n.push("300"),this.hasLightItalic()&&n.push("300italic"),this.hasUltraLight()&&n.push("200"),this.hasUltraLightItalic()&&n.push("200italic"),this.hasBold()&&n.push("700"),this.hasItalic()&&n.push("400italic"),this.hasBoldItalic()&&n.push("700italic");var o="";(n.length>1||"400"!=n[0])&&(o=":"+n.join(",")),e="http://fonts.googleapis.com/css?family="+escape(this.family)+o}else e="/weebly/fonts/"+this.family.replace(/ /g,"_")+"/font.css?2",i.chromeless&&(e="http://"+configSiteName+e);return"<link href='"+e+"' rel='stylesheet' type='text/css' />"}},t.prototype.load=function(){if(!s[this.family]){s[this.family]=!0;var e=this.getLinkTag();if(e){var t=new Element("div").update(e);$$("head")[0].insert(t.down())}}},t.loadFont=i,t.getFont=n,e.Font=t}(Weebly),_wAMD.define("legacy/classes/Font",function(e){return function(){var t;return t||e.Weebly.Font}}(this)),function(e,t){function i(e){var t=n(e);t&&t.render()}function n(e){var i=t('[class*="wsite-header"]');i.not(":first").hide();var n=i.css("background","none")[0];if(n){var o=new d(n,{fillDimensions:!0,autoplay:!0,speed:e.speed||5,slide:e.slide,transition:e.transition,showControls:!0,showPlayButton:!1,dots:e.dots,dotPosition:e.dotPosition,arrows:e.arrows,forceSideArrows:!0,images:e.images,aspectRatio:e.aspectRatio||"auto",useAspectRatio:e.useAspectRatio||!1});return o}}function o(e){return g[e].getPhotos()}function s(){var e=!1;return t.each(g,function(t,i){i.updateSize(),e=!0}),e}function r(e,t){return m[e]=u(t),"<div id='"+e+"-slideshow' style='height:1000px'></div>"}function a(e){var i=t("#"+e+"-slideshow"),n=new d(i,m[e]);g[e]=n,n.render(),i.height("")}function l(e,i){if(g[e]){g[e].destroy();var n=m[e];n.images=i,g[e]=new d(t("#"+e+"-slideshow"),n),g[e].render()}}function c(e){var i=u(e),n=i.elementID,o=new d(t("#"+n+"-slideshow"),i);g[n]=o,o.render()}function u(e){var t=e.nav,i=1;return"double_thumbnails"==t?(t="thumbnails",i=2):"none"==t&&(t=!1),{elementID:e.elementID,links:t,linkLocation:e.navLocation,linkTiers:i,captionLocation:e.captionLocation,slide:"slide"==e.transition,transition:e.transition,autoplay:parseInt(e.autoplay),speed:parseInt(e.speed),aspectRatio:e.aspectRatio||"auto",showControls:"false"!==e.showControls,randomStart:"true"===e.randomStart,images:e.images||[]}}function d(e,i){function n(){e.addClass("wslide").html("<table class='wslide-main'><tbody></tbody></table>"),e.find("table");var n=e.find("tbody"),o=r();if(v||o.on("mouseover",function(){i.showControls&&(clearTimeout(Ft),ei||et(Tt.queue()&&Tt.queue().length))}).on("mouseout",function(){Ft=setTimeout(function(){nt()},1e3)}),i.fillDimensions&&i.useAspectRatio&&e.css({height:"auto"}),i.links&&$t.length){yt=[];var s=i.linkLocation;Mt="top"==s||"bottom"==s;var a=m(),l=t("<td class='wslide-link-cell'/>").append(a),c=t("<td/>").append(o);if(Mt){l.width("auto");var u=t("<tr/>"),d=t("<tr/>");"top"==s?(u.append(l),d.append(c)):(u.append(c),d.append(l)),n.append(u),n.append(d)}else{var h=t("<tr/>");"left"==s?(h.append(l),h.append(c)):(h.append(c),h.append(l)),n.append(h)}}else{var h=t("<tr/>"),p=t("<td/>");p.append(o),h.append(p),n.append(h)}i.dots&&(wt=g()),T(),$t.length&&(i.randomStart?W(Math.floor(Math.random()*$t.length)):W(0)),it(),i.autoplay&&K(),t(window).on("resize",pt)}function o(){e.empty(),s()}function s(){Q(),t(window).on("resize",pt),ht()}function r(){if(mt=t("<div class='wslide-content disable-user-select'>&nbsp;<div class='wslide-content-inner'><div class='wslide-slides'></div></div><div class='wslide-overlay-top-left disable-user-select'></div><div class='wslide-overlay-top-right disable-user-select'></div><div class='wslide-overlay-left disable-user-select'></div><div class='wslide-overlay-right disable-user-select'></div></div>"),gt=mt.find("div.wslide-slides"),Ct=mt.find("div.wslide-overlay-top-left"),xt=mt.find("div.wslide-overlay-top-right"),kt=mt.find("div.wslide-overlay-left"),St=mt.find("div.wslide-overlay-right"),Tt=Ct.add(xt).add(kt).add(St),$t.length>1){var e=function(){v&&a(),Q(),N()},n=function(){v&&a(),Q(),L()},o=function(){v&&a()};v&&mt.on("click",o);var s=u(),r=d();i.showPlayButton!==!1&&Ct.append(l()).append(c()),i.arrows!==!1&&(i.slide||i.forceSideArrows?(kt.append(s).on("click",e),St.append(r).on("click",n)):(s.on("click",e),r.on("click",n),xt.append(s).append("&nbsp;").append(r)))}return Tt=Tt.find(".wslide-button-wrap"),mt}function a(){clearTimeout(Ft),et(Tt.queue().length),Ft=setTimeout(function(){nt()},1e3)}function l(){var e=t("<div class='wslide-button-wrap'><span class='wslide-play wslide-button disable-user-select'><span class='wslide-button-inner'>Play <span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),At=e.find(".wslide-play"),At.on("click",K),e}function c(){var e=t("<div class='wslide-button-wrap'><span class='wslide-pause wslide-button disable-user-select'><span class='wslide-button-inner'>Pause <span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),Dt=e.find(".wslide-pause"),Dt.on("click",Q),e}function u(){var e=t("<div class='wslide-button-wrap'><span class='wslide-prev wslide-button disable-user-select'><span class='wslide-button-inner'><span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),e}function d(){var e=t("<div class='wslide-button-wrap'><span class='wslide-next wslide-button disable-user-select'><span class='wslide-button-inner'><span class='wslide-button-icon'></span></span><span class='wslide-button-bg'></span></span></div>");return e.css({display:"inline-block"}),e}function m(){i.linkLocation;var e=i.linkTiers,n="wslide-links disable-user-select wslide-links-"+i.linkLocation;i.links&&(n+="thumbnails"==i.links?" wslide-thumbnail-links":" wslide-number-links"),vt=t("<div class='"+n+"'>"+"<div class='wslide-links-inner'>"+"<table><tbody></tbody></table>"+"</div>"+"</div>"),v?vt.on("touchstart",H).on("touchmove",q):vt.on("mouseover",V).on("mousemove",j).on("mouseout",U),bt=vt.children().first(),st(bt);var o=vt.find("tbody");if(Mt){for(var s=[],r=0;e>r;r++)s[r]=t("<tr/>"),o.append(s[r]);for(var r=0;r<$t.length;r++)s[r%e].append(y($t[r],r))}else for(var a=$t.length,l=0,r=0;a>r;l++){for(var c=t("<tr/>"),u=0;e>u&&a>r;u++,r++)c.append(y($t[r],r));o.append(c)}return v&&"undefined"!=typeof whenPhotoSwipeLoaded&&whenPhotoSwipeLoaded(function(){Code.PhotoSwipe.attach(vt.find("a").toArray(),{captionAndToolbarFlipPosition:!0,captionAndToolbarAutoHideDelay:0,loop:!1})}),vt}function g(){for(var n=t("<div class='wslide-dots'></div>"),o=0;o<$t.length;o++)!function(e){n.append(t("<div class='wslide-dot' />").on("click",function(){Q(),W(e)}))}(o);mt.append(n);var s=i.dotPosition||"right";return"left"==s?n.css({left:10,bottom:10}):"center"==s?n.css({left:e.width()/2-n.width()/2,bottom:10}):"right"==s&&n.css({right:10,bottom:10}),n}function y(e,n){var o=t("<td/>");if("numbers"==i.links)o.append("<a class='wslide-link wslide-link-number'><div class='wslide-link-inner1'><div class='wslide-link-inner2'>"+(n+1)+"</div>"+"</div>"+"</a>");else{o.append("<a class='wslide-link wslide-link-thumbnail'><div class='wslide-link-inner1'><div class='wslide-link-inner2'><img style='visibility:hidden' /></div></div></a>");var s=o.find("img");setTimeout(function(){f(s[0],h(e),function(){R(s,e),s.css("visibility","")})},0)}var r=o.find("a");return v&&"undefined"!=typeof whenPhotoSwipeLoaded?r.attr("href",p(e)).attr("title",_.unescape(e.caption)):r.on("click",function(){Q(),W(n)}),st(r),yt[n]=r,o}function S(e,n,o){var s=!1,r=e.link;if(r){var a=r;r=r.replace("weeblylink_new_window",""),r!=a&&(s=!0)}var l=_.unescape(e.caption)?"<div style='display:none;' class='wslide-caption "+("top"==i.captionLocation?"wslide-caption-top":"wslide-caption-bottom")+"'>"+"<div class='wslide-caption-text'>"+_.unescape(e.caption)+"</div>"+"<div class='wslide-caption-bg'></div>"+"</div>":"",c=t("<div class='wslide-slide wslide-slide-loading'>"+(r?"<a>":"")+(i.fillDimensions?l:"")+"<div class='wslide-slide-inner1'>"+"<div class='wslide-slide-inner2' style='visibility:hidden'>"+"<img />"+(i.fillDimensions?"":l)+"</div>"+"</div>"+(r?"</a>":"")+"</div>");b||c.find(".wslide-caption").css({opacity:.99}),c.hide(),gt.append(c);var u=c.find("img"),d=u.closest(".wslide-slide-inner2");return Ut[n]=c,Yt[n]=u,Jt[n]=d,c.find("a").each(function(e,i){i=t(i),window.currentSite?(i.attr("href","#"),i.on("click",function(){return!1}),i.attr("title",_W.tl("Links active once published"))):r&&(i.attr("href",r),s&&i.attr("target","_blank"))}),f(u[0],p(e),function(){c.removeClass("wslide-slide-loading"),Gt[n]=u[0].width,Xt[n]=u[0].height,(0===Gt[n]||0===Xt[n])&&(c.show(0),Gt[n]=u[0].width,Xt[n]=u[0].height,c.hide(0)),D(),z(n),n==_t&&(O(n),Qt&&B()),d.css("visibility",""),o&&W(n)}),c}function T(){P(),A()}function A(){if(!J()&&mt){vt&&!Mt&&(Nt=bt.outerWidth(),vt.width(Nt)),D(),vt&&(Bt=bt.outerWidth(),Ht=bt.outerHeight(),Mt?(Nt=Pt,Lt=bt.outerHeight(),vt.height(Lt),qt=Nt-Bt,Vt=0):(Lt=Rt,vt.height(Lt),qt=Lt-Ht,Vt=0));var n=t(".wslide-dots"),o=200>Rt?Rt/20:10;"center"==i.dotPosition?n.css({left:e.width()/2-n.width()/2,bottom:o}):n.css({bottom:o}),Gt[_t]&&Xt[_t]&&(D(),z(_t),O(_t))}}function D(){Pt=mt.outerWidth(),i.fillDimensions&&!i.useAspectRatio?(Rt=e.height(),vt&&Mt&&(Rt-=bt.outerHeight())):Rt=Math.round(Pt/E()),mt.height(Rt)}function E(){if("auto"==i.aspectRatio){if(!$t.length)return 16/9;for(var e={},n=0;n<$t.length;n++){var o,s=$t[n].width/$t[n].height,r=!1;t.each(M,function(e,t){var i=t,n=Math.abs(i-s);(r===!1||r>n)&&(r=n,o=e)}),e[o]=(e[o]||0)+1}var a,l=!1;return t.each(e,function(e,t){(l===!1||t>l)&&(l=t,a=e)}),M[a]}return t.isNumeric(i.aspectRatio)?Number(i.aspectRatio):M[i.aspectRatio]}function P(){if(zt=0,Ot=0,vt){var e=vt.find("a.wslide-link-thumbnail").first();if(e.length){var t=e.children().first();zt=t.outerWidth(),Ot=t.outerHeight()}}}function R(e,t){var i=parseInt(t.width),n=parseInt(t.height),o=zt/i,s=Ot/n,r=Math.max(o,s),a=Math.ceil(i*r),l=Math.ceil(n*r);e.attr("width",a),e.attr("height",l),e.css("top",-Math.round(l/2)+"px"),e.css("left",-Math.round(a/2)+"px")}function z(e){var t,n=Ut[e],o=n.find(".wslide-caption"),s=Jt[e],r=Yt[e];t=i.fillDimensions?Math.max(Pt/Gt[e],Rt/Xt[e]):Math.min(Pt/Gt[e],Rt/Xt[e],1);var a,l;if(l=Math.ceil(Gt[e]*t),a=Math.ceil(Xt[e]*t),l+1<=Gt[e]&&(l++,a++),r.width(l),s.css("width",l),s.css("left",-Math.round(l/2)),s.css("top",-Math.ceil(a/2)),o.length&&i.fillDimensions){var c;n.is(":hidden")?(n.show(),c=o.outerHeight(),n.hide()):c=o.outerHeight();var u=.25*Rt-c/2,d=.13*Rt;u=Math.max(d,u),o.css("bottom",u)}o.show()}function O(e){var t=Ut[e],n=t.offset(),o=t.outerWidth(),s=t.outerHeight(),r=Yt[e],a=r.offset(),l=r.outerWidth(),c=r.outerHeight(),u=Ut[e].find("div.wslide-caption").outerHeight();ui=Math.max(0,a.left-n.left),di=Math.max(0,n.left+o-(a.left+l)),hi=Math.max(0,a.top-n.top),$t[e].caption&&"top"==i.captionLocation&&s!=u&&(hi+=u),pi=Math.max(0,n.top+s-(a.top+c))}function F(t){var i=!1,n=_t;return _t=t,Ut[t]&&Gt[t]&&Xt[t]&&(D(),z(t),i=!0,Qt&&B()),yt&&(void 0!==n&&yt[n].removeClass("wslide-link-active"),yt[t].addClass("wslide-link-active"),Qt&&(e.find(".wslide-link-thumbnail img").css({opacity:.5}),e.find(".wslide-thumbnail-links .wslide-link-active img").css({opacity:1}))),wt&&wt.find(".wslide-dot").removeClass("wslide-dot-current").eq(t).addClass("wslide-dot-current"),Z(),i}function W(e,n,o){if($t.length&&!Kt){e=Math.min($t.length-1,Math.max(0,e));var s=I(e,e);if(!s){if(e!=_t){var r=_t,a=F(e),l=n;if(l||(l=e>r?1:-1),o||void 0===r)void 0!==r&&Ut[r].hide(),Ut[e].show(),a&&O(e);else if("mosaic"==i.transition){var c=0>l;vi(e);var u=t(".wslide-box",gt),d=0,h=c?150*(ai-1):0;fi(e,r),Kt=!0,u.each(function(i){var n=t(this);setTimeout(function(){n.animate({opacity:"1.0"},500,function(){d++,d==u.length&&(Ut[r].hide(),Kt=!1,Ut[e].find("img").show(),setTimeout(function(){u.remove()},50))})},h),0==(i+1)%ai?(h=75*((i+1)/ai),c&&(h+=150*(ai-1))):h=c?h-150:h+150})}else if("slice"==i.transition)fi(e,r),mi(e,r,0>l,!1);else if("fold"==i.transition)fi(e,r),mi(e,r,0>l,!0);else if("slide"==i.transition||i.slide){var p=Ut[e],f=Ut[r];p.css({left:l*Pt+"px"}).show(),Kt=!0,gt.css({left:0}).animate({left:-l*Pt+"px"},{duration:500,complete:function(){a&&O(e),f.hide(),gt.css({left:0}),p.css({left:0}),Kt=!1}})}else{var m=Ut[r].find(".wslide-slide-inner2"),g=Ut[e].find(".wslide-slide-inner2"),v=function(){a&&O(e),Ut[r].hide(),Kt=!1
};Ut[e].show(),Kt=!0;var y=.99;b&&(y=1),m.css({opacity:y}).animate({opacity:0},{duration:500,complete:v}),g.css({opacity:0}).animate({opacity:y},{duration:500,complete:v})}}ct("slideChange",e)}}}function I(e,t){for(var i=!1,n=e;e+w>=n&&n<$t.length;n++)n>=0&&!Ut[n]&&(S($t[n],n,n===t),i=e===n?!0:!1);return i}function N(){var e=(_t-1+$t.length)%$t.length;e>=0&&(W(e,-1),Y(e,!1))}function L(){var e=(_t+1)%$t.length;W(e,1),Y(e,!0)}function B(){Et=setTimeout(function(){J()||L()},1e3*i.speed)}function H(e){bi=e.pageX||e.originalEvent.pageX,yi=e.pageY||e.originalEvent.pageY}function q(e){var t=e.pageX||e.originalEvent.pageX,i=e.pageY||e.originalEvent.pageY;ri=Mt?t-bi:i-yi,bi=t,yi=i,si=ri,$(),e.preventDefault()}function V(){ni=!0,oi++,Mt?Wt=vt.offset().left:It=vt.offset().top}function j(e){if(!(Mt&&Nt>Bt||!Mt&&Lt>Ht)){var t;t=Mt?(e.pageX-Wt)/Nt:(e.pageY-It)/Lt;var i;C>t?(i=(1-t/C)*k,i*=i):t>1-C?(i=(t-(1-C))/C*k,i*=-i):i=0,i=Math.round(i),si!=i&&(si=i,jt||(jt=setInterval($,35)))}}function $(){si>ri?ri+=x:ri>si&&(ri-=x),ri||si?Mt?(ti=Math.min(Vt,Math.max(qt,ti+ri)),bt.css("left",ti)):(ii=Math.min(Vt,Math.max(qt,ii+ri)),bt.css("top",ii)):(clearInterval(jt),jt=null)}function U(){var e=++oi;setTimeout(function(){e==oi&&(si=0,ni=!1)},10)}function Y(e,t){if(yt&&!ni){var i=yt[e];if(Mt){var n=i.position().left,o=n+bt.position().left,s=i.outerWidth();(0>o||o+s>Nt)&&(t?G(-n):G(-(n+s-Nt)))}else{var r=i.position().top,a=r+bt.position().top,l=i.outerHeight();(0>a||a+l>Lt)&&(t?X(-r):X(-(r+l-Lt)))}}}function G(e){e=Math.min(Vt,Math.max(qt,e)),bt.animate({left:e},500)}function X(e){e=Math.min(Vt,Math.max(qt,e)),bt.animate({top:e},500)}function J(){return e.parents("body").length?!1:(s(),!0)}function K(e){$t.length>1&&!Qt&&(Qt=!0,Z(),Gt[_t]&&Xt[_t]&&(e?L():B()),ct("play"))}function Q(){Qt&&(e.find(".wslide-link-thumbnail img").css({opacity:1}),Qt=!1,Z(),clearTimeout(Et),Et=null,Zt++,ct("pause"))}function Z(){$t.length>1&&i.showPlayButton!==!1&&(Qt?(At.css("opacity",0).hide(),Dt.css("opacity",1).show()):(At.css("opacity",1).show(),Dt.css("opacity",0).hide()))}function et(e){ot(),e||tt(),Tt.show().css("opacity",1),ei=!0}function tt(){Ct.css("padding-top",hi),Ct.css("padding-left",ui),xt.css("padding-top",hi),xt.css("padding-right",di),kt.css("padding-left",ui),St.css("padding-right",di)}function it(){ot(),Tt.hide(),ei=!1}function nt(){ei&&(ei=!1,Tt.animate({opacity:0},{duration:1e3,complete:function(){it()}}))}function ot(){Tt.stop(!0)}function st(e){function i(i){function n(e){var t=rt(e);c=u,u=t,s=t-r,Math.abs(s)>15&&(d=!1),Mt?(ti=a+s,ti=Math.max(qt,ti),ti=Math.min(Vt,ti),bt.css("left",ti)):(ii=l+s,ii=Math.max(qt,ii),ii=Math.min(Vt,ii),bt.css("top",ii))}function o(){d&&e.is("a")&&window.Code.Util.Events.fire(e[0],"click"),null===u||null===c?ri=0:(ri=u-c,ri=Math.max(-15,ri),ri=Math.min(15,ri)),si=0,jt||(jt=setInterval($,35)),t(document).off(Mi,n).off(Ci,o).off(xi,o)}Q(),jt&&(clearInterval(jt),jt=null,ri=0);var s,r=rt(i),a=ti,l=ii,c=null,u=null,d=!0;return t(document).off(Mi,n).off(Ci,o).off(xi,o),!1}e.on(_i,i)}function rt(e){return Mt?at(e).pageX:at(e).pageY}function at(e){return wi?e:e.touches[0]}function lt(e,t){var i=ki[e]||[];i.push(t),ki[e]=i}function ct(e){var i=this,n=Array.prototype.slice.call(arguments,1);t.each(ki[e]||[],function(e,t){t.apply(i,n)})}function ut(){return ki}function dt(e){ki=e}function ht(){ki={}}function pt(){var e=++Si;setTimeout(function(){e==Si&&(J()||A())},500)}var ft=this;ft.render=n,ft.destroy=o,ft.updateSize=A,ft.play=K,ft.pause=Q,ft.on=lt,ft.getHandlers=ut,ft.setHandlers=dt,ft.clearHandlers=ht,ft.getPhotos=function(){return $t},ft.isPlaying=function(){return Qt},ft.getSlideIndex=function(){return _t},ft.gotoSlide=function(e,t){Q(),W(e,void 0,t)},e=t(e),i=i||{};var mt,gt,vt,bt,yt,wt,_t,Mt,Ct,xt,kt,St,Tt,At,Dt,Et,Pt,Rt,zt,Ot,Ft,Wt,It,Nt,Lt,Bt,Ht,qt,Vt,jt,$t=i.images||[],Ut=[],Yt=[],Gt=[],Xt=[],Jt=[],Kt=!1,Qt=!1,Zt=0,ei=!0,ti=0,ii=0,ni=!1,oi=0,si=0,ri=0,ai=8,li=4,ci=15,ui=0,di=0,hi=0,pi=0,fi=function(e,t){var i=Ut[e].find(".wslide-caption"),n=Ut[t].find(".wslide-caption"),o=.99;b&&(o=1),n.css({"z-index":3,opacity:o}).animate({opacity:0},{duration:1e3}),i.css({"z-index":3,opacity:0}).animate({opacity:o},{duration:1e3})},mi=function(e,i,n,o){gi(e);var s=0,r=t(".wslide-slice",gt);n&&(Array.prototype._reverse?Array.prototype._reverse.call(r):Array.prototype.reverse.call(r));var a=0;Kt=!0,r.each(function(){var n=t(this),l={opacity:"1.0"};if(o){var c=n.width();n.css({width:"0px"}),l.width=c}setTimeout(function(){n.animate(l,500,function(){a++,a==r.length&&(Ut[i].hide(),Kt=!1,Ut[e].find("img").css("visibility","visible"),setTimeout(function(){r.remove()},50))})},s),s+=65})},gi=function(e,i){var n=Ut[e],o=n.find("img"),s=o.attr("src"),r=o.up(".wslide-slide-inner2");n.show();var a=o.height(),l=Math.round(r.width()/ci);o.css("visibility","hidden");for(var c=0;ci>c;c++){var u=t("<img>").attr({src:s}).css({position:"absolute",width:r.width()+"px",height:"auto",display:"block !important",top:0}),d=t('<div class="wslide-slice"></div>');d.css({position:"absolute",height:a+"px",opacity:"0",overflow:"hidden","z-index":"2","-webkit-backface-visibility":"hidden"}),i?(u.css({left:-((ci-c-1)*l)+"px"}),d.css({right:l*c+"px"})):(u.css({left:-c*l+"px"}),d.css({left:l*c+"px"})),c===ci-1?d.css({width:r.width()-l*c+"px"}):d.css({width:l+"px"}),d.append(u),r.append(d)}},vi=function(e){var i=Ut[e],n=i.find("img"),o=n.attr("src"),s=n.up(".wslide-slide");i.show();var r=Math.round(s.width()/ai),a=Math.round(s.height()/li),l=Math.floor(n.offset().left-s.offset().left),c=Math.ceil(n.offset().top-s.offset().top);n.hide();for(var u=0;li>u;u++)for(var d=0;ai>d;d++){var h=t("<img>").attr({src:o}).css({position:"absolute",width:n.width()+"px",height:"auto",display:"block !important",top:-(a*u)+c+"px",left:-(r*d)+l+"px"}),p=t('<div class="wslide-box"></div>').append(h);p.css({position:"absolute",opacity:0,left:r*d+"px",top:a*u+"px",overflow:"hidden","z-index":"2","-webkit-backface-visibility":"hidden"}),d===ai-1?p.css({width:s.width()-r*d+"px"}):p.css({width:r+"px"}),u===li-1?p.css({height:s.height()-a*u+"px"}):p.css({height:a+"px"}),s.append(p)}},bi=0,yi=0,wi=!0,_i=wi?"mousedown":"touchstart",Mi=wi?"mousemove":"touchmove",Ci=wi?"mouseup":"touchend",xi=wi?"xxx":"touchcancel",ki={},Si=0}function h(e){var t=e.url;if(t.match("/weebly/images/")||t.match("x-com-weebly-images")||(t="/uploads/"+t.replace(/^\/uploads\//,"")),window.inEditor&&inEditor()){var i=require("config");i.chromeless&&t.startsWith("/")&&(t="http://"+configSiteName+t)}return t}function p(e){var t=e.url;if(t.match("/weebly/images/")||t.match("x-com-weebly-images")||(t="/uploads/"+t.replace(/^\/uploads\//,""),e.thumbnail!==!1&&(t=t.replace(/^(.*)\.([^\.]+)$/,"$1_orig.$2"))),window.inEditor&&inEditor()){var i=require("config");i.chromeless&&t.startsWith("/")&&(t="http://"+configSiteName+t)}return t}function f(e,t,i){function n(){o&&(clearInterval(o),o=null),s||(s=!0,i())}var o=null,s=!1;if(e.onload=n,e.src=t,window.inEditor&&inEditor()){var r=require("config");r.chromeless&&e.src.startsWith("/")&&(e.src="http://"+configSiteName+e.src)}e.complete?n():o=setInterval(function(){e.complete&&n()},500)}e.Slideshow=window.wSlideshow={getSlideshowImages:o,updateSize:s,generateHTML:r,init:a,updatePhotos:l,render:c,initHeaderSlideshow:i,instantiateHeaderSlideshow:n,thumbnailURL:h,largeURL:p};var m={},g={},v="ontouchstart"in document.documentElement,b=!1;if(t.browser.msie){var y=parseInt(t.browser.version,10);9>y&&(b=!0)}var w=5,M={"16:9":16/9,"3:2":1.5,"4:3":4/3},C=.4,x=1,k=4}(Weebly,Weebly.jQuery),_wAMD.define("legacy/slideshow-jq",function(e){return function(){var t;return t||e.Weebly.Slideshow}}(this)),_wAMD.define("tpl!imageperfect/hover-controls",[],function(){return"\n<div class='imageperfect-wrap'>\n	<div class='button {{#allowSlideshow}}button-complex{{/allowSlideshow}}'>\n		<div class='main'>\n			{{#isSlideshow}}\n				{{#tl}}Edit Slideshow{{/tl}}\n			{{/isSlideshow}}\n			{{^isSlideshow}}\n				{{#tl}}Edit Image{{/tl}}\n			{{/isSlideshow}}\n		</div>\n		{{#allowSlideshow}}\n			<div class='expander'><div></div></div>\n		{{/allowSlideshow}}\n	</div>\n	{{#allowSlideshow}}\n		<div class='menu' style='display:none'>\n			<div class='carrot'></div>\n			<div class='inner'>\n				<div class='item image'>\n					<div>\n						{{#tl}}Edit Image{{/tl}}\n					</div>\n				</div>\n				<div class='item slideshow'>\n					<div>\n						{{#hasSlideshowData}}\n							{{#tl}}Edit Slideshow{{/tl}}\n						{{/hasSlideshowData}}\n						{{^hasSlideshowData}}\n							{{#tl}}Create Slideshow{{/tl}}\n						{{/hasSlideshowData}}\n					</div>\n				</div>\n			</div>\n		</div>\n	{{/allowSlideshow}}\n</div>\n{{#allowPageTypes}}\n	<div class='page-type-wrap'>\n		<div class='expander'><div></div></div>\n		<div class='menu' style='display:none'>\n			<div class='carrot'></div>\n			<div class='inner'>\n				<div class='header'>{{#tl}}Page Layout{{/tl}}</div>\n				<div class='items'>\n					{{#pageTypes}}\n						<div class='item {{className}}' data-page-type='{{name}}'>\n							<div class='item-icon'></div>\n							<div class='item-text'>{{title}}</div>\n						</div>\n					{{/pageTypes}}\n				</div>\n			</div>\n		</div>\n	</div>\n{{/allowPageTypes}}"}),function(e){function t(t){function i(){n(),s++}function n(){r||(r=!0,t.mouseover&&t.mouseover())}function o(){var e=++s;setTimeout(function(){e==s&&(r=!1,t.mouseout&&t.mouseout())},t.delay||100)}var s=0,r=!1,a=e();e.each(t.elements||[],function(){a=a.add(this)}),a.on("mouseover",i).on("mousemove",n).on("mouseout",o),this.destroy=function(){a.off("mouseover",i).off("mousemove",n).off("mouseout",o)}}window.HoverHelper=t}(Weebly.jQuery),_wAMD.define("legacy/classes/HoverHelper",function(){}),_wAMD.define("image-editing/HoverControls",["jquery","backbone","mustache","tpl!imageperfect/hover-controls","legacy/classes/HoverHelper"],function(e,t,i,n){n=i.compile(n);var o=t.View.extend({isEditMenuExpanded:!1,isTypeMenuExpanded:!1,hoverHelper:null,className:"header-hover-container w-ui",events:{"click .imageperfect-wrap .main":"edit","click .imageperfect-wrap .item.image":"editImage","click .imageperfect-wrap .item.slideshow":"editSlideshow","click .imageperfect-wrap .expander":"toggleEditMenu","click .page-type-wrap .expander":"toggleTypeMenu","click .page-type-wrap .item":"pageTypeClick"},getAvailablePageTypes:function(){return getOrderedPageTypes(currentThemeData.page_type_templates,Weebly.view.isMobileView)},initialize:function(e){this.options=e},render:function(){var t=this,i=t.getAvailablePageTypes(),o=t.options.currentHeader,s=e.map(i,function(e){var t=e;"landing"==e&&(t=_W.tl("landing page")),t=t.replace(/[\s-]+/g," ").replace(/(^|\s)(.)/g,function(e){return e.toUpperCase()});var i=e;return e==currentPageType&&(i+=" current"),{name:e,className:i,title:_W.tl(t)}});return t.$el.hide().html(n({hasSlideshowData:o&&o.data&&o.data.slideshow,isSlideshow:o&&o.data&&o.data.is_slideshow,allowSlideshow:t.options.allowSlideshow,allowPageTypes:t.options.allowPageTypes&&s.length>1,pageTypes:s})),t.attach(),t},attach:function(){var t=this,i=e(t.options.targetElement),n=e(t.options.appendToElement);t.hoverHelper=new window.HoverHelper({delay:300,elements:[i,t.$el],mouseover:function(){t.getIsEditing()||(t.show(),t.position())},mouseout:function(){t.hide()}}),t.$el.appendTo(n)},position:function(){var t=this,i=e(t.options.targetElement),n=e(t.options.appendToElement),o=n.offset(),s=i.offset();t.$el.css({top:0,left:0}),"topright"==t.options.position?t.$el.css({top:s.top-o.top+n.scrollTop()+10,left:s.left-o.left+n.scrollLeft()+i.outerWidth()-10-t.$el.width()}):t.$el.css({top:s.top-o.top+n.scrollTop()+i.outerHeight()-10-t.$el.height(),left:s.left-o.left+n.scrollLeft()+i.outerWidth()-20-t.$el.width()})},toggleEditMenu:function(){this.isEditMenuExpanded?this.contractEditMenu():this.expandEditMenu()},expandEditMenu:function(){this.$(".imageperfect-wrap .expander").addClass("pressed"),this.$(".imageperfect-wrap .menu").show(),this.isEditMenuExpanded=!0},contractEditMenu:function(){this.$(".imageperfect-wrap .expander").removeClass("pressed"),this.$(".imageperfect-wrap .menu").hide(),this.isEditMenuExpanded=!1},toggleTypeMenu:function(){this.isTypeMenuExpanded?this.contractTypeMenu():this.expandTypeMenu()},expandTypeMenu:function(){this.$(".page-type-wrap .expander").addClass("pressed"),this.$(".page-type-wrap .menu").show(),this.isTypeMenuExpanded=!0},contractTypeMenu:function(){this.$(".page-type-wrap .expander").removeClass("pressed"),this.$(".page-type-wrap .menu").hide(),this.isTypeMenuExpanded=!1},show:function(){this.$el.show()},hide:function(){this.contractEditMenu(),this.contractTypeMenu(),this.$el.hide()},edit:function(){this.hide(),this.options.editCallback()},editImage:function(){this.hide(),this.options.editCallback({forceImage:!0})},editSlideshow:function(){this.hide(),this.options.editCallback({forceSlideshow:!0})},getIsEditing:function(){return this.options.getIsEditing?this.options.getIsEditing():!1},pageTypeClick:function(t){var i=e(t.currentTarget),n=i.data("page-type");this.changePageType(n)},changePageType:function(t){this.contractTypeMenu();var i=e("#wsite-com-area-category").attr("data-id"),n="";i||(n=currentPage.replace(/^(\d+).*$/,"$1")),new Ajax.Request(ajax,{parameters:{pos:"set_page_type",category_id:i,page_id:n,page_type:t,token:Weebly.RequestToken},onSuccess:function(){n&&(Weebly.PageManager.pages[n].layout=t),updateList(currentPage),n&&"no-header"==t&&(hasDoneUserEvent("no-header-message")||(showTip(_W.tl('Page header hidden. To add it back, change this page\'s layout in the "Pages" tab.'),"weebly_tab_pages"),markUserEventDone("no-header-message")))}})},destroy:function(){this.hoverHelper.destroy(),this.remove()}});return o}),_wAMD.define("editor/theme-background/utils",["jquery"],function(e){function t(e){e.css({"background-position":"","background-size":"","background-repeat":"","background-image":"","background-attachment":""})}function i(e){return"fixed"==e.css("background-attachment","").css("background-attachment")}return{getBackgroundElements:function(){return e("#icontent_container").find('.wsite-background, [class^="wsite-background-"], [class*=" wsite-background-"]')},getBackgroundElement:function(t){var i=e("#icontent_container .wsite-background"+(t?"-"+t:""));return i.length?i:void 0},getNonBackgroundElements:function(e){return e.siblings().add(e.children())},applyBackgrounds:function(i){var n=this,o=this.getBackgroundElements();editorApp.ThemeBackground.drawInlineControls(),t(e("#scroll_container,#icontent_container")),e("#icontent").removeClass("wsite-custom-background"),o.each(function(){var t=e(this),o=t.attr("class")||"",s=o.match(/\bwsite-background(?:-([\w-]*))?\b/),r=s[1]||"",a=i[r];n.applyBackgroundToElement(a,t)})},applyBackgroundToElement:function(n,o,s){var r,a,l,c={"background-position":"","background-size":"","background-image":"","background-attachment":""};n&&n.get("image")&&!n.get("image").get("useThemeDefault")?o.addClass("wsite-custom-background"):o.removeClass("wsite-custom-background");var u=!1;if(o.is("#icontent")&&(u=!0,t(o),t(o.parent()),t(e("#scroll_container"))),n){var d=n.get("image"),h=n.get("zoom");l=n.get("position"),r=h?100+100*h+"%":"cover",a=n.get("backgroundPosition"),d&&!d.get("useThemeDefault")&&(s?(c={"background-size":"cover","background-repeat":"no-repeat"},a="50% 50%",r="cover"):"fill"!=l&&l?"left"==l?(c={"background-position":"0% 0%","background-size":"auto","background-repeat":"no-repeat"},a="0% 0%"):"center"==l?(c={"background-position":"50% 0%","background-size":"auto","background-repeat":"no-repeat"},a="50% 0%"):"right"==l?(c={"background-position":"100% 0%","background-size":"auto","background-repeat":"no-repeat"},a="100% 0%"):"tile"==l&&(c={"background-position":"0 0","background-size":"auto","background-repeat":"repeat"},a="0 0"):(c={"background-position":"50% 50%","background-repeat":"no-repeat"},u&&(c["background-attachment"]="fixed"),a=a?a:"50% 50%"),a&&o[0].style.setProperty("background-position",a,"important"),r&&("fill"===l||s)?o[0].style.setProperty("background-size",r,"important"):o[0].style.setProperty("background-size","auto","important"),c["background-color"]="transparent",c["background-image"]="url('"+d.getUrl()+"')")}return u&&("fixed"==c["background-attachment"]||i(e("#scroll_container"))?(o.css({"background-image":"none","background-color":"transparent"}),o=o.parent(),a&&o[0].style.setProperty("background-position",a,"important"),r&&("fill"===l||s)?o[0].style.setProperty("background-size",r,"important"):o[0].style.setProperty("background-size","auto","important")):o.css("background-color","")),o.css(c),o},getDefaultBackgroundUrl:function(t){var n=!1;t.is("#icontent")&&(n=!0,t=t.parent()),n&&i(e("#scroll_container"))&&(t=t.parent());var o=t.css("background-image"),s=e("#scroll_container").find(".wsite-custom-background");t.css("background-image",""),s.removeClass("wsite-custom-background");var r=this.getCssBackgroundUrl(t);return s.addClass("wsite-custom-background"),t.css("background-image")!=o&&t.css("background-image",o),r},getCssBackgroundUrl:function(e){var t=e.css("background-image");if(t){var i=t.match(/url\(('([^']*)'|"([^"]*)"|(.*?))\)/);if(i)return i[2]||i[3]||i[4]}},copyPositioningProperties:function(e,t){var i,n=["float","position","width","height","left","top","backgroundSize","backgroundPosition","marginLeft","marginTop","paddingLeft","paddingTop","padding"];n.forEach(function(n){i="height"===n?e.outerHeight():"width"===n?e.outerWidth():e.css(n),t.css(n,i)}),t.offset(e.offset())},checkIsBody:function(e){return e.is("#icontent")?e.parent():e}}}),function(e,t){function i(e){f=t(e)}function n(){return f[0]}function o(t,i,n){var o=e.currentHeader,s=e.view.isMobileView;a(),e.view.isMobileView&&(t||(t={}),t.url||(t.url=e.mobile.getHeaderPlaceholder())),e.view.isMobileView&&f.css({height:""}),t.data&&t.data.is_slideshow&&t.data.slideshow?r(t.data.slideshow):t&&t.url?(!o||t.url!=o.url||i)&&(e.view.isMobileView?(f.css({height:"auto","min-height":"0",background:"none"}),f.html('<img src="'+t.url+'" style="width:100%;height:auto;display:block;">')):f.css({backgroundImage:"url("+t.url+")",backgroundPosition:t.id?"0 0":""})):((o&&o.url||i)&&f.css({backgroundImage:"",backgroundPosition:""}),f.empty()),e.currentHeader=t,e.Permissions.allow_header_editing&&d(s),n||updateFooterAttribution()}function s(){return h}function r(t){var i,n;return h&&(i=h.getSlideIndex(),n=h.getHandlers(),a()),h=e.Slideshow.instantiateHeaderSlideshow(t),whenThemeCSSLoaded(function(){h&&h.render()}),void 0!==i&&h.gotoSlide(i,!0),void 0!==n&&h.setHandlers(n),h}function a(){h&&(h.destroy(),h=null)}function l(t,i){if(!isFlashInstalled())return showFlashWarning(_W.tl("Adobe Flash Player is required in order to edit images and header slideshows.")),void 0;var i=i||{};return e.view.isMobileView&&"area"!=i.mode?(i.onFinish=function(){e.mobile.isMobileEditor(!1),Pages.go("mobileView")},e.mobile.isMobileEditor(!0),Pages.go("webView",l,[t,i]),void 0):(t||f[0]?u(function(){e.headerEditor.start(t||f[0],i)}):require("editor/theme-background/utils").getBackgroundElement()&&require("editor/app").ThemeBackground.open(),void 0)}function c(){u(function(){e.headerEditor.preload()})}function u(e){e()}function d(){if(p&&p.destroy(),f.length){var i=require("image-editing/HoverControls"),n=e.view.isMobileView;p=new i({currentHeader:e.currentHeader,targetElement:f,appendToElement:n?t("#w-mobile-phone-screen"):t("#scroll_container"),allowPageTypes:!n,allowSlideshow:!n,position:"topright",editCallback:function(t){t=t||{},t.forceSlideshow&&!e.Restrictions.hasAccess("slideshow_header")?editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"slideshow_header",restrictionType:"feature",refer:"main"}):l(void 0,t)},getIsEditing:function(){return e.headerEditor&&e.headerEditor.isEditing}}),p.render()}}window.reportHeaderElement=i,window.getCurrentHeaderElement=n,window.setCurrentHeaderImage=o,window.getHeaderSlideshow=s,window.updateHeaderSlideshow=r,window.clearHeaderSlideshow=a,window.startImagePerfect=l,window.preloadImagePerfect=c;var h,p,f=t()}(Weebly,Weebly.jQuery),_wAMD.define("legacy/weebly_header_image",["legacy/slideshow-jq","legacy/weebly_page_manager","legacy/weebly_restrictions","image-editing/HoverControls","editor/theme-background/utils"],function(){}),window.Weebly=window.Weebly||{};var settingAnimations=0,settingQuickExport=0,settingTooltips=0,uploadInProgress=0,exiting=0,ajax="/weebly/getElements.php",ajaxStatusCheckTimeout=4e3,ajaxStatusTimeoutGrowthFactor=1;Weebly.ajaxLog=[],window.onbeforeunload=function(){exiting=1};var myGlobalHandlers={onCreate:function(e,t){if(t.request.times={start:(new Date).getTime()},window.swfu&&swfu.currentUpload&&$("upload"+swfu.currentUpload)&&(t.request.concurrentUpload=!0),e.options.bgRequest||startWait(),e.parameters&&e.parameters.pos&&(Weebly.ajaxLog.push(e.parameters.pos),Weebly.ajaxLog.size()>10&&Weebly.ajaxLog.shift()),e.options.requestHeaders=e.options.requestHeaders||{},"undefined"!=typeof currentSite&&(e.options.requestHeaders["Weebly-Site-ID"]=currentSite),!e.options.requestHeaders["x-ajax-request-id"]){var i=(new Date).getTime()+""+Math.floor(999*Math.random());e.options.requestHeaders["x-ajax-request-id"]=i}e.options.isRetry&&e.options.previouslyAborted&&(e.options.requestHeaders["x-ajax-abort-retry"]=ajaxStatusCheckTimeout),e.options.isRetry||Prototype.Browser.IE6||setTimeout(function(){checkAjaxRequestStatus(e)},ajaxStatusCheckTimeout)},onLoading:function(e,t){t.request.times&&t.request.times.start&&(t.request.times.initialized=(new Date).getTime()-t.request.times.start)},onLoaded:function(e,t){t.request.times&&t.request.times.start&&(t.request.times.sent=(new Date).getTime()-t.request.times.start,e.options.isRetry&&t.request.times.sent>ajaxStatusCheckTimeout/2&&(ajaxStatusCheckTimeout+=ajaxStatusCheckTimeout*ajaxStatusTimeoutGrowthFactor,ajaxStatusTimeoutGrowthFactor=.9*ajaxStatusTimeoutGrowthFactor))},onInteractive:function(e,t){t.request.times&&t.request.times.start&&!t.request.times.response&&(t.request.times.response=(new Date).getTime()-t.request.times.start)},onComplete:function(e,t){return 0!=t.status||e.aborted?(t.request.times&&t.request.times.start&&(t.request.times.end=(new Date).getTime(),t.request.times.complete=t.request.times.end-t.request.times.start),e.options.bgRequest||endWait(),e.isRetriable()?e.retry():handleLogout(t,e),void 0):(retriableErrFunc(e,t),!1)},onException:endWait};Ajax.Responders.register(myGlobalHandlers),Ajax.Request.addMethods({abort:function(){if(!this._complete){this.transport.onreadystatechange=Prototype.emptyFunction,this.transport.abort(),this._complete=!0,this.aborted=!0;var e=new Ajax.Response(this);["Abort","Complete"].each(function(t){try{(this.options["on"+t]||Prototype.emptyFunction)(e,e.headerJSON),Ajax.Responders.dispatch("on"+t,this,e,e.headerJSON)}catch(i){this.dispatchException(i)}},this)}},retry:function(e){if(e||this.isRetriable()){var t=this.options||{};t._retryCount=(t._retryCount||0)+1,t.isRetry=!0,t.previouslyAborted=this.aborted?!0:!1,new Ajax.Request(this.url,t)}},isRetriable:function(){if(!this._complete)return!1;var e=this.getStatus(),t=this.options||{},i=t.maxRetries||1,n=t._retryCount||0;return(408==e||e>1e4||this.aborted)&&i>n}}),_wAMD.define("legacy/weebly_utils_ajax",function(){}),_wAMD.define("legacy/weebly_design_options",["jquery","underscore","legacy/classes/Font","legacy/weebly_header_image","legacy/weebly_utils_ajax"],function(e,t,i){function n(e){var i="";return t.each(e,function(e,t){e&&(/}\s*$/.test(e)||(e+="}\n"),"hoverStyle"!=t&&(i+=e))}),i+=e.hoverStyle}function o(e){var t={};return t.font=e.css("fontFamily").replace(/"/g,"'").split(",")[0].toLowerCase(),t.size=e.css("fontSize"),/px$/.test(t.size)||(t.size="auto"),t.weight=e.css("fontWeight"),isNaN(t.weight)&&(t.weight=t.weight.toUpperCase(),"BOLD"==t.weight&&(t.weight=700),"NORMAL"==t.weight&&(t.weight=400),"LIGHTER"==t.weight&&(t.weight=300)),t.color=e.css("color"),t.height=e.css("lineHeight"),/px$/.test(t.height)||(t.height="auto"),t}var s={};return s.DESIGN_OPTIONS_SELECTORS={global:".wsite-elements.wsite-not-footer div.paragraph, .wsite-elements.wsite-not-footer p, .wsite-elements.wsite-not-footer .product-block .product-title, .wsite-elements.wsite-not-footer .product-description, .wsite-elements.wsite-not-footer .weebly-form-field label, .wsite-elements.wsite-not-footer .wsite-form-field label, #secondlist div.paragraph, #secondlist p, #secondlist .product-block .product-title, #secondlist .product-description, #secondlist .weebly-form-field label, #secondlist .wsite-form-field label",globalColor:"#secondlist div.paragraph, #secondlist p, #secondlist .product-block .product-title, #secondlist .product-description, #secondlist .weebly-form-field label, #secondlist .wsite-form-field label",footerGlobal:".wsite-elements.wsite-footer div.paragraph, .wsite-elements.wsite-footer p, .wsite-elements.wsite-footer .product-block .product-title, .wsite-elements.wsite-footer .product-description, .wsite-elements.wsite-footer .weebly-form-field label, .wsite-elements.wsite-footer .wsite-form-field label",header:".wsite-elements.wsite-not-footer h2, .wsite-elements.wsite-not-footer .product-long .product-title, .wsite-elements.wsite-not-footer .product-large .product-title, .wsite-elements.wsite-not-footer .product-small .product-title, #secondlist h2, #secondlist .product-long .product-title, #secondlist .product-large .product-title, #secondlist .product-small .product-title",headerColor:"#secondlist h2, #secondlist .product-long .product-title, #secondlist .product-large .product-title, #secondlist .product-small .product-title",footerHeader:".wsite-elements.wsite-footer h2, .wsite-elements.wsite-footer .product-long .product-title, .wsite-elements.wsite-footer .product-large .product-title, .wsite-elements.wsite-footer .product-small .product-title",siteTitle:"#wsite-title",navMenu:".wsite-menu-default a",flyoutMenu:".wsite-menu a",imageCaptions:".wsite-image div, .wsite-caption",galleryCaptions:".galleryCaptionInnerText",lightboxGalleryCaptions:".fancybox-title",slideshowCaptions:".wslide-caption-text",phone:".wsite-phone",headline:".wsite-headline",subHeadline:".wsite-headline-paragraph",button:".wsite-button-inner",blockquote:".wsite-not-footer blockquote",footerBlockquote:".wsite-footer blockquote",blogPostTitle:".blog-header h2 a",productHighlight:".wsite-product",productTitle:"#secondlist h2.wsite-product-title",productPrice:".wsite-product .wsite-product-price a"},s.applyDesignOptions=function(){var o={globalStyle:s.DESIGN_OPTIONS_SELECTORS.global+" {",globalColorStyle:s.DESIGN_OPTIONS_SELECTORS.globalColor+" {",footerGlobalStyle:s.DESIGN_OPTIONS_SELECTORS.footerGlobal+" {",headerStyle:s.DESIGN_OPTIONS_SELECTORS.header+" {",headerColorStyle:s.DESIGN_OPTIONS_SELECTORS.headerColor+" {",footerHeaderStyle:s.DESIGN_OPTIONS_SELECTORS.footerHeader+" {",siteTitleStyle:s.DESIGN_OPTIONS_SELECTORS.siteTitle+" {",linkStyle:"",hoverStyle:"",navMenuStyle:s.DESIGN_OPTIONS_SELECTORS.navMenu+" {",flyoutMenuStyle:s.DESIGN_OPTIONS_SELECTORS.flyoutMenu+" {",imageCaptionsStyle:s.DESIGN_OPTIONS_SELECTORS.imageCaptions+" {",galleryCaptionsStyle:s.DESIGN_OPTIONS_SELECTORS.galleryCaptions+" {",lightboxGalleryCaptionsStyle:s.DESIGN_OPTIONS_SELECTORS.lightboxGalleryCaptions+" {",slideshowCaptionsStyle:s.DESIGN_OPTIONS_SELECTORS.slideshowCaptions+" {",phoneStyle:s.DESIGN_OPTIONS_SELECTORS.phone+" {",headlineStyle:s.DESIGN_OPTIONS_SELECTORS.headline+" {",subHeadlineStyle:s.DESIGN_OPTIONS_SELECTORS.subHeadline+" {",buttonStyle:s.DESIGN_OPTIONS_SELECTORS.button+" {",blockquoteStyle:s.DESIGN_OPTIONS_SELECTORS.blockquote+" {",footerBlockquoteStyle:s.DESIGN_OPTIONS_SELECTORS.footerBlockquote+" {",blogPostTitleStyle:s.DESIGN_OPTIONS_SELECTORS.blogPostTitle+" {",productTitleStyle:s.DESIGN_OPTIONS_SELECTORS.productTitle+" {",productPriceStyle:s.DESIGN_OPTIONS_SELECTORS.productPrice+" {"};t.each(Weebly.DesignOptions,function(e,t){var n,s;if(e){if("globalColor"==t)return o.globalColorStyle+="color:"+e+" !important;",void 0;if("headerColor"==t)return o.headerColorStyle+="color:"+e+" !important;",void 0;if("aLink"==t)return o.linkStyle+=".wsite-not-footer h2.wsite-content-title a, .wsite-not-footer .paragraph a, .wsite-not-footer blockquote a, .wsite-not-footer .blog-sidebar a, .wsite-not-footer .blog-comments a, .wsite-not-footer .blog-comments-bottom a, #wsite-com-store a, #wsite-com-product-gen a {color:"+e+" !important;}\n",void 0;if("aHover"==t)return o.hoverStyle+=".wsite-not-footer h2.wsite-content-title a:hover, .wsite-not-footer .paragraph a:hover, .wsite-not-footer blockquote a:hover, .wsite-not-footer .blog-sidebar a:hover, .wsite-not-footer .blog-comments a:hover, .wsite-not-footer .blog-comments-bottom a:hover, #wsite-com-store a:hover, #wsite-com-product-gen a:hover {color:"+e+" !important;}\n",void 0;if("footerALink"==t)return o.linkStyle+=".wsite-footer h2 a, .wsite-footer .paragraph a, .wsite-footer blockquote a {color:"+e+" !important;}\n",void 0;if("footerAHover"==t)return o.hoverStyle+=".wsite-footer h2 a:hover, .wsite-footer .paragraph a:hover, .wsite-footer blockquote a:hover {color:"+e+" !important;}\n",void 0;if("buttonSize"==t)return o.hoverStyle+=".wsite-button-large .wsite-button-inner {font-size:"+e+" !important;}\n",void 0;if("smallButtonSize"==t)return o.hoverStyle+=".wsite-button-small .wsite-button-inner {font-size:"+e+" !important;}\n",void 0;if("blogPostTitleHover"==t)return o.hoverStyle+=".blog-header h2 a:hover {color:"+e+" !important;}\n",void 0;(s=/(.*)Font$/.exec(t))?(e=e.replace(/'|"/g,""),n='font-family:"'+e+'" !important;',i.loadFont(e)):(s=/(.*)Size$/.exec(t))?n="font-size:"+e+" !important;":(s=/(.*)Weight$/.exec(t))?n="font-weight:"+e+" !important;":(s=/(.*)Color$/.exec(t))?n="color:"+e+" !important;":(s=/(.*)LineHeight$/.exec(t))&&(n="line-height:"+e+" !important;"),n&&s&&o[s[1]+"Style"]&&(o[s[1]+"Style"]+=n)}});var r=n(o),a=e("#designOptionsStyle");a&&a.remove();var l=e("<style/>",{type:"text/css",id:"designOptionsStyle"});l[0].styleSheet?l[0].styleSheet.cssText=r:l=l.html(r),e("head").append(l),"pageHeaderImage"in Weebly.DesignOptions&&window.setCurrentHeaderImage(Weebly.DesignOptions.pageHeaderImage)},s.stripFontName=function(e){return e.replace(/(^['"\s]*|['"\s]*$)/g,"")},s.saveDesignOption=function(e,t){s.setDesignOption(e,t),new Ajax.Request(window.ajax,{parameters:{pos:"savedesignoption",cookie:document.cookie,option:window.currentTheme+"|"+e,value:t,token:Weebly.RequestToken},onFailure:window.errFunc,onException:window.exceptionFunc,bgRequest:!0})},s.setDesignOption=function(e,t){Weebly.DesignOptions[e]=t},s.getCurrentStyles=function(t){var i,n=!1,r=null,a=null,l={};switch(t){case"site-title":r=e(s.DESIGN_OPTIONS_SELECTORS.siteTitle).eq(0),r.length||(r=e("<div/>",{id:"wsite-title"}),n=!0);break;case"paragraph-title":r=e(s.DESIGN_OPTIONS_SELECTORS.header).eq(0),r.length||(r=e("<h2/>"),n=!0);break;case"footer-paragraph-title":r=e(s.DESIGN_OPTIONS_SELECTORS.footerHeader).eq(0),r.length||(r=e("<h2/>"),n=!0);break;case"paragraph-text":r=e(s.DESIGN_OPTIONS_SELECTORS.global).eq(0),r.length||(r=e("<div/>",{"class":"paragraph"}),n=!0);break;case"footer-paragraph-text":r=e(s.DESIGN_OPTIONS_SELECTORS.footerGlobal).eq(0),r.length||(r=e("<div/>",{"class":"paragraph"}),n=!0);break;case"links":return i=e("<a/>",{href:"http://www.test.com"}),e("#secondlist").append(i),l.link=i.css("color"),i.remove(),l.hover=Weebly.DesignOptions&&Weebly.DesignOptions.aHover?Weebly.DesignOptions.aHover:l.link,l;case"footer-links":return i=e("<a/>",{href:"http://www.test.com"}),e(".wsite-footer").eq(0).append(i),l.link=i.css("color"),i.remove(),l.hover=Weebly.DesignOptions&&Weebly.DesignOptions.footerAHover?Weebly.DesignOptions.footerAHover:l.link,l;case"image-captions":r=e(s.DESIGN_OPTIONS_SELECTORS.imageCaptions).eq(0),r.length||(r=e("<div/>"),a=r.wrap('<div class="wsite-image"/>'),n=!0);break;case"photo-gallery-captions":r=e(s.DESIGN_OPTIONS_SELECTORS.galleryCaptions).eq(0),r.length||(r=e("<div/>",{"class":"galleryCaptionInnerText"}),a=r.wrap('<div class="imageGallery"/>'),n=!0);
break;case"lightbox-gallery-captions":r=e(s.DESIGN_OPTIONS_SELECTORS.lightboxGalleryCaptions).eq(0),r.length||(r=e('<div class="fancybox-title"/>'),n=!0);break;case"slideshow-captions":r=e(s.DESIGN_OPTIONS_SELECTORS.slideshowCaptions).eq(0),r.length||(r=e('<div class="wslide"/>'),n=!0);break;case"navigation-menu-text":r=e(s.DESIGN_OPTIONS_SELECTORS.navMenu).eq(0),r.length||(r=e("<a/>"),a=r.wrap('<li id="active" class="w-menu-item"/>'),n=!0);break;case"flyout-menu-text":r=e(s.DESIGN_OPTIONS_SELECTORS.flyoutMenu).eq(0),r.length||(r=e("<a/>"),a=r.wrap("<li/>").wrap('<ul class="wsite-menu"/>'),n=!0);break;case"phone-number-field":r=e(s.DESIGN_OPTIONS_SELECTORS.phone).eq(0),r.length||(r=e("<span/>",{"class":"wsite-text"}),a=r.wrap('<span class="phone-number"/>').wrap('<div id="header-right"/>'),n=!0);break;case"landing-page-headline":r=e(s.DESIGN_OPTIONS_SELECTORS.headline).eq(0),r.length||(r=e("<span/>",{"class":"wsite-headline"}),a=r.wrap("<h2/>"),n=!0);break;case"landing-page-sub-headline":r=e(s.DESIGN_OPTIONS_SELECTORS.subHeadline).eq(0),r.length||(r=e("<span/>",{"class":"wsite-headline-paragraph"}),a=r.wrap("<p/>"),n=!0);break;case"button":r=e(s.DESIGN_OPTIONS_SELECTORS.button).eq(0),r.length||(r=e("<span/>",{"class":"wsite-button-inner"}),a=r.wrap('<span class="wsite-button-large wsite-button-normal"/>'),n=!0);break;case"small-button":r=e(s.DESIGN_OPTIONS_SELECTORS.smallButton).eq(0),r.length||(r=e("<span/>",{"class":"wsite-button-inner"}),a=r.wrap('<span class="wsite-button-small wsite-button-normal"/>'),n=!0);break;case"blockquote":r=e(s.DESIGN_OPTIONS_SELECTORS.blockquote).eq(0),r.length||(r=e("<blockquote/>"),n=!0);break;case"footer-blockquote":r=e(s.DESIGN_OPTIONS_SELECTORS.footerBlockquote).eq(0),r.length||(r=e("<blockquote/>"),n=!0);break;case"blog-post-title":return i=e(s.DESIGN_OPTIONS_SELECTORS.blogPostTitle).eq(0),i||(i=e("<a/>",{"class":"blog-title-link"}),a=i.wrap('<h2 class="blog-title"/>'),a=a.wrap('<div class="blog-header"/>'),e("#secondlist").append(a),n=!0),l=o(i),l.hover=Weebly.DesignOptions&&Weebly.DesignOptions.blogPostTitleHover?Weebly.DesignOptions.blogPostTitleHover:l.color,n&&a.remove(),l;case"product-title":r=e(s.DESIGN_OPTIONS_SELECTORS.productTitle).eq(0),r.length||(r=e("<h2/>",{"class":"wsite-product-title"}),n=!0);break;case"product-price":r=e(s.DESIGN_OPTIONS_SELECTORS.productPrice).eq(0),r.length||(r=e("<a/>"),a=r.wrap('<div class="wsite-product-price"/>'),n=!0)}if(n){var c=/^footer/.test(t)?e(".wsite-footer").eq(0):e("#secondlist");c.append(a?a:r)}return l=o(r),n&&(a?a.remove():r.remove()),l},s.loadDesignOptions=function(e){e=e||window.currentTheme,new Ajax.Request(window.ajax,{parameters:{pos:"loaddesignoptions",theme:e,cookie:document.cookie,header_page_id:window.currentPage},asynchronous:!1,onSuccess:function(e){s.setDesignOptions(JSON.parse(e.responseText)),s.applyDesignOptions()},onFailure:window.errFunc,onException:window.exceptionFunc})},s.setDesignOptions=function(e){Weebly.DesignOptions=e},Weebly.DesignOptions={},t.extend(window,s),s}),Weebly=Weebly||{},Weebly.EventManager=Class.create({initialize:function(){this.events={},this.logging=!1},fireEvent:function(e){var t=this.events[e];if(this.log(e,"firing",[t]),!t)return this;var i=Array.from(arguments);i.shift();for(var n=t.length-1;n>=0;n--){var o=t[n],s=o.$event;this.log(e,"calling",[o,s]),o.apply(s.bind,i.concat(s.args)),s.once&&this.removeListener(e,o)}return this},addListener:function(e,t){if("function"==typeof t&&(t={func:t}),!t||"function"!=typeof t.func)return this;this.log(e,"adding listener",[e,t]);var i={};i.args=Array.from(t.args)||[],i.bind=t.bind||null,i.once=t.once||!1;var n=t.func;return n.$event=i,t.removeOn&&(n=this.wrapListenerRemoval(e,n,t.removeOn)),this.events[e]=this.events[e]||[],this.events[e].push(n),this},removeListener:function(e,t){this.log(e,"removing listener",[t]);var i=this.events[e];if(!i)return this;var n=i.indexOf(t);if(-1==n)return this;var t=i[n],o=t.$event;return o.removeOn&&this.removeListener(o.removeOn[0],o.removeOn[1]),i.splice(n,1),this},wrapListenerRemoval:function(e,t,i){this.log(e,"wrapping removal",[t,i]);var n=this,o=function(){n.removeListener(e,t)};return this.addListener(i,o),t.$event.removeOn=[i,o],t},log:function(e,t,i){this.logging&&console.log(e+": "+t,i||[])}}),Weebly.Events=new Weebly.EventManager,_wAMD.define("legacy/weebly_events",function(e){return function(){var t;return t||e.Weebly.Events}}(this)),_wAMD.define("legacy/weebly_view",["jquery","editor/app","legacy/classes/ElementSpotlight","editor/build/themes/utils","legacy/weebly_design_options","legacy/weebly_events","legacy/weebly_mobile","site/general"],function(e,t,i,n,o,s,r){var a={isMobileView:!1},l="",c=!1,u=function(e,t){window.whenThemeCSSLoaded(function(){setTimeout(function(){"function"==typeof e&&e.apply(this,t)},1)})};return a.setMobileView=function(n,o){if(!a.isMobileView&&!c){e("#w-editor-mobile").show(),e("body").addClass("w-mobile-editor"),e(".device-switcher").addClass("mobile-selected"),c=!0,a.isMobileView=!0,c=!1,ENABLE_PAGE_HIERARCHY=!1,l=currentThemeColor;var d=i.getCurrent();d&&d.close(),e("#wsite-web-view").removeClass("weebly-current"),e("#wsite-mobile-view").addClass("weebly-current"),e("#designOptionsStyle").remove(),navFlyoutMenu&&navFlyoutMenu.destroy(),t.vent.once("themeRendered",function(){u(n,o)},this),r.init(),s.fireEvent("viewChange"),e("#icontent").addClass("wsite-mobile"),e("#menuitem-cc").hide()}},a.setStandardView=function(d,h){if(a.isMobileView&&!c){e(".device-switcher").removeClass("mobile-selected"),r.swapiContentOut(),e("#scroll_container").addClass("blackout"),setTimeout(function(){e("body").removeClass("w-mobile-editor")},0),c=!0,a.isMobileView=!1,c=!1,r.removeBindings(),ENABLE_PAGE_HIERARCHY=!0;var p=i.getCurrent();p&&p.close(),t.vent.once("themeRendered",function(){u(d,h)},this),n.setCurrentTheme(currentStandardTheme,!1),currentThemeColor=l,t.vent.trigger("forceThemeRerender"),updateList(currentPage),e("#wsite-mobile-view").removeClass("weebly-current"),e("#wsite-web-view").addClass("weebly-current"),o.applyDesignOptions(),e("#blog-navigation, #blog-navigation-placeholder").show(),window.Behaviour.apply(),s.fireEvent("viewChange"),e("#icontent").removeClass("wsite-mobile"),e("#menuitem-cc").show(),e("#w-editor-mobile").hide()}},Weebly.view=a,a}),_wAMD.define("commerce/editor/store/category/detail/display/CategoryDetailDisplayView",["jquery","backbone-all","mustache","commerce/editor/collection/Category","tpl!commerce/editor/store/category/detail/display","tpl!editor/loading","editor/build/themes/utils","legacy/weebly_view","util/ui/drawer"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.ItemView.extend({template:i.compile(s),className:"scaffold-com",templateHelpers:function(){var e=this;return{isStorefront:function(){return e.isStorefront},storeHasCategories:function(){return e.storeHasCategories},showSubCategories:function(){return e.isStorefront||e.hasSubCategory}}},ui:{showCategories:"input[name=show_sub_categories]"},events:{"change [name=category_layout]":"updatePageLayout","change @ui.showCategories":"updateShowCategories"},initialize:function(e){var t=this;this.isStorefront=e.isStorefront,this.hasSubCategory=e.hasSubCategory,this.$el.toggleClass("no-image-collector",this.isStorefront);var s=new n;s.fetch().done(function(){t.storeHasCategories=t.model.isNew()||s.length>1,t.template=i.compile(o),t.render()})},onRender:function(){var e=function(e){var t=e.replace("-"," ");return t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},t=r.getOrderedPageTypes(currentThemeData.page_type_templates,a.isMobileView),i=this.model.get("page_layout")||"no-header",n=this.$el.find("select");jQuery.each(t,function(t,o){n.append('<option value="'+o+'" '+(i==o?"selected":"")+">"+_W.tl(e(o))+"</option>")}),this.$el.find("select").wSelectbox({theme:"com"})},updatePageLayout:function(){this.model.set("page_layout",this.$el.find("[name=category_layout]").val())},updateShowCategories:function(){var e=this,t=e.ui.showCategories,i=t.prop("checked");t.toggleClass("checked",i),e.model.set("show_sub_categories",i)}});return l}),_wAMD.define("tpl!commerce/editor/store/category/detail/footer",[],function(){return'<div class="footer-spacer"></div>\n<div class="footer-bar">\n	{{^isStorefront}}\n		{{^isNew}}\n			<button class="delete-category btn-com btn-danger">\n				{{#tl}}Delete Category{{/tl}}\n			</button>\n		{{/isNew}}\n	{{/isStorefront}}\n\n	<div class="main-actions">\n		{{^isStorefront}}\n			<button class="cancel-category-edit btn-com">{{#tl}}Cancel{{/tl}}</button>\n		{{/isStorefront}}\n\n		<button class="save-category btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#isStorefront}}\n					{{#tl}}Update Changes{{/tl}}\n				{{/isStorefront}}\n				{{^isStorefront}}\n					{{#tl}}Save Category{{/tl}}\n				{{/isStorefront}}\n			</span>\n		</button>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/category/detail/footer/CategoryDetailFooterView",["jquery","backbone-all","mustache","util/ui/wLoadButton","tpl!commerce/editor/store/category/detail/footer"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:function(){var e=this;return{isNew:function(){return e.model.isNew()},isStorefront:function(){return e.isStorefront}}},ui:{footerBar:".footer-bar",saveButton:".save-category"},events:{"click .delete-category":"deleteCategory","click .cancel-category-edit":"cancelCategory","mouseup .save-category":"saveCategory"},modelEvents:{change:"categoryChanged"},initialize:function(e){this.options=e=e||{},this.parentView=e.parentView,this.isStorefront=e.isStorefront},onShow:function(){var e=this;e.$("input[type=checkbox]").wCheckbox(),e.ui.saveButton.wLoadButton({endText:_W.tl("Updated")}),e.categoryChanged(),e.options.showAnimated.done(function(){e.isClosed||e.ui.footerBar.show()}),e.options.showLeaving.done(function(){e.isClosed||e.ui.footerBar.hide()})},categoryChanged:function(){this.ui.saveButton.wLoadButton("reset")},leaveView:function(){this.ui.footerBar.hide()},deleteCategory:function(){this.parentView.deleteCategory()},cancelCategory:function(){this.parentView.cancelCategory()},saveCategory:function(){var t=this.ui.saveButton.wLoadButton("startWait"),i=this.parentView.saveCategory();e.when(i).done(function(){t.wLoadButton("endWait")})}});return s}),_wAMD.define("tpl!commerce/editor/store/category/detail",[],function(){return'{{^loading}}\n	<div class="title-bar">\n		<div class="buttons">\n			{{^isNew}}\n				<button class="view-category btn-com btn-icon-left">\n					<span class="w-icon-external"></span>\n						{{#isStorefront}}\n							{{#tl}}View Storefront{{/tl}}\n						{{/isStorefront}}\n						{{^isStorefront}}\n							{{#tl}}View Category{{/tl}}\n						{{/isStorefront}}\n				</button>\n			{{/isNew}}\n		</div>\n\n		{{^isStorefront}}\n			<button class="back btn-com btn-back">{{#tl}}back{{/tl}}</button>\n		{{/isStorefront}}\n\n		<h1>\n			{{#isStorefront}}\n				{{#tl}}Storefront{{/tl}}\n			{{/isStorefront}}\n			{{^isStorefront}}\n				{{#isNew}}{{#tl}}Add Category{{/tl}}{{/isNew}}\n				{{^isNew}}{{#tl}}Edit Category{{/tl}}{{/isNew}}\n			{{/isStorefront}}\n		</h1>\n	</div>\n\n	<div class="images"></div>\n	<div class="display"></div>\n	<div class="advanced"></div>\n	<div class="meta"></div>\n	<div class="products-region"></div>\n	<div class="footer"></div>\n	<div class="dialog-region"></div>\n{{/loading}}'}),_wAMD.define("commerce/editor/store/category/detail/CategoryDetailView",["jquery","underscore","backbone-all","mustache","editor/app","commerce/editor/model/Category","commerce/editor/collection/Category","commerce/editor/model/CategoryHierarchy","commerce/editor/components/chooser/ProductChooser","util/ui/wLoadButton","./meta/CategoryDetailMetaView","./images/CategoryDetailImagesView","./advanced/CategoryDetailAdvancedView","./display/CategoryDetailDisplayView","./footer/CategoryDetailFooterView","components/regions/Dialog","components/views/ConfirmView","tpl!commerce/editor/store/category/detail"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v){var b=i.Marionette.Layout.extend({template:n.compile(v),className:"store-entity-detail store-category-detail",templateHelpers:function(){var e=this;return{loading:function(){return e.loading},isNew:function(){return e.model.isNew()},isStorefront:function(){return e.isStorefront}}},events:{"click .back":"cancelCategory","click .view-category":"viewCategory"},regions:{metaRegion:".meta",productsRegion:".products-region",imagesRegion:".images",displayRegion:".display",advancedRegion:".advanced",footerRegion:".footer",dialogRegion:m.extend({el:".dialog-region"})},initialize:function(t){var n=this,l=!1;if(n.loading=!0,startWait(),!n.model){var c=new r,u=s.getID(t);u&&(l=c.fetch().done(function(){n.model=c.findWhere({site_category_id:u})}))}n.model||l||(n.model=new s);var d=a.findOrCreate();e.when(l,d.fetch()).done(function(){var s=n.model.get("site_category_id"),r=o.commerce.storefrontSettings.get("storefront_category_id");n.parentCategory=t.parent,n.isStorefront=s===r,n.showAnimated=e.Deferred(),n.showLeaving=e.Deferred();var a=d.find(s);n.hasSubCategory=a&&0!==a.children.length,n.loading=!1,endWait(),i.Validation.bind(n),n.rendered&&(n.render(),n.onShow())}).fail(function(){}),n.listenTo(o.commerce.store,"close",n.cancelCategory)},onShow:function(){if(this.rendered=!0,!this.loading){var e=this,t=e.model,i=e.isStorefront;e.productsRegion.show(new l({model:t,isStorefront:i,reverseRelationKey:"categories",sortable:!0,text:{list:_W.tl("Category Products")}})),i||(e.metaRegion.show(new u({model:t,isStorefront:i,showAnimated:e.showAnimated})),e.imagesRegion.show(new d({model:t,isStorefront:i}))),e.displayRegion.show(new p({model:t,isStorefront:i,hasSubCategory:e.hasSubCategory})),e.advancedRegion.show(new h({model:t,isStorefront:i})),e.footerRegion.show(new f({model:t,isStorefront:i,parentView:e,showAnimated:e.showAnimated,showLeaving:e.showLeaving})),e.$(".footer-bar input[type=checkbox]").wCheckbox(),e.$(".save-category").wLoadButton()}},onShowAnimated:function(e){this.showAnimated.resolve(e)},onShowLeaving:function(){this.showLeaving.resolve()},preventClose:function(){return i.preventClose.ifModelChanged(this.model)},onClose:function(){this.model.rollback()},cancelCategory:function(){this.isStorefront||o.commerce.vent.trigger("store:category:list")},viewCategory:function(){o.vent.trigger("build:category:view",this.model)},deleteCategory:function(){var e=this,t=new g({message:_W.tl("Are you sure you want to delete this category?"),callback:function(t){t&&(e.cancelCategory(),o.commerce.vent.trigger("store:category:delete:confirmed",e.model))}});e.dialogRegion.show(t)},saveCategory:function(){var i=this,n=i.model,o=!1;n.get("preferred_order_product_ids")||n.set("preferred_order_product_ids",[]);var s=n.validate();if(n.isValid()){var r=n.isNew(),l=a.findOrCreate(),c=l.fetch(),o=n.commit();e.when(o,c).done(function(){r&&(l.addCategory(n,i.parentCategory),l.save()),i.cancelCategory()})}else t.each(s,function(e,t){i.$('[name="'+t+'"]').addClass("error").before('<div class="form-error alert alert-error">'+text+"</div>")});return o}});return b}),_wAMD.define("commerce/editor/store/category/CategoryView",["editor/app","components/views/ListDetailView","./list/CategoryListView","./detail/CategoryDetailView","components/views/ConfirmView"],function(e,t,i,n,o){var s=t.prototype,r=t.extend({className:"category-view-main-region",listDetailOptions:{ListView:i,DetailView:n,eventModelName:"category"},initialize:function(){var t=this;s.initialize.apply(t,arguments),t.listenTo(e.commerce.vent,{"store:category:list":t.list,"store:category:edit":t.edit,"store:category:add":t.add,"store:category:copy":t.copy,"store:category:delete":t.confirmDelete})},confirmDelete:function(t){var i=this,n=new o({message:_W.tl("Are you sure you want to delete this category?"),callback:function(i){i&&e.commerce.vent.trigger("store:category:delete:confirmed",t)}});i.dialogRegion.show(n)}});return r}),_wAMD.define("tpl!commerce/editor/store/product/list/empty",[],function(){return'<td colspan="5">\n	{{#searchText}}\n		{{#tl}}No products found.{{/tl}}\n	{{/searchText}}\n	{{^searchText}}\n		{{#tl}}You currently don\'t have any products.{{/tl}}\n	{{/searchText}}\n</td>\n'}),_wAMD.define("commerce/editor/store/product/list/ProductEmptyListView",["backbone-all","mustache","editor/app","tpl!commerce/editor/store/product/list/empty"],function(e,t,i,n){var o=e.Marionette.CompositeView.extend({className:"store-product-list-empty",template:t.compile(n),tagName:"tr",templateHelpers:function(){var e=this;return{searchText:function(){return e.options.searchText}}},initialize:function(e){this.options=e}});return o}),_wAMD.define("tpl!components/view/empty-loading-view",[],function(){return'<span class="loading-animation-state">{{{loadingState}}}</span>\n<span class="loading-failure-state">{{{failureState}}}</span>\n<span class="loading-empty-state">{{{emptyState}}}</span>\n'}),_wAMD.define("components/views/EmptyLoadingView",["backbone-all","mustache","tpl!components/view/empty-loading-view"],function(e,t,i){var n=e.Marionette.ItemView.extend({className:"list-loading",template:t.compile(i),loadingState:_W.tl("Loading"),failureState:_W.tl("An error has occured, please try again"),emptyState:_W.tl("No items to display"),ui:{loading:".loading-animation-state",failure:".loading-failure-state",empty:".loading-empty-state"},templateHelpers:function(){var t=this,i=t.options;return{loadingState:function(){return t.loadingState.prototype instanceof e.View?new t.loadingState(i).render().el.innerHTML:t.loadingState},failureState:function(){return t.failureState.prototype instanceof e.View?new t.failureState(i).render().el.innerHTML:t.failureState},emptyState:function(){return t.emptyState.prototype instanceof e.View?new t.emptyState(i).render().el.innerHTML:t.emptyState}}},initialize:function(e){this.options=e},showFailure:function(){var e=this;e.ui.loading.hide(),e.ui.failure.addClass("active").show()},showEmpty:function(){var e=this;e.ui.loading.hide(),e.ui.empty.addClass("active").show()}});return n}),_wAMD.define("tpl!commerce/editor/store/general/list/loading",[],function(){return'<td {{#colspan}}colspan="{{colspan}}"{{/colspan}}>\n	<span class="loading-animation-state">{{{loadingState}}}</span>\n	<span class="loading-failure-state">{{{failureState}}}</span>\n	<span class="loading-empty-state">{{{emptyState}}}</span>\n</td>\n'}),_wAMD.define("commerce/editor/store/general/list/ListLoadingView",["backbone-all","mustache","components/views/EmptyLoadingView","tpl!commerce/editor/store/general/list/loading"],function(e,t,i,n){var o=i.extend({tagName:"tr",template:t.compile(n),colspan:void 0,templateHelpers:function(){var e=this,t=i.prototype.templateHelpers.apply(e,arguments);return _.extend({},{colspan:e.colspan},t)}});return o}),_wAMD.define("tpl!commerce/editor/store/product/list/item",[],function(){return'<td class="thumbnail"><div class="thumbnail-sizer">{{{thumbnail}}}</div></td>\n\n<td class="name" title="{{name}}">{{name}}</td>\n\n<td class="isHidden">\n	{{#hidden}}<i class="w-icon-hide"></i>{{/hidden}}\n</td>\n\n<td class="price">\n	{{#price_range}}{{{price_range}}}{{/price_range}}\n	{{^price_range}}&mdash;{{/price_range}}\n</td>\n\n<td class="inventory">\n	{{#inventoryTrackingEnabled}}{{totalInventory}}{{/inventoryTrackingEnabled}}\n	{{^inventoryTrackingEnabled}}&mdash;{{/inventoryTrackingEnabled}}\n</td>\n\n<td class="options">\n	<span class="menu w-icon-cog">{{>ui/hover-toolbar}}</span>\n</td>\n'}),_wAMD.define("commerce/editor/store/product/list/ProductListItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/product/list/item","tpl!ui/hover-toolbar"],function(e,t,i,n,o,s){i.compilePartial("ui/hover-toolbar",s);var r=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"tr",className:"selectable",ui:{menu:".hover-toolbar"},modelEvents:{change:"render"},events:{"click td":"editProduct","click .copy":"copyProduct","click .unpublish":"unpublishProduct","click .publish":"publishProduct","click .delete":"deleteProduct","click .menu":"toggleMenu",mouseleave:"hideMenu"},templateHelpers:function(){var e=this;return{inventoryTrackingEnabled:function(){return Weebly.Restrictions.hasAccess("com_inventory_tracking")&&this.track_inventory},totalInventory:function(){return this.inventory},hoverToolbarActions:function(){var e=[];return e.push({name:"copy",icon:"w-icon-copy",title:_W.tl("Duplicate")}),this.published?e.push({name:"unpublish",icon:"w-icon-hide",title:_W.tl("Unpublish")}):e.push({name:"publish",icon:"w-icon-compare",title:_W.tl("Publish")}),e.push({name:"delete",icon:"w-icon-delete",title:_W.tl("Delete")}),e},thumbnail:function(){return e.model.thumbnail(80)},hidden:function(){return!e.model.get("published")},price_range:function(){return e.model.getPriceRange()}}},onRender:function(){this.$el.find(".isHidden i").popover({content:_W.tl("Product Hidden"),container:"body",trigger:"hover",placement:"top",delay:{show:500,hide:100}})},onClose:function(){clearTimeout(this.imageLoadTimeout)},toggleMenu:function(e){e.stopPropagation(),this.ui.menu.toggle()},hideMenu:function(){this.ui.menu.hide()},editProduct:function(){n.vent.trigger("store:product:edit",this.model)},copyProduct:function(){n.commerce.vent.trigger("store:product:copy",this.model)},unpublishProduct:function(){this.model.set("published",!1),this.model.save()},publishProduct:function(){this.model.set("published",!0),this.model.save()},deleteProduct:function(){n.commerce.vent.trigger("store:product:delete",this.model)}});return r}),_wAMD.define("tpl!commerce/editor/store/product/list/list",[],function(){return'<table class="product-list entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th class="thumbnail"></th>\n			<th class="name">{{#tl}}Product Name{{/tl}}</th>\n			<th class="isHidden"></th>\n			<th class="price">{{#tl}}Price{{/tl}}</th>\n			<th class="inventory">{{#tl}}Inventory{{/tl}}</th>\n			<th class="options"></th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>'}),_wAMD.define("commerce/editor/store/product/list/ProductListTableView",["backbone-all","mustache","./ProductEmptyListView","commerce/editor/store/general/list/ListLoadingView","./ProductListItemView","tpl!commerce/editor/store/product/list/list"],function(e,t,i,n,o,s){var r=e.Marionette.CompositeView.extend({className:"store-product-list",template:t.compile(s),itemView:o,itemViewContainer:"tbody",emptyView:n.extend({colspan:6}),initialize:function(e){var t=this;t.searchText=e.searchText;var n=t.collection.fetch(e);n.done(function(e){t.emptyView=i,e.total||t.render()}),n.fail(function(e){console.log(e)})},itemViewOptions:function(){return{searchText:this.searchText}}});return r}),_wAMD.define("tpl!commerce/editor/store/general/pagination",[],function(){return'<div class="prev-next">\n	<button class="prev btn-com btn-back">{{#tl}}Previous{{/tl}}</button>\n	<button class="next btn-com btn-forward">{{#tl}}Next{{/tl}}</button>\n</div>\n\n<label class="page-size">\n	<select>\n		<option value="5" {{#pageSizeSelected}}5{{/pageSizeSelected}}>5</option>\n		<option value="10" {{#pageSizeSelected}}10{{/pageSizeSelected}}>10</option>\n		<option value="25" {{#pageSizeSelected}}25{{/pageSizeSelected}}>25</option>\n		<option value="50" {{#pageSizeSelected}}50{{/pageSizeSelected}}>50</option>\n	</select>\n	<span>{{#tl}}Per page{{/tl}}</span>\n	<span class="text-loading-animation"></span>\n</label>'}),_wAMD.define("commerce/editor/store/general/pagination/PaginationView",["backbone-all","tpl!commerce/editor/store/general/pagination","util/ui/wLoadButton"],function(e,t){var i={},n={currentPage:1,pageSize:10},o=e.Marionette.ItemView.extend({className:"pagination",template:Mustache.compile(t),ui:{prev:".prev",next:".next",pageSize:".page-size select",pageSizeLoading:".text-loading-animation"},events:{"click .prev":"prev","click .next":"next","change .page-size select":"pageSize"},templateHelpers:function(){var e=this.collection.state.pageSize;return{pageSizeSelected:function(){return function(t){return t==e?"selected":""}}}},initialize:function(){var e=this,t=e.collection,o=t._class,s=_.defaults(i[o]||{},n);e.options.pageSize&&(s.pageSize=e.options.pageSize),_.extend(t.state,s),e.state=i[o]=s,e.listenTo(t,"sync",e.update),e.listenTo(t,"destroy",e.modelDestroyed)},onRender:function(){this.update(),this.ui.prev.wLoadButton(),this.ui.next.wLoadButton()},update:function(){this.ui.prev.toggle(this.collection.hasPrevious()),this.ui.next.toggle(this.collection.hasNext())},prev:function(){this.navigate(this.ui.prev,"getPreviousPage")},next:function(){this.navigate(this.ui.next,"getNextPage")},modelDestroyed:function(){var e=this.collection;e.getPage(e.state.currentPage)},navigate:function(e,t){var i=this;i.navigating||(i.navigating=!0,e.wLoadButton("startWait"),i.collection[t]().done(function(){i.state.currentPage=i.collection.state.currentPage,e.wLoadButton("endWait"),i.navigating=!1}))},pageSize:function(){var e=this,t=e.collection,i=e.ui.pageSizeLoading,n=parseInt(e.ui.pageSize.val());i.show(),t.setPageSize(n),t.getFirstPage().done(function(){e.state.currentPage=e.collection.state.currentPage,e.state.pageSize=e.collection.state.pageSize,i.hide()})}},{resetState:function(e){var t=e.prototype._class;i[t]&&(i[t].currentPage=1)}});return o}),_wAMD.define("tpl!commerce/editor/store/product/list/layout",[],function(){return'<div class="title-bar">\n	<div class="buttons">\n		<button class="btn-com btn-large btn-icon-left import-products-button">\n			<span class="w-icon-upload"></span>\n			{{#tl}}Import Products{{/tl}}\n		</button>\n		<button class="btn-com btn-info btn-large btn-icon-left add-product-button">\n			<span class="w-icon-plus"></span>\n			{{#tl}}Add Product{{/tl}}\n		</button>\n	</div>\n\n	<h1>{{#tl}}Products{{/tl}}</h1>\n</div>\n\n<div class="list-detail-search-box">\n	<span class="input-labeled input-search">\n		<input type="text" name="searchText" class="search large" placeholder="{{#esc_attr}}{{#tl}}Search products{{/tl}}{{/esc_attr}}">\n	</span>\n</div>\n\n<div class="list"></div>\n<div class="pagination"></div>'}),_wAMD.define("commerce/editor/store/product/list/ProductListView",["backbone-all","mustache","editor/app","commerce/editor/model/_baseCommerceModel","commerce/editor/collection/Product","./ProductListTableView","commerce/editor/store/general/pagination/PaginationView","tpl!commerce/editor/store/product/list/layout"],function(e,t,i,n,o,s,r,a){var l=e.Marionette.Layout.extend({className:"store-product-list",template:t.compile(a),ui:{search:"input[name=searchText]",addProductButton:".add-product-button"},regions:{listRegion:".list",paginationRegion:".pagination"},events:{"click @ui.addProductButton":"addProduct","click .import-products-button":"importProducts","keyup @ui.search":"search"},initialize:function(){i.vent.trigger("store:setting:applySettingStyles"),this.listenTo(n.vent,"create:product",this.close)},onRender:function(){var e=new o([],{searchText:this.searchText});r.resetState(o),this.paginationRegion.show(new r({collection:e})),this.listRegion.show(new s({collection:e,searchText:this.searchText}))},addProduct:function(){i.vent.trigger("store:product:add")},importProducts:function(){i.vent.trigger("store:import")},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.searchText=t.ui.search.val()||null,t.onRender()},n)}});return l}),_wAMD.define("commerce/editor/model/OptionSuggestion",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OptionSuggestion"})}),_wAMD.define("commerce/editor/collection/OptionSuggestion",["./_baseCommerceCollection","../model/OptionSuggestion"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"OptionSuggestion"})}),_wAMD.define("tpl!commerce/editor/store/product/detail/meta",[],function(){return'<div class="row section">\n	<label class="label" for="editor_commerce_product_name">{{#tl}}Product Name{{/tl}}</label>\n	<br/>\n	<input id="editor_commerce_product_name" type="text" name="name" value="{{name}}" placeholder="{{#esc_attr}}{{#tl}}Give your product a name{{/tl}}{{/esc_attr}}">\n</div>\n\n<div class="row section richtext-area">\n	<label class="label" for="editor_commerce_product_short_description">{{#tl}}Short Description{{/tl}}</label>\n	<div id="editor_commerce_product_short_description" class="textarea-input" name="short_description" placeholder="">{{{short_description}}}</div>\n</div>\n\n<div class="section">\n	<table class="extra-meta">\n		{{^options2}}\n			{{#skus}}\n				{{#show_type_selection}}\n					<tr>\n						<td colspan="2">\n							<div class="row">\n								<label class="label" for="editor_commerce_product_type">{{#tl}}Product Type{{/tl}}:</label>\n								<br/>\n								<div class="dd-option-container">\n									<div class="dd-option">\n										<select id="editor_commerce_product_type" name="product_type">\n											<option value="physical"{{^is_digital_download}} selected{{/is_digital_download}}>{{#tl}}Physical Good{{/tl}}</option>\n											<option value="digital"{{#is_digital_download}} selected{{/is_digital_download}}>{{#tl}}Digital Good{{/tl}} {{^can_digital}}({{#tl}}Upgrade Required{{/tl}}){{/can_digital}}</option>\n										</select>\n									</div>\n								</div>\n							</div>\n						</td>\n					</tr>\n				{{/show_type_selection}}\n				<tr>\n					<td>\n						<div class="row">\n							<label class="label" for="editor_commerce_product_price">{{#tl}}Price{{/tl}}</label>\n							<br/>\n							<span class="input-currency {{currency}} input-label-number">\n								<input id="editor_commerce_product_price" type="text" name="price" value="{{price}}" pattern="[0-9]*">\n							</span>\n						</div>\n					</td>\n					<td>\n						<div class="row">\n							<label class="label" for="editor_commerce_product_sale_price">{{#tl}}Sale Price{{/tl}}</label>\n							<span class="note">(optional)</span>\n							<br/>\n							<span class="input-currency {{currency}} input-label-number">\n								<input id="editor_commerce_product_sale_price" type="text" name="sale_price" pattern="[0-9]*" placeholder="&mdash;" value="{{sale_price}}">\n							</span>\n						</div>\n					</td>\n				</tr>\n				<tr>\n					<td>\n						<div class="row">\n							<label class="label" for="editor_commerce_product_sku">{{#tl}}SKU{{/tl}}</label>\n							<span class="note">(optional)</span>\n							<br/>\n							<input id="editor_commerce_product_sku" type="text" name="sku" placeholder="&mdash;" value="{{sku}}">\n						</div>\n					</td>\n					<td>\n						<div class="row editor_commerce_physical_spec"{{#is_digital_download}} style="display:none;"{{/is_digital_download}}>\n							<label class="label" for="editor_commerce_product_weight">{{#tl}}Weight{{/tl}}</label>\n							<span class="note">(optional)</span>\n							<br/>\n							<span class="input-weight {{weight_unit}} input-label-number">\n								<input id="editor_commerce_product_weight" type="text" name="weight" pattern="[0-9]*" placeholder="&mdash;" value="{{weight}}">\n							</span>\n						</div>\n					</td>\n				</tr>\n			{{/skus}}\n		{{/options2}}\n\n		<tr class="meta-checkboxes">\n			<td>\n				<div class="row">\n					<input type="checkbox" name="track_inventory" id="product-track-inventory-input" {{#track_inventory}}checked{{/track_inventory}} {{^can_inventory}}disabled{{/can_inventory}} data-required-feature="com_inventory_tracking">\n					<label class="label" for="product-track-inventory-input">\n						{{#tl}}Track Inventory{{/tl}}\n						<span class="help w-icon-question" data-content="Track the number of items you have available for sale and prevent customers from purchasing if you\'re out of stock."></span>\n				</div>\n			</td>\n			<td>\n				<div class="row">\n					<input type="checkbox" name="taxable" id="product-charge-tax-input" {{#taxable}}checked{{/taxable}} {{^can_tax}}disabled{{/can_tax}} data-required-feature="com_tax_settings">\n					<label class="label" for="product-charge-tax-input">\n						{{#tl}}Charge Sales Tax{{/tl}}\n						<span class="help w-icon-question" data-content="Enable to charge customers tax when purchasing this item. Configure your store\'s tax rates in the Settings area."></span>\n					</label>\n				</div>\n			</td>\n		</tr>\n\n		{{^options2}}\n			{{#skus}}\n				{{#inventory_enabled}}\n					{{#track_inventory}}\n						<tr class="meta-checkboxes">\n							<td>\n								<div class="row">\n									<input id="editor_commerce_product_inventory" type="text" name="inventory" pattern="[0-9]*" placeholder="&#35;" value="{{inventory}}">\n								</div>\n							</td>\n						</tr>\n					{{/track_inventory}}\n				{{/inventory_enabled}}\n			{{/skus}}\n		{{/options2}}\n	</table>\n</div>\n'
}),_wAMD.define("util/facebookSDK",[],function(){var e,t={},i=!1;return t.embed=function(){if(!document.getElementById("facebook-jssdk")&&!e){var t;if(!document.getElementById("fb-root")){var i=document.createElement("div");i.id="fb-root",document.body.insertBefore(i,document.body.firstChild)}e=document.createElement("script"),e.id="facebook-jssdk",e.src="//connect.facebook.net/en_US/sdk.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}},t.parse=function(){document.getElementById("facebook-jssdk")||e?i&&"undefined"!=typeof FB&&(t.setColorScheme(),FB.XFBML.parse()):t.embed()},t.reparseCommentCount=function(){for(var e=document.getElementsByTagName("fb:comments-count"),t=0;t<e.length;t++)FB.XFBML.parse(e[t])},t.setColorScheme=function(){for(var e=document.getElementsByClassName("facebook-comment-widget"),t=document.getElementById("icontent")||document.body,i=t.className.match("wsite-theme-light"),n=0;n<e.length;n++)e[n].setAttribute("colorscheme",i?"light":"dark")},t.asyncInit=function(){FB.init({appId:"190291501407",xfbml:!0,version:"v2.2"}),FB.Event.subscribe("comment.create",t.reparseCommentCount),FB.Event.subscribe("comment.remove",t.reparseCommentCount),i=!0,t.parse()},t}),_wAMD.define("legacy/weebly_social_sharing",["jquery","util/facebookSDK"],function(e,t){function i(){n(),o()}function n(){e("#icontent").find("fb\\:like").length&&t.parse()}function o(){var t="https:"===window.location.protocol?"https://":"http://";e("#icontent").find("a.twitter-share-button").each(function(i,n){var o,s=e.param({_:+new Date,count:"horizontal",id:"twitter_tweet_button_0",land:"en",url:n.href.replace(/.*?\?url=(.*)$/,"$1")});s+="&text="+n.getAttribute("data-text"),o=e("<iframe />",{src:t+"platform.twitter.com/widgets/tweet_button.html?"+s,allowtransparency:"true",frameborder:"0",scrolling:"no","class":"twitter-share-button twitter-count-horizontal"}).css({width:110,height:20}),e(n).replaceWith(o)})}return window.fbAsyncInit=function(){t.asyncInit()},{init:i}}),_wAMD.define("editor/build/themes/partialsRenderer",["underscore","mustache"],function(e,t){var i={},n={};return i.setThemePartials=function(t){if(n!==t){for(var i in n)delete n[i];e.extend(n,t)}},i.render=function(o,s,r,a){var l=e.toArray(arguments).slice(1);return l[0]=i.getTemplate(o,s),n.length&&(l[2]=e.extend(a||{},n)),t.render.apply(t,l)},i.getTemplate=function(e,t){return e+=".tpl","/"===e[0]&&(e=e.substring(1)),n[e]?n[e]:t},i}),_wAMD.define("tpl!platform/theme/base/menu/item",[],function(){return'<li{{#id}} id="{{id}}"{{/id}} class="wsite-menu-item-wrap">{{! Designer note: id required & "wsite-menu-item-wrap" required on the item wrapper }}\n	<a href="{{itemlink}}" data-membership-required="{{membership-required}}"{{#target}} target="{{target}}"{{/target}} class="wsite-menu-item">{{! Designer note: "wsite-menu-item" required on the item link }}\n		{{{itemtitle}}}\n	</a>\n	{{#has_children}}{{> menu/submenu-main}}{{/has_children}}\n</li>\n'}),_wAMD.define("tpl!platform/theme/base/menu/item-current",[],function(){return'<li{{#id}} id="{{id}}"{{/id}} class="wsite-menu-item-wrap">{{! Designer note: id required & "wsite-menu-item-wrap" required on the item wrapper }}\n	<a href="{{itemlink}}"{{#target}} target="{{target}}"{{/target}} class="wsite-menu-item">{{! Designer note: "wsite-menu-item" required on the item link }}\n		{{{itemtitle}}}\n	</a>\n	{{#has_children}}{{> menu/submenu-main}}{{/has_children}}\n</li>\n'}),_wAMD.define("tpl!platform/theme/base/menu/main",[],function(){return'<ul class="wsite-menu-default">{{> menu/main-without-wrap}}</ul>{{! Designer note: "wsite-menu-default" required on menu element }}\n'}),_wAMD.define("tpl!platform/theme/base/menu/main-without-wrap",[],function(){return"{{#links}}{{!\n}}{{#current_page}}{{> menu/item-current}}{{/current_page}}{{!\n}}{{^current_page}}{{> menu/item}}{{/current_page}}{{!\n}}{{/links}}\n"}),_wAMD.define("tpl!platform/theme/base/menu/submenu-main",[],function(){return'<div class="wsite-menu-wrap" style="display:none">{{! Designer note: "wsite-menu-wrap" required on submenu wrapper }}\n	<ul class="wsite-menu">{{! Designer note: "wsite-menu" required on submenu element }}\n		{{#children}}{{> menu/submenu-item}}{{/children}}\n	</ul>\n</div>\n'}),_wAMD.define("tpl!platform/theme/base/menu/submenu-item",[],function(){return'<li{{#id}} id="{{id}}"{{/id}} class="wsite-menu-subitem-wrap{{#current_page}} wsite-nav-current{{/current_page}}">{{! Designer note: id required & "wsite-menu-subitem-wrap" required on the item wrap }}\n	<a href="{{itemlink}}"{{#target}} target="{{target}}"{{/target}} class="wsite-menu-subitem">{{! Designer note: "wsite-menu-subitem" required on the item link }}\n		<span class="wsite-menu-title">\n			{{{itemtitle}}}\n		</span>{{#has_children}}<span class="wsite-menu-arrow">&gt;</span>{{/has_children}}\n	</a>\n	{{#has_children}}{{> menu/submenu-main}}{{/has_children}}\n</li>\n'}),_wAMD.define("themes/view/PreviewTheme",["jquery","backbone-all","mustache"],function(e,t,i){var n=t.View.extend({events:{"click #cancel-button":"cancel","click #choose-button":"choose","click #w-theme-preview-colors a":"switchColor"},tagName:"div",id:"w-theme-preview",iframe:void 0,initialize:function(e){this.initializeTemplate(),this.user=e.user||"undefined"!=typeof userID?userID:"",this.site=e.site||"undefined"!=typeof currentSite?currentSite:"",this.theme=e.theme,this.themeForOptions=e.themeForOptions,this.colors=e.colors,this.selectedColor=e.selectedColor,this.callback=e.callback,this.create()},initializeTemplate:function(){this.templateTopbar=i.compile('<div id="w-theme-preview-top" class="w-ui w-ui-topbar"><div class="w-logo-top"><div class="w-logo'+(isClientSite?" alt":"")+'">'+_W.tl("Theme Preview")+"</div>"+"</div>"+'<ul class="tabs">'+"{{#palette}}{{{palette}}}{{/palette}}"+"{{^palette}}<li></li>{{/palette}}"+"</ul>"+'<ul class="right-buttons">'+'<li id="cancel-button" class="button-option">'+"<a><span>Cancel</span></a>"+"</li>"+'<li id="choose-button" class="button-option">'+"<a><span>Choose</span></a>"+"</li>"+"</ul>"+"</div>"),this.templatePalette=i.compile('<li id="w-theme-preview-palette"><ul id="w-theme-preview-colors">{{#colors}}<li><a style="background:{{sample}}" data-color="{{value}}"><span></span></a></li>{{/colors}}</ul></li>')},render:function(){var e,t;this.iframe=document.createElement("iframe"),this.iframe.src=this.generateURL(),this.colors.length>1&&(t=this.templatePalette({colors:this.colors})),e=this.templateTopbar({palette:t}),this.$el.append(e).append(this.iframe);var i=this.selectedColor||"";return i=i.replace(/'/g,"\\'"),this.$el.find("#w-theme-preview-colors a[data-color='"+i+"']").addClass("selected"),this},generateURL:function(){var e=this.theme.match(/^custom_(.*)_(\d+)$/),t=this.selectedColor?"&color="+this.selectedColor:"",i=this.themeForOptions;return"/theme_browser/preview.php?user_id="+this.user+"&site_id="+this.site+(e?"&custom_theme_id="+e[2]+"&custom_theme_name="+e[1]+t:"&theme_id="+this.theme+t)+(i?"&theme_id_for_options="+i:"")},create:function(){var t=this;this.render(),e(window.body).append(this.el),startWait(),e(this.iframe).on("load",function(){t.$el.addClass("show"),endWait()})},cancel:function(){var e=this;this.$el.removeClass("show"),setTimeout(function(){e.remove()},350),"undefined"!=typeof this.callback&&(this.callback(!1),this.callback=void 0)},choose:function(){changeTheme(this.theme,this.selectedColor),Pages.go("editMenu"),"undefined"!=typeof this.callback&&(this.callback(!0),this.callback=void 0),this.cancel()},switchColor:function(t){this.$el.find("#w-theme-preview-colors").find("a.selected").removeClass("selected"),e(t.currentTarget).addClass("selected"),this.selectedColor=t.currentTarget.getAttribute("data-color"),this.iframe.src=this.generateURL(),t.preventDefault()}});return n}),function(e){function t(t){var i=e("#available-elements .outside_top");i.on("mousedown.event-tooltip",function(){i.off("mousedown.event-tooltip"),n.hide(t).hideOverlay()})}function i(e){for(tip in o)if(!e[tip]){var t={};t[tip]=o[tip],n.set(t)}}var n,o={"x-elements":{body:_W.tl("Get started by dragging an element to your page."),target:"#available-elements .outside_top:eq(1)",position:"left",width:210,icon:"w-icon-question",overlayTarget:"#scroll_container",beforeShow:function(){require("editor/app").vent.trigger("editor:toolbar:show"),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-elements",title:"Intro Elements"})},afterShow:t},"x-pages":{body:_W.tl("Great! Click here to add a new page or blog to your site."),target:"#weebly_tab_pages",position:"top",width:225,icon:"w-icon-question",overlayTarget:"#scroll_container",beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-pages",title:"Intro Pages"})},afterShow:t},"x-pages-subpages":{body:_W.tl("If you'd like, drag pages to the right to create subpages."),target:"#pageManagerList > li:last-child",position:"left",icon:"w-icon-question",overlayTarget:"#pageManager",width:250,beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-subpages",title:"Intro Subpages"})},afterShow:function(t){var i=e("#pageManagerList li");i.on("mousedown.event-tooltip",function(){i.off("mousedown.event-tooltip"),n.hide(t).hideOverlay()})}},"x-design":{body:_W.tl("Customize the design of your site from here."),target:"#weebly_tab_themes",position:"top",appearWait:600,width:200,icon:"w-icon-question",overlayTarget:"#scroll_container",beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-design",title:"Intro Design"})},afterShow:t},"x-publish":{body:_W.tl('Nice job! Click "Publish" to publish your site online or make updates.'),target:"#publish-button",position:"top-right",width:260,icon:"w-icon-question",overlayTarget:"#scroll_container",beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-publish",title:"Intro Publish"})},afterShow:t},"x-golive":{body:_W.tl('Nice job! Click "Go Live" to publish your site online or make updates.'),target:"#client-go-live-button",position:"top-right",width:260,icon:"w-icon-question",overlayTarget:"#scroll_container",beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-go-live",title:"Intro Go Live"})},afterShow:t},"show-storefront-page":{body:_W.tl("Add a Storefront page to help organize your products"),target:"#weebly_tab_pages",position:"top",width:220,overlayTarget:"#body",icon:"w-icon-storefront",beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-storefront",title:"Intro Storefront"})}},"blog-first-view-post":{body:_W.tl("Click here to edit your post options. Add categories, schedule your post, and more."),target:"#blog-post-options .w-icon-chevron-up-light",position:"bottom",width:280,icon:"w-icon-cog",overlayTarget:"#body",beforeShow:function(){require("editor/app").vent.trigger("editor:toolbar:show"),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-blog-post",title:"Intro Blog Post"})}},"additional-support":{body:_W.tl("Click here if you need help later."),target:"#question-button",position:"top",width:200,icon:"w-icon-question",overlayTarget:"#scroll_container",beforeShow:function(){"function"==typeof window.ga&&window.ga("send","pageview",{page:"/intro-additional-support",title:"Intro Additional Support"})},afterShow:t},"theme-howto-downgrade":{body:_W.tl("To go back to the old version of your theme, visit the Design tab"),target:"#weebly_tab_themes",position:"top",width:280},"theme-howto-upgrade":{body:_W.tl("To use the updated version of your theme, visit the Design tab"),target:"#weebly_tab_themes",position:"top",width:280,overlayTarget:"#body"}};n={_overlayId:"event-tooltip-overlay",_containerId:"event-tooltip-container",_containerClass:"w-ui",container:void 0,overlay:void 0,events:{},template:function(){return Mustache.compile('<div id={{id}} class="event-tooltip {{classNames}}">{{#icon}}<span class="event-tooltip-icon {{icon}}"></span>{{/icon}}<div class="event-tooltip-body">{{{body}}}</div></div>')},set:function(e){for(var t in e)e[t].id||(e[t].id=t),this.events[t]=e[t];return this},show:function(t){var i=this,n=this.events[t];if(n){var o;o=document.getElementById("event-tip-"+n.id)?e("#event-tip-"+n.id):this.buildTooltip(n),this.hideAll(),this.container||(this.container=this.buildContainer()),n.beforeShow&&n.beforeShow(n),setTimeout(function(){i.container.append(o),i.positionTooltip(n),i.positionOverlay(n)},n.appearWait||0),n.afterShow&&n.afterShow(n),e(document.body).on("mousedown.event-tooltip",function(t){e(t.currentTarget).off("mousedown.event-tooltip"),i.hide(n),i.hideOverlay()})}},hide:function(t){var i=this.container.find("#event-tip-"+t.id),n={opacity:0};return"left"===t.position?n.left=i.offset().left-10:e.inArray(t.position,["bottom","top","top-right","top-left"])>=0&&(n.top=i.offset().top-10),i.animate(n,function(){i.hide()}),this},hideAll:function(){return e(document.body).trigger("mousedown.event-tooltip"),this},hideOverlay:function(){return this.overlay&&(this.overlay.remove(),this.overlay=void 0),this},positionOverlay:function(t){if(t.overlayTarget){void 0===this.overlay&&(this.overlay=this.buildOverlay());var i=t.overlayTarget instanceof jQuery?t.overlayTarget:e(t.overlayTarget),n=i.outerWidth(),o=i.outerHeight(),s=i.offset();this.overlay.css({height:o,width:n,left:s.left,top:s.top,opacity:.3})}},positionTooltip:function(t){var i,n,o,s=14;if(i=t.target instanceof jQuery?t.target:e(t.target),!i.length)throw"Invalid target: "+t.target;var r=i.outerWidth(),a=i.outerHeight(),l=i.offset(),c=l.left,u=l.top,d=this.container.find("#event-tip-"+t.id);t.width&&d.width(t.width);var h=d.outerWidth(),p=d.outerHeight();"left"===t.position?(c+=r,o=c+s,u+=Math.floor((a-p)/2)):"top"===t.position?(c+=Math.floor((r-h)/2),u+=a,n=u+s):"top-right"===t.position?(u+=a,c+=Math.floor(r-h),n=u+s):"top-left"===t.position?(u+=a,n=u+s):"bottom"===t.position&&(u-=a+p,c-=Math.floor(h/2-s/2),n=u+s),t.offsetY&&(u+=t.offsetY),t.offsetX&&(c+=t.offsetX),d.show().css({left:c,top:u,opacity:0}),d.animate({left:o,top:n,opacity:1},500)},buildContainer:function(){return e(document.createElement("div")).attr({id:this._containerId,"class":this._containerClass}).appendTo("body")},buildOverlay:function(){return e(document.createElement("div")).attr({id:this._overlayId}).appendTo("body")},buildTooltip:function(e){var t="event-tip-"+e.position||"top";return this.template()({id:"event-tip-"+e.id,body:e.body,classNames:t,icon:e.icon})}},window.EventTooltip=n,window.EventTooltip.init=i}(jQuery),_wAMD.define("legacy/weebly_event_tooltip",["editor/app"],function(){}),_wAMD.define("editor/build/themes/upgrading",["jquery","editor/app","components/views/ConfirmView","themes/view/PreviewTheme","legacy/weebly_event_tooltip"],function(e,t,i,n){function o(e){e.is_upgradable&&e.show_upgrade_dialog&&t.showDialog(new i({title:_W.tl("Theme Update Available"),message:_W.tl("There's an update available for your theme. Would you like to preview it?"),confirmText:_W.tl("Preview"),cancelText:_W.tl("No thanks"),callback:function(t){t?a(e,!0):c(e)}}))}function s(t){return t.new_theme_id?a(t):e.Deferred().reject()}function r(n){var o=e.Deferred();return n.old_theme_id?t.showDialog(new i({title:_W.tl("Use Old Theme"),message:_W.tl("Are you sure you want to use the old version of this theme?"),confirmText:_W.tl("Yes"),cancelText:_W.tl("Cancel"),callback:function(e){e&&Weebly.themeCache.get(n.old_theme_id,function(e){e.show_upgrade_dialog=!1,window.changeTheme(n.old_theme_id,n.current_theme_color)}),o.resolve(e)}})):o.reject(),o.promise()}function a(t,i){var o=e.Deferred();return Weebly.themeCache.get(t.new_theme_id,function(e){new n({themeForOptions:t.theme_id,theme:t.new_theme_id,colors:e.colors,selectedColor:t.current_theme_color,callback:function(e){i&&(e?l(t):c(t)),o.resolve(e)}})}),o.promise()}function l(){window.EventTooltip.show("theme-howto-downgrade")}function c(e){Weebly.Editor.RPC.Theme.markThemeUpgradeCancelled(e.theme_id,window.currentSite),window.EventTooltip.show("theme-howto-upgrade")}return{processThemeData:o,startDelayedUpgrade:s,startDelayedDowngrade:r}}),_wAMD.define("legacy/rgbcolor",function(){}),function($,window,undefined){function recordBackground(){recursionDepth||("header"==mode?(origBackgroundImage=headerElement.css("background-image"),origBackgroundColor=headerElement.css("background-color"),origBackgroundFilter=headerElement.css("filter")):(origWidth=headerElement.css("width"),origMaxWidth=headerElement.css("max-width")))}function restoreBackground(){if(!recursionDepth){if("header"==mode){headerElement.css("background-image",origBackgroundImage),headerElement.css("background-color",origBackgroundColor),headerElement.css("filter",origBackgroundFilter);var e=Weebly.currentHeader.data;e&&e.is_slideshow?updateHeaderSlideshow(e.slideshow):clearHeaderSlideshow()}else headerElement.css("max-width",origMaxWidth),headerElement.css("width",origWidth),headerElement.css("height",""),headerElement.css("visibility","");headerElement.data("ui-resizable")&&headerElement.parent(".ui-wrapper").css({width:headerElement.outerWidth(),height:headerElement.outerHeight()})}}function _removeSprite(e){data.sprites=data.sprites.without(e),data.sprites.length||showInitialContent(!0),anyChanges=!0,closeDialogs(),closeExtraPanels(),$("#heImagePanel").hide(),hideTextPanel(),$("#heBgPanel").hide()}function populateCanvas(){if(canvas.clearContent(),!isSlideshow){var e=1==data.sprites.length;$.each(data.sprites,function(t,i){i&&(i.id=""+spriteUID++,"image"==i.type?canvas.bulkImageAdd(i,-1,e):"text"==i.type&&canvas.addText(i,-1,e,!1),e&&(Weebly.headerEditor.spriteSelect(i.id),e=!1))})}canvas.bulkImageFetch()}function stopHeaderEditor(){closeDialogs(),closeExtraPanels(),closeCaptionForm(),hideCanvas(),$(window).off("resize",updateCanvas),$("#scroll_container").off("scroll",updateCanvas),isSlideshow&&stopEditingSlideshow(),$("#heSaveReminder").hide(),$("#he").hide(),window.disableBackspaceExit=!0,Weebly.headerEditor.isEditing=!1,$("body").removeClass("imageperfect-editing"),setTimeout(function(){$("body").addClass("allow-collapse-transition")},0),options.onFinish&&options.onFinish()}function isEditing(){return Weebly.headerEditor.isEditing}function initEditor(){function e(){saveDropdownVisible&&(saveDropdownVisible=!1,$("#heSaveDropdown").hide(),$("#heSaveExpand").removeClass("pressed"),$(document).off("click",e))}function t(){saveDropdownVisible?e():expandSaveMenu()}expandSaveMenu=function(){saveDropdownVisible||(saveDropdownVisible=!0,$("#heSaveDropdown").show(),$("#heSaveExpand").addClass("pressed"),setTimeout(function(){$(document).on("click",e)},0),$("#heSaveReminder").hide())},$("#heSaveExpand").on("click",t),$("#heSaveButton").on("click",function(){saveDropdownVisible?e():Weebly.headerEditor.stop()}),$("#heSaveDropdown").on("click",function(){return!1}),$("#heSaveDropdown .heSaveItem").on("click",e),$("#heCancelButton").on("click",function(){Weebly.headerEditor.cancel()}),$("#heReset").on("click",function(){return confirm("This will revert your header image to the original version included with this theme.\nAre you sure you want to continue?")&&(closeDialogs(),closeExtraPanels(),$("#heImagePanel").hide(),hideTextPanel(),new Ajax.Request("/weebly/header_editor/reset.php",{parameters:{site_id:currentSite,theme_id:currentTheme,page_id:currentPage,category_id:categoryID,header_id:Weebly.currentHeader?Weebly.currentHeader.id:"",is_mobile:Weebly.view.isMobileView||Weebly.mobile.isMobileEditor()?1:0},onSuccess:function(e){setCurrentHeaderImage(Weebly.evalJSON(e.responseText),!0),data=null,stopHeaderEditor()}})),!1}),initImageEditing(),initTextEditing(),initBgEditing(),initialContentScreen=$("#heInitialContent"),initialContentScreen.find(".add-button").on("click",function(){isSlideshow?chooseSlideImage(function(){1==data.slideshow.images.length&&(hasDoneUserEvent("add_slide_hint")||(showTip("Add another slide by clicking here","heAddSlide"),markUserEventDone("add_slide_hint")))}):chooseFlatImage()}),initialContentScreen.find(".default-link").on("click",function(){var e=inspectHeaderBackgroundSprite();isSlideshow||(e?addImageSprite(e):hideInitialContent())}),$("#he .mode.image").on("click",function(){editFlatImage()}),$("#he .mode.slideshow").on("click",function(){Weebly.Restrictions.hasAccess("slideshow_header")?editSlideshow():editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"slideshow_header",restrictionType:"feature",refer:"main"})}),$("#he .button.add").on("click",function(){chooseSlideImage()}),$("#he .button.options").on("click",function(){openSlideshowOptions()}),$("#he-slides-list").on("click",".close",function(){if(confirm("Are you sure you want to delete the slide?")){anySlideshowChanges=!0;var e=$(this).closest(".slide"),t=e.data("index");data.slideshow.images.splice(t,1),refreshSlideshow(),populateSlides()}}),initSlideshowOptions(),initSlideshowEditToolbar()}function positionSlideshowUI(){isSlideshow&&(updateSlideshowScrollbarWidth(),showJSBlackout(),positionSlideshowEditToolbar())}function chooseSlideImage(e){chooseImage({type:"headerslideshow",width:"gallery",multipleFiles:!0,onChoose:function(t){var i={url:"/uploads/"+t.url,width:t.width,height:t.height};anySlideshowChanges=!0,t.attributionUrl&&(i.pageUrl=t.attributionUrl),t.attributionAuthor&&(i.creator=t.attributionAuthor),data.slideshow.images.push(i),refreshSlideshow(),populateSlides(),slideshow.gotoSlide(data.slideshow.images.length-1),e&&e()}})}function initSlideshowOptions(){mainSubpanel=$("#he .slideshow-main-subpanel"),optionsSubpanel=$("#he .slideshow-options-subpanel"),optionsSubpanel.find(".heSaveButton").on("click",function(){closeSlideshowOptions()}),optionsSubpanel.find(".heCancelText").on("click",function(){data.slideshow=savedSlideshowOptions,refreshSlideshow(),closeSlideshowOptions()}),slideshowTransitionDropdown=new Weebly.DropDown($("#he .slideshow-option-transition span")[0],{width:"140",height:"22",availableValues:[["slide","Slide"],["fade","Fade"],["mosaic","Mosaic"],["slice","Slice"],["fold","Fold"]],updateFunction:function(e){data.slideshow.slide="slide"==e,data.slideshow.transition=e,refreshSlideshow(),slideshow.play(!0)}}),slideshowDelayDropdown=new Weebly.DropDown($("#he .slideshow-option-delay span")[0],{width:"140",height:"22",availableValues:[[3,"3 seconds"],[4,"4 seconds"],[5,"5 seconds"],[6,"6 seconds"],[7,"7 seconds"],[8,"8 seconds"],[9,"9 seconds"]],updateFunction:function(e){data.slideshow.speed=parseInt(e),refreshSlideshow(),slideshow.play(!0)}}),slideshowNavDropdown=new Weebly.DropDown($("#he .slideshow-option-nav span")[0],{width:"140",height:"22",availableValues:[["both","Arrows and dots"],["arrows","Arrows only"],["dots","Dots only"],["none","Nothing"]],updateFunction:function(e){"both"==e?(data.slideshow.arrows=!0,data.slideshow.dots=!0):"arrows"==e?(data.slideshow.arrows=!0,data.slideshow.dots=!1):"dots"==e?(data.slideshow.arrows=!1,data.slideshow.dots=!0):"none"==e&&(data.slideshow.arrows=!1,data.slideshow.dots=!1),refreshSlideshow()}}),slideshowDotPositionDropdown=new Weebly.DropDown($("#he .slideshow-option-position span")[0],{width:"140",height:"22",availableValues:[["left","Left"],["center","Center"],["right","Right"]],updateFunction:function(e){data.slideshow.dotPosition=e,refreshSlideshow()}})}function openSlideshowOptions(){mainSubpanel.hide(),optionsSubpanel.show(),populateSlideshowOptions(),savedSlideshowOptions=$.extend({},data.slideshow)}function closeSlideshowOptions(){optionsSubpanel.hide(),mainSubpanel.show()}function populateSlideshowOptions(){slideshowNavDropdown.setValue(["none","dots","arrows","both"][data.slideshow.arrows<<1|data.slideshow.dots]),slideshowDotPositionDropdown.setValue(data.slideshow.dotPosition||"right"),slideshowTransitionDropdown.setValue(data.slideshow.slide?"slide":data.slideshow.transition?data.slideshow.transition:"fade"),slideshowDelayDropdown.setValue(data.slideshow.speed||5)}function initSlideshowEditToolbar(){slideshowEditToolbar=$("<div class='hover-toolbar hover-toolbar-above edit-slide-toolbar'><div class='hover-toolbar-arrow hover-toolbar-arrow-centered'><div></div></div><div class='hover-toolbar-inner'><a class='black-button play-button'><span></span></a><a class='black-button pause-button'><span></span></a><span class='caption-wrap'><a class='black-button caption-button'><span></span></a><div class='caption-popout' style='display:none'><div class='caption-arrow'></div><textarea></textarea><div class='buttons'><a class='button cancel-button'>Cancel</a><a class='button save-button'>Save</a></div></div></span><a class='black-button link-button'><span></span></a><a class='edit-button'>Edit Slide</a></div></div>").appendTo("#scroll_container").find(".edit-button").on("click",function(){editSlide()}).end().find(".caption-button").on("click",function(){toggleCaptionForm()}).end().find(".link-button").on("click",function(){slideshow.pause(),closeCaptionForm();var e=data.slideshow.images[slideshow.getSlideIndex()].link;e&&(e=parseLinkString(e)),Weebly.Linker.open({zIndex:10001,existing:e,remove:!0,onChoose:function(e,t){t&&(e+="weeblylink_new_window"),data.slideshow.images[slideshow.getSlideIndex()].link=e,anySlideshowChanges=!0,updateSlideshowEditToolbar()}})}).end().find(".play-button").on("click",function(){slideshow.play(!0)}).end().find(".pause-button").on("click",function(){slideshow.pause()}).end(),captionForm=slideshowEditToolbar.find(".caption-popout").find(".save-button").on("click",function(){data.slideshow.images[slideshow.getSlideIndex()].caption=captionForm.find("textarea").inputHint("value")||"",closeCaptionForm(),refreshSlideshow(),updateSlideshowEditToolbar()}).end().find(".cancel-button").on("click",function(){closeCaptionForm()}).end().find("textarea").inputHint({emptyText:"Enter a caption.",emptyClass:"caption-input-empty"}).end(),closeCaptionForm(),positionSlideshowEditToolbar()}function updateSlideshowEditToolbar(){var e=data.slideshow.images[slideshow.getSlideIndex()]||{};slideshowEditToolbar.find(".caption-button")[e.caption?"addClass":"removeClass"]("active"),slideshowEditToolbar.find(".link-button")[e.link?"addClass":"removeClass"]("active")}function positionSlideshowEditToolbar(){var e=$("#scroll_container"),t=e.offset();t.top-=e.scrollTop(),t.left-=e.scrollLeft();var i=headerElement.offset();slideshowEditToolbar.css({top:i.top-t.top-slideshowEditToolbar.outerHeight()-10,left:i.left-t.left+headerElement.outerWidth()-slideshowEditToolbar.outerWidth()})}function editSlide(e){slideshow.pause();var t=slideshow.getSlideIndex()||0,i=options,n=data,o=data.slideshow.images[t]||{},s=e||buildSlideImageperfectData(o);recursionDepth++,Weebly.headerEditor.start(headerElement,{mode:"slide",data:s,onSave:function(e){var s=data;return delete s.is_slideshow,delete s.slideshow,i.data=n,i.forceSlideshow=!0,Weebly.headerEditor.start(headerElement,i),recursionDepth--,e&&(e=$.parseJSON(e),o.url=e.url,o.width=e.width,o.height=e.height,o.data=s,delete o.thumbnail,data.slideshow.images[t]=o),refreshSlideshow(),populateSlides(),!1},onCancel:function(){i.data=n,i.forceSlideshow=!0,Weebly.headerEditor.start(headerElement,i),recursionDepth--}})}function buildSlideImageperfectData(e){if(e.data)return e.data;var t={type:"image",url:Weebly.Slideshow.largeURL(e),fillDimensions:!0};return{sprites:[t]}}function openCaptionForm(){slideshow.pause(),captionForm.show().find("textarea").val(data.slideshow.images[slideshow.getSlideIndex()].caption||"").inputHint("update"),slideshowEditToolbar.find(".caption-button").addClass("pressed"),isCaptionFormOpen=!0}function closeCaptionForm(){captionForm.hide(),slideshowEditToolbar.find(".caption-button").removeClass("pressed"),isCaptionFormOpen=!1}function toggleCaptionForm(){isCaptionFormOpen?closeCaptionForm():openCaptionForm()}function editFlatImage(){isSlideshow=!1,stopEditingSlideshow(),canvas.clearContent(),showCanvas(),updateCanvas(),setInitialScroll(),populateCanvas(),data.sprites.length?hideInitialContent():showInitialContent(!0),$("#he .mode.image").addClass("current"),$("#he .mode.slideshow").removeClass("current"),$(".flatimage-panel").show(),$(".slideshow-panel").hide(),initialContentScreen.find(".add-button").text(_W.tl("Add Image")),"header"==mode&&slideshow&&(clearHeaderSlideshow(),slideshow=null)}function editSlideshow(){if(isSlideshow=!0,slideshow=getHeaderSlideshow(),slideshow||refreshSlideshow(),!slideshow)return editFlatImage(),void 0;slideshow.clearHandlers(),slideshow.on("play",updatePlayPause),slideshow.on("pause",updatePlayPause),slideshow.on("slideChange",function(e){selectSlide(e)}),window.popLoading(),headerElement.css("visibility",""),$("#he .mode.image").removeClass("current"),$("#he .mode.slideshow").addClass("current"),$(".flatimage-panel").hide(),$(".slideshow-panel").show(),initialContentScreen.find(".add-button").text(_W.tl("Add Slide")),$("#he .slides-inner1").weeblyScroll("destroy"),closeSlideshowOptions(),updateCanvas(),updatePlayPause(),populateSlides();var e;if(!data.slideshow.images.length){var t=Weebly.currentHeader.data;if(t){var i=Weebly.currentHeader.url,n=new Image;$(n).on("load",function(){data.slideshow.images.push({url:Weebly.currentHeader.url,thumbnail:!1,width:n.width,height:n.height,data:t}),refreshSlideshow(),populateSlides()}),n.src=i}else!recursionDepth&&data.sprites.length&&(e=$.extend(!0,{},data),delete e.slideshow,delete e.is_slideshow)}$("#he .slides-inner1").off("scroll").on("scroll",function(){var e=$(this).scrollLeft();e?$("#he .fade-left").show():$("#he .fade-left").hide()}).weeblyScroll(),$("#he .slides-inner1").scrollLeft(0),$("#he .fade-left").hide(),hideCanvas(),showJSBlackout(),e&&editSlide(e)}function stopEditingSlideshow(){hideJSBlackout(),slideshowEditToolbar.hide()}function updatePlayPause(){slideshow.isPlaying()?(slideshowEditToolbar.find(".play-button").hide(),slideshowEditToolbar.find(".pause-button").show()):(slideshowEditToolbar.find(".play-button").show(),slideshowEditToolbar.find(".pause-button").hide())}function refreshSlideshow(){slideshow=updateHeaderSlideshow(data.slideshow)}function updateSlideshowScrollbarWidth(){var e=$("#he .slides");e.width($(window).outerWidth()-e.offset().left-8),$("#he .slides-inner1").weeblyScroll("update")}function showJSBlackout(){hideJSBlackout(),spotlight=new Weebly.Spotlight({canvasElement:"#icontent_container",element:headerElement,opacity:.7}),spotlight.show()}function hideJSBlackout(){spotlight&&spotlight.destroy()}function populateSlides(){var e=$("#he-slides-list"),t=!1,i=headerElement.outerWidth(),n=headerElement.outerHeight(),o=Math.min(MAX_THUMBNAIL_WIDTH/i,MAX_THUMBNAIL_HEIGHT/n),s=i*o,r=n*o;e.empty(),$.each(data.slideshow.images,function(i,n){if(n){var o=Math.max(s/n.width,r/n.height),a=n.width*o,l=n.height*o,c=r/2-l/2,u=s/2-a/2;e.append($("<li class='slide' id='slide_"+i+"'>"+"<div class='inner'></div>"+"<div class='close'></div>"+"</li>").data("index",i).find(".inner").css({width:s,height:r}).append($("<img/>").attr("src",Weebly.Slideshow.thumbnailURL(n)).css({top:c,left:u,width:a,height:l})).end().on("mouseup",function(){t||slideshow.gotoSlide(i)}))}}),selectSlide(slideshow.getSlideIndex()),Sortable.create("he-slides-list",{constraint:!1,onChange:function(){t=!0},onUpdate:function(){anySlideshowChanges=!0;var t,i=slideshow.getSlideIndex(),n=data.slideshow.images[i],o=[];e.children().each(function(e){var i=$(this).data("index"),s=data.slideshow.images[i];o.push(s),s==n&&(t=e)}),data.slideshow.images=o,refreshSlideshow(),slideshow.gotoSlide(t,!0),populateSlides()}}),updateSlideshowScrollbarWidth(),data.slideshow.images.length?(slideshowEditToolbar.show(),positionSlideshowEditToolbar(),hideInitialContent()):(slideshowEditToolbar.hide(),showInitialContent())}function selectSlide(e){$("#he .slide").removeClass("current").eq(e).addClass("current"),closeCaptionForm(),updateSlideshowEditToolbar()}function initImageEditing(){imageButton=$("#heAddImage"),imageButton.on("click",function(){chooseFlatImage()
}),$("#heImageCropButton").on("click",editCrop),$("#heImageRotateButton").on("click",editRotate),$("#heImageOpacityButton").on("click",editOpacity),$("#heImageFadeButton").on("click",function(){editFade()}),$("#heImageMiscButton").on("click",function(){editMisc()})}function chooseFlatImage(){chooseImage({type:"imageperfect",ucfid:getUCFID(),clickElement:this,clickDiff:{top:-1,left:6},minDimensions:getMinDimensions(),onChoose:function(e){var t={type:"image",id:""+spriteUID++,url:"/uploads/"+e.url};e.attributionUrl&&(t.pageUrl=e.attributionUrl),e.attributionAuthor&&(t.creator=e.attributionAuthor),addImageSprite(t)}})}function addImageSprite(e){var t=newImageIndex();data.sprites.splice(t,0,e),canvas.addImage(e,t,!0),currentSprite=e,anyChanges=!0,$("#heBgPanel").hide(),hideTextPanel(),$("#heImagePanel").show(),hideInitialContent()}function getMinDimensions(){return"header"==mode?contentRect:null}function initTextEditing(){textButton=$("#heAddText"),textButton.on("click",function(){var e={type:"text",id:""+spriteUID++,text:"Example Text",font:defaultTextFont,fontSize:42,fill:"color",color:"#ffffff",shadow:.3,shadowAngle:45},t=newTextIndex();data.sprites.splice(t,0,e),canvas.addText(e,t,!0),currentSprite=e,anyChanges=!0,showTextPanel(function(){populateTextSprite()}),hideInitialContent()}),fontSizeDropDown=new Weebly.DropDown($("#heFontSizeDropDown")[0],{width:"60",height:"20",openHeight:"400",rowFunction:function(e){var t=12+2*e;return 100>=t?[t,"<span style='font-size:14px'>"+t+"</span>"]:void 0},updateFunction:function(e){currentSprite.fontSize=e,canvas.updateSprite(currentSprite,"fontSize"),anyChanges=!0}}),$("#heFontBold").on("click",function(){var e=Weebly.Font.getFont(currentSprite.font);e&&e.hasBold()&&(currentSprite.bold=!currentSprite.bold,canvas.updateSprite(currentSprite,"bold"),updateFontBoldItalic(),anyChanges=!0)}),$("#heFontItalic").on("click",function(){var e=Weebly.Font.getFont(currentSprite.font);e&&e.hasItalic()&&(currentSprite.italic=!currentSprite.italic,canvas.updateSprite(currentSprite,"italic"),updateFontBoldItalic(),anyChanges=!0)}),$("#heTextGlowButton").on("click",function(){closeDialogs(),editGlow()}),$("#heTextShadowButton").on("click",function(){closeDialogs(),editShadow()}),$("#heTextOpacityButton").on("click",function(){closeDialogs(),editOpacity()}),$("#heTextFillButton").on("click",function(){var e=$.extend({},currentSprite);chooseFill({fill:currentSprite.fill,color:currentSprite.color,gradientColors:currentSprite.gradientColors,gradientAngle:currentSprite.gradientAngle,pattern:currentSprite.pattern,clickElement:this,onColorUpdate:function(e){currentSprite.fill="color",currentSprite.color=e,canvasTextUpdate(),populateTextFill(),anyChanges=!0},onGradientUpdate:function(e,t){currentSprite.fill="gradient",currentSprite.gradientColors=e,currentSprite.gradientAngle=t,canvasTextUpdate(),populateTextFill(),anyChanges=!0},onPatternUpdate:function(e){currentSprite.fill="pattern",currentSprite.pattern=removeHost(e),canvasTextUpdate(),populateTextFill(),anyChanges=!0},onCancel:function(){currentSprite=e,overrideSprite(e),canvasTextUpdate(),populateTextFill()}})})}function showTextPanel(e){$("#heImagePanel").hide(),$("#heBgPanel").hide(),$("#heTextPanel").show(),fontDropDown?e&&e():setTimeout(function(){fontDropDown=new Weebly.DropDown($("#heFontDropDown")[0],{width:"190",height:"30",openWidth:"300",openHeight:"400",rowFunction:function(e){var t=flattenedFontGroups[e];if(t){var i;"object"==typeof t&&(i=t[1],t=t[0]);var n=Weebly.Font.getFont(t);if(n){var o=[n.family,"<div style='padding:2px 2px 2px 0;position:relative;left:-2px'><div style='height:28px;background:url("+getFontPreview(n.family)+")'></div>"+"</div>"];if(i){var s=$("<div class='font-group-heading'/>").html(i);o[2]=s[0],e||s.css({"margin-top":0,"border-top":0})}return o}}},updateFunction:function(e){currentSprite.font=e,currentSprite.bold=!1,currentSprite.italic=!1,canvas.updateSprite(currentSprite,"font"),updateFontBoldItalic(),defaultTextFont=e,anyChanges=!0}}),e&&e()},0)}function hideTextPanel(){Weebly.DropDowns.activeMenu&&Weebly.DropDowns.dropdownsRef[Weebly.DropDowns.activeMenu].closeMe(),$("#heTextPanel").hide()}function populateTextSprite(){var e=currentSprite.font||"Arial";fontDropDown.setValue(e);var t=currentSprite.fontSize||36;fontSizeDropDown.setValue(t),updateFontBoldItalic(),populateTextFill()}function updateFontBoldItalic(){var e=Weebly.Font.getFont(currentSprite.font);e&&e.hasBold()?$("#heFontBold").removeClass("boldDisabled"):$("#heFontBold").addClass("boldDisabled"),e&&e.hasItalic()?$("#heFontItalic").removeClass("italicDisabled"):$("#heFontItalic").addClass("italicDisabled"),currentSprite.bold?$("#heFontBold").addClass("boldPressed"):$("#heFontBold").removeClass("boldPressed"),currentSprite.italic?$("#heFontItalic").addClass("italicPressed"):$("#heFontItalic").removeClass("italicPressed")}function populateTextFill(){var e=currentSprite.fill;"color"==e||e===undefined?$("#heTextFillButtonInner").css("background-color",currentSprite.color||"#000"):$("#heTextFillButtonInner").css("background-color","transparent"),"gradient"==e?renderGradient($("#heTextGradientPreview").show(),currentSprite.gradientColors,currentSprite.gradientAngle):$("#heTextGradientPreview").hide(),"pattern"==e?$("#heTextPatternPreview").css("background-image","url("+currentSprite.pattern+")"):$("#heTextPatternPreview").css("background-image","none")}function canvasTextUpdate(){canvas.updateSprite(currentSprite,"fill")}function initBgEditing(){$("#heBgFillButton").on("click",function(){var e=Object.clone(data.background);chooseFill({fill:data.background.fill,color:data.background.color,gradientColors:data.background.gradientColors,gradientAngle:data.background.gradientAngle,pattern:data.background.pattern,clickElement:this,allowTransparent:!0,onColorUpdate:function(e){e?(data.background.fill="color",data.background.color=e):(delete data.background.fill,delete data.background.color),canvasBgUpdate(),anyChanges=!0,populateBgFill()},onGradientUpdate:function(e,t){data.background.fill="gradient",data.background.gradientColors=e,data.background.gradientAngle=t,canvasBgUpdate(),anyChanges=!0,populateBgFill()},onPatternUpdate:function(e){data.background.fill="pattern",data.background.pattern=removeHost(e),canvasBgUpdate(),anyChanges=!0,populateBgFill()},onCancel:function(){data.background=e,canvasBgUpdate(),populateBgFill()}})})}function populateBgFill(){var e=data.background.fill;"color"==e?$("#heBgFillButtonInner").css("background-color",data.background.color||"#ffffff"):$("#heBgFillButtonInner").css("background-color","transparent"),"gradient"==e?renderGradient($("#heBgGradientPreview").show(),data.background.gradientColors,data.background.gradientAngle):$("#heBgGradientPreview").hide(),"pattern"==e?$("#heBgPatternPreview").css("background-image","url("+data.background.pattern+")"):e?$("#heBgPatternPreview").css("background-image","none"):$("#heBgPatternPreview").css("background-image","url(/weebly/header_editor/images/transparent_fill.gif)")}function canvasBgUpdate(){canvas.updateBackground(data.background)}function editGlow(){hideSaveCancel(),hideSpriteBar();var e=$("#heGlowPressed")[0];e.className=e.className.replace(/he\w+GlowPressed/,"text"==currentSprite.type?"heTextGlowPressed":"heImageGlowPressed"),glowPanel||(glowPanel=$("#heGlowPanel"),glowColorSquare=$("#heGlowColorSquare"),$("#heGlowColor").on("click",function(){chooseColor({clickElement:this,resultElement:glowColorSquare[0],onUpdate:function(e){anyChanges=!0,currentSprite.glowColor=e,canvas.updateSprite(currentSprite,"glow")}})}),$("#heGlowSave").on("click",function(){closeGlow(),showSpriteBar()}),$("#heGlowCancel").on("click",function(){revertGlow(),showSpriteBar()})),glowPanel.show(),glowSlider||(glowSlider=new Control.Slider("heGlowSliderHandle","heGlowSlider",{onSlide:function(e){anyChanges=!0,currentSprite.glow=e,canvas.updateSprite(currentSprite,"glow")}})),currentSprite.glow=glowOrigValue=currentSprite.glow||0,currentSprite.glowColor=glowOrigColor=currentSprite.glowColor||DEFAULT_GLOW_COLOR,glowSlider.setValue(glowOrigValue),glowColorSquare.css("background-color",glowOrigColor)}function revertGlow(){currentSprite.glow=glowOrigValue,currentSprite.glowColor=glowOrigColor,canvas.updateSprite(currentSprite,"glow"),closeGlow()}function closeGlow(){closeDialogs(),glowPanel&&glowPanel.hide(),showSaveCancel()}function editShadow(){hideSaveCancel(),hideSpriteBar();var e=$("#heShadowPressed")[0];e.className=e.className.replace(/he\w+ShadowPressed/,"text"==currentSprite.type?"heTextShadowPressed":"heImageShadowPressed"),shadowPanel||(shadowPanel=$("#heShadowPanel"),shadowAngleSet=new ElementSet("heShadowAngle",{itemSelector:"td",selectedClass:"hePressed",onUpdate:function(){var e=shadowAngleSet.getSelected().id.match(/heShadowAngle(\w+)/)[1],t="None"==e?null:parseInt(e);currentSprite.shadowAngle=t,anyChanges=!0,canvas.updateSprite(currentSprite,"shadow")}}),$("#heShadowSave").on("click",function(){closeShadow(),showSpriteBar()}),$("#heShadowCancel").on("click",function(){revertShadow(),showSpriteBar()})),shadowPanel.show(),shadowSlider||(shadowSlider=new Control.Slider("heShadowSliderHandle","heShadowSlider",{onSlide:function(e){currentSprite.shadow=e,anyChanges=!0,canvas.updateSprite(currentSprite,"shadow")}})),currentSprite.shadow=shadowOrigValue=currentSprite.shadow||0,currentSprite.shadowAngle=shadowOrigAngle=currentSprite.shadowAngle||null,shadowSlider.setValue(shadowOrigValue),shadowAngleSet.setSelected($("#heShadowAngle"+(null===shadowOrigAngle?"None":shadowOrigAngle))[0])}function revertShadow(){currentSprite.shadow=shadowOrigValue,currentSprite.shadowAngle=shadowOrigAngle,canvas.updateSprite(currentSprite,"shadow"),closeShadow()}function closeShadow(){shadowPanel&&(shadowCloseFunction?shadowCloseFunction():shadowPanel.hide()),showSaveCancel()}function editOpacity(){hideSaveCancel(),hideSpriteBar();var e=$("#heOpacityPressed")[0];e.className=e.className.replace(/he\w+OpacityPressed/,"text"==currentSprite.type?"heTextOpacityPressed":"heImageOpacityPressed"),opacityPanel||(opacityPanel=$("#heOpacityPanel"),$("#heOpacitySave").on("click",function(){closeOpacity(),showSpriteBar()}),$("#heOpacityCancel").on("click",function(){revertOpacity(),showSpriteBar()})),opacityPanel.show(),opacitySlider||(opacitySlider=new Control.Slider("heOpacitySliderHandle","heOpacitySlider",{onSlide:function(e){currentSprite.opacity=e,anyChanges=!0,canvas.updateSprite(currentSprite,"opacity")}})),currentSprite.opacity=opacityOrigValue=currentSprite.opacity===undefined?1:currentSprite.opacity,opacitySlider.setValue(opacityOrigValue)}function revertOpacity(){currentSprite.opacity=opacityOrigValue,canvas.updateSprite(currentSprite,"opacity"),closeOpacity()}function closeOpacity(){opacityPanel&&opacityPanel.hide(),showSaveCancel()}function editCrop(){hideSaveCancel(),hideSpriteBar(),cropPanel||(cropPanel=$("#heCropPanel"),$("#heCropSave").on("click",function(){closeCrop(),showSpriteBar()}),$("#heCropCancel").on("click",function(){revertCrop(),showSpriteBar()})),cropPanel.show(),canvas.startCropping(currentSprite.id)}function revertCrop(){_closeCrop(),canvas.cancelCropping()}function closeCrop(){_closeCrop(),canvas.stopCropping()}function _closeCrop(){cropPanel&&cropPanel.hide(),showSaveCancel()}function hideSpriteBar(){canvas.hideSpriteBar(currentSprite.id)}function showSpriteBar(){canvas.showSpriteBar(currentSprite.id)}function editRotate(){hideSaveCancel(),hideSpriteBar(),rotateDialog||(rotateDialog=$("#heRotatePanel"),$("#heRotateSave").on("click",function(){closeRotate(),showSpriteBar()}),$("#heRotateCancel").on("click",function(){revertRotate(),showSpriteBar()}),$("#heRotateLeft").on("click",function(){var e=normalizeRotationAngle(currentSprite.rotation-90);currentSprite.rotation=e,setRotationSlider(e),canvas.updateSprite(currentSprite,"rotation"),anyChanges=!0}),$("#heRotateRight").on("click",function(){var e=normalizeRotationAngle(currentSprite.rotation+90);currentSprite.rotation=e,setRotationSlider(e),canvas.updateSprite(currentSprite,"rotation"),anyChanges=!0}),$("#heFlipV").on("click",function(){currentSprite.flipY=!currentSprite.flipY,canvas.updateSprite(currentSprite,"flip"),anyChanges=!0}),$("#heFlipH").on("click",function(){currentSprite.flipX=!currentSprite.flipX,canvas.updateSprite(currentSprite,"flip"),anyChanges=!0})),rotateDialog.show(),rotateSlider||(rotateSlider=new Control.Slider("heRotateSliderHandle","heRotateSlider",{onSlide:function(e){var t=360*e-180,i=5;Math.abs(t)<i?(t=0,rotateSlider.setValue(.5)):Math.abs(t-90)<i?(t=90,rotateSlider.setValue(.75)):Math.abs(t- -90)<i&&(t=-90,rotateSlider.setValue(.25)),currentSprite.rotation=t,canvas.updateSprite(currentSprite,"rotation"),anyChanges=!0}})),origRotateValue=currentSprite.rotation=currentSprite.rotation===undefined?0:currentSprite.rotation,origFlipX=currentSprite.flipX,origFlipY=currentSprite.flipY,setRotationSlider(origRotateValue)}function setRotationSlider(e){rotateSlider.setValue((normalizeRotationAngle(e)+180)/360)}function normalizeRotationAngle(e){return e=(e+360)%360,e>180&&(e-=360),e}function revertRotate(){currentSprite.rotation=origRotateValue,currentSprite.flipX=origFlipX,currentSprite.flipY=origFlipY,canvas.updateSprite(currentSprite),closeRotate()}function closeRotate(){rotateDialog&&rotateDialog.hide(),showSaveCancel()}function editFade(){hideSaveCancel(),hideSpriteBar(),fadePanel||(fadePanel=$("#heFadePanel"),fadeAngleSet=new ElementSet("heFadeAngle",{itemSelector:"td",selectedClass:"hePressed",onUpdate:function(){var e=fadeAngleSet.getSelected().id.match(/heFadeAngle(\w+)/)[1],t="None"==e?null:parseInt(e);currentSprite.fadeAngle=t,anyChanges=!0,canvas.updateSprite(currentSprite,"fade")}}),$("#heFadeSave").on("click",function(){closeFade(),showSpriteBar()}),$("#heFadeCancel").on("click",function(){revertFade(),showSpriteBar()})),fadePanel.show(),fadeSlider||(fadeSlider=new Control.Slider("heFadeSliderHandle","heFadeSlider",{onSlide:function(e){currentSprite.fade=e,anyChanges=!0,canvas.updateSprite(currentSprite,"fade")}})),fadeOrigValue=currentSprite.fade=currentSprite.fade||0,fadeOrigAngle=currentSprite.fadeAngle=currentSprite.fadeAngle||0,fadeSlider.setValue(fadeOrigValue),fadeAngleSet.setSelected($("#heFadeAngle"+(null===fadeOrigAngle?"None":fadeOrigAngle))[0])}function closeFade(){fadePanel&&fadePanel.hide(),showSaveCancel()}function revertFade(){currentSprite.fade=fadeOrigValue,currentSprite.fadeAngle=fadeOrigAngle,canvas.updateSprite(currentSprite,"fade"),closeFade()}function editMisc(){hideSaveCancel(),hideSpriteBar(),miscPanel||(miscPanel=$("#heMiscPanel"),$("#heMiscSave").on("click",function(){closeMisc(),showSpriteBar()}),$("#heMiscCancel").on("click",function(){revertMisc(),showSpriteBar()}),$("#heColoringSubpanel input").on("click",function(){currentSprite.coloring=this.value||"",canvas.updateSprite(currentSprite,"coloring"),anyChanges=!0}),$("#heEdgesSubpanel input").on("click",function(){currentSprite.edges=this.value||"",canvas.updateSprite(currentSprite,"edges"),anyChanges=!0})),$("#heColoringSubpanel input[value="+(currentSprite.coloring||"")+"]").prop("checked",!0),$("#heEdgesSubpanel input[value="+(currentSprite.edges||"")+"]").prop("checked",!0),miscPanel.show(),miscSavedProps=$.extend({},currentSprite)}function closeMisc(){miscPanel&&miscPanel.hide(),showSaveCancel()}function revertMisc(){currentSprite=miscSavedProps,overrideSprite(miscSavedProps),canvas.updateSprite(miscSavedProps),closeMisc()}function closeDialogs(){stopChoosingFill(),stopChoosingImage()}function closeExtraPanels(){closeGlow(),closeShadow(),closeOpacity(),closeCrop(),closeRotate(),closeFade(),closeMisc()}function spriteById(e){for(var t=0;t<data.sprites.length;t++)if(data.sprites[t].id==e)return data.sprites[t]}function overrideSprite(e){for(var t=0;t<data.sprites.length;t++)if(data.sprites[t].id==e.id)return data.sprites[t]=e,void 0}function newImageIndex(){for(var e=-1,t=0;t<data.sprites.length;t++)"image"==data.sprites[t].type&&(e=t);return e+1}function newTextIndex(){return data.sprites.length}function showSaveCancel(){$("#heTopRight").show()}function hideSaveCancel(){$("#heTopRight").hide()}function showInitialContent(e){e?(initialContentScreen.find(".or").show(),initialContentScreen.find(".default-link").show()):(initialContentScreen.find(".or").hide(),initialContentScreen.find(".default-link").hide()),initialContentScreen.show()}function hideInitialContent(){initialContentScreen.hide()}function renderGradient(e,t,i){var n;i=(i+90)%360,n="linear-gradient("+i+"deg, "+t.join(", ")+")",jQuery(e).css("background","-webkit-"+n).css("background","-o-"+n).css("background","-moz-"+n).css("background",n)}function initCanvas(){canvasElement||(canvasElement=$("<div style='position:absolute;z-index:100;top:133px;left:-10000%'/>").appendTo("body").html(AC_FL_RunContent("codebase","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0","width",document.viewport.getWidth(),"height",document.viewport.getHeight()-133,"src","/weebly/header_editor/flash/HeaderEditor?buildTime="+buildTime,"quality","high","pluginspage","http://www.macromedia.com/go/getflashplayer","align","middle","play","true","loop","true","scale","showall","wmode","transparent","devicefont","false","id","HeaderEditor","bgcolor","#ffffff","name","HeaderEditor","menu","true","allowScriptAccess","always","allowFullScreen","false","movie","/weebly/header_editor/flash/HeaderEditor?buildTime="+buildTime,"salign","")),canvasElement.add(initialContentScreen).on("mousewheel",function(e,t,i,n){var o=$("#scroll_container");o.scrollTop(o.scrollTop()+-40*n)}))}function showCanvas(){canvasElement.css("left",0)}function updateCanvas(){contentRect=getContentRect(),updateSizeText(),initialContentScreen.css({top:contentRect.y+133,left:contentRect.x,width:contentRect.width,height:contentRect.height}),isSlideshow?positionSlideshowUI():(updateCanvasDimensions(),setTimeout(function(){canvas.setContentRectangle(contentRect.x,contentRect.y,contentRect.width,contentRect.height,!("header"==mode||"slide"==mode))},0))}function setInitialScroll(){var e=$("#scroll_container"),t=e.offset().top,i=e.outerHeight(),n=$("#icontent_container"),o=n.offset().top,s=headerElement.offset().top,r=headerElement.outerHeight();(t>s||s+r>t+i)&&e.scrollTop(s-o+r/2-i/2)}function updateSizeText(){$("#heSizeText").text(("header"==mode||"slide"==mode?_W.tl("Header size"):_W.tl("Image size"))+": "+contentRect.width+"px x "+contentRect.height+"px")}function getContentRect(){return"header"==mode||"slide"==mode?getElementInnerRect(headerElement,!1):getElementInnerRect(headerElement,!0)}function getElementInnerRect(e,t){e=$(e);var i=e.offset(),n=e.outerWidth(),o=e.outerHeight(),s=parseInt(e.css("border-top-width"))||0,r=parseInt(e.css("border-left-width"))||0,a=parseInt(e.css("border-right-width"))||0,l=parseInt(e.css("border-bottom-width"))||0;return t&&(s+=parseInt(e.css("padding-top")||0),r+=parseInt(e.css("padding-left")||0),a+=parseInt(e.css("padding-right")||0),l+=parseInt(e.css("padding-bottom")||0)),i.top+=-133+s,i.left+=r,n-=r+a,o-=s+l,{x:Math.round(i.left),y:Math.round(i.top),width:Math.round(n),height:Math.round(o)}}function updateCanvasDimensions(){canvasElement.down().css({width:$(window).width(),height:$(window).height()-133})}function hideCanvas(){canvasElement.css("left","-1000%")}function removeHost(e){var t=e.match(/^\w+:\/\/[^\/]+(\/.*)$/);return t?t[1]:e}function getUCFID(){return"element"==mode?headerElement.up(".element").attr("id"):void 0}function inspectHeaderBackgroundSprite(e){var t=e||headerElement,i=t.attr("style");t.attr("style","");var n=_inspectHeaderBackgroundSprite(t);return t.attr("style",i),n}function _inspectHeaderBackgroundSprite(e){var t=e||headerElement,i=(t.css("background-image")||"").match(/url\(['"]?(.+?)['"]?\)/);if(i){var n=removeHost(i[1]),o=parseImagePosition(t);return{type:"image",url:n,cssX:o.left,cssY:o.top}}}function parseImagePosition(e){var t,i,n=(e.css("background-position")||"0 0").split(" ");return 1===n.length&&(n[1]=n[0]),"top"==n[0]?t=0:"center"==n[0]?t="50%":"bottom"==n[0]&&(t="100%"),"left"==n[1]?i=0:"center"==n[1]?i="50%":"right"==n[1]&&(i="100%"),t===undefined&&(t=-1==n[1].indexOf("%")?parseInt(n[1]):n[1]),i===undefined&&(i=-1==n[0].indexOf("%")?parseInt(n[0]):n[0]),{top:t,left:i}}var headerElement,headerEditor,headerEditorOffset,contentRect,editorInited=!1,flashLoaded=!1,anyChanges=!1,anySlideshowChanges=!1,data,currentSprite,origWidth,origMaxWidth,origBackgroundImage,origBackgroundColor,origBackgroundFilter,pageListDialog,savingInProgress=!1,canvasReadyCallback=null,options,isSlideshow,mode,categoryID,slideshow,initialContentScreen,recursionDepth=0;Weebly.headerEditor={preload:function(){initCanvas()},start:function(e,t){function i(){recordBackground(),"header"==mode&&isSlideshow?editSlideshow():editFlatImage()}options=t||{},mode=options.mode||"header",categoryID=$("#wsite-com-area-category").attr("data-id"),Weebly.headerEditor.isEditing=!0,window.disableBackspaceExit=!1,$("body").removeClass("allow-collapse-transition").addClass("imageperfect-editing"),headerElement=$(e),headerEditor=$("#he").show(),headerEditorOffset=headerEditor.offset(),editorInited?(hideTextPanel(),$("#heImagePanel").hide(),$("#heBgPanel").hide()):(initEditor(),editorInited=!0),currentSprite=null,recursionDepth||(anyChanges=!1,anySlideshowChanges=!1),"header"==mode&&!options.data&&Weebly.currentHeader.data?(data=$.extend(!0,{},Weebly.currentHeader.data),data.background instanceof Array&&(data.background={})):(data=options.data,data&&(data=$.extend(!0,{},data)),data=data||{}),isSlideshow=(data.is_slideshow||options.forceSlideshow)&&!options.forceImage,data.sprites=data.sprites||[],data.sprites=jQuery.grep(data.sprites,function(e){return!!e}),data.background=data.background||{fill:"color",color:"#ffffff"},data.slideshow=data.slideshow||{dots:!0,arrows:!0,slide:!0},data.slideshow.images=data.slideshow.images||[],data.slideshow.aspectRatio=headerElement.width()/headerElement.height(),data.slideshow.useAspectRatio=Weebly.view.isMobileView&&currentPage!=Weebly.PageManager.getCurrentHomepage(),"header"==mode&&(isSlideshow||ENABLE_HEADER_SLIDESHOW)?$("#heModeSwitcher").show():$("#heModeSwitcher").hide(),"element"==mode?$("#heAddText").hide():$("#heAddText").show(),"header"!=mode||Weebly.view.isMobileView||categoryID?$("#heSaveCombo").removeClass("heSaveComboComplex"):$("#heSaveCombo").addClass("heSaveComboComplex"),$("#heSaveButton span").text("slide"==mode?_W.tl("Save Slide"):_W.tl("Save")),"header"==mode?$("#heReset").show():$("#heReset").hide(),$("#heSaveDropdown .heSaveItem").removeClass("selected");var n=Weebly.currentHeader.id?Weebly.currentHeader.saved_to:null;"all"==n?$("#heSaveAll").addClass("selected"):"page"==n?$("#heSavePage").addClass("selected"):"some"==n&&$("#heSaveSelected").addClass("selected"),"slide"==mode?$("#he").addClass("heSlideEditor"):$("#he").removeClass("heSlideEditor"),recursionDepth||($(window).on("resize",updateCanvas),$("#scroll_container").on("scroll",updateCanvas)),flashLoaded?i():(canvasReadyCallback=function(){setTimeout(function(){i()},0)},showCanvas(),initCanvas())},stop:function(e,t){if(!savingInProgress){e=Weebly.view.isMobileView?"page":e;var i="header"==mode&&data.is_slideshow!=isSlideshow;if(!t&&"header"==mode&&!recursionDepth&&(anyChanges||anySlideshowChanges||i)&&Weebly.currentHeader.id&&!Weebly.view.isMobileView&&"all"==(e||Weebly.currentHeader.saved_to))return showConfirm({title:_W.tl("Save to All Pages?"),message:_W.tl("Are you sure you want to save this %ITEM% to ALL pages using this header layout?").replace("%ITEM%",isSlideshow?_W.tl("slideshow"):_W.tl("image")),okText:_W.tl("Save to all pages"),onConfirm:function(){Weebly.headerEditor.stop("all",!0)}}),void 0;var n=!1;if(!isSlideshow&&1==data.sprites.length){var o=data.sprites[0];o.rotation||o.edges||o.fade||o.coloring||o.shadow||o.glow||o.cropTop||o.cropRight||o.cropBottom||o.cropLeft||o.flipX||o.flipY||o.opacity!==undefined&&1!=o.opacity||o.url&&o.url.match(/^\//)&&o.url.match(/_orig\.[^\.]+$/)&&(n=!0)}var s="";"element"==mode&&(s=headerElement.up(".element").attr("id"));var r={};options.onBeforeSave&&(r=options.onBeforeSave(data,n)||r),data.is_slideshow=isSlideshow;var a;if(categoryID?(e="category",a=categoryID):a=currentPage,canvas.presave(),"element"!=mode||data.sprites.length)if("header"!=mode||e||Weebly.currentHeader.id)if(!isSlideshow&&anyChanges){savingInProgress=!0;var l,c=Object.toJSON(data);"element"==mode&&n&&(c="",l=o.url.replace(/^.*\/([^\/]*)_orig\.([^\.]+?)(\?.*)?$/,"$1.$2")),setTimeout(function(){canvas.save({site_id:currentSite,theme_id:currentTheme,page_id:a,header_id:Weebly.currentHeader.id||"",data:c,save_to:e||"",extension:"png",ucfid:s||"",top:r.top||"",align:r.align||"",marginleft:r.marginleft||"",marginright:r.marginright||"",attribution:r.attribution||"",border:r.border||"",filename:l||"",remove_link:r.remove_link||"",area:options.area?Object.toJSON(options.area):"",is_slide:"slide"==mode?1:0,is_mobile:Weebly.view.isMobileView||Weebly.mobile.isMobileEditor()?1:0})},0)}else isSlideshow||i||"header"==mode&&e&&Weebly.currentHeader.id?(savingInProgress=!0,new Ajax.Request("/weebly/header_editor/save.php",{parameters:{site_id:currentSite,theme_id:currentTheme,page_id:a,is_mobile:Weebly.view.isMobileView||Weebly.mobile.isMobileEditor()?1:0,header_id:Weebly.currentHeader.id||"",data:Object.toJSON(data),save_to:e},onSuccess:function(e){Weebly.headerEditor.saved(e.responseText)},onComplete:function(){savingInProgress=!1}})):(stopHeaderEditor(),restoreBackground(),options.onSave&&options.onSave());else expandSaveMenu();else savingInProgress=!0,new Ajax.Request("/weebly/header_editor/save.php",{parameters:{site_id:currentSite,ucfid:s,src:"http://www.weebly.com/weebly/images/na.jpg",data:"",top:r.top||"",align:r.align||"",marginleft:r.marginleft||"",marginright:r.marginright||"",border:r.border||"",attribution:"",remove_link:r.remove_link||""},onSuccess:function(e){Weebly.headerEditor.saved(e)},onComplete:function(){savingInProgress=!1}})}},cancel:function(){function e(){stopHeaderEditor(),restoreBackground(),options.onCancel&&options.onCancel()}recursionDepth||!anyChanges&&!anySlideshowChanges?e():showConfirm({title:_W.tl("Discard Changes?"),message:_W.tl("Are you sure you want to continue? The changes you've made will be discarded."),okText:_W.tl("Discard Changes"),cancelText:_W.tl("Cancel"),onConfirm:function(){e()}})},choosePages:function(){pageListDialog||(pageListDialog=new Weebly.Dialog({width:400,zIndex:10001})),pageListDialog.open("/weebly/header_editor/save_page_chooser.php?site_id="+currentSite+"&theme_id="+currentTheme+"&page_id="+currentPage+"&header_id="+(Weebly.currentHeader.id||"")+"&is_mobile="+(Weebly.view.isMobileView||Weebly.mobile.isMobileEditor()?1:0))},pagesSelectAll:function(){$("#hePageChooser input[type=checkbox]").each(function(e,t){t.disabled||(t.checked=!0)})},pagesSelectNone:function(){$("#hePageChooser input[type=checkbox]").each(function(e,t){t.disabled||(t.checked=!1)})},stopWithPages:function(){var e=[];$("#hePageChooser input[type=checkbox]").each(function(t,i){i.checked&&e.push(i.id.match(/\d+/)[0])}),e.length?(pageListDialog.close(),Weebly.headerEditor.stop(e.join(","))):alert("Please select at least one page.")},canvasReady:function(){return canvas=getFlexApp("HeaderEditor"),flashLoaded=!0,canvasReadyCallback&&(canvasReadyCallback(),canvasReadyCallback=null),!0},spriteSelect:function(e){currentSprite&&e==currentSprite.id||closeExtraPanels(),closeDialogs(),currentSprite=spriteById(e),"image"==currentSprite.type?(hideTextPanel(),$("#heImagePanel").show(),$("#heBgPanel").hide()):"text"==currentSprite.type&&showTextPanel(function(){populateTextSprite();var e=currentSprite.font;e&&(defaultTextFont=e)})},backgroundSelect:function(){closeDialogs(),closeExtraPanels(),currentSprite=null,$("#heImagePanel").hide(),hideTextPanel(),$("#heBgPanel").show(),populateBgFill()},unselect:function(){closeDialogs(),closeExtraPanels(),currentSprite=null,hideTextPanel(),$("#heImagePanel").hide(),$("#heBgPanel").hide()},spriteTransform:function(e,t){if(isEditing()){var i=spriteById(e.id);i.x=e.x,i.y=e.y,delete i.cssX,delete i.cssY,"width"in e&&(delete i.fillDimensions,i.width=e.width,i.height=e.height),"image"==i.type&&("number"==typeof e.scale?i.scale=e.scale:delete i.scale),t||(anyChanges=!0)}},spriteIndexChange:function(e,t){var i=spriteById(e);data.sprites=data.sprites.without(i),data.sprites.splice(t,0,i),anyChanges=!0},spriteAskRemove:function(e){var t,i=spriteById(e);"image"==i.type?t=_W.tl("Are you sure you want to remove this image?"):"text"==i.type&&(t=_W.tl("Are you sure you want to remove this text?")),confirm(t)&&(_removeSprite(i),canvas.removeSprite(e))},spriteRemove:function(e){currentSprite&&currentSprite.id==e&&(currentSprite=null),_removeSprite(spriteById(e))},imageSpriteCrop:function(e){var t=spriteById(e.id);t.x=e.x,t.y=e.y,t.cropTop=e.cropTop||0,t.cropLeft=e.cropLeft||0,t.cropRight=e.cropRight||0,t.cropBottom=e.cropBottom||0,cropPanel&&cropPanel.hide(),showSaveCancel(),anyChanges=!0},imageSpriteReplace:function(e){chooseImage({type:"imageperfect",ucfid:getUCFID(),minDimensions:getMinDimensions(),onChoose:function(t){currentSprite.url="/uploads/"+t.url,canvas.replaceImage(e,t.url),currentSprite.cropTop=0,currentSprite.cropLeft=0,currentSprite.cropRight=0,currentSprite.cropBottom=0,t.attributionUrl?currentSprite.pageUrl=t.attributionUrl:delete currentSprite.pageUrl,t.attributionAuthor?currentSprite.creator=t.attributionAuthor:delete currentSprite.creator,anyChanges=!0}})},textSpriteEdit:function(e,t){spriteById(e).text=t,anyChanges=!0},saved:function(e){savingInProgress=!1,setTimeout(function(){var t=!0;"header"==mode?(restoreBackground(),setCurrentHeaderImage(Weebly.evalJSON(e),!0)):options.onSave&&(t=!1!==options.onSave(e)),window.popLoading(),t&&stopHeaderEditor()},0)},showLoading:window.pushLoading,hideLoading:window.popLoading,showError:function(e){alert(e)},problemLoadingImage:function(e){alert("There was an error downloading one of your images.\n("+e+")");for(var t=data.sprites,i=[],n=0;n<t.length;n++)("image"!=t[n].type||t[n].url!=e)&&i.push(t[n]);i.length!=t.length&&(data.sprites=i,anyChanges=!0)},shouldHideCursor:function(){return-1==navigator.userAgent.indexOf("Chrome")},externalDecode:function(){for(var funcName=arguments[0],args=Array.prototype.slice.call(arguments,1),i=0;i<args.length;i++)"string"==typeof args[i]&&(args[i]=args[i].replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%"));var func=eval(funcName);func.apply(window,args)},bulkImageDone:function(){isEditing()&&(window.popLoading(),canvasBgUpdate(),"header"==mode?headerElement.css({"background-image":"none",filter:""}):headerElement.css("visibility","hidden"))},spriteUpdateStart:function(e,t,i,n){options.onUpdateStart&&options.onUpdateStart(e,t,i,n)},spriteUpdate:function(e,t,i,n){options.onUpdate&&options.onUpdate(e,t,i,n)},spriteUpdateStop:function(e,t,i,n,o){if("header"!=mode){if(o)for(var s=0;s<o.length;s++){var r=spriteById(o[s].id);r.x=o[s].x,r.y=o[s].y}contentRect.x=Math.round(e),contentRect.y=Math.round(t),contentRect.width=Math.round(i),contentRect.height=Math.round(n),updateSizeText(),options.onUpdateStop&&options.onUpdateStop(e,t,i,n,function(e,t){(e||t)&&canvas.moveSpriteOrigin(e,t)})}},reportRectChange:function(e,t,i,n,o,s){isEditing()&&(this.spriteUpdateStart(e,t,i,n),this.spriteUpdate(e,t,i,n),this.spriteUpdateStop(e,t,i,n,o,s),contentRect.x=Math.round(e),contentRect.y=Math.round(t),contentRect.width=Math.round(i),contentRect.height=Math.round(n),updateSizeText())},getElementInnerRect:getElementInnerRect,updateConstraints:function(e){canvas.updateConstraints(e)},isMobileEditor:function(){return options.mobile||!1}};var DEFAULT_PATTERN="/weebly/header_editor/images/patterns/8.jpg",DEFAULT_GRADIENT_COLORS=["#33CCFF","#3366FF"],DEFAULT_GRADIENT_ANGLE=90,DEFAULT_GLOW_COLOR="#3333FF",FILL_SQUARE_DIM=64,spriteUID=0,expandSaveMenu,saveDropdownVisible=!1,mainSubpanel,optionsSubpanel,slideshowTransitionDropdown,slideshowDelayDropdown,slideshowNavDropdown,slideshowDotPositionDropdown,savedSlideshowOptions,slideshowEditToolbar,captionForm,isCaptionFormOpen=!1,spotlight,MAX_THUMBNAIL_WIDTH=170,MAX_THUMBNAIL_HEIGHT=58,imageButton,textButton,textFillTabs,fontDropDown,fontSizeDropDown,defaultTextFont="Cantarell",glowPanel,glowSlider,glowColorSquare,glowOrigValue,glowOrigColor,shadowPanel,shadowSlider,shadowOrigValue,shadowOrigAngle,shadowAngleSet,shadowCloseFunction,opacityPanel,opacitySlider,opacityOrigValue,cropPanel,rotateDialog,rotateSlider,origRotateValue,origFlipX,origFlipY,fadePanel,fadeSlider,fadeAngleSet,fadeOrigValue,fadeOrigAngle,miscPanel,miscSavedProps,canvasElement,canvas;
Weebly.headerEditor.getBackgroundSprite=inspectHeaderBackgroundSprite}(Weebly.jQuery,window),_wAMD.define("imageperfect/he",function(){}),_wAMD.define("themes/model/Theme",["backbone-all"],function(e){var t=e.Model.extend({sync:function(t,i,n){"delete"===t&&i.get("custom")?e.ajax({url:"/weebly/getElements.php",type:"POST",data:{pos:"deletecustomtheme",customThemeID:this.get("id").match(/\d+$/)[0]},success:function(){n.success.apply(this,arguments),i.trigger("destroy",i)}}):e.sync.prototype.apply(this,arguments)}});return t}),_wAMD.define("themes/collection/Themes",["jquery","backbone-all","themes/model/Theme"],function(e,t,i){var n=t.Collection.extend({model:i,url:"/theme_browser/theme_ajax.php",loading:!1,selectedColor:"",sync:function(e,t,i){var n=this;"read"===e&&(n.loading=!1,i.callback=function(e){n.reset(e,{silent:i.silent})},this.sendRequest(i))},fetchOffset:function(e){var t=this;this.loading||(e.callback=function(e){var i=t.length;0===e.length&&(t.loading=!0),t.add(e),t.trigger("append",t.slice(i,t.length))},this.sendRequest(e))},sendRequest:function(t){var i=this;startWait(),e.ajax(this.url,{beforeSend:function(){return i.loading?!1:(i.loading=!0,void 0)},type:"GET",data:{pos:"getList",category:t.category,color:t.color,limit:t.limit,offset:t.offset,sort:t.sort,used:t.used||0,site_id:window.currentSite||"",custom:t.custom,has_customizable_background:t.has_customizable_background},success:function(e){i.loading=!1,t.callback(e),endWait()}})}});return n}),_wAMD.define("themes/view/ThemeOption",["backbone-all","jquery","mustache"],function(e,t,i){function n(e){e.stopPropagation()}var o=e.View.extend({imageSize:"xlarge",events:{"mouseenter .theme-select":"hoverTheme","mouseleave .theme-select":"hoverThemeLeave","click .theme-menu":"selectMenu","click .theme-colors":n,"click .theme-colors li":"selectThemeColor","click .theme-colors-count":"showThemeColors","mouseleave .theme-colors":"showThemeMask"},className:"theme-option",tagName:"li",initialize:function(e){var t=this.model.get("used_color"),i=this.model.get("color_category"),n=this.model.get("colors");this.compileTemplates(),i&&i.defined_color?this.selectedColor=i.defined_color:t?this.selectedColor=t:n.length&&(this.selectedColor=n[0].value),this.options=e,this.onChoose=e.onChoose||function(){},this.model.on("destroy",_.bind(this.handleDestroy,this))},compileTemplates:function(){this.template=i.compile('<div class="theme-select-wrapper"><div href="#" class="theme-select"><img data-src="{{thumb}}" src="{{blank}}" alt="{{title}}" /><div class="theme-menu">{{{colors}}}<div class="theme-actions"><button class="btn btn-primary" data-action="choose">'+_W.tl("Choose")+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"),this.templateColors=i.compile('<div class="theme-colors-wrapper"><ul class="theme-colors">{{#colors}}<li data-color="{{value}}" style="background-color:{{sample}}"></li>{{/colors}}</ul></div>')},render:function(){var e,t;this.model.get("colors").length>1&&(t=this.templateColors({count:this.model.get("colors").length,colors:this.model.get("colors")})),e=this.template({colors:t,thumb:this.getThumb(),title:this.model.get("title"),isOld:this.model.get("is_old"),showTitle:this.options.sortedRecentlyUsed,blank:"/weebly/assets/images/util/general/blank.gif"});var i=this.selectedColor||"";return i=i.replace(/'/g,"\\'"),this.$el.html(e).find(".theme-colors li[data-color='"+i+"']").addClass("selected"),this.model.set("selected_color",this.selectedColor),this},getThumb:function(){var e,t=this.model.get("colors"),i=(this.selectedColor||"").toLowerCase(),n="screenshots",o=this.options.screenshotType;if(("store"==o||"blog"==o)&&(n=o+"_"+n),t&&t.length)if(i){for(var s=0;s<t.length;s++)if(i===t[s].value.toLowerCase()){e=(t[s][n]||{})[this.imageSize];break}}else e=t[0][n][this.imageSize];else e=(this.model.get(n)||{})[this.imageSize];return e||(e="/weebly/assets/images/onboarding/thumbnail-pending.png"),e},showThemeColors:function(e){this.$el.addClass("show-palette"),e.stopPropagation()},showThemeMask:function(){this.$el.removeClass("hide-mask")},selectThemeColor:function(e){var i,n,o,s;s=t(e.currentTarget),this.$el.find("ul.theme-colors li.selected").removeClass("selected"),s.addClass("selected"),i=e.currentTarget.getAttribute("data-color"),n=this.$el.find("img"),n.length>0&&(o=n.attr("src").replace(/_screenshot_([^_]*)_(.*_)?(hd|xlarge|large|medium|small).jpg(\?\d+|\?)?$/,"_screenshot_"+i+"_$2"+this.imageSize+".jpg$4"),n.attr("src",o)),this.$el.addClass("hide-mask"),this.model.set("selected_color",i),e.stopPropagation()},selectTheme:function(e){var i=this.model.get("id"),n=this.model.get("selected_color"),o=t(e.currentTarget).closest(".theme-select"),s=o.closest("ul");s.hasClass("theme-selected")||(o.parent().addClass("theme-hold"),this.onChoose(i,n))},hoverTheme:function(){this.$el.addClass("theme-hover")},hoverThemeLeave:function(){this.$el.removeClass("theme-hover show-palette hide-mask")},handleDestroy:function(){var e,i=this.$el,n=t("#custom-themes-count"),o=parseInt(/\d+/.exec(n.text()||"0")[0]);i.children().fadeOut(function(){i.remove(),e=--o>0?"("+o+")":"",n.text(e)})},selectMenu:function(e){var t=e.target.getAttribute("data-action");e.stopPropagation(),"choose"===t&&this.selectTheme(e)}});return o}),_wAMD.define("themes/view/ThemeList",["backbone-all","jquery","themes/view/ThemeOption"],function(e,t,i){function n(e){e.setAttribute("data-loaded",!0),u=e.getElementsByTagName("img")[0],u&&(d=u.getAttribute("data-src"),s&&(d=d.replace(/.([a-zA-Z]+)$/,"-hd.$1")),u.src=d)}function o(){for(var e,t=[],i=0;i<h.length;i++)if(e=h[i],e.offsetTop+p/8<a+f)if(e.getAttribute("data-loaded")||n(e),r&&e.classList.contains("future"))e.classList.remove("future"),t.push(i);else{var o=h.eq(i);!Modernizr.csstransitions&&o.hasClass("future")?(o.removeClass("future").find("img").hide().fadeIn(350),t.push(i)):o.hasClass("future")&&(o.removeClass("future"),t.push(i))}t.length&&h.splice(0,t.length)}var s,r,a,l,c,u,d,h,p,f,m=1e3,g=e.View.extend({id:"w-theme-list",className:"fly",tagName:"ul",themeLimit:16,initialize:function(e){var t=this;r=!!document.body.classList,s=window.devicePixelRatio>1,this.filter=e.filter,this.scrollTarget=e.scrollTarget,this.onChoose=function(i,n){t.$el.addClass("theme-selected"),e.onChoose(i,n)},this.options=e,this.ThemeOption=e.ThemeOption||i,this.auto_ajax=e.hasOwnProperty("auto_ajax")?e.auto_ajax:!0,this.collection.on("append",this.append,this),this.filter.on("change",function(){this.collection.fetch(this.filter.toJSON())},this)},append:function(e){var t,i=this;return _.each(e,function(e){t=new i.ThemeOption({model:e,className:"theme-option future",sortedRecentlyUsed:i.filter.attributes.used,onChoose:i.onChoose,screenshotType:i.options.pageType}),i.$el.append(t.render().el)}),h=this.$el.children("li.future"),this},render:function(){var e,t=this;return this.collection.each(function(i){e=new t.ThemeOption({model:i,sortedRecentlyUsed:t.filter.attributes.used,onChoose:t.onChoose,screenshotType:t.options.pageType}),t.$el.append(e.render().el)}),this.$el.children("li").addClass("future"),this},showViewportThemes:function(){if(this.$el.is(":visible")){if(h=this.$el.children("li"),!h.length)return this.showNoResultsMessage(),void 0;this.clearNoResultsMessage();var e=this,i=h.eq(0),o=i.width();i.imagesLoaded(function(){function s(e,t){return e.slice(l*t,l*t+l)}p=i.height()||1,f=document.documentElement.clientHeight;var r=e.$el.position().top||0,a=f-r,l=Math.round(e.$el.width()/o);Math.ceil(h.length/l);for(var c,u=Math.ceil(a/p),d=0,m=0,g=0;u+d>g;g++)s(h,g).removeClass("future").each(function(e,i){c=t(i).css("opacity",0),function(e){setTimeout(function(){e.css("opacity",1)},m+=200)}(c),n(i)});h.splice(0,u*l),t(e.scrollTarget).on("scroll",_.bind(e.onScroll,e))})}},showNoResultsMessage:function(){var e;e=this.filter.get("custom")?_W.tl("You haven't created any custom themes yet.")+"<p>"+_W.tl('Custom themes are created by clicking the <b>"Edit HTML/CSS"</b> tab when viewing a theme in the <b>"Design"</b> area. These features are intended for advanced users that understand how to modify themes using HTML & CSS code.')+"</p>":_W.tl("No results! Try refining your search filters."),this.$el.hide().addClass("no-results").html('<li class="theme-option-no-result">'+e+"</li>").css("opacity",0).show().animate({opacity:1,"margin-top":-10})},clearNoResultsMessage:function(){this.$el.removeClass("no-results").removeAttr("style")},onScroll:function(){this.scrollTarget===window?(a=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,l=document.documentElement.clientHeight,c=t(document).height()):(a=this.scrollTarget.scrollTop,l=this.scrollTarget.offsetHeight,c=this.scrollTarget.scrollHeight),requestAnimFrame(o),this.auto_ajax&&!this.collection.loading&&a+l+m>c&&(this.filter.addOffset(this.themeLimit,{silent:!0}),this.collection.fetchOffset(this.filter.toJSON()))}});return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),g}),_wAMD.define("themes/model/Filter",["backbone-all","jquery","themes/view/ThemeList"],function(e,t,i){var n=e.Model.extend({defaults:function(){return{limit:i.themeLimit,offset:0,category:void 0,color:void 0}},addOffset:function(e,t){return this.setExtend({offset:this.get("offset")+e||i.themelist},t)},setExtend:function(e,i){var n=t.extend(this.toJSON(),e);return this.set(n,i)}});return n}),_wAMD.define("themes/view/ChooserThemeOption",["jquery","mustache","themes/view/ThemeOption","themes/view/PreviewTheme"],function(e,t,i,n){var o=i.extend({events:function(){var e=i.prototype.events;return e["click .theme-delete"]="deleteTheme",e},compileTemplates:function(){i.prototype.compileTemplates.apply(this,arguments),this.template=t.compile('<div class="theme-select-wrapper"><div href="#" class="theme-select">'+(this.model.get("screenshots")?'<img data-src="{{thumb}}" src="{{blank}}" alt="{{title}}" />':'<div class="theme-title">{{title}}</div><div class="theme-pending">'+_W.tl("Screenshot pending")+"</div>")+(this.model.get("custom")&&!this.model.get("developer_share")?'<span class="theme-delete" title="'+_.escape(_W.tl("Delete custom theme"))+'">X</span>':"")+'<div class="theme-menu">'+"{{^showTitle}}"+"{{{colors}}}"+"{{/showTitle}}"+"{{#showTitle}}"+'<span class="theme-option-title">'+"{{#isOld}}"+_W.tl("%s - Old","Denotes old theme").replace("%s","{{title}}")+"{{/isOld}}"+"{{^isOld}}"+"{{title}}"+"{{/isOld}}"+"</span>"+"{{/showTitle}}"+'<div class="theme-actions">'+'<button class="btn" data-action="preview">'+_W.tl("Preview")+"</button>"+'<button class="btn" data-action="choose">'+_W.tl("Choose")+"</button>"+(this.model.get("custom")&&!this.model.get("developer_share")?'<button class="btn" data-action="edit">'+_W.tl("Edit")+"</button>":"")+"</div>"+"</div>"+"</div>"+"</div>"),this.templateColors=t.compile('<div class="theme-colors-wrapper"><ul class="theme-colors">{{#colors}}<li data-color="{{value}}" style="background-color:{{sample}}"></li>{{/colors}}</ul></div>')},selectMenu:function(e){var t=e.target.getAttribute("data-action");e.stopPropagation(),"preview"===t?this.previewTheme():"choose"===t?this.selectTheme():"edit"===t&&this.editTheme()},previewTheme:function(){new n({theme:this.model.get("id"),colors:this.model.get("colors"),selectedColor:this.model.get("selected_color")})},selectTheme:function(){var e=this.model.get("id"),t=this.model.get("selected_color");this.onChoose(e,t)},editTheme:function(){window.currentTheme=this.model.get("id"),require("editor/app").vent.trigger("themeEditor")},deleteTheme:function(){var e=this;showConfirm({title:_W.tl("Delete Theme?"),message:_W.tl("Are you sure you want to delete this custom theme?"),okText:_W.tl("Delete Theme"),onConfirm:function(){e.model.destroy()}})}});return o}),_wAMD.define("themes/view/AbstractFilter",["backbone-all","jquery","mustache"],function(e,t,i){var n=e.View.extend({events:{"change select":"handleChange"},initialize:function(e){this.compileTemplates(),this.filter=e.filter,this.categories=e.categories,this.colors=e.colors},compileTemplates:function(){this.template=i.compile('<form id="{{id}}">&nbsp;{{{select}}}</form>'),this.selectTemplate=i.compile('<select data-type="{{type}}" id="{{id}}">{{#list}}{{#name}}<option value="{{value}}">{{name}}</option>{{/name}}{{^name}}<option value="{{.}}">{{.}}</option>{{/name}}{{/list}}</select>')},render:function(){var e,t;return e=this.selectTemplate({id:this.colorsSelectId,list:this.colors,type:"color"}),t=this.template({id:this.colorsId,select:e}),this.$colorsEl.append(t),e=this.selectTemplate({id:this.categoriesSelectId,list:this.categories,type:"category"}),t=this.template({id:this.categoriesId,select:e}),this.$categoriesEl.append(t),this},handleChange:function(e){var t=e.currentTarget,i=t.getAttribute("data-type"),n={offset:0,custom:!1};return"category"===i?n.category=t.value:"color"===i?(n.color=t.value,this.collection.selectedColor=n.color):"has_customizable_background"===i?n.has_customizable_background=t.checked:"sort"===i&&("used"==t.value?(n.used=1,n.sort=""):(n.used=0,n.sort=t.value)),this.filter.setExtend(n),this}});return n}),_wAMD.define("themes/view/ChooserFilter",["jquery","themes/view/AbstractFilter","mustache"],function(e,t,i){var n=t.extend({el:"#w-design-themes",colorsId:"colors-filter-form",categoriesId:"categories-filter-form",colorsSelectId:"colors-filter-select",categoriesSelectId:"categories-filter-select",events:function(){var e=t.prototype.events;return e["click #custom-themes button"]="handleCustomThemeFilter",e["change #theme-has-bg-checkbox"]="handleCheckboxChange",e},initialize:function(e){var i=this;this.compileTemplates(),t.prototype.initialize.apply(this,arguments),this.scrollTarget=e.scrollTarget,this.colorPalette=this.colors,this.colors=_.map(this.colors,function(e,t){return i.colors[t].color}),this.categories=i.categories.map(function(e){return e}),this.$sortEl=this.$el.find("#sort-filter"),this.$colorsEl=this.$el.find("#colors-filter"),this.$categoriesEl=this.$el.find("#categories-filter"),this.$customThemesEl=this.$el.find("#custom-themes")},compileTemplates:function(){t.prototype.compileTemplates.apply(this,arguments),this.colorTemplate=i.compile('<span class="color-square option" data-value="{{color}}" style="background-color:{{sample}}"><span></span></span>'),this.categoryTemplate=i.compile('<div data-value="{{category}}" class="category{{^disabled}} option{{/disabled}}{{#disabled}} disabled{{/disabled}}">{{category}}</div>')},initializeFilters:function(){return this.initializeSort(),this.initializeColors(),this.initializeCategories(),this.initializeCustomThemes(),this},initializeSort:function(){return this.$sortEl.on("click","li",_.bind(this.handleSortFilter,this)),this},initializeColors:function(){var e=this,t="",i=this.$colorsEl.find("#"+this.colorsSelectId);return i.children("option").each(function(i,n){t+=e.colorTemplate({sample:e.findColorSample(n.value),color:n.value})}),i.prepend('<option value="">'+_W.tl("All Styles")+"</option>"),this.$colorsEl.find("#"+this.colorsId).hide().end().find(".color-squares").slideUp(0).css("opacity",0).html(t).slideDown().animate({opacity:1},{queue:!1}),this.$colorsEl.on("click",".option",_.bind(this.handleColorFilter,this)),this},initializeCategories:function(){var t=this.$categoriesEl.find("#"+this.categoriesSelectId);t.prepend('<option value="">'+_W.tl("All Styles")+"</option>"),t.find("option:first").prop("selected",!0),t.wSelectbox({theme:"control",allowClear:!0});var i=t[0].previousSibling;i&&e(i).remove()},initializeCustomThemes:function(){return this},handleFilterPrehook:function(t){this.scrollTarget.scrollTop<2500?e(this.scrollTarget).animate({scrollTop:0}):this.scrollTarget.scrollTop=0,t||this.$customThemesEl.find("button").removeClass("active")},handleColorFilter:function(e){this.handleFilterPrehook();var t=e.currentTarget.getAttribute("data-value");this.$colorsEl.find("#"+this.colorsSelectId).val(t).trigger("change"),this.$colorsEl.find(".selected").removeClass("selected"),e.currentTarget.className+=" selected"},handleCategoryFilter:function(){this.handleFilterPrehook()},handleSortFilter:function(){this.handleFilterPrehook()},handleCustomThemeFilter:function(){this.toggleCustomThemes()},toggleCustomThemes:function(e){var t=this.$("#custom-themes button");void 0===e&&(e=!t.hasClass("active")),t.toggleClass("active",e),this.handleFilterPrehook(!0),this.filter.setExtend({offset:0,custom:e,force:Math.random()})},handleCheckboxChange:function(e){this.handleFilterPrehook(),this.handleChange(e)},findColorSample:function(e){for(var t=0;t<this.colorPalette.length;t++)if(this.colorPalette[t].color===e)return this.colorPalette[t].sample}});return n}),_wAMD.define("themes/view/Chooser",["jquery","backbone-all","mustache","themes/collection/Themes","themes/model/Filter","themes/view/ChooserFilter","themes/view/ChooserThemeOption","themes/view/ThemeList"],function(e,t,i,n,o,s,r,a){var l=t.View.extend({el:document,initialize:function(){Weebly.View=Weebly.View||{},Weebly.View.Themes=Weebly.View.Themes||{},this.themes=new n,this.themes.on("reset",this.renderThemeList,this),this.filter=new o,this.themes.fetch(),this.getChooserData(),this.$el.find("#sort-filter-select").wSelectbox({theme:"control",allowClear:!1}),this.subviews={},this.subviews.themeList=new a({filter:this.filter,collection:this.themes,scrollTarget:document.getElementById("w-theme-browser"),onChoose:this.selectTheme,ThemeOption:r})},reset:function(){this.subviews.themeList.$el.removeClass("theme-selected").children("li.theme-hold").removeClass("theme-hold")},renderThemeList:function(){var e=this.subviews.themeList;return e.$el.empty(),this.$el.find("#w-theme-browser").append(e.render().el),e.showViewportThemes(),this},handleChooserData:function(e){var t=new s({filter:this.filter,collection:this.themes,categories:e.categories,colors:e.colors,scrollTarget:document.getElementById("w-theme-browser")});Weebly.View.Themes.chooserFilter=t,t.render().initializeFilters();var i="";return e.customThemes.length&&(i="("+e.customThemes.length+")"),t.$el.find("#custom-themes-count").text(i),this},getChooserData:function(){var t=this;startWait(),e.ajax("/theme_browser/theme_ajax.php",{method:"get",data:{pos:"getChooserData"},success:function(e){t.handleChooserData(e),endWait()}})},selectTheme:function(e,t){changeTheme(e,t),Pages.go("editMenu")}});return l}),_wAMD.define("tpl!editor/dialogs/upload-theme",[],function(){return'<div class="titled-box-body">\n	<div class="titled-box-drag-and-drop">\n		<p>{{#tl}}Upload your own custom theme, the custom theme format details:{{/tl}}</p>\n		<ul>\n			<li>{{#tl}}A zip file containing your theme{{/tl}}</li>\n			<li>{{#tl}}Template layout data in a file called index.html{{/tl}}</li>\n			<li>{{#tl}}Style information in a file called main_style.css{{/tl}}</li>\n			<li>{{#tl}}All image files associated with your theme{{/tl}}</li>\n			<li>{{#tl}}All files must be in the root directory of your zip archive. Any files in a subdirectory will not be imported{{/tl}}</li>\n		</ul>\n		{{#dndEnabled}}\n			<p>{{#tl}}To import, click on "Select a Theme" or drag the zip file here{{/tl}}</p>\n		{{/dndEnabled}}\n		{{^dndEnabled}}\n			<p>{{#tl}}To import, click on "Select a Theme"{{/tl}}</p>\n		{{/dndEnabled}}\n		{{#errors}}\n			<div class="error">{{.}}</div>\n		{{/errors}}\n	</div>\n</div>'}),_wAMD.define("themes/view/ThemeUploadDialog",["jquery","backbone-all","mustache","editor/app","components/uploader-view/UploaderView","tpl!editor/dialogs/upload-theme","tpl!components/uploader-view/uploader"],function(e,t,i,n,o,s,r){var a=o.prototype,l=o.extend({template:i.compile(s),templateHelpers:function(){return{dndEnabled:window.dndEnabled}},dialog:{title:_W.tl("Import a Theme"),dialogClass:"upload-theme-dialog",size:"500x535",cancelX:!1,buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Select a Theme"),type:"div",className:"btn btn-large btn-primary w-upload-target"},{text:_W.tl("Cancel"),type:"div",className:"btn btn-large btn-cancel"}]}]},ui:{cancelBtn:".btn-cancel",okayBtn:".btn-primary",footer:".dialog-footer",error:".error",success:".success"},triggers:{"click @ui.cancelBtn":"dialog:close"},initialize:function(e){var i=this;i.model=new t.Model,e.uploadOptions={target:".btn-primary",type:"zip",multipleFiles:!1,url:"/weebly/themeImport.php"},a.initialize.apply(i,arguments)},onRender:function(){var e=this;e.ui.okayBtn&&e.connectUploadButton()},onShow:function(){var e=this;!this.uploadOpts.forceSWFU&&this.browser.xhr?e.connectUploadButton():this.$el=this.$el.find(".dialog-footer"),a.onShow.apply(e,arguments)},connectUploadButton:function(){var e=this,t=i.render(r,{multiple:this.uploadOpts.multipleFiles,accept:".zip,.ZIP"});e.ui.okayBtn.addClass("w-upload-button").append(t)},onDrop:function(e){var t=this,i=e.originalEvent.dataTransfer.files,n=[];i.length>1&&n.push(_W.tl("Upload only one theme file.")),t._mimeTypes[t.uploadOpts.type].regex.match(i[0].name)||n.push(_W.tl("Only zip files are allowed.")),n.length>0?(this.$el.removeClass("upload-view-drag"),t.model.set("errors",n),t.render()):a.onDrop.apply(t,arguments)},onChangeFile:function(t){var n=t.target.files,o=i.render(r,{multiple:this.uploadOpts.multipleFiles,accept:".zip,.ZIP"});this.upload(n),e(t.target).replaceWith(o)},onUploadLoadstart:function(){var e=this;e.model.unset("errors"),e.render()},onUploadSuccess:function(t){var i=this;"Success"==t.status?(Weebly.EDITOR?Weebly.View.Themes.chooserFilter.toggleCustomThemes(!0):self.addDesignerPlatformMarkup(t),i.trigger("dialog:close"),e("#"+this.swfuId+"-container").hide(),e("#notifications .w-upload-dialog").fadeOut(1e3,function(){e(this).find("#uploader-view-progress-bar").css("width",0)})):(i.ui.success.hide(),i.model.set("errors",[t.message]),i.render())}});return l}),function(e){function t(t){var i;"font-index"==t&&(i=!1,_.each(Weebly.PageManager.pages,function(e){return 0!=e.blog?(i=!0,!1):void 0}),e("#w-design-font-index").find(".blog-font").toggle(i)),e("#w-design-"+t).removeClass("offscreen-left offscreen-right").prevAll().addClass("offscreen-left").end().nextAll().addClass("offscreen-right"),"themes"==t?e("#w-theme-browser").show():e("#w-theme-browser").hide()}function i(){var t=e("<div style='background:#363b3e;position:absolute;z-index:13;top:36px;left:0;right:0;bottom:0;padding-left:50px'><div style='position:absolute;top:10px;left:15px;color:#fff;font-size:30px;cursor:pointer' class='w-icon-delete close'></div><iframe src='/theme_browser/designer_self.php' style='width:100%;height:100%;background:#fff' frameborder='0'></iframe></div>").find(".close").on("click",function(){t.remove()}).end().appendTo("body")}function n(){C.empty(),currentThemeData.colors=currentThemeData.colors||[],currentThemeData.colors.length>1&&e.each(currentThemeData.colors,function(t,i){if(i){var n=i.value,o=i.sample||n,s=e("<span class='color-square' style='background-color:"+o+"'>"+"<span></span>"+"</span>");(n==currentThemeColor||!currentThemeColor&&!t)&&s.addClass("selected"),s.on("click",function(){s.siblings().removeClass("selected"),s.addClass("selected"),changeTheme(currentTheme,n)}),C.append(s)}}),C.closest(".section-outer").toggle(!!currentThemeData.colors.length)}function o(){x.empty(),s(_W.tl("Search Box")+'<span class="w-icon-star pro-element-toggle"></span>',!0,"search"),s(_W.tl("Social Icons"),!0,"social"),s(_W.tl("Phone Number"),!0,"text","phone"),x.closest(".section-outer").toggle(!!x.children().length)}function s(t,i,n,o){if(("search"!=n||ENABLE_SEARCH_AREA)&&("social"!=n||ENABLE_SOCIAL_AREA)){var s=getAreaInstance(i,n,o);if(s&&e("#"+s.elID).length){var r=(o||n)+"-area-toggle",a=e("<div class='toggle-option'><label></label><div class='toggle-switch'><input type='checkbox' id='"+r+"'>"+"<label for='"+r+"'>"+"<div class='background-container'>"+"<div class='background-slider'>"+"<span class='label-on'>"+_W.tl("ON")+"</span>"+"<span class='label-off'>"+_W.tl("OFF")+"</span>"+"</div>"+"</div>"+"<span class='blob'><span class='blob-inner'></span></span>"+"</label>"+"</div>"+"<div style='clear:both'></div>"+"</div>");a.find("> label").html(t),a.find("input").prop("checked",!s.data.hidden).toggleClass("checked",!s.data.hidden).on("change",function(){"search"!==n||Weebly.Restrictions.hasAccess("site_search")?this.checked?s.show():s.hide():(this.checked=!1,editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"site_search",restrictionType:"feature",refer:"main"}))}),x.append(a)}}}function r(){k.hide(),S.hide(),currentThemeData.is_upgradable?k.show():currentThemeData.is_downgradable&&S.show()}function a(){if(!T){var i;"Free"==Weebly.Restrictions.levelToName(Weebly.Restrictions.level)&&e("#w-design-font-index .footer-section").remove(),C=e("#w-design-main .color-squares > .section-inner"),x=e("#w-design-main .area-toggles > .section-inner"),e("#change-theme-button").on("click",function(){t("themes"),i?i.reset():i=new(require("themes/view/Chooser"))}),e("#change-fonts-button").on("click",function(){var i;t("font-index"),i=e("#w-design-font-index .scroll"),i.data("weeblyScroll")||(i.weeblyScroll(),i.closest(".scroll-outer").stickySectionHeaders({scrollSelector:".scroll",headlineSelector:"h3"}),e(window).resize(function(){i.weeblyScroll("update")}))}),e("#change-background-button").on("click",function(){require("editor/app").vent.trigger("editor:toolbar:hide"),require("editor/app").ThemeBackground.open()}),e("#theme-edit-button").on("click",function(){require("editor/app").vent.trigger("themeEditor")}),e("#import-theme-button").on("click",function(){var e=require("themes/view/ThemeUploadDialog"),t=new e({});require("editor/app").showDialog(t)}),k=e("#theme-upgrade-button").on("click",function(){require("editor/build/themes/upgrading").startDelayedUpgrade(currentThemeData).done(function(){r()})}),S=e("#theme-downgrade-button").on("click",function(){require("editor/build/themes/upgrading").startDelayedDowngrade(currentThemeData).done(function(){r()})}),e("#plan-container .jump-to-themes").on("click",function(){Pages.go("themesMenu"),e("#change-theme-button").trigger("click")}),e("#plan-container .jump-to-fonts").on("click",function(){var t=e(this).data("type");Pages.go("themesMenu"),e("#change-fonts-button").trigger("click"),e("#w-editor-left").trigger("mouseenter"),t&&u(t)}),t("main"),T=!0}}function l(){e("#w-design-font-index button[data-type]").each(function(){var t=e(this),i=t.data("type");t.on("click",function(){u(i)}),t.hover(function(){w(i)},function(){M(i)})})}function c(){e("#w-design-font-edit").on("click",".return",function(){t("font-index")})}function u(i){var n=e("#w-design-font-scroll");A=i,t("font-edit"),n.find(".title:not(.custom-title)").text(e('#w-design-font-index button[data-type="'+i+'"]').text()),n.find(".control").data("currentFontEditType",i),h()}function d(){var t,i,n=e("#w-design-font-scroll div:first");e('<div class="content block-content cloned-content">').append(n.find(".block-content:not(.cloned-content)").find(".basic-controls, .reset-wrap").clone()).appendTo(n),v(),n.find(".basic-controls .color-dropdown").each(function(t,i){var n=e(i),o=n.closest(".control");n.weeblyColorChooser({containerOffsetY:5,onBeforeShow:function(){var e=D[o.data("currentFontEditType")],t=Weebly.DesignOptions[e+"Color"],i=t&&t.length;n.weeblyColorChooser(i?"smart":"basic")},onUpdate:function(e){var t=D[o.data("currentFontEditType")];setDesignOption(t+"Color",e),applyDesignOptions()},onChange:function(e){var t=D[o.data("currentFontEditType")];saveDesignOption(t+"Color",e),applyDesignOptions()},onRevert:function(e){var t=D[o.data("currentFontEditType")];setDesignOption(t+"Color",e),applyDesignOptions()}})}),n.find(".font-size-input, .font-size-input-alternate").each(function(t,i){var n=e(i),o=n.closest(".control");n.weeblyControlSpinner({min:6,max:100,interval:1,onChange:function(){var e=D[o.data("currentFontEditType")];saveDesignOption(e+"Size",this.value+"px"),applyDesignOptions()}})}),n.find(".font-line-height-input").each(function(t,i){var n=e(i),o=n.closest(".control");n.weeblyControlSpinner({min:6,max:100,interval:1,onChange:function(){var e=D[o.data("currentFontEditType")];saveDesignOption(e+"LineHeight",this.value+"px"),applyDesignOptions()}})}),n.find(".block-content .reset").each(function(t,i){var n=e(i),o=n.closest(".control");n.on("click",function(){var t=D[o.data("currentFontEditType")];e.each(["Font","Size","Weight","Color","LineHeight","Active","Link","Hover"],function(e,i){Weebly.DesignOptions[t+i]&&saveDesignOption(t+i,"")}),"button"==A&&Weebly.DesignOptions.smallButtonSize&&saveDesignOption("smallButtonSize",""),applyDesignOptions(),p(A)})}),i=e("#link-normal-color-dropdown").weeblyColorChooser({containerOffsetY:5,onBeforeShow:function(){var e=Weebly.DesignOptions[D[A]+"Link"],t=e&&e.length;i.weeblyColorChooser(t?"smart":"basic")},onUpdate:function(e){setDesignOption(D[A]+"Link",e),applyDesignOptions()},onChange:function(e){saveDesignOption(D[A]+"Link",e),applyDesignOptions()},onRevert:function(e){setDesignOption(D[A]+"Link",e),applyDesignOptions()}}),t=e("#hover-color-dropdown").weeblyColorChooser({containerOffsetY:5,onBeforeShow:function(){var e=Weebly.DesignOptions[D[A]+"Hover"],i=e&&e.length;t.weeblyColorChooser(i?"smart":"basic")},onUpdate:function(e){setDesignOption(D[A]+"Hover",e),applyDesignOptions()},onChange:function(e){saveDesignOption(D[A]+"Hover",e),applyDesignOptions()},onRevert:function(e){setDesignOption(D[A]+"Hover",e),applyDesignOptions()}})}function h(){var t=e("#w-design-font-scroll");E||(d(),E=!0),t.find(".size-control:first label").text(_W.tl("Size")),t.find(".block-content .control").hide(),t.find(".custom-title").remove(),t.find(".reset-wrap:first").show(),/links$/i.test(A)?t.find(".link-controls").show():t.find(".block-content:not(.cloned-content)").find(".basic-controls, .reset-wrap").show(),"blog-post-title"==A&&e("#hover-color-dropdown").closest(".control").show(),"navigation-menu-text"==A&&(t.find(".title").text(_W.tl("Main Navigation")),t.find(".cloned-content:eq(0)").before('<h3 class="title custom-title">Sub Navigation</h3>').find(".control").data("currentFontEditType","flyout-menu-text").show(),t.find(".color-control, .line-height-control").hide()),"photo-gallery-captions"==A&&(t.find(".title").text(_W.tl("Thumbnail Captions")),t.find(".cloned-content:eq(0)").before('<h3 class="title custom-title">Lightbox Captions</h3>').find(".control").data("currentFontEditType","lightbox-gallery-captions").show()),"product"==A&&(A="product-title",t.find(".title").text(_W.tl("Title")),t.find(".control").data("currentFontEditType","product-title"),t.find(".cloned-content:eq(0)").before('<h3 class="title custom-title">Price</h3>').find(".control").data("currentFontEditType","product-price").show().end().find(".line-height-control").hide()),/captions$/i.test(A)&&(t.find(".line-height-control").hide(),t.find(".color-control").hide()),("site-title"==A||"phone-number-field"==A)&&t.find(".line-height-control").hide(),"button"==A&&(t.find(".color-control").hide(),t.find(".line-height-control").hide(),t.find(".button-controls").data("currentFontEditType","small-button").show(),t.find(".size-control:first label").text(_W.tl("Large Button"))),p()}function p(){var t=e("#w-design-font-edit"),i=m(A);f(t,i,0),"navigation-menu-text"==A&&(i=m("flyout-menu-text"),f(t,i,1)),"product-title"==A&&(i=m("product-price"),f(t,i,1)),"button"==A&&e(".button-controls .font-size-input-alternate").val(parseInt(m("small-button").fontSize)),/links$/.test(A)&&(e("#link-normal-color-dropdown").weeblyColorChooser("set",i.link),e("#hover-color-dropdown").weeblyColorChooser("set",i.hover)),"photo-gallery-captions"==A&&(i=m("lightbox-gallery-captions"),f(t,i,1)),"blog-post-title"==A&&e("#hover-color-dropdown").weeblyColorChooser("set",i.hover)}function f(e,t,i){var n=e.find(".font-face-select").eq(i);n.val(t.fontFace||""),n.wSelectbox("updateSelected"),e.find(".font-size-input").eq(i).val(parseInt(t.fontSize)||t.fontSize),e.find(".basic-controls .color-dropdown").eq(i).weeblyColorChooser("set",t.fontColor),e.find(".font-line-height-input").eq(i).val(parseInt(t.lineHeight)||t.lineHeight),g(i,t)
}function m(e){var t={};return t.styles=getCurrentStyles(e),t.fontFace=Weebly.DesignOptions[D[e]+"Font"]||t.styles.font||"",t.fontObj=Weebly.Font.getFont(t.fontFace),t.fontFace=t.fontObj?t.fontObj.family:stripFontName(t.fontFace),t.fontSize=Weebly.DesignOptions[D[e]+"Size"]||t.styles.size||"",t.fontColor=Weebly.DesignOptions[D[e]+"Color"]||t.styles.color||"",t.lineHeight=Weebly.DesignOptions[D[e]+"LineHeight"]||t.styles.height||"",t.fontWeight=Weebly.DesignOptions[D[e]+"Weight"]||t.styles.weight||400,t.link=Weebly.DesignOptions[D[e]+"Link"]||t.styles.link,t.hover=Weebly.DesignOptions[D[e]+"Hover"]||t.styles.hover,t}function g(t,i){var t=t||0,n=e("#w-design-font-edit .font-style-select-wrap").eq(t).empty(),o=n.parent(".field"),s=[],r=n.closest(".control").data("currentFontEditType");if(i=i||m(r),i.fontObj&&(i.fontObj.hasRegular()&&s.push({value:400,text:_W.tl("Regular")}),i.fontObj.hasLight()&&s.push({value:300,text:_W.tl("Light")}),i.fontObj.hasUltraLight()&&s.push({value:200,text:_W.tl("Ultra Light")}),i.fontObj.hasBold()&&s.push({value:700,text:_W.tl("Bold")})),s.length<=1)return o.hide(),void 0;o.show();var a=e("<select>");e.each(s,function(t,i){a.append(e("<option>").text(_W.tl(i.text)).val(i.value))}),a.val(i.fontWeight),n.append(a),a.wSelectbox({theme:"control",block:!0,displayTemplate:"<button class='{{class}} btn-small' data-toggle='dropdown'><span class='inner'>{{innerHTML}}</span></button><button class='{{class}} btn-small' data-toggle='dropdown'><span class='icon-chevron-down'></span></button>"}).on("change",function(){saveDesignOption(D[r]+"Weight",this.value),applyDesignOptions()})}function v(){e("#w-design-font-edit .font-face-select").each(function(t,i){var n=e(i),o=n.closest(".control");n.attr("id","font-face-select"+t),D[o.data("currentFontEditType")],n.append(e("<option value=''/>").text(_W.tl("Default"))),e.each(Weebly.Font.data.groups,function(t,i){n.append(e("<option disabled/>").text(_W.tl(t))),e.each(i,function(t,i){var o=Weebly.Font.getFont(i),s=o.systemFamily?o.systemFamily:i;n.append(e("<option/>").attr("value",s).text(_W.tl(i)))})}),n.wSelectbox({theme:"control",displayTemplate:'<a class="{{class}} btn-large" data-toggle="dropdown"><span class="inner">{{{innerHTML}}}</span><span class="caret"></span></a>',renderItemHTML:function(t){var i=e(t);return i.is(":disabled")?"<li class='section-header disabled'>"+i.html()+"</li>":void 0},renderItemInnerHTML:function(t){return t.value?'<img src="'+b(t.text)+'"/>':e(t).html()}}).on("change",function(){var e=D[o.data("currentFontEditType")];Weebly.Font.loadFont(this.value),saveDesignOption(e+"Font",this.value),saveDesignOption(e+"Weight",""),applyDesignOptions(),g(t)})})}function b(e){return"/weebly/fonts/"+e.replace(/\s+/g,"_")+"/preview_white.png"}function y(){var t="";e.each(DESIGN_OPTIONS_SELECTORS,function(e,i){if(!e.match(/Color$/)){for(var n=i.split(/\s*,\s*/),o=0;o<n.length;o++)n[o]=".highlight-"+e+" "+n[o];i=n.join(", "),t+=i+" { "+P+" } "}}),t+=".highlight-a .wsite-not-footer h2.wsite-content-title a, .highlight-a .wsite-not-footer .paragraph a, .highlight-a .wsite-not-footer blockquote a, .highlight-a .wsite-not-footer .blog-sidebar a, .highlight-a .wsite-not-footer .blog-comments a, .highlight-a .wsite-not-footer .blog-comments-bottom a { "+P+" } "+".highlight-footerA .wsite-footer h2.wsite-content-title a, .highlight-footerA .wsite-footer .paragraph a, .highlight-footerA .wsite-footer blockquote a { "+P+" } ",e("head").append("<style>"+t+"</style>")}function w(t){e("body").addClass("highlight-"+R[t])}function M(t){e("body").removeClass("highlight-"+R[t])}window.enteringDesignTab=function(){t("main")},window.leavingDesignTab=function(){e("#w-theme-browser").hide()},window.updateDesignElements=function(){a(),r(),n(),o(),Weebly.ENABLE_BACKGROUND_EDITOR&&require("editor/theme-background/utils").getBackgroundElement()?e("#change-background-button").show():e("#change-background-button").hide()},e(function(){e("#w-theme-browser").hide(),e("#w-design-themes .return, #w-design-font-index .return").on("click",function(){t("main")}),e("#theme-designer-area-button").on("click",function(){i()})}),window.previewTheme=function(e){var t=require("themes/view/PreviewTheme");new t({theme:e,colors:[],selectedColor:""})};var C,x,k,S,T=!1;e(function(){a()}),e(function(){applyDesignOptions(),l(),c()});var A,D={"site-title":"siteTitle","paragraph-title":"header","paragraph-text":"global",links:"a","navigation-menu-text":"navMenu","flyout-menu-text":"flyoutMenu","image-captions":"imageCaptions","photo-gallery-captions":"galleryCaptions","lightbox-gallery-captions":"lightboxGalleryCaptions","slideshow-captions":"slideshowCaptions","phone-number-field":"phone","landing-page-headline":"headline","landing-page-sub-headline":"subHeadline",button:"button","small-button":"smallButton",blockquote:"blockquote","footer-paragraph-title":"footerHeader","footer-paragraph-text":"footerGlobal","footer-links":"footerA","footer-blockquote":"footerBlockquote","blog-post-title":"blogPostTitle","product-title":"productTitle","product-price":"productPrice"},E=!1,P="box-shadow: 0 0 1px 3px rgba(85, 185, 255, .6);border-radius: 3px;",R={"site-title":"siteTitle","paragraph-title":"header","paragraph-text":"global",links:"a","navigation-menu-text":"navMenu","image-captions":"imageCaptions","photo-gallery-captions":"galleryCaptions","slideshow-captions":"slideshowCaptions","phone-number-field":"phone","landing-page-headline":"headline","landing-page-sub-headline":"subHeadline",button:"button",blockquote:"blockquote","footer-paragraph-title":"footerHeader","footer-paragraph-text":"footerGlobal","footer-links":"footerA","footer-blockquote":"footerBlockquote","blog-post-title":"blogPostTitle",product:"productHighlight"};e(function(){y()}),e.fn.weeblyControlSpinner=function(t){t=t||{},this.each(function(){var i=e(this),n=e.extend({},t);n.incrementElement=i.parent().find(".spinner-inc"),n.decrementElement=i.parent().find(".spinner-dec"),n.defaultVal=14,i.spinner(n)})},e.fn.weeblyColorChooser=function(t){if(t=t||{},"set"==t)this.find(".color-square").css("background-color",arguments[1]);else if("smart"==t){var i=e(this),n=i.spectrum("isPaletteColor",i.spectrum("get"));i.spectrum(n?"collapse":"expand")}else"advanced"===t?e(this).spectrum("expand"):"basic"===t?e(this).spectrum("collapse"):this.each(function(){var i,n,o,s,r=e(this),a=r.find(".color-square");t=e.extend({},t,{showInput:!0,showPalette:!0,chooseText:"Ok",theme:"sp-w",clickoutFiresChange:!0,clickPaletteToClose:!1,preferredFormat:"hex6",showSelectionPalette:!1,dontHideBoundElement:!0,palette:[["#d5d5d5","#a1a1a1","#818181","#626262","#515151","#3f3f3f","#2a2a2a"],["#f8a9a9","#e97676","#e05c5c","#da4444","#c23b3b","#a82e2e","#8d2424"],["#f8c7a9","#e9a476","#e0915c","#da8044","#c2743b","#a85f2e","#8d5024"],["#f8eaa9","#e9cf76","#e0bf5c","#dab844","#c2a43b","#a88d2e","#8d7824"],["#c9f8a9","#a9e976","#91e05c","#81c94c","#6cb83a","#5fa233","#508d24"],["#a9f8dd","#76e9c7","#5ce0b6","#4cc9a4","#3ab890","#33a27f","#248d6c"],["#a9e4f8","#76cae9","#5cbce0","#4caac9","#3a96b8","#3387a2","#24678d"],["#b5aaf6","#9789e8","#8273da","#7161d0","#6555c2","#5848b7","#5040ae"],["#d8aaf6","#c389e8","#b073da","#a561d0","#9555c2","#8c48b7","#8640ae"],["#f6aaf0","#e889e0","#da73d2","#d061c7","#c255b9","#b748ae","#ae40a5"]]}),s={beforeShow:function(s){i=!1,o=null,n=a.css("background-color"),r.spectrum("set",n),n=r.spectrum("get").toHexString(),t.onBeforeShow&&t.onBeforeShow(s),e(r.spectrum("container")).find(".sp-color, .sp-hue").off(".weeblyColorChooser").on("mouseup.weeblyColorChooser",function(){o&&t.onUpdate&&t.onUpdate(o)})},show:function(){},move:function(e){o=e.toHexString(),a.css("background-color",o),i||t.onMove&&t.onMove(o)},change:function(e){i=!0,a.css("background-color",e.toHexString()),t.onChange&&t.onChange(e.toHexString())},hide:function(){!i&&o&&(a.css("background-color",n),t.onRevert&&t.onRevert(n))}},r.spectrum(e.extend(t,s))});return this}}(Weebly.jQuery),_wAMD.define("legacy/weebly_design_tab",["editor/app","legacy/weebly_restrictions","themes/view/Chooser","legacy/weebly_design_options","legacy/classes/Font","themes/view/ThemeUploadDialog"],function(){}),_wAMD.define("editor/theme-background/model/Image",["backbone"],function(e){var t=e.Model.extend({getUrl:function(){if(this.get("url"))return this.get("url");var e=this.get("filename");return e?this.get("isStock")?"//"+ASSETS_BASE+"/images/editor/theme-background/stock/"+e:this.get("isTemp")?"//"+editorStatic+"/uploads/"+Weebly.userUploadPath+"/background-images/temp/"+e+"?"+this.get("cacheBuster"):"//"+editorStatic+"/uploads/"+Weebly.userUploadPath+"/background-images/"+e:void 0},getThumbUrl:function(){if(this.get("url"))return this.get("url");var e=this.get("filename");return e?this.get("isStock")?"//"+ASSETS_BASE+"/images/editor/theme-background/stock/thumbs/"+e:this.get("isTemp")?"//"+editorStatic+"/uploads/"+Weebly.userUploadPath+"/background-images/temp/thumbs/"+e+"?"+this.get("cacheBuster"):"//"+editorStatic+"/uploads/"+Weebly.userUploadPath+"/background-images/thumbs/"+e:void 0},isEqual:function(e){return e instanceof t?this.getUrl()===e.getUrl():!1}});return t}),_wAMD.define("editor/theme-background/model/Background",["underscore","backbone","./Image"],function(e,t,i){function n(n,o){var s={};return o=o||{},e.each(n,function(e,n){if(!e||"image"!=n&&"origImage"!=n)s[n]=e;else{var r=e;r instanceof t.Model||(r=new i(e)),r.isEqual(o[n])||(s[n]=r)}}),s}var o=t.Model.extend({disableEffectProcessing:!1,constructor:function(e,i){"object"==typeof e&&(e=n(e)),t.Model.call(this,e,i)},initialize:function(){var e=this;e.on("change:origImage",function(){e.get("origImage")||(e.disableEffectProcessing=!0,e.unset("blur"),e.unset("darken"),e.unset("filter"),e.disableEffectProcessing=!1)}),e.on("change:blur",function(){e.processImageEffects()}),e.on("change:darken",function(){e.processImageEffects()}),e.on("change:filter",function(){e.processImageEffects()})},processImageEffects:function(){var e=this;if(!e.disableEffectProcessing){var t=e.get("origImage")||e.get("image"),n=e.get("blur")||0,o=e.get("darken")||0,s=e.get("filter")||"";if(t)if(n||o||s){var r=Object.toJSON(t.toJSON());startWait(_W.tl("Processing")),Weebly.Editor.RPC.ThemeBackground.setBackgroundEffects(r,n,o,s).done(function(n){if(n){var o=new i(n);e.set({origImage:t,image:o})}}).always(endWait)}else e.unset("origImage"),e.set("image",t)}},defaultSaveForTheme:function(e,t,i,n){var o=this,s=o.toJSON();return startWait(_W.tl("Saving")),Weebly.Editor.RPC.ThemeBackground.defaultSaveBackground(e,t,i,JSON.stringify(s),n).done(function(e){s&&o.set(e[i]),o._original.set(o.toJSON()),o.trigger("saved")}).always(endWait)},saveForTheme:function(e,t,i){var n=this,o=n.toJSON();return startWait(_W.tl("Saving")),Weebly.Editor.RPC.ThemeBackground.saveBackground(e,t,i,JSON.stringify(o)).done(function(e){o&&n.set(e[i]),n._original.set(n.toJSON()),n.trigger("saved")}).always(endWait)},copyToSelf:function(e){e.get("image")?this.set("image",e.get("image")):this.unset("image"),e.get("origImage")?this.set("origImage",e.get("origImage")):this.unset("origImage"),e.get("blur")?this.set("blur",e.get("blur")):this.unset("blur"),e.get("darken")?this.set("darken",e.get("darken")):this.unset("darken"),e.get("filter")?this.set("filter",e.get("filter")):this.unset("filter")},set:function(e,i,o){var s;return"object"==typeof e?(s=e,o=i):(s={})[e]=i,s=n(s,this.attributes),t.Model.prototype.set.call(this,s,o)},clone:function(){var e=t.Model.prototype.clone.apply(this,arguments),i=this.get("image"),n=this.get("origImage");return i&&e.set({image:i.clone()},{silent:!0}),n&&e.set({origImage:n.clone()},{silent:!0}),e},toJSON:function(){var e=t.Model.prototype.toJSON.call(this);return e.image&&(e.image=e.image.toJSON()),e.origImage&&(e.origImage=e.origImage.toJSON()),e}});return o}),_wAMD.define("editor/theme-background/view/ImageSelectorItem",["backbone"],function(e){var t=e.View.extend({className:"choice",selected:!1,events:{click:"select"},render:function(){var e=this.model.getThumbUrl();return e?this.$el.css({"background-image":"url('"+e+"')","background-size":"cover"}):this.$el.css({"background-color":"#fff"}),this},select:function(){this.selected||(this.$el.addClass("selected"),this.selected=!0,this.trigger("select"))},unselect:function(){this.selected&&(this.$el.removeClass("selected"),this.selected=!1,this.trigger("unselect"))}});return t}),_wAMD.define("editor/theme-background/view/ImageSelector",["jquery","underscore","backbone","./ImageSelectorItem"],function(e,t,i,n){var o=i.View.extend({className:"choices",items:null,selectedItem:null,availableImages:null,initialize:function(e){var t=this;t.options=e,t.availableImages=t.options.availableImages,t.listenTo(t.model,"change:origImage change:image",function(){t.updateSelectedImage()})},setAvailableImages:function(e){var t=this;t.availableImages=e,t.removeItems(),t.renderItems()},render:function(){var e=this;return e.renderItems(),this},renderItems:function(){var e=this;e.items=e.availableImages.collect(function(t){var i=new n({model:t});return e.listenTo(i,"select",function(){e.handleSelectedItem(i)}),e.$el.append(i.render().el),i}),e.$el.append("<div style='clear:both'/>"),e.updateSelectedImage()},updateSelectedImage:function(){var e=this,t=e.model.get("origImage")||e.model.get("image")||e.availableImages.findDefault();t?e.selectImage(t):e.unselect()},selectImage:function(e){var i=this,n=t.find(i.items,function(t){return e.isEqual(t.model)});n?n.select():i.unselect()},handleSelectedItem:function(e){var t=this,i=t.model.get("origImage")||t.model.get("image");t.unselect(),t.selectedItem=e,e.model.get("isDefault")?(t.model.unset("origImage"),t.model.unset("image")):e.model.isEqual(i)||(t.model.unset("origImage"),t.model.set("image",e.model))},unselect:function(){var e=this;e.selectedItem&&(e.selectedItem.unselect(),e.selectedItem=null)},remove:function(){return this.removeItems(),i.View.prototype.remove.apply(this,arguments)},removeItems:function(){var e=this;t.each(e.items,function(t){e.stopListening(t),t.remove()}),e.items=[],e.selectedItem=null}});return o}),_wAMD.define("editor/theme-background/collection/Images",["backbone","../model/Image"],function(e,t){return e.Collection.extend({model:t,find:function(i){var n=this;return i instanceof t?e.Collection.prototype.find.call(n,function(e){return i.isEqual(e)}):e.Collection.prototype.find.apply(n,arguments)},findDefault:function(){return e.Collection.prototype.find.call(this,function(e){return e.get("isDefault")})},findTemp:function(){return e.Collection.prototype.find.call(this,function(e){return e.get("isTemp")})}})}),_wAMD.define("text!templates/editor/theme-background/image-selector-dialog.tpl",[],function(){return"\n<div class='head'>\n	<div class='filter-wrap hang-left'>\n		<select class='filter'></select>\n	</div>\n	<h2>{{#tl}}Select Background{{/tl}}</h2>\n</div>\n<div class='content'>\n<div class='content-inner'>\n	{{! image selector goes here }}\n</div>\n</div>\n<div class='foot'>\n	<button class='btn btn-control btn-alternate upload'>\n		{{#tl}}Upload Image{{/tl}} <!-- TODO: i18n -->\n	</button>\n	<button class='btn btn-control btn-alternate cancel'>\n		{{#tl}}Cancel{{/tl}}\n	</button>\n	<button class='btn btn-control btn-info select'>\n		{{#tl}}Select{{/tl}}\n	</button>\n</div>"}),_wAMD.define("editor/theme-background/view/ImageSelectorDialog",["jquery","backbone","mustache","./ImageSelector","../collection/Images","text!templates/editor/theme-background/image-selector-dialog.tpl","util/ui/wSelectbox"],function(e,t,i,n,o,s){s=i.compile(s);var r=t.View.extend({className:"dialog select-background-dialog",imageSelector:null,backgroundCoverElement:null,backgroundEditorMain:null,events:{"click span.cancel":"cancel","click button.cancel":"cancel","click button.continue":"proceed","click button.select":"proceed"},initialize:function(t){var i=this;i.backgroundCoverElement=e(".background-cover"),i.backgroundEditorMain=e("#background-editor").find(".main"),i.backgroundCoverElement.css("zIndex",-1),i.backgroundEditorMain.css("zIndex",999),i.options=t,i.imageSelector=new n({model:i.model,availableImages:i.buildAvailableImages()})},render:function(){var t=this;t.$el.html(s(t.model.toJSON())).find(".content-inner").append(t.imageSelector.render().el);var i=t.$("select.filter");return i.append(e("<option value=''>").text(_W.tl("All Backgrounds"))),_.each(t.buildTags(),function(t){i.append(e("<option/>").attr("value",t).text(_W.tl(t)))}),i.wSelectbox({theme:"control"}).on("change",function(){t.imageSelector.setAvailableImages(t.buildAvailableImages(this.value)),t.$(".content-inner").scrollTop(0)}),t.$(".btn.upload").on("click",function(){t.trigger("uploadImage")}),t},updateSize:function(){this.$(".content-inner").css("max-height",e("#background-editor .main").height()-this.$(".head").outerHeight()-this.$(".foot").outerHeight()-30)},cancel:function(){this.backgroundCoverElement.css("zIndex",999),this.backgroundEditorMain.css("zIndex",-1),this.trigger("cancel")},proceed:function(){this.backgroundCoverElement.css("zIndex",999),this.backgroundEditorMain.css("zIndex",-1),this.trigger("proceed")},remove:function(){return this.imageSelector.remove(),t.View.prototype.remove.apply(this,arguments)},buildAvailableImages:function(e){var t,i=this,n=i.options,s=new o,r=i.model.get("origImage")||i.model.get("image");return _.each(n.stockImages,function(t){var i=t.tags||[];e&&-1==_.indexOf(i,e)||s.push({isStock:!0,filename:t.filename})}),r&&(t=s.find(r),t?(s.remove(t),s.unshift(t)):e||s.unshift(r)),e||(n.uploadedImage&&s.unshift(n.uploadedImage),s.unshift({url:n.defaultImageUrl||"",isDefault:!0})),s},buildTags:function(){var e=[];return _.each(this.options.stockImages,function(t){_.each(t.tags||[],function(t){-1==_.indexOf(e,t)&&e.push(t)})}),e}});return r}),_wAMD.define("components/regions/ClassicDialog",["jquery","backbone-all","components/regions/Dialog"],function(e,t,i){return i.prototype,i.extend({dialogClass:"popup-modal classic-dialog",createCancelX:function(e){i.prototype.createCancelX.apply(this,arguments),e.$el.find("a.close-x").removeClass("w-icon-delete")},createFooter:function(){}})}),_wAMD.define("components/layouts/DialogView",["backbone-all","mustache","components/regions/Dialog","components/regions/ClassicDialog"],function(e,t,i,n){var o=e.Marionette.Layout.extend({template:t.compile('<div class="dialog"></div><div class="classic-dialog"></div>'),onRender:function(){this.addRegions({dialog:i.extend({el:this.$(".dialog")}),classicDialog:n.extend({el:this.$(".classic-dialog")})})}});return o}),_wAMD.define("components/regions/Footer",["jquery","backbone-all"],function(e,t){return t.Marionette.Region.extend({constructor:function(){_.extend(this,t.Events)},onShow:function(e){this.view=e}})}),_wAMD.define("components/layouts/FooterView",["backbone-all","mustache","components/regions/Footer"],function(e,t,i){var n=e.Marionette.Layout.extend({template:t.compile('<div class="footer-layout w-ui"></div>'),onRender:function(){this.addRegions({footer:i.extend({el:this.$(".footer-layout")})})}});return n}),_wAMD.define("tpl!editor/dialogs/phone-support",[],function(){return"{{#tl}}Questions? Call us at {{phoneNumber}} between 6 am and 6 pm PST.{{/tl}}"}),_wAMD.define("editor/dialogs/PhoneSupport",["backbone-all","tpl!editor/dialogs/phone-support"],function(e,t){var i=e.Marionette.ItemView.extend({template:Mustache.compile(t),initialize:function(e){this.phoneNumber=e.phoneNumber||Weebly.phoneNumber},templateHelpers:function(){var e=this;return{phoneNumber:function(){return e.phoneNumber}}},dialog:{dialogClass:"phone-support-dialog",title:_W.tl("Call Us"),size:"550x250",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Done"),className:"btn-com btn-success"}]}]},triggers:{"click .btn-success":"dialog:close"}});return i}),_wAMD.define("editor/utils",["jquery","editor/app","components/layouts/DialogView","util/general-utils","components/layouts/FooterView","editor/dialogs/PhoneSupport"],function(e,t,i,n,o){var s,r;return t.showDialog=function(t,n){switch(s||(s=new i({el:e("<div>").appendTo("body")}),s.render()),n){case"classic":s.classicDialog.show(t);break;default:s.dialog.show(t)}return t},t.showScreen=function(e){return e.render().$el.appendTo("body"),e},t.showFooter=function(t){return r||(r=new o({el:e("<div>").appendTo(e("#view-container"))}),r.render()),r.footer.show(t),t},t.hideFooter=function(){r&&r.footer.close()},t.module("utils",function(e){e.getSiteDomain=n.getSiteDomain,e.isValidEmail=n.isValidEmail}),t.utils}),_wAMD.define("tpl!editor/theme-background/page-selector-dialog",[],function(){return'<div class="page-selector-header">\n	{{#tl}}Select:{{/tl}}\n	<a class="page-select-all" href="#">{{#tl}}All{{/tl}}</a> | <a class="page-select-none" href="#">{{#tl}}None{{/tl}}</a>\n</div>\n\n<ul class="page-selector-list">\n	{{! Populated by collection }}\n</ul>\n'}),_wAMD.define("tpl!editor/theme-background/page-item-view",[],function(){return'{{^hidden}}\n	<div class="page-item-content">\n		<label>\n			{{#icon}}\n				<span class="item-icon {{icon}}"></span>\n			{{/icon}}\n			<input type="checkbox" name="page" value="{{id}}" data-initial="{{initial}}" {{#selected}}checked{{/selected}} {{#disabled}}disabled{{/disabled}} />\n			{{dashes}}{{title}}\n		</label>\n	</div>\n{{/hidden}}\n\n<ul{{#children}} class="populated"{{/children}}></ul>\n'}),_wAMD.define("editor/theme-background/view/PageSelectorDialog",["jquery","backbone-all","editor/app","components/views/EmptyLoadingView","tpl!editor/theme-background/page-selector-dialog","tpl!editor/theme-background/page-item-view","util/ui/wInput"],function(e,t,i,n,o,s){var r=t.Marionette.CompositeView.extend({ui:{checkbox:'input[type="checkbox"]'},events:{"change @ui.checkbox":"toggleChange"},tagName:"li",itemViewContainer:"ul",itemViewOptions:function(){var e=this;return{filename:e.filename,currentPage:e.currentPage,currentPageType:e.currentPageType,summary:e.summary}},template:Mustache.compile(s),templateHelpers:function(){var e=this;return{initial:function(){return e.selected?1:0},selected:function(){return e.selected},disabled:function(){return e.disabled},hidden:function(){var e=Weebly.Permissions;return e.isContributor?e.allow_pages?!1:!_.contains(e.allowed_pages,this.id):!1},dashes:function(){for(var t=e.model.get("level"),i="";t--;)i+="– ";return i}}},initialize:function(e){var i=this,n=i.model,o=i.model.get("id");i.filename=e.filename,i.currentPageType=e.currentPageType,i.currentPage=e.currentPage,i.summary=e.summary,i.selected=i.isSelected(),i.disabled=i.currentPage===o,i.collection=new t.Collection(n.get("children")),i.collection.each(function(e){e.set("level",n.get("level")+1)})},onRender:function(){this.$el.hide()},onShow:function(){var e=this;e.ui.checkbox.wCheckbox(),e.$el.fadeIn(),e.selected&&e.$el.addClass("selected"),e.disabled&&e.$el.addClass("disabled")},isSelected:function(){var e,t=this,i=t.model.get("id"),n=t.summary[t.filename||""];return e=n&&n.length?-1!==_.indexOf(n,i)||t.currentPage===i:_.every(t.summary,function(e,n){return n===t.filename||-1===_.indexOf(e,i)})},toggleChange:function(e){var t=this,i=t.ui.checkbox.is(":checked");t.$el.toggleClass("selected",i),e.stopPropagation()}}),a=t.Marionette.CompositeView.extend({dialog:{width:605,title:_W.tl("Select Pages"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com cancel"},{text:_W.tl("Save"),className:"btn-com btn-success save"}]}],dialogClass:"page-selector-dialog"},triggers:{"click .cancel":"dialog:close"},events:{"click @ui.save":"saveSelectedPages","click @ui.selectAll":"selectAll","click @ui.selectNone":"selectNone"},ui:{save:".save",selectAll:".page-select-all",selectNone:".page-select-none",checkboxes:'input[type="checkbox"]'},template:Mustache.compile(o),className:"page-selector-dialog-content",itemView:r,itemViewContainer:".page-selector-list",itemViewOptions:function(){var e=this;return{filename:e.filename,currentPage:e.currentPage,currentPageType:e.currentPageType,summary:e.summary}},emptyView:n.extend({tagName:"li",loadingState:_W.tl("Loading pages"),emptyState:_W.tl("Your site does not have any pages")}),initialize:function(e){var i=this;i.filename=e.filename,i.currentPage=e.currentPage,i.currentTheme=e.currentTheme,i.currentPageType=e.currentPageType,i.backgroundAreaName=e.backgroundAreaName,i.summary=e.summary,i.collection=new t.Collection,Weebly.Editor.RPC.ThemeBackground.getAllPages(i.currentTheme,i.currentPage,i.backgroundAreaName).done(function(e){e&&e.success?i.afterLoad(e):i.children.first().showFailure()}).fail(function(){i.children.first().showFailure()})},afterLoad:function(e){var t=this,i=e.hierarchy;if(_.each(i,function(e){e.level=0}),Weebly.Permissions.allow_design&&Weebly.Restrictions.hasAccess("site_search")&&i.push({id:"search-page",icon:"w-icon-magnify",title:_W.tl("Search Results")}),Weebly.Permissions.store_edit&&Weebly.Commerce.hasCart&&i.push({id:"checkout-page",icon:"w-icon-shopping-cart",title:_W.tl("Checkout Page")}),t.collection.reset(i),t.collection.length){t.bindUIElements();var n=t.ui.checkboxes.not(":disabled").eq(0).data("wcheckbox");n&&n.container.focus()}else t.children.first().showEmpty();t.trigger("dialog:reposition")},selectAll:function(t){var i=this;t.preventDefault(),i.ui.checkboxes.each(function(t,i){e(i).wCheckbox("check")})},selectNone:function(t){var i=this;t.preventDefault(),i.ui.checkboxes.each(function(t,i){e(i).wCheckbox("uncheck")})},saveSelectedPages:function(){var e,t,i,n=this,o=n.model,s=o.get("image"),r=[],a=[];i=s?s.get("filename")!==n.filename:!!n.filename,n.ui.checkboxes.each(function(i,n){e=n.checked,t=parseInt(n.getAttribute("data-initial")),e==t||e?e&&r.push(n.value):a.push(n.value)}),!r.length&&/category-|product-/.exec(n.currentPage)&&r.push(n.currentPage),!i&&a.length&&n.filename&&Weebly.Editor.RPC.ThemeBackground.removeBackgrounds(n.currentTheme,n.backgroundAreaName,a),n.model.set("pages",r),n.trigger("dialog:close")}});return a}),_wAMD.define("tpl!editor/theme-background/overwrite-warning-dialog",[],function(){return'<div class="page-overwrite-header">\n	<p>{{#tl}}Are you sure you want to save to all pages?{{/tl}}</p>\n	<p>{{#tl}}This action will overwrite the background for the following pages:{{/tl}}\n</div>\n\n<ul class="page-overwrite-list">\n	{{! Populated by collection }}\n</ul>\n'}),_wAMD.define("tpl!editor/theme-background/overwrite-warning-item",[],function(){return'<div class="page-item-content">\n	<label {{#highlight}}class="highlight"{{/highlight}}>\n		{{dashes}}{{title}}\n	</label>\n</div>\n\n<ul{{#children}} class="populated"{{/children}}></ul>\n'}),_wAMD.define("editor/theme-background/view/OverwriteWarningDialog",["jquery","underscore","backbone-all","editor/app","components/views/EmptyLoadingView","tpl!editor/theme-background/overwrite-warning-dialog","tpl!editor/theme-background/overwrite-warning-item"],function(e,t,i,n,o,s,r){var a=i.Marionette.CompositeView.extend({tagName:"li",itemViewContainer:"ul",itemViewOptions:function(){var e=this;return{changed:e.changed,summary:e.summary,currentPage:e.currentPage,selectedDropdown:e.selectedDropdown}},template:Mustache.compile(r),templateHelpers:function(){var e=this;return{highlight:function(){var i=-1!==t.indexOf(e.summary,this.id)||"single"===e.selectedDropdown||e.changed;return e.currentPage!==this.id&&i},dashes:function(){for(var t=e.model.get("level"),i="";t--;)i+="– ";return i}}},initialize:function(e){var t=this,n=t.model;t.summary=e.summary,t.changed=e.changed,t.currentPage=e.currentPage,t.selectedDropdown=e.selectedDropdown,t.collection=new i.Collection(n.get("children")),t.collection.each(function(e){e.set("level",n.get("level")+1)})},onRender:function(){this.$el.hide()},onShow:function(){this.$el.fadeIn()}}),l=i.Marionette.CompositeView.extend({dialog:{width:605,title:_W.tl("Confirm Saving"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com cancel"},{text:_W.tl("Overwrite"),className:"btn-com btn-success overwrite"}]}],dialogClass:"overwrite-warning-dialog"},ui:{overwrite:".overwrite",cancel:".cancel"},triggers:{"click @ui.cancel":"reject","click @ui.overwrite":"confirm"},template:Mustache.compile(s),className:"overwrite-warning-dialog-content",itemView:a,itemViewContainer:".page-overwrite-list",itemViewOptions:function(){var e=this;return{changed:e.changed,summary:e.summary,currentPage:e.currentPage,selectedDropdown:e.selectedDropdown}},emptyView:o.extend({tagName:"li",loadingState:_W.tl("Loading pages"),emptyState:_W.tl("Your site does not have any pages")}),initialize:function(e){var n=this,o=n.model;n.filename=e.filename,n.currentPage=e.currentPage,n.currentTheme=e.currentTheme,n.selectedDropdown=e.selectedDropdown,n.backgroundAreaName=e.backgroundAreaName,e.summary&&delete e.summary[n.filename],n.summary=t.union.apply(null,t.values(e.summary));var s=o&&o.get("image");n.changed=s?n.filename!==s.get("filename"):!t.isUndefined(n.filename),n.collection=new i.Collection,Weebly.Editor.RPC.ThemeBackground.getAllPages(n.currentTheme,n.currentPage,n.backgroundAreaName).done(function(e){e&&e.success?n.afterLoad(e):n.children.first().showFailure()}).fail(function(){n.children.first().showFailure()})},afterLoad:function(e){var i=this,n=e.hierarchy;t.each(n,function(e){e.level=0}),i.collection.reset(n),i.collection.length||i.children.first().showEmpty(),i.trigger("dialog:reposition")}});return l}),_wAMD.define("tpl!components/views/alert",[],function(){return"<p>{{message}}</p>"}),_wAMD.define("components/views/AlertView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!components/views/alert"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),dialog:function(){var e=this,t={title:e.title,size:"600x250",buttons:[{group:"control-buttons pull-right",buttons:[{text:e.confirmText||_W.tl("Done"),className:"btn-confirm btn-com btn-success"}]}]};return e.options.size&&(t.size=e.options.size),e.dialogClass&&(t.dialogClass=e.dialogClass),e.confirmClass&&(t.buttons[0].buttons[0].className=e.confirmClass+" btn-confirm"),t},templateHelpers:function(){var e=this;return{message:function(){return e.message}}},events:{"click .btn-confirm":"confirm"},confirm:function(){this.trigger("dialog:close")},getTemplate:function(){return this.providedTemplate?this.providedTemplate:this.template},initialize:function(e){var t=this;e&&e.hasOwnProperty("template")&&(t.providedTemplate=n.compile("<div>"+e.template+"</div>")),t.message=e.message,t.title=e.title,t.confirmText=e.confirmText,t.dialogClass=e.dialogClass,t.confirmClass=e.confirmClass}});return r}),_wAMD.define("tpl!editor/theme-background/edit-topbar",[],function(){return'\n{{#showBranding}}<div class="logo"></div>{{/showBranding}}\n<div class="title">{{#tl}}Image Editor{{/tl}}</div>\n<div class="buttons">\n	<a class="btn btn-cancel">{{#tl}}Cancel{{/tl}}</a>\n	<div class="btn-split-dropdown btn-save-group">\n		<a class="btn btn-save">{{#tl}}Save{{/tl}}</a>\n		<a class="btn btn-save-dropdown">\n			<span class="w-icon-chevron-down"></span>\n		</a>\n\n		<ul class="save-dropdown">\n			{{#canSaveToAllPages}}\n				<li class="save-dropdown-item" data-save="all">\n					{{#tl}}Save to all pages{{/tl}}\n				</li>\n			{{/canSaveToAllPages}}\n			<li class="save-dropdown-item" data-save="single">\n				{{#tl}}Save to only this page{{/tl}}\n			</li>\n			<li class="save-dropdown-item" data-save="selected">\n				{{#tl}}Save to selected pages...{{/tl}}\n			</li>\n		</ul>\n\n	</div>\n</div>\n\n{{! Backgground cover; when clicked, closes dropdown }}\n<div class="save-dropdown-cover"></div>\n'}),_wAMD.define("editor/theme-background/view/EditTopbar",["jquery","backbone","mustache","editor/app","editor/utils","./PageSelectorDialog","./OverwriteWarningDialog","components/views/AlertView","tpl!editor/theme-background/edit-topbar","jquery-ui/slider"],function(e,t,i,n,o,s,r,a,l){function c(){n.showDialog(new a({title:_W.tl("Error"),message:_W.tl("An error has occured, please try your request again."),dialogClass:"error-occured-dialog"}))
}var u=t.Marionette.ItemView.extend({template:i.compile(l),templateHelpers:function(){return{showBranding:!Weebly.removeBranding,canSaveToAllPages:function(){return Weebly.Restrictions.isClientSite?!Weebly.Permissions.restrict_pages||Weebly.Permissions.allow_design:!Weebly.Permissions.isContributor}}},ui:{cancel:".btn-cancel",save:".btn-save",saveGroup:".btn-save-group",cover:".save-dropdown-cover",dropdown:".btn-save-dropdown",saveDropdown:".save-dropdown",saveAll:'[data-save="all"]',savePage:'[data-save="single"]',savePages:'[data-save="selected"]'},events:{"click @ui.cancel":"cancel","click @ui.save":"defaultSave","click @ui.cover":"closeDropdown","click @ui.dropdown":"showDropdown","click @ui.saveAll":"savePages","click @ui.savePage":"savePages","click @ui.savePages":"showPagesSelector"},initialize:function(e){var t=this,i=n.reqres.request("editor:background:isCommerce");t.filename=e.filename,t.currentPage=e.currentPage,t.currentTheme=e.currentTheme,t.currentPageType=e.currentPageType,t.backgroundAreaName=e.backgroundAreaName,t.backgroundElement=e.backgroundElement,i&&("product"===i.type?t.currentPage="product-"+i.id:"category"===i.type&&(t.currentPage="category-"+i.id))},onRender:function(){var e=this;e.ui.saveGroup.addClass("disabled"),e.ui.saveDropdown.hide(),Weebly.Editor.RPC.ThemeBackground.getPageSummary(e.currentTheme,e.backgroundAreaName).done(function(t){e.setSelectedState(t)}).always(function(){e.ui.saveGroup.removeClass("disabled")})},setSelectedState:function(e){var t,i,n=this;n.summary=e,e&&(t=e[n.filename||""],i=_.size(e),n.filename?t?t&&(0===t.length&&i>1?n.selectedDropdown="selected":1===t.length?n.selectedDropdown="single":i&&t.length>0?n.selectedDropdown="selected":0===t.length&&(n.selectedDropdown="all")):n.selectedDropdown=i?"selected":"all":n.selectedDropdown=t||0!==i?!t&&i>1?"selected":!t&&i?"selected":0===t.length&&i>1?"selected":0===t.length?"all":1===t.length?"single":"selected":"all")},showDropdown:function(){var e=this;e.ui.saveDropdown.show(),e.ui.saveGroup.hasClass("disabled")||(e.ui.saveDropdown.addClass("active").children("li").filter("[data-save="+e.selectedDropdown+"]").addClass("selected"),e.ui.cover.show())},closeDropdown:function(){var e=this;e.ui.saveDropdown.removeClass("active"),e.ui.cover.hide()},savePages:function(t){var i,o=this,s=o.model,a=[],l=t.currentTarget.getAttribute("data-save"),c=function(){};if("single"===l)a.push(o.currentPage);else if("all"===l&&(_.size(o.summary)||!s.get("image"))){var u=e.Deferred();i=u.promise(),c=function(){o.dialog.trigger("dialog:close")},o.closeDropdown(),o.dialog=n.showDialog(new r({model:s,summary:o.summary,filename:o.filename,currentPage:o.currentPage,currentTheme:o.currentTheme,selectedDropdown:o.selectedDropdown,backgroundAreaName:o.backgroundAreaName})),o.ui.saveGroup.addClass("disabled"),o.listenTo(o.dialog,"dialog:close",function(){o.ui.saveGroup.removeClass("disabled")}),o.listenTo(o.dialog,"confirm",function(){u.resolve()}),o.listenTo(o.dialog,"reject",function(){u.reject()})}e.when(i).done(function(){s.set("pages",a),o.save()}).always(c)},showPagesSelector:function(){var e=this;e.closeDropdown(),e.dialog=n.showDialog(new s({model:e.model,filename:e.filename,currentPage:e.currentPage,currentTheme:e.currentTheme,currentPageType:e.currentPageType,backgroundAreaName:e.backgroundAreaName,summary:e.summary})),e.ui.saveGroup.addClass("disabled"),e.listenTo(e.dialog,"dialog:close",function(){e.ui.saveGroup.removeClass("disabled")}),e.listenToOnce(e.model,"change:pages",e.save)},cancel:function(){var e=this;e.dialog&&e.dialog.trigger("dialog:close"),e.trigger("cancel")},defaultSave:function(){var e,t=this,i=t.model,n=t.summary[t.filename],o=!1;return o=i&&i.get("image")?i.get("image").get("filename")!==t.filename:!_.isUndefined(t.filename),t.ui.saveGroup.hasClass("disabled")?void 0:"single"!==t.selectedDropdown&&!n&&o?(t.showDropdown(),void 0):("selected"===t.selectedDropdown&&n?(e=Weebly.Permissions.allowed_pages,e&&(n=_.intersection(n,e)),i.set("pages",n),t.save()):i.defaultSaveForTheme(t.currentTheme,t.currentPage,t.backgroundAreaName,t.filename).done(function(){}).fail(c),void 0)},save:function(){var e=this,t=e.model;t.saveForTheme(e.currentTheme,e.currentPage,e.backgroundAreaName).done(function(){t.set("pages")}).fail(c),e.closeDropdown()}});return u}),_wAMD.define("text!templates/editor/theme-background/edit-toolbar.tpl",[],function(){return"\n	<div class='section'>\n\n		<button class='btn btn-control btn-info change-button'>\n			{{#tl}}Change Image{{/tl}}\n		</button>\n\n	</div>\n\n	<div class='section position-section'>\n\n		<label>{{#tl}}Position{{/tl}}</label>\n		<div class='position-wrap'>\n			<select class='position' id='background-editor-position'>\n				<option value='fill'>{{#tl}}Fill{{/tl}}</option>\n				<option value='left'>{{#tl}}Left{{/tl}}</option>\n				<option value='center'>{{#tl}}Center{{/tl}}</option>\n				<option value='right'>{{#tl}}Right{{/tl}}</option>\n				<option value='tile'>{{#tl}}Tile{{/tl}}</option>\n			</select>\n		</div>\n	</div>\n	<div class='section zoom-section'>\n\n		<label>{{#tl}}Zoom{{/tl}}</label>\n		<div class='zoom-wrap'>\n			<div class='dropup'>\n				<button class='btn btn-control dropdown-toggle' data-toggle='dropdown'>\n					<span class='text'></span>\n					<span class='caret'></span>\n				</button>\n				<div class='dropdown-menu'>\n					<div class='slider'></div>\n				</div>\n			</div>\n		</div>\n\n	</div>\n	<div class='section blur-section'>\n\n		<label>{{#tl}}Blur{{/tl}}</label>\n		<div class='blur-wrap'>\n			<div class='dropup'>\n				<button class='btn btn-control dropdown-toggle' data-toggle='dropdown'>\n					<span class='text'></span>\n					<span class='caret'></span>\n				</button>\n				<div class='dropdown-menu'>\n					<div class='slider'></div>\n				</div>\n			</div>\n		</div>\n\n	</div>\n	<div class='section darken-section'>\n\n		<label>{{#tl}}Darken{{/tl}}</label>\n		<div class='darken-wrap'>\n			<div class='dropup'>\n				<button class='btn btn-control dropdown-toggle' data-toggle='dropdown'>\n					<span class='text'></span>\n					<span class='caret'></span>\n				</button>\n				<div class='dropdown-menu'>\n					<div class='slider'></div>\n				</div>\n			</div>\n		</div>\n\n	</div>\n	<div class='section filter-section'>\n\n		<label>{{#tl}}Filter{{/tl}}</label>\n		<div class='filter-wrap'></div>\n\n	</div>\n"}),_wAMD.define("editor/theme-background/view/EditToolbar",["jquery","backbone","mustache","text!templates/editor/theme-background/edit-toolbar.tpl","jquery-ui/slider","util/ui/wSelectbox"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({className:"sections",template:i.compile(n),positionSelectElement:null,zoomSliderElement:null,blurSliderElement:null,darkenSliderElement:null,backgroundCover:null,filterSelectElement:null,events:{"click .change-button":"selectImage"},initialize:function(){var t=this;t.listenTo(t.model,"change:zoom",function(){t.zoomSliderElement&&t.zoomSliderElement.slider("value",t.model.get("zoom")||0),t.updateZoomText()}),t.listenTo(t.model,"change:position",function(){t.positionSelectElement&&(t.positionSelectElement.val(t.model.get("position")),t.positionSelectElement.wSelectbox("updateSelected"))}),t.listenTo(t.model,"change:blur",function(){t.blurSliderElement&&t.blurSliderElement.slider("value",t.model.get("blur")||0),t.updateBlurText()}),t.listenTo(t.model,"change:darken",function(){t.darkenSliderElement&&t.darkenSliderElement.slider("value",t.model.get("darken")||0),t.updateDarkenText()}),t.listenTo(t.model,"change:image",function(){t.updateSections()}),t.backgroundCover=e(".background-cover"),t.listenTo(t.model,"change:filter",function(){t.filterSelectElement&&(t.filterSelectElement.val(t.model.get("filter")),t.filterSelectElement.wSelectbox("updateSelected"))})},onRender:function(){var e=this;return e.positionSelectElement=e.$("select.position").wSelectbox({theme:"control",block:!0,dropup:!0}).on("change",function(){e.model.set("position",this.value)}),e.zoomSliderElement=e.$(".zoom-section .slider").slider({orientation:"vertical",range:"min",min:0,max:1,step:.1,value:e.model.get("zoom")||0,slide:function(t,i){e.updateZoomText(i.value),e.model.set("zoom",i.value)}}),e.updateZoomText(),e.renderFilters(),e.filterSelectElement=e.$("select.filter").wSelectbox({theme:"control",block:!0,dropup:!0}).on("change",function(){this.value?e.model.set("filter",this.value):e.model.unset("filter")}),e.blurSliderElement=e.$(".blur-section .slider").slider({orientation:"vertical",range:"min",min:0,max:1,step:.1,value:e.model.get("blur")||0,slide:function(t,i){e.updateBlurText(i.value)},change:function(t,i){e.model.set("blur",i.value)}}),e.updateBlurText(),e.darkenSliderElement=e.$(".darken-section .slider").slider({orientation:"vertical",range:"min",min:0,max:1,step:.1,value:e.model.get("darken")||0,slide:function(t,i){e.updateDarkenText(i.value)},change:function(t,i){e.model.set("darken",i.value)}}),e.updateDarkenText(),e.model.get("position")&&"fill"!==e.model.get("position")?e.positionSelectElement.closest(".section").css("display","table-cell"):(e.zoomSliderElement.closest(".section").css("display","table-cell"),e.backgroundCover.show()),e.updateSections(),e.positionSelectElement&&(e.positionSelectElement.val(e.model.get("position")),e.positionSelectElement.wSelectbox("updateSelected")),e.filterSelectElement&&(e.filterSelectElement.val(e.model.get("filter")),e.filterSelectElement.wSelectbox("updateSelected")),e},renderFilters:function(){var t=this;t.$(".filter-wrap").append(e('<select class="filter">'));var i=t.$("select.filter"),n=Weebly.availableFilters.slice();n.unshift(""),e.each(n,function(t,n){var o;switch(n){case"lighten":o=_W.tl("Lighten","filter name");break;case"vignette":o=_W.tl("Vignette","filter name");break;case"gotham":o=_W.tl("Gotham","filter name");break;case"grayscale":o=_W.tl("Grayscale","filter name");break;default:o=_W.tl("None","when filter is unselected")}i.append(e('<option value="'+n+'">').text(o))})},updateSections:function(){var e=this;e.model.get("image")?e.$(".blur-section, .darken-section, .filter-section").css("display",""):e.$(".position-section, .zoom-section, .blur-section, .darken-section, .filter-section").hide()},updateCurrentFilter:function(){var e=this,t=e.model.get("filter")||"";e.$(".filter-section .dropdown-menu .square").removeClass("selected").filter('[data-filter="'+t+'"]').addClass("selected"),e.$(".filter-section .btn .square").attr("data-filter",t).attr("class","square "+(t?t:"none"))},updateZoomText:function(e){var t=this;e=void 0!==e?e:t.model.get("zoom")||0,t.$(".zoom-section .btn .text").text(100*e+"%")},updateBlurText:function(e){var t=this;e=void 0!==e?e:t.model.get("blur")||0,t.$(".blur-section .btn .text").text(100*e+"%")},updateDarkenText:function(e){var t=this;e=void 0!==e?e:t.model.get("darken")||0,t.$(".darken-section .btn .text").text(100*e+"%")},selectImage:function(){this.trigger("selectImage")}});return o}),_wAMD.define("components/layouts/LayoutWithDialogs",["jquery","backbone-all","components/regions/Dialog"],function(e,t,i){var n=t.Marionette.Layout.extend({onRender:function(){this.$el.append('<div class="dialog"></div>'),this.addRegions({dialogRegion:i.extend({el:this.$el.find(".dialog")})})}});return n}),_wAMD.define("text!templates/editor/theme-background/editor.tpl",[],function(){return'<div class="w-ui topbar">\n	{{! Populated by theme-background/Editor layout }}\n</div>\n\n<div class="main">\n	<div class="main-inner1">\n		<div class="main-inner2 w-ui">\n			{{! dialogs go here }}\n		</div>\n	</div>\n</div>\n<div class="background-cover">\n</div>\n\n<div class="w-ui bottombar">\n	{{! Populated by theme-background/Editor layout }}\n</div>\n'}),_wAMD.define("util/image-utils",[],function(){function e(e,t,i){function n(){o&&(clearInterval(o),o=null),s||(s=!0,i())}var o=null,s=!1;e.onload=n,e.src=t,e.complete?n():o=setInterval(function(){e.complete&&n()},500)}function t(t,i){var n=new Image;e(n,t,function(){i(n.naturalWidth||n.width,n.naturalHeight||n.height)})}return{loadImage:e,getImageDimensions:t}}),_wAMD.define("util/ui/draggableBackground",["jquery","util/image-utils"],function(e,t){function i(e,t){this.element=e,this.options=t,this.init()}function n(e){var t,i,n=(e.css("background-position")||"").split(" ");return n[0]&&(t=parseFloat(n[0]),t=isNaN(t)?0:t/100),n[1]&&(i=parseFloat(n[1]),i=isNaN(i)?0:i/100),{x:t,y:i}}function o(e,t){var i=(100*t.x).toFixed(2),n=(100*t.y).toFixed(2);e[0].style.setProperty("background-position",i+"% "+n+"%","important")}function s(e,t,i,n){if(3===arguments.length||n){if(e>i)return e;if(i>t)return t}return i}e.fn.draggableBackground=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=e(this);if("undefined"==typeof t||"object"==typeof t){t=e.extend({},t);var s=new i(this,t);o.data("dbg",s)}else if("string"==typeof t&&o.data("dbg")){var s=o.data("dbg");i.prototype[t].apply(s,n)}})},i.prototype.init=function(){var i=e(window),r=e(this.element),a=(r.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],l=this.options;if(a){var c,u,d=l.coverElement?l.coverElement:r;t.getImageDimensions(a,function(e,t){c=e,u=t}),d.on("mousedown.dbg touchstart.dbg",function(e){if(e.target===r[0]||l.coverElement){if(e.preventDefault(),e.originalEvent.touches)modifyEventForTouch(e);else if(1!==e.which)return;var t,a=e.clientX,d=e.clientY,h=r.innerWidth(),p=r.innerHeight(),f=n(r),m=r.css("background-size"),g=parseFloat(m);t=isNaN(g)?Math.max(h/c,p/u):h*(g/100)/c,i.on("mousemove.dbg touchmove.dbg",function(e){e.preventDefault(),e.originalEvent.touches&&modifyEventForTouch(e);var i=e.clientX-a,n=e.clientY-d,l=c*t-h,m=u*t-p,g=l?i/-l:0,v=m?n/-m:0;o(r,{x:s(0,1,f.x+g),y:s(0,1,f.y+v)})}),i.on("mouseup.dbg touchend.dbg mouseleave.dbg",function(){l.done&&l.done(),i.off("mousemove.dbg touchmove.dbg"),i.off("mouseup.dbg touchend.dbg mouseleave.dbg")})}})}},i.prototype.disable=function(){var t=e(this.element);t.off("mousedown.dbg touchstart.dbg"),e(window).off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},i.prototype.reset=function(){var t=e(this.element);t.off("mousedown.dbg touchstart.dbg"),e(window).off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg"),this.init()}}),_wAMD.define("editor/theme-background/view/Editor",["jquery","backbone","mustache","../utils","../model/Image","../model/Background","./ImageSelectorDialog","./EditTopbar","./EditToolbar","components/layouts/LayoutWithDialogs","text!templates/editor/theme-background/editor.tpl","jquery-ui/slider","util/ui/draggableBackground"],function(e,t,i,n,o,s,r,a,l,c,u){var d=[],h=c.extend({id:"background-editor",template:i.compile(u),ui:{topbar:".topbar",main:".main",mainInner2:".main-inner2",backgroundCover:".background-cover"},spotlight:null,uploadedImage:null,backgroundElement:null,imageSelectorDialog:null,nonBackgroundElements:null,previousScrollTop:0,scrollHandler:null,resizeHandler:null,regions:{topbar:".topbar",bottombar:".bottombar"},modelEvents:{saved:"exit","change:image change:zoom change:position":"onBackgroundChange"},initialize:function(){var t=this,i=t.model;t.currentPage=t.options.currentPage,t.currentTheme=t.options.currentTheme,t.currentPageType=t.options.currentPageType,t.backgroundElement=t.options.backgroundElement,t.backgroundAreaName=t.options.backgroundAreaName,t.nonBackgroundElements=t.options.nonBackgroundElements,t.useSpotlight=t.options.useSpotlight,t.nonBackgroundElements.css("opacity","0.5"),t.backgroundElement.css("transition","none"),setTimeout(function(){var e=n.checkIsBody(t.backgroundElement);n.copyPositioningProperties(t.backgroundElement,t.ui.backgroundCover),e.draggableBackground({coverElement:t.ui.backgroundCover,done:function(){t.model.set("backgroundPosition",t.backgroundElement.css("background-position"))}})},700),i&&i.get("image")&&(t.filename=i.get("image").get("filename")),t.resizeHandler=function(){n.copyPositioningProperties(t.backgroundElement,t.ui.backgroundCover)},t.scrollHandler=function(){var e=this.scrollTop,i=-(e-t.previousScrollTop),n=parseInt(t.ui.backgroundCover.css("top"))+i+"px";t.ui.backgroundCover.css("top",n),t.previousScrollTop=e},e("#scroll_container").on("scroll",t.scrollHandler),e(window).on("resize",t.resizeHandler),t.render()},onRender:function(){var t=this;c.prototype.onRender.apply(t,arguments),e("body").append(t.el),t.updateSize(),t.showTopbar(),t.model.get("image")?t.showEditToolbar():(t.hideEditToolbar(),t.openImageSelector())},onBackgroundChange:function(){var e=this,t=n.checkIsBody(e.backgroundElement);e.backgroundElement=n.applyBackgroundToElement(e.model,e.backgroundElement),t.draggableBackground("reset")},updateSize:function(){var t=this,i=e("#scroll_container"),n=i.width()-i[0].clientWidth;t.$el.css("right",n),t.ui.topbar.css("right",-n),t.imageSelectorDialog&&t.imageSelectorDialog.updateSize()},showTopbar:function(){var e,t=this;e=new a({model:t.model,filename:t.filename,currentPage:t.currentPage,currentTheme:t.currentTheme,currentPageType:t.currentPageType,backgroundAreaName:t.backgroundAreaName,backgroundElement:t.backgroundElement}),t.listenTo(e,"cancel",t.cancel),t.topbar.show(e)},showEditToolbar:function(){var e,t=this;e=new l({model:t.model}),t.listenTo(e,"selectImage",function(){t.hideEditToolbar(),t.openImageSelector()}),t.bottombar.show(e)},hideEditToolbar:function(){this.bottombar.close()},chooseNewImage:function(){var e=this;window.chooseImage({type:"background",onChoose:function(t){"attributionUrl"in t&&(t.image.attributionUrl=t.attributionUrl,delete t.attributionUrl),"attributionAuthor"in t&&(t.image.attributionAuthor=t.attributionAuthor,delete t.attributionAuthor);var i=e.model;i.disableEffectProcessing=!0,i.copyToSelf(new s(t)),i.unset("zoom"),i.unset("backgroundPosition"),i.set("position","fill"),i.disableEffectProcessing=!1,e.uploadedImage=i.get("origImage")||i.get("image"),e.ui.backgroundCover.css("zIndex",999),e.ui.main.css("zIndex",-1),e.closeImageSelector(),e.showEditToolbar()}})},openImageSelector:function(){var e=this;e.imageSelectorDialog||(d.length?e.showImageSelector(d):(startWait(),Weebly.Editor.RPC.ThemeBackground.getStockImages().done(function(t){d=t,e.showImageSelector(d)}).always(endWait)))},showImageSelector:function(t){var i=this,o=i.model,s=o.clone(),a=!1;i.imageSelectorDialog=new r({model:s,defaultImageUrl:n.getDefaultBackgroundUrl(i.backgroundElement),uploadedImage:i.uploadedImage,stockImages:t}),i.imageSelectorDialog.on("uploadImage",function(){i.chooseNewImage()}).on("cancel",function(){n.applyBackgroundToElement(o,i.backgroundElement),i.closeImageSelector(),i.showEditToolbar(),o.get("image")||i.cancel()}).on("proceed",function(){a&&(o.unset("zoom"),o.unset("backgroundPosition"),o.set("position","fill")),e(".position-section").hide(),e(".zoom-section").css("display","table-cell"),i.ui.backgroundCover.show(),o.copyToSelf(s),i.closeImageSelector(),i.showEditToolbar()}),i.imageSelectorDialog.listenTo(s,"change:image change:zoom change:position",function(){var e=s.get("image");a=e?!e.isEqual(o.get("image")):!0,n.applyBackgroundToElement(s,i.backgroundElement,a)}),i.ui.mainInner2.append(i.imageSelectorDialog.render().el),i.imageSelectorDialog.updateSize()},closeImageSelector:function(){var e=this;e.imageSelectorDialog&&(e.imageSelectorDialog.remove(),e.imageSelectorDialog=null)},exit:function(){var e=this;e.prepareCloseView(),e.trigger("proceed")},cancel:function(){var e=this;e.prepareCloseView(),e.trigger("cancel")},remove:function(){var e=this;return e.spotlight&&e.spotlight.destroy(),e.closeImageSelector(),e.hideEditToolbar(),t.View.prototype.remove.apply(e,arguments)},prepareCloseView:function(){var t=this,i=n.checkIsBody(t.backgroundElement);t.nonBackgroundElements.css("opacity",""),t.backgroundElement.css("transition",""),e("#scroll_container").unbind("scroll",t.scrollHandler),e(window).unbind("resize",t.resizeHandler),i.draggableBackground("disable")}});return h}),_wAMD.define("editor/theme-background/module",["editor/app","./utils","./model/Background","./view/Editor","image-editing/HoverControls","config"],function(e,t,i,n,o,s){e.module("ThemeBackground",function(e,r,a,l,c,u){var d,h,p,f,m,g,v={};e.open=function(i){m=i||"",d||(c("body").addClass("background-editing"),h=t.getBackgroundElement(m),g=t.getNonBackgroundElements(h),p=v[m]||e.buildEmptyBackground(),f=p.clone(),f._original=p,e.clearInlineControls(),d=new n({model:f,backgroundElement:h,backgroundAreaName:m,nonBackgroundElements:g,useSpotlight:!!m,currentPage:currentPage,currentTheme:currentTheme,currentPageType:currentPageType}),d.on({cancel:e.cancel,proceed:function(){f.get("image")?v[m]=f:delete v[m],e.close()}}))},e.cancel=function(){t.applyBackgroundToElement(p,h),e.close()},e.close=function(){d&&(d.remove(),d=null,p=null,f.off(),f=null,c("body").removeClass("background-editing"),setTimeout(function(){e.drawInlineControls()},1e3),updateFooterAttribution())},e.buildEmptyBackground=function(){return new i({zoom:0})};var b=[];e.drawInlineControls=function(){var i=t.getBackgroundElements(),n=Weebly.view.isMobileView;n||s.chromeless||i.not("#icontent").each(function(){var t=c(this),i=t.attr("class")||"",n=i.match(/\bwsite-background(?:-([\w-]*))?\b/),s=n[1]||"",r=new o({targetElement:t,appendToElement:c("#scroll_container"),allowPageTypes:!0,allowSlideshow:!1,editCallback:function(){e.open(s)}});r.render(),b.push(r)})},e.clearInlineControls=function(){c.each(b,function(e,t){t.destroy()}),b=[]},r.reqres.setHandlers({"editor:background:getAll":function(){return v},"editor:background:isCommerce":function(){var e,t=c("#wsite-com-area-category").attr("data-id"),i=c("#wsite-com-product-gen").attr("data-id");return t?e={type:"category",id:t}:i&&(e={type:"product",id:i}),e}}),r.commands.setHandler("setCurrentBackgrounds",function(e){v={},u.each(e,function(e,t){v[t]=e?new i(e):!1})})})}),function(e,t,i){function n(){void 0===g?(g=t.initialFooterText,v=t.initialFooterTextShown):t.Restrictions.hasAccess("edit_footer")&&(v=!1),o(),s(g),r(v),a(),i(".wsite-version-web").on("click",function(){Pages.go("webView")})}function o(){f=$("weeblyfootertext"),m=$("weeblyfooterattribution")}function s(e){var i;if(g=e,t.Restrictions.hasAccess("edit_footer")&&g||(t.Restrictions.isClientSite||(g=b),f&&(f.style.display=t.view.isMobileView?"block":"inline")),f){if(g==b)if(t.view.isMobileView)f.innerHTML=y;else{var n=_W.tl("Create a free site with Weebly")+"<div class='w-ui' style='display: inline-block; margin-left: 15px;'>"+"<button class='btn-flat btn-flat-outline btn-flat-light' style='color: #2990ea;'>Change</button>"+"</div>",o=Mustache.compile("<div id='weebly-empty-footer' class='wsite-footer' style='position: relative;'><span class='weebly-empty-footer-message empty-element-message'>"+n+"</span>"+"<div class='wsite-spotlight-cover' style='cursor: pointer;'>"+"<div class='wsite-spotlight-cover-inner'></div>"+"</div></div>");f.innerHTML=o()}else f.innerHTML=g;t.Restrictions.hasAccess("show_footer_removebutton")&&(t.Restrictions.hasAccess("edit_footer")?f.insert(new Element("a",{href:"#","class":"wsite-remove-footer-button"}).update(_W.tl("Remove")).observe("click",function(e){r(!1),h(),e.stop()})):(i=$("weebly-empty-footer"),i?i.observe("click",function(e){editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"edit_footer",restrictionType:"feature"}),e.stop()}):f.insert(new Element("a",{href:"#","class":"wsite-edit-footer-button"}).update(_W.tl("Edit")).observe("click",function(e){editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"edit_footer",restrictionType:"feature",refer:"main"}),e.stop()}))))}}function r(e){if(v=e,t.Restrictions.hasAccess("edit_footer")||(v=!0),f){var n=i(f);t.view.isMobileView&&v?(n.find(".wmobile-footer-custom").show(),n.find(".wmobile-app-callout").show()):t.view.isMobileView&&!v?(n.find(".wmobile-footer-custom").hide(),n.find(".wmobile-app-callout").hide()):f.style.display=v?t.view.isMobileView?"block":"inline":"none"}}function a(){var e=[];if(t.currentHeader&&getCurrentHeaderElement()&&"no-header"!=currentPageType&&(e=e.concat(l(t.currentHeader))),t.pageContext.attribution&&(e=e.concat(c(t.pageContext.attribution))),t.siteContext.attribution&&(e=e.concat(c(t.siteContext.attribution))),e=e.concat(u()),m){var i=d(e);i?(m.style.display="block",m.innerHTML=i):(m.style.display="none",m.innerHTML="")}}function l(e){var t=[];return e&&e.data&&e.data.sprites&&e.data.sprites.each(function(e){e&&e.pageUrl&&e.creator&&t.push("<a href='"+e.pageUrl+"' target='_blank'>"+e.creator+"</a>")}),t}function c(e){var t=[];return $H(e).each(function(e){var i=e[1];if(i)for(var n=Object.isArray(i)?i:[i],o=0;o<n.length;o++){var s=n[o];s&&s.url&&s.author&&t.push("<a href='"+s.url+"' target='_blank'>"+s.author+"</a>")}}),t}function u(){var e=[],t=require("editor/app").request("editor:background:getAll");return i.each(t,function(t,i){if(i){var n=i.get("origImage")||i.get("image");if(n){var o=n.get("attributionUrl"),s=n.get("attributionAuthor");o&&s&&e.push("<a href='"+o+"' target='_blank'>"+s+"</a>")}}}),e}function d(e){return e=e.uniq(),e.length?(1==e.length?_W.tl("Photo used under Creative Commons from"):_W.tl("Photos used under Creative Commons from"))+" "+e.join(", "):""}function h(){new Ajax.Request(ajax,{parameters:{pos:"hidefooter",siteid:currentSite,cookie:document.cookie},onFailure:errFunc,bgRequest:!0})}function p(e,i){e in t.pageContext.contentFieldsByID?t.pageContext.attribution[e]=i:e in t.siteContext.contentFieldsByID&&(t.siteContext.attribution[e]=i)}e.updateFooter=n,e.updateFooterText=s,e.updateFooterTextShown=r,e.updateFooterAttribution=a,e.setContentFieldAttribution=p;var f,m,g,v,b=_W.tl("Create a free website with Weebly"),y=_W.tl('Create a <a target="_top" href="http://www.weebly.com/?utm_source=internal&utm_medium=footer&utm_campaign=1">free website</a> with <a target="_top" href="http://www.weebly.com/?utm_source=internal&utm_medium=footer&utm_campaign=1" title="create free website">Weebly</a>')}(window,Weebly,Weebly.jQuery),_wAMD.define("legacy/weebly_footer",["editor/app","legacy/weebly_restrictions","editor/theme-background/module"],function(){}),_wAMD.define("legacy/weebly_element_utils",["legacy/slideshow-jq"],function(){}),function(){var e=[],t=[],i=null;window.clearAreaBatch=function(){e=[],t=[],i=null},window.fetchNeededArea=function(i,n,o,s){e.push({type:n,name:o,is_global:i}),t.push(s)},window.batchFetchNeededAreas=function(n){var o=currentPage.replace(/\/.*/,""),s=require("config");"0"==o&&(o=null),i=n,e.length&&o&&!s.chromeless?new Ajax.Request(ajax,{parameters:{pos:"getareas",current_page_id:currentPage,area_summary:Object.toJSON(e),token:Weebly.RequestToken},onSuccess:function(n){for(var o=n.responseText.evalJSON(),s=0;s<o.length;s++)t[s](o[s]);e=[],t=[],i&&i()}}):i&&i()}}(),_wAMD.define("legacy/weebly_area_utils",function(){}),_wAMD.define("editor/build/themes/rendering",["jquery","underscore","mustache","config","editor/app","tablet/api/external","legacy/weebly_social_sharing","editor/theme-background/utils","legacy/classes/Font","legacy/classes/Element","legacy/weebly_page_manager","legacy/weebly_mobile","legacy/weebly_view","editor/build/themes/utils","editor/build/themes/partialsRenderer","tpl!platform/theme/base/menu/item","tpl!platform/theme/base/menu/item-current","tpl!platform/theme/base/menu/main","tpl!platform/theme/base/menu/main-without-wrap","tpl!platform/theme/base/menu/submenu-main","tpl!platform/theme/base/menu/submenu-item","editor/build/themes/upgrading","legacy/rgbcolor","imageperfect/he","legacy/flyout_menus_jq","legacy/weebly_design_tab","site/general","legacy/weebly_header_image","legacy/weebly_footer","legacy/weebly_element_utils","legacy/weebly_area_utils","legacy/weebly_design_options"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v,b,y,w,_){function M(){Weebly.currentHeader&&setCurrentHeaderImage(Weebly.currentHeader,!0,!0)}function C(i,n){var o=e("#icontent").empty(),s=Weebly.siteContext,r=Weebly.pageContext;clearAreaBatch(),c.globalBeforeRender(),s.beforeRender(),r.beforeRender();var a=[];t.each(i,function(t){"string"!=typeof t?a.push(e("<custom_area>",{name:t[0],type:t[1],attrs:JSON.stringify(t[2])})[0].outerHTML):a.push(t)}),o[0].innerHTML=a.join(""),o.find("custom_area").each(function(){var t="",i=e(this),n=i.attr("name"),o=i.attr("type"),a=i.attr("attrs");if(a=a?JSON.parse(a):null,"menu"==n)t=T();else if("credits"==n)t="<span id='weeblyfooterattribution' style='display:none;margin:1em 0 0;padding:0 0 1em;font-size:.8em'></span>";else if("header"==n);else{a||(a={}),o||(o=n,n="");var l;l="content"!=o||n?"false"!==a.global:!1;var c=l?s:r;t=c.getAreaHTML(o,n,a)}if("string"==typeof t){var u=e("<div>");u[0].innerHTML=t,u.find("script").not(".element-script").remove(),t=u.children()}else e(t).find("script").not(".element-script").remove();i.replaceWith(t)}),o.append("<div id='wsite-menus'></div>"),batchFetchNeededAreas(function(){window.updateDesignElements(),d.updateAreaOptions(),n&&n()})}function x(t){var i=I.currentThemeData.page_type_templates[currentPageType],n=i.body_attrs.replace(/^.*class\s*=\s*[\'"](.*?)[\'"].*$/,"$1");e("#icontent")[0].className=(t||"")+" "+n+(h.isMobileView?" wsite-mobile":"")}function k(e){return e=t.clone(e),e.children=t.chain(e.children).filter(function(e){return!e.hidden}).map(k).value(),e.has_children=e.children&&e.children.length>0,e.current_page=window.currentPage&&e.id==window.currentPage,e.itemtitle=e.title.replace("\\'","'").replace('\\"','"'),e.itemlink="#",e.target=!1,e}function S(){return{"menu/main-without-wrap":f.getTemplate("menu/main-without-wrap",b),"menu/item-current":f.getTemplate("menu/item-current",g),"menu/item":f.getTemplate("menu/item",m),"menu/submenu-main":f.getTemplate("menu/submenu-main",y),"menu/submenu-item":f.getTemplate("menu/submenu-item",w)}}function T(){window.currentNormalItem=f.getTemplate("menu/item",m);var i={links:t.chain(u.topLevelPages).filter(function(e){return!e.hidden}).map(k).value()},n=f.render("menu/main",v,i,S());n=e("<div>").append(n);var o=n.find(".wsite-menu-item, .wsite-menu-subitem");return o.length||(o=n.find("a")),o.each(function(t){var i=e(this).closest("[id]");if(i.length){var n=u.pages[i.attr("id")];n&&A(n,i,0===t)}}),n.children()}function A(t,i,o){var r=i,a=t.id,l="";if(t.parent_id)l="wsite-nav-"+a;else{if(i.addClass("w-menu-item"),!h.isMobileView){var c={"class":"wsite-nav-handle"};"undefined"!=typeof a&&(c.id="pg"+a),i.wrapAll(e("<span>",c)),r=i.parent()}"member-login"==t.kind?l=t.kind:h.isMobileView&&(l="pg"+a)}l?i.attr("id",l):i.removeAttr("id");var d=i.find(".wsite-menu-item, .wsite-menu-subitem").eq(0);return d.length||(d=i.find("a").eq(0)),d.removeAttr("data-membership-required"),t.extlink&&!o?d.on({click:function(e){n.chromeless&&s.navClicked(a),e.preventDefault()},mouseover:function(){u.extMouseover(a,this,event)},mouseout:function(){u.extMouseout()}}):d.on({click:function(t){if(n.chromeless){var i=e(t.target.parentNode).data("hasChildren");t.target.parentNode.hasClassName("wsite-nav-more")||!e(t.target.parentNode).data("isExpanded")&&i?e(t.target.parentNode).trigger("mouseover"):s.navClicked(a)}else notBeenDragged()&&(noJump=1,goUpdateList(a,1));window.navFlyoutMenu&&window.navFlyoutMenu.contract(),t.preventDefault()}}),r}function D(){var t=e("<div>",{"class":"paragraph"});e("#secondlist").append(t);var i=new window.RGBColor(t.css("color"));t.remove();var n=E(i.r,i.g,i.b);return n[2]<.57}function E(e,t,i){e/=255,t/=255,i/=255;var n,o,s=Math.max(e,t,i),r=Math.min(e,t,i),a=(s+r)/2;if(s==r)n=o=0;else{var l=s-r;switch(o=a>.5?l/(2-s-r):l/(s+r),s){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return[n,o,a]}function P(t,i){setTimeout(function(){try{e("#wsite-theme-"+t+"-file")[0].sheet.cssRules;var n=getCurrentStyles("links");if(n.visited==i)throw"Same Color";e("#themeStyle")[0].update("#secondlist .editable-text a:link{color:"+n.link+" !important;}"),N=0}catch(o){if(N++,10>N){if(null==i&&externalLibariesLoaded){var n=getCurrentStyles("links");i=n.visited
}P(t,i)}else N=0}},250)}function R(){var t=e("#icontent_container").css("background-image");"none"!==t&&e("#icontent_container").css("background-image","")}function z(e,t,i,n){var o,s=document.createElement("link");return o="undefined"!=typeof hasUsedThemeEditor?"avoidBrowserCache=1":"","string"==typeof n?(s=document.createElement("style"),s.innerHTML=n):s.href="/weebly/get_theme_request.php?theme="+e+"&theme_color="+(t||"")+"&type=editor"+"&num="+I.currentStyleNum+(i?"&footer_css_injection="+encodeURIComponent(JSON.stringify(i)):"")+"&"+o+"&mobile="+(h.isMobileView?"true":"false"),s.id="wsite-theme-"+e+"-file",s.title="wsite-theme-css",s.rel="stylesheet",s.type="text/css",s}function O(){var e=document.createElement("link");return e.href="http://"+ASSETS_BASE+"/css/social-icons.css",e.media="screen,projection",e.rel="stylesheet",e.type="text/css",e}function F(){var t,i,n,o="#pg",s=".w-menu-item#active",r=o+currentPage;t=e.isValidSelector(r),n=e(t?r:!1),i=e(s),h.isMobileView?(i.attr("id",i.data("id")),n.data("id",n.attr("id")).attr("id","active")):(i.attr("id",""),n=n.find(".wsite-menu-item-wrap, .wsite-menu-subitem-wrap"),n.length||(n=n.find("li")),n.attr("id","active"))}function W(){var e=I.currentThemeData,t=currentPage.replace(/\/.*/,"");return currentPageTypeOverride&&currentPageTypeOverride in e.page_type_templates?currentPageTypeOverride:p.getPageType(t,e,h.isMobileView)}var I={currentThemeData:{},forceThemeRerender:!1,currentStyleNum:Math.floor(10000000001*Math.random()),themeFooterCSSInjected:{}};o.vent.on({forceThemeRerender:function(){I.forceThemeRerender=!0}}),I.setCurrentThemeData=function(e){if(I.currentThemeData!==e){for(var i in I.currentThemeData)delete I.currentThemeData[i];t.extend(I.currentThemeData,e),I.currentThemeData.partials_templates&&f.setThemePartials(I.currentThemeData.partials_templates)}},I.renderPage=function(e,i,n,s){if(I.forceThemeRerender)return I.forceThemeRerender=!1,I.renderTheme(!1,e,i,n,s),void 0;if(t.isEmpty(I.currentThemeData))return I.renderTheme(!1,e,i,n,s),void 0;var r=W();return"store"===s.kind||r!==currentPageType?(currentPageType=r,I.renderTheme(!0,e,i,n,s),void 0):(c.globalBeforeRender(),t.each([Weebly.siteContext,Weebly.pageContext],function(e){e._oldContext&&(e.renderAreas(e._oldContext.getAreas()),e._oldContext.unrender(),delete e._oldContext)}),c.globalAfterRender(),M(),x(s.icontentPageLink),a.applyBackgrounds(o.request("editor:background:getAll")),updateFooter(),window.disableFlyouts=!1,F(!0),refreshNavCondense(),repositionElements(),e&&e(),void 0)},I.renderTheme=function(i,n,s,u,f){s&&p.setCurrentTheme(s.theme_id,h.isMobileView),t.each([Weebly.siteContext,Weebly.pageContext],function(e){(e._oldContext||e).unrender(),delete e._oldContext}),i||I.setThemeStyle(currentTheme,currentThemeColor,null,u,s),s&&I.setCurrentThemeData(s),_.processThemeData(I.currentThemeData),window.navFlyoutMenu&&(window.disableFlyouts=!0,window.navFlyoutMenu.destroy()),t.each(I.currentThemeData.fonts,function(e){l.loadFont(e)}),currentPageType=W();var m=I.currentThemeData.page_type_templates[currentPageType],g=f?f.icontentPageLink:"";x(g),C(m.body,function(){reportHeaderElement(e("#icontent").find('[class*="wsite-header"]')),updateFooter(),M(),a.applyBackgrounds(o.request("editor:background:getAll")),window.whenThemeCSSLoaded(function(){if(Weebly.siteContext.afterRender(),Weebly.pageContext.afterRender(),c.globalAfterRender(),window.disableFlyouts=!1,F(!0),window.ENABLE_PAGE_HIERARCHY&&window.initEditorFlyoutMenus(),!h.isMobileView&&d.setHeaderPlaceholder){var t=Weebly.headerEditor.getBackgroundSprite(e(getCurrentHeaderElement())),i=t&&t.url?t.url:"";d.setHeaderPlaceholder(i)}repositionElements(),n&&n(),e("#scroll_container").removeClass("blackout"),o.vent.trigger("themeRendered",currentTheme)})}),m.needs_light_test&&(m.needs_light_test=!1,window.whenThemeCSSLoaded(function(){var e=D();m.body_attrs=e?m.body_attrs.replace(/wsite-theme-(light|dark)/,"wsite-theme-light"):m.body_attrs.replace(/wsite-theme-(light|dark)/,"wsite-theme-dark"),x(f.icontentPageLink),new window.Ajax.Request(window.ajax,{parameters:{pos:"set_theme_light",theme:currentTheme,layout:currentPageType,is_light:e?"1":"0",token:Weebly.RequestToken}})})),I.currentThemeData.need_footer_css_injection&&!I.themeFooterCSSInjected[themeID]&&window.whenThemeCSSLoaded(function(){var t=Weebly.siteContext.getArea("content","footer");if(t){var i=t.el;I.setThemeStyle(currentTheme,currentThemeColor,{color:e(i).css("color"),"font-size":e(i).css("font-size")},null,s),I.themeFooterCSSInjected[themeID]=!0,window.whenThemeCSSLoaded(function(){refreshNavCondense()})}}),Weebly.pageContext.is_blog&&r.init()},I.renderItem=function(t,n,o){t=k(t);var s=e(i.render(o,t,S()));return s=A(t,s,n)},I.renderSubmenu=function(i){var n={children:t.map(i,k)},o=e(f.render("menu/submenu-main",y,n,S())),s=o.find(".wsite-menu-item, .wsite-menu-subitem");return s.length||(s=o.find("a")),s.each(function(){var t=e(this).closest("[id]");if(t.length){var i=u.pages[t.attr("id")];i&&A(i,t,!1)}}),o},I.setThemeStyle=function(t,i,o,s,r){"myspace"==siteType&&(I.currentStyleNum=Math.floor(10000000001*Math.random())),n.chromeless&&s&&(s=s.replace(/\/\/cdn/g,"http://cdn"));var a=e('link[href*="social-icons"]');r&&(!r.tmpSocialIconFont&&a.length?a.remove():r.tmpSocialIconFont&&!a.length&&e("head").append(O()));var l=e("style[title=wsite-theme-css], link[title=wsite-theme-css]"),c=z(t,i,o,s);e("head").append(c),l.remove(),e("#icontent_container")[0].className="wsite-theme-"+t,R(),Prototype.Browser.Gecko&&P(t)};var N=0;return I.detectImageAlign=function(t){t=e(t);var i=t.offset().left,n=i+t.width(),o=t.height(),s=t.width(),r=t.css("min-width"),a=t.css("max-width");t.css({height:t.height()+"px",width:"1px","max-width":""});var l,c=t.offset().left;return l=c==i?"left":c+1==n?"right":"center",t.css({height:o,width:s,"min-width":r,"max-width":a}),l},t.extend(window,I),I}),Weebly=window.Weebly||{};var currentBlog={postId:0,newPost:0,title:"",categories:"",skipToComments:"",saving:0,permalink:"",comments:"",date:""},preloadedImages=Array(),lastEventID;lastEventID=Array();var hasFlash=void 0;!function(){var e,t={first_tip:"x-elements",selectTheme:"x-pages",tab_pages:"x-pages",secondPage:"x-pages-subpages",updatePages:"x-publish",addElement:"x-design"},i={};for(var n in t)e=t[n],i[e]=n;window.hasDoneUserEvent=function(e){return!!(isClientSite&&!isMaster||userEvents[e]||t[e]&&userEvents[t[e]]||i[e]&&userEvents[i[e]])}}(),Weebly.trackingArray=Array();var errorDialog,retriableErrorDialog,retriableAjax,warningDialog,showDialogElement,confirmDialog,lastConfirmOk=!1,whoisDialog;shortcut={all_shortcuts:{},add:function(e,t,i){var n={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(i)for(var o in n)"undefined"==typeof i[o]&&(i[o]=n[o]);else i=n;var s=i.target;"string"==typeof i.target&&(s=document.getElementById(i.target)),e=e.toLowerCase();var r=function(n){if(n=n||window.event,i.disable_in_input){var o;if(n.target?o=n.target:n.srcElement&&(o=n.srcElement),3==o.nodeType&&(o=o.parentNode),"INPUT"==o.tagName||"TEXTAREA"==o.tagName)return}n.keyCode?code=n.keyCode:n.which&&(code=n.which);var s=String.fromCharCode(code).toLowerCase();188==code&&(s=","),190==code&&(s=".");var r=e.split("+"),a=0,l={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},c={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};n.ctrlKey&&(u.ctrl.pressed=!0),n.shiftKey&&(u.shift.pressed=!0),n.altKey&&(u.alt.pressed=!0),n.metaKey&&(u.meta.pressed=!0);for(var d=0;k=r[d],d<r.length;d++)"ctrl"==k||"control"==k?(a++,u.ctrl.wanted=!0):"shift"==k?(a++,u.shift.wanted=!0):"alt"==k?(a++,u.alt.wanted=!0):"meta"==k?(a++,u.meta.wanted=!0):k.length>1?c[k]==code&&a++:i.keycode?i.keycode==code&&a++:s==k?a++:l[s]&&n.shiftKey&&(s=l[s],s==k&&a++);return a==r.length&&u.ctrl.pressed==u.ctrl.wanted&&u.shift.pressed==u.shift.wanted&&u.alt.pressed==u.alt.wanted&&u.meta.pressed==u.meta.wanted?(t(n),Event.stop(n),!1):!0};this.all_shortcuts[e]={callback:r,target:s,event:i.type},s.addEventListener?s.addEventListener(i.type,r,!1):s.attachEvent?s.attachEvent("on"+i.type,r):s["on"+i.type]=r},remove:function(e){e=e.toLowerCase();var t=this.all_shortcuts[e];if(delete this.all_shortcuts[e],t){var i=t.event,n=t.target,o=t.callback;n.detachEvent?n.detachEvent("on"+i,o):n.removeEventListener?n.removeEventListener(i,o,!1):n["on"+i]=!1}}},Weebly.keyTracker={},window.disableBackspaceExit=!0,document.observe("keydown",function(e){if(!Event.element(e).hasClassName("editable-text")){e.keyCode?code=e.keyCode:e.which&&(code=e.which);var t,i=String.fromCharCode(code).toLowerCase();if(e.target?t=e.target:e.srcElement&&(t=e.srcElement),3==t.nodeType&&(t=t.parentNode),disableBackspaceExit&&8==code&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName)return e.keyCode=0,event.keyCode=0,e.returnValue=!1,event.returnValue=!1,Event.stop(e),!1;Weebly.keyTracker[i]=1,Weebly.keyTracker.p&&Weebly.keyTracker.s&&Weebly.keyTracker.u&&showAbout()}}),document.observe("keyup",function(e){if(!Event.element(e).hasClassName("editable-text")){e.keyCode?code=e.keyCode:e.which&&(code=e.which);var t=String.fromCharCode(code).toLowerCase();Weebly.keyTracker[t]=0}}),$.StealMouse=Class.create(),$.StealMouse.__class_name="$.StealMouse",$.StealMouse.prototype.__class_name="$.StealMouse",$_StealMouse=$.StealMouse,Object.extend($.StealMouse,{on:function(e){e.__steal_mouseup=function(t){$.StealMouse._sendMouseEvent(t,"mouseup",e)},Event.observe(e.contentWindow.document,"mouseup",e.__steal_mouseup),e.__steal_mousedown=function(t){$.StealMouse._sendMouseEvent(t,"mousedown",e)},Event.observe(e.contentWindow.document,"mousedown",e.__steal_mousedown),e.__steal_mousemove=function(t){$.StealMouse._sendMouseEvent(t,"mousemove",e)}},off:function(){Event.stopObserving(ifr.contentWindow.document,"mouseup",ifr.__steal_mouseup),Event.stopObserving(ifr.contentWindow.document,"mousedown",ifr.__steal_mousedown),Event.stopObserving(ifr.contentWindow.document,"mousemove",ifr.__steal_mousemove)},_sendMouseEvent:function(e,t,i){var n=Position.cumulativeOffset(i),o=[0,0],s={x:n[0]+o[0],y:n[1]+o[1]};if(document.createEvent){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!1,window,e.detail,e.screenX,e.screenY,e.clientX+s.x,e.clientY+s.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),i.dispatchEvent(r)}else{var r=document.createEventObject();r.detail=e.detail,r.screenX=e.screenX,r.screenY=e.screenY,r.clientX=e.clientX+s.x,r.clientY=e.clientY+s.y,r.ctrlKey=e.ctrlKey,r.altKey=e.altKey,r.shiftKey=e.shiftKey,r.metaKey=e.metaKey,r.button=e.button,r.relatedTarget=e.relatedTarget,r.target=i,r.srcElement=i}}});var toJsonString;!function(){function e(e){return/[\x00-\x19\'\\]/.test(e)?e.replace(/([\\'])/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/[\x00-\x19]/g,""):e}toJsonString=function(t){var i;switch(typeof t){case"string":return"'"+e(t)+"'";case"number":return String(t);case"object":if(t){var n=[];if(t.constructor==Array){for(var o=0;o<t.length;o++){var s=toJsonString(t[o]);s!=i&&(n[n.length]=s)}return"["+n.join(",")+"]"}if(t.constructor==Date)return"new Date("+t.getTime()+")";for(var r in t){var s=toJsonString(t[r]);s!=i&&(n[n.length]=(/^[A-Za-z_]\w*$/.test(r)?"'"+r+"'"+":":"'"+e(r)+"':")+s)}return"{"+n.join(",")+"}"}return"null";case"boolean":return String(t);case"function":return;case"undefined":return"null"}}}(),Weebly.on={textIsChanging:0,currentTextElement:null,currentTextCallBack:null,textChange:function(e,t,i,n){e=$(e),i||(i=1500),e!=Weebly.on.currentTextElement&&"function"==typeof Weebly.on.currentTextElement&&Weebly.on.currentTextCallBack(),(Weebly.on.currentTextElement!=e||"undefined"!=typeof n)&&("undefined"==typeof n?(Weebly.on.currentTextElement=e,Weebly.on.currentTextCallBack=t,Weebly.on.myFunction=Weebly.on.textChange.bind(Weebly.on.textChange,e,t,i,e.value),setTimeout("Weebly.on.myFunction();",i)):e&&e.value&&e.value==n||""==e.value&&""==n?(Weebly.on.currentTextCallBack(e.value),Weebly.on.currentTextElement=null,Weebly.on.currentTextCallBack=null):(Weebly.on.myFunction=Weebly.on.textChange.bind(Weebly.on.textChange,e,t,i,e.value),setTimeout("Weebly.on.myFunction();",i)))}},Weebly.lightbox={element:"",onHide:function(){},show:function(e){if(e&&e.element){if(this.elementNode=$$(e.element)[0],this.element=e.element,e.button&&e.button.onClick){e.button.image=e.button.image?e.button.image:"http://"+editorStatic+"/weebly/images/accept-button.jpg";var t=document.createElement("DIV");t.innerHTML="<div style='margin-right: 20px; text-align: right;'><img src='http://"+editorStatic+"/weebly/images/spinner.gif' id='lightbox_spinner' style='position: relative; top: -10px; left: -5px; display: none;'/><a href='#' onmousedown='"+'$("focusMe").focus(); return false;'+"' onclick='"+e.button.onClick+"; return false;'><img src='"+e.button.image+"' style='border: 0;' id='lightbox_submitbtn'/></a></div>",$("weeblyLightboxButton").appendChild(t)}e.width||(e.width=this.elementNode.getWidth()+20),e.height||(e.height=this.elementNode.getHeight()+$("weeblyLightboxButton").getHeight()+50),$("weeblyLightboxContent").childNodes.length>0&&$("weeblyLightboxContent").childNodes[0]&&($("weeblyLightboxContent").childNodes[0].style.display="none",document.body.appendChild($("weeblyLightboxContent").childNodes[0])),e.padding=e.padding?e.padding:10,$("weeblyLightboxContent").style.padding=e.padding+"px",Weebly.lightbox.onHide=e.onHide?e.onHide:function(){},$("grayedOutFull").style.display="block",$("weeblyLightbox").style.display="block",$("weeblyLightboxClose")&&$("weeblyLightboxClose").show(),e.options&&e.options.hideClose&&$("weeblyLightboxClose").hide();var i=(getInnerHeight()-e.height)/2;i=i>0?i:10,e.animate?new Effect.Morph($("weeblyLightboxInside"),{style:{width:e.width+"px",height:e.height+"px",marginTop:i+"px"},afterFinish:function(){Weebly.lightbox.insertContent()}}):($("weeblyLightboxInside").style.marginTop=i+"px",$("weeblyLightboxInside").style.width=e.width+"px",navigator.appVersion.match("MSIE 6")?$("weeblyLightboxInside").style.height=e.height+"px":$("weeblyLightboxInside").style.minHeight=e.height+"px",Weebly.lightbox.insertContent()),"function"==typeof e.onFinish&&e.onFinish()}},insertContent:function(){$("weeblyLightboxContent").appendChild(Weebly.lightbox.elementNode),Weebly.lightbox.elementNode.style.display="block"},hide:function(){Weebly.lightbox.onHide(),$("grayedOutFull").style.display="none",$("weeblyLightbox").style.display="none",$("weeblyLightboxContent").childNodes.length>0&&$("weeblyLightboxContent").childNodes[0]&&($("weeblyLightboxContent").childNodes[0].style.display="none",document.body.appendChild($("weeblyLightboxContent").childNodes[0])),$("weeblyLightboxButton").innerHTML=""}};var currentHref=document.location.href.replace(/#.*$/,""),firstTime=(new Date).getTime(),publishAfterPro=!1;"undefined"!=typeof doMonitorHref&&document.observe("dom:loaded",function(){setInterval("monitorHref()",200)}),eval("var "+String.fromCharCode(102)+String.fromCharCode(99)+String.fromCharCode(99)+" = function(num) { return String.fromCharCode(num); };");var ElementExtensions={center:function(e,t,i){e=$(e);var n=e.getDimensions(),o=document.viewport.getDimensions(),s=document.viewport.getScrollOffsets(),r=o.width/2+s.left-n.width/2,a=o.height/2+s.top-n.height/2;return t&&t>r&&(r=parseInt(t)),i&&i>a&&(a=parseInt(i)),e.setStyle({position:"absolute",top:Math.floor(a)+"px",left:Math.floor(r)+"px"}),e},getInnerText:function(e){return Weebly.jQuery(e).text()},setInnerText:function(e,t){return Weebly.jQuery(e).text(t)}};Element.addMethods(ElementExtensions),String.prototype.safeReplace=function(e,t){return this.replace(e,(t+"").replace(/\$/g,"$$$$"))},_loadingLevel=0,_wAMD.define("legacy/weebly_utils",["legacy/weebly_restrictions"],function(){}),_wAMD.define("editor/content/main",["jquery","underscore","editor/app","legacy/weebly_events","legacy/weebly_page_manager","editor/build/themes/rendering","legacy/weebly_utils","legacy/weebly_utils_ajax"],function(e,t,i,n,o,s){var r={hideTitle:0};return r.updatePageData=function(t){Weebly.initialRight=t,o.init(),s.renderTheme(),window.navList=e("#pageManagerList").html(""),o.buildNav(Weebly.PageManager.topLevelPages,window.navList),o.initSorting()},r.isContentSaving=!1,r.saveContent=function(e,t,o,s){i.vent.trigger("editor:saving"),r.isContentSaving=!0,new window.Ajax.Request(window.ajax,{parameters:{pos:"content",reqid:e,content:t,align:o,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){if(e.responseText.isJSON()){var t=e.responseText.evalJSON();t.result||r.showDeniedAction(t.error)}e.responseText.indexOf("the following problems")>0&&!s&&(window.showError(e.responseText),window.updateList(window.currentPage)),i.vent.trigger("editor:saved"),n.fireEvent("saveContentSuccess",e)},onFailure:function(e){window.errFunc(e),n.fireEvent("saveContentFailure",e)},onComplete:function(e){r.isContentSaving=!1,n.fireEvent("saveContentComplete",e)},bgRequest:s})},r.updateSiteTitle=function(e){if(e.replace(/<br[^>]*>/gi,"").strip())window.currentSiteTitle=e,new window.Ajax.Request(window.ajax,{parameters:{pos:"sitetitle",newtitle:e,cookie:document.cookie,token:Weebly.RequestToken},onFailure:window.errFunc,onException:window.exceptionFunc});else{r.hideTitle=!0;var t=Weebly.siteContext.getArea("title"),i=Weebly.siteContext.getArea("logo");t&&t.rerender(),i&&i.rerender(),new window.Ajax.Request(window.ajax,{parameters:{pos:"hidetitle",token:Weebly.RequestToken},onFailure:window.errFunc,onException:window.exceptionFunc})}},t.extend(window,r),r}),_wAMD.define("editor/build/ui/utils",["jquery","legacy/weebly_view"],function(e,t){var i={};return i.getScrollContainer=function(){return t.isMobileView?e("#w-mobile-phone-screen > .scroll").eq(0):e("#scroll_container").eq(0)},i}),_wAMD.define("editor/build/images/utils",["underscore"],function(e){var t={STANDALONE_IMAGE_ELEMENTS:["30621876","87358824","26608449"],PARAGRAPH_IMAGE_ELEMENTS:["20731748","66604512","94464494","73827406"],CURRENT_PARAGRAPH_IMAGE_ELEMENT:"94464494",SIMPLE_IMAGE_ELEMENTS:["61719152","17854681","18383940","36582085","32818409","86229831","93090942","98937909","85957680","44744975","11138764"],isInitialImage:function(e){return t.isInitialImageSrc(e.src||"")},isInitialImageSrc:function(e){return"string"==typeof e&&(e.match(/na\.jpg/)||e.match(/na\.png/)||e.match(/upload_images_01\.jpg/)||e.match(/\/placeholders\/[^\.]*\.png/))},isPageLayoutImage:function(e){return t.isPageLayoutImageSrc(e.src||"")&&"wslide-slide-inner2"!=e.up("div").className},isPageLayoutImageSrc:function(e){return"string"==typeof e&&(e.match(/\/page-layouts-[^\.]*.jpg/)||e.match(/\/page-layouts-[^\.]*.jpeg/)||e.match(/\/page-layouts-[^\.]*.png/))}};return e.extend(window,t),t}),Weebly.ImageGallery={Version:"0.1",Author:"David Rusenko",Company:"Weebly, Inc.",currentElement:null,isSorting:!1,init:function(){this.currentElement&&(Sortable.create(this.currentElement+"-gallery",{constraint:!1,starteffect:function(){Weebly.ImageGallery.isSorting=!0},endeffect:function(){Weebly.ImageGallery.isSorting=!1,Weebly.ImageGallery.onChange()}}),Weebly.view.isMobileView||$$("#"+this.currentElement+"-gallery .hover-toolbar").each(function(e){e.style.display="block",e.parentNode.style.cursor="move"}),Behaviour.apply(),swfu.dontSave=0)},destroy:function(){this.currentElement&&($(this.currentElement+"-gallery")&&Sortable.destroy(this.currentElement+"-gallery"),$$("#"+this.currentElement+"-gallery .hover-toolbar").each(function(e){e.style.display="none",e.parentNode.style.cursor="auto"}),Behaviour.apply(),this.currentElement=null,Weebly.ImageGallery.clearCurrentCaptionForm())},setCurrent:function(e){Weebly.ImageGallery.currentElement=e},onChange:function(){function e(e){e=e.replace(/^.*\/uploads\//,"");var t=e.match(/^\d\/\d\/\d\/\d\/\d+\/[^\/]+/);return t?t[0]:e}if(this.currentElement=Weebly.ImageGallery.currentElement,this.currentElement&&Weebly.Elements.currentElement){var t=Weebly.Elements.getPropertyByReference("<!IMAGESET!>");if(t.cfpid||(t=Weebly.Elements.getPropertyByReference("<!IMAGES!>"),t.cfpid)){var i=[],n=0;$$("#"+this.currentElement+"-gallery img.galleryImage").each(function(t){var s=e(t.src);width=t.readAttribute("_width"),height=t.readAttribute("_height"),caption=t.readAttribute("_caption"),link=t.readAttribute("_link"),o={url:s},width&&(o.width=width),height&&(o.height=height),caption&&(o.caption=caption),link&&(o.link=link),i.push(o),n++}),t.property_result=Object.toJSON(i),Weebly.Elements.saveProperties(),0==n&&$(""+this.currentElement)&&($(""+this.currentElement).innerHTML=Weebly.ImageGallery.update());var s=(this.currentElement+"").replace(/[^0-9]/g,"");Weebly.Slideshow.updatePhotos(s,i),Weebly.ImageGallery.clearCurrentCaptionForm(!0)}}},update:function(e,t,i,n,o,s,r,a){if("undefined"==typeof a){var l=Weebly.Elements.getPropertyByReference("<!IMAGESET!>");l&&(a=l.property_result)}if(a)try{a=a.evalJSON()}catch(c){a=[]}if("undefined"==typeof t){var l=Weebly.Elements.getPropertyByReference("<!COLUMNS!>");if(l){var u=$(l.ucfpid);t=u?u.value:""}}if("undefined"==typeof i){var l=Weebly.Elements.getPropertyByReference("<!SPACING!>");if(l){var d=$(l.ucfpid);i=d?d.value:""}}if("undefined"==typeof n){var l=Weebly.Elements.getPropertyByReference("<!BORDER!>");if(l){var h=$(l.ucfpid);n=h?parseInt(h.value):0}}else n=parseInt(n);if("undefined"==typeof o){var l=Weebly.Elements.getPropertyByReference("<!CROPPING!>");if(l){var p=$(l.ucfpid);o=p?parseInt(p.value):0}}else o=parseInt(o);if("undefined"==typeof s){var l=Weebly.Elements.getPropertyByReference("<!THUMBCAPTIONTYPE!>");if(l){var f=$(l.ucfpid);s=f?f.value:"none"}}if(Weebly.view.isMobileView&&(s="none"),"undefined"==typeof r){var l=Weebly.Elements.getPropertyByReference("<!THUMBCAPTIONHOVER!>");if(l){var m=$(l.ucfpid);r=m?parseInt(f.value):"0"}}var g="https:"===window.location.protocol?"https://":"http://";return a=a&&a.length?jQuery.grep(a,function(e){var t;return e?(t="string"==typeof e?e:e.url||"",!isInitialImageSrc(t)):!1}):[{url:g+ASSETS_BASE+"/images/editor/elements/placeholders/gallery2.png",width:293,height:222}],e||(e=Weebly.Elements.ucfid),this.currentCaptionImageWrap&&this.clearCurrentCaptionForm(!0),Weebly.ImageGallery._update(e,t,i,n,o,s,r,a)},_update:function(e,t,i,n,o,s,r,a){var l=require("config");this.currentElement=e;var c,u=n?"border-width:1px;"+(n>1?"padding:"+(n-1)+"px;":""):"",d='<ul id="'+e+'-gallery" class="imageGallery" style="line-height: 0px; margin: 0; padding: 0; list-style: none;">',h=(100/t-.05).toFixed(2);c=2==o?4/3:o?1:1.332;var p,f,m,g,v,b,y=(100*(1/c)).toFixed(2),w=!1;this.framePercentWidth=h,this.framePercentHeight=y;for(var M=0;M<a.length;M++)if(a[M]){"string"==typeof a[M]?(p=a[M],f=null,m=null,v=null,b=""):(p=a[M].url,f=parseInt(a[M].width),m=parseInt(a[M].height),v=a[M].link,b=filterCaptionData(a[M].caption||"")),g=f&&m?f/m:1.332,p&&(p.match("://")||(w=p.match("/weebly/images/")||p.match("/images/editor/elements"),w?l.chromeless&&(p="Gallery@2x.png"):p="/uploads/"+p),l.chromeless&&p.startsWith("/")&&(p="http://"+configSiteName+p));var C,x,k;o?g>c?(C=(100*(g/c)).toFixed(2),x=0,k=-(100*((g/c-1)/2)).toFixed(2)):(C=100,x=-(100*((c/g-1)/2)).toFixed(2),k=0):g>c?(C=100,x=(100*((1-c/g)/2)).toFixed(2),k=0):(C=(100*(g/c)).toFixed(2),x=0,k=(100*((1-g/c)/2)).toFixed(2)),d+="<li id='"+e+"-imageContainer"+M+"' style='float:left;width:"+h+"%;margin:0;list-style:none;position:relative;z-index:5'>",d+="<div id='"+e+"-insideImageContainer"+M+"' style='position:relative;margin:"+i+";"+(o||!n?"":"padding:0 "+5*n+"px "+2*n+"px 0;")+"'>",o&&n&&(d+="<div class='galleryImageBorder' style='"+u+"'>"),d+="<div class='galleryImageHolder"+("1"==r?" galleryCaptionHover":"")+"' style='position:relative;width:100%;padding:0 0 "+y+"%;"+(o?"overflow:hidden;":"")+"'>",d+="<div class='galleryInnerImageHolder'><img src='"+p+"' class='galleryImage"+(o||!n?"":" galleryImageBorder")+"' "+(v?"_link='"+v+"' ":"")+(b?"_caption='"+b+"' ":"")+(f?"_width='"+f+"' _height='"+m+"' ":"")+"style='position:absolute;"+(o||!n?"border:0;":u)+"width:"+C+"%;top:"+x+"%;left:"+k+"%' />",Weebly.view.isMobileView&&l.chromeless||(d+='<div class="galleryCaptionHolder ',"full"===s?d+="fullImageGalleryCaption":"partial"===s&&(d+="partialImageGalleryCaption"),d+='" style="',"none"!==s&&b.length||(d+=" display: none;"),o||(d+="padding-left: "+n+"px; width: "+C+"%;margin-top:"+n+"px; margin-bottom: "+-1*n+"px;",g>c?("full"==s&&(d+="top: "+x+"%;"),d+="bottom: "+x+"%; height: auto;"):d+="left: "+k+"%;"),d+='"><div class="galleryCaptionHolderInnerBg"></div><div class="galleryCaptionHolderInner'+("1"==r?"":" galleryCaptionsVisible")+'"'+">"+'<div class="galleryCaptionInnerTextHolder">'+'<div class="galleryCaptionInnerText">'+_.unescape(b)+"</div>"+"</div>"+"</div>",d+="</div>"),d+="</div></div>",l.chromeless||w||(d+="<div class='w-gallery-toolbar hover-toolbar' style='display:none;"+(o?"top:0;right:0":"top:"+x+"%;right:"+(100-k-C)+"%")+"'"+">"+"<div class='hover-toolbar-inner'>",d+="<span class='w-link w-gallery-button w-icon-text-link"+(v?" pressed":"")+"'"+" onclick='Weebly.ImageGallery.chooseThumbnailLink(this)'"+" title='"+_.escape(_W.tl("Add link"))+"'"+"></span>",d+="<span class='w-caption w-gallery-button w-icon-comment"+(b?" pressed":"")+"'"+" onclick='Weebly.ImageGallery.chooseThumbnailCaption(this)'"+" title='"+_.escape(_W.tl("Add caption"))+"'"+"></span>",d+="<span class='w-remove w-gallery-button w-icon-trash' onclick='Weebly.ImageGallery.removeNode(this)' title='"+_.escape(_W.tl("Remove image"))+"'"+"></span>",d+="</div></div>"),o&&n&&(d+="</div>"),d+="</div>",d+="</li>"}return isGalleryLoading&&(d+=_drawGalleryLoading()),d+="<span style='display: block; clear: both; height: 0px; overflow: hidden;'></span>",d+="</ul>"},removeNode:function(e){$(e).up("li").remove(),Weebly.ImageGallery.onChange()},chooseThumbnailLink:function(e){Weebly.ImageGallery.currentLinkButton=$(e),Weebly.ImageGallery.currentLinkThumbnail=$(e).up("li").down("img"),Weebly.Linker.open({remove:!0,existing:parseLinkString(Weebly.ImageGallery.currentLinkThumbnail.readAttribute("_link")),ucfid:Weebly.Elements.currentElement.id,onChoose:Weebly.ImageGallery.setLink})},setLink:function(e,t){e?e+=t?"weeblylink_new_window":"":e="",Weebly.ImageGallery.currentLinkThumbnail.writeAttribute("_link",e),Weebly.ImageGallery.onChange(),e?Weebly.ImageGallery.currentLinkButton.addClassName("pressed"):Weebly.ImageGallery.currentLinkButton.removeClassName("pressed")},chooseThumbnailCaption:function(e){Weebly.ImageGallery.clearCurrentCaptionForm();var t,i,n=Weebly.ImageGallery.currentControlButton=$(e),o=n.up(),s=Weebly.ImageGallery.currentCaptionImageWrap=o.up("li"),r=s.down("img"),a=jQuery(Weebly.ImageGallery.currentCaptionImageWrap.down(".galleryCaptionInnerText")),l=jQuery(Weebly.ImageGallery.currentCaptionImageWrap.down(".galleryCaptionHolder")),c=_.unescape(r.readAttribute("_caption")||"");s.style.zIndex=6,n.addClassName("pressed"),t=new Element("form",{"class":"w-caption-form w-ui hover-toolbar-inner"}).observe("submit",function(e){e.stop()}).observe("click",function(e){e.stop()}).observe("mouseup",function(e){e.stop()}).insert(i=new Element("textarea",{"class":c?"":"empty"}).observe("focus",function(){i.hasClassName("empty")&&(i.removeClassName("empty"),i.value="",l.hide())}).observe("blur",function(){i.value.strip()||(i.addClassName("empty"),i.value=_W.tl("Enter a caption"),l.hide())}).observe("keyup",function(){i.value.strip()?(l.hasClass("fullImageGalleryCaption")||l.hasClass("partialImageGalleryCaption"))&&l.show():l.hide(),a.html(i.value)})).insert(new Element("span",{"class":"button-wrap"}).insert(new Element("input",{type:"submit",value:_W.tl("Save"),"class":"btn btn-block btn-info"}).observe("click",function(){var e;e=i.hasClassName("empty")?"":filterCaptionData(i.value),r.writeAttribute("_caption",e),Weebly.ImageGallery.clearCurrentCaptionForm(void 0,!e),Weebly.ImageGallery.onChange(),e?n.addClassName("pressed"):n.removeClassName("pressed")}))).insert(new Element("span",{"class":"button-wrap"}).insert(new Element("input",{type:"button",value:"Cancel","class":"btn btn-block btn-inverse"}).observe("click",function(){Weebly.ImageGallery.clearCurrentCaptionForm(void 0,!r.readAttribute("_caption")),0==c.length&&l.hide()})));var u=e.up("#scroll_container")||$(document.body),d=new Element("div",{"class":"hover-toolbar hover-toolbar-below",style:"z-index:1000"});d.insert("<div class='hover-toolbar-arrow hover-toolbar-arrow-centered'></div>"),d.insert(t),u.insert(d),Weebly.ImageGallery.currentCaptionForm=d;var h=jQuery(u).offset(),p=jQuery(n).offset(),f=jQuery(n).outerWidth(),m=jQuery(n).outerHeight(),g=jQuery(d).outerWidth();jQuery(d).css({top:p.top+m-(h.top-u.scrollTop),left:p.left+f/2-g/2-(h.left-u.scrollLeft)}),i.value=c?unfilterCaptionData(c):_W.tl("Enter a caption")},clearCurrentCaptionForm:function(e,t){void 0===t&&Weebly.ImageGallery.currentCaptionImageWrap&&(t=!Weebly.ImageGallery.currentCaptionImageWrap.down("img").readAttribute("_caption")),Weebly.ImageGallery.currentCaptionForm&&(Weebly.ImageGallery.currentCaptionImageWrap.down(".galleryCaptionHolderInner .galleryCaptionInnerText").innerHTML=_.unescape(Weebly.ImageGallery.currentCaptionImageWrap.down("img").readAttribute("_caption")),Weebly.ImageGallery.currentCaptionForm.remove(),Weebly.ImageGallery.currentCaptionForm=null),Weebly.ImageGallery.currentControlButton&&(t&&Weebly.ImageGallery.currentControlButton.removeClassName("pressed"),Weebly.ImageGallery.currentControlButton=null),!e&&Weebly.ImageGallery.currentCaptionImageWrap&&(Weebly.ImageGallery.currentCaptionImageWrap.style.zIndex=5,Weebly.ImageGallery.currentCaptionImageWrap=null)},uploadStart:function(e){drawGalleryLoading(e),Weebly.SlideshowAdmin.uploadStart()},uploadComplete:function(){isGalleryLoading=!1,Weebly.SlideshowAdmin.uploadComplete()},uploadCancel:function(e){clearGalleryLoading(e)},uploadError:function(e){clearGalleryLoading(e)}};var isGalleryLoading=!1;_wAMD.define("legacy/weebly_image_gallery",["legacy/weebly_elements","legacy/weebly_linker","editor/build/images/utils"],function(e){return function(){var t;return t||e.Weebly.ImageGallery}}(this)),function(){function e(e,t){o(function(t){v=t,e(t)},t)}function t(e){a(e),i(v),Weebly.Elements.continueOnChange(),Weebly.Elements.saveProperties(),r(),resizeAllColumns()}function i(e){"simple"===e?n("<!NAV!>","none"):"thumbs-bottom"===e?n("<!AUTOPLAY!>","0"):"numbers-bottom"===e?(n("<!NAV!>","numbers"),n("<!AUTOPLAY!>","0")):"thumbs-top"===e?(n("<!NAVLOCATION!>","top"),n("<!AUTOPLAY!>","0")):"thumbs-right"===e?(n("<!NAVLOCATION!>","right"),n("<!AUTOPLAY!>","0")):"thumbs-double"===e&&(n("<!NAV!>","double_thumbnails"),n("<!NAVLOCATION!>","right"),n("<!AUTOPLAY!>","0"))}function n(e,t){var i=Weebly.Elements.getPropertyByReference(e);if(i){var n=$(i.ucfpid);n&&(n.value=t)}}function o(e,t){M=e,C=t;var i=$("slideshow-chooser-done");b||(y=$("slideshow-chooser"),b=new Weebly.Dialog(y,{modal:!0,onClose:function(e){e&&C()}}),y.select("div.slideshow-choice").each(function(e){var t=e.id.match(/^slideshow-(.*)$/)[1];e.observe("click",function(){s(t)})}),i.observe("click",function(){A||(A=!0,i.setOpacity(.5),M(w))})),A&&(A=!1,i.setOpacity(1)),s("simple"),b.open()}function s(e){_&&_.removeClassName("slideshow-choice-active"),w=e,_=$("slideshow-"+e).addClassName("slideshow-choice-active")}function r(){b&&b.close()}function a(e){x=e,D=!0,Weebly.Elements.selectElement($(x)),$("menuBarDiv").style.left="-10000px";
var t=Weebly.Slideshow.getSlideshowImages(x),i=$("slideshow-manager");S=i.select("#slideshow-manager-content")[0],T=i.select("#slideshow-manager-buttons")[0],dndEnabled===!0&&(Weebly.DragAndDrop.setParameters({ucfid:x,ucfpid:Weebly.Elements.getPropertyByReference("<!IMAGES!>").ucfpid}),i.addClassName("dnd-enabled")),c(x,t),k=new Weebly.Dialog(i,{modal:!0,zIndex:999,noScrollbars:!0,onClose:function(){positionElementOptions(),document.getElementById("slideshow-reorder-images").innerHTML="",document.getElementById("slideshow-upload-content").style.display="",document.getElementById("slideshow-reorder-message").style.display="",Weebly.ImageGallery.destroy(),D=!1;var e=$(x).up("li");Weebly.Slideshow.getSlideshowImages(x).length||deleteWeeblyElement(e,!0),dndEnabled===!0&&Weebly.DragAndDrop.clearParameters(),Weebly.Linker.close(),Weebly.Elements.unselectElement()}}),i.select("#slideshow-add-button")[0].observe("mouseover",function(e){h(e,this,x)}),i.select("#slideshow-view-button")[0].observe("click",function(){k.close()}),isFlashInstalled()||(i.select("#slideshow-add-button")[0].observe("click",g),i.select("#slideshow-view-button")[0].observe("click",g)),t.length?T.show():(T.hide(),i.select("#slideshow-big-upload-button")[0].observe("mouseover",function(e){h(e,this,x)}),isFlashInstalled()||i.select("#slideshow-big-upload-button")[0].observe("click",g)),k.open(),d(),t.length&&Weebly.ImageGallery.init()}function l(e){Weebly.Elements.selectElement($(x));var t=Weebly.Slideshow.getSlideshowImages(x);c(x,t,e),e||t.length?(T.show(),Weebly.ImageGallery.init()):(T.hide(),S.select("#slideshow-big-upload-button")[0].observe("mouseover",function(e){h(e,this,x)}),isFlashInstalled()||container.select("#slideshow-big-upload-button")[0].observe("click",g)),u(),k.positionDialog(),d(),E&&(E=!1,S.scrollTop=1e4)}function c(e,t,i){i||t.length?(P=!1,document.getElementById("slideshow-reorder-message").style.display="block",document.getElementById("slideshow-upload-content").style.display="",document.getElementById("slideshow-reorder-images").innerHTML=Weebly.ImageGallery._update(e+"-manager",4,"10px",4,!1,"none","0",t)):(P=!0,document.getElementById("slideshow-upload-content").style.display="block",document.getElementById("slideshow-reorder-message").style.display="")}function u(){S.setStyle({height:"auto",overflow:"visible"})}function d(){var e=document.viewport.getHeight(),t=S.cumulativeOffset().top,i=S.getHeight();t+i+80>e&&S.setStyle({height:e-t-80+"px",overflow:"auto"})}function h(e,t,i){isFlashInstalled()&&(i&&p(i),t||(t=this),t=$(t),Prototype.Browser.Gecko?Element.clonePosition($("flashContainer"),t):($("flashContainer").style.position="relative",Element.clonePosition($("flashContainer"),t),$("flashContainer").style.position="absolute"),showFlashContainer(1e3))}function p(e){var t=getContentFieldProperties(e),i="",n="",o=250;$H(t).each(function(e){var t=e.value;"<!IMAGES!>"===t.reference_property&&(i=t.ucfpid,n="slideshow")}),selectUpload(n,o,e,i)}function f(){D&&(P?l(!0):(d(),S.scrollTop=1e4))}function m(){D&&(E=!0)}function g(){showFlashWarning(_W.tl("Adobe Flash Player is required in order to upload files."))}Weebly.SlideshowAdmin={dropped:e,reportNewID:t,manage:a,updateManager:l,isManaging:function(){return D},uploadStart:f,uploadComplete:m};var v,b,y,w,_,M,C,x,k,S,T,A=!1,D=!1,E=!1,P=!1;Element.observe(window,"resize",function(){D&&d()})}(),_wAMD.define("legacy/weebly_slideshow_admin",["legacy/weebly_elements","legacy/weebly_dialog","legacy/slideshow-jq","legacy/weebly_image_gallery","legacy/weebly_linker"],function(e){return function(){var t;return t||e.Weebly.SlideshowAdmin}}(this)),_wAMD.define("tpl!editor/dialogs/upload-virus-error",[],function(){return"{{#tl}}We've detected a virus in the file that you uploaded and have deleted the file.{{/tl}}\n"}),_wAMD.define("editor/dialogs/UploadVirusError",["backbone-all","mustache","tpl!editor/dialogs/upload-virus-error"],function(e,t,i){var n=e.Marionette.ItemView.extend({dialog:{dialogClass:"upload-virus-error",title:_W.tl("Virus Detected in File"),size:"550x250",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Close"),className:"btn-com btn-info"}]}]},triggers:{"click .btn-info":"dialog:close"},template:t.compile(i)});return n}),function(e){function t(){var e=jQuery(document.createElement("div")).addClass("dragging-mask");jQuery("#icontent div.wsite-video").append(e)}function i(){void 0===s&&(s=jQuery('<div id="drag-boundry-left" class="boundry" /><div id="drag-boundry-right" class="boundry" /><div id="drag-boundry-top" class="boundry" /><div id="drag-boundry-bottom" class="boundry" />').on({dragleave:function(){Weebly.DragAndDrop.helper.reset(!0)},mouseover:function(){Weebly.DragAndDrop.helper.reset(!0)}}),jQuery(document.body).append(s))}function n(){s&&s.remove(),s=void 0}function o(e,t,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,e.apply(o,s)};i&&clearTimeout(n),(i||!n)&&(n=setTimeout(r,t))}}var s,r={dropEdge:null,notifier:new Weebly.Hellos,parameters:{},setParameters:function(e){var t=r;t.parameters={};for(var i in e)e[i]&&(t.parameters[i]=e[i])},clearParameters:function(){var e=r;e.parameters={}},init:{all:function(){var t=r;e.FileReader&&"draggable"in document.createElement("span")&&(dndEnabled=!0,t.init.document(),t.init.editor(),t.init.blog(),t.init.dropzone(),t.init.slideshowManager(),t.init.imageChooser())},document:function(){var e=r;jQuery(document).on({dragover:function(e){e.preventDefault()},dragenter:function(t){t.preventDefault(),e.helper.resetStates(!0)},drop:function(t){t.preventDefault(),e.helper.reset(!0)}})},editor:function(){var n=r;jQuery("#icontent").on("dragover",function(e){e.preventDefault()}).on("dragenter",function(){setTimeout(i,10),showContentAreaSpotlights(),t(),Weebly.Elements.unselectElement()}).on("dragend",function(){n.helper.reset(!1)});var s,a=!1;jQuery("#icontent").on("dragover",".weebly-content-area",o(function(t){t.preventDefault(),a||s&&s.length||(n.dropEdge=e.findClosestDroppableEdge(t.originalEvent.pageX,t.originalEvent.pageY),n.dropEdge?e.createMarkerFromEdge(n.dropEdge):e.removeMarker())},100)).on("dragenter",".weebly-content-area",function(e){e.preventDefault(),e.stopPropagation(),a=!1;try{var t=".empty-element-message, li.inside";s=jQuery(e.target).closest(t),s.hasClass("wsite-initial-image")?(n.helper.resetStates(!0),s.addClass("wsite-initial-image-upload")):s.length&&(n.helper.resetStates(!1),s=void 0)}catch(e){}}).on("drop",".weebly-content-area",function(e){var t=e.originalEvent.dataTransfer.files,i=e.currentTarget;return e.preventDefault(),e.stopPropagation(),s&&s.length||n.dropEdge?(s=void 0,n.helper.reset(!1),a=!0,n.helper.prepareFiles({contentArea:i,event:e,files:t}),void 0):(n.helper.reset(!0),void 0)})},dropzone:function(){var e=r,t=jQuery("#dnd-dropzone-content").addClass("dnd-enabled"),i=t.find(".verb");t.on({dragover:function(e){e.preventDefault(),e.stopPropagation(),t.addClass("dragover"),i.text(_W.tl("Drop"))},dragenter:function(e){e.preventDefault()},dragleave:function(){t.removeClass("dragover"),i.text(_W.tl("Drag"))},drop:function(n){var o,s=n.originalEvent.dataTransfer.files,r={},a=e.parameters.type,l=a,c=a;switch(a){case"audio":c="an audio";break;case"video":c="a video";break;case"gallery":a="image",c="an image",l="photoGallery";break;case"file":c="a valid"}n.preventDefault(),n.stopPropagation(),t.removeClass("dragover"),i.text(_W.tl("Drag")),"file"===a&&(o="file"),r=e.util.distill(s,o),r[a]?r[a].length&&"function"==typeof e.upload[l]&&e.helper.valid(l,r[a])&&e.upload[l]({files:r[a],ucfid:e.parameters.ucfid,ucfpid:e.parameters.ucfpid}):e.notifier.say({title:_W.tl("Invalid File Type"),body:_W.tl("The file must be ")+c+_W.tl(" file"),icon:"warning",zIndex:1e3})}})},slideshowManager:function(){var e=r,t=jQuery("#slideshow-manager-content").addClass("dnd-enabled"),i=t.find(".verb");t.on({dragover:function(e){e.preventDefault(),e.stopPropagation(),t.addClass("dragover"),i.text(_W.tl("Drop"))},dragenter:function(e){e.preventDefault()},dragleave:function(){t.removeClass("dragover"),i.text(_W.tl("Drag"))},drop:function(n){var o=n.originalEvent.dataTransfer.files,s={};n.preventDefault(),n.stopPropagation(),t.removeClass("dragover"),i.text(_W.tl("Drag")),s=e.util.distill(o),s.image&&s.image.length?e.helper.valid("image",s.image)&&e.upload.slideshow({ucfid:e.parameters.ucfid,ucfpid:e.parameters.ucfpid,files:s.image}):e.notifier.say({title:_W.tl("Invalid File Type"),body:_W.tl("The file must be a JPEG, GIF, or PNG"),icon:"warning",zIndex:1e3})}})},imageChooser:function(){var e=r,t=jQuery("#image-chooser-container").addClass("dnd-enabled"),i=t.find(".verb");t.on({dragover:function(e){e.preventDefault(),e.stopPropagation(),t.addClass("dragover"),i.text(_W.tl("Drop"))},dragenter:function(e){e.preventDefault()},dragleave:function(){t.removeClass("dragover"),i.text(_W.tl("Drag"))},drop:function(n){if(t.hasClass("dnd-enabled")){var o=n.originalEvent.dataTransfer.files,s={};n.preventDefault(),n.stopPropagation(),t.removeClass("dragover"),i.text(_W.tl("Drag")),s=e.util.distill(o),s.image&&s.image.length?!e.parameters.multipleFiles&&s.image.length>1?e.notifier.say({title:_W.tl("Too Many Files"),body:_W.tl("You can only upload a single image at a time, consider using the Photo Gallery"),icon:"warning",zIndex:1e3,now:!0}):e.helper.valid("image",s.image)&&(e.upload.picture({type:e.parameters.type||"",ucfid:e.parameters.ucfid||"",ucfpid:e.parameters.ucfpid||"",successCallback:e.parameters.successCallback,area_name:e.parameters.areaName||"",area_page_id:e.parameters.areaPageID||"",area_type:e.parameters.areaType||"",height:e.parameters.height||"",size:e.parameters.size||"",files:s.image}),Element.simulate("image-chooser-close","click")):e.notifier.say({title:_W.tl("Invalid File Type"),body:_W.tl("The file must be a JPEG, GIF, or PNG"),icon:"warning",zIndex:1e3,now:!0})}}})},blog:function(){var t=r;jQuery("#icontent").on("dragover","#secondlist-blog",function(i){i.preventDefault(),i.stopPropagation(),t.dropEdge=e.findClosestDroppableEdge(i.originalEvent.pageX,i.originalEvent.pageY),t.dropEdge?e.createMarkerFromEdge(t.dropEdge):e.removeMarker()}).on("drop","#secondlist-blog",function(e){var i=e.originalEvent.dataTransfer.files,n=e.currentTarget;e.stopPropagation(),e.preventDefault(),t.helper.prepareFiles({contentArea:n,event:e,files:i},!0)})}},regex:{image:function(e){return/(?:png|jpg|jpeg|gif)$/.test(e.toLowerCase())},audio:function(e){return/^(?:audio\/)/.test(e.toLowerCase())},video:function(e){return/^(?:video\/)/.test(e.toLowerCase())},flash:function(e){return/x-shockwave-flash/.test(e.toLowerCase())}},prepare:{picture:function(e){var t,i=r;if(-1!==e.sibling.className.indexOf("wsite-initial-image")){var n=e.sibling.querySelector(".element"),o=getContentField(n.id),s=new Weebly.ProgressBar;s.render(),i.upload.picture({type:"image",files:e.files[0],ucfid:o.ucfid,ucfpid:o.getProperty("<!SRC!>").ucfpid,progress:function(e){if(e.lengthComputable){var t=e.loaded/e.total;s.progress(100*t)}}})}else{t=i.util.getElement({category:"Basic",display_name:"Picture"});var a=i.helper.stageElement(t,e.contentArea,e.sibling);i.helper.stageInvoke(function(){return function(t){var n=new FileReader,o=getElementObject(t.pageID).getContentField(),s=new Weebly.ProgressBar;t.newInsideElement.innerHTML="",t.newInsideElement.id="new-element",t.newInsideElement.appendChild(s.render()),n.onload=function(e){var i=document.createElement("img");i.src=e.target.result,i.onload=function(){var e=.65*i.width;s.el().setStyle({width:e+"px",marginLeft:-e/2+"px",marginTop:-t.newInsideElement.getHeight()/4+"px",top:"50%",left:"50%"})},t.newInsideElement.className="inside uploading",t.newInsideElement.appendChild(i)},n.readAsDataURL(e.files[0]),i.upload.picture({type:"image",files:e.files[0],ucfid:o.ucfid,ucfpid:o.getProperty("<!SRC!>").ucfpid,progress:function(e){if(e.lengthComputable){var t=e.loaded/e.total;s.progress(100*t)}}})}}(e.files),e.contentArea,a)}},photoGallery:function(e){var t=r,i=t.util.getElement({category:"Multimedia",display_name:"Photo Gallery"}),n=t.helper.stageElement(i,e.contentArea,e.sibling);t.helper.stageInvoke(function(e){return function(i){var n=getElementObject(i.pageID).getContentField();i.newInsideElement.innerHTML="",i.newInsideElement.id="new-element",t.upload.photoGallery({ucfid:n.ucfid,ucfpid:n.getProperty("<!IMAGESET!>").ucfpid,files:e})}}(e.files),e.contentArea,n)},slideshow:function(e){var t=r,i=t.util.getElement({category:"Multimedia",display_name:"Slideshow"});Weebly.SlideshowAdmin.dropped(function(){skipNewSlideshowDialog=!0;var n=t.helper.stageElement(i,e.contentArea,e.sibling);t.helper.stageInvoke(function(e){return function(t){var i=r;Weebly.SlideshowAdmin.reportNewID(t.newElementID),Weebly.SlideshowAdmin.updateManager(!0),i.upload.slideshow({files:e,ucfid:t.newElementID,ucfpid:Weebly.Elements.getPropertyByReference("<!IMAGES!>").ucfpid}),skipNewSlideshowDialog=!1}}(e.files),e.contentArea,n)},function(){skipNewSlideshowDialog=!1,t.helper.resetStates(!0)})},audio:function(e){var t=r;if(t.helper.valid("audio",e.files)){var i=t.util.getElement({category:"Multimedia",display_name:"Audio Player"}),n=t.helper.stageElement(i,e.contentArea,e.sibling);t.helper.stageInvoke(function(e){return function(i){Weebly.Elements.selectElement(i.newElement),t.upload.audio({files:e,ucfid:i.newElementID,ucfpid:Weebly.Elements.getPropertyByReference("<!AUDIOFILE!>").ucfpid})}}(e.files),e.contentArea,n)}},video:function(e){var t=r;if(t.helper.valid("video",e.files)){var i=t.util.getElement({category:"Multimedia",display_name:"Video"}),n=t.helper.stageElement(i,e.contentArea,e.sibling);t.helper.stageInvoke(function(e){return function(i){Weebly.Elements.selectElement(i.newElement),t.upload.video({files:e,ucfid:i.newElementID,ucfpid:Weebly.Elements.getPropertyByReference("<!VIDEOFILE!>").ucfpid})}}(e.files),e.contentArea,n)}},flash:function(e){var t=r;if(t.helper.valid("flash",e.files)){var i=t.util.getElement({category:"Multimedia",display_name:"Flash"}),n=t.helper.stageElement(i,e.contentArea,e.sibling);t.helper.stageInvoke(function(e){return function(i){Weebly.Elements.selectElement(i.newElement),t.upload.flash({files:e,ucfid:i.newElementID,ucfpid:Weebly.Elements.getPropertyByReference("<!MOVIE!>").ucfpid})}}(e.files),e.contentArea,n)}}},upload:{slideshow:function(e){for(var t=new Weebly.AjaxUploaderProgress({action:"/weebly/fileUpload.php",parameters:{cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],type:"slideshow",ucfid:e.ucfid,ucfpid:e.ucfpid},load:function(){},loadstart:function(){swfu.dontSave=!0,drawGalleryLoading(e.ucfid),xhrUploading=e.ucfid},success:function(t){clearGalleryLoading(e.ucfid),"function"==typeof e.successCallback?e.successCallback({},t.responseText):updateList(currentPage)}}),i=[],n=0;n<e.files.length;n++)i.push({Filedata:e.files[n],Filename:e.files[n].name,newid:Math.floor(10000001*Math.random())});t.send(i)},picture:function(e){var t=0,i=new Weebly.AjaxUploaderProgress({action:"/weebly/fileUpload.php",loadstart:function(){swfu.dontSave=!0,Weebly.DragAndDropDialog.close()},progress:e.progress,parameters:{cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],type:e.type,ucfid:e.ucfid,ucfpid:e.ucfpid,area_name:e.area_name||"",area_page_id:e.area_page_id||"",area_type:e.area_type||"",height:e.height||"",width:e.size||""},success:function(i){if(swfu.dontSave=!1,"function"==typeof e.successCallback){var n={file:e.files[t++]};e.successCallback({},i.responseText,n)}else updateList(currentPage)}});if(e.files instanceof Array||e.files instanceof FileList&&e.files.length>1){for(var n=[],o=0;o<e.files.length;o++)n.push({Filedata:e.files[o],Filename:e.files[o].name,newid:Math.floor(10000001*Math.random())});i.send(n)}else i.send({Filedata:e.files,newid:Math.floor(10000001*Math.random())})},photoGallery:function(e){for(var t=new Weebly.AjaxUploaderProgress({action:"/weebly/fileUpload.php",parameters:{cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],type:"gallery",ucfid:e.ucfid,ucfpid:e.ucfpid},loadstart:function(){swfu.dontSave=!0,drawGalleryLoading(e.ucfid),Weebly.DragAndDropDialog.close(),xhrUploading=e.ucfid},success:function(t){clearGalleryLoading(e.ucfid),"function"==typeof e.successCallback?e.successCallback({},t.responseText):(updateList(currentPage),editorApp.vent.once("editorListUpdated",function(){swfu.dontSave=0}))}}),i=[],n=0;n<e.files.length;n++)i.push({Filedata:e.files[n],newid:Math.floor(10000001*Math.random())});t.send(i)},audio:function(e){var t=r;t.upload.generic(e,"audio")},video:function(e){var t=r;t.upload.generic(e,"video")},file:function(e){var t=r;t.upload.generic(e,"file")},flash:function(e){var t=r;t.upload.generic(e,"flash")},generic:function(e,t){var i=new Weebly.AjaxUploaderProgress({action:"/weebly/fileUpload.php",parameters:{cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],type:t,ucfid:e.ucfid,ucfpid:e.ucfpid},loadstart:function(){Weebly.DragAndDropDialog.close()},success:function(t){"function"==typeof e.successCallback?e.successCallback({},t.responseText):(updateList(currentPage),editorApp.vent.once("editorListUpdated",function(){swfu.dontSave=0}))},error:function(e){if("%%VIRUS%%"===e.responseText){var t=require("editor/dialogs/UploadVirusError");editorApp.showDialog(new t)}}});i.send({Filedata:e.files[0],Filename:e.files[0].name,newid:Math.floor(10000001*Math.random())}),swfu.dontSave=!0}},helper:{valid:function(e,t){var i=r;if(void 0===e||0===t.length)return!1;if("audio"===e||"video"===e||"flash"===e){var n;switch(e){case"audio":n=_W.tl("Try dragging a single audio file at a time.");break;case"video":n=_W.tl("Try dragging a single video file at a time.");break;case"flash":n=_W.tl("Try dragging a single flash file at a time.")}if(t.length>1)return i.notifier.say({title:_W.tl("Too Many Files"),body:n,icon:"warning",zIndex:1e3,now:!0}),i.helper.reset(!0),!1}var o="video"===e?Weebly.Restrictions.accessValue("video_upload_limit"):Weebly.Restrictions.accessValue("file_upload_limit"),s=Math.floor(o/1024e3);if(1===t.length){if(t[0].size>o){i.helper.reset(!0);var a=Weebly.Restrictions.isUpgradable("file_upload_limit");return a&&!isClientSite&&"video"!=e?(modalProFeatures(_W.tl("The maximum file upload size for your current plan is: ")+s+"MB. "+_W.tl("Please upgrade to upload larger files!"),"main",a),!1):(i.notifier.say({title:_W.tl("File too big"),body:_W.tl("The maximum file upload size is: .")+s+"MB",icon:"warning",zIndex:1e3,now:!0}),!1)}}else for(var l=!0,c=0;c<t.length;c++){if(t[c].size>o){var a=Weebly.Restrictions.isUpgradable("file_upload_limit");a&&!isClientSite&&"video"!=e?modalProFeatures(_W.tl("The maximum file upload size for your current plan is: ")+s+"MB. "+_W.tl("Please upgrade to upload larger files!"),"main",a):i.notifier.say({title:_W.tl("File too big"),body:_W.tl("The maximum file upload size is: ")+s+"MB",icon:"warning",zIndex:1e3,now:!0}),l=!1}if(!l)return i.helper.reset(!0),!1}return!0},prepareFiles:function(e,t){var i=r;t="undefined"!=typeof t?t:!1;var n,o=(new FileReader,e.contentArea),s=e.event,a=e.files;n=t&&!$("secondlist-blog").select("li").length?!1:i.dropEdge&&i.dropEdge.el||s.target.up("div.empty-message")||s.target.up("li.inside")||o.childNodes[0];var l=i.util.distill(a);if(1===Object.keys(l).length){var c={event:s,contentArea:o,sibling:n,files:{}};for(var u in l)switch(c.files=l[u],u){case"image":if(1===l[u].length)i.helper.valid("image",l[u])&&i.prepare.picture(c);else{var d=new Weebly.Dialog($("image-dnd-chooser"),{modal:!0,onClose:function(e){$("select-dnd-gallery").stopObserving("click"),$("select-dnd-slideshow").stopObserving("click"),e&&i.helper.resetStates(!0)}});$("select-dnd-gallery").observe("click",function(e){d.close(),i.prepare.photoGallery(c),e.preventDefault()}),$("select-dnd-slideshow").observe("click",function(e){d.close(),i.prepare.slideshow(c),e.preventDefault()}),d.open()}break;case"audio":i.prepare.audio(c);break;case"video":i.prepare.video(c);break;case"flash":i.prepare.flash(c);break;case"files":default:i.helper.resetStates(!0),i.notifier.say({title:_W.tl("Invalid File Type"),body:_W.tl("Sorry, this file type isn't supported to be uploaded."),icon:"warning",zIndex:1e3})}}else i.helper.resetStates(!0),a.length&&i.notifier.say({title:_W.tl("Invalid File Types"),body:_W.tl("Please only drag simliar files at a single time."),icon:"warning",zIndex:1e3})},reset:function(e){var t=r;n(),hideContentAreaSpotlights(),t.helper.resetStates(e)},resetStates:function(t){var i=r;jQuery("#secondlist").find(".wsite-initial-image-upload").removeClass("wsite-initial-image-upload"),t="undefined"!=typeof t?t:!1,t&&(i.dropEdge=null,e.removeMarker())},dnd:function(e,t){for(event in t)e.addEventListener(event,t[event],!1)},stageInvoke:function(t,i,n){var o=r,s={newElementPosition:o.util.getNewElementPosition(o.dropEdge),newInsideElement:void 0,newElement:void 0,newElementId:void 0,pageID:void 0},a=function(){var e=o.util.getElementByIndex(i,s.newElementPosition);s.newInsideElement=$("inside_"+e.page_element_id),s.newElement=s.newInsideElement.down("div.element"),s.newElementID=s.newElement.id,s.pageID=s.newInsideElement.getAttribute("id").replace(/inside_/,""),t(s)};e.makeOrMoveElement(jQuery(n),o.dropEdge).done(a),o.helper.reset(!0)},stageElement:function(e){var t;return t=document.createElement("div"),e.title=e.override_title||e.display_name,t.innerHTML=outputElement(e),t=t.childNodes[0],t.style.display="none",t}},util:{getElement:function(e){var t,i,n=Weebly.elementCache["default"],o=e.display_name.replace(/\s/,"<br/>");if(Weebly.dndElements&&Weebly.dndElements[e.display_name])return Weebly.dndElements[e.display_name];for(var s in n)if(n[s].category_name===e.category){t=n[s].elements;for(var r=0;r<t.length;r++)if(t[r].display_name===o){i=t[r];break}}return i},getElementByIndex:function(t,i){return e.serializeContentArea($(t.id)).elements[i]},getNewElementPosition:function(t){var i=jQuery(t.el),n=0;i.is(".wsite-multicol-col")?i=t.position===e.POSITION_LEFT?i.find("li").first():i.find("li").last():i.is(".wsite-multicol-li")&&t.position===e.POSITION_BOTTOM?i=i.find("li").last():(t.position===e.POSITION_LEFT||t.postiion===e.POSITION_RIGHT)&&n++;var o=i.closest(".weebly-area-active").find("li").index(i);return n+=o>=0?o:0,(t.position===e.POSITION_BOTTOM||t.position===e.POSITION_RIGHT)&&n++,n},distill:function(e,t){for(var i,n=r,o=n.regex,s={image:[],audio:[],video:[],flash:[],file:[]},a=0;a<e.length;a++)i=e[a],t?(o[t]&&o[t](i.type)||"file"===t&&/\./.test(i.name))&&s.file.push(i):o.image(i.type)?s.image.push(i):o.audio(i.type)?s.audio.push(i):o.video(i.type)?s.video.push(i):o.flash(i.type)?s.flash.push(i):s.file.push(i);for(var l in s)0===s[l].length&&delete s[l];return s}}},a={close:function(){var e=a;void 0!==e.dialog&&(e.dialog.close(),delete e.dialog)},open:function(e){var t=a,i=$("dnd-dropzone"),n="";switch(t.dialog=new Weebly.Dialog(i,{modal:!0,onClose:function(){Weebly.DragAndDrop.clearParameters()}}),i.className=e.type,e.type){case"gallery":n=_W.tl("gallery photos");break;case"audio":n=_W.tl("an audio file");break;case"image":n=_W.tl("a photo");break;case"file":n=_W.tl("a file");break;case"flash":n=_W.tl("a SWF file");break;default:n=e.type}i.select(".instructions .noun")[0].innerHTML=n,i.select("#dnd-dropzone-btn .noun")[0].innerHTML=n,Weebly.DragAndDrop.setParameters({ucfid:e.ucfid||"",ucfpid:e.ucfpid||"",type:e.type||"",areaName:e.areaName||"",areaPageID:e.areaPageID||"",areaType:e.areaType||"",height:e.height||"",size:e.size||""}),setupFileUploader({el:$("dnd-dropzone-content").down("#dnd-dropzone-btn"),zIndex:9999,type:e.type,ucfid:e.ucfid,ucfpid:e.ucfpid,areaName:e.areaName,areaPageID:e.areaPageID,areaType:e.areaType,height:e.height,size:e.size}),t.dialog.open(),(!isFlashInstalled()&&!Modernizr.touch||!isFlashInstalled()&&"video"==e.type)&&jQuery("#dnd-dropzone-btn").on("click",function(){showFlashWarning(_W.tl("Adobe Flash Player is required in order to upload files."))})}};e.Weebly.DragAndDrop=r,e.Weebly.DragAndDropDialog=a}(window),_wAMD.define("legacy/weebly_init_dnd",["legacy/weebly_hellos","legacy/weebly_elements","legacy/weebly_progress_bar","legacy/weebly_slideshow_admin","legacy/weebly_uploader_ajax_progress","legacy/weebly_restrictions","legacy/weebly_dialog","legacy/weebly_events","editor/dialogs/UploadVirusError"],function(e){return function(){var t;return t||e.Weebly.DragAndDrop}}(this)),function(e){function t(e){return r&&!r.test(e)?(1==s.length?alert('Please choose a "'+s[0]+'" file.'):alert("Please choose a file with one of the following extensions: \n"+s.join(", ")),!1):!0}function i(){n||(n=new Element("iframe",{frameBorder:0,style:"position:absolute;width:0;height:0;border:0",name:"plainUploadTarget"}),$(document.body).insert(n))}var n,o,s,r,a={},l=[];Weebly.PlainUploader=function(s){function r(){function r(){c=null,M.name=_.value,M.id=m,M.plainUploader=u,y.style.left="-99999px",$(document.body).insert(y),u.beforeQueued&&u.beforeQueued(M);var e=o||l.length;e&&(y._submit=d,l.unshift(y)),s.queued&&s.queued.call(u,M),e||d()}function d(){o=y,s.start&&s.start.call(u,M),y.action="fileUploadPlain.php?callback="+v+(u.parameters?"&"+Object.toQueryString(u.parameters):""),w.value=document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0],y.submit(),h()}function h(){}function p(){}function f(){o=null,p(),y.parentNode&&y.remove(),y._submit=null,e[v]=null,a[m]=null,l.length&&l.pop()._submit()}if(c){if(c.childNodes.length)return c;c.parentNode&&c.remove()}var m=Math.floor(10000001*Math.random()),g="plainUpload"+m,v="plainUploadCallback"+m,b=userID+"_"+m;$(document.body).insert("<form id='"+g+"' target='plainUploadTarget' method='post' enctype='multipart/form-data' "+"style='position:absolute;width:0;height:0;overflow:hidden;margin:0;padding:0'>"+"<input type='hidden' name='APC_UPLOAD_PROGRESS' value='"+b+"' />"+"<input type='hidden' name='cookies' />"+"<input type='file' name='Filedata' "+"style='position:absolute;top:-10px;right:-10px;font-size:150px;height:200px;margin:0;padding:0;"+"cursor:pointer;opacity:0;filter:alpha(opacity=0)' />"+"</form>");var y=$(g),w=$(y.childNodes[1]),_=$(y.childNodes[2]),M={};return _.observe("change",function(){var e=_.value;e&&t(e)&&r()}),e[v]=function(e){s.complete&&s.complete.call(u,M,e),f()},a[m]=function(){n.remove(),n=null,i(),f()},c=y,y}s=s||{};var c,u=this;u.show=function(e,t,i,n,o){e=$(e);var s=r();t||(t=document.body),t=$(t),s.parentNode!=t&&t.insert(s),s.style.zIndex="undefined"!=typeof i?i:"",o?s.observe("mouseout",u.hide):s.stopObserving("mouseout",u.hide);var a=s.getOffsetParent(),l=0,c=0;if(a!=e){var d=e.cumulativeOffset(),h=a.cumulativeOffset();l=d.top-h.top,c=d.left-h.left,n&&(l-=$("scroll_container").scrollTop,c-=$("scroll_container").scrollLeft)}s.setStyle({top:l+"px",left:c+"px",width:e.getWidth()+"px",height:e.getHeight()+2+"px"})},u.hide=function(){c&&(c.style.left="-99999px")},i()},e.plainUploaderFileTypes=function(e){e=e.toUpperCase().replace(/[\*\.]/g,""),e?(s=e.split(";"),r=new RegExp("\\.("+s.join("|")+")$","i")):s=r=null},e.cancelPlainUpload=function(e){var t=a[e];return t?(t(),!0):!1}}(window),_wAMD.define("legacy/weebly_uploader_plain",function(e){return function(){var t;return t||e.Weebly.PlainUploader}}(this));var swfu={},swfuCallbackGUID=0,swfuCallbacks={};Weebly.jQuery(window).on("message",handleVideoEncodingMessages);var MonitorEncoding=Class.create({initialize:function(e,t,i,n){this.id=e,this.qid=i,this.ucfid=t,this.video_name=n,this.timeoutID=window.setInterval(this.check.bind(this),5e3)},check:function(){new Ajax.Request(ajax,{parameters:{pos:"checkencoding",qid:this.qid,cookie:document.cookie},onSuccess:this.returnCheck.bind(this),bgRequest:!0})},returnCheck:function(e){if(e.responseText.match("processing:"))this.encoding||($("upload"+this.id).innerHTML="Encoding video... <br/><div style='height: 5px; overflow: hidden; background: #ccc; margin: 5px 0;'><div style='height: 5px; overflow: hidden; background: #777; width: 0px;' id='"+this.qid+"qprogress'></div></div>",this.length=.75*(e.responseText.split(":")[1]-5),this.encodingStarted=(new Date).getTime()/1e3,this.encodingTimeoutID=window.setInterval(this.updateProgress.bind(this),200),this.encoding=!0);else if(e.responseText.match("success")){if($("upload"+this.id).innerHTML="Video encoding finished!",$(this.ucfid))try{videoFileName=this.video_name.replace(/\.[^\.]+$/,".mp4"),imageFileName=this.video_name.replace(/\.[^\.]+$/,".jpg"),Weebly.Elements.currentElement&&Weebly.Elements.pfield[this.ucfid]?(Weebly.Elements.getPropertyByReference("<!IMAGEFILE!>").property_result=imageFileName,Weebly.Elements.getPropertyByReference("<!VIDEOFILE!>").property_result=videoFileName):(swfu.dontSave=1,updateList(currentPage),editorApp.vent.once("editorListUpdated",function(){swfu.dontSave=0}))}catch(t){}this.cleanup()}else e.responseText.match("failed")&&($("upload"+this.id).innerHTML="Video encoding failed. The uploaded file may be corrupted or may not be a supported video format.",this.cleanup())},updateProgress:function(){var e=(new Date).getTime()/1e3-this.encodingStarted;$(this.qid+"qprogress")&&e<this.length?$(this.qid+"qprogress").style.width=Math.ceil(180*(e/this.length))+"px":window.clearInterval(this.encodingTimeoutID)},cleanup:function(){removeProgressBox(this.id),window.clearInterval(this.timeoutID)}}),plainUploaderHash={};_wAMD.define("legacy/weebly_uploads",["legacy/weebly_elements","legacy/weebly_init_dnd","legacy/weebly_image_gallery","legacy/weebly_restrictions","legacy/weebly_linker","legacy/weebly_dialog","legacy/weebly_uploader_plain","editor/dialogs/UploadVirusError"],function(){}),window.rangy=function(){function e(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function t(e,t){return!("object"!=typeof e[t]||!e[t])}function i(e,t){return"undefined"!=typeof e[t]}function n(e){return function(t,i){for(var n=i.length;n--;)if(!e(t,i[n]))return!1;return!0}}function o(e){return e&&h(e,d)&&f(e,u)}function s(e){window.alert("Rangy not supported in your browser. Reason: "+e),m.initialized=!0,m.supported=!1}function r(){if(!m.initialized){var i,n=!1,r=!1;for(e(document,"createRange")&&(i=document.createRange(),h(i,c)&&f(i,l)&&(n=!0),i.detach()),(i=t(document,"body")?document.body:document.getElementsByTagName("body")[0])&&e(i,"createTextRange")&&(i=i.createTextRange(),o(i)&&(r=!0)),!n&&!r&&s("Neither Range nor TextRange are implemented"),m.initialized=!0,m.features={implementsDomRange:n,implementsTextRange:r},n=v.concat(g),r=0,i=n.length;i>r;++r)try{n[r](m)}catch(a){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",a)}}}function a(e){this.name=e,this.supported=this.initialized=!1}var l=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],c=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],u=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],d=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],h=n(e),p=n(t),f=n(i),m={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:i,areHostMethods:h,areHostObjects:p,areHostProperties:f,isTextRange:o},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};m.fail=s,m.warn=function(e){e="Rangy warning: "+e,m.config.alertOnWarn?window.alert(e):"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(e)},{}.hasOwnProperty?m.util.extend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}:s("hasOwnProperty not supported");var g=[],v=[];m.init=r,m.addInitListener=function(e){m.initialized?e(m):g.push(e)
};var b=[];m.addCreateMissingNativeApiListener=function(e){b.push(e)},m.createMissingNativeApi=function(e){e=e||window,r();for(var t=0,i=b.length;i>t;++t)b[t](e)},a.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},a.prototype.warn=function(e){m.warn("Module "+this.name+": "+e)},a.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)},m.createModule=function(e,t){var i=new a(e);m.modules[e]=i,v.push(function(e){t(e,i),i.initialized=!0,i.supported=!0})},m.requireModules=function(e){for(var t,i,n=0,o=e.length;o>n;++n){if(i=e[n],t=m.modules[i],!(t&&t instanceof a))throw Error("Module '"+i+"' not found");if(!t.supported)throw Error("Module '"+i+"' not supported")}};var y=!1;if(p=function(){y||(y=!0,m.initialized||r())},"undefined"==typeof window)s("No window found");else{if("undefined"!=typeof document)return e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",p,!1),e(window,"addEventListener")?window.addEventListener("load",p,!1):e(window,"attachEvent")?window.attachEvent("onload",p):s("Window does not have required addEventListener or attachEvent method"),m;s("No document found")}}(),rangy.createModule("DomUtil",function(e,t){function i(e){for(var t=0;e=e.previousSibling;)t++;return t}function n(e,t){var i,n=[];for(i=e;i;i=i.parentNode)n.push(i);for(i=t;i;i=i.parentNode)if(f(n,i))return i;return null}function o(e,t,i){for(i=i?e:e.parentNode;i;){if(e=i.parentNode,e===t)return i;i=e}return null}function s(e){return e=e.nodeType,3==e||4==e||8==e}function r(e,t){var i=t.nextSibling,n=t.parentNode;return i?n.insertBefore(e,i):n.appendChild(e),e}function a(e){if(9==e.nodeType)return e;if("undefined"!=typeof e.ownerDocument)return e.ownerDocument;if("undefined"!=typeof e.document)return e.document;if(e.parentNode)return a(e.parentNode);throw Error("getDocument: no document found for node")}function l(e){return e?s(e)?'"'+e.data+'"':1==e.nodeType?"<"+e.nodeName+(e.id?' id="'+e.id+'"':"")+">["+e.childNodes.length+"]":e.nodeName:"[No node]"}function c(e){this._next=this.root=e}function u(e,t){this.node=e,this.offset=t}function d(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var h=e.util;h.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),h.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var p=document.createElement("div");h.areHostMethods(p,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),h.isHostProperty(p,"innerHTML")||t.fail("Element is missing innerHTML property"),p=document.createTextNode("test"),h.areHostMethods(p,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var f=function(e,t){for(var i=e.length;i--;)if(e[i]===t)return!0;return!1};c.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t=this._current=this._next;if(this._current)if(e=t.firstChild)this._next=e;else{for(e=null;t!==this.root&&!(e=t.nextSibling);)t=t.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},u.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+l(this.node)+":"+this.offset+")]"}},d.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},d.prototype.toString=function(){return this.message},e.dom={arrayContains:f,isHtmlNamespace:function(e){var t;return"undefined"==typeof e.namespaceURI||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){return e=e.parentNode,1==e.nodeType?e:null},getNodeIndex:i,getNodeLength:function(e){var t;return s(e)?e.length:(t=e.childNodes)?t.length:0},getCommonAncestor:n,isAncestorOf:function(e,t,i){for(t=i?t:t.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},getClosestAncestorIn:o,isCharacterDataNode:s,insertAfter:r,splitDataNode:function(e,t){var i=e.cloneNode(!1);return i.deleteData(0,t),e.deleteData(t,e.length-t),r(i,e),i},getDocument:a,getWindow:function(e){if(e=a(e),"undefined"!=typeof e.defaultView)return e.defaultView;if("undefined"!=typeof e.parentWindow)return e.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(e){if("undefined"!=typeof e.contentWindow)return e.contentWindow;if("undefined"!=typeof e.contentDocument)return e.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(e){if("undefined"!=typeof e.contentDocument)return e.contentDocument;if("undefined"!=typeof e.contentWindow)return e.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(e){return h.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,s,r){var a;if(e==s)return t===r?0:r>t?-1:1;if(a=o(s,e,!0))return t<=i(a)?-1:1;if(a=o(e,s,!0))return i(a)<r?-1:1;if(t=n(e,s),e=e===t?t:o(e,t,!0),s=s===t?t:o(s,t,!0),e===s)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(t=t.firstChild;t;){if(t===e)return-1;if(t===s)return 1;t=t.nextSibling}throw Error("Should not be here!")},inspectNode:l,fragmentFromNodeChildren:function(e){for(var t,i=a(e).createDocumentFragment();t=e.firstChild;)i.appendChild(t);return i},createIterator:function(e){return new c(e)},DomPosition:u},e.DOMException=d}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(O.isAncestorOf(e,t.startContainer,!0)||O.isAncestorOf(e,t.endContainer,!0))}function i(e){return O.getDocument(e.startContainer)}function n(e,t,i){if(t=e._listeners[t])for(var n=0,o=t.length;o>n;++n)t[n].call(e,{target:e,args:i})}function o(e){return new F(e.parentNode,O.getNodeIndex(e))}function s(e){return new F(e.parentNode,O.getNodeIndex(e)+1)}function r(e,t,i){var n=11==e.nodeType?e.firstChild:e;return O.isCharacterDataNode(t)?i==t.length?O.insertAfter(e,t):t.parentNode.insertBefore(e,0==i?t:O.splitDataNode(t,i)):i>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[i]),n}function a(e){for(var t,n,o=i(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(t=e.getSubtreeIterator(),n.appendChild(a(t)),t.detach(!0)),10==n.nodeType)throw new W("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function l(e,t,i){var n,o;for(i=i||{stop:!1};n=e.next();)if(e.isPartiallySelectedSubtree()){if(t(n)===!1)return i.stop=!0,void 0;if(n=e.getSubtreeIterator(),l(n,t,i),n.detach(!0),i.stop)return}else for(n=O.createIterator(n);o=n.next();)if(t(o)===!1)return i.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function u(e){for(var t,n,o=i(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(u(n)),n.detach(!0)):e.remove(),10==t.nodeType)throw new W("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function d(e,t,i){var n,o=!(!t||!t.length),s=!!i;o&&(n=RegExp("^("+t.join("|")+")$"));var r=[];return l(new p(e,!1),function(e){o&&!n.test(e.nodeType)||s&&!i(e)||r.push(e)}),r}function h(e){return"["+("undefined"==typeof e.getName?"Range":e.getName())+"("+O.inspectNode(e.startContainer)+":"+e.startOffset+", "+O.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var i=e.commonAncestorContainer;this.sc===this.ec&&O.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||O.isCharacterDataNode(this.sc)?O.getClosestAncestorIn(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||O.isCharacterDataNode(this.ec)?O.getClosestAncestorIn(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function f(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,i){this.nodes=d(e,t,i),this._next=this.nodes[0],this._position=0}function g(e){return function(t,i){for(var n,o=i?t:t.parentNode;o;){if(n=o.nodeType,O.arrayContains(e,n))return o;o=o.parentNode}return null}}function v(e,t){if(j(e,t))throw new f("INVALID_NODE_TYPE_ERR")}function b(e){if(!e.startContainer)throw new W("INVALID_STATE_ERR")}function y(e,t){if(!O.arrayContains(t,e.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function w(e,t){if(0>t||t>(O.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new W("INDEX_SIZE_ERR")}function _(e,t){if(q(e,!0)!==q(t,!0))throw new W("WRONG_DOCUMENT_ERR")}function M(e){if(V(e,!0))throw new W("NO_MODIFICATION_ALLOWED_ERR")}function C(e,t){if(!e)throw new W(t)}function x(e){return!!e.startContainer&&!!e.endContainer&&!(!O.arrayContains(N,e.startContainer.nodeType)&&!q(e.startContainer,!0))&&!(!O.arrayContains(N,e.endContainer.nodeType)&&!q(e.endContainer,!0))&&e.startOffset<=(O.isCharacterDataNode(e.startContainer)?e.startContainer.length:e.startContainer.childNodes.length)&&e.endOffset<=(O.isCharacterDataNode(e.endContainer)?e.endContainer.length:e.endContainer.childNodes.length)}function k(e){if(b(e),!x(e))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function S(){}function T(e){e.START_TO_START=X,e.START_TO_END=J,e.END_TO_END=K,e.END_TO_START=Q,e.NODE_BEFORE=Z,e.NODE_AFTER=et,e.NODE_BEFORE_AND_AFTER=tt,e.NODE_INSIDE=it}function A(e){T(e),T(e.prototype)}function D(e,t){return function(){k(this);var i=this.startContainer,n=this.startOffset,o=this.commonAncestorContainer,r=new p(this,!0);return i!==o&&(i=O.getClosestAncestorIn(i,o,!0),n=s(i),i=n.node,n=n.offset),l(r,M),r.reset(),o=e(r),r.detach(),t(this,i,n,i,n),o}}function E(i,n,r){function a(e,t){return function(i){b(this),y(i,I),y(H(i),N),i=(e?o:s)(i),(t?l:d)(this,i.node,i.offset)}}function l(e,t,i){var o=e.endContainer,s=e.endOffset;(t!==e.startContainer||i!==e.startOffset)&&((H(t)!=H(o)||1==O.comparePoints(t,i,o,s))&&(o=t,s=i),n(e,t,i,o,s))}function d(e,t,i){var o=e.startContainer,s=e.startOffset;(t!==e.endContainer||i!==e.endOffset)&&((H(t)!=H(o)||-1==O.comparePoints(t,i,o,s))&&(o=t,s=i),n(e,o,s,t,i))}i.prototype=new S,e.util.extend(i.prototype,{setStart:function(e,t){b(this),v(e,!0),w(e,t),l(this,e,t)},setEnd:function(e,t){b(this),v(e,!0),w(e,t),d(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){k(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){b(this),v(e,!0),n(this,e,0,e,O.getNodeLength(e))},selectNode:function(e){b(this),v(e,!1),y(e,I);var t=o(e);e=s(e),n(this,t.node,t.offset,e.node,e.offset)},extractContents:D(u,n),deleteContents:D(c,n),canSurroundContents:function(){k(this),M(this.startContainer),M(this.endContainer);var e=new p(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},detach:function(){r(this)},splitBoundaries:function(){k(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,s=e===i;O.isCharacterDataNode(i)&&o>0&&o<i.length&&O.splitDataNode(i,o),O.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=O.splitDataNode(e,t),s?(o-=t,i=e):i==e.parentNode&&o>=O.getNodeIndex(e)&&o++,t=0),n(this,e,t,i,o)},normalizeBoundaries:function(){k(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,o=this.endOffset,s=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},r=function(n){var s=n.previousSibling;if(s&&s.nodeType==n.nodeType){e=n;var r=n.length;t=s.length,n.insertData(0,s.data),s.parentNode.removeChild(s),e==i?(o+=t,i=e):i==n.parentNode&&(s=O.getNodeIndex(n),o==s?(i=n,o=r):o>s&&o--)}},a=!0;O.isCharacterDataNode(i)?i.length==o&&s(i):(o>0&&(a=i.childNodes[o-1])&&O.isCharacterDataNode(a)&&s(a),a=!this.collapsed),a?O.isCharacterDataNode(e)?0==t&&r(e):t<e.childNodes.length&&(s=e.childNodes[t])&&O.isCharacterDataNode(s)&&r(s):(e=i,t=o),n(this,e,t,i,o)},collapseToPoint:function(e,t){b(this),v(e,!0),w(e,t),(e!==this.startContainer||t!==this.startOffset||e!==this.endContainer||t!==this.endOffset)&&n(this,e,t,e,t)}}),A(i)}function P(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:O.getCommonAncestor(e.startContainer,e.endContainer)}function R(e,t,i,o,s){var r=e.startContainer!==t||e.startOffset!==i,a=e.endContainer!==o||e.endOffset!==s;e.startContainer=t,e.startOffset=i,e.endContainer=o,e.endOffset=s,P(e),n(e,"boundarychange",{startMoved:r,endMoved:a})}function z(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},P(this)}e.requireModules(["DomUtil"]);var O=e.dom,F=O.DomPosition,W=e.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,O.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,i=this._current;!O.isCharacterDataNode(i)||i!==this.sc&&i!==this.ec?i.parentNode&&i.parentNode.removeChild(i):(e=i===this.sc?this.so:0,t=i===this.ec?this.eo:i.length,e!=t&&i.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new z(i(this.range));var t=this._current,n=t,o=0,s=t,r=O.getNodeLength(t);O.isAncestorOf(t,this.sc,!0)&&(n=this.sc,o=this.so),O.isAncestorOf(t,this.ec,!0)&&(s=this.ec,r=this.eo),R(e,n,o,s,r)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var I=[1,3,4,5,7,8,10],N=[2,9,11],L=[1,3,4,5,7,8,10,11],B=[1,3,4,5,7,8],H=O.getRootContainer,q=g([9,11]),V=g([5,6,10,12]),j=g([6,10,12]),$=document.createElement("style"),U=!1;try{$.innerHTML="<b>x</b>",U=3==$.firstChild.nodeType}catch(Y){}e.features.htmlParsingConforms=U;var G=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],X=0,J=1,K=2,Q=3,Z=0,et=1,tt=2,it=3;S.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){k(this),_(this.startContainer,t.startContainer);var i=e==Q||e==X?"start":"end",n=e==J||e==X?"start":"end";return O.comparePoints(this[i+"Container"],this[i+"Offset"],t[n+"Container"],t[n+"Offset"])},insertNode:function(e){if(k(this),y(e,L),M(this.startContainer),O.isAncestorOf(e,this.startContainer,!0))throw new W("HIERARCHY_REQUEST_ERR");this.setStartBefore(r(e,this.startContainer,this.startOffset))},cloneContents:function(){k(this);var e,t;return this.collapsed?i(this).createDocumentFragment():this.startContainer===this.endContainer&&O.isCharacterDataNode(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=i(this).createDocumentFragment(),t.appendChild(e),t):(t=new p(this,!0),e=a(t),t.detach(),e)},canSurroundContents:function(){k(this),M(this.startContainer),M(this.endContainer);var e=new p(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},surroundContents:function(e){if(y(e,B),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);r(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){k(this);for(var e,t=new z(i(this)),n=G.length;n--;)e=G[n],t[e]=this[e];return t},toString:function(){k(this);var e=this.startContainer;if(e===this.endContainer&&O.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[];return e=new p(this,!0),l(e,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),e.detach(),t.join("")},compareNode:function(e){k(this);var t=e.parentNode,i=O.getNodeIndex(e);if(!t)throw new W("NOT_FOUND_ERR");return e=this.comparePoint(t,i),t=this.comparePoint(t,i+1),0>e?t>0?tt:Z:t>0?et:it},comparePoint:function(e,t){return k(this),C(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),O.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:O.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:U?function(e){var t=this.startContainer,i=O.getDocument(t);if(!t)throw new W("INVALID_STATE_ERR");var n=null;return 1==t.nodeType?n=t:O.isCharacterDataNode(t)&&(n=O.parentElement(t)),n=null===n||"HTML"==n.nodeName&&O.isHtmlNamespace(O.getDocument(n).documentElement)&&O.isHtmlNamespace(n)?i.createElement("body"):n.cloneNode(!1),n.innerHTML=e,O.fragmentFromNodeChildren(n)}:function(e){b(this);var t=i(this).createElement("body");return t.innerHTML=e,O.fragmentFromNodeChildren(t)},toHtml:function(){k(this);var e=i(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(k(this),C(e,"NOT_FOUND_ERR"),O.getDocument(e)!==i(this))return!1;var n=e.parentNode,o=O.getNodeIndex(e);C(n,"NOT_FOUND_ERR");var s=O.comparePoints(n,o,this.endContainer,this.endOffset);return n=O.comparePoints(n,o+1,this.startContainer,this.startOffset),t?0>=s&&n>=0:0>s&&n>0},isPointInRange:function(e,t){return k(this),C(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),O.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&O.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(k(this),i(e)!=i(this))throw new W("WRONG_DOCUMENT_ERR");var n=O.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),o=O.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=n&&o>=0:0>n&&o>0},intersection:function(e){if(this.intersectsRange(e)){var t=O.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),i=O.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),n=this.cloneRange();return-1==t&&n.setStart(e.startContainer,e.startOffset),1==i&&n.setEnd(e.endContainer,e.endOffset),n}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==O.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==O.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new f("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==it},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,O.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var i=t.getNodes([3]);return i.length>0?(t.setStart(i[0],0),e=i.pop(),t.setEnd(e,e.length),e=this.containsRange(t),t.detach(),e):this.containsNodeContents(e)},createNodeIterator:function(e,t){return k(this),new m(this,e,t)},getNodes:function(e,t){return k(this),d(this,e,t)},getDocument:function(){return i(this)},collapseBefore:function(e){b(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){b(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return z.rangesEqual(this,e)},isValid:function(){return x(this)},inspect:function(){return h(this)}},E(z,R,function(e){b(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,n(e,"detach",null),e._listeners=null}),e.rangePrototype=S.prototype,z.rangeProperties=G,z.RangeIterator=p,z.copyComparisonConstants=A,z.createPrototypeRange=E,z.inspect=h,z.getRangeDocument=i,z.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=z,e.RangeException=f}),rangy.createModule("WrappedRange",function(e){function t(e,t,i,n){var r=e.duplicate();r.collapse(i);var a=r.parentElement();if(o.isAncestorOf(t,a,!0)||(a=t),!a.canHaveHTML)return new s(a.parentNode,o.getNodeIndex(a));t=o.getDocument(a).createElement("span");var l,c=i?"StartToStart":"StartToEnd";do a.insertBefore(t,t.previousSibling),r.moveToElementText(t);while((l=r.compareEndPoints(c,e))>0&&t.previousSibling);if(c=t.nextSibling,-1==l&&c&&o.isCharacterDataNode(c)){if(r.setEndPoint(i?"EndToStart":"EndToEnd",e),/[\r\n]/.test(c.data))for(a=r.duplicate(),i=a.text.replace(/\r\n/g,"\r").length,i=a.moveStart("character",i);-1==a.compareEndPoints("StartToEnd",a);)i++,a.moveStart("character",1);else i=r.text.length;a=new s(c,i)}else c=(n||!i)&&t.previousSibling,a=(i=(n||i)&&t.nextSibling)&&o.isCharacterDataNode(i)?new s(i,0):c&&o.isCharacterDataNode(c)?new s(c,c.length):new s(a,o.getNodeIndex(t));return t.parentNode.removeChild(t),a}function i(e,t){var i,n,s=e.offset,r=o.getDocument(e.node),a=r.body.createTextRange(),l=o.isCharacterDataNode(e.node);return l?(i=e.node,n=i.parentNode):(i=e.node.childNodes,i=s<i.length?i[s]:null,n=e.node),r=r.createElement("span"),r.innerHTML="&#feff;",i?n.insertBefore(r,i):n.appendChild(r),a.moveToElementText(r),a.collapse(!t),n.removeChild(r),l&&a[t?"moveStart":"moveEnd"]("character",s),a}e.requireModules(["DomUtil","DomRange"]);var n,o=e.dom,s=o.DomPosition,r=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){n=function(e){this.textRange=e,this.refresh()},n.prototype=new r(document),n.prototype.refresh=function(){var e,i,n=this.textRange;e=n.parentElement();var s=n.duplicate();s.collapse(!0),i=s.parentElement(),s=n.duplicate(),s.collapse(!1),n=s.parentElement(),i=i==n?i:o.getCommonAncestor(i,n),i=i==e?i:o.getCommonAncestor(e,i),0==this.textRange.compareEndPoints("StartToEnd",this.textRange)?i=e=t(this.textRange,i,!0,!0):(e=t(this.textRange,i,!0,!1),i=t(this.textRange,i,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(i.node,i.offset)},r.copyComparisonConstants(n);var a=function(){return this}();"undefined"==typeof a.Range&&(a.Range=n),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,i=l.length;i--;)t=l[i],e[t]=e.nativeRange[t]}var i,s,a,l=r.rangeProperties;n=function(e){if(!e)throw Error("Range must be specified");this.nativeRange=e,t(this)},r.createPrototypeRange(n,function(e,t,i,n,o){var s=e.endContainer!==n||e.endOffset!=o;(e.startContainer!==t||e.startOffset!=i||s)&&(e.setEnd(n,o),e.setStart(t,i))},function(e){e.nativeRange.detach(),e.detached=!0;for(var t,i=l.length;i--;)t=l[i],e[t]=null}),i=n.prototype,i.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},i.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},i.cloneContents=function(){return this.nativeRange.cloneContents()},i.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},i.collapse=function(e){this.nativeRange.collapse(e),t(this)},i.cloneRange=function(){return new n(this.nativeRange.cloneRange())},i.refresh=function(){t(this)},i.toString=function(){return this.nativeRange.toString()};var c=document.createTextNode("test");o.getBody(document).appendChild(c);var u=document.createRange();u.setStart(c,0),u.setEnd(c,0);try{u.setStart(c,1),s=!0,i.setStart=function(e,i){this.nativeRange.setStart(e,i),t(this)},i.setEnd=function(e,i){this.nativeRange.setEnd(e,i),t(this)},a=function(e){return function(i){this.nativeRange[e](i),t(this)}}}catch(d){s=!1,i.setStart=function(e,i){try{this.nativeRange.setStart(e,i)}catch(n){this.nativeRange.setEnd(e,i),this.nativeRange.setStart(e,i)}t(this)},i.setEnd=function(e,i){try{this.nativeRange.setEnd(e,i)}catch(n){this.nativeRange.setStart(e,i),this.nativeRange.setEnd(e,i)}t(this)},a=function(e,i){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[i](n),this.nativeRange[e](n)}t(this)}}}i.setStartBefore=a("setStartBefore","setEndBefore"),i.setStartAfter=a("setStartAfter","setEndAfter"),i.setEndBefore=a("setEndBefore","setStartBefore"),i.setEndAfter=a("setEndAfter","setStartAfter"),u.selectNodeContents(c),i.selectNodeContents=u.startContainer==c&&u.endContainer==c&&0==u.startOffset&&u.endOffset==c.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,r.getEndOffset(e))},u.selectNodeContents(c),u.setEnd(c,3),s=document.createRange(),s.selectNodeContents(c),s.setEnd(c,4),s.setStart(c,2),i.compareBoundaryPoints=-1==u.compareBoundaryPoints(u.START_TO_END,s)&1==u.compareBoundaryPoints(u.END_TO_START,s)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(u,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),o.getBody(document).removeChild(c),u.detach(),s.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(n.rangeToTextRange=function(e){if(e.collapsed)return i(new s(e.startContainer,e.startOffset),!0);var t=i(new s(e.startContainer,e.startOffset),!0),n=i(new s(e.endContainer,e.endOffset),!1);return e=o.getDocument(e.startContainer).body.createTextRange(),e.setEndPoint("StartToStart",t),e.setEndPoint("EndToEnd",n),e}),n.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createRange=function(t){return t=t||document,new n(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new r(e)},e.createIframeRange=function(t){return e.createRange(o.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(o.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){t=t.document,"undefined"==typeof t.createRange&&(t.createRange=function(){return e.createRange(this)}),t=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function i(e){return(e||window).getSelection()}function n(e){return(e||window).document.selection}function o(e,t,i){var n=i?"end":"start";i=i?"start":"end",e.anchorNode=t[n+"Container"],e.anchorOffset=t[n+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function r(t){var i;return t instanceof y?(i=t._selectionNativeRange,i||(i=e.createNativeRange(v.getDocument(t.startContainer)),i.setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=i,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof w?i=t.nativeRange:e.features.implementsDomRange&&t instanceof v.getWindow(t.startContainer).Range&&(i=t),i}function a(e){var t,i=e.getNodes();e:if(i.length&&1==i[0].nodeType){t=1;for(var n=i.length;n>t;++t)if(!v.isAncestorOf(i[0],i[t])){t=!1;break e}t=!0}else t=!1;if(!t)throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return i[0]}function l(e,t){var i=new w(t);e._ranges=[i],o(e,i,!1),e.rangeCount=1,e.isCollapsed=i.collapsed}function c(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var i=t.docSelection.createRange();if(i&&"undefined"!=typeof i.text)l(t,i);else{t.rangeCount=i.length;for(var n,r=v.getDocument(i.item(0)),a=0;a<t.rangeCount;++a)n=e.createRange(r),n.selectNode(i.item(a)),t._ranges.push(n);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,o(t,t._ranges[t.rangeCount-1],!1)}}}function u(e,t){var i=e.docSelection.createRange(),n=a(t),o=v.getDocument(i.item(0));o=v.getBody(o).createControlRange();for(var s=0,r=i.length;r>s;++s)o.add(i.item(s));try{o.add(n)}catch(l){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),c(e)}function d(e,t,i){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=i,this.refresh()}function h(e,t){var i=v.getDocument(t[0].startContainer);i=v.getBody(i).createControlRange();for(var n,o=0;rangeCount>o;++o){n=a(t[o]);try{i.add(n)}catch(s){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),c(e)}function p(e,t){if(e.anchorNode&&v.getDocument(e.anchorNode)!==v.getDocument(t))throw new _("WRONG_DOCUMENT_ERR")}function f(e){var t=[],i=new M(e.anchorNode,e.anchorOffset),n=new M(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var s=0,r=e.rangeCount;r>s;++s)t[s]=y.inspect(e.getRangeAt(s));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+i.inspect()+", focus: "+n.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var m,g,v=e.dom,b=e.util,y=e.DomRange,w=e.WrappedRange,_=e.DOMException,M=v.DomPosition,C=e.util.isHostMethod(window,"getSelection"),x=e.util.isHostObject(document,"selection"),k=x&&(!C||e.config.preferTextRange);k?(m=n,e.isSelectionValid=function(e){e=(e||window).document;var t=e.selection;return"None"!=t.type||v.getDocument(t.createRange().parentElement())==e}):C?(m=i,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=m,C=m();var S=e.createNativeRange(document),T=v.getBody(document),A=b.areHostObjects(C,b.areHostProperties(C,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=A;var D=b.isHostMethod(C,"extend");e.features.selectionHasExtend=D;var E="number"==typeof C.rangeCount;e.features.selectionHasRangeCount=E;var P=!1,R=!0;b.areHostMethods(C,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof C.rangeCount&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");e.frameBorder=0,e.style.position="absolute",e.style.left="-10000px",T.appendChild(e);var t=v.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var i=v.getIframeWindow(e).getSelection(),n=t.documentElement.lastChild.firstChild;t=t.createRange(),t.setStart(n,1),t.collapse(!0),i.addRange(t),R=1==i.rangeCount,i.removeAllRanges();var o=t.cloneRange();t.setStart(n,0),o.setEnd(n,2),i.addRange(t),i.addRange(o),P=2==i.rangeCount,t.detach(),o.detach(),T.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=P,e.features.collapsedNonEditableSelectionsSupported=R;var z,O=!1;T&&b.isHostMethod(T,"createControlRange")&&(z=T.createControlRange(),b.areHostProperties(z,["item","add"])&&(O=!0)),e.features.implementsControlRange=O,g=A?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset
}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var F;if(b.isHostMethod(C,"getRangeAt")?F=function(e,t){try{return e.getRangeAt(t)}catch(i){return null}}:A&&(F=function(t){var i=v.getDocument(t.anchorNode);return i=e.createRange(i),i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)),i}),e.getSelection=function(e){e=e||window;var t=e._rangySelection,i=m(e),o=x?n(e):null;return t?(t.nativeSelection=i,t.docSelection=o,t.refresh(e)):(t=new d(i,o,e),e._rangySelection=t),t},e.getIframeSelection=function(t){return e.getSelection(v.getIframeWindow(t))},z=d.prototype,!k&&A&&b.areHostMethods(C,["removeAllRanges","addRange"])){z.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var W=function(t,i){var n=y.getRangeDocument(i);n=e.createRange(n),n.collapseToPoint(i.endContainer,i.endOffset),t.nativeSelection.addRange(r(n)),t.nativeSelection.extend(i.startContainer,i.startOffset),t.refresh()};z.addRange=E?function(t,i){if(O&&x&&"Control"==this.docSelection.type)u(this,t);else if(i&&D)W(this,t);else{var n;P?n=this.rangeCount:(this.removeAllRanges(),n=0),this.nativeSelection.addRange(r(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1?(e.config.checkSelectionRanges&&(n=F(this.nativeSelection,this.rangeCount-1))&&!y.rangesEqual(n,t)&&(t=new w(n)),this._ranges[this.rangeCount-1]=t,o(this,t,L(this.nativeSelection)),this.isCollapsed=g(this)):this.refresh()}}:function(e,t){t&&D?W(this,e):(this.nativeSelection.addRange(r(e)),this.refresh())},z.setRanges=function(e){if(O&&e.length>1)h(this,e);else{this.removeAllRanges();for(var t=0,i=e.length;i>t;++t)this.addRange(e[t])}}}else{if(!(b.isHostMethod(C,"empty")&&b.isHostMethod(S,"select")&&O&&k))return t.fail("No means of selecting a Range or TextRange was found"),!1;z.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=v.getDocument(this.anchorNode);else if("Control"==this.docSelection.type){var t=this.docSelection.createRange();t.length&&(e=v.getDocument(t.item(0)).body.createTextRange())}e&&(e.body.createTextRange().select(),this.docSelection.empty())}}catch(i){}s(this)},z.addRange=function(e){"Control"==this.docSelection.type?u(this,e):(w.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,e,!1))},z.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?h(this,e):t&&this.addRange(e[0])}}z.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new _("INDEX_SIZE_ERR");return this._ranges[e]};var I;if(k)I=function(t){var i;e.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=v.getBody(t.win.document).createTextRange(),i.collapse(!0)),"Control"==t.docSelection.type?c(t):i&&"undefined"!=typeof i.text?l(t,i):s(t)};else if(b.isHostMethod(C,"getRangeAt")&&"number"==typeof C.rangeCount)I=function(t){if(O&&x&&"Control"==t.docSelection.type)c(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,n=t.rangeCount;n>i;++i)t._ranges[i]=new e.WrappedRange(t.nativeSelection.getRangeAt(i));o(t,t._ranges[t.rangeCount-1],L(t.nativeSelection)),t.isCollapsed=g(t)}else s(t)};else{if(!A||"boolean"!=typeof C.isCollapsed||"boolean"!=typeof S.collapsed||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;I=function(e){var t;t=e.nativeSelection,t.anchorNode?(t=F(t,0),e._ranges=[t],e.rangeCount=1,t=e.nativeSelection,e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset,e.isCollapsed=g(e)):s(e)}}z.refresh=function(e){var t=e?this._ranges.slice(0):null;if(I(this),e){if(e=t.length,e!=this._ranges.length)return!1;for(;e--;)if(!y.rangesEqual(t[e],this._ranges[e]))return!1;return!0}};var N=function(e,t){var i=e.getAllRanges(),n=!1;e.removeAllRanges();for(var o=0,r=i.length;r>o;++o)n||t!==i[o]?e.addRange(i[o]):n=!0;e.rangeCount||s(e)};z.removeRange=O?function(e){if("Control"==this.docSelection.type){var t=this.docSelection.createRange();e=a(e);var i=v.getDocument(t.item(0));i=v.getBody(i).createControlRange();for(var n,o=!1,s=0,r=t.length;r>s;++s)n=t.item(s),n!==e||o?i.add(t.item(s)):o=!0;i.select(),c(this)}else N(this,e)}:function(e){N(this,e)};var L;!k&&A&&e.features.implementsDomRange?(L=function(e){var t=!1;return e.anchorNode&&(t=1==v.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},z.isBackwards=function(){return L(this)}):L=z.isBackwards=function(){return!1},z.toString=function(){for(var e=[],t=0,i=this.rangeCount;i>t;++t)e[t]=""+this._ranges[t];return e.join("")},z.collapse=function(t,i){p(this,t);var n=e.createRange(v.getDocument(t));n.collapseToPoint(t,i),this.removeAllRanges(),this.addRange(n),this.isCollapsed=!0},z.collapseToStart=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},z.collapseToEnd=function(){if(!this.rangeCount)throw new _("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},z.selectAllChildren=function(t){p(this,t);var i=e.createRange(v.getDocument(t));i.selectNodeContents(t),this.removeAllRanges(),this.addRange(i)},z.deleteFromDocument=function(){if(O&&x&&"Control"==this.docSelection.type){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){t=this.getAllRanges(),this.removeAllRanges(),e=0;for(var i=t.length;i>e;++e)t[e].deleteContents();this.addRange(t[i-1])}},z.getAllRanges=function(){return this._ranges.slice(0)},z.setSingleRange=function(e){this.setRanges([e])},z.containsNode=function(e,t){for(var i=0,n=this._ranges.length;n>i;++i)if(this._ranges[i].containsNode(e,t))return!0;return!1},z.toHtml=function(){var e="";if(this.rangeCount){e=y.getRangeDocument(this._ranges[0]).createElement("div");for(var t=0,i=this._ranges.length;i>t;++t)e.appendChild(this._ranges[t].cloneContents());e=e.innerHTML}return e},z.getName=function(){return"WrappedSelection"},z.inspect=function(){return f(this)},z.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},d.inspect=f,e.Selection=d,e.selectionPrototype=z,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})}),_wAMD.define("legacy/rangy-1.2.3/rangy-core",function(){}),rangy.createModule("SaveRestore",function(e,t){function i(e,t){var i,n="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=r.getDocument(e.startContainer),s=e.cloneRange();return s.collapse(t),i=o.createElement("span"),i.id=n,i.style.lineHeight="0",i.style.display="none",i.className="rangySelectionBoundary",i.appendChild(o.createTextNode(a)),s.insertNode(i),s.detach(),i}function n(e,i,n,o){(e=(e||document).getElementById(n))?(i[o?"setStartBefore":"setEndBefore"](e),e.parentNode.removeChild(e)):t.warn("Marker element has been removed. Cannot restore selection.")}function o(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function s(e,t){var i=(e||document).getElementById(t);i&&i.parentNode.removeChild(i)}e.requireModules(["DomUtil","DomRange","WrappedRange"]);var r=e.dom,a="﻿";e.saveSelection=function(n){n=n||window;var s=n.document;if(e.isSelectionValid(n)){var r,a,l=e.getSelection(n),c=l.getAllRanges(),u=[];c.sort(o);for(var d=0,h=c.length;h>d;++d)r=c[d],r.collapsed?(a=i(r,!1),u.push({markerId:a.id,collapsed:!0})):(a=i(r,!1),r=i(r,!0),u[d]={startMarkerId:r.id,endMarkerId:a.id,collapsed:!1,backwards:1==c.length&&l.isBackwards()});for(d=h-1;d>=0;--d)r=c[d],r.collapsed?r.collapseBefore((s||document).getElementById(u[d].markerId)):(r.setEndBefore((s||document).getElementById(u[d].endMarkerId)),r.setStartAfter((s||document).getElementById(u[d].startMarkerId)));return l.setRanges(c),{win:n,doc:s,rangeInfos:u,restored:!1}}t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.")},e.restoreSelection=function(i,o){if(!i.restored){for(var s,r,a=i.rangeInfos,l=e.getSelection(i.win),c=[],u=a.length,d=u-1;d>=0;--d){if(s=a[d],r=e.createRange(i.doc),s.collapsed)if(s=(i.doc||document).getElementById(s.markerId)){s.style.display="inline";var h=s.previousSibling;h&&3==h.nodeType?(s.parentNode.removeChild(s),r.collapseToPoint(h,h.length)):(r.collapseBefore(s),s.parentNode.removeChild(s))}else t.warn("Marker element has been removed. Cannot restore selection.");else n(i.doc,r,s.startMarkerId,!0),n(i.doc,r,s.endMarkerId,!1);1==u&&r.normalizeBoundaries(),c[d]=r}1==u&&o&&e.features.selectionHasExtend&&a[0].backwards?(l.removeAllRanges(),l.addRange(c[0],!0)):l.setRanges(c),i.restored=!0}},e.removeMarkerElement=s,e.removeMarkers=function(e){for(var t,i=e.rangeInfos,n=0,o=i.length;o>n;++n)t=i[n],t.collapsed?s(e.doc,t.markerId):(s(e.doc,t.startMarkerId),s(e.doc,t.endMarkerId))}}),_wAMD.define("legacy/rangy-1.2.3/rangy-selectionsaverestore",["legacy/rangy-1.2.3/rangy-core"],function(){}),window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var i=e.charAt(1);return t=d[i],t?t:i>="0"&&"7">=i?parseInt(e.substring(1),8):"u"===i||"x"===i?parseInt(e.substring(2),16):e.charCodeAt(1)}function i(e){if(32>e)return(16>e?"\\x0":"\\x")+e.toString(16);var t=String.fromCharCode(e);return("\\"===t||"-"===t||"["===t||"]"===t)&&(t="\\"+t),t}function n(e){for(var n=e.substring(1,e.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g")),o=[],s=[],r="^"===n[0],a=r?1:0,l=n.length;l>a;++a){var c=n[a];if(/\\[bdsw]/i.test(c))o.push(c);else{var u,d=t(c);l>a+2&&"-"===n[a+1]?(u=t(n[a+2]),a+=2):u=d,s.push([d,u]),65>u||d>122||(65>u||d>90||s.push([32|Math.max(65,d),32|Math.min(u,90)]),97>u||d>122||s.push([-33&Math.max(97,d),-33&Math.min(u,122)]))}}s.sort(function(e,t){return e[0]-t[0]||t[1]-e[1]});for(var h=[],p=[0/0,0/0],a=0;a<s.length;++a){var f=s[a];f[0]<=p[1]+1?p[1]=Math.max(p[1],f[1]):h.push(p=f)}var m=["["];r&&m.push("^"),m.push.apply(m,o);for(var a=0;a<h.length;++a){var f=h[a];m.push(i(f[0])),f[1]>f[0]&&(f[1]+1>f[0]&&m.push("-"),m.push(i(f[1])))}return m.push("]"),m.join("")}function o(e){for(var t=e.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g")),i=t.length,o=[],a=0,l=0;i>a;++a){var c=t[a];if("("===c)++l;else if("\\"===c.charAt(0)){var u=+c.substring(1);u&&l>=u&&(o[u]=-1)}}for(var a=1;a<o.length;++a)-1===o[a]&&(o[a]=++s);for(var a=0,l=0;i>a;++a){var c=t[a];if("("===c)++l,void 0===o[l]&&(t[a]="(?:");else if("\\"===c.charAt(0)){var u=+c.substring(1);u&&l>=u&&(t[a]="\\"+o[l])}}for(var a=0,l=0;i>a;++a)"^"===t[a]&&"^"!==t[a+1]&&(t[a]="");if(e.ignoreCase&&r)for(var a=0;i>a;++a){var c=t[a],d=c.charAt(0);c.length>=2&&"["===d?t[a]=n(c):"\\"!==d&&(t[a]=c.replace(/[a-zA-Z]/g,function(e){var t=e.charCodeAt(0);return"["+String.fromCharCode(-33&t,32|t)+"]"}))}return t.join("")}for(var s=0,r=!1,a=!1,l=0,c=e.length;c>l;++l){var u=e[l];if(u.ignoreCase)a=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){r=!0,a=!1;break}}for(var d={b:8,t:9,n:10,v:11,f:12,r:13},h=[],l=0,c=e.length;c>l;++l){var u=e[l];if(u.global||u.multiline)throw new Error(""+u);h.push("(?:"+o(u)+")")}return new RegExp(h.join("|"),a?"gi":"g")}function t(e){function t(e){switch(e.nodeType){case 1:if(n.test(e.className))return;for(var i=e.firstChild;i;i=i.nextSibling)t(i);var c=e.nodeName;("BR"===c||"LI"===c)&&(o[a]="\n",r[a<<1]=s++,r[1|a++<<1]=e);break;case 3:case 4:var u=e.nodeValue;u.length&&(u=l?u.replace(/\r\n?/g,"\n"):u.replace(/[ \t\r\n]+/g," "),o[a]=u,r[a<<1]=s,s+=u.length,r[1|a++<<1]=e)}}var i,n=/(?:^|\s)nocode(?:\s|$)/,o=[],s=0,r=[],a=0;e.currentStyle?i=e.currentStyle.whiteSpace:window.getComputedStyle&&(i=document.defaultView.getComputedStyle(e,null).getPropertyValue("white-space"));var l=i&&"pre"===i.substring(0,3);return t(e),{sourceCode:o.join("").replace(/\n$/,""),spans:r}}function i(e,t,i,n){if(t){var o={sourceCode:t,basePos:e};i(o),n.push.apply(n,o.decorations)}}function n(e){for(var t=void 0,i=e.firstChild;i;i=i.nextSibling){var n=i.nodeType;t=1===n?t?e:i:3===n?q.test(i.nodeValue)?e:t:t}return t===e?void 0:t}function o(t,n){var o,s={};!function(){for(var i=t.concat(n),r=[],a={},l=0,c=i.length;c>l;++l){var u=i[l],d=u[3];if(d)for(var h=d.length;--h>=0;)s[d.charAt(h)]=u;var p=u[1],f=""+p;a.hasOwnProperty(f)||(r.push(p),a[f]=null)}r.push(/[\0-\uffff]/),o=e(r)}();var r=n.length,a=function(e){for(var t=e.sourceCode,l=e.basePos,u=[l,O],d=0,h=t.match(o)||[],p={},f=0,m=h.length;m>f;++f){var g,v=h[f],b=p[v],y=void 0;if("string"==typeof b)g=!1;else{var w=s[v.charAt(0)];if(w)y=v.match(w[1]),b=w[0];else{for(var _=0;r>_;++_)if(w=n[_],y=v.match(w[1])){b=w[0];break}y||(b=O)}g=b.length>=5&&"lang-"===b.substring(0,5),!g||y&&"string"==typeof y[1]||(g=!1,b=I),g||(p[v]=b)}var M=d;if(d+=v.length,g){var C=y[1],x=v.indexOf(C),k=x+C.length;y[2]&&(k=v.length-y[2].length,x=k-C.length);var S=b.substring(5);i(l+M,v.substring(0,x),a,u),i(l+M+x,C,c(S,C),u),i(l+M+k,v.substring(k),a,u)}else u.push(l+M,b)}e.decorations=u};return a}function s(e){var t=[],i=[];e.tripleQuotedStrings?t.push([A,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""]):e.multiLineStrings?t.push([A,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]):t.push([A,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]),e.verbatimStrings&&i.push([A,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var n=e.hashComments;if(n&&(e.cStyleComments?(n>1?t.push([E,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]):t.push([E,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"]),i.push([A,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,null])):t.push([E,/^#[^\r\n]*/,null,"#"])),e.cStyleComments&&(i.push([E,/^\/\/[^\r\n]*/,null]),i.push([E,/^\/\*[\s\S]*?(?:\*\/|$)/,null])),e.regexLiterals){var s="/(?=[^/*])(?:[^/\\x5B\\x5C]|\\x5C[\\s\\S]|\\x5B(?:[^\\x5C\\x5D]|\\x5C[\\s\\S])*(?:\\x5D|$))+/";i.push(["lang-regex",new RegExp("^"+H+"("+s+")")])}var r=e.types;r&&i.push([P,r]);var a=(""+e.keywords).replace(/^ | $/g,"");return a.length&&i.push([D,new RegExp("^(?:"+a.replace(/[\s,]+/g,"|")+")\\b"),null]),t.push([O,/^\s+/,null," \r\n	 "]),i.push([R,/^@[a-z_$][a-z_$@0-9]*/i,null],[P,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[O,/^[a-z_$][a-z_$@0-9]*/i,null],[R,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[O,/^\\[\s\S]?/,null],[z,/^.[^\s\w\.$@\'\"\`\/\#\\]*/,null]),o(t,i)}function r(e,t){function i(e){switch(e.nodeType){case 1:if(s.test(e.className))break;if("BR"===e.nodeName)n(e),e.parentNode&&e.parentNode.removeChild(e);else for(var t=e.firstChild;t;t=t.nextSibling)i(t);break;case 3:case 4:if(l){var o=e.nodeValue,c=o.match(r);if(c){var u=o.substring(0,c.index);e.nodeValue=u;var d=o.substring(c.index+c[0].length);if(d){var h=e.parentNode;h.insertBefore(a.createTextNode(d),e.nextSibling)}n(e),u||e.parentNode.removeChild(e)}}}}function n(e){function t(e,i){var n=i?e.cloneNode(!1):e,o=e.parentNode;if(o){var s=t(o,1),r=e.nextSibling;s.appendChild(n);for(var a=r;a;a=r)r=a.nextSibling,s.appendChild(a)}return n}for(;!e.nextSibling;)if(e=e.parentNode,!e)return;for(var i,n=t(e.nextSibling,0);(i=n.parentNode)&&1===i.nodeType;)n=i;u.push(n)}var o,s=/(?:^|\s)nocode(?:\s|$)/,r=/\r\n?|\n/,a=e.ownerDocument;e.currentStyle?o=e.currentStyle.whiteSpace:window.getComputedStyle&&(o=a.defaultView.getComputedStyle(e,null).getPropertyValue("white-space"));for(var l=o&&"pre"===o.substring(0,3),c=a.createElement("LI");e.firstChild;)c.appendChild(e.firstChild);for(var u=[c],d=0;d<u.length;++d)i(u[d]);t===(0|t)&&u[0].setAttribute("value",t);var h=a.createElement("OL");h.className="linenums";for(var p=Math.max(0,0|t-1)||0,d=0,f=u.length;f>d;++d)c=u[d],c.className="L"+(d+p)%10,c.firstChild||c.appendChild(a.createTextNode(" ")),h.appendChild(c);e.appendChild(h)}function a(e){var t=/\bMSIE\b/.test(navigator.userAgent),i=/\n/g,n=e.sourceCode,o=n.length,s=0,r=e.spans,a=r.length,l=0,c=e.decorations,u=c.length,d=0;c[u]=o;var h,p;for(p=h=0;u>p;)c[p]!==c[p+2]?(c[h++]=c[p++],c[h++]=c[p++]):p+=2;for(u=h,p=h=0;u>p;){for(var f=c[p],m=c[p+1],g=p+2;u>=g+2&&c[g+1]===m;)g+=2;c[h++]=f,c[h++]=m,p=g}for(u=c.length=h;a>l;){r[l];var v=r[l+2]||o;c[d];var b,y=c[d+2]||o,g=Math.min(v,y),w=r[l+1];if(1!==w.nodeType&&(b=n.substring(s,g))){t&&(b=b.replace(i,"\r")),w.nodeValue=b;var _=w.ownerDocument,M=_.createElement("SPAN");M.className=c[d+1];var C=w.parentNode;C.replaceChild(M,w),M.appendChild(w),v>s&&(r[l+1]=w=_.createTextNode(n.substring(g,v)),C.insertBefore(w,M.nextSibling))}s=g,s>=v&&(l+=2),s>=y&&(d+=2)}}function l(e,t){for(var i=t.length;--i>=0;){var n=t[i];j.hasOwnProperty(n)?window.console&&console.warn("cannot override language handler %s",n):j[n]=e}}function c(e,t){return e&&j.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),j[e]}function u(e){var i=e.langExtension;try{var n=t(e.sourceNode),o=n.sourceCode;e.sourceCode=o,e.spans=n.spans,e.basePos=0,c(i,o)(e),a(e)}catch(s){"console"in window&&console.log(s&&s.stack?s.stack:s)}}function d(e,t,i){var n=document.createElement("PRE");n.innerHTML=e,i&&r(n,i);var o={langExtension:t,numberLines:i,sourceNode:n};return u(o),n.innerHTML}function h(e){function t(e){return document.getElementsByTagName(e)}function i(){for(var t=window.PR_SHOULD_USE_CONTINUATION?d.now()+250:1/0;p<s.length&&d.now()<t;p++){var o=s[p],a=o.className;if(a.indexOf("prettyprint")>=0){var l,c=a.match(f);!c&&(l=n(o))&&"CODE"===l.tagName&&(c=l.className.match(f)),c&&(c=c[1]);for(var m=!1,g=o.parentNode;g;g=g.parentNode)if(("pre"===g.tagName||"code"===g.tagName||"xmp"===g.tagName)&&g.className&&g.className.indexOf("prettyprint")>=0){m=!0;break}var v=o.className.match("processed")?!0:!1;if(!m&&!v){var b=o.className.match(/\blinenums\b(?::(\d+))?/);b=b?b[1]&&b[1].length?+b[1]:!0:!1;var y=o.innerHTML.match(/<\s?br\s?/i)||o.innerHTML.match("\n");b&&y?r(o,b):o.removeClassName("linenums"),h={langExtension:c,sourceNode:o,numberLines:b},u(h),o.className+=" processed",o.style.paddingLeft="10px"}}}p<s.length?setTimeout(i,250):e&&e()}for(var o=[t("pre"),t("code"),t("xmp")],s=[],a=0;a<o.length;++a)for(var l=0,c=o[a].length;c>l;++l)s.push(o[a][l]);o=null;var d=Date;d.now||(d={now:function(){return+new Date}});var h,p=0,f=/\blang(?:uage)?-([\w.]+)(?!\S)/;i()}function p(e){function t(e){if(3==e.nodeType)i.push(e);else{e.tagName.match("LI")?i.push(document.createElement("BR")):e.tagName.match("SPAN")&&e.className.match("rangySelectionBoundary")&&i.push(e);for(var n=0,o=e.childNodes.length;o>n;++n)t(e.childNodes[n])}}var i=[];t(e);for(var n,o="",s="",r=!1,a=0;a<i.length;a++){var l=i[a];l.tagName&&l.tagName.match("BR")&&a>0?r?s+="\n":o+="\n":l.tagName&&l.tagName.match(/SPAN/i)?(n=l,r=!0):l.nodeType?r?s+=l.textContent:o+=l.textContent:r?s+=l:o+=l}var c=document.createTextNode(o),u=document.createTextNode(s);e.innerText="",e.appendChild(c),e.appendChild(n),e.appendChild(u),e.removeClassName("processed"),e.style.padding="10px",e.className.match("linenums")&&(e.style.paddingLeft="50px")}var f=["break,continue,do,else,for,if,return,while"],m=[f,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],g=[m,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],v=[g,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],b=[g,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],y=[b,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],w="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",_=[g,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],M="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",C=[f,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],x=[f,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],k=[f,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],S=[v,y,_,M+C,x,k],T=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,A="str",D="kwd",E="com",P="typ",R="lit",z="pun",O="pln",F="tag",W="dec",I="src",N="atn",L="atv",B="nocode",H="(?:^^\\.?|[+-]|\\!|\\!=|\\!==|\\#|\\%|\\%=|&|&&|&&=|&=|\\(|\\*|\\*=|\\+=|\\,|\\-=|\\->|\\/|\\/=|:|::|\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\@|\\[|\\^|\\^=|\\^\\^|\\^\\^=|\\{|\\||\\|=|\\|\\||\\|\\|=|\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*",q=/\S/,V=s({keywords:S,hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),j={};l(V,["default-code"]),l(o([],[[O,/^[^<?]+/],[W,/^<!\w[^>]*(?:>|$)/],[E,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[z,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(o([[O,/^[\s]+/,null," 	\r\n"],[L,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[F,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[N,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[z,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]),l(o([],[[L,/^[\s\S]+/]]),["uq.val"]),l(s({keywords:v,hashComments:!0,cStyleComments:!0,types:T}),["c","cc","cpp","cxx","cyc","m"]),l(s({keywords:"null,true,false"}),["json"]),l(s({keywords:y,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:T}),["cs"]),l(s({keywords:b,cStyleComments:!0}),["java"]),l(s({keywords:k,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),l(s({keywords:C,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),l(s({keywords:M,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),l(s({keywords:x,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),l(s({keywords:_,cStyleComments:!0,regexLiterals:!0}),["js"]),l(s({keywords:w,hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(o([],[[A,/^[\s\S]+/]]),["regex"]),window.unPrettifyOne=p,window.prettyPrintOne=d,window.prettyPrint=h,window.PR={createSimpleLexer:o,registerLangHandler:l,sourceDecorator:s,PR_ATTRIB_NAME:N,PR_ATTRIB_VALUE:L,PR_COMMENT:E,PR_DECLARATION:W,PR_KEYWORD:D,PR_LITERAL:R,PR_NOCODE:B,PR_PLAIN:O,PR_PUNCTUATION:z,PR_SOURCE:I,PR_STRING:A,PR_TAG:F,PR_TYPE:P}}(),_wAMD.define("legacy/prettify/prettify",function(){}),_wAMD.define("legacy/weebly_editbox",["jquery","underscore","legacy/weebly_elements","legacy/weebly_linker","legacy/weebly_page_manager","editor/content/main","commerce/util/product-utils","editor/build/ui/utils","config","tablet/api/external","editor/app","backbone-all","platform/editor/view/settings/SettingsTooltipView","platform/editor/model/PlatformElementSettingModel","legacy/weebly_uploads","legacy/rangy-1.2.3/rangy-selectionsaverestore","legacy/prettify/prettify","legacy/weebly_element_utils"],function(e,t,i,n,o,s,r,a,l,c,u){function d(t){var i=e(t.target);if(window.currentBox&&!i.is(document)&&(i.hasClass("editable-text")||i.closest(".editable-text").length)){var n=e("#"+window.currentBox),o=window._editBoxOptions[i[0].id];if(o&&!l.chromeless){var r=Date.now();if((!nt||r>nt+2e4)&&(nt=r,"wsite-title"!=window.currentBox&&"function"!=typeof ot&&(i.hasClass("editable-text")||(i=i.closest(".editable-text")),!i.hasClass("input")))){var a=n.html();s.saveContent(window.currentBox,a,tt,1)}}if(13==t.which){var c=e(j());c.is("li")||c.parent().is("li")||(Prototype.Browser.Gecko?("undefined"!=typeof window.getSelection?(c=window.getSelection(),c.getRangeAt&&c.rangeCount&&(u=c.getRangeAt(0),u.deleteContents(),br=document.createElement("br"),u.insertNode(br),u.setEndAfter(br),u.setStartAfter(br),c.removeAllRanges(),c.addRange(u))):"undefined"!=typeof document.selection&&(c=document.selection,c.createRange&&(u=c.createRange(),u.pasteHTML("<br />"),u.select())),t.stopPropagation(),t.preventDefault()):Prototype.Browser.IE&&(document.selection.createRange().pasteHTML("<br /><span></span>"),t.stopPropagation(),t.preventDefault()))}if(9==t.which&&(Prototype.Browser.Gecko?(Q.runCommand(window.currentBox,"insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),t.stopPropagation(),t.preventDefault()):Prototype.Browser.IE&&(document.selection.createRange().pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),t.stopPropagation(),t.preventDefault())),Prototype.Browser.Gecko&&46==t.which){var u=V(),d=n.children().eq(0);u&&0===u.startOffset&&0===u.endOffset&&d.is("br")&&(d.remove(),t.preventDefault(),t.stopPropagation())}Weebly.view.isMobileView&&Weebly.mobile.reflow()}if(i.length&&i.hasClass("editable-text")){var h=i[0].id;i&&h&&(window.editBoxSelectingText=!0,window.currentBox&&window.currentBox==h||window.showEditBox(h,null,window._editBoxOptions[h]))}}function h(){lt=e("#"+window.currentBox).height()}function p(){lt<e("#"+window.currentBox).height()&&c.forceDocumentSizeChange()}function f(t){if(!l.chromeless){var i=e(t.target);i.is(document)||!i.hasClass("editable-text")&&!i.closest(".editable-text").length?Y():($(t),Weebly.view.isMobileView&&Weebly.mobile.reflow())}}function m(t){window.editBoxSelectingText=!1;var i=e(t.target);i=i.hasClass("editable-text")?i[0]:i.closest(".editable-text")[0],i&&i.id&&(window.editBoxSelectingText=!0,require("editor/app").vent.trigger("editor:element:props:show"),window.currentBox&&window.currentBox==i.id||window.showEditBox(i.id,null,window._editBoxOptions[i.id]))}function g(t){var i=e(t.target);i=i.hasClass("editable-text")?i:i.closest(".editable-text"),i.length&&i[0].id&&window.currentBox&&i.attr("class").match("prettyprint")&&(P(),window.unPrettifyOne(i[0]),J())}function v(){null===Z&&(ut=dt)}function b(){if(null===Z){var i=V();if(!i)return ht={},void 0;dt=i.cloneRange();var n={};["bold","fontSize","foreColor","italic","justify","link","orderedList","underline","unorderedList"].each(function(e){var i=Q.getCurrentValue(e);t.isEqual(ht[e],i)||(ht[e]=i,n[e]=void 0!==i?i:!1)}),e.isEmptyObject(n)||c.updateToolbarStates(n)}}function y(t){var i=e(t.target);i.is(document)||!i.hasClass("editable-text")&&!i.closest(".editable-text").length||(Z=e("#"+window.currentBox).html(),t.stopPropagation(),t.preventDefault())}function w(t){var i=e("#"+window.currentBox),n=e(t.target);if(!n.is(document)&&(n.hasClass("editable-text")||n.closest(".editable-text").length)){var o;if(Prototype.Browser.IE){var s=i.attr("class");return s&&s.match(/prettyprint/i)&&i.html(i.text().replace(/</g,"&lt;").replace(/>/g,"&gt;")),o=V(),o&&setTimeout(function(){var e=o.htmlText;e=L(e),o.pasteHTML(e)},100),void 0}Z=i.html(),Q.runCommand(i,"insertHTML",'<span id="pasted" style="display:none;">_</span>'),o=window.rangy.createRange(),o.setStartAfter(e("#pasted")[0]),Q.selectRange(o),setTimeout(_,100)}}function _(){var t=e("#"+window.currentBox);if(t.length){var i,n=t.attr("class");if(n&&n.match(/prettyprint/i)&&t.html(t.text().replace(/</g,"&lt;").replace(/>/g,"&gt;")),Prototype.Browser.Gecko)try{var o=t.closest("li.inside"),s=o.next();if(s.length&&s.is("li")&&(s[0].id==o[0].id||!s[0].id)&&(i=s.find("#"+window.currentBox).eq(0),i.length)){var r=i.html();if(r=r.replace(/<xml[\s\S]*?<\/xml>/gi,""),r=r.replace(/<!--([\s\S]*?)-->/gi,""),r=r.replace(/<(\/)*(\\?xml:|meta|link|span|font|del|ins|st1:|[ovwxp]:)((.|\s)*?)>/gi,""),r=r.replace(/(class|style|type|start)=("(.*?)"|(\w*))/gi,""),t.find("#pasted").length){var a=t.html();a=a.replace(/<span id="pasted"/,r+'<span id="pasted"'),t.html(a),q(e("#pasted")[0])}s.remove()}}catch(l){}if(!Z.replace(/<br[^>]*>/g,""))return Z=null,e("#pasted").remove(),t.html(L(t.html())),B(t),void 0;var c=V();i=e("#pasted"),c.setStartAfter(i[0]);for(var u=c.endContainer,d=c.startContainer;"#text"!=u.nodeName&&(u.id!==d.id||!u.id&&!d.id)&&u.id!=t.attr("id")||"#text"==u.nodeName&&c.endOffset==u.length;)c.setEndAfter(u),u=c.endContainer;var h=e("<span>",{id:"temp_range_span",css:{display:"none"},appendTo:"body"}),p=h.append(c.cloneContents()).html();if(h.remove(),c.deleteContents(),p=L(p),!p)return Z=null,i.remove(),void 0;var f=c.createContextualFragment(p);if(B(f),Prototype.Browser.Gecko&&c.insertNode(e("<span>",{id:"cursor_here"})[0]),c.insertNode(f),Prototype.Browser.Gecko){var m=window.rangy.createRange(),g=e("#cursor_here");m.setStartAfter(g[0]),Q.selectRange(m),g.remove()}Z=null,i.remove()}}function M(e,i){var n=O(e);return i&&(n=n.replace(/^(\s|&nbsp;|&#160;|<br\s*\/?>)*/i,"")),(i||"wsite-title"==window.currentBox)&&(n=n.replace(/(\s|&nbsp;|&#160;|<br\s*\/?>)*$/i,"")),l.chromeless&&(n=n.replace(/&nbsp;/gi," "),n=t.unescape(n)),n}function C(){Q.runCommand(window.currentBox,"selectAll",!1),Q.runCommand(window.currentBox,"delete")}function x(e,t){if(e.match(/^(Product.*)?Click here to edit.$/)||e.match(/^(Product.*)?Double-tap to edit.$/))return!0;if(e.replace(/<.*?>/g,"").match(/Click here to edit\.$/)||e.replace(/<.*?>/g,"").match(/Double-tap to edit\.$/))return!0;if(e.indexOf("This is your new blog post.")>-1)return!0;if(t.$el&&e==t.$el.attr("placeholder"))return!0;if(e==l.defaultPlaceholderText)return!0;for(var i in l.areaDefaultPlaceholderText)if(e==l.areaDefaultPlaceholderText[i])return!0;return t.emptyText?e.indexOf(t.emptyText)>-1:!1}function k(i){window.hideFlashContainer();var n=e("#editMenu"),o={},s=e("#"+i),r=s,l=s.closest("li.inside");l.length&&(r=l),(!s.is("div")||s.hasClass("product-title"))&&(o.unorderedList=!1,o.orderedList=!1),(s.hasClass("wsite-product-description")||s.parent().is("#wsite-com-product-short-description"))&&(r=s,o.alignment=!1,o.changecolor=!1);var c=e("#menuitem-a");c.toggle(o.alignment!==!1);var u=e("#menuitem-ul");u.toggle(o.unorderedList!==!1);var d=e("#menuitem-ol");d.toggle(o.orderedList!==!1);var h=e("#menuitem-cc");if(h.toggle(o.changecolor!==!1),!pt){pt=!0;var p={delay:{show:600,hide:100},placement:"bottom"};e("#editMenuChild").on("click","a[data-command]",S),e("#menuitem-b").tooltip(p),e("#menuitem-i").tooltip(p),e("#menuitem-u").tooltip(p),e("#menuitem-if").tooltip(p),e("#menuitem-df").tooltip(p),h.tooltip(p).on("mousedown",P).weeblyColorChooser({id:"editmenu-color-chooser",autoExpand:!0,containerOffsetY:5,onBeforeShow:function(){this.currentSelection=window.rangy.saveSelection();
var t=V();if(t){var i=e(t.commonAncestorContainer).closest("font").css("color");i&&h.spectrum("set",i)}},onMove:T,onUpdate:T,onChange:function(e){this.preserveUserSelection(),h.spectrum("hide"),Q.runCommand(window.currentBox,"foreColor",e),window.rangy.removeMarkers(this.currentSelection)},onRevert:function(){},preserveUserSelection:A}),e("#menuitem-cl").tooltip(p).on("mousedown",P).on("click",D),c.tooltip(p),u.tooltip(p),d.tooltip(p),e("#menuitem-rf").tooltip(p),e("#menuitem-z").tooltip(p),e("#menuitem-r").tooltip(p)}n.appendTo("#scroll_container").show();var f=a.getScrollContainer(),m=function(){E(n,r,f)},g=t.debounce(m,100);m(),f.on("scroll",g),K=function(){f.off("scroll",g)}}function S(t){Q.runCommand(window.currentBox,e(t.currentTarget).data("command"),null),t.preventDefault()}function T(e){this.preserveUserSelection(),Q.runCommand(window.currentBox,"foreColor",e)}function A(){this.currentSelection&&(window.rangy.restoreSelection(this.currentSelection),this.currentSelection=window.rangy.saveSelection())}function D(e){Q.showCreateLink(),e.preventDefault()}function E(e,t,i){var n=i.offset(),o=i.outerWidth(),s=t.offset(),r=t.outerWidth(),a=t.outerHeight(),l=e.outerWidth(),c=e.outerHeight(),u=!1,d=s.top-c-10;d<n.top+10&&(d=n.top+10,u=!0),d=Math.min(s.top+a+10,d);var h;o>l?(h=s.left-(u?10:0),h+l-n.left>=o&&(h=s.left+r-l)):h=s.left+r/2-l/2;var p=e.offsetParent(),f=p.offset();e.css({top:d-(f.top-p.scrollTop()),left:h-(f.left-p.scrollLeft())})}function P(){var e=window.rangy.getSelection();e.rangeCount<1&&(dt&&dt.isValid()?e.addRange(dt):ut&&ut.isValid()&&e.addRange(ut)),it=window.rangy.saveSelection()}function R(t,i){var n=e(t).closest("li");return n.is(".inside")?!1:n.parent().is(i)?!0:!1}function z(e){var t=3;return 13>e?t=1:e>=13&&16>e?t=2:e>=18&&24>e?t=4:e>=24&&32>e?t=5:e>=32&&(t=6),t}function O(e){return e=e.replace(/<!--.*?-->/gi,""),(navigator.appVersion.match("Safari/")||navigator.appVersion.match("AppleWebKit/"))&&(e=e.replace(/^\s+|\s+$/g,"").replace(/^(<\/?div>)*|(<\/?div>)*$/gi,"").replace(/(<br[ \/]*>)?(\s*<\/?div>)+\s*/gi,"<br />")),e=e.replace(/<b(\s+|>)/gi,"<strong$1"),e=e.replace(/<\/b(\s+|>)/gi,"</strong$1"),e=e.replace(/<i(\s+|>)/gi,"<em$1"),e=e.replace(/<\/i(\s+|>)/gi,"</em$1"),e=e.replace(/<br ?>/gi,"<br />"),e=e.replace(/<br style=[\'\"].*?[\'\"]>/gi,"<br />"),e=e.replace(/<p>&nbsp;<\/p>/gi,""),e=e.replace(/<\/p[^>]*>/gi,"<br /><span></span><br /><span></span>"),e=e.replace(/<p[^>]*>/gi,""),e=e.replace(/<([\w-]+)(?:|[^>]*[^\/])>((?:\s|<br[ \/]*>)*)<\/\1>/gi,F),e=e.replace(/(<span><\/span>)+/gi,"<span></span>"),e=e.replace(/<\/?([\w-]+)[^>]*>/gi,W),e=e.replace(/<[^>]*>/g,I)}function F(e,t,i){return"span"==t.toLowerCase()?e:i}function W(e,t){return/^(span|strong|u|em|br|big|small|a|font|ul|ol|li)$/i.test(t)||l.chromeless&&/^(img)$/i.test(t)?e:""}function I(e){return e=e.replace(/\s+([\w-]+)\s*=\s*["'][^"']*["']/g,N)}function N(e,t){var i=/^(src|alt|href|target|title|style|size|color)$/i;return e.match(/selectionboundary/i)||i.test(t)?e:""}function L(e){return e=e.replace(/<xml[\s\S]*<\/xml>/gi,""),e=e.replace(/<!--([\s\S]*?)-->/gi,""),e=e.replace(/<(\/)*(\\?xml:|meta|link|font|del|ins|st1:|[ovwxp]:)((.|\s)*?)>/gi,""),e=e.replace(/(class|style|type|start)=("(.*?)"|(\w*))/gi,""),e=e.replace(/<p[^>]*>&nbsp;<\/p>/gi,""),e=O(e),e=e.replace(/\n/g," ")}function B(t){var i=e(t).children();i.each(H)}function H(){"#text"!=this.nodeName&&(this.tagName.match(/font/i)&&this.face&&(this.face=""),e(this).attr("style",""),B(this))}function q(e){if(!e)return!1;var t=window.rangy.createRange();t.selectNode(e),Q.selectRange(t)}function V(){var e=window.rangy.getSelection();return e.rangeCount<1?null:e.getRangeAt(0)}function j(){var e=window.rangy.getSelection().anchorNode;return 3===e.nodeType&&(e=e.parentNode),e}function $(){try{var t=e(j()),i="a:not(.wbutton)";if(t.length&&t.is(i)&&0===t.closest(".wsite-logo").length)return Y(),U(t),void 0;Y(),window.currentBox&&X()}catch(n){}}function U(t){if(t.length&&t.is("a")){et=t;var i=Q.parseLinkString(t.attr("href")),s=function(){at=!0;var e=t.closest(".element");n.open({existing:i,remove:!0,ucfid:e.length?e[0].id:null,onChoose:r})},r=function(e,i){e?(t.attr("href",e),i?t.attr("target","_blank"):t.removeAttr("target")):(q(t[0]),Q.runCommand(window.currentBox,"unlink",null)),at=!1},a=e("<div>",{id:"link-info-box"});if("_blank"==t.attr("target")&&(i.newWindow=!0),i.pageID){var l=o.pages[i.pageID];a.append(window._W.tl("Go to page:"),e("<a>",{html:l.title,on:{click:function(){window.goUpdateList(i.pageID)}}}))}else i.location?a.append(window._W.tl("Go to file:"),e("<a>",{href:"/uploads/"+i.location,target:"_blank",html:i.location.replace(/^.*\//,"")})):i.email?a.append(i.email):i.store?a.append(window._W.tl("Go to store page:"),e("<a>",{html:i.store,on:{click:function(){window.goUpdateList(i.store)}}})):a.append(window._W.tl("Go to link:"),e("<a>",{href:i.url,target:"_blank",html:i.url}));a.append(" - ",e("<a>",{html:window._W.tl("Change"),on:{click:s}})," - ",e("<a>",{html:window._W.tl("Remove"),on:{click:G}}),e("<img>",{src:"/weebly/images/x.png",alt:window._W.tl("close"),css:{position:"absolute",top:"0px",right:"0px",cursor:"pointer"}}));var c=e("#menuitem-lu");c.show(),e("#menuitem-cl").hide(),c.click(s);var u=e("#icontent"),d=u.offset(),h=t.offset();a.css({top:h.top+t.height()+2-d.top+"px",left:h.left-d.left+"px"}),u.append(a)}}function Y(){e("#link-info-box").remove(),e("#menuitem-lu").hide(),e("#menuitem-cl").show()}function G(){et.length&&et.is("a")&&(q(et[0]),Q.runCommand(window.currentBox,"unlink",null),Y())}function X(){var t=e("#"+window.currentBox);if(Prototype.Browser.IE){var i=e("#scroll_container"),n=i.scrollTop();t.css("position","fixed").focus().css("position","relative"),i.scrollTop(n)}else t.focus()}function J(){if(it)return window.rangy.restoreSelection(it),window.rangy.removeMarkers(it),it=null,void 0;var e=V();e&&e.isValid()||(e=null,dt&&dt.isValid()?e=dt:ut&&ut.isValid()&&(e=ut),e&&Q.selectRange(e))}var K,Q={currentBox:"",_editBoxOptions:{},editBoxRedrawOptions:!1,editBoxSelectingText:!1},Z=null,et="",tt="",it=null,nt=null,ot=null,st=!0,rt=null,at=!1,lt=0,ct=0;Q.makeElementContentEditable=function(i,n){if(i){n=n||{};var o;i instanceof e?(o=i,i=i[0]):o=e(i),i.id||(i.id="editableElementContent"+ct++),i.contentEditable=!0,o.addClass("editable-text"),void 0!==o.attr("placeholder")&&(n.emptyText=o.attr("placeholder"),o.html()||o.html(o.attr("placeholder"))),n.$el=o,t.isUndefined(n.richTextControls)&&(n.richTextControls=!l.chromeless),window._editBoxOptions[i.id]=n}},Q.initEditBox=function(){window.rangy.initialized||window.rangy.init(),window.onbeforeunload=function(){Q.hideEditBox(window.currentBox)},e(document).on({keydown:d,click:f,mousedown:m,mouseup:g,selectionchange:b,selectstart:v}),l.chromeless&&e(document).on({keypress:h,keyup:p});var t=e("body");Prototype.Browser.IE&&t.on("beforepaste",y),t.on("paste",w),e(document).on({focus:m},".editable-text")},Q.closePlatformSettingsPanel=function(){u.platformElementSettings.close()};var ut,dt,ht={};Q.hideEditBox=function(t){if(window.currentBox===t){rt&&rt.removeClass("inside-active inside-text-editing"),rt=null;var n=e("#"+t),o=window._editBoxOptions[n.id]||{richTextControls:!l.chromeless};if(n.length){var r=M(n.html(),!!ot,n);if("wsite-title"==t?c.finishedEditingAreaText("logo","",r):"function"!=typeof ot&&c.finishedEditingText(t,r),"wsite-title"!=t&&(!r||r.match(/^(<span><\/span>)*<br \/>$/))){var a=n.attr("placeholder"),u=t.replace(/wsite-/,"");"string"!=typeof o.emptyText&&"string"==typeof a&&(o.emptyText=a),r="string"==typeof o.emptyText?o.emptyText:l.areaDefaultPlaceholderText[u]||l.defaultPlaceholderText,n.html(r)}"function"==typeof ot?ot(t,x(r,o)?"":r,tt):"wsite-title"!=t||l.chromeless?n.hasClass("input")||l.chromeless||s.saveContent(t,r,tt):s.updateSiteTitle(r);var d=window.getContentField(window.currentBox);d&&(d.contentFieldContent=r)}K&&(K(),K=null),window.currentBox=null,o.richTextControls&&i.hideMenuBar(),window.editBoxRedrawOptions&&i.generateProperties(i.currentElement),n.attr("class")&&n.attr("class").match("prettyprint")&&window.prettyPrint(),"wsite-title"==t&&window.refreshNavCondense&&window.refreshNavCondense()}},Q.showEditBox=function(n,o,s){function a(t){at||e.contains(d[0],t.target)||u.length&&e.contains(u[0],t.target)||d.is(document.activeElement)||(f.off("click",a),Q.hideEditBox(n))}s=s||{richTextControls:!l.chromeless},closePlatformSettingsPanel();var u=e("#editMenu:hidden");if(n==window.currentBox)return u.length&&"wsite-title"!=n&&st&&s.richTextControls!==!1&&k(n),void 0;window.currentBox&&window.hideEditBox(window.currentBox),i.currentElement&&i.unselectElement();var d=e("#"+n);rt=d.closest(".inside"),rt.length?rt.addClass("inside-active inside-text-editing"):rt=null,window.currentBox=n,tt=d.css("text-align")||"",ot=null,(d.hasClass("product-description")||d.hasClass("product-title"))&&(s=t.extend({saveCallback:r.saveProductField,redrawOptions:!0,showOptions:!0},s)),d.hasClass("product-price")&&(s=t.extend({saveCallback:r.saveProductField,redrawOptions:!0,showOptions:!1},s)),s&&("function"==typeof s.saveCallback&&(ot=s.saveCallback),"undefined"!=typeof s.redrawOptions&&(window.editBoxRedrawOptions=s.redrawOptions),"undefined"!=typeof s.showOptions&&(st=s.showOptions)),window.editBoxRedrawOptions&&s.richTextControls&&i.hideMenuBar();var h=d.html();"wsite-title"!=n&&st&&s.richTextControls!==!1&&k(n),d.hasClass("wsite-button-inner")&&i.selectElement(d.closest(".element")[0]);var p=V();if(p&&P(),d.html(M(d.html(),!!ot,d)),p?J():(p=window.rangy.createRange(),p.selectNodeContents(d[0]),p.collapse(!1),Q.selectRange(p)),s.richTextControls){var f=e(document);f.on("click",a)}else d.one("blur",function(){Q.hideEditBox(n)});if(x(h,s))try{setTimeout(C,0)}catch(m){}s.startedEditingCallback?s.startedEditingCallback():"wsite-title"==n?c.startedEditingAreaText("logo",""):c.startedEditingText(n)};var pt=!1;return Q.runCommand=function(t,i,n){var o=document,s=e("#"+window.currentBox);if(!s.length&&!l.chromeless)return!1;var r;x(s.html(),{$el:s})?(r=window.rangy.createRange(),r.selectNodeContents(s[0]),Q.selectRange(r),r.deleteContents()):J();var a,c;switch(i){case"increaseFontSize":try{a=o.queryCommandValue("FontSize"),a?"string"==typeof a?(c=a.match("px")?z(parseInt(a.replace("px",""),10)):parseInt(a,10),c=c>6?7:c+1,o.execCommand("FontSize",!1,c)):o.execCommand("FontSize",!1,a>6?7:a+1):o.execCommand("FontSize",!1,3)}catch(u){o.execCommand(i,!1,n)}break;case"decreaseFontSize":try{a=o.queryCommandValue("FontSize"),a?"string"==typeof a?(c=a.match("px")?z(parseInt(a.replace("px",""),10)):parseInt(a,10),c=c>1?c-1:1,o.execCommand("FontSize",!1,c)):o.execCommand("FontSize",!1,2>a?1:a-1):o.execCommand("FontSize",!1,1)}catch(u){o.execCommand(i,!1,n)}break;case"promptLink":Q.showCreateLink({useExisting:!0,remove:!0,modal:!0});break;case"justifyLeft":tt="left",s.css("text-align","left");break;case"justifyCenter":tt="center",s.css("text-align","center");break;case"justifyRight":tt="right",s.css("text-align","right");break;case"justifyFull":tt="justify",s.css("text-align","justify");break;case"insertOrderedList":case"insertUnorderedList":if(Prototype.Browser.IE){r=window.rangy.createRange();var d=r.htmlText,h="insertUnorderedList"===i?"ul":"ol",p=r.parentElement().tagName;if(-1==d.indexOf("<LI>")&&-1==d.indexOf("<P>")&&"LI"!==p)return d="<"+h+"><li>"+d+"</li></"+h+">",d=d.replace(/<SPAN\><\/SPAN\>/g,""),d=d.replace(/<BR\>/g,"</li><li>"),r.pasteHTML(d),void 0}default:o.execCommand(i,!1,n)}"promptLink"!=i&&X()},Q.getCurrentValue=function(t){var i=document,n=e("#"+window.currentBox);if(!n.length)return null;J();var o;switch(t){case"link":var s=e(j()).closest("a");o=s.length?{href:s.attr("href")||"",target:s.attr("target")||""}:!1;break;case"justify":o=n.css("text-align"),"justify"===o&&(o="full");break;case"orderedList":o=R(j(),"ol");break;case"unorderedList":o=R(j(),"ul");break;case"bold":case"italic":case"underline":o=i.queryCommandState(t);break;default:o=i.queryCommandValue(t)}return o},Q.getSelectionHtml=function(){return window.rangy.getSelection().toHtml()},Q.selectRange=function(e){var t=window.rangy.getSelection();t.removeAllRanges(),t.addRange(e)},Q.parseLinkString=function(e){if(e){var t,i={};if(t=e.match(/^http:\/\/weebly-link\/(.*)/))i.pageID=t[1];else if(t=e.match(/^http:\/\/weebly-file\/(.*)/))i.location=t[1];else if(t=e.match(/^http:\/\/weebly-image-full\//))i.fullSized=!0;else if(t=e.match(/^mailto:(.*)/))i.email=t[1];else if(t=e.match(/store\/[pc]\d+\/.*/))i.store=t[0];else{var n=e.replace("weeblylink_new_window","");if(n!=e&&(i.newWindow=!0),t=e.match(/^http:\/\/(.*)/)){var o=t[1].replace(/<\/?[^>]+>/g,"");i.url=o!=t[1]?"":n}else i.url=n}return i}},Q.showCreateLink=function(t){at=!0,t=t||{};var i=!1,o=e(j());if(t.useExisting){var s,r=e(t.ucfpid);if(r.length&&r.val())s=r.val().match(/href=["'](.*?)["']/),s&&(i=Q.parseLinkString(s[1]));else{var a=Q.getSelectionHtml();o.is("a")?i=Q.parseLinkString(o[0].href):a&&(s=a.match(/href=["'](.*?)["']/),s&&(i=Q.parseLinkString(s[1])))}}var l=V();n.open({ucfid:window.currentBox,modal:t.modal,existing:i,remove:t.remove&&!!i,disableFile:t.isConfLink,disableEmail:t.isConfLink,disableNewWindow:t.isConfLink,onFailure:function(t){if(l&&window.currentBox&&(X(),Q.selectRange(l)),t){var i=e("#"+this.ucfid).find('a[href="'+t+'"]');i.replaceWith(i.html())}at=!1},onChoose:function(e,i){t.range=l,t.node=o,Q.setLink(e,i,t),at=!1},onCancel:function(){l&&window.currentBox&&(X(),Q.selectRange(l)),t.onCancel&&t.onCancel(),at=!1}})},Q.updateLink=function(t,i){J();var n=e(j()),o="a:not(.wbutton)";n.length&&(n.is(o)||(n=n.closest(o)))&&(t?(n.attr("href",t),i?n.attr("target","_blank"):n.removeAttr("target")):(q(n[0]),Q.runCommand(window.currentBox,"unlink",null)))},Q.setLink=function(t,n,o){if(o=o||{},o.ucfpid)window.setContentFieldProperty(Weebly.Elements.ucfid,o.ucfpid,"<a"+(t?" href='"+t+"'":"")+(n?" target='_blank'":"")+">"),i.skipRerender=!0,i.onChange(o.ucfpid),window.Behaviour.apply();else if(o.range&&window.currentBox?Q.selectRange(o.range):J(),t)n?(Q.runCommand(window.currentBox,"createLink","_"),e("#"+window.currentBox).find('a[href="_"]').attr({href:t,target:"_blank"})):Q.runCommand(window.currentBox,"createLink",t);else if(o.remove){Q.runCommand(window.currentBox,"unlink");var s=e(j());s.length&&s.is("a")&&(P(),s.replaceWith(s.html()),J())}o.onChoose&&o.onChoose(t,n)},t.extend(window,Q),Q}),_wAMD.define("util/ui/jquery-richtext",["jquery","legacy/weebly_editbox"],function(e,t){e.fn.richText=function(t){window.rangy.init();var i=e.fn.richText,n=e.extend(i.defaults,t||{});return this.each(function(){if(!e(this).hasClass("richtext-editor")){var t=e(this);t.addClass(n.classes+" editable-text richtext-editor"),t.prop("contenteditable","true"),i.showToolbar.bind(this)();for(var o in n)n[o]&&e.fn.richText.commandMap[o]&&i.addCommand.bind(this)(o);n.onBlur&&t.on("blur",n.onBlur),i.formatToolbar.bind(this)()}})},e.fn.richText.defaults={bold:!0,italic:!0,underline:!0,increaseFont:!1,decreaseFont:!1,orderedList:!0,unorderedList:!0,leftAlign:!1,centerAlign:!1,rightAlign:!1,link:!1,removeFormat:!1,classes:"input"},e.fn.richText.commandMap={bold:{title:_W.tl("Bold"),group:"text",classes:"w-icon-text-bold",action:"bold"},italic:{title:_W.tl("Italics"),group:"text",classes:"w-icon-text-italic",action:"italic"},underline:{title:_W.tl("Underline"),group:"text",classes:"w-icon-text-underline",action:"underline"},increaseFont:{title:_W.tl("Increase Font Size"),group:"text",classes:"w-icon-increase",action:"increaseFontSize"},decreaseFont:{title:_W.tl("Decrease Font Size"),group:"text",classes:"w-icon-decrease",action:"decreaseFontSize"},orderedList:{title:_W.tl("Ordered List"),group:"list",classes:"w-icon-ordered-list",action:"insertOrderedList"},unorderedList:{title:_W.tl("Unordered List"),group:"list",classes:"w-icon-unordered-list",action:"insertUnorderedList"},leftAlign:{title:_W.tl("Left Align"),group:"align",classes:"w-icon-text-align-left",action:"justifyLeft"},centerAlign:{title:_W.tl("Center Align"),group:"align",classes:"w-icon-text-align-center",action:"justifyCenter"},rightAlign:{title:_W.tl("Right Align"),group:"align",classes:"w-icon-text-align-right",action:"justifyRight"},link:{title:_W.tl("Link"),group:"web",classes:"w-icon-text-link",action:"promptLink"},removeFormat:{title:_W.tl("Remove Formatting"),group:"edit",classes:"w-icon-text-remove-format",action:"removeFormat"}},e.fn.richText.showToolbar=function(){var i=e(this),n=e('<div class="richtext-toolbar"></div>');i.data("toolbar",n),i.before(n),e(this).siblings(".richtext-toolbar").on("mousedown",".command",function(i){t.runCommand(0,e(i.target).data("command"),!1),i.preventDefault(),e(document).off("mouseup",window.clickHandler),e(window).one("mouseup",function(){e(document).on("mouseup",window.clickHandler)})})},e.fn.richText.addCommand=function(t){if(e.fn.richText.commandMap.hasOwnProperty(t)){var i=e.fn.richText.commandMap[t];e(this).data("toolbar").append(e("<i>",{"data-command":i.action,"class":"command btn-com "+i.classes+" group-"+i.group,title:i.title}))}},e.fn.richText.formatToolbar=function(){var t=e(this).data("toolbar"),i=[];e.each(e.fn.richText.commandMap,function(e,n){i.indexOf(n.group)<0&&t.find(".group-"+n.group).length>0&&i.push(n.group)}),e.each(i,function(e,n){e<i.length-1&&t.find(".group-"+n+":last").after('<span class="separator"></span>')})}}),_wAMD.define("commerce/editor/store/product/detail/ProductMetaView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/product/detail/meta","util/ui/jquery-richtext"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({className:"product-meta-view scaffold-com",template:i.compile(o),templateHelpers:function(){var e=this;return{inventory_enabled:function(){return Weebly.Restrictions.hasAccess("com_inventory_tracking")},currency:function(){return n.commerce.storefrontSettings.get("currency")},is_digital_download:function(){return"digital"==e.model.get("skus").first().get("product_type")},show_type_selection:function(){return e.options.productIsNew&&!e.options.model.copyProduct},can_inventory:function(){return Weebly.Restrictions.hasAccess("com_inventory_tracking")},can_tax:function(){return Weebly.Restrictions.hasAccess("com_tax_settings")},can_shipping:function(){return Weebly.Restrictions.hasAccess("com_shipping_settings")},can_digital:function(){return Weebly.Restrictions.hasAccess("com_digital_products")}}},events:{"change input":"change","change textarea":"change","click input":"onInputClick","click .inventory-upgrade a":"alertInventoryUpgrade","blur [name=short_description]":"change","change #editor_commerce_product_type":function(e){this.changeProductType(e),this.change(e)},"mousedown .w-checkbox-container.disabled":"alertInventoryUpgrade"},initialize:function(e){this.options=e},onRender:function(){this.$el.find("#editor_commerce_product_type").wSelectbox({theme:"com"})},onShow:function(){this.$("input[type=checkbox]").wCheckbox(),this.$el.find("#editor_commerce_product_name").focus();var e=this.$el.find("input:last");e.data("wcheckbox")&&(e=e.data("wcheckbox").container),e.on("keydown",function(e){e.shiftKey||9!==e.which||n.commerce.vent.trigger("store:product:variant:focus",e)});var t=this.$el.find("#editor_commerce_product_short_description");Weebly.Linker.close(),t.richText({link:!0,increaseFont:!0,decreaseFont:!0,removeFormat:!0})},onInputClick:function(e){var t=e.currentTarget;-1!==_.indexOf(["price","inventory"],t.name)&&t.value<=0&&t.select()},change:function(t){var i=null,o=t.target.getAttribute("name"),s=this.$(t.target);switch(o){case"name":i=s.val(),this.model.set(o,i);break;case"short_description":i=s.html(),(i.length||null!=this.model.get(o))&&this.model.set(o,i);break;case"track_inventory":case"taxable":checked=!!s.attr("checked"),this.model.set(o,checked);break;case"price":case"sale_price":case"weight":case"inventory":i=s.val(),""===e.trim(i)?(i=null,s.val("")):i=parseFloat(i),this.model.get("skus").first().set(o,i);break;case"sku":i=s.val(),this.model.get("skus").first().set(o,i);break;case"product_type":i=s.val(),"digital"!=i||Weebly.Restrictions.hasAccess("com_digital_products")?this.model.get("skus").first().set(o,i):this.$el.find("#editor_commerce_product_type").val("physical")}n.commerce.vent.trigger("store:product:validate",o)},changeProductType:function(){var e=this.$el.find("#editor_commerce_product_type").val(),t=this.$el.find(".editor_commerce_physical_spec");"physical"==e?t.show():"digital"==e&&(Weebly.Restrictions.hasAccess("com_digital_products")?t.hide():n.vent.trigger("billing:upgrade:window",{restrictionID:"com_digital_products",restrictionType:"feature",refer:"commerce"}))},alertInventoryUpgrade:function(t){t.preventDefault();var i=e(t.currentTarget).siblings("input").data("required-feature");Weebly.Restrictions.hasAccess(i)||n.vent.trigger("billing:upgrade:window",{restrictionID:i,restrictionType:"feature",refer:"commerce"})}});return s}),_wAMD.define("components/image-collector/MultiImageCollectorView",["jquery","backbone","underscore","components/image-collector/AbstractImageCollectorView"],function(e,t,i,n){var o=n.extend({className:function(){var e=i.result(n.prototype,"className");return e+" multi-image-collector"}});return o}),_wAMD.define("commerce/editor/store/product/detail/ProductImageView",["jquery","backbone","mustache","editor/app","components/image-collector/MultiImageCollectorView","util/ui/ImageAspectRatio","tpl!commerce/editor/store/product/detail/image"],function(e,t,i,n,o,s,r){var a=i.compile(r),l=o.extend({className:"product-images-view image-collector",imageTemplate:function(e){var t=n.commerce.storefrontSettings.getRatioAsNumber("product_image_ratio"),i=e.get("site_product_image_id")||e.cid;return a({id:i,content:s("product-image-collector",e,320,t)})},templateHelpers:function(){var e=_.result(o.prototype,"templateHelpers")||{};return e.title=_W.tl("Product Images"),e},initialize:function(e){return e.uploadOptions={target:".w-image-upload-target",type:"image",multipleFiles:!0,params:{ucfid:window.com_currentSite,ucfpid:this.model.get("site_product_id"),type:"com_product_image",cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}},o.prototype.initialize.apply(this,arguments)},initializeScroll:function(){this.$el.find(".image-collector-gallery-inner").weeblyScroll("destroy").weeblyScroll()},updateScroll:function(){this.$el.find(".image-collector-gallery-inner").weeblyScroll("update")},onShow:function(){var e=this.model.get("images"),t=this.model.get("image_order")||[];this.renderImages(e,t,"site_product_image_id"),this.initializeScroll(),o.prototype.onShow.apply(this,arguments)},onUploadSuccess:function(e){var t=this.model.get("images"),i=this.model.get("image_order")||[],o=t.add(e);i.push(o.get("site_product_image_id")),this.model.set("image_order",i),void 0!=e.product_image_ratio&&(n.commerce.storefrontSettings.set("product_image_ratio",e.product_image_ratio),n.commerce.storefrontSettings.commit(),n.vent.trigger("store:setting:applySettingStyles")),this.addImage(o),this.updateScroll()},onSWFUploadComplete:function(){n.commerce.vent.trigger("store:product:images:render")},onUploadError:function(){},onSortupdate:function(e){this.model.set("image_order",e)},onDeleteImage:function(e){var t=this.model,i=_.without(t.get("image_order"),Number(e)),n=t.get("images").findWhere({owner_id:t.get("owner_id"),site_id:t.get("site_id"),site_product_id:t.get("site_product_id"),site_product_image_id:Number(e)});t.get("images").remove(n),t.set("image_order",i),this.updateScroll()},remove:function(){this.$el.find(".image-collector-gallery-inner").weeblyScroll("destroy"),o.prototype.remove.apply(this,arguments)},copyProductImages:function(){if(this.model.copyProduct){var t=this.model.copyProduct,i=this;return Weebly.Commerce.RPC.Product.copyImages(com_userID,com_currentSite,t.get("site_product_id"),this.model.get("site_product_id")).done(function(t){t.success?e.each(t.data,function(e,t){i.onUploadSuccess(t)}):console.log(t.message)})}}});return l}),function(e){"object"==typeof exports?module.exports=e(module.exports,require("underscore"),require("backbone")):"function"==typeof define&&define.amd?(_wAMD.define("window",[],function(){return window}),_wAMD.define("backgrid",["window","underscore","backbone"],e)):e(this,this._,this.Backbone)}(function(e,t,i){function n(e,t,i){var n=t-(e+"").length;n=0>n?0:n;for(var o="",s=0;n>s;s++)o+=i;return o+e}var o="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||o.trim()){o="["+o+"]";var s=new RegExp("^"+o+o+"*"),r=new RegExp(o+o+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(s,"").replace(r,"")}}var a=i.$,l=e.Backgrid={Extension:{},resolveNameToClass:function(e,i){if(t.isString(e)){var n=t.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+i,o=l[n]||l.Extension[n];if(t.isUndefined(o))throw new ReferenceError("Class '"+n+"' not found");return o}return e},callByNeed:function(){var e=arguments[0];if(!t.isFunction(e))return e;var i=arguments[1],n=[].slice.call(arguments,2);return e.apply(i,n+""?n:[])}};t.extend(l,i.Events);var c=l.Command=function(e){t.extend(this,{altKey:!!e.altKey,"char":e["char"],charCode:e.charCode,ctrlKey:!!e.ctrlKey,key:e.key,keyCode:e.keyCode,locale:e.locale,location:e.location,metaKey:!!e.metaKey,repeat:!!e.repeat,shiftKey:!!e.shiftKey,which:e.which})};t.extend(c.prototype,{moveUp:function(){return 38==this.keyCode},moveDown:function(){return 40===this.keyCode},moveLeft:function(){return this.shiftKey&&9===this.keyCode},moveRight:function(){return!this.shiftKey&&9===this.keyCode},save:function(){return 13===this.keyCode},cancel:function(){return 27===this.keyCode},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var u=l.CellFormatter=function(){};t.extend(u.prototype,{fromRaw:function(e){return e},toRaw:function(e){return e}});var d=l.NumberFormatter=function(e){if(t.extend(this,this.defaults,e||{}),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};d.prototype=new u,t.extend(d.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(e){if(t.isNull(e)||t.isUndefined(e))return"";e=e.toFixed(~~this.decimals);var i=e.split("."),n=i[0],o=i[1]?(this.decimalSeparator||".")+i[1]:"";return n.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+o},toRaw:function(e){if(e=e.trim(),""===e)return null;for(var i="",n=e.split(this.orderSeparator),o=0;o<n.length;o++)i+=n[o];var s=i.split(this.decimalSeparator);i="";for(var o=0;o<s.length;o++)i=i+s[o]+".";"."===i[i.length-1]&&(i=i.slice(0,i.length-1));var r=1*(1*i).toFixed(~~this.decimals);return t.isNumber(r)&&!t.isNaN(r)?r:void 0}});var h=l.PercentFormatter=function(){l.NumberFormatter.apply(this,arguments)};h.prototype=new l.NumberFormatter,t.extend(h.prototype,{defaults:t.extend({},d.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(e){var t=[].slice.call(arguments,1);return t.unshift(e*this.multiplier),(d.prototype.fromRaw.apply(this,t)||"0")+this.symbol},toRaw:function(e){var i=e.split(this.symbol);if(i&&i[0]&&""===i[1]||null==i[1]){var n=d.prototype.toRaw.call(this,i[0]);return t.isUndefined(n)?n:n/this.multiplier}}});var p=l.DatetimeFormatter=function(e){if(t.extend(this,this.defaults,e||{}),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};p.prototype=new u,t.extend(p.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(e,i){if(""===(e+"").trim())return null;var o,s=null;if(t.isNumber(e)){var r=new Date(e);o=n(r.getUTCFullYear(),4,0)+"-"+n(r.getUTCMonth()+1,2,0)+"-"+n(r.getUTCDate(),2,0),s=n(r.getUTCHours(),2,0)+":"+n(r.getUTCMinutes(),2,0)+":"+n(r.getUTCSeconds(),2,0)}else{e=e.trim();var a=e.split(this.ISO_SPLITTER_RE)||[];o=this.DATE_RE.test(a[0])?a[0]:"",s=o&&a[1]?a[1]:this.TIME_RE.test(a[0])?a[0]:""}var l=this.DATE_RE.exec(o)||[],c=this.TIME_RE.exec(s)||[];if(i){if(this.includeDate&&t.isUndefined(l[0]))return;if(this.includeTime&&t.isUndefined(c[0]))return;if(!this.includeDate&&o)return;if(!this.includeTime&&s)return}var r=new Date(Date.UTC(1*l[1]||0,1*l[2]-1||0,1*l[3]||0,1*c[1]||null,1*c[2]||null,1*c[3]||null,1*c[5]||null)),u="";return this.includeDate&&(u=n(r.getUTCFullYear(),4,0)+"-"+n(r.getUTCMonth()+1,2,0)+"-"+n(r.getUTCDate(),2,0)),this.includeTime&&(u=u+(this.includeDate?"T":"")+n(r.getUTCHours(),2,0)+":"+n(r.getUTCMinutes(),2,0)+":"+n(r.getUTCSeconds(),2,0),this.includeMilli&&(u=u+"."+n(r.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(u+="Z"),u},fromRaw:function(e){return t.isNull(e)||t.isUndefined(e)?"":this._convert(e)},toRaw:function(e){return this._convert(e,!0)}});var f=l.StringFormatter=function(){};f.prototype=new u,t.extend(f.prototype,{fromRaw:function(e){return t.isUndefined(e)||t.isNull(e)?"":e+""}});var m=l.EmailFormatter=function(){};m.prototype=new u,t.extend(m.prototype,{toRaw:function(e){var i=e.trim().split("@");return 2===i.length&&t.all(i)?e:void 0}});var g=l.SelectFormatter=function(){};g.prototype=new u,t.extend(g.prototype,{fromRaw:function(e){return t.isArray(e)?e:null!=e?[e]:[]}});var v=l.CellEditor=i.View.extend({initialize:function(e){this.formatter=e.formatter,this.column=e.column,this.column instanceof A||(this.column=new A(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(e,t){return(null==t||t.get("name")==this.column.get("name"))&&this.$el.select(),this}}),b=l.InputCellEditor=v.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(e){b.__super__.initialize.apply(this,arguments),e.placeholder&&this.$el.attr("placeholder",e.placeholder)},render:function(){var e=this.model;return this.$el.val(this.formatter.fromRaw(e.get(this.column.get("name")),e)),this},saveOrCancel:function(e){var i=this.formatter,n=this.model,o=this.column,s=new c(e),r="blur"===e.type;if(s.moveUp()||s.moveDown()||s.moveLeft()||s.moveRight()||s.save()||r){e.preventDefault(),e.stopPropagation();var a=this.$el.val(),l=i.toRaw(a,n);t.isUndefined(l)?n.trigger("backgrid:error",n,o,a):(n.set(o.get("name"),l),n.trigger("backgrid:edited",n,o,s))}else s.cancel()&&(e.stopPropagation(),n.trigger("backgrid:edited",n,o,s))},postRender:function(e,t){if(null==t||t.get("name")==this.column.get("name"))if("right"===this.$el.css("text-align")){var i=this.$el.val();this.$el.select().val(null).val(i)}else this.$el.select();return this}}),y=l.Cell=i.View.extend({tagName:"td",formatter:u,editor:b,events:{click:"enterEditMode"},initialize:function(e){this.column=e.column,this.column instanceof A||(this.column=new A(this.column));var i=this.column,n=this.model,o=this.$el,s=l.resolveNameToClass(i.get("formatter")||this.formatter,"Formatter");t.isFunction(s.fromRaw)||t.isFunction(s.toRaw)||(s=new s),this.formatter=s,this.editor=l.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(n,"change:"+i.get("name"),function(){o.hasClass("editor")||this.render()}),this.listenTo(n,"backgrid:error",this.renderError),this.listenTo(i,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&o.toggleClass(i,t[i])}),l.callByNeed(i.editable(),i,n)&&o.addClass("editable"),l.callByNeed(i.sortable(),i,n)&&o.addClass("sortable"),l.callByNeed(i.renderable(),i,n)&&o.addClass("renderable")},render:function(){this.$el.empty();var e=this.model;return this.$el.text(this.formatter.fromRaw(e.get(this.column.get("name")),e)),this.delegateEvents(),this},enterEditMode:function(){var e=this.model,t=this.column,i=l.callByNeed(t.editable(),t,e);
i&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),e.trigger("backgrid:edit",e,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),e.trigger("backgrid:editing",e,t,this,this.currentEditor))},renderError:function(e,t){(null==t||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),y.__super__.remove.apply(this,arguments)}}),w=l.StringCell=y.extend({className:"string-cell",formatter:f}),_=l.UriCell=y.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(e){_.__super__.initialize.apply(this,arguments),this.title=e.title||this.title,this.target=e.target||this.target},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(e,this.model);return this.$el.append(a("<a>",{tabIndex:-1,href:e,title:this.title||t,target:this.target}).text(t)),this.delegateEvents(),this}});l.EmailCell=w.extend({className:"email-cell",formatter:m,render:function(){this.$el.empty();var e=this.model,t=this.formatter.fromRaw(e.get(this.column.get("name")),e);return this.$el.append(a("<a>",{tabIndex:-1,href:"mailto:"+t,title:t}).text(t)),this.delegateEvents(),this}});var M=l.NumberCell=y.extend({className:"number-cell",decimals:d.prototype.defaults.decimals,decimalSeparator:d.prototype.defaults.decimalSeparator,orderSeparator:d.prototype.defaults.orderSeparator,formatter:d,initialize:function(){M.__super__.initialize.apply(this,arguments);var e=this.formatter;e.decimals=this.decimals,e.decimalSeparator=this.decimalSeparator,e.orderSeparator=this.orderSeparator}});l.IntegerCell=M.extend({className:"integer-cell",decimals:0});var C=l.PercentCell=M.extend({className:"percent-cell",multiplier:h.prototype.defaults.multiplier,symbol:h.prototype.defaults.symbol,formatter:h,initialize:function(){C.__super__.initialize.apply(this,arguments);var e=this.formatter;e.multiplier=this.multiplier,e.symbol=this.symbol}}),x=l.DatetimeCell=y.extend({className:"datetime-cell",includeDate:p.prototype.defaults.includeDate,includeTime:p.prototype.defaults.includeTime,includeMilli:p.prototype.defaults.includeMilli,formatter:p,initialize:function(){x.__super__.initialize.apply(this,arguments);var e=this.formatter;e.includeDate=this.includeDate,e.includeTime=this.includeTime,e.includeMilli=this.includeMilli;var i=this.includeDate?"YYYY-MM-DD":"";i+=this.includeDate&&this.includeTime?"T":"",i+=this.includeTime?"HH:mm:ss":"",i+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:t.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:i})})}});l.DateCell=x.extend({className:"date-cell",includeTime:!1}),l.TimeCell=x.extend({className:"time-cell",includeDate:!1});var k=l.BooleanCellEditor=v.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var e=this.model,t=this.formatter.fromRaw(e.get(this.column.get("name")),e);return this.$el.prop("checked",t),this},enterOrExitEditMode:function(e){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new c(e))}},saveOrCancel:function(e){var t=this.model,i=this.column,n=this.formatter,o=new c(e);if(o.passThru()&&"change"!=e.type)return!0;o.cancel()&&(e.stopPropagation(),t.trigger("backgrid:edited",t,i,o));var s=this.$el;if(o.save()||o.moveLeft()||o.moveRight()||o.moveUp()||o.moveDown()){e.preventDefault(),e.stopPropagation();var r=n.toRaw(s.prop("checked"),t);t.set(i.get("name"),r),t.trigger("backgrid:edited",t,i,o)}else if("change"==e.type){var r=n.toRaw(s.prop("checked"),t);t.set(i.get("name"),r),s.focus()}}});l.BooleanCell=y.extend({className:"boolean-cell",editor:k,events:{click:"enterEditMode"},render:function(){this.$el.empty();var e=this.model,t=this.column,i=l.callByNeed(t.editable(),t,e);return this.$el.append(a("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(e.get(t.get("name")),e),disabled:!i})),this.delegateEvents(),this}});var S=l.SelectCellEditor=v.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:t.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null}),setOptionValues:function(e){this.optionValues=e,this.optionValues=t.result(this,"optionValues")},setMultiple:function(e){this.multiple=e,this.$el.prop("multiple",e)},_renderOptions:function(e,i){for(var n="",o=0;o<e.length;o++)n+=this.template({text:e[o][0],value:e[o][1],selected:t.indexOf(i,e[o][1])>-1});return n},render:function(){this.$el.empty();var e=t.result(this,"optionValues"),i=this.model,n=this.formatter.fromRaw(i.get(this.column.get("name")),i);if(!t.isArray(e))throw new TypeError("optionValues must be an array");for(var o=null,s=null,o=null,r=null,l=null,c=0;c<e.length;c++){var o=e[c];if(t.isArray(o))s=o[0],o=o[1],this.$el.append(this.template({text:s,value:o,selected:t.indexOf(n,o)>-1}));else{if(!t.isObject(o))throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");r=o.name,l=a("<optgroup></optgroup>",{label:r}),l.append(this._renderOptions.call(this,o.values,n)),this.$el.append(l)}}return this.delegateEvents(),this},save:function(){var e=this.model,t=this.column;e.set(t.get("name"),this.formatter.toRaw(this.$el.val(),e))},close:function(e){var t=this.model,i=this.column,n=new c(e);n.cancel()?(e.stopPropagation(),t.trigger("backgrid:edited",t,i,new c(e))):(n.save()||n.moveLeft()||n.moveRight()||n.moveUp()||n.moveDown()||"blur"==e.type)&&(e.preventDefault(),e.stopPropagation(),this.save(e),t.trigger("backgrid:edited",t,i,new c(e)))}}),T=l.SelectCell=y.extend({className:"select-cell",editor:S,multiple:!1,formatter:g,optionValues:void 0,delimiter:", ",initialize:function(){T.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")==this.column.get("name")&&(n.setOptionValues(this.optionValues),n.setMultiple(this.multiple))})},render:function(){this.$el.empty();var e=t.result(this,"optionValues"),i=this.model,n=this.formatter.fromRaw(i.get(this.column.get("name")),i),o=[];try{if(!t.isArray(e)||t.isEmpty(e))throw new TypeError;for(var s=0;s<n.length;s++)for(var r=n[s],a=0;a<e.length;a++){var l=e[a];if(t.isArray(l)){var c=l[0],l=l[1];l==r&&o.push(c)}else{if(!t.isObject(l))throw new TypeError;for(var u=l.values,d=0;d<u.length;d++){var h=u[d];h[1]==r&&o.push(h[0])}}}this.$el.append(o.join(this.delimiter))}catch(p){if(p instanceof TypeError)throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw p}return this.delegateEvents(),this}}),A=l.Column=i.Model.extend({defaults:{name:void 0,label:void 0,sortable:!0,editable:!0,renderable:!0,formatter:void 0,sortType:"cycle",sortValue:void 0,direction:null,cell:void 0,headerCell:void 0,headerClass:void 0},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var e=l.resolveNameToClass(this.get("headerCell"),"HeaderCell"),t=l.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:t,headerCell:e},{silent:!0})},sortValue:function(){var e=this.get("sortValue");return t.isString(e)?this[e]:t.isFunction(e)?e:function(e,t){return e.get(t)}}});t.each(["sortable","renderable","editable"],function(e){A.prototype[e]=function(){var i=this.get(e);return t.isString(i)?this[i]:t.isFunction(i)?i:!!i}});var D=l.Columns=i.Collection.extend({model:A}),E=l.Row=i.View.extend({tagName:"tr",initialize:function(e){var t=this.columns=e.columns;t instanceof i.Collection||(t=this.columns=new D(t));for(var n=this.cells=[],o=0;o<t.length;o++)n.push(this.makeCell(t.at(o),e));this.listenTo(t,"add",function(t,i){var o=i.indexOf(t),s=this.makeCell(t,e);n.splice(o,0,s);var r=this.$el;0===o?r.prepend(s.render().$el):o===i.length-1?r.append(s.render().$el):r.children().eq(o).before(s.render().$el)}),this.listenTo(t,"remove",function(e,t,i){n[i.index].remove(),n.splice(i.index,1)})},makeCell:function(e){return new(e.get("cell"))({column:e,model:this.model})},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.cells.length;t++)e.appendChild(this.cells[t].render().el);return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.cells.length;e++){var t=this.cells[e];t.remove.apply(t,arguments)}return i.View.prototype.remove.apply(this,arguments)}}),P=l.EmptyRow=i.View.extend({tagName:"tr",emptyText:null,initialize:function(e){this.emptyText=e.emptyText,this.columns=e.columns},render:function(){this.$el.empty();var e=document.createElement("td");return e.setAttribute("colspan",this.columns.length),e.appendChild(document.createTextNode(t.result(this,"emptyText"))),this.el.className="empty",this.el.appendChild(e),this}}),R=l.HeaderCell=i.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(e){this.column=e.column,this.column instanceof A||(this.column=new A(this.column));var t=this.column,i=this.collection,n=this.$el;this.listenTo(t,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&n.toggleClass(i,t[i])}),this.listenTo(t,"change:direction",this.setCellDirection),this.listenTo(t,"change:name change:label",this.render),l.callByNeed(t.editable(),t,i)&&n.addClass("editable"),l.callByNeed(t.sortable(),t,i)&&n.addClass("sortable"),l.callByNeed(t.renderable(),t,i)&&n.addClass("renderable"),this.listenTo(i.fullCollection||i,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending"),this.column.set("direction",null)},setCellDirection:function(e,t){this.$el.removeClass("ascending").removeClass("descending"),e.cid==this.column.cid&&this.$el.addClass(t)},onClick:function(e){function t(e,t){"ascending"===n.get("direction")?o.trigger(s,t,"descending"):"descending"===n.get("direction")?o.trigger(s,t,null):o.trigger(s,t,"ascending")}function i(e,t){"ascending"===n.get("direction")?o.trigger(s,t,"descending"):o.trigger(s,t,"ascending")}e.preventDefault();var n=this.column,o=this.collection,s="backgrid:sort",r=l.callByNeed(n.sortable(),n,this.collection);if(r){var a=n.get("sortType");"toggle"===a?i(this,n):t(this,n)}},render:function(){this.$el.empty();var e,t=this.column,i=l.callByNeed(t.sortable(),t,this.collection);return e=i?a("<a>").text(t.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(t.get("label")),this.$el.append(e),this.$el.addClass(t.get("name")),this.$el.addClass(t.get("direction")),this.$el.addClass(t.get("headerClass")),this.delegateEvents(),this}});l.HeaderRow=l.Row.extend({requiredOptions:["columns","collection"],initialize:function(){l.Row.prototype.initialize.apply(this,arguments)},makeCell:function(e,t){var i=e.get("headerCell")||t.headerCell||R;return i=new i({column:e,collection:this.collection})}});var z=l.Header=i.View.extend({tagName:"thead",initialize:function(e){this.columns=e.columns,this.columns instanceof i.Collection||(this.columns=new D(this.columns)),this.row=new l.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),i.View.prototype.remove.apply(this,arguments)}}),O=l.Body=i.View.extend({tagName:"tbody",initialize:function(e){this.columns=e.columns,this.columns instanceof i.Collection||(this.columns=new D(this.columns)),this.row=e.row||E,this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this.emptyText=e.emptyText,this._unshiftEmptyRowMayBe();var t=this.collection;this.listenTo(t,"add",this.insertRow),this.listenTo(t,"remove",this.removeRow),this.listenTo(t,"sort",this.refresh),this.listenTo(t,"reset",this.refresh),this.listenTo(t,"backgrid:sort",this.sort),this.listenTo(t,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){0===this.rows.length&&null!=this.emptyText&&this.rows.unshift(new P({emptyText:this.emptyText,columns:this.columns}))},insertRow:function(e,t,n){if(this.rows[0]instanceof P&&this.rows.pop().remove(),!(t instanceof i.Collection||n))return this.collection.add(e,n=t),void 0;var o=new this.row({columns:this.columns,model:e}),s=t.indexOf(e);this.rows.splice(s,0,o);var r=this.$el,a=r.children(),l=o.render().$el;return s>=a.length?r.append(l):a.eq(s).before(l),this},removeRow:function(e,i,n){return n?((t.isUndefined(n.render)||n.render)&&this.rows[n.index].remove(),this.rows.splice(n.index,1),this._unshiftEmptyRowMayBe(),this):(this.collection.remove(e,n=i),this._unshiftEmptyRowMayBe(),void 0)},refresh:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].remove();return this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.rows.length;t++){var i=this.rows[t];e.appendChild(i.render().el)}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];t.remove.apply(t,arguments)}return i.View.prototype.remove.apply(this,arguments)},sort:function(e,n){if(!t.contains(["ascending","descending",null],n))throw new RangeError('direction must be one of "ascending", "descending" or `null`');t.isString(e)&&(e=this.columns.findWhere({name:e}));var o,s=this.collection;o="ascending"===n?-1:"descending"===n?1:null;var r=this.makeComparator(e.get("name"),o,o?e.sortValue():function(e){return 1*e.cid.replace("c","")});return i.PageableCollection&&s instanceof i.PageableCollection?(s.setSorting(o&&e.get("name"),o,{sortValue:e.sortValue()}),s.fullCollection?(null==s.fullCollection.comparator&&(s.fullCollection.comparator=r),s.fullCollection.sort(),s.trigger("backgrid:sorted",e,n,s)):s.fetch({reset:!0,success:function(){s.trigger("sort"),e.set("direction",n),s.trigger("backgrid:sorted",e,n,s)}})):(s.comparator=r,s.sort(),s.trigger("backgrid:sorted",e,n,s)),e.set("direction",n),this},makeComparator:function(e,t,i){return function(n,o){var s,r=i(n,e),a=i(o,e);return 1===t&&(s=r,r=a,a=s),r===a?0:a>r?-1:1}},moveToNextCell:function(e,t,i){var n,o,s,r,a,c=this.collection.indexOf(e),u=this.columns.indexOf(t);if(this.rows[c].cells[u].exitEditMode(),i.moveUp()||i.moveDown()||i.moveLeft()||i.moveRight()||i.save()){var d=this.columns.length,h=d*this.collection.length;if(i.moveUp()||i.moveDown()){r=c+(i.moveUp()?-1:1);var p=this.rows[r];p?(n=p.cells[u],l.callByNeed(n.column.editable(),n.column,e)&&(n.enterEditMode(),e.trigger("backgrid:next",r,u,!1))):e.trigger("backgrid:next",r,u,!0)}else if(i.moveLeft()||i.moveRight()){for(var f=i.moveRight(),m=c*d+u+(f?1:-1);m>=0&&h>m;f?m++:m--)if(r=~~(m/d),a=m-r*d,n=this.rows[r].cells[a],o=l.callByNeed(n.column.renderable(),n.column,n.model),s=l.callByNeed(n.column.editable(),n.column,e),o&&s){n.enterEditMode(),e.trigger("backgrid:next",r,a,!1);break}m==h&&e.trigger("backgrid:next",~~(m/d),m-r*d,!0)}}return this}});return l.Footer=i.View.extend({tagName:"tfoot",initialize:function(e){this.columns=e.columns,this.columns instanceof i.Collection||(this.columns=new l.Columns(this.columns))}}),l.Grid=i.View.extend({tagName:"table",className:"backgrid",header:z,body:O,footer:null,initialize:function(e){e.columns instanceof i.Collection||(e.columns=new D(e.columns)),this.columns=e.columns;var n=t.omit(e,["el","id","attributes","className","tagName","events"]);this.body=e.body||this.body,this.body=new this.body(n),this.header=e.header||this.header,this.header&&(this.header=new this.header(n)),this.footer=e.footer||this.footer,this.footer&&(this.footer=new this.footer(n)),this.listenTo(this.columns,"reset",function(){this.header&&(this.header=new(this.header.remove().constructor)(n)),this.body=new(this.body.remove().constructor)(n),this.footer&&(this.footer=new(this.footer.remove().constructor)(n)),this.render()})},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),i.View.prototype.remove.apply(this,arguments)}}),l});var lunr=function(e){var t=new lunr.Index;return t.pipeline.add(lunr.stopWordFilter,lunr.stemmer),e&&e.call(t,t),t};lunr.version="0.4.4","undefined"!=typeof module&&(module.exports=lunr),lunr.utils={},lunr.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),lunr.utils.zeroFillArray=function(){var e=[0];return function(t){for(;e.length<t;)e=e.concat(e);return e.slice(0,t)}}(),lunr.EventEmitter=function(){this.events={}},lunr.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),i=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");i.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},lunr.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var i=this.events[e].indexOf(t);this.events[e].splice(i,1),this.events[e].length||delete this.events[e]}},lunr.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},lunr.EventEmitter.prototype.hasHandler=function(e){return e in this.events},lunr.tokenizer=function(e){if(!arguments.length||null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return e.toLowerCase()});for(var t=e.toString().replace(/^\s+/,""),i=t.length-1;i>=0;i--)if(/\S/.test(t.charAt(i))){t=t.substring(0,i+1);break}return t.split(/\s+/).map(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase()})},lunr.Pipeline=function(){this._stack=[]},lunr.Pipeline.registeredFunctions={},lunr.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&lunr.utils.warn("Overwriting existing registered function: "+t),e.label=t,lunr.Pipeline.registeredFunctions[e.label]=e},lunr.Pipeline.warnIfFunctionNotRegistered=function(e){var t=e.label&&e.label in this.registeredFunctions;t||lunr.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},lunr.Pipeline.load=function(e){var t=new lunr.Pipeline;return e.forEach(function(e){var i=lunr.Pipeline.registeredFunctions[e];if(!i)throw new Error("Cannot load un-registered function: "+e);t.add(i)}),t},lunr.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){lunr.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},lunr.Pipeline.prototype.after=function(e,t){lunr.Pipeline.warnIfFunctionNotRegistered(t);var i=this._stack.indexOf(e)+1;this._stack.splice(i,0,t)},lunr.Pipeline.prototype.before=function(e,t){lunr.Pipeline.warnIfFunctionNotRegistered(t);var i=this._stack.indexOf(e);this._stack.splice(i,0,t)},lunr.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);this._stack.splice(t,1)},lunr.Pipeline.prototype.run=function(e){for(var t=[],i=e.length,n=this._stack.length,o=0;i>o;o++){for(var s=e[o],r=0;n>r&&(s=this._stack[r](s,o,e),void 0!==s);r++);void 0!==s&&t.push(s)}return t},lunr.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return lunr.Pipeline.warnIfFunctionNotRegistered(e),e.label})},lunr.Vector=function(e){this.elements=e},lunr.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=0,i=this.elements,n=i.length,o=0;n>o;o++)e=i[o],t+=e*e;return this._magnitude=Math.sqrt(t)},lunr.Vector.prototype.dot=function(e){for(var t=this.elements,i=e.elements,n=t.length,o=0,s=0;n>s;s++)o+=t[s]*i[s];return o},lunr.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},lunr.Vector.prototype.toArray=function(){return this.elements},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},lunr.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){~this.indexOf(e)||this.elements.splice(this.locationFor(e),0,e)},this),this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},lunr.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},lunr.SortedSet.prototype.indexOf=function(e,t,i){var t=t||0,i=i||this.elements.length,n=i-t,o=t+Math.floor(n/2),s=this.elements[o];return 1>=n?s===e?o:-1:e>s?this.indexOf(e,o,i):s>e?this.indexOf(e,t,o):s===e?o:void 0},lunr.SortedSet.prototype.locationFor=function(e,t,i){var t=t||0,i=i||this.elements.length,n=i-t,o=t+Math.floor(n/2),s=this.elements[o];if(1>=n){if(s>e)return o;if(e>s)return o+1}return e>s?this.locationFor(e,o,i):s>e?this.locationFor(e,t,o):void 0},lunr.SortedSet.prototype.intersect=function(e){for(var t=new lunr.SortedSet,i=0,n=0,o=this.length,s=e.length,r=this.elements,a=e.elements;;){if(i>o-1||n>s-1)break;r[i]!==a[n]?r[i]<a[n]?i++:r[i]>a[n]&&n++:(t.add(r[i]),i++,n++)}return t},lunr.SortedSet.prototype.clone=function(){var e=new lunr.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},lunr.SortedSet.prototype.union=function(e){var t,i,n;return this.length>=e.length?(t=this,i=e):(t=e,i=this),n=t.clone(),n.add.apply(n,i.toArray()),n},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},lunr.Index=function(){this._fields=[],this._ref="id",this.pipeline=new lunr.Pipeline,this.documentStore=new lunr.Store,this.tokenStore=new lunr.TokenStore,this.corpusTokens=new lunr.SortedSet,this.eventEmitter=new lunr.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},lunr.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},lunr.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},lunr.Index.load=function(e){e.version!==lunr.version&&lunr.utils.warn("version mismatch: current "+lunr.version+" importing "+e.version);var t=new this;return t._fields=e.fields,t._ref=e.ref,t.documentStore=lunr.Store.load(e.documentStore),t.tokenStore=lunr.TokenStore.load(e.tokenStore),t.corpusTokens=lunr.SortedSet.load(e.corpusTokens),t.pipeline=lunr.Pipeline.load(e.pipeline),t},lunr.Index.prototype.field=function(e,t){var t=t||{},i={name:e,boost:t.boost||1};return this._fields.push(i),this},lunr.Index.prototype.ref=function(e){return this._ref=e,this},lunr.Index.prototype.add=function(e,t){var i={},n=new lunr.SortedSet,o=e[this._ref],t=void 0===t?!0:t;this._fields.forEach(function(t){var o=this.pipeline.run(lunr.tokenizer(e[t.name]));i[t.name]=o,lunr.SortedSet.prototype.add.apply(n,o)},this),this.documentStore.set(o,n),lunr.SortedSet.prototype.add.apply(this.corpusTokens,n.toArray());for(var s=0;s<n.length;s++){var r=n.elements[s],a=this._fields.reduce(function(e,t){var n=i[t.name].length;if(!n)return e;var o=i[t.name].filter(function(e){return e===r}).length;return e+o/n*t.boost},0);this.tokenStore.add(r,{ref:o,tf:a})}t&&this.eventEmitter.emit("add",e,this)},lunr.Index.prototype.remove=function(e,t){var i=e[this._ref],t=void 0===t?!0:t;if(this.documentStore.has(i)){var n=this.documentStore.get(i);this.documentStore.remove(i),n.forEach(function(e){this.tokenStore.remove(e,i)},this),t&&this.eventEmitter.emit("remove",e,this)}},lunr.Index.prototype.update=function(e,t){var t=void 0===t?!0:t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},lunr.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty(this._idfCache,t))return this._idfCache[t];var i=this.tokenStore.count(e),n=1;return i>0&&(n=1+Math.log(this.tokenStore.length/i)),this._idfCache[t]=n},lunr.Index.prototype.search=function(e){var t=this.pipeline.run(lunr.tokenizer(e)),i=lunr.utils.zeroFillArray(this.corpusTokens.length),n=[],o=this._fields.reduce(function(e,t){return e+t.boost},0),s=t.some(function(e){return this.tokenStore.has(e)},this);if(!s)return[];t.forEach(function(e,t,s){var r=1/s.length*this._fields.length*o,a=this,l=this.tokenStore.expand(e).reduce(function(t,n){var o=a.corpusTokens.indexOf(n),s=a.idf(n),l=1,c=new lunr.SortedSet;if(n!==e){var u=Math.max(3,n.length-e.length);l=1/Math.log(u)}return o>-1&&(i[o]=r*s*l),Object.keys(a.tokenStore.get(n)).forEach(function(e){c.add(e)}),t.union(c)},new lunr.SortedSet);n.push(l)},this);var r=n.reduce(function(e,t){return e.intersect(t)}),a=new lunr.Vector(i);return r.map(function(e){return{ref:e,score:a.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})},lunr.Index.prototype.documentVector=function(e){for(var t=this.documentStore.get(e),i=t.length,n=lunr.utils.zeroFillArray(this.corpusTokens.length),o=0;i>o;o++){var s=t.elements[o],r=this.tokenStore.get(s)[e].tf,a=this.idf(s);n[this.corpusTokens.indexOf(s)]=r*a}return new lunr.Vector(n)},lunr.Index.prototype.toJSON=function(){return{version:lunr.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},lunr.Store=function(){this.store={},this.length=0},lunr.Store.load=function(e){var t=new this;return t.length=e.length,t.store=Object.keys(e.store).reduce(function(t,i){return t[i]=lunr.SortedSet.load(e.store[i]),t},{}),t},lunr.Store.prototype.set=function(e,t){this.store[e]=t,this.length=Object.keys(this.store).length},lunr.Store.prototype.get=function(e){return this.store[e]},lunr.Store.prototype.has=function(e){return e in this.store},lunr.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},lunr.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},lunr.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[^aeiou]",n="[aeiouy]",o=i+"[^aeiouy]*",s=n+"[aeiou]*",r="^("+o+")?"+s+o,a="^("+o+")?"+s+o+"("+s+")?$",l="^("+o+")?"+s+o+s+o,c="^("+o+")?"+n;return function(i){var s,u,d,h,p,f,m;if(i.length<3)return i;if(d=i.substr(0,1),"y"==d&&(i=d.toUpperCase()+i.substr(1)),h=/^(.+?)(ss|i)es$/,p=/^(.+?)([^s])s$/,h.test(i)?i=i.replace(h,"$1$2"):p.test(i)&&(i=i.replace(p,"$1$2")),h=/^(.+?)eed$/,p=/^(.+?)(ed|ing)$/,h.test(i)){var g=h.exec(i);h=new RegExp(r),h.test(g[1])&&(h=/.$/,i=i.replace(h,""))}else if(p.test(i)){var g=p.exec(i);s=g[1],p=new RegExp(c),p.test(s)&&(i=s,p=/(at|bl|iz)$/,f=new RegExp("([^aeiouylsz])\\1$"),m=new RegExp("^"+o+n+"[^aeiouwxy]$"),p.test(i)?i+="e":f.test(i)?(h=/.$/,i=i.replace(h,"")):m.test(i)&&(i+="e"))}if(h=/^(.+?)y$/,h.test(i)){var g=h.exec(i);s=g[1],h=new RegExp(c),h.test(s)&&(i=s+"i")}if(h=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,h.test(i)){var g=h.exec(i);s=g[1],u=g[2],h=new RegExp(r),h.test(s)&&(i=s+e[u])}if(h=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,h.test(i)){var g=h.exec(i);s=g[1],u=g[2],h=new RegExp(r),h.test(s)&&(i=s+t[u])}if(h=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,p=/^(.+?)(s|t)(ion)$/,h.test(i)){var g=h.exec(i);s=g[1],h=new RegExp(l),h.test(s)&&(i=s)}else if(p.test(i)){var g=p.exec(i);s=g[1]+g[2],p=new RegExp(l),p.test(s)&&(i=s)}if(h=/^(.+?)e$/,h.test(i)){var g=h.exec(i);s=g[1],h=new RegExp(l),p=new RegExp(a),f=new RegExp("^"+o+n+"[^aeiouwxy]$"),(h.test(s)||p.test(s)&&!f.test(s))&&(i=s)}return h=/ll$/,p=new RegExp(l),h.test(i)&&p.test(i)&&(h=/.$/,i=i.replace(h,"")),"y"==d&&(i=d.toLowerCase()+i.substr(1)),i}}(),lunr.Pipeline.registerFunction(lunr.stemmer,"stemmer"),lunr.stopWordFilter=function(e){return-1===lunr.stopWordFilter.stopWords.indexOf(e)?e:void 0},lunr.stopWordFilter.stopWords=new lunr.SortedSet,lunr.stopWordFilter.stopWords.length=119,lunr.stopWordFilter.stopWords.elements=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],lunr.Pipeline.registerFunction(lunr.stopWordFilter,"stopWordFilter"),lunr.TokenStore=function(){this.root={docs:{}},this.length=0},lunr.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},lunr.TokenStore.prototype.add=function(e,t,i){var i=i||this.root,n=e[0],o=e.slice(1);return n in i||(i[n]={docs:{}}),0===o.length?(i[n].docs[t.ref]=t,this.length+=1,void 0):this.add(o,t,i[n])},lunr.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,i=0;i<e.length;i++){if(!t[e[i]])return!1;t=t[e[i]]}return!0},lunr.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,i=0;i<e.length;i++){if(!t[e[i]])return{};t=t[e[i]]}return t},lunr.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},lunr.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},lunr.TokenStore.prototype.remove=function(e,t){if(e){for(var i=this.root,n=0;n<e.length;n++){if(!(e[n]in i))return;i=i[e[n]]}delete i.docs[t]}},lunr.TokenStore.prototype.expand=function(e,t){var i=this.getNode(e),n=i.docs||{},t=t||[];return Object.keys(n).length&&t.push(e),Object.keys(i).forEach(function(i){"docs"!==i&&t.concat(this.expand(e+i,t))},this),t},lunr.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},_wAMD.define("lunr",function(){}),function(e,t){"object"==typeof exports?function(){var e;try{e=require("lunr")}catch(i){}module.exports=t(require("underscore"),require("backbone"),require("backgrid"),e)
}():"function"==typeof define&&define.amd?_wAMD.define("backgrid-filter",["underscore","backbone","backgrid","lunr"],t):t(e._,e.Backbone,e.Backgrid,e.lunr)}(this,function(e,t,i,n){var o=i.Extension.ServerSideFilter=t.View.extend({tagName:"form",className:"backgrid-filter form-search",template:e.template('<span class="search">&nbsp;</span><input type="search" <% if (placeholder) { %> placeholder="<%- placeholder %>" <% } %> name="<%- name %>" /><a class="clear" data-backgrid-action="clear" href="#">&times;</a>',null,{variable:null}),events:{"keyup input[type=search]":"showClearButtonMaybe","click a[data-backgrid-action=clear]":"clear",submit:"search"},name:"q",placeholder:null,initialize:function(e){o.__super__.initialize.apply(this,arguments),this.name=e.name||this.name,this.placeholder=e.placeholder||this.placeholder,this.template=e.template||this.template;var i=this.collection,n=this;t.PageableCollection&&i instanceof t.PageableCollection&&"server"==i.mode&&(i.queryParams[this.name]=function(){return n.searchBox().val()||null})},showClearButtonMaybe:function(){var e=this.clearButton(),t=this.searchBox().val();t?e.show():e.hide()},searchBox:function(){return this.$el.find("input[type=search]")},clearButton:function(){return this.$el.find("a[data-backgrid-action=clear]")},search:function(i){i&&i.preventDefault();var n=this.collection,o={},s=this.searchBox().val(),r={property:this.name,value:"%"+s+"%",comparison:"LIKE"};if(e.isUndefined(n.fetchOptions)&&(n.fetchOptions={}),(e.isUndefined(n.fetchOptions.filter)||!e.isArray(n.fetchOptions.filter))&&(n.fetchOptions.filter=[]),s){o[this.name]=s;var a=!1;e.each(n.fetchOptions.filter,function(e,t){e.property==r.property&&(n.fetchOptions.filter[t]=r,a=!0)}),a||n.fetchOptions.filter.push(r)}else{var l=[],c=!1;e.each(n.fetchOptions.filter,function(e){e.property==r.property?c=!0:l.push(e)}),c&&(n.fetchOptions.filter=l)}t.PageableCollection&&n instanceof t.PageableCollection?n.getFirstPage({data:o,reset:!0,fetch:!0}):n.fetch({data:o,reset:!0})},clear:function(e){e&&e.preventDefault(),this.searchBox().val(null),this.showClearButtonMaybe();var i=this.collection;t.PageableCollection&&i instanceof t.PageableCollection?i.getFirstPage({reset:!0,fetch:!0}):i.fetch({reset:!0})},render:function(){return this.$el.empty().append(this.template({name:this.name,placeholder:this.placeholder,value:this.value})),this.showClearButtonMaybe(),this.delegateEvents(),this}}),s=i.Extension.ClientSideFilter=o.extend({events:e.extend({},o.prototype.events,{"click a[data-backgrid-action=clear]":function(e){e.preventDefault(),this.clear()},"keydown input[type=search]":"search",submit:function(e){e.preventDefault(),this.search()}}),fields:null,wait:149,initialize:function(t){s.__super__.initialize.apply(this,arguments),this.fields=t.fields||this.fields,this.wait=t.wait||this.wait,this._debounceMethods(["search","clear"]);var i=this.collection=this.collection.fullCollection||this.collection,n=this.shadowCollection=i.clone();this.listenTo(i,"add",function(e,t,i){n.add(e,i)}),this.listenTo(i,"remove",function(e,t,i){n.remove(e,i)}),this.listenTo(i,"sort",function(e){this.searchBox().val()||n.reset(e.models)}),this.listenTo(i,"reset",function(t,i){i=e.extend({reindex:!0},i||{}),i.reindex&&null==i.from&&null==i.to&&n.reset(t.models)})},_debounceMethods:function(t){e.isString(t)&&(t=[t]),this.undelegateEvents();for(var i=0,n=t.length;n>i;i++){var o=t[i],s=this[o];this[o]=e.debounce(s,this.wait)}this.delegateEvents()},makeRegExp:function(e){return new RegExp(e.trim().split(/\s+/).join("|"),"i")},makeMatcher:function(e){var t=this.makeRegExp(e);return function(e){for(var i=this.fields||e.keys(),n=0,o=i.length;o>n;n++)if(t.test(e.get(i[n])+""))return!0;return!1}},search:function(){var t=e.bind(this.makeMatcher(this.searchBox().val()),this),i=this.collection;i.pageableCollection&&i.pageableCollection.getFirstPage({silent:!0}),i.reset(this.shadowCollection.filter(t),{reindex:!1})},clear:function(){this.searchBox().val(null),this.showClearButtonMaybe();var e=this.collection;e.pageableCollection&&e.pageableCollection.getFirstPage({silent:!0}),e.reset(this.shadowCollection.models,{reindex:!1})}}),r=i.Extension.LunrFilter=s.extend({ref:"id",fields:null,initialize:function(e){r.__super__.initialize.apply(this,arguments),this.ref=e.ref||this.ref;var t=this.collection=this.collection.fullCollection||this.collection;this.listenTo(t,"add",this.addToIndex),this.listenTo(t,"remove",this.removeFromIndex),this.listenTo(t,"reset",this.resetIndex),this.listenTo(t,"change",this.updateIndex),this.resetIndex(t)},resetIndex:function(t,i){if(i=e.extend({reindex:!0},i||{}),i.reindex){var o=this;this.index=n(function(){e.each(o.fields,function(e,t){this.field(t,e),this.ref(o.ref)},this)}),t.each(function(e){this.addToIndex(e)},this)}},addToIndex:function(e){var t=this.index,i=e.toJSON();t.documentStore.has(i[this.ref])?t.update(i):t.add(i)},removeFromIndex:function(e){var t=this.index,i=e.toJSON();t.documentStore.has(i[this.ref])&&t.remove(i)},updateIndex:function(t){var i=t.changedAttributes();i&&!e.isEmpty(e.intersection(e.keys(this.fields),e.keys(i)))&&this.index.update(t.toJSON())},search:function(){var e=this.collection;if(!this.searchBox().val())return e.reset(this.shadowCollection.models,{reindex:!1}),void 0;for(var t=this.index.search(this.searchBox().val()),i=[],n=0;n<t.length;n++){var o=t[n];i.push(this.shadowCollection.get(o.ref))}e.pageableCollection&&e.pageableCollection.getFirstPage({silent:!0}),e.reset(i,{reindex:!1})}})}),function(e,t){"object"==typeof exports?module.exports=t(require("underscore"),require("backbone"),require("backgrid"),require("backbone-pageable")):"function"==typeof define&&define.amd?_wAMD.define("backgrid-paginator",["underscore","backbone","backgrid","backbone-pageable"],t):t(e._,e.Backbone,e.Backgrid)}(this,function(e,t,i){var n=i.Extension.PageHandle=t.View.extend({tagName:"li",events:{"click a":"changePage"},title:e.template("Page <%- label %>",null,{variable:null}),isRewind:!1,isBack:!1,isForward:!1,isFastForward:!1,initialize:function(t){var i=this.collection,n=i.state,o=n.currentPage,s=n.firstPage,r=n.lastPage;e.extend(this,e.pick(t,["isRewind","isBack","isForward","isFastForward"]));var a;this.isRewind?a=s:this.isBack?a=Math.max(s,o-1):this.isForward?a=Math.min(r,o+1):this.isFastForward?a=r:(a=+t.pageIndex,a=s?a+1:a),this.pageIndex=a,this.label=(t.label||(s?a:a+1))+"";var l=t.title||this.title;this.title=e.isFunction(l)?l({label:this.label}):l},render:function(){this.$el.empty();var e=document.createElement("a");e.href="#",this.title&&(e.title=this.title),e.innerHTML=this.label,this.el.appendChild(e);var t=this.collection,i=t.state,n=i.currentPage,o=this.pageIndex;return this.isRewind&&n==i.firstPage||this.isBack&&!t.hasPrevious()||this.isForward&&!t.hasNext()||this.isFastForward&&(n==i.lastPage||i.totalPages<1)?this.$el.addClass("disabled"):this.isRewind||this.isBack||this.isForward||this.isFastForward||i.currentPage!=o||this.$el.addClass("active"),this.delegateEvents(),this},changePage:function(e){e.preventDefault();var t=this.$el,i=this.collection;return t.hasClass("active")||t.hasClass("disabled")||(this.isRewind?i.getFirstPage():this.isBack?i.getPreviousPage():this.isForward?i.getNextPage():this.isFastForward?i.getLastPage():i.getPage(this.pageIndex,{reset:!0})),this}}),o=i.Extension.Paginator=t.View.extend({className:"backgrid-paginator",windowSize:10,slideScale:.5,controls:{rewind:{label:"《",title:"First"},back:{label:"〈",title:"Previous"},forward:{label:"〉",title:"Next"},fastForward:{label:"》",title:"Last"}},renderIndexedPageHandles:!0,pageHandle:n,goBackFirstOnSort:!0,initialize:function(t){var i=this;i.controls=e.defaults(t.controls||{},i.controls,o.prototype.controls),e.extend(i,e.pick(t||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles"));var n=i.collection;i.listenTo(n,"add",i.render),i.listenTo(n,"remove",i.render),i.listenTo(n,"reset",i.render),i.listenTo(n,"backgrid:sorted",function(){i.goBackFirstOnSort&&n.getFirstPage({reset:!0})})},slideMaybe:function(e,t,i,n){return Math.round(i%n/n)},slideThisMuch:function(e,t,i,n,o){return~~(n*o)},_calculateWindow:function(){var e=this.collection,t=e.state,i=t.firstPage,n=+t.lastPage;n=Math.max(0,i?n-1:n);var o=Math.max(t.currentPage,t.firstPage);o=i?o-1:o;var s=this.windowSize,r=this.slideScale,a=Math.floor(o/s)*s;o<=n-this.slideThisMuch()&&(a+=this.slideMaybe(i,n,o,s,r)*this.slideThisMuch(i,n,o,s,r));var l=Math.min(n+1,a+s);return[a,l]},makeHandles:function(){var t=[],i=this.collection,n=this._calculateWindow(),o=n[0],s=n[1];if(this.renderIndexedPageHandles)for(var r=o;s>r;r++)t.push(new this.pageHandle({collection:i,pageIndex:r}));var a=this.controls;return e.each(["back","rewind","forward","fastForward"],function(e){var n=a[e];if(n){var o={collection:i,title:n.title,label:n.label};o["is"+e.slice(0,1).toUpperCase()+e.slice(1)]=!0;var s=new this.pageHandle(o);"rewind"==e||"back"==e?t.unshift(s):t.push(s)}},this),t},render:function(){if(this.$el.empty(),this.handles)for(var e=0,t=this.handles.length;t>e;e++)this.handles[e].remove();for(var i=this.handles=this.makeHandles(),n=document.createElement("ul"),e=0;e<i.length;e++)n.appendChild(i[e].render().el);return this.el.appendChild(n),this}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-affix-cell",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){var i=e.$,n=t.Extension.AffixCellEditor=t.CellEditor.extend({tagName:"div",events:{"blur input":"saveOrCancel","keydown input":"saveOrCancel"},initialize:function(){this.unitContainer=i("<span/>",{"class":"unit"}),this.valueInput=i("<input/>",{"class":"value",type:"text"}),t.CellEditor.prototype.initialize.apply(this,arguments)},render:function(){var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.append(this.unitContainer,this.valueInput),this.valueInput.val(e),this.unitContainer.html(this.unit),this.$el.addClass(this.affix),this},postRender:function(){var e={},t=-1!==_.indexOf(["suffix","postfix"],this.affix)?"paddingRight":"paddingLeft";e[t]=this.unitContainer.width()+15,this.valueInput.css(e).select()},saveOrCancel:function(e){var i=new t.Command(e),n="blur"===e.type||"focusout"===e.type;if(i.moveUp()||i.moveDown()||i.moveLeft()||i.moveRight()||i.save()||n){var o=this.valueInput.val(),s=this.formatter.toRaw(o);e.preventDefault(),e.stopPropagation(),_.isUndefined(s)?this.model.trigger("backgrid:error",this.model,this.column,o):(this.model.set(this.column.get("name"),s),this.model.trigger("backgrid:edited",this.model,this.column,i))}else i.cancel()&&(e.stopPropagation(),this.model.trigger("backgrid:edited",this.model,this.column,i))},setAffix:function(e){this.affix=e},setUnit:function(e){this.unit=e}});t.Extension.AffixCell=t.Cell.extend({className:"affix-cell",editor:n,formatter:{fromRaw:function(e){return e},toRaw:function(e){return e}},affix:"prefix",unit:void 0,initialize:function(){t.Cell.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")===this.column.get("name")&&(n.setAffix(this.affix),n.setUnit(this.unit))})},render:function(){var e,t;return e=i("<span/>",{"class":"unit",html:this.unit}),t=i("<span/>",{"class":"value",html:this.formatter.fromRaw(this.model.get(this.column.get("name")))}),this.$el.addClass(this.affix),this.$el.append(e,t),this.delegateEvents(),this}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-virtual-cell",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){e.$,t.Extension.VirtualCell=t.Cell.extend({className:"virtual-cell",tagName:"td",view:e.View.extend({}),initialize:function(e){this.column=e.column,this.column instanceof t.Column||(this.column=new t.Column(this.column));var i=this.column,n=this.$el;this.listenTo(i,"change:renderable",function(e,t){n.toggleClass("renderable",t)}),i.get("renderable")&&n.addClass("renderable")},render:function(){var e=new this.view({model:this.model,el:this.el});return e.render(),this.delegateEvents(),this}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-spectrum-cell",["backbone","backgrid","vendor/spectrum"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){var i=e.$,n=t.Extension.SpectrumCellEditor=t.InputCellEditor.extend({tagName:"div",events:{click:"handleClick","blur .color-name":"openOrSave","keydown .color-name":"saveOrCancel"},attributes:{},initialize:function(){this.colorSwatch=i("<span/>",{"class":"color-swatch"}),this.colorName=i("<input/>",{"class":"color-name",name:"color-name",type:"text",value:""}),this.$el.append(this.colorSwatch,this.colorName),this.namespace=".spectrum-cell-"+Math.floor(10000001*Math.random()),i(document).on("keydown"+this.namespace,_.bind(this.handleDocumentKeydown,this)),t.InputCellEditor.prototype.initialize.apply(this,arguments)},render:function(){var e=this.formatter.fromRaw(this.model.get(this.column.get("name"))),t=this;return this.colorName.val(e.name),this.colorSwatch.css("background-color",e.value),this.colorSwatch.spectrum({color:e.value,containerOffsetY:5,containerOffsetX:-5,showInput:!0,showPalette:!0,chooseText:"Ok",theme:"spectrum-cell-picker sp-w",clickoutFiresChange:!0,clickPaletteToClose:!1,preferredFormat:"hex6",showSelectionPalette:!1,dontHideBoundElement:!0,palette:[["#d5d5d5","#a1a1a1","#818181","#626262","#515151","#3f3f3f","#2a2a2a"],["#f8a9a9","#e97676","#e05c5c","#da4444","#c23b3b","#a82e2e","#8d2424"],["#f8c7a9","#e9a476","#e0915c","#da8044","#c2743b","#a85f2e","#8d5024"],["#f8eaa9","#e9cf76","#e0bf5c","#dab844","#c2a43b","#a88d2e","#8d7824"],["#c9f8a9","#a9e976","#91e05c","#81c94c","#6cb83a","#5fa233","#508d24"],["#a9f8dd","#76e9c7","#5ce0b6","#4cc9a4","#3ab890","#33a27f","#248d6c"],["#a9e4f8","#76cae9","#5cbce0","#4caac9","#3a96b8","#3387a2","#24678d"],["#b5aaf6","#9789e8","#8273da","#7161d0","#6555c2","#5848b7","#5040ae"],["#d8aaf6","#c389e8","#b073da","#a561d0","#9555c2","#8c48b7","#8640ae"],["#f6aaf0","#e889e0","#da73d2","#d061c7","#c255b9","#b748ae","#ae40a5"]],beforeShow:function(){t.colorSwatch.spectrum("collapse")},show:function(){t.renderOverlay()},hide:function(){t.destroyOverlay()},move:function(e){t.colorSwatch.css("background-color",e.toHexString())},change:function(e){t.colorSwatch.css("background-color",e.toHexString())}}),this},renderOverlay:function(){this.overlay=i("<div/>",{id:"spectrum-cell-overlay"}),this.overlay.on("click"+this.namespace,_.bind(function(e){e.stopPropagation(),this.refocus()},this)),i(document.body).append(this.overlay)},destroyOverlay:function(){this.overlay&&this.overlay.off().remove()},refocus:function(){this.colorSwatch.spectrum("hide"),this.colorName.select()},postRender:function(){this.colorName.select()},setCell:function(e){this.cell=e},openOrSave:function(e){this.colorSwatch.is(":hover")||this.saveOrCancel(e)},saveOrCancel:function(e){var i=new t.Command(e),n=i.moveUp()||i.moveDown()||i.moveLeft()||i.moveRight()||i.save(),o="blur"===e.type||"focusout"===e.type;n||o?this.save(e):i.cancel()&&this.cancel(e)},cancel:function(e){var i=new t.Command(e),n=this.model,o=this.column;e.stopPropagation(),n.trigger("backgrid:edited",n,o,i)},save:function(e){var i,n,o,s=this.model,r=this.column,a=this.formatter,l=new t.Command(e);e.preventDefault(),e.stopPropagation(),i=this.colorName.val(),n=this.colorSwatch.spectrum("get").toHexString(),o=a.toRaw(i,n),_.isUndefined(o)?s.trigger("backgrid:error",s,r,i,n):(s.set(r.get("name"),o),s.trigger("backgrid:edited",s,r,l))},remove:function(){i(document).off(this.namespace),this.colorSwatch.spectrum("destroy"),e.View.prototype.remove.apply(this,arguments)},handleClick:function(e){e.stopPropagation(),this.colorSwatch.spectrum("hide")},handleDocumentClick:function(){this.saveOrCancel(i.Event("blur"))},handleDocumentKeydown:function(e){var t=e.keyCode||e.which;(9===t||27===t)&&(e.preventDefault(),this.refocus())}});t.Extension.SpectrumCell=t.Cell.extend({className:"color-picker-cell",editor:n,formatter:{fromRaw:function(e){var t={},i=[];return _.isNull(e)||_.isUndefined(e)?t={name:"—",value:"#000000"}:(i=e.match(/(.*)<(.*)>$/),i&&i.length?(t.name=i[1],t.value=i[2]):(t.name=e,t.value="#000000")),t},toRaw:function(e,t){return""===t&&""===e?void 0:e+"<"+t+">"}},initialize:function(){t.Cell.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")==this.column.get("name")&&n.setCell(i)})},render:function(){var e=this.formatter.fromRaw(this.model.get(this.column.get("name"))),t=i("<span/>",{"class":"color-swatch",style:"background-color: "+e.value}),n=i("<span/>",{"class":"color-name",text:e.name});return this.$el.empty().append(t,n),this.delegateEvents(),this}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-placeholder-cell",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){var i=e.$;t.Extension.PlaceholderCell=t.Cell.extend({className:"placeholder-cell",showPlaceholder:!0,placeholderTemplate:'<div class="cell-placeholder"></div>',emptyText:"",render:function(){if(t.Cell.prototype.render.apply(this),this.showPlaceholder){var e=this.$el.text()===this.emptyText,n=i(this.placeholderTemplate);e?(this.$el.html(""),n.show()):n.hide(),this.$el.append(n)}return this}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-typeahead-cell",["backbone","backgrid","components/backgrid/backgrid-placeholder-cell"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){var i=e.$,n={suggestionLimit:8,minimumInputLength:0,showPlaceholder:!0},o={TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8},s=function(e){e.preventDefault(),e.stopPropagation()},r=function(e){var t,n,o=e,s=function(e){return""+e.text};i.isArray(o)&&(n=o,o={results:n}),i.isFunction(o)===!1&&(n=o,o=function(){return n});var r=o();return r.text&&(s=r.text,i.isFunction(s)||(t=r.text,s=function(e){return e[t]})),function(e){e=i.extend({},{matcher:function(e,t){return 0===(""+t).toUpperCase().indexOf((""+e).toUpperCase())}},e);var t,n=e.term,r={results:[]};return""===n?(e.callback(o()),void 0):(t=function(o,r){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],i(o.children).each2(function(e,i){t(i,a.children)}),(a.children.length||e.matcher(n,s(a),o))&&r.push(a)}else e.matcher(n,s(o),o)&&r.push(o)},i(o().results).each2(function(e,i){t(i,r.results)}),n=n.toUpperCase(),r.results=_.sortBy(r.results,function(e){return e.text.toUpperCase().indexOf(n)}),e.callback(r),void 0)}},a=t.Extension.TypaheadCellEditor=t.CellEditor.extend({tagName:"input",attributes:{type:"text","class":"typeahead-cell-input"},events:{keydown:"onKeydown",keyup:"onKeyup",blur:"selectOrSave"},options:{},initialize:function(){this.hint=this.createHintContainer(),this.results=this.createResultsContainer(),this.resultsChoices=this.results.children(".typeahead-cell-choices"),this.results.on("click",".typeahead-cell-result",_.bind(this.clickSelectChoice,this)).on("hover",".typeahead-cell-result",_.bind(this.onHover,this)),t.CellEditor.prototype.initialize.apply(this,arguments)},render:function(){this.searcher=r(this.options.data),this.$el.after(this.results),this.$el.after(this.hint),this.$el.val(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this.$el.select(),t.CellEditor.prototype.render.apply(this,arguments)},postRender:function(){return this.positionResults(),this.positionHint(),this.$el.focus(),this},setOptions:function(e){this.options=_.extend({},n,e)},save:function(e){var t=this.formatter.toRaw(this.$el.val());_.isUndefined(t)?this.model.trigger("backgrid:error",this.model,this.column,t):(this.addOption(t),this.model.set(this.column.get("name"),t),this.closeCell(e))},addOption:function(e){var t=[];t=_.map(this.options.data,function(e){return e.text}),-1===_.indexOf(t,e)&&this.options.data.push({id:t.length,text:e})},closeCell:function(e){this.model.trigger("backgrid:edited",this.model,this.column,new t.Command(e))},remove:function(){return t.CellEditor.prototype.remove.apply(this,arguments)},clickSelectChoice:function(e){var t=this.resultsChoices.children().index(e.currentTarget);this.highlightSet(t),this.$el.val(e.currentTarget.getAttribute("data-result")),this.closeResults(),this.$el.focus(),s(e)},onHover:function(e){var t=this.resultsChoices.children().index(e.target);this.highlight(t)},onKeydown:function(e){switch(this.ignoreKeyUp=!1,e.which){case o.UP:case o.DOWN:this.shouldSave(e),s(e);break;case o.ENTER:case o.TAB:this.completeOrSave(e),this.ignoreKeyUp=!0,s(e)}},onKeyup:function(e){if(this.ignoreKeyUp===!1)switch(e.which){case o.UP:case o.DOWN:this.moveHighlight(e.which===o.UP?-1:1),s(e);break;case o.ENTER:this.closeOrSave(e);break;case o.ESC:this.closeCell(e);break;default:e.metaKey||this.updateResults()}this.ignoreKeyUp=!1},selectOrSave:function(e){this.isOpened()&&this.resultsChoices.is(":hover")?s(e):this.save(e)},completeOrSave:function(e){if(this.isOpened()){var t=this.getHighlightIndex();this.highlightSet(t),this.closeResults()}else this.save(e)},closeOrSave:function(e){var t=this.getHighlight();0===t.length?this.save(e):this.closeResults()},shouldSave:function(e){this.isOpened()||this.save(e)},moveHighlight:function(e){var t=(this.getHighlight(),this.getHighlightIndex());this.setPreviousValue(),this.highlightSet(t+e)},getHighlight:function(){return this.resultsChoices.children(".typeahead-cell-selected")},getHighlightIndex:function(){var e=this.getHighlight();return e?this.resultsChoices.children().index(e):0},clearHighlight:function(){this.getHighlight().removeClass("typeahead-cell-selected")},highlight:function(e){var t=this.resultsChoices.children();this.clearHighlight(),t.eq(e).addClass("typeahead-cell-selected")},highlightSet:function(e){var t,i=this.resultsChoices.children();if(0!==arguments.length&&0!==i.length){if(e>=i.length&&(e=i.length-1),0>e)return this.$el.val(this.previousValue),this.updateResults(),this.clearHighlight(),this.clearPreviousValue(),void 0;this.clearHint(),this.clearHighlight(),t=i.eq(e).addClass("typeahead-cell-selected"),this.$el.val(t.attr("data-result"))}},isOpened:function(){return this.results.hasClass("typeahead-cell-opened")},openResults:function(){this.results.addClass("typeahead-cell-opened")},closeResults:function(){this.results.removeClass("typeahead-cell-opened"),this.clearHighlight(),this.clearHint()},updateResults:function(){var e=this,t=this.$el.val();t.length>this.options.minimumInputLength?this.searcher({term:t,callback:function(t){t=i.map(t.results,function(e){return e.text}),e.populateHint(t[0]),e.populateResults(t)}}):(this.closeResults(),this.clearHint())},positionResults:function(){var e=this.$el.outerWidth();this.results.css({width:e})},positionHint:function(){var e=this.$el.outerWidth(),t=this.$el.position(),i=t.top,n=t.left;this.hint.css({width:e,top:i,left:n})},clearHint:function(){this.hint.val("")},setPreviousValue:function(){this.previousValue||(this.previousValue=this.$el.val())},clearPreviousValue:function(){this.previousValue=null},populateHint:function(e){if(!e)return this.clearHint(),void 0;var t=this.$el.val();0===e.toUpperCase().indexOf(t.toUpperCase())?(e=e.replace(new RegExp("^(.{0}).{"+t.length+"}"),"$1"+t),this.hint.val(e)):this.clearHint()},populateResults:function(e){var t,n=(e.length>this.options.suggestionLimit?8:e.length,this.$el.val());if(this.openResults(),this.resultsChoices.empty(),e[0]&&e[0].length===n.length)return this.closeResults(),void 0;if(0!==e.length)for(var o=0;o<e.length;o++)t=i(document.createElement("li")),t.attr({"class":"typeahead-cell-result","data-result":e[o]}),t.text(e[o]),this.resultsChoices.append(t);if(0===e.length||e[0].length!==n.length){var s=i(document.createElement("label"));s.attr({"class":"typeahead-cell-new"}),s.text(_W.tl("New Choice")),t=i(document.createElement("li")),t.attr({"class":"typeahead-cell-result","data-result":n}),t.text(n),t.prepend(s),this.resultsChoices.append(t)}this.highlight(0)},createResultsContainer:function(){var e=i(document.createElement("div")).attr({"class":"typeahead-cell-results"}).html(['<ul class="typeahead-cell-choices">',"</ul>"].join(""));return e},createHintContainer:function(){var e=i(document.createElement("input")).attr({type:"text","class":"typeahead-cell-hint",autocomplete:"off",spellcheck:"off",disabled:"disabled"});return e}});t.Extension.TypeaheadCell=t.Extension.PlaceholderCell.extend({className:"typeahead-cell",editor:a,formatter:{fromRaw:function(e){return _.isNull(e)||_.isUndefined(e)?"":e},toRaw:function(e){return""===e?void 0:e}},placeholderTemplate:'<div class="typeahead-cell-placeholder cell-placeholder"></div>',initialize:function(e){t.Cell.prototype.initialize.apply(this,arguments),this.datalist=e.datalist||this.datalist,this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")==this.column.get("name")&&n.setOptions(this.options)})}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-html-cell",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){e.$,t.Extension.HtmlCell=t.Cell.extend({className:"html-cell",initialize:function(){t.Cell.prototype.initialize.apply(this,arguments)},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(e,this.model);return this.$el.append(t),this.delegateEvents(),this}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-validate-formatter",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){var i=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},n=function(e){return _.isNumber(e)||_.isString(e)&&e.match(s.number)},o=function(e){return!(_.isNull(e)||_.isUndefined(e)||_.isString(e)&&""===i(e)||_.isArray(e)&&_.isEmpty(e))},s={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},r={required:function(e,t,i){var n=_.isFunction(t)?t.call(e,t,i):t;return n&&!o(e)?!1:void 0},acceptance:function(e){return"true"===e||_.isBoolean(e)&&e!==!1?void 0:!1},min:function(e,t){return e=parseInt(e),t=parseInt(t),!n(e)||t>e?!1:void 0},max:function(e,t){return e=parseInt(e),t=parseInt(t),!n(e)||e>t?!1:void 0},range:function(e,t){return!n(e)||e<t[0]||e>t[1]?!1:void 0},length:function(e,t){return o(e)&&i(e).length===t?void 0:!1},minLength:function(e,t){return!o(e)||i(e).length<t?!1:void 0},maxLength:function(e,t){return!o(e)||i(e).length>t?!1:void 0},rangeLength:function(e,t){return!o(e)||i(e).length<t[0]||i(e).length>t[1]?!1:void 0},oneOf:function(e,t){return _.include(t,e)?void 0:!1},equalTo:function(e,t,i){return e!==i[t]?!1:void 0},pattern:function(e,t){return o(e)&&e.toString().match(s[t]||t)?void 0:!1}},a={fromRaw:function(e){return e},toRaw:function(e){return e}};t.Extension.ValidateFormatter=function(e){var e=e||{},t=e.validator||{},i=e.formatter||a;return{fromRaw:function(e){return i.fromRaw(e)},toRaw:function(e){var n=!0;return _.each(t,function(t,i){n!==!1&&(n=r[i](e,t)===!1?!1:!0)}),n?i.toRaw(e):void 0}}}}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-emptytext-numberformatter",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){e.$;var i=t.Extension.EmptyTextNumberFormatter=function(e){if(e=e?_.clone(e):{},_.extend(this,this.defaults,e),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};i.prototype=new t.NumberFormatter,_.extend(i.prototype,{emptyText:"—",fromRaw:function(e){if(_.isNull(e)||_.isUndefined(e))return this.emptyText;e=e.toFixed(~~this.decimals);var t=e.split("."),i=t[0],n=t[1]?(this.decimalSeparator||".")+t[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+n},toRaw:function(e){var t="";if(e===this.emptyText||""===e)return null;for(var i=e.trim().split(this.orderSeparator),n=0;n<i.length;n++)t+=i[n];var o=t.split(this.decimalSeparator);t="";for(var n=0;n<o.length;n++)t=t+o[n]+".";"."===t[t.length-1]&&(t=t.slice(0,t.length-1));var s=1*(1*t).toFixed(~~this.decimals);return _.isNumber(s)&&!_.isNaN(s)?s:void 0}})}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-emptytext-stringformatter",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){e.$;var i=t.Extension.EmptyTextStringFormatter={};_.extend(i,{emptyText:"—",fromRaw:function(e){return _.isNull(e)||_.isUndefined(e)?this.emptyText:e},toRaw:function(e){return e===this.emptyText||""===e?null:e}})}),_wAMD.define("backgrid-all",["backgrid","backgrid-filter","backgrid-paginator","components/backgrid/backgrid-affix-cell","components/backgrid/backgrid-virtual-cell","components/backgrid/backgrid-spectrum-cell","components/backgrid/backgrid-typeahead-cell","components/backgrid/backgrid-html-cell","components/backgrid/backgrid-validate-formatter","components/backgrid/backgrid-emptytext-numberformatter","components/backgrid/backgrid-emptytext-stringformatter"],function(e){return e}),_wAMD.define("commerce/editor/store/product/detail/variant/GridProxyCollection",["backbone-all"],function(e){var t=function(e,t){function n(n){n=i.prototype.decode(n);
var o=t.findWhere({name:n});if(!o){var s=t.model;o=new s({site_product_id:e.get("site_product_id"),name:n}),t.add(o)}return o}function o(t){t=i.prototype.decode(t);var n=a.findWhere({name:t});if(!n){var o=a.model;n=new o({site_product_id:e.get("site_product_id"),site_product_sku_id:e.get("site_product_sku_id"),name:t}),a.add(n)}return n}var s=e.constructor,r=new s,a=e.get("optionchoices");return r._originalSku=e,r.get=function(t){if(t in e.attributes)return e.get(t);var i=o(t);return i.get("choice")},r.set=function(t,i,n){if(t in e.attributes)return e.set(t,i,n);var s=o(t);return this._setChoices(t,i),s.set("choice",i)},r.destroy=function(t){return e.destroy(t),s.prototype.destroy.apply(this,arguments)},r._setChoices=function(t,i){var o=n(t),s=_.clone(o.get("choice_order"))||[],r=a.findWhere({name:o.get("name")}),l=r?r.get("choice"):"",c=_.indexOf(s,l);if(-1!==c){var u={};e.collection.each(function(e){e.get("optionchoices").each(function(e){var t=e.get("choice");u[t]?u[t]++:u[t]=1})}),u[l]>1?s.push(i):s[c]=i}else s.push(i);s=_.unique(s),o.set("choice_order",s)},r},i=function(i,n){var o=e.PageableCollection.extend({mode:"client",state:{pageSize:n||25}}),s=new o,r=i.get("options2"),a=i.get("skus");return s.setSorting("site_product_sku_id",-1,{sortValue:function(e){return e._originalSku._sort}}),a.each(function(e){s.add(new t(e,r))}),s.fullCollection.sort(),s.remove=function(t){var i=_.isArray(t)?t.slice():[t];return i=_.map(i,function(e){return e._originalSku}),a.remove(i),e.Collection.prototype.remove.apply(this,arguments)},s};return i.prototype.key="___",i.prototype.encode=function(e){return this.key+e},i.prototype.decode=function(e){var t=new RegExp("^"+this.key);return e.replace(t,"")},i}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-wheadercell",["backbone","backgrid"],e):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&e(Backbone,Backgrid)}(function(e,t){var i=e.$;t.Extension.wHeaderCell=t.HeaderCell.extend({initialize:function(e){this.column=e.column,this.column instanceof t.Column||(this.column=new t.Column(this.column));var i=this.column,n=this.collection,o=this.$el;this.listenTo(i,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&o.toggleClass(i,t[i])}),this.listenTo(i,"change:direction",this.setCellDirection),this.listenTo(i,"change:name change:label",this.render),this.listenTo(n.fullCollection||n,"sort",this.removeCellDirection)},render:function(){this.$el.empty();var e,n=this.column,o=t.callByNeed(n.sortable(),n,this.collection);return e=o?i("<a>").text(n.get("label")).append("<b class='sort-caret'></b>"):document.createTextNode(n.get("label")),this.$el.append(e),this.$el.addClass(n.get("direction")),this.$el.addClass(n.get("headerClass")),this.delegateEvents(),this}})}),function(e,t){"object"==typeof exports?module.exports=t(require("backbone"),require("underscore"),require("backgrid"),require("backbone-paginator")):"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("components/backgrid/backgrid-wpaginator",["backbone","underscore","backgrid","backgrid-paginator"],t):"undefined"!=typeof Backbone&&"undefined"!=typeof Backgrid&&t(e.Backbone,e._,e.Backgrid)}(this,function(e,t,i){i.Extension.wPaginator=i.Extension.Paginator.extend({events:{"change select":"changePerPage"},controls:{rewind:{label:'<span class="nav">《</span>',title:_W.tl("First")},back:{label:'<span class="nav">〈</span>',title:_W.tl("Previous")},forward:{label:'<span class="nav">〉</span>',title:_W.tl("Next")},fastForward:{label:'<span class="nav">》</span>',title:_W.tl("Last")}},pageHandle:i.Extension.PageHandle.extend({title:t.template(_W.tl("Page %d","Page number").replace("%d","<%- label %>"),null,{variable:null})}),resultsPerPage:[5,15,25,50,100],defaultPerPage:15,defaultPerPageTitle:_W.tl("Per page"),enablePerPage:!0,afterRender:function(){},initialize:function(e){var n=this;t.extend(n,t.pick(e||{},"enablePerPage","defaultPerPageTitle","defaultPerPage","resultsPerPage","afterRender")),i.Extension.Paginator.prototype.initialize.apply(n,arguments)},changePerPage:function(e){var i=parseInt(e.currentTarget.value,10);i=-1===t.indexOf(this.resultsPerPage,i)?this.defaultPerPage:i,this.collection.setPageSize(i),this.collection.getFirstPage()},makePerPage:function(){var e,t,i,n=document.createElement("select"),o=document.createElement("label"),s=document.createElement("span"),r=this.resultsPerPage,a=r.length;for(o.className="backgrid-paginator-per-page",s.className="backgrid-paginator-per-page-label",s.innerHTML=this.defaultPerPageTitle,i=a;i>0;i--)t=r[a-i],e=document.createElement("option"),e.textContent=e.value=t,t===this.collection.state.pageSize&&(e.selected=!0),n.appendChild(e);return o.appendChild(s),o.appendChild(n),o},render:function(){if(this.$el.empty(),this.handles)for(var e=0,t=this.handles.length;t>e;e++)this.handles[e].remove();for(var i=this.handles=this.makeHandles(),n=document.createElement("ul"),e=0;e<i.length;e++)n.appendChild(i[e].render().el);return this.enablePerPage&&(this.perPageEl=this.makePerPage(),this.el.appendChild(this.perPageEl)),this.el.appendChild(n),this.afterRender.apply(this),this}})}),_wAMD.define("commerce/editor/store/product/detail/variant/GridView",["jquery","backbone-all","backgrid-all","mustache","editor/app","./GridProxyCollection","components/backgrid/backgrid-wheadercell","components/backgrid/backgrid-wpaginator"],function(e,t,i,n,o,s){var r=t.Marionette.ItemView.extend({pageSize:15,events:{"click .variant-add":"addVariant","focus tr:last-child .editable:last input":"listenForTab"},modelEvents:{"change:image_order":"onImageOrderChange","change:track_inventory":"onShow"},initialize:function(){this.buildSort(),this.listenTo(o.commerce.vent,{"store:product:variant:remove":function(e){this.removeVariant(e)},"store:product:variant:focus":function(e){var t=this.$el.find("tbody tr:first td:first");t.length&&(e.preventDefault(),e.stopPropagation(),t.trigger("click"))},"store:product:variant:highlightErrors":function(){this.showVariantErrors()},"store:product:variant:checkForDuplicates":function(){this.checkForDuplicates()}})},buildSort:function(){var e,t,i,n=this.model.get("skus");1===n.length?e=n.at(0):(e=n.max(function(e){return parseInt(e.get("site_product_sku_id"),10)}),_.isFinite(e)||(e=n.at(0))),i=parseInt(e.get("site_product_sku_id")||1,10),n.each(function(e){t=e.get("site_product_sku_id")||i++,e._sort=parseInt(t,10)}),n.comparator=function(e){return e._sort}},clearSort:function(){this.model.get("skus").each(function(e){delete e._sort})},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},onShow:function(){this.renderGrid(),this.focusBlankOptionchoice()},onClose:function(){this.clearSort()},onImageOrderChange:function(e){var t=_.difference(e._previousAttributes.image_order,e.get("image_order"));if(t.length){var i;this.model.get("skus").each(function(e){i=e.get("image_order");for(var n=0;n<t.length;n++)-1!==_.indexOf(i,t[n])&&e.set("image_order",_.without(i,t[n]))})}},renderGrid:function(){var t,n;this.model.get("options2").length&&(this.gridProxyCollection=new s(this.model,this.pageSize),this.listenTo(this.gridProxyCollection,"backgrid:edited",this.checkForDuplicates),t=i.Footer.extend({template:['<tr><td colspan="100%">','<button class="btn-bare variant-add">','<span class="w-icon-plus"></span>',_W.tl("Add SKU"),"</button>","</td></tr>"].join(""),render:function(){return this.$el.empty().append(this.template),this}}),this.grid&&(this.$el.css("height",this.grid.$el.height()),this.grid.remove()),this.grid=new i.Grid({className:"variant-table entity-list",columns:this.generateColumns(),collection:this.gridProxyCollection,footer:t}),this.$el.empty().append(this.grid.render().$el).css("height",""),this.gridProxyCollection.fullCollection.length>this.pageSize&&(this.paginator=new i.Extension.wPaginator({collection:this.gridProxyCollection,afterRender:function(){e(this.perPageEl).find("select").wSelectbox({theme:"com_detached"})}}),this.listenTo(this.gridProxyCollection,"remove",function(e,t){1===t.state.totalPages&&n.hide()}),n=this.paginator.render().$el,this.$el.append(n)))},generateColumns:function(){var e,n,r,a,l,c,u,d,h,p=this,f=i.Extension.wHeaderCell,m=this.model,g=m.get("options2").sort(),v=o.commerce.storefrontSettings,b=[],y=m.get("skus").at(0).validation;return g.each(function(t){d=t.get("name"),h=t.get("renderer"),u=s.prototype.encode(d),"color"===h?e=i.Extension.SpectrumCell:(c=_.map(t.get("choice_order"),function(e,t){return{id:t,text:e}}),e=i.Extension.TypeaheadCell.extend({options:{data:c,showPlaceholder:!0}})),b.push({name:u,label:d,cell:e,headerCell:f})}),l=t.View.extend({events:{"click .variation-delete":"remove","click .variation-edit":"editImage"},template:['<span class="variation-edit w-icon-image-solid" title="'+_W.tl("Select Image")+'"></span>','<span class="variation-delete w-icon-delete" title="'+_W.tl("Delete")+'"></span>'].join(""),initialize:function(){this.listenTo(this.model._originalSku,"change:image_order",this.render),t.View.prototype.initialize.apply(this,arguments)},render:function(){var e;this.$el.removeClass("selected-image").empty().append(this.template),e=this.model.get("image_order"),_.isUndefined(e)||_.isNull(e)||_.isEmpty(e)||this.$el.addClass("selected-image")},remove:function(){o.commerce.vent.trigger("store:product:variant:remove",this.model),p&&p.checkForDuplicates()},editImage:function(){o.commerce.vent.trigger("store:product:variant:image:edit",this.model._originalSku)}}),a=i.Extension.VirtualCell.extend({view:l}),n=i.Extension.AffixCell.extend({affix:v.get("currency_prefix").length?"prefix":"suffix",unit:v.get("currency_prefix").length?v.get("currency_prefix"):v.get("currency_suffix")}),r=i.Extension.AffixCell.extend({affix:v.get("weight_prefix").length?"prefix":"suffix",unit:v.get("weight_prefix").length?v.get("weight_prefix"):v.get("weight_suffix")}),b=b.concat([{name:"price",label:"Price",cell:n,formatter:new i.Extension.ValidateFormatter({validator:y.price,formatter:new i.NumberFormatter}),headerClass:"column-price",headerCell:f},{name:"sale_price",label:"Sale Price",cell:n,formatter:new i.Extension.ValidateFormatter({validator:y.sale_price,formatter:new i.Extension.EmptyTextNumberFormatter}),headerClass:"column-sale-price",headerCell:f},{name:"weight",label:"Weight",cell:r,formatter:new i.Extension.ValidateFormatter({validator:y.weight,formatter:new i.Extension.EmptyTextNumberFormatter}),headerClass:"column-weight",headerCell:f},{name:"sku",label:"SKU",cell:"string",formatter:i.Extension.EmptyTextStringFormatter,headerClass:"column-sku "+(this.inventoryTrackingEnabled()?"":"column-before-controls"),headerCell:f}]),this.inventoryTrackingEnabled()&&(b=b.concat([{name:"inventory",label:"Inventory",cell:i.Extension.PlaceholderCell.extend({placeholderTemplate:'<div class="inventory-cell-placeholder cell-placeholder"></div>',emptyText:"null"}),formatter:new i.Extension.ValidateFormatter({validator:_.extend({},{pattern:"digits"},y.inventory)}),headerClass:"column-track-inventory column-before-controls",headerCell:f}])),b=b.concat([{name:"",label:"",editable:!1,cell:a,headerClass:"column-variant-controls",headerCell:f}])},checkForDuplicates:function(){var e=this.model.commonVariations();if(this.hideVariantWarnings(),!_.isEmpty(e)){var t,i,n,o,s,r;_.each(e,function(e){i=[],n=_.keys(e);for(var a=0;a<n.length;a++)t=this.grid.columns.findWhere({label:n[a]}),_.isUndefined(t)||i.push(t);o=this.gridProxyCollection.where(e),_.each(o,function(e){s=this.grid.collection.indexOf(e),this.grid.body.rows[s].$el.addClass("warn-row"),_.each(i,function(e){r=this.grid.columns.indexOf(e),this.grid.body.rows[s].cells[r].$el.addClass("warn")},this)},this)},this)}},addVariant:function(){var e=this.model,t=e.get("options2").sort(),i=e.get("skus"),n=i.max(function(e){return parseInt(e._sort,10)}),s=i.model,r=Weebly.Restrictions.isUnlimited("com_product_variant_limit"),a=i.length>=Weebly.Restrictions.accessValue("com_product_variant_limit");if(!r&&a)return o.vent.trigger("billing:upgrade:window",{restrictionID:"com_product_variant_limit",restrictionType:"feature",refer:"commerce"}),void 0;var l=new s({owner_id:this.model.get("owner_id"),site_id:this.model.get("site_id"),site_product_id:this.model.get("site_product_id"),price:n.get("price"),sale_price:n.get("sale_price"),weight:n.get("weight"),inventory:n.get("inventory"),sku:null});l._sort=n._sort+1,i.add(l);var c;t.each(function(e){c=n.get("optionchoices").findWhere({name:e.get("name")}),c=c?c.get("choice"):void 0,l.get("optionchoices").add({name:e.get("name"),choice:c||"",owner_id:l.get("owner_id"),site_id:l.get("site_id"),site_product_id:l.get("site_product_id"),site_product_sku_id:l.get("site_product_sku_id")||l.cid})}),this.renderGrid(),this.paginator&&this.paginator.collection.getLastPage(),this.$el.find("tbody tr:last-child td:first").trigger("click")},removeVariant:function(e){var t,i,n=e.collection;1===n.fullCollection.length?(i=this.model.get("options2"),t=e.get("optionchoices"),i.remove(i.models),t.remove(t.models),e.set("image_order",null),o.commerce.vent.trigger("store:product:render")):1===n.length?(n.remove(e),n.getPage(n.state.currentPage)):n.remove(e)},listenForTab:function(t){var i,n=this,o=n.gridProxyCollection;e(t.currentTarget).on("keydown",function(e){9===e.which&&(i=o.state,i.currentPage<i.totalPages?(o.getNextPage(),n.$el.find("tbody tr:first-child td:first").trigger("click")):n.addVariant())})},showVariantErrors:function(){this.grid&&this.grid.body.$el.find(".warn").removeClass("warn").addClass("warn-error")},hideVariantWarnings:function(){this.grid&&(this.grid.body.$el.find("warn-row").removeClass("warn-row"),this.grid.body.$el.find(".warn, .warn-error").removeClass("warn warn-error"))},inventoryTrackingEnabled:function(){return this.model.get("track_inventory")===!0&&Weebly.Restrictions.hasAccess("com_inventory_tracking")},focusBlankOptionchoice:function(){this.$el.find(".cell-placeholder:visible").first().trigger("click")}});return r}),_wAMD.define("tpl!commerce/editor/store/product/detail/variants/edit-variant-image-item-view",[],function(){return'<div class="variant-image-controls">\n	<span class="selected-checkmark"></span>\n</div>\n\n<div class="variant-image-container">\n	<div class="variant-image" style="background-image:url(\'{{image}}\');"></div>\n</div>\n'}),_wAMD.define("commerce/editor/store/product/detail/variant/EditVariantImageItemView",["jquery","backbone-all","mustache","editor/app","commerce/editor/model/ProductImage","tpl!commerce/editor/store/product/detail/variants/edit-variant-image-item-view"],function(e,t,i,n,o,s){var r=t.Marionette.ItemView.extend({tagName:"li",className:"edit-variant-item",events:{click:"selectImage"},template:i.compile(s),templateHelpers:function(){var e=this;return{image:function(){return e.model.uri(e.model.getMaxAvailableWidth(320))}}},initialize:function(){this.watchImageLoad(this)},watchImageLoad:function(t,i,o){o=o||0,e.get(t.model.uri(t.model.getMaxAvailableWidth(320))).success(function(){i&&n.commerce.vent.trigger("store:product:variant:image:load",this.model)}).fail(function(){o++,200>o&&(t.imageLoadTimeout=setTimeout(t.watchImageLoad,1e3,t,!0,o))})},onClose:function(){clearTimeout(this.imageLoadTimeout)},selectImage:function(){n.commerce.vent.trigger("store:product:variant:image:select",this.model)}});return r}),_wAMD.define("tpl!commerce/editor/store/product/detail/variants/edit-variant-image-empty-view",[],function(){return"{{#tl}}This product does not have any images, please upload an image first{{/tl}}\n"}),_wAMD.define("commerce/editor/store/product/detail/variant/EditVariantImageEmptyView",["backbone-all","mustache","tpl!commerce/editor/store/product/detail/variants/edit-variant-image-empty-view"],function(e,t,i){var n=e.Marionette.ItemView.extend({tagName:"li",className:"edit-variant-image-empty",template:t.compile(i)});return n}),_wAMD.define("tpl!commerce/editor/store/product/detail/variants/edit-variant-images-composite-view",[],function(){return'<ul class="product-variant-images-list">\n	{{! Populated by the CompositeView }}\n</ul>\n'}),_wAMD.define("commerce/editor/store/product/detail/variant/EditVariantImagesCompositeView",["backbone-all","mustache","./EditVariantImageItemView","./EditVariantImageEmptyView","tpl!commerce/editor/store/product/detail/variants/edit-variant-images-composite-view"],function(e,t,i,n,o){var s=e.Marionette.CompositeView.extend({emptyView:n,itemView:i,itemViewContainer:".product-variant-images-list",template:t.compile(o),dialog:{title:_W.tl("Select Variant Image"),minHeight:450,minWidth:600,position:{my:"center",at:"center",of:"#commerce_editor"},buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com variant-images-cancel"},{text:_W.tl("Save"),className:"btn-com btn-success variant-images-save"}]}]},events:{"click .variant-images-save":"dialogSave","click .variant-images-cancel":"dialogCancel"},modelEvents:{"change:image_order":"_renderChildren"},initialize:function(){this.collection=this.model.get("product").get("images"),this.rollbackPoint=this.model.toJSON(),this.listenTo(editorApp.commerce.vent,{"store:product:variant:image:select":_.bind(this.handleSelectImage,this),"store:product:variant:image:load":_.bind(this.render,this)})},showCollection:function(){for(var t,i,n=this.model.get("product"),o=n.get("images"),s=n.get("image_order")||[],r=n.get("site_product_id"),a=n.get("site_id"),l=n.get("owner_id"),c=0;c<s.length;c++)i=o.findWhere({owner_id:l,site_id:a,site_product_id:r,site_product_image_id:s[c]}),i instanceof e.Model&&(t=this.getItemView(i),this.addItemView(i,t,c))},onAfterItemAdded:function(e){var t=-1!==_.indexOf(this.model.get("image_order"),Number(e.model.get("site_product_image_id")));t&&e.$el.addClass("selected")},handleSelectImage:function(e){var t=Number(e.get("site_product_image_id")),i=_.clone(this.model.get("image_order"));i=-1===_.indexOf(i,t)?[t]:_.without(i,t),this.model.set("image_order",i)},dialogCancel:function(){this.model.hasChanged("image_order")&&this.model.set({image_order:this.rollbackPoint.image_order}),this.trigger("dialog:close")},dialogSave:function(){this.trigger("dialog:close")}});return s}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wInputTag/InputTag",["jquery","mustache","util/Clazz","jquery-ui/sortable"],e):e(window.jQuery,Mustache,clazz)}(function(e,t,i){function i(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}function n(e){var t=0;if(e.selectionStart)t=e.selectionStart;else if(document.selection){var i,n,o;e.focus(),i=document.selection.createRange(),null!==i&&(n=e.createTextRange(),o=n.duplicate(),n.moveToBookmark(i.getBookmark()),o.setEndPoint("EndToStart",n),t=o.text.length)}return t}var o={BACKSPACE:8,TAB:9,ENTER:13,LEFT:37,RIGHT:39},s={REMOVE:0,ADD:1,REPLACE:2},r={UNSPECIFIED:0,DUPLICATE_ENTRY:1,EXCEEDS_MAX:2},a={sortable:!0,editable:!0,xable:!1,max:void 0,autocomplete:!1,tokenizer:/,/,duplicates:!1,createOnTab:!0,createOnEnter:!0,createOnBlur:!0,template:{}};a.editTagToRaw=function(e){return e.find(".input-tag-edit").val()},a.editTagFromRaw=function(){return{}};var l=i(Object,{initialize:function(t){this.opts=e.extend({},a,t),this.$el=e(this.opts.el).hide(),this.$el.attr("tabindex","-1"),this.container=e(document.createElement("div")).addClass("w-input-tag-container"),this.$el.after(this.container),this.opts.placeholder=this.opts.placeholder||this.opts.el.getAttribute("placeholder"),this.values=this.$el.val(),this.values=this.values?this.values.split(this.opts.tokenizer):[],this.newTag=void 0,this.error=!1,this.expanded=!1,this.backspace=!1,this.navigating=!1,this.initializeTemplates(),this.initializeExpanderHelper(),this.render(),this.initializePlaceholder(),this.initializeEvents()},initializeExpanderHelper:function(){this.expandWidthHelper=e(document.createElement("span")).addClass("new-input-tag-input").css({whiteSpace:"no-wrap",visibility:"hidden",position:"absolute",fontSize:"14px",height:"auto",width:"auto",left:0,top:0}),this.$el.after(this.expandWidthHelper)},initializeEvents:function(){this.list.on("click",".input-tag",function(e){e.stopPropagation()}),this.list.on({focus:_.bind(this.onListFocus,this)}),this.list.on("blur",".new-input-tag input",_.bind(this.onNewInputBlur,this)),this.list.on("keyup",".new-input-tag input",_.bind(this.onNewInputKeyup,this)),this.list.on("keydown",".new-input-tag input",_.bind(this.onNewInputKeydown,this)),this.list.on("keypress",".new-input-tag input",_.bind(this.onNewInputKeypress,this)),this.opts.xable&&this.list.on("click",".input-tag-x",_.bind(function(t){var i=e(t.currentTarget).closest(".input-tag");this.deleteTag(i)},this)),this.opts.editable&&(this.list.on("blur",".input-tag:not(.new-input-tag) input",_.bind(this.onTagEditBlur,this)),this.list.on("focus",".input-tag:not(.new-input-tag) input",_.bind(this.onTagEditFocus,this)),this.list.on("keydown",".input-tag:not(.new-input-tag) input",_.bind(this.onTagEditInputKeydown,this)),this.list.on("keypress",".input-tag:not(.new-input-tag) input",_.bind(this.onTagEditInputKeypress,this))),this.opts.sortable&&this.list.sortable({handle:".input-tag-grip",scroll:!1,start:_.bind(this.onSortableStart,this),update:_.bind(this.onSortableUpdate,this)})},initializeTemplates:function(){var e=_.result(this.opts.template,"newTag");this.template={},this.template.newTag=e||t.compile('<li class="input-tag'+(this.opts.sortable?" input-tag-sortable":"")+(this.opts.xable?" input-tag-xable":"")+'" data-value="{{value}}">'+(this.opts.sortable?'<span class="input-tag-grip"></span>':"")+'<input class="input-tag-edit" type="text" value="{{value}}" tabindex="-1" />'+(this.opts.xable?'<span class="input-tag-x">&times;</span>':"")+"</li>")},render:function(){this.list=e(document.createElement("ul")).addClass("w-input-tag-list"),this.list.addClass("text-input").attr("tabindex",0);for(var t=0;t<this.values.length;t++)this.renderTag(this.values[t]);this.container.append(this.list),this.opts.autocomplete&&this.container.append('<div class="tag-target"></div>')},initializePlaceholder:function(){var i=this.$el.attr("placeholder")||this.opts.placeholder;if(Modernizr.input.placeholder&&i){var n,o=this.list;this.template.placeholder=t.compile('<input class="w-input-tag-placeholder" type="text" placeholder="" tabindex="-1" readonly disabled />'),this.placeholder=n=e(this.template.placeholder()),this.placeholder.attr("placeholder",i).css({width:o.outerWidth()}),this.list.on("keyup",".new-input-tag input",_.bind(function(e){e.currentTarget.value.length&&n.hide()},this)),this.list.on("blur",".new-input-tag input",_.bind(function(){0===this.list.children(":not(.new-input-tag)").length&&n.show()},this)),this.$el.on("change",function(e){n.toggle(!e.currentTarget.value.length)}),this.list.children().length&&n.hide(),this.list.after(this.placeholder).toggleClass("placeholder")}},commitTag:function(e){this.newTag.hide(),this.addTag(e,!0)&&(this.creatingNew=!0,this.triggerChange(null,e))},onListFocus:function(){void 0===this.newTag&&(this.createNewTagInput(),this.list.attr("tabindex","-1"))},onTagEditBlur:function(t){var i,n;if(!this.newTag)if(this.list.removeClass("focused"),i=e(t.currentTarget).closest(".input-tag"),n=this.opts.editTagToRaw.call(this,i),0===n.length)i.remove();else if(i&&n!==i.attr("data-value")){var o=-1!==_.indexOf(this.values,n);if(this.opts.duplicates===!1&&o)this.triggerError(r.DUPLICATE_ENTRY);else{var s=i.attr("data-value"),a=n;this.setTag(i,n),this.triggerChange(s,a)}}},onTagEditFocus:function(){this.list.addClass("focused")},onTagEditHover:function(t){this.editTag=e(t.currentTarget),t.stopPropagation()},onNewInputBlur:function(t){if(t.stopPropagation(),t.preventDefault(),this.newTag){if(!this.creatingNew&&this.opts.createOnBlur){var i=t.currentTarget;i.value.length&&this.addTag(i.value,!0)&&(this.creatingNew=!0,this.triggerChange(null,i.value))}this.newTag.remove(),this.newTag=void 0,this.expanded=!1,this.focusTag(),this.backspace=!1,this.navigating=!1,this.creatingNew||this.error?(this.error=!1,this.creatingNew=!1,this.createNewTagInput()):this.list.attr("tabindex","0").removeClass("focused").trigger(e.Event("blur"))}},onNewInputKeyup:function(){this.creatingNew&&this.createNewTagInput()},onNewInputKeydown:function(e){var t,i=e.metaKey||e.altKey||e.ctrlKey,s=e.currentTarget,r=s.value.length,a=e.which,l=a===o.TAB&&this.opts.createOnTab,c=a===o.ENTER&&this.opts.createOnEnter,u=l||c;return u&&this.opts.createOnTab&&r>0?(this.commitTag(s.value),void 0):(t=this.getTextWidth(e.target.value)+10,a===o.BACKSPACE&&t<=this.expandedWidth&&this.newTag.css({width:this.expandedWidth}),a===o.BACKSPACE&&0===r?this.backspace===!1&&this.navigating!==!1?(this.focusTag(this.navigating).addClass("delete"),this.backspace=!0):this.backspace===!1?(this.focusTag(":not(.new-input-tag):last").addClass("delete"),this.backspace=!0,this.navigating=-1):(this.deleteTag(".focused"),this.backspace=!1,this.navigating=!1):a===o.LEFT&&0===n(s)?(this.navigating=_.isNumber(this.navigating)?this.navigating-1:-1,this.backspace=!1,this.focusTag(this.navigating)):a===o.RIGHT&&n(s)===r?(this.navigating=_.isNumber(this.navigating)?this.navigating+1:0,this.backspace=!1,this.focusTag(this.navigating)):(this.focusTag(),this.backspace=!1,this.navigating=!1),(i||this.expanded)&&t>=this.expandedWidth&&this.newTag.css({width:"100%"}),void 0)},onNewInputKeypress:function(e){if(this.opts.tokenizer.test(String.fromCharCode(e.which))){var t=e.currentTarget.value;if(0===t.length)return!1;this.newTag.hide(),this.addTag(t,!0)&&(this.creatingNew=!0,this.triggerChange(null,t))}},onTagEditInputKeydown:function(e){e.which===o.BACKSPACE&&this.expandEditTagInput(e.currentTarget)},onTagEditInputKeypress:function(e){this.expandEditTagInput(e.currentTarget)},onSortableUpdate:function(){var e=this.list.sortable("toArray",{attribute:"data-value"});e=_.without(e,""),this.triggerReorder(e)},onSortableStart:function(e,t){t.helper.css({width:t.helper.width()+2,height:""}),this.focusTag(),this.backspace=!1},triggerError:function(t){var i,n;this.error=!0,t=t||r.UNSPECIFIED,n=_.filter(_.keys(r),function(e){return r[e]===t}),i=e.Event("error",{errorCode:t,errorType:n}),this.$el.trigger(i)},triggerChange:function(t,i){var n,o,r=!_.isNull(t),a=!_.isNull(i);!r&&a?o=s.ADD:!a&&r?o=s.REMOVE:a&&r&&(o=s.REPLACE),n=e.Event("change",{oldValue:t,newValue:i,action:o}),this.error=!1,this.values=this.getValues(),this.$el.val(this.values.join(",")).trigger(n)},triggerReorder:function(t){var i=e.Event("reorder",{values:t});this.values=t,this.$el.val(this.values.join(",")).trigger(i)},getValues:function(){var e=this.list.children('[data-value]:not([data-value=""])');return _.map(e,function(e){return e.getAttribute("data-value")})},createNewTagInput:function(){var t=this;this.newTag=e(this.template.newTag()),this.newTag.css("width","10").addClass("new-input-tag"),this.list.append(this.newTag).addClass("focused"),this.expandNewTagInput(),this.newTag.find("input").focus(),this.opts.autocomplete&&this.newTag.find("input").autocomplete({source:function(e,i){for(var n=[],o=0;o<t.opts.autocomplete.length;o++){var s=t.opts.autocomplete[o];-1!==s.indexOf(e.term)&&-1===_.indexOf(t.values,s)&&n.push(s)}i(n)},appendTo:this.container.find(".tag-target"),messages:{noResults:"",results:function(){}},select:function(e,i){t.commitTag(i.item.value)},focus:function(){var t=e(this).data("uiAutocomplete").menu.element;t.find("li").removeClass("focused");var i=t.find("li:has(a.ui-state-focus)");i.addClass("focused")}})},deleteTag:function(e){var t=this.list.children().filter(e),i=t.attr("data-value");t.remove(),this.triggerChange(i,null),this.newTag&&(this.newTag.css("width",""),this.expandNewTagInput())},focusTag:function(t){var i=this.list.children(":not(.new-input-tag)").removeClass("focused delete");if(_.isNumber(t)){if(!(t<-i.length||t>=i.length))return i.eq(t).addClass("focused");this.navigating=!1}else if(t)return i.filter(t).addClass("focused");return e()},setTag:function(t,i){var n,o,s=this.list.children().filter(t);o=this.opts.editTagFromRaw.call(this,i),o.value=i,helperWidth=this.getTextWidth(i),n=e(this.template.newTag(o)),n.find("input").css("width",helperWidth),s.replaceWith(n)},expandEditTagInput:function(e){var t=this.getTextWidth(e.value)+10;e.style.width=t+"px"},expandNewTagInput:function(){var e=this.list.width(),t=this.newTag.position().left,i=this.newTag.width();this.expandedWidth=e-t-i,this.newTag.css("width",this.expandedWidth),this.expanded=!0},addTag:function(e,t){var i=-1!==_.indexOf(this.values,e);return this.opts.duplicates===!1&&i?(this.triggerError(r.DUPLICATE_ENTRY),!1):_.isNumber(this.opts.max)&&this.values.length+1>this.opts.max?(this.triggerError(r.EXCEEDS_MAX),!1):(this.renderTag(e,t),!0)},renderTag:function(t,i){var n,o,s,r;s=this.opts.editTagFromRaw.call(this,t),s.value=t,n=e(this.template.newTag(s)),o=n.find("input"),r=this.getTextWidth(o.val()),o.css("width",r),this.opts.editable||o.prop("readOnly",!0),this.list.append(n),i&&(n.addClass("animate-hidden"),setTimeout(function(){n.removeClass("animate-hidden")},50))},getTextWidth:function(e){var t=this.expandWidthHelper.text(e).outerWidth();return t+=1,this.opts.xable&&(t+=9),t}});return l.prototype.actions=s,l.prototype.errors=r,l.prototype.defaults=a,l}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wInputTag/ColorInputTag",["jquery","mustache","util/Clazz","./InputTag","vendor/spectrum"],e):e(window.jQuery,Mustache,clazz)}(function(e,t,i,n){var o=i(n,{initialize:function(t){var i={};i.editTagToRaw=function(e){var t=e.find(".edit-tag-input").val(),i=e.find(".edit-tag-color").attr("data-color");return i?t+"<"+i+">":t},i.editTagFromRaw=function(e){var t=e.match(/(.*)<(.*)>$/),i={};return t&&t.length?(i.name=t[1],i.color=t[2]):(i.name=e,i.color="#000000"),i},t=e.extend({},i,t),n.prototype.initialize.apply(this,arguments)},initializeEvents:function(){n.prototype.initializeEvents.apply(this,arguments),this.list.on("click",".edit-tag-color",_.bind(this.onColorTagClick,this)),this.list.on("mousedown",".edit-tag-color",_.bind(this.onColorTagMousedown,this))},initializeTemplates:function(){n.prototype.initializeTemplates.apply(this,arguments),this.template.newTag=t.compile('<li class="input-tag" data-value="{{value}}"><span class="input-tag-grip"></span><span class="input-tag-edit"><span class="edit-tag-color" data-color="{{color}}" style="background-color: {{color}}"></span><input class="edit-tag-input" type="text" value="{{name}}" tabindex="-1" /></span></li>')},initializeSpectrum:function(t){var i,n,o,s=this;i=e(t.currentTarget).closest(".input-tag"),n=i.find(".edit-tag-input"),o=i.find(".edit-tag-color"),this.spectrumNamespace=".spectrum-"+Math.floor(10000001*Math.random()),o.spectrum({color:o.attr("data-color"),containerOffsetY:5,containerOffsetX:-5,showInput:!0,showPalette:!0,chooseText:"Ok",theme:"spectrum-cell-picker sp-w",clickoutFiresChange:!0,clickPaletteToClose:!1,preferredFormat:"hex6",showSelectionPalette:!1,dontHideBoundElement:!0,palette:[["#d5d5d5","#a1a1a1","#818181","#626262","#515151","#3f3f3f","#2a2a2a"],["#f8a9a9","#e97676","#e05c5c","#da4444","#c23b3b","#a82e2e","#8d2424"],["#f8c7a9","#e9a476","#e0915c","#da8044","#c2743b","#a85f2e","#8d5024"],["#f8eaa9","#e9cf76","#e0bf5c","#dab844","#c2a43b","#a88d2e","#8d7824"],["#c9f8a9","#a9e976","#91e05c","#81c94c","#6cb83a","#5fa233","#508d24"],["#a9f8dd","#76e9c7","#5ce0b6","#4cc9a4","#3ab890","#33a27f","#248d6c"],["#a9e4f8","#76cae9","#5cbce0","#4caac9","#3a96b8","#3387a2","#24678d"],["#b5aaf6","#9789e8","#8273da","#7161d0","#6555c2","#5848b7","#5040ae"],["#d8aaf6","#c389e8","#b073da","#a561d0","#9555c2","#8c48b7","#8640ae"],["#f6aaf0","#e889e0","#da73d2","#d061c7","#c255b9","#b748ae","#ae40a5"]],beforeShow:function(){s.currentColorSwatch=o,s.currentColorName=n,o.spectrum("collapse")
},show:function(){s.renderOverlay()},hide:function(){s.currentColorSwatch=o,s.currentColorName=n,s.destroyOverlay()},move:function(e){var t=e.toHexString();o.attr("data-color",t).css("background-color",t)},change:function(e){var t=e.toHexString();o.attr("data-color",t).css("background-color",t)}})},onColorTagMousedown:function(e){this.initializeSpectrum(e),this.ignoreBlur=!0},onColorTagClick:function(e){e.preventDefault(),e.stopPropagation()},onTagEditBlur:function(t){var i,o,s;this.ignoreBlur||(e(document).off(this.spectrumNamespace),this.currentColorSwatch&&this.currentColorSwatch.spectrum("destroy"),this.currentColorSwatch=void 0,this.currentColorName=void 0,i=e(t.currentTarget).closest(".input-tag"),o=this.opts.editTagToRaw.call(this,i),s=-1!==_.indexOf(this.values,o),n.prototype.onTagEditBlur.apply(this,arguments),s&&(o=i.data("value"),hex=this.opts.editTagFromRaw(o).color,i.find(".edit-tag-color").attr("data-color",hex).css("background-color",hex),this.createNewTagInput()))},onListFocus:function(){this.ignoreBlur||n.prototype.onListFocus.apply(this,arguments)},setTag:function(t,i){var n,o,s=this.list.children().filter(t);o=this.opts.editTagFromRaw.call(this,i),o.value=i,helperWidth=this.getTextWidth(o.name),n=e(this.template.newTag(o)),n.find("input").css("width",helperWidth),s.replaceWith(n)},renderOverlay:function(){this.overlay=e("<div/>",{id:"spectrum-cell-overlay"}).on("click"+this.spectrumNamespace,_.bind(function(e){e.stopPropagation(),this.refocus(e)},this)),e(document.body).append(this.overlay)},destroyOverlay:function(){this.overlay&&this.overlay.off().remove()},refocus:function(e){this.currentColorSwatch.spectrum("hide"),e.currentTarget=this.currentColorName[0],this.ignoreBlur=!1,this.onTagEditBlur(e)}});return o}),_wAMD.define("jquery-ui/menu",["jquery","./core","./widget","./position"],function(e){!function(e){e.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,s,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",s=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),s===o?r=!0:s=o+s,a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,s,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>o?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-o<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,n,o;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+o>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(e)}),_wAMD.define("jquery-ui/autocomplete",["jquery","./core","./widget","./position","./menu"],function(e){!function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),s="textarea"===o,r="input"===o;this.isMultiLine=s?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case s.UP:t=!0,this._keyEvent("previous",o);break;case s.DOWN:t=!0,this._keyEvent("next",o);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,n.preventDefault(),void 0;if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(e)}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wInputTag",["jquery","./wInputTag/InputTag","./wInputTag/ColorInputTag","jquery-ui/autocomplete"],e):e(window.jQuery)}(function(e,t,i){"undefined"==typeof e.fn.wInputTag&&(e.fn.extend({wInputTag:function(n){var o;return n=n||{},this.each(function(s,r){o="color"===n.type?new i:new t,n.el=r,o.initialize(n),e(r).data("wInputTag",o)}),this}}),e.fn.wInputTag.actions=t.prototype.actions,e.fn.wInputTag.errors=t.prototype.errors,e.fn.wInputTag.defaults=t.prototype.defaults)}),_wAMD.define("tpl!commerce/editor/store/product/detail/options/edit-options-item-view",[],function(){return'<form> {{! Empty form used to stop IE9 from submitting other forms !}}\n	<span class="option-sortable-grip w-icon-grip"></span>\n\n	<span class="option-label">\n		<input type="text" name="name" value="{{name}}" placeholder="{{#esc_attr}}{{#tl}}e.g. Color{{/tl}}{{/esc_attr}}" />\n	</span>\n\n	<span class="option-label">\n		<input type="hidden" name="values" value="{{values}}" placeholder="{{#esc_attr}}{{#tl}}e.g. Green, Red, White{{/tl}}{{/esc_attr}}" />\n	</span>\n\n	<span class="option-label">\n		<select name="renderer">\n			<option value="dropdown" data-icon="dropdown-icon">{{#tl}}Dropdown List{{/tl}}</option>\n			<option value="radio" data-icon="radio-icon">{{#tl}}Multiple Choice{{/tl}}</option>\n			<option value="color" data-icon="color-icon">{{#tl}}Color Choice{{/tl}}</option>\n		</select>\n	</span>\n\n	<span class="option-delete w-icon-delete"></span>\n</form>\n'}),_wAMD.define("commerce/editor/store/product/detail/options/EditOptionsItemView",["jquery","underscore","backbone-all","mustache","backgrid","util/ui/wSelectbox","util/ui/wInputTag","tpl!commerce/editor/store/product/detail/options/edit-options-item-view","components/backgrid/backgrid-spectrum-cell"],function(e,t,i,n,o,s,r,a){var l=o.Extension.SpectrumCell.prototype.formatter.toRaw,c=o.Extension.SpectrumCell.prototype.formatter.fromRaw,u=i.Marionette.ItemView.extend({tagName:"li",template:n.compile(a),templateHelpers:function(){var e=this;return{deletable:function(){var i=e.product.commonVariations(this.name);return t.isEmpty(i)}}},modelEvents:{"change:renderer":"onRendererChange"},events:{"click .option-delete":"deleteOption","blur input":"setAttribute","change select":"setAttribute","submit form":"killEvent"},ui:{valuesInput:"input[name=values]",rendererInput:"select[name=renderer]"},attributes:function(){return{"data-option":this.model.get("site_option_id")||this.model.cid}},initialize:function(e){if(this.product=e.product,this.model._summary||(this.model._summary={added:[],removed:[],renamed:{}}),!this.model.get("choice_order")){var i=[],n=this.model.get("name"),o=this.product.getSkuOptionchoices();t.isEmpty(n)||(i=t.map(o,function(e){return e[n]}),i=t.unique(i)),this.model.set("choice_order",i)}},onShow:function(){var e=this.model.get("renderer"),i=this.model.get("choice_order");this.ui.rendererInput.val(e).wSelectbox({theme:"com_detached",iconsOnly:!0,menuClass:"product-edit-options-dialog"}),this.ui.valuesInput.val(i).wInputTag({type:e}).on({error:t.bind(this.onInputTagError,this),change:t.bind(this.onInputTagChange,this),reorder:t.bind(this.onInputTagReorder,this)})},onInputTagError:function(t){var i,n=e.fn.wInputTag.errors,o={animation:!1,placement:"top",trigger:"manual",container:"body",content:_W.tl("An error has occured"),delay:{show:500,hide:100}};switch(i=this.ui.valuesInput.data("wInputTag")?this.ui.valuesInput.data("wInputTag").list:this.ui.valuesInput,t.errorCode){case n.DUPLICATE_ENTRY:o.content=_W.tl("Duplicate values are not allowed.");break;case n.EXCEEDS_MAX:o.content=_W.tl("The maximum amount of allowed values have been entered.")}i.popover(o).popover("show").one("blur keydown",function(e){var t=e.metaKey||e.altKey||e.ctrlKey;("blur"===e.type||"keydown"===e.type&&!t)&&i.popover("destroy")})},onInputTagChange:function(i){var n=this.model._summary,o=e.fn.wInputTag.actions,s=i.currentTarget.value.split(",");switch(1===s.length&&""===s[0]&&(s=[]),i.action){case o.REMOVE:n.removed.push(i.oldValue),n.added=t.without(n.added,i.oldValue);break;case o.ADD:if("color"===this.model.get("renderer")){var r=c(i.newValue),a=s.indexOf(i.newValue);i.newValue=l(r.name,r.value),s[a]=i.newValue}n.added.push(i.newValue),n.removed=t.without(n.removed,i.newValue);break;case o.REPLACE:var u,d,r,h=t.keys(n.renamed),p=t.values(n.renamed);"color"===this.model.get("renderer")&&-1===i.oldValue.indexOf("#")&&(r=c(i.oldValue),i.oldValue=l(r.name,r.value)),d=t.indexOf(n.added,i.oldValue),-1!==d?n.added[d]=i.newValue:(d=t.indexOf(p,i.oldValue),u=-1!==d?h[d]:i.oldValue,n.renamed[u]=i.newValue)}this.model.set("choice_order",s)},onInputTagReorder:function(e){var t=e.currentTarget.value.split(",");this.model.set("choice_order",t)},onClose:function(){var e=this.ui.valuesInput.data("wInputTag")?this.ui.valuesInput.data("wInputTag").list:this.ui.valuesInput;e.popover("destroy"),this.ui.rendererInput.data("wSelectbox")&&this.ui.rendererInput.data("wSelectbox").destroy()},deleteOption:function(){this.trigger("option:delete",this.model),this.close()},setAttribute:function(e){var t=e.currentTarget,i={};this.model.has(t.name)&&(i[t.name]=t.value,this.model.set(i))},onRendererChange:function(e,i){var n,o,s={};o=(e.get("choice_order")||[]).slice(),"color"===e.previous("renderer")?(o=t.map(o,function(t){var i=t,n=c(t);return t=n.name,s[t]=n.value,this._updateAddedRenamed(e,i,t),t},this),e._history=s):"color"===i&&(s=e._history,o=t.map(o,function(t){var i=t;if(s&&s[t])t=l(t,s[t]);else{var n=c(t);t=l(n.name,n.value)}return this._updateAddedRenamed(e,i,t),t},this)),e.set("choice_order",o),this.render(),this.triggerMethod("show"),n=this.ui.rendererInput.data("wSelectbox")||this.ui.rendererInput,n&&n.focus()},_updateAddedRenamed:function(e,i,n){var o=e._summary,s=o.added.indexOf(i),r=t.indexOf(o.renamed,i);-1!==s?o.added[s]=n:-1!==r?o.renamed[r]=n:o.renamed[i]=n},killEvent:function(e){e.preventDefault(),e.stopPropagation()}});return u}),_wAMD.define("tpl!commerce/editor/store/product/detail/options/edit-options-empty-view",[],function(){return"{{#tl}}This product does not currently have any options{{/tl}}\n"}),_wAMD.define("commerce/editor/store/product/detail/options/EditOptionsEmptyView",["backbone-all","mustache","tpl!commerce/editor/store/product/detail/options/edit-options-empty-view"],function(e,t,i){var n=e.Marionette.CompositeView.extend({tagName:"li",className:"product-options-list-empty",template:t.compile(i)});return n}),_wAMD.define("tpl!commerce/editor/store/product/detail/options/edit-options-composite-view2",[],function(){return'<div class="product-options-header">\n	<div class="option-title">\n		{{#tl}}Option Title{{/tl}}\n		<span class="w-icon-question" data-content=\'{{#esc_attr}}{{#tl}}An option title, such as "Size" or "Color", is the title that describes the option choices.{{/tl}}{{/esc_attr}}\'></span>\n	</div>\n	<div class="values-title">\n		{{#tl}}Option Choices{{/tl}}\n		<span class="w-icon-question" data-content=\'{{#esc_attr}}{{#tl}}Option choices, such as "Small" or "Large", are the choices that make up an option.{{/tl}}{{/esc_attr}}\'></span>\n	</div>\n	<div class="input-type">\n		{{#tl}}Input Type{{/tl}}\n		<span class="w-icon-question" data-content="{{#esc_attr}}{{#tl}}An input type controls how your option choices display on the product page.{{/tl}}{{/esc_attr}}"></span>\n	</div>\n</div>\n\n<ul class="product-options-list section">\n	{{! Populated by the CompositeView }}\n</ul>\n'}),_wAMD.define("commerce/editor/store/product/detail/options/EditOptionsCompositeView2",["backbone-all","mustache","editor/app","commerce/editor/collection/OptionSuggestion","./EditOptionsItemView","./EditOptionsEmptyView","tpl!commerce/editor/store/product/detail/options/edit-options-composite-view2"],function(e,t,i,n,o,s,r){function a(e,t){return _.every(e,function(e,i){return t[i]&&t[i]===e})}var l=120,c={EXCEEDS_PLAN:1,CREATION_LIMIT:2,DUPLICATE_ENTRIES:3},u=e.Marionette.CompositeView.extend({emptyView:s,itemView:o,itemViewContainer:".product-options-list",itemViewOptions:function(){return{product:this.model}},template:t.compile(r),events:{"click .option-add":"addOption","click .option-save":"dialogSave","click .option-cancel":"dialogCancel"},dialog:{title:_W.tl("Edit Options"),dialogClass:"ui-dialog w-ui",minHeight:525,minWidth:760,position:{my:"center",at:"center",of:"#commerce_editor"},buttons:[{html:'<span class="w-icon-plus"></span>'+_W.tl("Add Option"),className:"btn-com btn-icon-left option-add"},{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com option-cancel"},{text:_W.tl("Save"),className:"btn-com btn-success option-save"}]}]},initialize:function(){var e=this;this.lastOption=null,this.listenTo(this,"itemview:option:delete",_.bind(this.deleteOption,this)),this._productOptions=this.model.get("options2");var t,i,o;t=_.map(this._productOptions.models,function(e){return i=JSON.parse(JSON.stringify(e.toJSON())),delete i.site_id,delete i.owner_id,delete i.site_product_id,delete i.site_product_option_id,o=new e.constructor(i),o._original=e,o}),e.optionSuggestions=new n,e.optionSuggestions.fetch(),this.collection=new this._productOptions.constructor(t),this.listenTo(this._productOptions,{add:this.onProductOptionsAdd,remove:this.onProductOptionsRemove,change:this.onProductOptionsChange}),0===this.collection.length&&this.addOption()},initializeSortable:function(){this.$itemViewContainer&&this.$itemViewContainer.sortable({handle:".option-sortable-grip",stop:_.bind(this.onSortableStop,this),start:_.bind(this.onSortableStart,this),update:_.bind(this.onSortableUpdate,this),beforeStop:_.bind(this.onSortableBeforeStop,this)})},onRender:function(){this.$el.find(".w-icon-question").popover({animation:!1,trigger:"hover",placement:"top",container:"body"})},onShow:function(){this.initializeSortable();var e=this.$itemViewContainer;e&&e.children(":first-child").find("input:first").focus()},addOption:function(){if(null===this.lastOption||this.lastOption&&""!==this.lastOption.get("name")){var e=new this.collection.model({name:"",renderer:"dropdown",site_product_id:this.model.get("site_product_id")||this.model.cid,sort_order:this.collection.length});this.collection.add(e),this.lastOption=e,this.render(),this.initializeSortable()}this.$itemViewContainer.children(":last-child").find("input:first").focus()},deleteOption:function(e,t){this.collection.remove(t),this.lastOption===t&&(this.lastOption=null)},onSortableStart:function(e,t){var i=10;t.helper.css({height:"auto","margin-left":-i,"padding-left":i,"padding-right":i,width:t.helper.width()+2*i+2}),t.helper.addClass("ui-dragging"),t.placeholder.css({height:t.helper.outerHeight()})},onSortableStop:function(){},onSortableBeforeStop:function(e,t){t.helper.removeAttr("style").removeClass("ui-dragging")},onSortableUpdate:function(){var e,t=this.$itemViewContainer.sortable("toArray",{attribute:"data-option"});t.each(function(t,i){e=/^c/.test(t)?this.collection.get(t):this.collection.findWhere({site_product_id:t}),e.set({sort_order:i})},this)},createNewSkus:function(){var e,t=this.model,i=t.get("skus"),n=i.length,o=0,s=0,r=[],a=[];this.collection.each(function(e){this.renameRenamedSkus(e),r=this.getRemovedSkus(e),n-=r.length,i.remove(r),o+=r.length,a=this.getAddedSkus(e),n+=a.length,i.add(a),s+=a.length},this);var u=n>=Weebly.Restrictions.accessValue("com_product_variant_limit"),d=Weebly.Restrictions.isUnlimited("com_product_variant_limit");if(!d&&u)throw c.EXCEEDS_PLAN;if(s>0&&n>l)throw c.CREATION_LIMIT;if(!this.collection.length){for(;i.length>1;)e=i.first(),i.remove(e);e=i.first(),e.set({price:null,get_current_price:null,sale_price:null,sku:null,weight:null})}},resetSkus:function(e,t){var i;e.reset(t).each(function(e){i=e.get("site_product_sku_id")?_.findWhere(t,{site_product_sku_id:e.get("site_product_sku_id")}):t[0],e.get("optionchoices").reset(i.optionchoices),t=_.without(t,i)})},renameRenamedSkus:function(e){var t,i,n=this.model,o=e.get("name");_.each(e._summary.renamed,function(e,s){i={},i[o]=s,t=n.findSkuByOptionChoices(i,[],"some"),_.each(t,function(t){t.get("optionchoices").findWhere({name:o}).set("choice",e)})})},getRemovedSkus:function(e){var t,i=[],n=this.model,o=e.get("name");return _.each(e._summary.removed,function(e){t={},t[o]=e,i=_.union(i,n.findSkuByOptionChoices(t,[],"some"))}),i},getAddedSkus:function(e){var t,i,n=this.model,o=e.get("name"),s=[],r=[];return _.each(e._summary.added,function(e){n.get("skus").each(function(n){if(t=n.getOptionchoices(),_.isUndefined(t[o]))n.get("optionchoices").add({name:o,choice:e,site_id:n.get("site_id"),site_product_id:n.get("site_product_id"),site_product_sku_id:n.get("site_product_sku_id")});else if(""===t[o])n.get("optionchoices").findWhere({name:o}).set("choice",e);else{t[o]=e;var l=_.some(r,function(e){return a(t,e)});if(l)return;r.push(t),i=new n.collection.model({owner_id:n.get("owner_id"),site_id:n.get("site_id"),site_product_id:n.get("site_product_id"),price:n.get("price"),sale_price:n.get("sale_price"),weight:n.get("weight"),inventory:n.get("inventory"),sku:null}),n.get("optionchoices").each(function(t){t.get("name")!==o?i.get("optionchoices").add({name:t.get("name"),choice:t.get("choice"),owner_id:t.get("owner_id"),site_id:t.get("site_id"),site_product_id:t.get("site_product_id"),site_product_sku_id:i.cid}):i.get("optionchoices").add({name:o,choice:e,owner_id:t.get("owner_id"),site_id:t.get("site_id"),site_product_id:t.get("site_product_id")})
}),s.push(i)}})}),s},verifyOptions:function(){var e,t;if(this.collection.each(function(e){t=e.get("choice_order"),0===e.get("choice_order").length&&e._summary.removed.length?e.collection.remove(e):""===e.get("name")&&e.collection.remove(e)},this),e=this.collection.pluck("name"),e.length!==_.unique(e).length)throw c.DUPLICATE_ENTRIES},applyChanges:function(){var e,t,i=this._productOptions;this.collection.each(function(n){e=n._original,t=n.toJSON(),""!==t.name&&(e?(delete t.site_id,delete t.owner_id,delete t.site_product_id,delete t.site_product_option_id,t=_.extend({},e.attributes,t),e.set(t)):i.add(t))}),_.each(this.collection._removed,function(e){i.remove(e._original)})},onProductOptionsAdd:function(e){var t=this.optionSuggestions,i=t.findWhere({name:e.get("name")});i||(i=new t.model({name:e.get("name"),renderer:e.get("renderer"),choices:[]}),t.add(i)),e._suggestion=i},onProductOptionsRemove:function(e){if(!this.model.copyProduct){var t=e.get("name");this.model.get("skus").each(function(e){optionchoices=e.get("optionchoices"),optionchoices.where({name:t}).each(function(e){optionchoices.remove(e)})});var i,n,o=["price","sale_price","weight","sku"],s={};this.model.get("skus").each(function(e){i=[],e.get("optionchoices").each(function(e){e.get("name")!==t&&i.push(e.get("choice"))}),_.each(o,function(t){i.push(e.get(t))}),n=e.get("image_order"),i.push(_.isEmpty(n)?"":n.join(":")),i=i.join(":"),s[i]||(s[i]={},s[i].count=0,s[i].model=[]),s[i].count++,s[i].model.push(e)});var r;_.each(s,function(e){e.count>1&&(r=_.rest(e.model),_.each(r,function(e){e.collection.remove(e)}))})}},onProductOptionsChange:function(e){var t,i=this.optionSuggestions;if(e.changed.name){var n=e.changed.name,o=e.previousAttributes().name;this.model.get("skus").each(function(e){e.get("optionchoices").each(function(e){e.get("name")===o&&e.set("name",n)})})}if(e.changed.renderer){var s,r,a=e.get("name"),l=e.get("product"),c=l.get("skus"),u="color"===e.previousAttributes().renderer,d="color"===e.changed.renderer;(u||d)&&c.each(function(e){e.get("optionchoices").each(function(e){e.get("name")===a&&(s=e.get("choice"),r=s.match(/(.*)<(.*)>$/),u&&r?s=r[1]:d&&!r&&(s+="<#000000>"),e.set("choice",s))})})}if(e.changed.choice_order){var h,p;if(h=_.difference(e.changed.choice_order,e.previousAttributes().choice_order),p=_.difference(e.previousAttributes().choice_order,e.changed.choice_order),t=e._suggestion||i.findWhere({name:e.get("name")})){var f=_.clone(t.get("choices")),m=_.indexOf(f,p[0]);-1!==m?f[m]=h[0]:f.push(h[0]),f=_.unique(f),t.set("choices",f)}else t=new i.model({name:e.get("name"),renderer:e.get("renderer"),choices:h}),i.add(t)}},errorExceedsPlan:function(){i.vent.trigger("billing:upgrade:window",{restrictionID:"com_product_variant_limit",restrictionType:"feature",refer:"commerce"})},errorExceedsLimit:function(){var e,t=this;this.popover&&this.popover.popover("destroy"),this.popover=e=this.$el.find(".option-save").popover({animation:!1,placement:"top",trigger:"manual",container:"body",content:_W.tl("Saving these options will create too many variations.")}).popover("show").one("blur",function(){e.popover("destroy"),t.popover=void 0})},errorDuplicateEntries:function(){var e,t=this;this.popover&&this.popover.popover("destroy"),this.popover=e=this.$el.find(".option-save").popover({animation:!1,placement:"top",trigger:"manual",container:"body",content:_W.tl("Option names must be unique.")}).popover("show").one("blur",function(){e.popover("destroy"),t.popover=void 0})},dialogCancel:function(){this.trigger("dialog:close")},dialogSave:function(){var e=this.model.get("skus"),t=JSON.parse(JSON.stringify(e));try{this.verifyOptions(),this.createNewSkus(),this.applyChanges(),this.trigger("dialog:close"),i.commerce.vent.trigger("store:product:render"),i.commerce.vent.trigger("store:product:variant:checkForDuplicates")}catch(n){switch(n){case c.EXCEEDS_PLAN:this.resetSkus(e,t),this.errorExceedsPlan();break;case c.CREATION_LIMIT:this.resetSkus(e,t),this.errorExceedsLimit();break;case c.DUPLICATE_ENTRIES:this.errorDuplicateEntries();break;default:console.error(n.stack)}}},onBeforeClose:function(){this.popover&&this.popover.popover("destroy")}});return u}),_wAMD.define("tpl!commerce/editor/store/product/detail/variants",[],function(){return'<div class="sub-title-bar {{^hasOptions}}sub-title-separator{{/hasOptions}}">\n	<h2 class="product-variants-title">\n		<span class="title">{{! Populated by View }}</span>\n		<span class="com-tutorial-badge tut-subheader" data-key="product:options:add"/>\n	</h2>\n	<h3 class="product-variants-detail">{{! Populated by View }}</h3>\n\n	<button class="variant-edit-options btn-com btn-icon-left">\n		<span class="w-icon-edit"></span>\n		{{#hasOptions}}\n			{{#tl}}Edit Options{{/tl}}\n		{{/hasOptions}}\n		{{^hasOptions}}\n			{{#tl}}Add Options{{/tl}}\n		{{/hasOptions}}\n	</button>\n</div>\n\n<div class="product-variants-error no-errors">\n	<p>{{#tl}}The product could not be saved because of some errors:{{/tl}}</p>\n	<ul></ul>\n</div>\n\n{{! Populated by Backgrid }}\n<div class="product-variants"></div>\n\n{{! Populated by Dialog Region }}\n<div class="product-edit-options-dialog"></div>\n<div class="product-edit-variant-image-dialog"></div>\n'}),_wAMD.define("commerce/editor/store/product/detail/ProductVariantView",["backbone-all","underscore","mustache","editor/app","components/regions/Dialog","./variant/GridView","./variant/EditVariantImagesCompositeView","./options/EditOptionsCompositeView2","tpl!commerce/editor/store/product/detail/variants"],function(e,t,i,n,o,s,r,a,l){var c=e.Marionette.Layout.extend({className:"product-variants-view",template:i.compile(l),templateHelpers:function(){return{hasOptions:function(){return this.options2?!!this.options2.length:!1}}},regions:{productVariants:".product-variants",editOptionsDialog:o.extend({el:".product-edit-options-dialog"}),editVariantImageDialog:o.extend({el:".product-edit-variant-image-dialog"})},events:{"click .variant-edit-options":function(){n.commerce.vent.trigger("store:product:options:edit")}},ui:{title:".product-variants-title .title",detail:".product-variants-detail"},initialize:function(){this.listenTo(n.commerce.vent,{"store:product:options:edit":t.bind(this.showEditOptions,this),"store:product:variant:image:edit":t.bind(this.showEditVariantImage,this)}),this.listenTo(this.model.get("skus"),{add:this.updateTitle,remove:this.updateTitle})},onRender:function(){return this.updateTitle(),this},updateTitle:function(){var e,t=this.model.get("options2");0===t.length?(this.ui.title.text(_W.tl("Multiple Options")),this.ui.detail.text(_W.tl("Add multiple options like size or color"))):(e=this.model.get("skus").length,this.ui.title.text(_W.tl("Product SKUs ({{count}})").replace("{{count}}",e)),this.ui.detail.text(_W.tl("Each SKU is a unique combination of options")))},onShow:function(){this.productVariants.show(new s({model:this.model}))},showEditOptions:function(){this.editOptionsDialog.show(new a({model:this.model}))},showEditVariantImage:function(e){this.editVariantImageDialog.show(new r({model:e}))}});return c}),_wAMD.define("tpl!commerce/editor/store/product/detail/digitalDownload/options",[],function(){return'<tr>\n	<td>\n		<div id="product-digital-download-limit-type-holder" class="row">\n			<label for="editor_commerce_product_dd_limit">{{#tl}}Download Limit{{/tl}}</label>\n			<br/>\n			<div class="dd-option-container">\n				<div class="dd-option">\n					<select id="editor_commerce_product_dd_limit" class="product-digital-download-option" name="download_limit_type">\n						<option value="forever">{{#tl}}No Limit{{/tl}}</option>\n						<option value="downloadcount" {{#download_count}}selected{{/download_count}}>{{#tl}}# of Downloads{{/tl}}</option>\n						<option value="daycount" {{#download_daycount}}selected{{/download_daycount}}>{{#tl}}# of Days{{/tl}}</option>\n					</select>\n				</div>\n			</div>\n		</div>\n	</td>\n	<td>\n		<div id="product-digital-download-limit-unit-holder" class="row">\n			<label for="editor_commerce_product_dd_number_of">{{#tl}}Number of Downloads{{/tl}}</label>\n			<br/>\n			<span class="input-label-number">\n				<input id="editor_commerce_product_dd_number_of" class="product-digital-download-option" type="text" name="download_units_remaining" pattern="[0-9]*" placeholder="{{#esc_attr}}{{#tl}}How Many{{/tl}}{{/esc_attr}}?" value="{{{download_limit_unit_value}}}">\n			</span>\n		</div>\n	</td>\n</tr>'}),_wAMD.define("commerce/editor/store/product/detail/digitaldownload/ProductDigitalDownloadOptionsView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/product/detail/digitalDownload/options"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({className:"product-digital-download-optons section",tagName:"table",template:i.compile(o),templateHelpers:function(){var e=this;return{download_count:function(){return"downloadcount"==e.model.get("skus").first().get("download_limit_type")},download_daycount:function(){return"daycount"==e.model.get("skus").first().get("download_limit_type")},download_limit_unit_value:function(){return"forever"!=e.model.get("download_limit_type")?e.model.get("skus").first().get("download_units_remaining"):void 0}}},events:{"change #editor_commerce_product_dd_limit":"changeDownloadLimit","change .product-digital-download-option":"change"},initialize:function(e){this.productIsNew=e.productIsNew},change:function(e){var t,i=this.$(e.target).attr("name"),n=this.$(e.target);switch(i){case"download_limit_type":case"download_units_remaining":t=n.val(),this.model.get("skus").first().set(i,t)}},onShow:function(){this.$el.find("#editor_commerce_product_dd_limit").wSelectbox({theme:"com"}),"daycount"!=this.model.get("skus").first().get("download_limit_type")&&"downloadcount"!=this.model.get("skus").first().get("download_limit_type")&&this.$el.find("#product-digital-download-limit-unit-holder").hide()},changeDownloadLimit:function(){var e=this.$el.find("#editor_commerce_product_dd_limit").val(),t=this.$el.find("#product-digital-download-limit-unit-holder");"forever"==e?(this.model.get("skus").first().validation.download_units_remaining={required:!1},t.hide()):"daycount"==e?(this.model.get("skus").first().validation.download_units_remaining={pattern:"number",min:1,msg:_W.tl("Days must be a number above zero"),required:function(e,t,i){return"digital"==i.product_type}},t.find("label").text(_W.tl("Number of Days")),t.show()):"downloadcount"==e&&(this.model.get("skus").first().validation.download_units_remaining={pattern:"number",min:1,msg:_W.tl("Download count must be a number above zero"),required:function(e,t,i){return"digital"==i.product_type}},t.find("label").text(_W.tl("Number of Downloads")),t.show())}});return s}),_wAMD.define("tpl!commerce/editor/store/product/detail/digitalDownload/item",[],function(){return'<div class="product-digital-download-file-list-item">\n	{{name}}\n	<div class="product-digital-download-delete-item">\n		<span class="w-icon-delete"></span>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/product/detail/digitaldownload/ProductDigitalDownloadListItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/product/detail/digitalDownload/item"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({tagName:"li",className:"product-digital-download-file-list-item-holder",template:i.compile(o),initialize:function(){},events:{"click .product-digital-download-delete-item":"deleteFile"},deleteFile:function(){this.model&&this.model.collection&&this.model.collection.remove(this.model)}});return s}),_wAMD.define("tpl!commerce/editor/store/product/detail/digitalDownload/empty",[],function(){return'<div class="product-digital-download-file-list-item emptyItem">\n	{{#tl}}There are no downloads associated with this product.{{/tl}}\n</div>'}),_wAMD.define("commerce/editor/store/product/detail/digitaldownload/ProductDigitalDownloadListEmptyView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/product/detail/digitalDownload/empty"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({tagName:"li",className:"product-digital-download-file-list-item-holder",template:i.compile(o),initialize:function(){}});return s}),_wAMD.define("tpl!commerce/editor/store/product/detail/digitalDownload/itemslist",[],function(){return'<div>\n	<div class="sectionLabel">{{#tl}}Uploaded Files{{/tl}}</div>\n</div>\n<div>\n	<ul id="product-digital-download-file-list"></ul>\n</div>'}),_wAMD.define("commerce/editor/store/product/detail/digitaldownload/ProductDigitalDownloadItemsListView",["jquery","backbone-all","mustache","editor/app","./ProductDigitalDownloadListItemView","./ProductDigitalDownloadListEmptyView","tpl!commerce/editor/store/product/detail/digitalDownload/itemslist"],function(e,t,i,n,o,s,r){var a=t.Marionette.CompositeView.extend({className:"product-digital-download-items-list section",template:i.compile(r),itemView:o,emptyView:s,itemViewContainer:"#product-digital-download-file-list",className:"row",templateHelpers:function(){var e=this;return{has_Items:function(){return!!e.collection.size()}}},initialize:function(){}});return a}),_wAMD.define("tpl!commerce/editor/store/product/detail/digitalDownload/product-sku-file-upload",[],function(){return'<div class="variant-edit-options btn-com btn-icon-left w-file-upload-target">\n	<span class="w-icon-plus"></span>\n	{{#tl}}Upload Files{{/tl}}\n</div>\n'}),_wAMD.define("commerce/editor/store/product/detail/digitaldownload/ProductSkuFileUploaderView",["jquery","backbone","mustache","editor/app","components/uploader-view/UploaderView","editor/dialogs/UploadVirusError","tpl!commerce/editor/store/product/detail/digitalDownload/product-sku-file-upload"],function(e,t,i,n,o,s,r){var a=o.extend({className:"product-sku-file-uploader",tagName:"span",template:i.compile(r),initialize:function(e){return this.downloadListView=e.downloadListView,this.productIsNew=e.productIsNew,e.uploadOptions={target:".w-file-upload-target",type:"all",multipleFiles:!0,maxFileSize:Math.floor(Weebly.Restrictions.accessValue("digital_products_upload_limit")/1e3),params:{ucfid:window.com_currentSite,ucfpid:this.model.get("site_product_id"),ucfpsid:this.model.get("skus").first().get("site_product_sku_id"),type:"com_product_sku_file",cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}},o.prototype.initialize.apply(this,arguments)},onUploadSuccess:function(e){var t=this.model.get("skus").first(),i=t.get("files"),n=t.get("file_order")||[],o=i.add(e);n.push(o.get("site_product_sku_file_id")),this.model.set("file_order",n),this.productIsNew&&(1==i.size()&&(this.downloadListView.currentView.collection=i),this.downloadListView.currentView.render())},onUploadError:function(e){("%%VIRUS%%"===e.responseText||-200===e.code&&"403"===e.message)&&n.showDialog(new s)},onSWFUploadComplete:function(){n.commerce.vent.trigger("store:product:digital:upload:render")},copyProductSkuFiles:function(){if(this.model.copyProduct){var t=this.model.copyProduct,i=this;Weebly.Commerce.RPC.Product.copyFiles(com_userID,com_currentSite,t.get("skus").first().get("site_product_sku_id"),this.model.get("skus").first().get("site_product_sku_id")).done(function(t){t.success?e.each(t.data,function(e,t){i.onUploadSuccess(t)}):console.log(t.message)})}}});return a}),_wAMD.define("tpl!commerce/editor/store/product/detail/digitaldownload",[],function(){return'<div class="sub-title-bar sub-title-separator">\n	<h2 class="product-variants-title">{{#tl}}Digital Downloads{{/tl}}</h2>\n	<h3>{{#tl}}Upload files for your customers to download{{/tl}}</h3>\n\n	<span id="product-sku-file-uploader"></span>\n</div>\n\n<div class="product-digital-download-options-holder product-digital-download-section"></div>\n<div class="product-digital-download-items-list-holder product-digital-download-section"></div>\n'}),_wAMD.define("commerce/editor/store/product/detail/ProductDigitalDownloadView",["jquery","backbone-all","mustache","editor/app","./digitaldownload/ProductDigitalDownloadOptionsView","./digitaldownload/ProductDigitalDownloadItemsListView","./digitaldownload/ProductSkuFileUploaderView","tpl!commerce/editor/store/product/detail/digitaldownload"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.Layout.extend({className:"product-digitaldownload-view scaffold-com",template:i.compile(a),templateHelpers:function(){},regions:{productSkuFileUploader:"#product-sku-file-uploader",digitalDownloadItemsList:".product-digital-download-items-list-holder",digitalDownloadOptions:".product-digital-download-options-holder"},events:{},initialize:function(e){this.options=e,this.listenTo(n.commerce.vent,{"store:product:digital:upload:render":function(){this.showProductSkuFileUploaderView()}})},onShow:function(){this.options.productIsNew&&!this.options.model.copyProduct&&this.$el.closest(".digitaldownload").hide(),this.showDigitalDownloadOptions(),this.showProductSkuFileUploaderView(),this.showdigitalDownloadItemsList()},showDigitalDownloadOptions:function(){this.digitalDownloadOptions.show(new o({model:this.model,productIsNew:this.options.productIsNew}))},showProductSkuFileUploaderView:function(){this.productSkuFileUploader.show(new r({model:this.model,downloadListView:this.digitalDownloadItemsList,productIsNew:this.options.productIsNew}))},showdigitalDownloadItemsList:function(){this.digitalDownloadItemsList.show(new s({collection:this.model.get("skus").first().get("files")}))},setPostParameters:function(e){this.productSkuFileUploader.currentView.setPostParameters(e)},copyProductSkuFiles:function(){var t=this;if(t.model.copyProduct){var i=t.model.copyProduct.get("skus").filter(function(e){return"digital"==e.get("product_type")}),n=[];return _.each(i,function(i){n.push(Weebly.Commerce.RPC.ProductSku.copyFiles(com_userID,com_currentSite,i.get("site_product_id"),i.get("site_product_sku_id"),t.model.get("site_product_id"),i.get("site_product_sku_id")).done(function(i){i.success?e.each(i.data,function(e,i){t.productSkuFileUploader.currentView.onUploadSuccess(i)}):console.log(i.message)}))}),n}}});return l}),_wAMD.define("tpl!commerce/editor/store/product/detail/category/item",[],function(){return'<div class="breadcrumb">\n	{{#isLoading}}\n		... {{name}}\n	{{/isLoading}}\n\n	{{^isLoading}}\n		{{#ancestors}}\n			<span class="item">\n				<i class="w-icon-{{#first}}check-mark{{/first}}{{^first}}chevron-right-light{{/first}}"></i>\n				{{name}}\n			</span>\n		{{/ancestors}}\n	{{/isLoading}}\n</div>\n'}),_wAMD.define("commerce/editor/store/product/detail/categories/list/ProductCategoryListItemView",["backbone-all","mustache","editor/app","commerce/editor/model/CategoryHierarchy","tpl!commerce/editor/store/product/detail/category/item"],function(e,t,i,n,o){var s=e.Marionette.ItemView.extend({template:t.compile(o),templateHelpers:function(){var e=this,t=e.ancestors&&e.ancestors.first().get("site_category_id");return{isLoading:function(){return e.loading},ancestors:function(){return e.ancestors&&e.ancestors.toJSON()},first:function(){return this.site_category_id===t}}},initialize:function(){var e=this;e.loading=!0;var t=n.findOrCreate();t.fetch().done(function(){t.ancestors(e.model.get("site_category_id")).done(function(t){e.ancestors=t,e.loading=!1,e.render()})})}});return s}),_wAMD.define("commerce/editor/store/product/detail/categories/list/ProductCategoryListView",["jquery","backbone-all","editor/app","commerce/editor/collection/Category","./ProductCategoryListItemView"],function(e,t,i,n,o){var s=t.Marionette.CollectionView.extend({itemView:o,initialize:function(){var e=this;e.collection=new n,e.model.get("categories").done(function(t){var n=i.commerce.storefrontSettings.get("storefront_category_id"),o=t.filter(function(e){return e.get("site_category_id")!=n});e.collection.reset(o),e.listenTo(t,"add",function(t){t.get("site_category_id")!=n&&e.collection.add(t)}),e.listenTo(t,"remove",function(t){t.get("site_category_id")!=n&&e.collection.remove(t)})})}});return s}),_wAMD.define("tpl!commerce/editor/store/product/detail/categories/select/view",[],function(){return'<p>{{#tl}}Select which categories this product belongs to:{{/tl}}</p>\n<div class="category-list">\n	{{#isLoading}}\n		{{>commerce/editor/store/product/detail/categories/select/loading}}\n	{{/isLoading}}\n	{{^isLoading}}\n		{{>commerce/editor/store/product/detail/categories/select/list}}\n	{{/isLoading}}\n</div>'}),_wAMD.define("tpl!commerce/editor/store/product/detail/categories/select/list",[],function(){return"<ul>\n	{{#categories}}\n		{{>commerce/editor/store/product/detail/categories/select/item}}\n	{{/categories}}\n</ul>"}),_wAMD.define("tpl!commerce/editor/store/product/detail/categories/select/loading",[],function(){return'<ul>\n	<li class="category">\n		<div class="info">{{#tl}}Loading categories...{{/tl}}</div>\n	</li>\n</ul>\n'}),_wAMD.define("tpl!commerce/editor/store/product/detail/categories/select/item",[],function(){return'<li data-id="{{id}}" class="category">\n	<div class="info">\n		{{>commerce/editor/store/product/detail/categories/select/info}}\n	</div>\n	{{>commerce/editor/store/product/detail/categories/select/list}}\n</li>'}),_wAMD.define("tpl!commerce/editor/store/product/detail/categories/select/info",[],function(){return'<label>\n	<input type="checkbox" class="selected" {{#selected}}checked{{/selected}} />\n	<span class="name">{{name}}</span>\n</label>'}),_wAMD.define("commerce/editor/store/product/detail/categories/select/ProductCategoryEditListView",["jquery","underscore","backbone-all","mustache","editor/app","commerce/editor/model/Category","commerce/editor/model/CategoryHierarchy","commerce/editor/collection/Category","tpl!commerce/editor/store/product/detail/categories/select/view","tpl!commerce/editor/store/product/detail/categories/select/list","tpl!commerce/editor/store/product/detail/categories/select/loading","tpl!commerce/editor/store/product/detail/categories/select/item","tpl!commerce/editor/store/product/detail/categories/select/info","util/ui/wInput"],function(e,t,i,n,o,s,r,a,l,c,u,d,h){t.each({list:c,loading:u,item:d,info:h},function(e,t){var i="commerce/editor/store/product/detail/categories/select/"+t;n.compilePartial(i,e)});var p=i.Marionette.ItemView.extend({template:n.compile(l),className:"product-category-edit-list sortable-list-menu",ui:{checkboxes:".selected"},templateHelpers:function(){var t=this;return{isLoading:function(){return t.loading},name:function(){var e=t.allCategories.findWhere({site_category_id:this.id});return e.get("name")},selected:function(){return-1!=e.inArray(this.id,t.categoryIds)},categories:function(){return this.children||t.topCategories}}},events:{"click .btn-cancel":"cancel","click .btn-save":"save"},dialog:{dialogClass:"edit-categories-dialog",title:_W.tl("Edit Categories"),buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-cancel btn-com"},{text:_W.tl("Save"),className:"btn-save btn-com btn-success"}]}]},initialize:function(){var t=this,i=r.findOrCreate();t.allCategories=new a,t.loading=!0,e.when(t.model.get("categories"),i.fetch(),t.allCategories.fetch()).done(function(e){t.loading=!1,t.categories=e,t.categoryIds=e.pluck("site_category_id"),t.topCategories=i.get("hierarchy")[0].children,t.render()})},onRender:function(){this.ui.checkboxes.wCheckbox()},cancel:function(){this.trigger("dialog:close")},save:function(){var i=this,n=[],o=[];i.ui.checkboxes.each(function(){var t=e(this),i=t.closest("li[data-id]").attr("data-id"),s=t.prop("checked");(s?n:o).push(i)}),n=t.difference(n,i.categoryIds),o=t.intersection(o,i.categoryIds);var r=[];t.each(n,function(e){var t=s.findOrCreate({site_category_id:e}),n=t.fetch().done(function(){i.categories.add(t)});r.push(n)}),t.each(o,function(e){var t=i.categories.findWhere({site_category_id:e});i.categories.remove(t)}),e.when.apply(e,r).done(function(){i.trigger("dialog:close")})}});return p}),_wAMD.define("tpl!commerce/editor/store/product/detail/categories",[],function(){return'{{#categoriesExist}}\n	<div class="sub-title-bar">\n		<h2>{{#tl}}Categories{{/tl}}</h2>\n		<h3>{{#tl}}Select all categories that this product belongs to.{{/tl}}</h3>\n		<button class="product-edit-categories btn-com btn-icon-left">\n			<span class="w-icon-edit"></span> {{#tl}}Select Categories{{/tl}}\n		</button>\n	</div>\n	<div id="product-categories-list">\n	</div>\n	<div id="product-categories-dialog"></div>\n{{/categoriesExist}}'}),_wAMD.define("commerce/editor/store/product/detail/categories/ProductCategoryView",["jquery","backbone-all","mustache","commerce/editor/collection/Category","components/regions/Dialog","./list/ProductCategoryListView","./select/ProductCategoryEditListView","tpl!commerce/editor/store/product/detail/categories"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.Layout.extend({className:"product-categories-view",template:i.compile(a),regions:{categoriesRegion:"#product-categories-list",dialogRegion:o.extend({el:"#product-categories-dialog"})},templateHelpers:function(){var e=this;return{categoriesExist:function(){return e.categoriesExist}}},events:{"click .product-edit-categories":"editCategories"},initialize:function(){var e=this;e.loading=!0,n.count().done(function(t){e.categoriesExist=t>1,e.loading=!1,e.render()})},onRender:function(){var e=this;e.loading||e.categoriesExist&&e.categoriesRegion.show(new s({model:e.model}))},editCategories:function(){this.dialogRegion.show(new r({model:this.model}))}});return l}),_wAMD.define("tpl!commerce/editor/store/product/detail",[],function(){return'<div class="title-bar">	\n	<div class="buttons">\n		{{^isNew}}\n			<button class="view-product btn-com btn-icon-left">\n				<span class="w-icon-external"></span>\n				{{#tl}}View Product{{/tl}}\n			</button>\n\n			<button class="copy-product btn-com btn-icon-left">\n				<span class="w-icon-plus"></span>\n				{{#tl}}Copy Existing{{/tl}}\n			</button>\n		{{/isNew}}\n	</div>\n\n	<button class="back btn-com btn-back">{{#tl}}Back{{/tl}}</button>\n\n	<h1>\n		{{#isNew}}\n			{{#tl}}Add Product{{/tl}}\n			<span class="com-tutorial-badge tut-header" data-key="product:add"/>\n		{{/isNew}}\n		{{^isNew}}\n			{{#tl}}Edit Product{{/tl}}\n			<span class="com-tutorial-badge tut-header" data-key="product:edit"/>\n		{{/isNew}}\n	</h1>\n</div>\n\n<div class="images"></div>\n<div class="meta"></div>\n<div class="variants"></div>\n<div class="digitaldownload"></div>\n<div class="categories"></div>\n<div class="files"></div>\n<div class="dialog-region"></div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	{{^isNew}}\n		<button class="delete-product btn-com btn-danger">\n			{{#tl}}Delete Product{{/tl}}\n		</button>\n	{{/isNew}}\n\n	<label class="option">\n		<input type="checkbox" name="hidden" {{#hidden}}checked{{/hidden}} />\n		{{#tl}}Hidden{{/tl}}\n		<span class="help w-icon-question" data-content="{{#esc_attr}}{{#tl}}Hide this product from the site.{{/tl}}{{/esc_attr}}"></span>\n	</label>\n\n	<label class="option">\n		<input type="checkbox" name="featured" {{#showOnStorefront}}checked{{/showOnStorefront}} />\n		{{#tl}}Storefront{{/tl}}\n		<span class="help w-icon-question" data-content="{{#esc_attr}}{{#tl}}Show this product on the Storefront page.{{/tl}}{{/esc_attr}}"></span>\n	</label>\n\n	<div class="main-actions">\n		<button class="cancel-product-edit btn-com">{{#tl}}Cancel{{/tl}}</button>\n		<button class="save-product btn-com btn-success">{{#tl}}Save Product{{/tl}}</button>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/product/detail/ProductDetailView",["jquery","underscore","backbone-all","mustache","commerce/editor/model/Product","commerce/editor/model/Category","commerce/editor/collection/Product","commerce/editor/collection/Category","commerce/editor/collection/OptionSuggestion","editor/app","util/ui/wLoadButton","./ProductMetaView","./ProductImageView","./ProductVariantView","./ProductDigitalDownloadView","./categories/ProductCategoryView","components/regions/Dialog","components/views/ConfirmView","tpl!commerce/editor/store/product/detail","tpl!editor/loading"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v,b,y){var w=i.Marionette.Layout.extend({template:n.compile(y),className:"store-entity-detail store-product-detail",ui:{saveButton:".save-product",featued:".footer-bar input[name=featured]",deleteButton:".delete-product",footerBar:".footer-bar"},regions:{meta:".meta",images:".images",variants:".variants",digitaldownload:".digitaldownload",categories:".categories",dialogRegion:g.extend({el:".dialog-region"})},events:{"click .back":"cancelEdit","click .view-product":"viewProduct","click .copy-product":"copyProduct","click .delete-product":"deleteProduct","click .cancel-product-edit":"cancelEdit","click .save-product":"saveProduct","change .footer-bar input":"onChange","change #editor_commerce_product_type":"toggleDownloadsArea"},templateHelpers:function(){var t=this,i=c.commerce.storefrontSettings.get("storefront_category_id");return{isNew:function(){return t.productIsNew},hidden:function(){return!this.published},showOnStorefront:function(){return-1!==e.inArray(i,t.model.get("category_ids"))}}},initialize:function(t){var i=this;this.loading=!0,this.options=t||{},startWait(),i.optionSuggestions=new l;var s=!1;t.site_product_id?(i.model=o.findOrCreate({site_product_id:t.site_product_id}),s=i.model.fetch()):t.model&&(i.model=t.model,s=i.model.fetch()),e.when(s,i.optionSuggestions.fetch(),i.options.copy&&i.options.copy.fetch()).done(function(){endWait(),i.loading=!1,i.start(),i.listenTo(i.model,"change:track_inventory",i.onTrackInventoryChange),i.template=n.compile(b),i.render()}).fail(function(){console.error("fetch failed",i,arguments)})},start:function(){var e=this,t=e.model;e.options.copy&&(t=e.model=e.options.copy.cloneDeep(),t.copyProduct=e.options.copy),t||(t=e.model=new o),e.initializeProductOptions(),e.delegateEvents(),t.isNew()&&e.newProduct(),t.get("skus").isEmpty()&&t.get("skus").add({site_product_id:t.get("site_product_id"),sale_price:null,weight:null,sku:null,inventory:null}),e.options.setCategory&&t.get("categories").done(function(t){t.add(e.options.setCategory)});var n=(t.get("options2"),t.get("skus"));i.Validation.bind(e),e.listenTo(n,"remove",e.onProductSkuRemove),e.on("show:leaving",function(){e.ui.footerBar.hide()}),e.listenTo(c.commerce.vent,{"store:product:validate":e.validateProduct,"store:product:render":function(t){t&&(e.model=t),e.onRender()},"store:product:images:render":function(){e.showImagesView()}}),e.listenTo(c.vent,"user:upgrade",e.onRender),e.listenTo(c.commerce.store,"close",e.cancelEdit)},onRender:function(){this.rendered=!0,this.loading||(this.model.get("options2").length?this.removeSupplementalValidators():this.addSupplementalValidators(),this.showMetaView(),this.showImagesView(),this.categories.show(new m({model:this.model})),this.showSkusArea(),this.ui.footerBar.find("input[type=checkbox]").wCheckbox(),this.$el.find(".help").popover({trigger:"hover",placement:"top"}),this.$el.find(".w-checkbox-container.disabled").popover({trigger:"hover",container:"body",placement:"top",content:_W.tl("This feature is part of the business plan.")}),this.ui.saveButton.wLoadButton(),this.ui.deleteButton.wLoadButton())},newProduct:function(){var t=this,i=t.model,n=[];if(t.productIsNew=!0,i.copyProduct)t.$el.addClass("disable"),startWait(_W.tl("Copying Product"),!0);else{i.set({published:!0}),i.get("skus").add({sale_price:null,weight:null,sku:null,inventory:null});var s=e.Deferred();n.push(s.promise()),a.count().done(function(t){if(1!=t)return s.resolve();var n=new a([],{pageSize:1});e.when(i.get("categories"),n.fetch()).done(function(e){e.add(n.first()),s.resolve()}).fail(function(){s.reject()})});var r=o.presets().done(function(e){i.set(e)});n.push(r)}e.when.apply(e,n).done(function(){var n=i.commit();t.onRender(),n.done(function(n){var o=[];t.images.currentView.setPostParameters({ucfid:window.com_currentSite,ucfpid:n.data.site_product_id,type:"com_product_image",cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}),t.digitaldownload.currentView&&t.digitaldownload.currentView.setPostParameters({ucfid:window.com_currentSite,ucfpid:n.data.site_product_id,ucfpsid:n.data.skus[0].site_product_sku_id,type:"com_product_sku_file",cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}),i.copyProduct&&(o.push(t.images.currentView.copyProductImages()),t.digitaldownload.currentView&&o.concat(t.digitaldownload.currentView.copyProductSkuFiles()),e.when.apply(null,o).done(function(){t.digitaldownload.currentView||t.showVariantsView(),t.$el.removeClass("disable"),endWait(),i.copyProduct=null
}))}),n.fail(function(e){console.log(e)})})},initializeProductOptions:function(){var e=this.optionSuggestions,t=this.model.get("options2");t.comparator=function(e){return e.get("sort_order")},t.sort(),t.each(function(t){t._suggestion=e.findWhere({name:t.get("name")})})},addSupplementalValidators:function(){this.model.get("skus").each(function(e){e.validation.price.pattern="number",e.validation.sale_price.pattern="number",e.validation.weight.pattern="number",e.validation.inventory.pattern="number"})},removeSupplementalValidators:function(){this.model.get("skus").each(function(e){delete e.validation.price.pattern,delete e.validation.sale_price.pattern,delete e.validation.weight.pattern,delete e.validation.inventory.pattern})},onProductSkuRemove:function(e){var i,n,o,s=e.get("optionchoices"),r=this.model,a=r.get("options2"),l={};r.get("skus").each(function(e){e.get("optionchoices").each(function(e){i=e.get("name"),n=e.get("choice"),o=l[i+":"+n],l[i+":"+n]=o?o+1:1})});var c,u;s.each(function(e){i=e.get("name"),n=e.get("choice"),t.isUndefined(l[i+":"+n])&&(u=a.findWhere({name:i}),c=t.clone(u.get("choice_order")),c=t.without(c,n),u.set("choice_order",c))})},onTrackInventoryChange:function(){if("digital"!=this.model.get("skus").first().get("product_type")&&this.model.get("options2").length)this.showVariantsView();else{this.showMetaView();var e=this.meta.$el.find('input[name="track_inventory"]');e.data("wcheckbox")&&(e=e.data("wcheckbox").container),e.focus()}},onChange:function(t){var i=this,n=i.model,o=t.target.name,r=t.target.checked;if("hidden"===o&&n.set("published",!r),"featured"===o){var a=c.commerce.storefrontSettings.get("storefront_category_id"),l=s.findOrCreate({site_category_id:a});e.when(n.get("categories"),l.fetch()).done(function(e){var t=r?"add":"remove";e[t](l)})}},showSkusArea:function(){var e=this.model.get("skus").first().get("product_type");"digital"!==e&&this.showVariantsView(),(this.productIsNew&&!this.options.copy||"digital"===e)&&this.digitaldownload.show(new f({model:this.model,productIsNew:this.productIsNew}))},showMetaView:function(){this.meta.show(new d({model:this.model,productIsNew:this.productIsNew}))},showImagesView:function(){this.images.show(new h({model:this.model}))},showVariantsView:function(){this.variants.show(new p({model:this.model}))},toggleDownloadsArea:function(){"digital"==jQuery("#editor_commerce_product_type").val()?(e(this.variants.el).hide(),this.digitaldownload.$el.show()):(e(this.variants.el).show(),this.digitaldownload.$el.hide())},viewProduct:function(){c.vent.trigger("build:product:view",this.model)},copyProduct:function(){c.commerce.vent.trigger("store:product:copy",this.model)},deleteProduct:function(){var e=this,t=new v({message:_W.tl("Are you sure you want to delete this item?"),callback:function(t){t&&(e.ui.deleteButton.wLoadButton("startWait"),e.model.destroy().done(function(){e.ui.deleteButton.wLoadButton("endWait"),e.cancelEdit()}))}});e.dialogRegion.show(t)},saveProduct:function(){var t=this,i=t.model;t.validateProduct()&&(t.ui.saveButton.wLoadButton("startWait"),e.when(i.get("categories"),i.commit()).done(function(e){t.productIsNew=!1,t.options.setCategory&&t.options.setCategory.fetch(),t.optionSuggestions.commit(),e.each(function(e){e.fetch()}),t.ui.saveButton.wLoadButton("endWait"),t.options.onSave&&t.options.onSave(i),t.cancelEdit()}))},validateProduct:function(e){if("track_inventory"!=e){this.clearVariationErrors(),this.clearFormErrors();var i=this.model.validate(),n=this.validateSkus(e);return t.isUndefined(e)||t.isUndefined(i)||(i=t.pick(i,e)),this.displayError(i),this.model.isValid()&&n}},validateSkus:function(e){var n={};this.model.commonVariations().length&&(n.duplication="You must have unique option combinations",c.commerce.vent.trigger("store:product:variant:highlightErrors"));var o,s=this.model.get("options2").pluck("name");return validate=i.Validation.mixin.validate,this.model.get("skus").each(function(e){n=t.extend({},n,validate.apply(e)),e.get("optionchoices").each(function(e){o=validate.apply(e),-1===t.indexOf(s,e.get("name"))?e.collection.remove(e):(o&&o.choice&&(o.choice="The <b>{choice}</b> option requires a valid choice".replace("{choice}",e.get("name"))),n=t.extend({},n,o))})}),t.isEmpty(n)?!0:("undefined"!=typeof e&&(n=t.pick(n,e)),this.displayVariationError(n),!1)},clearVariationErrors:function(){t.isUndefined(this.variants.$el)||(this.variants.$el.find(".product-variants-error").addClass("no-errors").find("ul").empty(),this.variants.$el.find(".typeahead-cell-placeholder").filter(":visible").removeClass("validation-error"))},clearFormErrors:function(){this.$(".form-error.alert-error").remove(),this.$("input").removeClass("error")},displayError:function(i){t.each(i,function(t,i){var n=e('<div class="form-error alert alert-error" />');n.text(t),"price"===i||"sale_price"===i||"weight"===i?this.$('[name="'+i+'"]').addClass("error").parent().before(n):this.$('[name="'+i+'"]').addClass("error").before(n)},this)},displayVariationError:function(e){var i="";0===this.model.get("options2").length?this.displayError(e):(t.each(e,function(e){i+="<li>"+e+"</li>"}),this.variants.$el.find(".product-variants-error").removeClass("no-errors").find("ul").html(i),this.variants.$el.find(".cell-placeholder").filter(":visible").addClass("validation-error"))},preventClose:function(){return!this.productIsNew&&i.preventClose.ifModelChanged(this.model)},onClose:function(){this.options.closeStoreTab&&Weebly.SlidingPanel.hide("site-store-container"),this.productIsNew||this.model.rollback(),this.stopListening(this.model,"change:track_inventory"),this.options.onClose&&this.options.onClose(this.model)},cancelEdit:function(){this.productIsNew&&this.model.destroy().done(function(){updateList()}),c.commerce.vent.trigger("store:product:list")}});return w}),_wAMD.define("commerce/editor/store/product/ProductView",["editor/app","commerce/editor/collection/Product","components/views/ListDetailView","./list/ProductListView","./detail/ProductDetailView","commerce/editor/store/general/pagination/PaginationView","components/views/ConfirmView"],function(e,t,i,n,o,s,r){var a=i.prototype,l=i.extend({className:"store-product-layout",listDetailOptions:{ListView:n,DetailView:o,eventModelName:"product"},initialize:function(){var i=this;a.initialize.apply(i,arguments),s.resetState(t),i.listenTo(e.commerce.vent,{"store:product:list":i.list,"store:product:edit":i.edit,"store:product:add":i.add,"store:product:copy":i.copy,"store:product:delete":i.confirmDelete})},add:function(i){var n=this;t.count().done(function(t){var o=parseInt(Weebly.Restrictions.accessValue("com_product_limit"));o>t||Weebly.Restrictions.isUnlimited("com_product_limit")?a.add.call(n,i):e.vent.trigger("billing:upgrade:window",{restrictionID:"com_product_limit",restrictionType:"feature",refer:"commerce"})})},confirmDelete:function(e){var t=this,i=new r({message:_W.tl("Are you sure you want to delete that product?"),callback:function(t){t&&e.destroy()}});t.dialogRegion.show(i)}});return l}),_wAMD.define("tpl!commerce/editor/store/tutorial",[],function(){return'{{#video}}\n	<div class="video">\n	    <div class="wsite-video-wrapper wsite-video-height-auto wsite-video-align-left">\n	        <div class="wsite-video-container">\n	            <iframe \n	            	allowtransparency="true" \n	            	frameborder="0" \n	            	scrolling="no" \n	            	src="/weebly/apps/generateVideo.php?version=2&source=weebly&elementid=458026956733383357&ineditor=0&align=center&height=366&video={{video}}&image={{cover}}"\n	            	data-src="/weebly/apps/generateVideo.php?version=2&source=weebly&elementid=458026956733383357&ineditor=0&align=center&height=366&video={{video}}&image={{cover}}">\n	            </iframe>\n	        </div>\n	    </div>\n	</div>\n	{{#text}}\n		<div class="wsite-com-tutorial-text" style="margin-bottom: 40px;">\n			{{text}}\n		</div>\n	{{/text}}\n{{/video}}\n{{^video}}\n	<div class="wsite-com-tutorial-oops" style="text-align: center;">\n		{{#tl}}Oops.  We couldn\'t find your tutorial!{{/tl}}\n	</div>\n{{/video}}'}),_wAMD.define("commerce/editor/store/TutorialPopupView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/tutorial"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),initialize:function(e){this.model=new t.Model(s.library[e.key]||s.library["default"]),n.commerce.store.layout.tutorialRegion.show(this),this.trigger("dialog:update:title",this.model.get("title"))},dialog:{dialogClass:"wsite-tutorial-dialog",title:"Tutorial",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Done"),className:"btn-com close-tutorial"}]}]},events:{"click .close-tutorial":"closeDialog"},closeDialog:function(){this.trigger("dialog:close")}});return s.library={"default":{title:_W.tl("Oops")},"product:add":{title:_W.tl("Adding a Product"),video:"4/5/0/0/4500922/commerce.addproduct_115.mp4",cover:"4/5/0/0/4500922/commerce.addproduct_115.jpg"},"product:edit":{title:_W.tl("Editing a Product"),video:"4/5/0/0/4500922/commerce.addproduct_115.mp4",cover:"4/5/0/0/4500922/commerce.addproduct_115.jpg"},"product:options:add":{title:_W.tl("Product Variants"),video:"4/5/0/0/4500922/commerce.options.2014new_452.mp4",cover:"4/5/0/0/4500922/commerce.options.2014new_452.jpg"},"settings:shipping":{title:_W.tl("Shipping"),video:"4/5/0/0/4500922/commerce.shipping_691.mp4",cover:"4/5/0/0/4500922/commerce.shipping_691.jpg"}},s}),_wAMD.define("tpl!commerce/editor/store/store",[],function(){return'<div id="site-store-container" class="w-ui w-ui-light w-sliding-panel" style="display:none;">\n	<div class="sliding-panel-menu">\n		<div class="sliding-panel-menu-inner commerce-store-nav">{{! nav region }}</div>\n	</div>\n	<div id="commerce_editor" class="sliding-panel-body">\n		<div class="sliding-panel-body-inner">\n			<div class="commerce-store-main">{{! main region }}</div>\n		</div>\n	</div>\n\n	<div id="commerce_tutorial_region"></div>\n</div>'}),_wAMD.define("commerce/editor/store/StoreView",["jquery","backbone-all","editor/app","legacy/weebly_sliding_panel","./nav/NavRegion","./nav/ListView","./nav/SettingListView","./category/CategoryView","./product/ProductView","./TutorialPopupView","components/regions/Dialog","tpl!commerce/editor/store/store"],function(e,t,i,n,o,s,r,a,l,c,u,d){var h=!1,p=t.Marionette.Layout.extend({className:"store-view",template:Mustache.compile(d),el:"#commerce-store-tab-container",regions:{navRegion:{selector:".commerce-store-nav",regionType:o},mainRegion:".commerce-store-main",tutorialRegion:{selector:"#commerce_tutorial_region",regionType:u.extend({el:"#commerce_tutorial_region"})}},onRender:function(){this.navRegion.show(new s)},initialize:function(){if(!Weebly.Permissions.store_edit)return e("#weebly_tab_commerce_editor").hide(),void 0;var n=this;this.$el.on("click",".com-tutorial-badge",function(t){new c({key:e(t.target).data("key")})}),this.listenTo(i.vent,{"store:setting":function(e){t.preventClose(function(){n.navRegion.show(new r({backTrigger:e},"left")),n.refreshTooltips()})},"store:setting:list":function(){t.preventClose(function(){i.vent.trigger("store:setting"),i.vent.trigger("store:setting:general:list")})},"store:setting:close":function(){t.preventClose(function(){n.navRegion.show(new s,"right"),n.refreshTooltips(),i.vent.trigger("store:dashboard:list")})},"store:nav:reset":function(){t.preventClose(function(){n.refreshTooltips()})}});var o;Weebly.SlidingPanel.register("site-store-container",{tab_id:"weebly_tab_commerce_editor",onOpen:function(){h=!0,e("#w-editor-top .device-switcher").hide(),i.commerce.store.trigger("open")},afterSlideOut:function(){if(h){var t=e("#scroll_container");t.is(":visible")&&(t.hide(),o=!0),i.isStorePanelOpen=!0}var n=e(".store-category-detail .footer-bar").css("position","absolute");setTimeout(function(){n.css("position","")},0)},onClose:function(){h=!1,o&&(e("#scroll_container").show(),o=!1),i.isStorePanelOpen=!1,i.isPageDirty&&(i.isPageDirty=!1,updateList()),e("#w-editor-top .device-switcher").show(),i.commerce.store.trigger("close")},beforeClose:function(){i.vent.trigger("store:nav:beforeClose")},afterClose:function(){i.vent.trigger("store:nav:reset")}})},refreshTooltips:function(){n.destroyTooltips(),e("#site-store-container .tooltip").remove(),e("#site-store-container").hasClass("narrow")&&n.initTooltips()}});return p}),_wAMD.define("commerce/editor/store/category/module",["backbone-all","commerce/editor/model/Category","commerce/editor/model/CategoryHierarchy","commerce/editor/collection/Category","editor/app","./CategoryView"],function(e,t,i,n,o,s){o.module("commerce.store.category",function(i){var n={showCategoryArea:function(){o.commerce.store.layout.mainRegion.show(new s({app:o.commerce,namespace:"store",regionClass:"commerce-store-main-region"}))},showCategoryList:function(){e.preventClose(function(){r.navigate("store/category"),n.showCategoryArea(),o.commerce.vent.trigger("store:category:list")})},addCategory:function(t){e.preventClose(function(){r.navigate("store/category/new"),o.commerce.vent.trigger("store:category:add",t)})},editCategory:function(i){e.preventClose(function(){r.navigate("store/category/"+t.getID(i)),o.commerce.vent.trigger("store:category:edit",i)})},editStorefront:function(){e.preventClose(function(){o.vent.triggerCascade("store:category:edit",{site_category_id:o.commerce.storefrontSettings.get("storefront_category_id")})})}};i.on("start",function(){o.vent.on({"store:category":function(){n.showCategoryArea()},"store:category:list":function(){n.showCategoryList()},"store:category:add":function(e){n.addCategory(e)},"store:category:edit":function(e){n.editCategory(e)},"store:category:edit:storefront":function(){n.editStorefront()}})});var r=new e.Marionette.AppRouter({controller:n,appRoutes:{"store/category":"showCategoryList","store/category/new":"addCategory","store/category/:id":"editCategory"}})})}),_wAMD.define("components/regions/_slideRegion",["jquery","backbone-all"],function(e,t){var i={"-webkit-transform":"translateZ(0)","-moz-transform":"translateZ(0)","-ms-transform":"translateZ(0)",transform:"translateZ(0)"},n=t.Marionette.Region.extend({show:function(n,o){var s=this.currentView;if(s&&(t.Marionette.triggerMethod.call(s,"show:leaving"),s.slideRegionEvents.leave.resolve()),n.slideRegionEvents={enter:e.Deferred(),entered:e.Deferred(),leave:e.Deferred(),left:e.Deferred()},n.slideRegionEvents.enter.resolve(),!o||!s||n===s)return t.Marionette.Region.prototype.show.apply(this,arguments),t.Marionette.triggerMethod.call(n,"show:animated",!0),s&&s.slideRegionEvents.left.resolve(!0),n.slideRegionEvents.entered.resolve(!0),this;this.ensureEl();var r=this,a=e('<div class="slideWrapper" />'),l=e('<div class="wrapper" />'),c=e('<div class="slide" />'),u=e(this.el),d=u.width(),h={left:{dir:"before",animMargin:-1*d,margin:0},right:{dir:"after",animMargin:0,margin:-1*d}};a.css(i),a.css({overflow:"hidden",width:d}),l.css({overflow:"hidden",width:2*d}),u.css({width:d,overflow:"hidden","float":"left"}),u.wrap(a),u.wrap(l),c.html(u.html()).css({width:d,"float":"left"}),u[h[o].dir](c),u.parent(".wrapper").css({"margin-left":h[o].margin}),n.render(),u.html(n.el),u.parent(".wrapper").animate({marginLeft:h[o].animMargin},function(){r.close(),r.currentView=n,u.siblings(".slide").remove(),u.parent(".wrapper").unwrap(),u.unwrap(),u.attr("style",""),t.Marionette.triggerMethod.call(n,"show:animated"),s&&s.slideRegionEvents.left.resolve(),n.slideRegionEvents.entered.resolve()}),t.Marionette.triggerMethod.call(r,"show",n),t.Marionette.triggerMethod.call(n,"show")}});return n}),_wAMD.define("components/regions/ListDetail",["jquery","backbone-all","components/regions/_slideRegion"],function(e,t,i){var n=i.extend({onShow:function(){}});return n}),_wAMD.define("tpl!commerce/editor/store/dashboard/notifications-list",[],function(){return'<table class="dashboard-list notifications entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th colspan="3">{{#tl}}Notifications{{/tl}}</th>\n		</tr>\n	</thead>\n	<tbody>\n	</tbody>\n</table>'}),_wAMD.define("tpl!commerce/editor/store/dashboard/notifications-list-item",[],function(){return'<td class="description">\n	<div>\n		<h3 class="onboarding-title">{{step_title}}</h3>\n		<p class="onboarding-subtitle">{{step_description}}</p>\n	</div>\n</td>\n<td class="action">\n	<div>\n		<button class="btn-com">\n			{{action_text}}\n		</button>\n		<i class="w-icon-delete dismiss-notification"></i>\n	</div>\n</td>\n'}),_wAMD.define("commerce/editor/store/dashboard/NotificationsListView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!commerce/editor/store/dashboard/notifications-list","tpl!commerce/editor/store/dashboard/notifications-list-item"],function(e,t,i,n,o,s,r){var a=i.Marionette.ItemView.extend({template:n.compile(r),tagName:"tr",events:{"click .dismiss-notification":"hideNotification","click button":"notificationAction"},onRender:function(){var e=this;"Notification - Stripe Connect"===e.model.get("eventlogger_name")&&e.model.get("show_notification")&&o.commerce.RPC.StorefrontSettings.getStripeAccount().done(function(t){t&&t.id&&(e.stripeUpdateUrl="https://connect.stripe.com/account/activate?client_id="+t.client_id+"&user_id="+t.id+"&state="+t.state)})},hideNotification:function(){e(".notifications tr").length<=2?e("#notifications-region").slideUp():this.$el.hide().remove(),o.commerce.RPC.StoreNotifications.hideStoreNotification(window.com_currentSite,this.model.get("eventlogger_name"))},notificationAction:function(){var t=this,i=this.model.get("eventlogger_name");switch(i){case"Notification - SSL":o.vent.triggerCascade("settings:general"),setTimeout(function(){o.settings.ssl.enable().fail(function(e){alert(e)})},600);break;case"Notification - Stripe Connect":t.stripeUpdateUrl?window.open(t.stripeUpdateUrl,"_blank"):(o.vent.trigger("store:setting:list"),o.vent.trigger("store:setting:payment:list"));break;case"Notification - Storefront":Weebly.SlidingPanel.hide("site-store-container"),Pages.go("pagesMenu"),setTimeout(function(){e("#pageManagerAddPageMenuButton").click()},600)}}}),l=i.Marionette.CompositeView.extend({template:n.compile(s),itemView:a,itemViewContainer:"tbody",appendHtml:function(e,t){t.model.get("show_notification")&&e.$(this.itemViewContainer).append(t.el)},onRender:function(){1===this.$el.find("tr").length&&this.$el.hide()}});return l}),_wAMD.define("tpl!commerce/editor/store/dashboard/onboarding-list",[],function(){return'<table class="dashboard-list entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th colspan="3">{{#tl}}Getting Started{{/tl}}</th>\n		</tr>\n	</thead>\n	<tbody>\n	</tbody>\n</table>'}),_wAMD.define("tpl!commerce/editor/store/dashboard/onboarding-list-item",[],function(){return'<td class="step">\n	<div>\n		{{#isComplete}}\n			<span class="w-icon-check-mark"></span>\n		{{/isComplete}}\n		\n		{{^isComplete}}\n			{{step_number}}\n		{{/isComplete}}\n	</div>\n</td>\n<td class="description">\n	<div>\n		<h3 class="onboarding-title">{{step_title}}</h3>\n		<p class="onboarding-subtitle">{{step_description}}</p>\n	</div>\n</td>\n<td class="action">\n	<div>\n		<button class="btn-com">\n			{{#isComplete}}\n				{{completed_action_text}}\n			{{/isComplete}}\n\n			{{^isComplete}}\n				{{action_text}}\n			{{/isComplete}}\n		</button>\n	</div>\n</td>\n'}),_wAMD.define("commerce/editor/store/dashboard/StepsListView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!commerce/editor/store/dashboard/onboarding-list","tpl!commerce/editor/store/dashboard/onboarding-list-item"],function(e,t,i,n,o,s,r){var a=i.Marionette.ItemView.extend({template:n.compile(r),tagName:"tr",onRender:function(){this.model.get("is_complete")&&this.$el.addClass("completed")},events:{"click button":"completeStep"},completeStep:function(){var t=this.model.get("event_prefix"),i=this.model.get("custom_action");t?t.indexOf("setting")>0?(o.vent.trigger("store:setting:list"),o.vent.trigger(t+":list")):o.vent.triggerCascade(t+":add"):i&&(i="storePage")&&(Weebly.SlidingPanel.hide("site-store-container"),Pages.go("pagesMenu"),setTimeout(function(){e("#pageManagerAddPageMenuButton").click()},600))}}),l=i.Marionette.CompositeView.extend({template:n.compile(s),itemView:a,itemViewContainer:"tbody"});return l}),_wAMD.define("tpl!commerce/editor/store/dashboard/stats-list",[],function(){return'<table id="store-stats-list" class="dashboard-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th colspan="3">\n				{{#tl}}Stats{{/tl}}\n				<div class="filter-options">\n				</div>\n			</th>\n		</tr>\n	</thead>\n	<tbody class="stats">\n		<!-- placeholder until the stats load -->\n		<tr><td><div>\n			<h2 class="stat-title">_</h2>\n			<p class="stat-subtitle">{{#tl}}Sales{{/tl}}</p>\n		</div></td><td><div>\n			<h2 class="stat-title">_</h2>\n			<p class="stat-subtitle">{{#tl}}Visits{{/tl}}</p>\n		</div></td><td><div>\n			<h2 class="stat-title">_</h2>\n			<p class="stat-subtitle">{{#tl}}Orders{{/tl}}</p>\n		</div></td></tr>\n		<!-- end placeholder -->\n	</tbody>\n</table>'}),_wAMD.define("tpl!commerce/editor/store/dashboard/stats-list-item",[],function(){return'<div>\n	<h2 class="stat-title">{{{amount}}}</h2>\n	<p class="stat-subtitle">{{title}}</p>\n</div>'}),_wAMD.define("tpl!commerce/editor/store/dashboard/stats-error",[],function(){return'<td colspan="3">\n	<h2>There was an problem loading store statistics</h2>\n	<p>please try again in a few minutes.</p>\n</td>'}),_wAMD.define("tpl!commerce/editor/store/dashboard/options-list-item",[],function(){return'<a href="#" class="stats-time">{{title}}</a>'}),_wAMD.define("commerce/editor/store/dashboard/StatsListView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!commerce/editor/store/dashboard/stats-list","tpl!commerce/editor/store/dashboard/stats-list-item","tpl!commerce/editor/store/dashboard/stats-error","tpl!commerce/editor/store/dashboard/options-list-item"],function(e,t,i,n,o,s,r,a){var l=[{title:"Today",start:"today midnight",end:"tomorrow"},{title:"Yesterday",start:"-1 days midnight",end:"today midnight"},{title:"7 Days ",start:"-6 days midnight",end:"tomorrow"},{title:"30 Days",start:"-29 days midnight",end:"tomorrow"}],c=i.Marionette.ItemView.extend({template:n.compile("{{title}}"),tagName:"a",className:"stats-time",events:{click:"updateStats"},updateStats:function(t){var i=this.model.get("start"),n=this.model.get("end");e(".stats-time").removeClass("selected"),e(t.target).addClass("selected"),o.commerce.vent.trigger("store:dashboard:update:stats",i,n)}}),u=i.Marionette.CollectionView.extend({itemView:c,onRender:function(e){e.$el.find(".stats-time:first-child").addClass("selected")}}),d=i.Marionette.ItemView.extend({template:n.compile(r),tagName:"td"}),h=i.Marionette.CollectionView.extend({itemView:d,tagName:"tr"}),p=i.Marionette.ItemView.extend({template:n.compile(a),tagName:"tr"}),f=i.Marionette.Layout.extend({template:n.compile(s),regions:{statsOptionsRegion:".filter-options",statsListRegion:".stats"},onShow:function(){var e=this,t=new u({collection:new i.Collection(l)});e.statsOptionsRegion.show(t),e.updateStats(),this.listenTo(o.commerce.vent,{"store:dashboard:update:stats":function(t,i){e.updateStats(t,i)}})},updateStats:function(e,t){var n=this,e=e?e:"today midnight",t=t?t:"tomorrow";o.commerce.RPC.StoreStats.getStoreStats(window.com_currentSite,e,t).done(function(e){var t=n.statsListRegion;if("error"!==e){e[0].amount=o.request("commerce:settings:currency:format",e[0].amount/100);var s=new h({collection:new i.Collection(e)});t&&t.show(s)}else t&&t.show(new p)})}});return f}),_wAMD.define("tpl!commerce/editor/store/dashboard/faq-list",[],function(){return'<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}FAQ{{/tl}}</h2>\n	<h3>{{#tl}}Frequently asked questions and helpful articles.{{/tl}}</h3>\n</div>\n\n<ul class="questions">\n</ul>\n'}),_wAMD.define("tpl!commerce/editor/store/dashboard/faq-list-item",[],function(){return'<a href="{{ link }}" target="_blank">{{ question }}</a>\n'}),_wAMD.define("commerce/editor/store/dashboard/FaqListView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!commerce/editor/store/dashboard/faq-list","tpl!commerce/editor/store/dashboard/faq-list-item"],function(e,t,i,n,o,s,r){var a=i.Marionette.ItemView.extend({template:n.compile(r),tagName:"li"}),l=i.Marionette.CompositeView.extend({template:n.compile(s),itemView:a,itemViewContainer:".questions"});return l}),_wAMD.define("tpl!commerce/editor/store/dashboard/list-view",[],function(){return'<div class="dashboard-view-main-region">\n	<div class="title-bar">\n		<div class="buttons">\n			<button class="view-store btn-com btn-icon-left">\n				<span class="w-icon-external"></span>\n				{{#tl}}View Store{{/tl}}\n			</button>\n		</div>\n\n		<div class="state-toggle-box">\n			<span class="btn-caption">{{#tl}}Store Status:{{/tl}}</span>\n			<div class="btn-toggle">\n				<button class="btn selected" data-store-status="testing">{{#tl}}Testing{{/tl}}</button>\n				<button class="btn" data-store-status="live">{{#tl}}Live{{/tl}}</button>\n			</div>\n		</div>\n\n		<h1>{{#tl}}Store Dashboard{{/tl}}</h1>\n	</div>\n\n	{{#isLoading}}\n		<p><span class="text-loading-animation">{{#tl}}Loading dashboard{{/tl}}</span></p>\n	{{/isLoading}}\n\n	<div id="notifications-region"></div>\n\n	<div id="onboarding-region"></div>\n\n	<div id="stats-region"></div>\n\n	<div id="faq-region" class="dashboard-faq">\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/dashboard/DashboardView",["jquery","underscore","backbone-all","editor/app","commerce/editor/collection/Product","components/regions/ListDetail","commerce/editor/store/dashboard/NotificationsListView","commerce/editor/store/dashboard/StepsListView","commerce/editor/store/dashboard/StatsListView","commerce/editor/store/dashboard/FaqListView","tpl!commerce/editor/store/dashboard/list-view"],function(e,t,i,n,o,s,r,a,l,c,u){var d=[{question:_W.tl("Can my products include options like size and color?"),link:"http://kb.weebly.com/add-options"},{question:_W.tl("How do I preview my shopping cart?"),link:"http://kb.weebly.com/shopping-cart.html"},{question:_W.tl("Where do I set up shipping options?"),link:"http://kb.weebly.com/ship-products.html"},{question:_W.tl("How do I import a store from another provider?"),link:"http://kb.weebly.com/import-store.html"},{question:_W.tl("How do I add products to my store?"),link:"http://kb.weebly.com/add-products.html"},{question:_W.tl("What is a Storefront?"),link:"http://kb.weebly.com/storefront.html"},{question:_W.tl("How should I use Categories?"),link:"http://kb.weebly.com/product-categories.html"},{question:_W.tl("How can I change currencies?"),link:"http://kb.weebly.com/change-currency.html"}],h=i.Marionette.Layout.extend({className:"store-dashboard-layout sliding-panel-main-region",template:Mustache.compile(u),regions:{notificationsRegion:"#notifications-region",onboardingRegion:"#onboarding-region",statsRegion:"#stats-region",faqRegion:"#faq-region",headerRegion:".title-bar"},templateHelpers:function(){var e=this;return{isLoading:function(){return e.loading}}},initialize:function(){var e=this;this.loading=!0,o.count().done(function(t){e.productCount=t,e.loading=!1,e.render()})},onRender:function(){if(!this.loading){for(var o=this,s=!1,u=t.find(Weebly.PageManager.pages,function(e){return"store"===e.kind}),h=["company_name","store_address_street","store_address_city","store_address_postal_code","customer_support_email","phone_number"],p=0,f=h.length;f>p;p++)if(null!=n.commerce.storefrontSettings.get(h[p])){s=!0;break}var m=n.commerce.storefrontSettings.get("gateway"),g=[{is_complete:this.productCount>0,step_title:_W.tl("Add Products"),step_description:_W.tl("Add or import products to your store"),action_text:_W.tl("Add"),completed_action_text:_W.tl("Edit"),event_prefix:"store:product",completion_required:!0},{is_complete:s,step_title:_W.tl("Add Store Information"),step_description:_W.tl("This information will appear on invoices to customers"),action_text:_W.tl("Add"),completed_action_text:_W.tl("Edit"),event_prefix:"store:setting:general",completion_required:!0},{is_complete:!t.isNull(m)&&"none"!=m,step_title:_W.tl("Accept Payments"),step_description:_W.tl("Choose how to collect money from customers"),action_text:_W.tl("Edit"),completed_action_text:_W.tl("Edit"),event_prefix:"store:setting:payment",completion_required:!0}],v=[{name:_W.tl("ssl"),step_title:_W.tl("Setup SSL to enable checkout on your own domain"),step_description:_W.tl("As part of the Business Plan we've provided you a free SSL certificate"),action_text:_W.tl("Setup SSL"),event_prefix:"store:product",eventlogger_name:"Notification - SSL",show_notification:!0},{name:_W.tl("stripe"),step_title:_W.tl("Activate your Stripe account to collect money from your sales"),step_description:_W.tl("You'll automatically start receiving bank deposits for your daily sales"),action_text:_W.tl("Activate"),event_prefix:"store:setting:general",eventlogger_name:"Notification - Stripe Connect",show_notification:!0},{name:_W.tl("storefront"),step_title:_W.tl("Add a Store Page to Display Your Products"),step_description:_W.tl("A store page provides a structured way to organize products"),action_text:_W.tl("Add"),event_prefix:"store:setting:general",eventlogger_name:"Notification - Storefront",show_notification:!u&&this.isOnboardingComplete(g)}];"store"!==onboardingCategory&&g.splice(0,0,{is_complete:!!u,step_title:_W.tl("Add a Store Page"),step_description:_W.tl("A store page helps to organize all of your products"),action_text:_W.tl("Add"),completed_action_text:_W.tl("Edit"),event_prefix:"",custom_action:"storePage",completion_required:!1});var b=1;if(t.each(g,function(e){e.step_number=b++}),n.commerce.RPC.StoreNotifications.getStoreNotifications(window.com_currentSite).done(function(n){var s=o.notificationsRegion,a=e.parseJSON(n);t.each(a,function(e,t){for(var i=0;i<v.length;i++)v[i].eventlogger_name===t&&(v[i].show_notification=e&&v[i].show_notification)});var l=new r({collection:new i.Collection(v)});s&&s.show(l)}),!this.isOnboardingComplete(g)&&Weebly.Permissions.store_settings){var y=new a({collection:new i.Collection(g)});this.onboardingRegion.show(y)}else this.statsRegion.show(new l);var w=new c({collection:new i.Collection(d)});Weebly.Restrictions&&Weebly.Restrictions.isClientSite||this.faqRegion.show(w)}},events:{"click .btn-toggle":"toggleStoreStatus","click .view-store":"viewStore"},toggleStoreStatus:function(t){var i=e(t.target).data("storeStatus");"live"===i?console.log("make store live"):"testing"===i&&console.log("make store testing"),e(".btn-toggle button").removeClass("selected"),e(t.target).addClass("selected")},isOnboardingComplete:function(e){var i=!0;return t.each(e,function(e){!e.is_complete&&e.completion_required&&(i=!1)}),i},viewStore:function(){n.vent.trigger("build:store:view")}});return h}),_wAMD.define("commerce/editor/store/dashboard/module",["editor/app","commerce/editor/store/dashboard/DashboardView"],function(e,t){e.module("commerce.store.dashboard",function(e,i,n){var o={showDashboard:function(){n.preventClose(function(){i.commerce.store.layout.mainRegion.show(new t),i.commerce.vent.trigger("store:dashboard:list")})}};e.on("start",function(){i.vent.on({"store:dashboard:list":function(){n.preventClose(function(){e.router.navigate("store/dashboard"),o.showDashboard()})}})});var s=n.Marionette.AppRouter.extend({appRoutes:{"store/dashboard":"showDashboard"}});e.addInitializer(function(){e.router=new s({controller:o})})})}),_wAMD.define("commerce/editor/store/product/module",["jquery","backbone-all","editor/app","commerce/editor/model/Product","./ProductView"],function(e,t,i,n,o){i.module("commerce.store.product",function(e){var s={showProductArea:function(){i.commerce.store.layout.mainRegion.show(new o({app:i.commerce,namespace:"store",regionClass:"commerce-store-main-region"}))},showProductList:function(){t.preventClose(function(){r.navigate("store/product"),s.showProductArea(),i.commerce.vent.trigger("store:product:list")})},editProduct:function(e){t.preventClose(function(){r.navigate("store/product/"+n.getID(e)),i.commerce.vent.trigger("store:product:edit",e)
})},addProduct:function(e){t.preventClose(function(){r.navigate("store/product/new"),i.commerce.vent.trigger("store:product:add",e)})}};e.on("start",function(){i.vent.on({"store:product":function(){s.showProductArea()},"store:product:list":function(){s.showProductList()},"store:product:add":function(e){s.addProduct(e)},"store:product:edit":function(e){s.editProduct(e)}})});var r=new t.Marionette.AppRouter({controller:s,appRoutes:{"store/products":"showProductList","store/products/new":"addProduct","store/products/:id":"editProduct"}})})}),_wAMD.define("commerce/editor/model/OrderItemFile",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OrderItemFile"})}),_wAMD.define("commerce/editor/collection/OrderItemFile",["underscore","./_baseCommerceCollection","../model/OrderItemFile"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderItemFile"},{})}),_wAMD.define("commerce/editor/model/OrderItem",["backbone-all","./_baseCommerceModel","../collection/OrderItemFile"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OrderItem"})}),_wAMD.define("commerce/editor/collection/OrderItem",["underscore","./_baseCommerceCollection","../model/OrderItem"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderItem"},{})}),_wAMD.define("commerce/editor/model/OrderCoupon",["./_baseCommerceModel"],function(e){return e.extend({useServerGeneratedDefaultsFor:"OrderCoupon",get:function(t){return"categories"==t?this.getRelated("category_ids","site_category_id",require("commerce/editor/collection/Category")):"products"==t?this.getRelated("product_ids","site_product_id",require("commerce/editor/collection/Product")):e.prototype.get.apply(this,arguments)}})}),_wAMD.define("commerce/editor/collection/OrderCoupon",["underscore","./_baseCommerceCollection","../model/OrderCoupon"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderCoupon"},{})}),_wAMD.define("commerce/editor/model/OrderShipmentTransaction",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OrderShipmentTransaction"})}),_wAMD.define("commerce/editor/collection/OrderShipmentTransaction",["underscore","./_baseCommerceCollection","../model/OrderShipmentTransaction"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderShipmentTransaction"},{})}),_wAMD.define("commerce/editor/model/OrderShipment",["backbone-all","./_baseCommerceModel","../collection/OrderShipmentTransaction"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OrderShipment"})}),_wAMD.define("commerce/editor/collection/OrderShipment",["underscore","./_baseCommerceCollection","../model/OrderShipment"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderShipment"},{})}),_wAMD.define("commerce/editor/model/OrderBillingTransaction",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OrderBillingTransaction"})}),_wAMD.define("commerce/editor/collection/OrderBillingTransaction",["underscore","./_baseCommerceCollection","../model/OrderBillingTransaction"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderBillingTransaction"},{})}),_wAMD.define("commerce/editor/model/OrderBilling",["backbone-all","./_baseCommerceModel","../collection/OrderBillingTransaction"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"OrderBilling",successfulTransaction:function(){return this.get("transactions").find(function(e){return"success"==e.get("status")})}})}),_wAMD.define("commerce/editor/collection/OrderBilling",["underscore","./_baseCommerceCollection","../model/OrderBilling"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"OrderBilling"},{})}),_wAMD.define("commerce/editor/model/Order",["underscore","backbone-all","./_baseCommerceModel","../collection/OrderItem","../collection/OrderCoupon","../collection/OrderShipment","../collection/OrderBilling"],function(e,t,i){return i.extend({useServerGeneratedDefaultsFor:"Order",successfulBilling:function(){return this.get("billings").find(function(e){return e.successfulTransaction()})}})}),_wAMD.define("commerce/editor/collection/Order",["underscore","./_baseCommerceCollection","../model/Order"],function(e,t,i){var n=t,o=n.prototype;return n.extend({model:i,useServerGeneratedDefaultsFor:"Order",initialize:function(t,i){return i=e.defaults(i||{},{filter:[],sort:[{property:"order_paid_date",direction:"DESC"}]}),i.filter.push({property:"order_type",value:"order"}),o.initialize.call(this,t,i)}},{count:function(t){return t=e.defaults(t||{},{filter:[]}),t.filter.push({property:"order_type",value:"order"}),this.__super__.constructor.count.call(this,t)}})}),_wAMD.define("tpl!commerce/editor/store/order/list/item",[],function(){return'<td class="order"><span>{{site_order_id}}</span></td>\n<td class="date">{{order_date}}</td>\n<td class="name" title="{{customer_name}}">{{customer_name}}</td>\n<td class="status {{order_status}}"><i class="icon-circle"></i> {{order_status}}</td>\n<td class="total">{{#currency}}{{order_total}}{{/currency}}</td>\n'}),_wAMD.define("commerce/editor/store/order/list/OrderListItemView",["backbone-all","mustache","moment","editor/app","tpl!commerce/editor/store/order/list/item"],function(e,t,i,n,o){var s=e.Marionette.ItemView.extend({template:t.compile(o),tagName:"tr",className:"selectable",templateHelpers:function(){var e=this.model;return{order_date:function(){return i.unix(this.order_paid_date||this.created_date).format(_W.siteContext.mdateFormat)},customer_name:function(){var t=e.get("full_name");return t||"--"},currency:function(){return function(e,t){return n.request("commerce:settings:currency:format",t(e),this.order_currency.toUpperCase())}}}},modelEvents:{change:"render"},events:{"click td":"edit"},edit:function(){n.commerce.vent.trigger("store:order:edit",this.model)}});return s}),_wAMD.define("tpl!commerce/editor/store/order/list/empty",[],function(){return'<td colspan="5">\n	{{#searchText}}\n		{{#tl}}No orders found.{{/tl}}\n	{{/searchText}}\n	{{^searchText}}\n		{{#tl}}Once your store receives an order, it will display here.{{/tl}}\n	{{/searchText}}\n</td>\n'}),_wAMD.define("commerce/editor/store/order/list/OrderListEmptyView",["backbone-all","mustache","tpl!commerce/editor/store/order/list/empty"],function(e,t,i){var n=e.Marionette.CompositeView.extend({tagName:"tr",className:"order-list-empty",template:t.compile(i),templateHelpers:function(){var e=this;return{searchText:function(){return e.options.searchText}}},initialize:function(e){this.options=e}});return n}),_wAMD.define("tpl!commerce/editor/store/order/list/list",[],function(){return'<table class="order-list entity-list">\n	<thead>\n		<tr>\n			<th class="order">{{#tl}}Order #{{/tl}}</th>\n			<th class="date">{{#tl}}Order Date{{/tl}}</th>\n			<th class="name">{{#tl}}Customer{{/tl}}</th>\n			<th class="status">{{#tl}}Status{{/tl}}</th>\n			<th class="total">{{#tl}}Total{{/tl}}</th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>\n'}),_wAMD.define("commerce/editor/store/order/list/OrderListTableView",["backbone-all","mustache","editor/app","./OrderListItemView","commerce/editor/store/general/list/ListLoadingView","./OrderListEmptyView","tpl!commerce/editor/store/order/list/list"],function(e,t,i,n,o,s,r){var a=e.Marionette.CompositeView.extend({template:t.compile(r),itemView:n,itemViewContainer:"tbody",itemViewOptions:function(){return{searchText:this.searchText}},emptyView:o.extend({colspan:5,loadingState:_W.tl("Loading orders")}),initialize:function(e){var t=this;t.searchText=e.searchText;var i=t.collection.getFirstPage();i.done(function(e){t.emptyView=s,e.total||t.render()}),i.fail(function(e){console.log(e)})},onBeforeItemAdded:function(e){var t=i.commerce.storefrontSettings.get("currency_prefix"),n=i.commerce.storefrontSettings.get("currency_suffix");e.model.set({currency_prefix:t,currency_suffix:n})}});return a}),_wAMD.define("tpl!commerce/editor/store/order/export/export-orders",[],function(){return'<div class="meta">\n	<div class="scaffold-com">\n		<div class="datepicker-parent"></div>\n		<table class="timeframe-options">\n			<tr>\n				<td class="timeframe-radio">\n					<input type="radio" name="timeframe" value="all" checked="checked" id="all-input" />\n				</td>\n				<td class="timeframe-label" colspan="2">\n					<label for="all-input">{{#tl}}All orders{{/tl}}</label>\n				</td>\n			</tr>\n			<tr>\n				<td class="timeframe-radio">\n					<input type="radio" name="timeframe" value="latest" id="latest-input" />\n				</td>\n				<td class="timeframe-label" colspan="2">\n					<label for="latest-input">\n						{{#tl}}Orders since last export{{/tl}}\n						<span class="last-export-date"></span>\n					</label>\n				</td>\n			</tr>\n			<tr class="timeframe-dateselection">\n				<td class="timeframe-radio">\n					<input type="radio" name="timeframe" value="range" id="range-input" />\n				</td>\n				<td class="timeframe-label">\n					<label for="range-input">{{#tl}}Orders in a date range{{/tl}}</label>\n				</td>\n				<td>\n					<div class="daterange-selectrange">\n						<input type="text" class="date-start">\n						<span class="to-separator">{{#tl}}to{{/tl}}</span>\n						<input type="text" class="date-end">\n					</div>\n				</td>\n			</tr>\n		</table>\n	</div>\n</div>\n\n<div class="format-chooser">\n	<ul>\n	{{#items}}\n		<li data-format="{{format}}">\n			<div class="checkmark">\n			</div>\n			{{#text}}\n				<span>{{text}}</span>\n			{{/text}}\n			{{#image}}\n				<img src="{{image}}" />\n			{{/image}}\n		</li>\n	{{/items}}\n	</ul>\n</div>\n\n<div class="after-ul"></div>\n'}),_wAMD.define("commerce/editor/store/order/list/OrderExportView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/order/export/export-orders","util/ui/wDatepicker","util/ui/wInput","util/ui/wLoadButton"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({currentFormat:null,className:"order-export-view",template:i.compile(o),templateHelpers:{items:[{format:"csv",text:_W.tl("Export CSV File")},{format:"iif",image:"//"+ASSETS_BASE+"/images/logos/quickbooks.png"}]},dialog:{dialogClass:"export-order-dialog",title:_W.tl("Export Orders"),size:"606x440",cancelX:!0,buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Export"),className:"btn-com btn-export btn-info"}]}]},ui:{dateStart:".date-start",dateEnd:".date-end",exportBtn:".btn-export",datepickerParent:".datepicker-parent",dateRangeChooser:".daterange-selectrange",radioInputs:".timeframe-options input[type=radio]",timeframeOptions:".timeframe-options",lastExportDate:".last-export-date"},events:{"click .btn-cancel":"cancel","click .btn-export":"export","click li[data-format]":"setFormat","changeDate .date-start":"startDateChanged","changeDate .date-end":"endDateChanged"},onShow:function(){var t,i=this;this.ui.radioInputs.wRadio().on("change",function(){setTimeout(function(){"range"==i.ui.timeframeOptions.find("input:checked").val()?i.ui.dateRangeChooser.show():i.ui.dateRangeChooser.hide()},0)});var n=new Date,i=this;this.ui.datepickerParent.css({position:"absolute",top:-1*e(".ui-dialog").offset().top}),this.ui.dateStart.datepicker({format:"yyyy-mm-dd",parentElement:".datepicker-parent",autoclose:!0,endDate:n}).on("show",function(){i.ui.datepickerParent.find(".datepicker").css("left",125)});var o=this.getLatestDate();this.ui.dateEnd.datepicker({format:"yyyy-mm-dd",parentElement:".datepicker-parent",autoclose:!0,startDate:o,endDate:n,todayBtn:!0}).on("show",function(){i.ui.datepickerParent.find(".datepicker").css("left",275)});var s=o.getFullYear(),r=o.getMonth()+1;10>r&&(r="0"+r);var a=o.getDate();10>a&&(a="0"+a),this.ui.lastExportDate.text("("+s+"-"+r+"-"+a+")"),this.ui.dateStart.datepicker("update",o),this.ui.dateEnd.datepicker("update",n),t=this.ui.radioInputs.eq(0).data("wradio"),t=t?t.container:this.ui.radioInputs.eq(0),t.focus()},setFormat:function(t){this.select(e(t.currentTarget).data("format"))},startDateChanged:function(e){var t=Date.parse(this.ui.dateStart.datepicker("getUTCDate")),i=Date.parse(this.ui.dateEnd.datepicker("getUTCDate"));t>i&&this.ui.dateEnd.datepicker("update",e.date),this.ui.dateEnd.datepicker("setStartDate",e.date)},endDateChanged:function(e){var t=Date.parse(this.ui.dateStart.datepicker("getUTCDate")),i=Date.parse(this.ui.dateEnd.datepicker("getUTCDate"));t>i&&this.ui.dateStart.datepicker("update",e.date),this.ui.dateStart.datepicker("setEndDate",e.date)},onRender:function(){this.select("csv")},select:function(e){this.$el.find("li").removeClass("selected").filter('[data-format="'+e+'"]').addClass("selected"),this.currentFormat=e},getLatestDate:function(){var e=n.commerce.storefrontSettings.get("latest_orders_export_date");if(null!==e)return new Date(1e3*e);var t=new Date;return t.setDate(t.getDate()-30),t},cancel:function(){this.trigger("cancel")},"export":function(){var e=this;if("iif"==e.currentFormat&&!Weebly.Restrictions.hasAccess("com_export_orders_iif"))return n.vent.trigger("billing:upgrade:window",{restrictionID:"com_export_orders_iif",restrictionType:"feature",refer:"export_orders"}),void 0;var t=this.$el.find(".btn-export");t.wLoadButton(),t.wLoadButton("startWait");var i=Math.round((new Date).getTime()/1e3),o=i,s=null,r=null,a=e.ui.timeframeOptions.find("input:checked").val();"range"==a?(s=Math.round(Date.parse(this.ui.dateStart.datepicker("getDate"))/1e3),r=Math.round(Date.parse(this.ui.dateEnd.datepicker("getDate"))/1e3),86400>i-r?r=i:r+=86399,o=r):"latest"==a&&(s=this.getLatestDate().getTime()/1e3),Weebly.Commerce.RPC.ExportOrders.startExportOrder(e.currentFormat,s,r).done(function(i){t.wLoadButton("endWait"),i.error||e.trigger("export",i.message,i.success,o)})}});return s}),_wAMD.define("tpl!commerce/editor/store/order/list/layout",[],function(){return'<div class="title-bar">\n	<div class="buttons">\n		<button class="btn-com btn-large btn-icon-left export-orders-button">\n			<span class="w-icon-share-link"></span>\n			{{#tl}}Export Orders{{/tl}}\n		</button>\n	</div>\n	<h1>{{#tl}}Orders{{/tl}}</h1>\n</div>\n\n<div class="alert">\n	<button type="button" class="close" data-dismiss="alert">&times;</button>\n	<span class="alert-msg"></span>\n</div>\n\n<div class="list-detail-search-box">\n	<span class="input-labeled input-search">\n		<input type="text" name="searchText" class="search large" placeholder="{{#esc_attr}}{{#tl}}Search orders{{/tl}}{{/esc_attr}}">\n	</span>\n</div>\n\n<div class="list"></div>\n<div class="pagination"></div>'}),_wAMD.define("commerce/editor/store/order/list/OrderListView",["backbone-all","mustache","commerce/editor/collection/Order","./OrderListTableView","./OrderExportView","commerce/editor/store/general/pagination/PaginationView","tpl!commerce/editor/store/order/list/layout"],function(e,t,i,n,o,s,r){var a=e.Marionette.Layout.extend({template:t.compile(r),regions:{listRegion:".list",paginationRegion:".pagination"},ui:{alert:".alert",alertMsg:".alert-msg",search:"input[name=searchText]"},events:{"click .export-orders-button":"showExportOrders","close .alert":"fadeOutAlert","keyup @ui.search":"search"},onRender:function(){var e=new i([],{searchText:this.searchText});this.paginationRegion.show(new s({collection:e})),this.listRegion.show(new n({collection:e,searchText:this.searchText}))},showExportOrders:function(){var e=this,t=(new o).on("cancel",function(){t.trigger("dialog:close")}).on("export",function(i,n,o){t.trigger("dialog:close"),e.ui.alert.hide(),n?e.ui.alert.removeClass("alert-error").addClass("alert-success"):e.ui.alert.removeClass("alert-success").addClass("alert-error"),e.ui.alertMsg.text(i),e.ui.alert.slideDown();var s=editorApp.commerce.storefrontSettings.get("latest_orders_export_date");o>s&&(editorApp.commerce.storefrontSettings.set("latest_orders_export_date",o),editorApp.commerce.storefrontSettings.save())});editorApp.showDialog(t)},fadeOutAlert:function(e){e.preventDefault(),this.ui.alert.fadeOut("medium")},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.searchText=t.ui.search.val()||null,t.onRender()},n)}});return a}),_wAMD.define("tpl!commerce/editor/store/order/detail/items/order-detail-items-item-view",[],function(){return'<tr class="product-row">\n	<td class="thumbnail">\n		<div class="thumbnail-sizer">\n			{{{ thumbnail }}}\n		</div>\n	</td>\n	<td class="product">\n		<div class="order-item-info">\n			<div class="info">\n				<div class="item-name">{{name}}</div>\n				<ul class="variant-info">\n					{{#variations}}\n						<li><b>{{key}}</b>: {{value}}</li>\n					{{/variations}}\n				</ul>\n				<ul class="download-info">\n					{{#downloads}}\n						<li class="download-info-item">\n							<div class="download-info-item-name">\n								{{file_name}} <a class="download-info-item-toggle">{{#tl}}(Show download link){{/tl}}</a>\n								<input class="download-info-item-url-input" value="http://{{domain}}/ajax/apps/download.php?t={{token}}" readonly />\n							</div>\n						</li>\n					{{/downloads}}\n				</ul>\n			</div>\n		</div>\n	</td>\n	<td class="price">\n		<span class="item-price">{{#currency}}{{current_price}}{{/currency}}</span>\n	</td>\n	<td class="quantity">\n		<span class="item-quantity">{{quantity}}</span>\n	</td>\n	<td class="total">\n		<span class="item-total">{{#currency}}{{pre_discount_total}}{{/currency}}</span>\n	</td>\n</tr>\n\n{{! Product specific coupoon }}\n\n{{#discounts}}\n	{{#isCoupon}}\n		<tr class="coupon-row">\n			<td class="thumbnail"></td>\n			<td class="order-item-info" colspan="3">\n				<div class="info">\n					{{#tl}}Coupon code: <span class="coupon-code">{{code}}</span>{{/tl}}\n				</div>\n			</td>\n			<td class="total">\n				<span class="coupon-discount">\n					-{{#currency}}{{total_discount}}{{/currency}}\n				</span>\n			</td>\n		</tr>\n	{{/isCoupon}}\n{{/discounts}}\n'}),_wAMD.define("commerce/editor/store/order/detail/items/OrderDetailItemsItemView",["jquery","underscore","backbone-all","editor/app","util/ui/ImageAspectRatio","tpl!commerce/editor/store/order/detail/items/order-detail-items-item-view"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({tagName:"tbody",template:Mustache.compile(s),templateHelpers:function(){var e=this,i=this.order;return{currency:function(){return function(e,t){return n.request("commerce:settings:currency:format",t(e),i.get("order_currency").toUpperCase())}},pre_discount_total:function(){return this.current_price*this.quantity},discounts:function(){var i=e.model;return t.map(i.get("discounts"),function(e){return t.extend(e,{isCoupon:"coupon"==e.discount_type,isMarkdown:"markdown"==e.discount_type,total_discount:i.get("quantity")*e.discount})})},variations:function(){return t.map(this.options,function(e,t){return{key:t,value:Weebly.Commerce.Site.Product.filterOptionText(e)}})},thumbnail:function(){var e=n.commerce.storefrontSettings.getRatioAsNumber("product_image_ratio"),t=this.image_info||"//"+ASSETS_BASE+"/images/util/blank-product-w{size}.png";return o("entity-list",t,320,e)},downloads:function(){var e,i=Weebly.Location;return t.map(this.order_item_file,function(t){return e=i.custom_domain||i.weebly_subdomain+".weebly.com",{file_name:t.name,domain:e,token:t.token}})}}},events:{"click .download-info-item-name":"onDownloadInfoClick","click .download-info-item-url-input":"selectDownloadLink"},initialize:function(e){this.order=e.order},onShow:function(){this.$el.hide().fadeIn()},onDownloadInfoClick:function(t){if(/download-info-item-toggle/.test(t.target.className)){var i=e(t.currentTarget),n=i.find(".download-info-item-url-input");n.toggle(),i.find(".download-info-item-toggle").text(function(){return n.is(":visible")?_W.tl("(Hide download link)"):_W.tl("(Show download link)")}),n.is(":visible")&&n.select()}},selectDownloadLink:function(e){e.currentTarget.select()}});return r}),_wAMD.define("tpl!commerce/editor/store/order/detail/items/order-detail-items-composite-view",[],function(){return'<div class="detail-header">\n	{{#tl}}Order Details{{/tl}}\n</div>\n\n<div class="order-product-list">\n	<table class="order-list-table" cellspacing="0">\n		<thead>\n			<tr>\n				<th class="product" colspan="2">{{#tl}}Item{{/tl}}</th>\n				<th class="price">{{#tl}}Price{{/tl}}</th>\n				<th class="quantity">{{#tl}}Qty{{/tl}}</th>\n				<th class="total">{{#tl}}Total{{/tl}}</th>\n			</tr>\n		</thead>\n		<tfoot>\n\n			{{#coupons}}\n			<tr class="coupons">\n				<td colspan="5">\n					<strong>{{code}}:</strong> {{summary}}\n				</td>\n			</tr>\n			{{/coupons}}\n\n			{{#discounts}}\n				{{#isCoupon}}\n					{{^isFreeShipping}}\n						<tr class="discounts totals-row">\n							<td colspan="4">{{#tl}}Coupon code: <strong>{{code}}</strong>{{/tl}}</td>\n							<td>\n								<span class="coupon-discount">\n									-{{#currency}}{{discount}}{{/currency}}\n								</span>\n							</td>\n						</tr>\n					{{/isFreeShipping}}\n					{{/isCoupon}}\n			{{/discounts}}\n\n			<tr class="subtotal totals-row">\n				<td colspan="4">{{#tl}}Subtotal{{/tl}}</td>\n				<td>{{#currency}}{{discounted_subtotal}}{{/currency}}</td>\n			</tr>\n\n			<tr class="tax totals-row">\n				<td colspan="4">{{#tl}}Tax{{/tl}}</td>\n				<td>{{#currency}}{{order_tax_total}}{{/currency}}</td>\n			</tr>\n\n			{{^isDigitalDownload}}\n			<tr class="shipping totals-row">\n				<td colspan="4">\n					{{#tl}}Shipping{{/tl}}\n					{{#shippingMethod}}({{shippingMethod}}){{/shippingMethod}}\n				</td>\n				<td>{{#currency}}{{order_shipping_total}}{{/currency}}</td>\n			</tr>\n			{{/isDigitalDownload}}\n\n			{{#formatted_order_notes}}\n			<tr class="order-notes">\n				<td colspan="5">\n					<span class="info">{{#tl}}Order Notes: {{/tl}}</span>\n					<pre class="formatted-notes">{{formatted_order_notes}}</pre>\n				</td>\n			</tr>\n			{{/formatted_order_notes}}\n\n			<tr class="grandtotal totals-row">\n				<td class="order-placed" colspan="2">{{! Populated after Billing data fetched }}</td>\n				<td colspan="2">{{#tl}}TOTAL{{/tl}}</td>\n				<td>{{#currency}}{{order_total}}{{/currency}}</td>\n			</tr>\n\n		</tfoot>\n\n		{{! tbody populated by OrderDetailItemCompositeView }}\n\n	</table>\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/items/OrderDetailItemsCompositeView",["jquery","underscore","backbone-all","moment","commerce/editor/store/general/list/ListLoadingView","./OrderDetailItemsItemView","tpl!commerce/editor/store/order/detail/items/order-detail-items-composite-view"],function(e,t,i,n,o,s,r){var a=i.Marionette.CompositeView.extend({itemView:s,itemViewContainer:".order-list-table",itemViewOptions:function(){return{order:this.model}},emptyView:o.extend({colspan:5,loadingState:_W.tl("Loading Order Information")}),ui:{orderPlaced:".order-placed"},template:Mustache.compile(r),templateHelpers:function(){var e=this.model;return{currency:function(){return function(t,i){return editorApp.request("commerce:settings:currency:format",i(t),e.get("order_currency").toUpperCase())}},discounts:function(){return t.map(e.get("discounts"),function(e){return t.extend(e,{isFreeShipping:"shipping"==e.type,isCoupon:"coupon"==e.discount_type})})},discounted_subtotal:function(){var i=this.order_subtotal;return t.each(e.get("discounts"),function(e){i-=e.discount}),i},isDigitalDownload:"digital"===e.get("order_contents_type"),formatted_order_notes:function(){var e=this.order_notes;return t.isString(e)?(e=e.replace(/<br\s*[\/]?>/gi,"\n"),e=e.replace(/(?:\n){2}/gi,"\n"),t.unescape(e)):void 0}}},initialize:function(){var e=this,t=e.model;e.collection=t.get("items"),e.loading=!0,e.listenTo(t,"sync",function(t,i){i&&i.success?(e.loading=!1,e.render()):e.children.first().showFailure()})},onRender:function(){if(!this.loading){var e,t,i,o=this.model;i=o.get("billings").max(function(e){return t=e.get("transactions").max(function(e){return e.get("created_date")}),t.get("created_date")}),i&&(i=n.unix(i.get("created_date")).calendar(),e=_W.tl("Order placed: {{order_placed}}").replace("{{order_placed}}",i),this.ui.orderPlaced.hide().text(e).fadeIn())}}});return a}),_wAMD.define("tpl!commerce/editor/store/order/detail/history/order-detail-history-item-view",[],function(){return'	<td>{{#fmt.date}}{{updated_date}}{{/fmt.date}}</td>\n	<td>{{#fmt.time}}{{updated_date}}{{/fmt.time}}</td>\n\n{{#eventIs.return}}\n	<td class="event-detail">\n		{{#tl}}Order returned{{/tl}}\n	</td>\n{{/eventIs.return}}\n\n{{#eventIs.cancel}}\n	<td class="event-detail">\n		{{#tl}}Order cancelled{{/tl}}\n	</td>\n{{/eventIs.cancel}}\n\n{{#eventIs.purchase}}\n	<td class="event-detail">\n		{{#eventIs.succesful}}\n			{{#tl}}Customer charged{{/tl}}\n		{{/eventIs.succesful}}\n\n		{{#eventIs.pending}}\n			{{#tl}}Charge pending{{/tl}}\n		{{/eventIs.pending}}\n\n		{{#eventIs.failed}}\n			{{#tl}}Failed charge{{/tl}}\n		{{/eventIs.failed}}\n\n		{{#currency}}{{convertedAmount}}{{/currency}}\n	</td>\n{{/eventIs.purchase}}\n\n{{#eventIs.refund}}\n	<td class="event-detail">\n		{{#eventIs.succesful}}\n			{{#tl}}Issued refund to customer{{/tl}}\n		{{/eventIs.succesful}}\n\n		{{#eventIs.pending}}\n			{{#tl}}Refund in progress{{/tl}}\n			{{tx_message}}\n		{{/eventIs.pending}}\n\n		{{#eventIs.failed}}\n			{{#tl}}Failed refund{{/tl}}\n		{{/eventIs.failed}}\n\n		{{#currency}}{{convertedAmount}}{{/currency}}\n	</td>\n{{/eventIs.refund}}\n\n{{#eventIs.download}}\n	<td class="event-detail">\n		{{#tl}}Customer download from IP: {{ip}}{{/tl}}\n	</td>\n{{/eventIs.download}}\n\n{{#eventIs.shipment}}\n	<td class="event-detail">\n		{{#tl}}Order shipped {{#shipping_provider}}via {{shipping_provider}}{{/shipping_provider}} {{#tracking_number}}#{{tracking_number}}{{/tracking_number}}{{/tl}}\n	</td>\n{{/eventIs.shipment}}\n'}),_wAMD.define("commerce/editor/store/order/detail/history/OrderDetailHistoryItemView",["backbone-all","tpl!commerce/editor/store/order/detail/history/order-detail-history-item-view"],function(e,t){var i=e.Marionette.ItemView.extend({tagName:"tr",template:Mustache.compile(t),templateHelpers:function(){var e=this.order;return{convertedAmount:function(){return this.amount/100},currency:function(){return function(t,i){return editorApp.request("commerce:settings:currency:format",i(t),e.get("order_currency").toUpperCase())}},eventIs:{order:function(){return!!this.order_status},"return":function(){return"returned"==this.order_status},cancel:function(){return"cancelled"==this.order_status},refund:function(){return this.site_order_billing_transaction_id&&"refund"==this.method},purchase:function(){return this.site_order_billing_transaction_id&&"purchase"==this.method},download:function(){return this.site_order_shipment_transaction_id&&"digital"==this.tx_type},shipment:function(){return this.site_order_shipment_id&&!this.site_order_shipment_transaction_id},failed:function(){return"failure"==this.status},pending:function(){return"prepare"==this.status},succesful:function(){return"success"==this.status}}}},initialize:function(e){this.order=e.order},onShow:function(){this.$el.hide().fadeIn()}});return i}),_wAMD.define("tpl!commerce/editor/store/order/detail/history/order-detail-history-composite-view",[],function(){return'<div class="detail-header">\n	{{#tl}}Order Transactions{{/tl}}\n</div>\n\n<div class="detail-content">\n	<table class="history-list-table detail-list" cellspacing="0">\n		{{! Populated by OrderDetailHistoryItemView }}\n	</table>\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/history/OrderDetailHistoryCompositeView",["jquery","underscore","backbone-all","commerce/editor/store/general/list/ListLoadingView","./OrderDetailHistoryItemView","tpl!commerce/editor/store/order/detail/history/order-detail-history-composite-view"],function(e,t,i,n,o,s){var r=i.Marionette.CompositeView.extend({itemView:o,itemViewContainer:".history-list-table",itemViewOptions:function(){return{order:this.model}},emptyView:n.extend({colspan:3,loadingState:_W.tl("Loading Order Transactions")}),template:Mustache.compile(s),initialize:function(){var e=this,t=e.model;e.collection=new i.Collection([]),e.listenTo(t,"sync",function(t,i){i&&i.success?e.buildHistoryEvents():e.children.first().showFailure()})},buildHistoryEvents:function(){var e=this,i=e.model,n=["cancelled","returned"],o=[];t.contains(n,i.get("order_status"))&&o.push(i.toJSON()),i.get("billings").each(function(e){e.get("transactions").each(function(e){o.push(e.toJSON())})}),i.get("shipments").each(function(e){e.get("shipment_date")&&o.push(e.toJSON()),e.get("transactions").each(function(e){o.push(e.toJSON())})}),o=t.sortBy(o,function(e){return e.updated_date}),e.collection.reset(o)}});return r}),_wAMD.define("tpl!commerce/editor/store/order/detail/shipping/order-detail-shipping-item-view",[],function(){return'<div class="details-info details-address">\n	<div class="label">{{#tl}}Shipping Address{{/tl}}</div>\n	<div class="info">\n		{{! TODO: I18N }}\n		<ul class="info-list">\n			<li>{{address_name}}</li>\n			<li>{{street}}</li>\n			{{#street2}}<li>{{.}}</li>{{/street2}}\n			<li>{{city}}, {{region}} {{postal_code}}</li>\n			<li>{{country}}</li>\n		</ul>\n	</div>\n</div>\n\n{{#hasContactInfo}}\n	<div class="details-info details-contact">\n		<div class="label">{{#tl}}Contact Information{{/tl}}</div>\n		<div class="info">\n			<ul class="info-list">\n				{{#phone}}<li>{{#tl}}Phone{{/tl}}: <a href="tel:{{phone}}">{{phone}}</a></li>{{/phone}}\n				{{#email}}<li>{{#tl}}Email{{/tl}}: <a href="mailto:{{email}}">{{email}}</a></li>{{/email}}\n			</ul>\n		</div>\n	</div>\n{{/hasContactInfo}}\n\n{{#shipping_provider}}\n	<div class="details-info details-shipping">\n		<div class="label">{{#tl}}Shipping Method{{/tl}}</div>\n		<div class="info">\n			{{shipping_provider}}\n		</div>\n	</div>\n{{/shipping_provider}}\n\n{{#tracking_number}}\n	<div class="details-info details-tracking">\n		<div class="label">{{#tl}}Tracking Number{{/tl}}</div>\n		{{tracking_number}}\n	</div>\n{{/tracking_number}}\n'}),_wAMD.define("commerce/editor/store/order/detail/shipping/OrderDetailShippingItemView",["backbone-all","tpl!commerce/editor/store/order/detail/shipping/order-detail-shipping-item-view"],function(e,t){var i=e.Marionette.ItemView.extend({className:"detail-item",template:Mustache.compile(t),templateHelpers:function(){return this.order,{hasContactInfo:function(){return this.phone||this.email},address_name:function(){return this.full_name||this.business_name}}},initialize:function(e){this.order=e.order},onShow:function(){this.$el.hide().fadeIn()}});return i}),_wAMD.define("tpl!commerce/editor/store/order/detail/shipping/order-detail-shipping-empty-view",[],function(){return'<div class="details-info details-address">\n	<div class="label">\n		{{#isDigitalDownload}}\n			{{#tl}}No personal information provided.{{/tl}}\n		{{/isDigitalDownload}}\n		{{^isDigitalDownload}}\n			{{#tl}}No shipping details provided.{{/tl}}\n		{{/isDigitalDownload}}\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/shipping/OrderDetailShippingEmptyView",["backbone-all","tpl!commerce/editor/store/order/detail/shipping/order-detail-shipping-empty-view"],function(e,t){var i=e.Marionette.ItemView.extend({template:Mustache.compile(t),templateHelpers:function(){var e=this.order;return{isDigitalDownload:"digital"===e.get("order_contents_type")}},initialize:function(e){this.order=e.order}});return i}),_wAMD.define("tpl!commerce/editor/store/order/detail/shipping/order-detail-shipping-composite-view",[],function(){return'<div class="detail-header">\n	{{#isDigitalDownload}}\n		{{#tl}}Personal Information{{/tl}}\n	{{/isDigitalDownload}}\n	{{^isDigitalDownload}}\n		{{#tl}}Shipping Details{{/tl}}\n	{{/isDigitalDownload}}\n</div>\n\n<div class="details-address">\n	<div class="details-info-list">\n		{{! Populated by OrderDetailShippingItemView }}\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/shipping/OrderDetailShippingCompositeView",["jquery","backbone-all","./OrderDetailShippingItemView","./OrderDetailShippingEmptyView","commerce/editor/store/general/list/ListLoadingView","tpl!commerce/editor/store/order/detail/shipping/order-detail-shipping-composite-view"],function(e,t,i,n,o,s){var r=t.Marionette.CompositeView.extend({itemView:i,itemViewContainer:".details-info-list",itemViewOptions:function(){return{order:this.model}
},emptyView:o.extend({tagName:"div",className:"list-loading details-info",loadingState:_W.tl("Loading Shipping Information"),emptyState:n}),template:Mustache.compile(s),templateHelpers:function(){var e=this.model;return{isDigitalDownload:"digital"===e.get("order_contents_type")}},initialize:function(){var e=this,t=e.model,i=t.get("shipments");e.collection=i,e.listenTo(t,"sync",function(t,i){i&&i.success?e.collection.length||e.children.first().showEmpty():e.children.first().showFailure()})}});return r}),_wAMD.define("tpl!commerce/editor/store/order/detail/billing/order-detail-billing-item-view",[],function(){return'{{#payment_description}}\n	<div class="details-payment details-info">\n		<div class="label">{{#tl}}Payment Method{{/tl}}</div>\n		<div class="info">{{payment_description}}</div>\n		{{#has_cc}}<div class="info">{{#tl}}Expiration Date is {{/tl}}{{cc_exp_month}}/{{cc_exp_year}}</div>{{/has_cc}}\n	</div>\n{{/payment_description}}\n\n<div class="details-billaddress details-info">\n	<div class="label">{{#tl}}Billing Address{{/tl}}</div>\n	<div class="info">\n		{{! TODO: I18N }}\n		<ul class="info-list">\n			{{#full_name}}<li>{{full_name}}</li>{{/full_name}}\n			{{#street}}<li>{{street}}</li>{{/street}}\n			{{#street2}}<li>{{.}}</li>{{/street2}}\n\n			{{! Render the city, region, and a comma between ONLY if both are there! }}\n			<li>\n				{{#city}}{{city}}{{/city}}<!--\n					{{! Prevent a space between the comma and city }}\n				-->{{#city}}{{#region}},{{/region}}{{/city}}\n				{{#region}}{{region}}{{/region}}\n\n				{{#postal_code}}{{postal_code}}{{/postal_code}}\n			</li>\n		</ul>\n	</div>\n</div>\n\n{{#hasContactInfo}}\n	<div class="details-info details-contact">\n		<div class="label">{{#tl}}Contact Information{{/tl}}</div>\n		<div class="info">\n			<ul class="info-list">\n				{{#phone}}<li>{{#tl}}Phone{{/tl}}: <a href="tel:{{phone}}">{{phone}}</a></li>{{/phone}}\n				{{#email}}<li>{{#tl}}Email{{/tl}}: <a href="mailto:{{email}}">{{email}}</a></li>{{/email}}\n			</ul>\n		</div>\n	</div>\n{{/hasContactInfo}}\n'}),_wAMD.define("commerce/editor/store/order/detail/billing/OrderDetailBillingItemView",["underscore","backbone-all","tpl!commerce/editor/store/order/detail/billing/order-detail-billing-item-view"],function(e,t,i){var n=t.Marionette.ItemView.extend({className:"detail-item",template:Mustache.compile(i),templateHelpers:function(){var t=this.model.get("transactions").find(function(e){return"success"===e.status});return e.extend({hasContactInfo:function(){return this.phone||this.email},has_cc:function(){var e,i,n=t.cc_exp_month,o=t.cc_exp_year;return e=n&&"00"!==n,i=o&&"00"!==o,e&&i},payment_description:function(){var e,i=t.cc_type;return e="PayPal"===i?i:_W.tl("{{cc_type}} ending in {{cc_last_4}}").replace("{{cc_type}}",t.cc_type).replace("{{cc_last_4}}",t.cc_last_4)}},t)},initialize:function(e){this.order=e.order},onShow:function(){this.$el.hide().fadeIn()}});return n}),_wAMD.define("tpl!commerce/editor/store/order/detail/billing/order-detail-billing-empty-view",[],function(){return'<div class="label">\n	{{#tl}}No billing details provided.{{/tl}}\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/billing/OrderDetailBillingEmptyView",["backbone-all","tpl!commerce/editor/store/order/detail/billing/order-detail-billing-empty-view"],function(e,t){var i=e.Marionette.ItemView.extend({template:Mustache.compile(t)});return i}),_wAMD.define("tpl!commerce/editor/store/order/detail/billing/order-detail-billing-composite-view",[],function(){return'<div class="detail-header">{{#tl}}Billing Details{{/tl}}</div>\n\n<div class="details-address">\n	<div class="details-info-list">\n		{{! Populated by OrderDetailBillingItemView }}\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/billing/OrderDetailBillingCompositeView",["backbone-all","./OrderDetailBillingItemView","./OrderDetailBillingEmptyView","commerce/editor/store/general/list/ListLoadingView","tpl!commerce/editor/store/order/detail/billing/order-detail-billing-composite-view"],function(e,t,i,n,o){var s=e.Marionette.CompositeView.extend({itemView:t,itemViewContainer:".details-info-list",itemViewOptions:function(){return{order:this.model}},emptyView:n.extend({tagName:"div",className:"list-loading details-info",loadingState:_W.tl("Loading Billing Information"),emptyState:i}),template:Mustache.compile(o),initialize:function(){var t=this,i=t.model,n=i.get("billings");t.collection=new e.Collection,t.listenTo(i,"sync",function(o,s){if(s&&s.success){var r=0===Number(i.get("order_total")),a=i.successfulBilling();if(!r&&a){var l=new e.Collection(n.filter(function(e){return e.successfulTransaction()}));t.collection.reset(l.toJSON())}0===t.collection.length&&t.children.first().showEmpty()}else t.children.first().showFailure()})}});return s}),_wAMD.define("tpl!commerce/editor/store/order/dialog/cancel-order",[],function(){return'<p>{{#tl}}Are you sure you want to cancel this order?{{/tl}}</p>\n\n<form>\n	{{#inventoryEnabled}}\n		<div class="form-group">\n			<label class="checkbox-label">\n				<input type="checkbox" id="return-to-inventory">\n				{{#tl}}Add order items back to available inventory{{/tl}}\n			</label>\n		</div>\n	{{/inventoryEnabled}}\n\n	{{#gatewaysMatch}}\n		{{^isPaypalTransaction}}\n			<div class="form-group">\n				<label class="checkbox-label">\n					<input type="checkbox" id="issue-refund">\n					{{#tl}}Issue full refund to customer{{/tl}}\n				</label>\n			</div>\n		{{/isPaypalTransaction}}\n	{{/gatewaysMatch}}\n\n	<div class="form-group">\n		<label class="checkbox-label">\n			<input type="checkbox" id="notify-customer">\n			{{#tl}}Notify customer by email{{/tl}}\n		</label>\n	</div>\n\n	<p class="error"></p>\n\n</form>\n'}),_wAMD.define("commerce/editor/store/order/dialog/CancelOrderView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/order/dialog/cancel-order","util/ui/wInput","util/ui/wLoadButton"],function(e,t,i,n,o){return t.Marionette.ItemView.extend({dialog:{title:_W.tl("Cancel Order"),dialogClass:"order-dialog cancel-order-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Dismiss"),className:"btn-com btn-dismiss"},{text:_W.tl("Cancel Order"),className:"btn-com btn-danger btn-cancel-order"}]}]},triggers:{"click .btn-dismiss":"dialog:close"},events:{"click @ui.cancelOrder":"cancelOrder"},ui:{error:".error",checkboxes:"input[type=checkbox]",cancelOrder:".btn-cancel-order",returnToInvetory:"#return-to-inventory",issueRefund:"#issue-refund",notifyCustomer:"#notify-customer"},template:i.compile(o),templateHelpers:function(){var e=this,t=e.model,i=n.commerce.storefrontSettings.get("gateway"),o=n.commerce.storefrontSettings.get("enabled_gateways"),s=t.successfulBilling(),r=s.get("gateway");return{gatewaysMatch:i===r||Object.keys(o).length>1,isPaypalTransaction:"PayPal"===r,inventoryEnabled:function(){var e=Weebly.Restrictions.hasAccess("com_inventory_tracking"),i="digital"!==t.get("order_contents_type"),n=!(t.get("return_inventory_date")>0);return e&&i&&n}}},onShow:function(){var e,t=this;t.ui.checkboxes.wCheckbox(),t.ui.cancelOrder.wLoadButton(),e=t.ui.checkboxes.eq(0).data("wcheckbox"),e=e?e.container:t.ui.checkboxes.eq(0),e.focus()},cancelOrder:function(){var e=this,t=e.model;e.ui.cancelOrder.wLoadButton("startWait"),"cancelled"!==t.get("order_status")&&Weebly.Commerce.RPC.Order.cancel(t.get("owner_id"),t.get("site_id"),t.get("site_order_id"),e.ui.returnToInvetory.prop("checked"),e.ui.issueRefund.prop("checked"),e.ui.notifyCustomer.prop("checked")).done(function(i){e.ui.cancelOrder.wLoadButton("endWait"),i.success?(t.set("order_status","cancelled"),t.fetch(),e.trigger("dialog:close")):e.showError()}).fail(function(){e.ui.cancelOrder.wLoadButton("endWait"),e.showError()})},showError:function(e){e=e||_W.tl("Unable to update order, please try again later."),this.ui.error.html(e).slideDown().delay(5e3).slideUp()}})}),_wAMD.define("tpl!commerce/editor/store/order/dialog/refund-order",[],function(){return'{{#gatewaysMatch}}\n	{{#isPaypalTransaction}}\n		<p class="ui-dialog-alert">\n			{{#tl}}<strong>Important:</strong> You need to go <a href="http://www.paypal.com" target="_blank">PayPal.com</a> to issue a refund to your customer. <br>{{/tl}}\n			{{#tl}}This is for tracking purposes only.{{/tl}}\n		</p>\n	{{/isPaypalTransaction}}\n{{/gatewaysMatch}}\n{{^gatewaysMatch}}\n	{{#isPaypalTransaction}}\n		<p class="ui-dialog-alert">\n			{{#tl}}<strong>Important:</strong> You need to go <a href="http://www.paypal.com" target="_blank">PayPal.com</a> to issue a refund to your customer. <br>{{/tl}}\n			{{#tl}}This is for tracking purposes only.{{/tl}}\n		</p>\n	{{/isPaypalTransaction}}\n	{{^isPaypalTransaction}}\n		<p class="ui-dialog-alert">\n			{{#tl}}<strong>Important:</strong> You must issue this refund directly through {{orderGateway}} because you are now connected to {{currentGateway}}.{{/tl}}\n			<br>\n			{{#tl}}This is for tracking purposes only.{{/tl}}\n		</p>\n	{{/isPaypalTransaction}}\n{{/gatewaysMatch}}\n\n{{#hasRefunded}}\n	<p class="main-text">\n		<span class="refunded-amount">{{{ currencyPrefix }}}{{ refundAmount }}</span>\n		{{#tl}}has already been refunded{{/tl}}\n	</p>\n{{/hasRefunded}}\n\n<form>\n	<label for="to-refund-amount" class="line-label">\n		{{#trackingOnly}}\n			{{#tl}}Amount refunded at {{orderGateway}}{{/tl}}\n		{{/trackingOnly}}\n		{{^trackingOnly}}\n			{{#tl}}Refund Amount{{/tl}}\n		{{/trackingOnly}}\n	</label>\n	<div class="line-group">\n		<input type="text" name="refund-amount" id="to-refund-amount" class="half">\n		<div class="last half">\n		{{#trackingOnly}}\n			<a class="pill-single selected monetary-unit-based">{{{ currencyPrefix }}}</a>\n		{{/trackingOnly}}\n		{{^trackingOnly}}\n			<a class="pill-left selected monetary-unit-based">{{{ currencyPrefix }}}</a><a class="pill-right percent-based">%</a>\n		{{/trackingOnly}}\n		</div>\n		<div class="clear"></div>\n	</div>\n\n	{{#inventoryEnabled}}\n		<div class="form-group">\n			<input type="checkbox" name="return-to-inventory" id="return-to-inventory" checked>\n			<label for="return-to-inventory" class="checkbox-label">{{#tl}}Add order items back to available inventory{{/tl}}</label>\n		</div>\n	{{/inventoryEnabled}}\n\n	<div class="form-group">\n		<input type="checkbox" name="notify-customer" id="notify-customer" checked>\n		<label for="notify-customer" class="checkbox-label">{{#tl}}Notify customer by email{{/tl}}</label>\n	</div>\n\n	<p class="error">\n	</p>\n	\n</form>\n'}),_wAMD.define("commerce/editor/store/order/dialog/RefundOrderView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!commerce/editor/store/order/dialog/refund-order","util/ui/wLoadButton"],function(e,t,i,n,o,s){return i.Marionette.ItemView.extend({template:n.compile(s),templateHelpers:function(){return{hasRefunded:this.order.get("refunded_amount")>0,refundAmount:this.order.get("refunded_amount"),currencyPrefix:this.order.get("currency_prefix"),inventoryEnabled:this.isInventoryEnabled(),currentGateway:this.currentGateway,orderGateway:this.orderGateway,isPaypalTransaction:"PayPal"===this.orderGateway,gatewaysMatch:this.currentGateway===this.orderGateway||this.orderGatewayID>=1||this.isMultiGateway,trackingOnly:this.trackingOnly}},initialize:function(e){this.order=e.order,this.currentGateway=o.commerce.storefrontSettings.get("gateway"),this.successfulBilling=this.order.successfulBilling(),this.orderGateway=this.successfulBilling.get("gateway"),this.orderGatewayID=this.successfulBilling.get("site_payment_gateway_id"),this.trackingOnly="PayPal"===this.orderGateway,this.isMultiGateway=t.size(o.commerce.storefrontSettings.get("enabled_gateways"))>=2,"PayPal"!==this.orderGateway&&(this.orderGatewayID>=1||this.isMultiGateway)?this.trackingOnly=!1:this.currentGateway!==this.orderGateway&&(this.trackingOnly=!0)},onRender:function(){this.setBase("monetaryUnit")},onShow:function(){var e=(this.order.get("order_total")-this.order.get("refunded_amount")).toFixed(2);this.$("input[type=checkbox]").wCheckbox(),this.$(".btn-refund").wLoadButton(),this.$("#to-refund-amount").val(e),(this.orderGateway!==this.currentGateway||"PayPal"===this.orderGateway)&&this.$(".btn-success").html(_W.tl("Record Refund"))},dialog:{title:_W.tl("Issue Refund"),dialogClass:"order-dialog refund-order-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Issue Refund"),className:"btn-com btn-refund btn-success"}]}]},isInventoryEnabled:function(){var e=Weebly.Restrictions.hasAccess("com_inventory_tracking"),t="digital"!==this.order.get("order_contents_type"),i=!(this.order.get("return_inventory_date")>0);return e&&t&&i},setBase:function(e){var t,i;switch(e){case"monetaryUnit":this.base="monetaryUnit",t=".monetary-unit-based",i=".percent-based";break;case"percent":this.base="percent",t=".percent-based",i=".monetary-unit-based"}this.$(i).removeClass("selected"),this.$(t).addClass("selected")},issueRefund:function(t){var i=this,n=e("#to-refund-amount").val(),s=n;"percent"==this.base&&(s=this.order.get("order_total")*(s/100)),""===s?this.showError(_W.tl("Please enter a refund amount.")):parseFloat(s)>(this.order.get("order_total")-this.order.get("refunded_amount")).toFixed(2)||0>s?this.showError(_W.tl("Invalid return amount. Please enter a value less than or equal to the order amount.")):(e(t.target).wLoadButton("startWait"),"percent"==this.base&&(s=n),o.commerce.RPC.Order.refund(this.order.get("owner_id"),this.order.get("site_id"),this.order.get("site_order_id"),this.base,s,e("#return-to-inventory").prop("checked"),e("#notify-customer").prop("checked")).done(function(n){e(t.target).wLoadButton("endWait"),n.success?(i.order.fetch(),i.trigger("dialog:close")):i.showError(_W.tl("Unable to process refund, please try again later.")),i.order.fetch()}))},triggers:{"click .btn-cancel":"dialog:close"},events:{"click .btn-refund":"issueRefund","click .monetary-unit-based":function(){this.setBase("monetaryUnit")},"click .percent-based":function(){this.setBase("percent")}},showError:function(e){this.$(".error").html(e).slideDown().delay(5e3).slideUp()}})}),_wAMD.define("commerce/editor/model/ShippingProvider",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ShippingProvider"})}),_wAMD.define("commerce/editor/collection/ShippingProvider",["./_baseCommerceCollection","../model/ShippingProvider"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"ShippingProvider"})}),_wAMD.define("tpl!commerce/editor/store/order/dialog/ship-order",[],function(){return'<form>\n	<div class="line-group">\n		<label for="tracking-number" class="line-label">{{#tl}}Tracking Number{{/tl}} <span class="mutted">{{#tl}}(optional){{/tl}}</span></label>\n		<input type="text" name="tracking-number" id="tracking-number" class="full"/>\n	</div>\n\n	<div class="line-group">\n		<label for="carrier-select" class="line-label">{{#tl}}Carrier{{/tl}}</label>\n		<select name="carrier-select" id="carrier-select" class="half">\n			{{#shippingProviders}}\n				<option value="{{site_shipping_provider_id}}">{{shipping_provider}}</option>\n			{{/shippingProviders}}\n			<option value="add-new">{{#tl}}Add new{{/tl}}</option>\n		</select>\n		<input type="text" name="custom-carrier" id="custom-carrier" class="last half"/>\n		<div class="clear"></div>\n	</div>\n\n	<div class="line-group">\n		<input type="checkbox" name="notify-customer" id="notify-customer" checked>\n		<label for="notify-customer" class="checkbox-label">{{#tl}}Notify customer by email{{/tl}}</label>\n	</div>\n\n	<p class="error">\n	</p>\n	\n</form>\n'}),_wAMD.define("tpl!commerce/editor/store/order/dialog/ship-order-loading",[],function(){return"<p>{{#tl}}Loading shipping...{{/tl}}</p>\n"}),_wAMD.define("commerce/editor/store/order/dialog/ShipOrderView",["jquery","backbone-all","mustache","editor/app","commerce/editor/model/ShippingProvider","commerce/editor/collection/ShippingProvider","tpl!commerce/editor/store/order/dialog/ship-order","tpl!commerce/editor/store/order/dialog/ship-order-loading","util/ui/wInput","util/ui/wLoadButton"],function(e,t,i,n,o,s,r,a){var l={loading:i.compile(a),complete:i.compile(r)};return t.Marionette.ItemView.extend({dialog:{title:_W.tl("Mark This Order as Shipped"),dialogClass:"order-dialog ship-order-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Mark as Shipped"),className:"btn-com btn-success btn-shipped"}]}]},triggers:{"click .btn-cancel":"dialog:close"},events:{"click .btn-shipped":"markAsShipped","change select[name=carrier-select]":"carrierSelect"},ui:{error:".error",markAsShippedButton:".btn-shipped",trackingNumber:"input[name=tracking-number]",carrierSelect:"select[name=carrier-select]",newCarrierName:"input[name=custom-carrier]",notifyCustomer:"input[name=notify-customer]"},template:l.loading,templateHelpers:function(){var e=this;return{shippingProviders:function(){return e.shippingProviders.toJSON()}}},initialize:function(){var e=this;e.loading=!0,e.shippingProviders=new s,e.shippingProviders.fetch().done(function(){e.loading=!1,e.template=l.complete,e.rendered&&e.render()})},onRender:function(){var e=this;e.rendered=!0,e.loading||(e.ui.notifyCustomer.wCheckbox(),e.ui.carrierSelect.wSelectbox({theme:"com_detached"}),e.ui.markAsShippedButton.wLoadButton(),e.carrierSelect(),e.ui.trackingNumber.focus())},carrierSelect:function(){var e=this;e.ui.newCarrierName.toggle("add-new"==e.ui.carrierSelect.val())},markAsShipped:function(){var t,i=this,s=i.model,r=i.ui.markAsShippedButton,a=i.shippingProviders.findWhere({site_shipping_provider_id:parseInt(i.ui.carrierSelect.val(),10)});if(!a){var l=e.trim(i.ui.newCarrierName.val());if(""==l)return i.showError(_W.tl("Please enter a name for the new shipping carrier or select.")),void 0;a=new o({shipping_provider:l}),t=a.commit(),i.shippingProviders.add(a)}r.wLoadButton("startWait"),e.when(t).done(function(){n.commerce.RPC.Order.ship(s.get("owner_id"),s.get("site_id"),s.get("site_order_id"),a.get("site_shipping_provider_id"),i.ui.trackingNumber.val(),i.ui.notifyCustomer.prop("checked")).done(function(e){r.wLoadButton("endWait"),e.success?(s.set("order_status","shipped"),s.fetch(),i.trigger("dialog:close")):i.showError(_W.tl("Unable to update order, please try again later."))}).fail(function(){r.wLoadButton("endWait"),i.showError(_W.tl("Unable to update order, please try again later."))})})},showError:function(e){this.ui.error.html(e).slideDown().delay(5e3).slideUp()}})}),_wAMD.define("tpl!commerce/editor/store/order/dialog/return-order",[],function(){return'<p>{{#tl}}This order will be marked as returned.{{/tl}}</p>\n\n<form>\n	{{#inventoryEnabled}}\n		<div class="form-group">\n			<label class="checkbox-label">\n				<input type="checkbox" id="return-to-inventory" checked>\n				{{#tl}}Add order items back to available inventory{{/tl}}\n			</label>\n		</div>\n	{{/inventoryEnabled}}\n\n	{{^trackingOnly}}\n		<div class="form-group">\n			<label class="checkbox-label">\n				<input type="checkbox" id="issue-refund" checked>\n				{{#tl}}Issue full refund to customer{{/tl}}\n			</label>\n		</div>\n	{{/trackingOnly}}\n\n	<div class="form-group">\n		<label class="checkbox-label">\n			<input type="checkbox" id="notify-customer" checked>\n			{{#tl}}Notify customer by email{{/tl}}\n		</label>\n	</div>\n\n	<p class="error"></p>\n</form>\n'}),_wAMD.define("commerce/editor/store/order/dialog/ReturnOrderView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/order/dialog/return-order","util/ui/wInput","util/ui/wLoadButton"],function(e,t,i,n,o){return t.Marionette.ItemView.extend({dialog:{title:_W.tl("Mark as Returned"),dialogClass:"order-dialog cancel-order-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Dismiss"),className:"btn-com btn-dismiss"},{text:_W.tl("Mark as Returned"),className:"btn-com btn-danger btn-return-order"}]}]},triggers:{"click .btn-dismiss":"dialog:close"},events:{"click @ui.returnOrder":"returnOrder"},ui:{error:".error",checkboxes:"input[type=checkbox]",returnOrder:".btn-return-order",returnToInvetory:"#return-to-inventory",issueRefund:"#issue-refund",notifyCustomer:"#notify-customer"},template:i.compile(o),templateHelpers:function(){var e=this,t=e.model,i=n.commerce.storefrontSettings.get("gateway"),o=t.successfulBilling(),s=o.get("gateway");return{isPaypalTransaction:"PayPal"===s,gatewaysMatch:i===s,trackingOnly:i!==s||"PayPal"===s,inventoryEnabled:function(){var e=Weebly.Restrictions.hasAccess("com_inventory_tracking"),i="digital"!==t.get("order_contents_type"),n=!(t.get("return_inventory_date")>0);return e&&i&&n}}},onShow:function(){var e,t=this;t.ui.checkboxes.wCheckbox(),t.ui.returnOrder.wLoadButton(),e=t.ui.checkboxes.eq(0).data("wcheckbox"),e=e?e.container:t.ui.checkboxes.eq(0),e.focus()},returnOrder:function(){var e=this,t=e.model;e.ui.returnOrder.wLoadButton("startWait"),"cancelled"!==t.get("order_status")&&n.commerce.RPC.Order.returned(t.get("owner_id"),t.get("site_id"),t.get("site_order_id"),e.ui.returnToInvetory.prop("checked"),e.ui.issueRefund.prop("checked"),e.ui.notifyCustomer.prop("checked")).done(function(i){e.ui.returnOrder.wLoadButton("endWait"),i.success?(t.set("order_status","returned"),t.fetch(),e.trigger("dialog:close")):e.showError()}).fail(function(){e.ui.returnOrder.wLoadButton("endWait"),e.showError()})},showError:function(e){e=e||_W.tl("Unable to update order, please try again later."),this.ui.error.html(e).slideDown().delay(5e3).slideUp()}})}),_wAMD.define("tpl!commerce/editor/store/order/detail",[],function(){return'<link id="pageStyle"  rel="stylesheet" href="http://{{ASSETS_BASE}}/css/editor-print-order.css?buildtime={{buildTime}}" type="text/css" media="print" />\n<div class="title-bar">\n	<div class="buttons">\n		<button class="print-order btn-com btn-icon-left">\n			<i class="w-icon-print"></i>\n			{{#tl}}Print Order{{/tl}}\n		</button>\n	</div>\n	<button class="back btn-com btn-back">{{#tl}}Back{{/tl}}</button>\n	<h1 class="order-number">\n		{{#tl}}Order #{{site_order_id}}{{/tl}}\n	</h1>\n</div>\n\n<div class="order-details detail-block">\n	{{! Populated by OrderDetailItemCompositeView }}\n</div>\n\n<div class="order-events detail-block">\n	{{! Populated by OrderDetailHistoryCollectionView }}\n</div>\n\n<div class="details-row">\n	<div class="order-shipping-details detail-block">\n		{{! Populated by OrderDetailShippingView }}\n	</div>\n\n	<div class="order-billing-details detail-block">\n		{{! Populated by OrderDetailBillingView }}\n	</div>\n</div> {{! .details-row }}\n\n<div class="footer-spacer"></div>\n\n<div class="footer-bar">\n	<button class="btn-com btn-cancel-order" {{#isCancelled}}disabled{{/isCancelled}}>\n		<span class="w-icon-delete"></span>\n		Cancel Order\n	</button>\n	{{^isFreeOrder}}\n		<button class="btn-com btn-refund" {{#isRefunded}}disabled{{/isRefunded}}>\n			<span class="w-icon-return"></span>\n			Issue Refund\n		</button>\n	{{/isFreeOrder}}\n	{{^isDigitalDownload}}\n		<button class="btn-com btn-success btn-shipped pull-right">\n			<span class="w-icon-check-mark"></span>\n			Mark As Shipped\n		</button>\n	{{/isDigitalDownload}}\n	<button class="btn-com btn-returned pull-right">\n		<span class="w-icon-check-mark"></span>\n		Mark As Returned\n	</button>\n</div>\n'}),_wAMD.define("commerce/editor/store/order/detail/OrderDetailView",["jquery","underscore","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","./items/OrderDetailItemsCompositeView","./history/OrderDetailHistoryCompositeView","./shipping/OrderDetailShippingCompositeView","./billing/OrderDetailBillingCompositeView","commerce/editor/store/order/dialog/CancelOrderView","commerce/editor/store/order/dialog/RefundOrderView","commerce/editor/store/order/dialog/ShipOrderView","commerce/editor/store/order/dialog/ReturnOrderView","tpl!editor/loading","tpl!commerce/editor/store/order/detail"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m){var g=s.extend({template:n.compile(f),className:"order-detail-view",templateHelpers:function(){var e=this.model,t=e.get("order_status"),i=e.get("order_total");return{isShipped:"shipped"===t,isRefunded:"refunded"===t,isCancelled:"cancelled"===t,isFreeOrder:0>=i}},ui:{footerBar:".footer-bar",cancel:".btn-cancel-order",refund:".btn-refund",markShipped:".btn-shipped",markReturned:".btn-returned"},events:{"click .back":"back","click .print-order":"printOrder","click @ui.cancel":"cancelOrder","click @ui.refund":"refundOrder","click @ui.markShipped":"shipOrder","click @ui.markReturned":"returnOrder"},modelEvents:{"change order_status":"onOrderStatusChange"},regions:{orderItemsRegion:".order-details",orderHistoryRegion:".order-events",orderShippingRegion:".order-shipping-details",orderBillingRegion:".order-billing-details"},initialize:function(t){var i=this,o=!1;i.model||(i.model=Order.findOrCreate({site_order_id:Order.getID(t)}),o=i.model.fetch()),i.loading=!0,startWait(),e.when(o).done(function(){endWait(),i.loading=!1,i.listenTo(i.model,"change order_status",i.onOrderStatusChange),i.template=n.compile(m),i.rendered&&i.render()})},onRender:function(){var e=this;s.prototype.onRender.apply(e,arguments),e.rendered=!0,e.loading||(e.ui.markReturned.hide(),e.ui.cancel.wLoadButton(),e.updateOrderStatus(),e.showOrderItems(),e.showOrderHistory(),e.showOrderShipping(),e.showOrderBilling(),e.model.fetch())},updateOrderStatus:function(){var e=this,i=e.model.get("order_status"),n={refund:["cancelled","pending","shipped","returned","sent"],cancel:["pending"],markShipped:["pending"],markReturned:["shipped"]};t.each(n,function(n,o){e.ui[o].toggle(t.contains(n,i))})},onOrderStatusChange:function(){var e=this;e.updateOrderStatus()},back:function(){this.ui.footerBar.hide(),o.commerce.vent.trigger("store:order:list")},printOrder:function(){var e=document.title;document.title="Order #"+this.model.get("site_order_id"),window.print(),document.title=e},showOrderItems:function(){this.orderItemsRegion.show(new r({model:this.model}))},showOrderHistory:function(){this.orderHistoryRegion.show(new a({model:this.model}))},showOrderShipping:function(){this.orderShippingRegion.show(new l({model:this.model}))},showOrderBilling:function(){this.orderBillingRegion.show(new c({model:this.model}))},cancelOrder:function(){this.dialogRegion.show(new u({model:this.model}))},refundOrder:function(){this.dialogRegion.show(new d({order:this.model,view:this}))},shipOrder:function(){this.dialogRegion.show(new h({model:this.model}))},returnOrder:function(){this.dialogRegion.show(new p({model:this.model}))}});return g}),_wAMD.define("commerce/editor/store/order/OrderView",["editor/app","commerce/editor/collection/Order","commerce/editor/collection/OrderItem","./list/OrderListView","./detail/OrderDetailView","components/views/ListDetailView","commerce/editor/store/general/pagination/PaginationView"],function(e,t,i,n,o,s,r){var a=s.prototype,l=s.extend({listDetailOptions:{ListView:n,DetailView:o,eventModelName:"order"},initialize:function(){var i=this;a.initialize.apply(i,arguments),r.resetState(t),i.listenTo(e.commerce.vent,{"store:order:list":i.list,"store:order:edit":i.edit,"store:order:add":i.add,"store:order:copy":i.copy})}});return l}),_wAMD.define("commerce/editor/store/order/module",["backbone-all","editor/app","commerce/editor/model/Order","commerce/editor/store/order/OrderView"],function(e,t,i,n){t.module("commerce.store.order",function(o){var s={viewOrders:function(){t.commerce.store.layout.mainRegion.show(new n({app:t.commerce,namespace:"store",regionClass:"commerce-store-main-region"}))},viewOrderList:function(){e.preventClose(function(){r.navigate("store/order"),s.viewOrders(),t.commerce.vent.trigger("store:order:list")})},editOrder:function(n){e.preventClose(function(){r.navigate("store/order/"+i.getID(n)),s.viewOrders(),t.commerce.vent.trigger("store:order:edit",n)})}};o.on("start",function(){t.vent.on({"store:order":function(){s.viewOrders()},"store:order:list":function(){s.viewOrderList()},"store:order:edit":function(e){s.editOrder(e)}})});var r=new e.Marionette.AppRouter({controller:s,appRoutes:{"store/order":"viewOrderList","store/order/:id":"editOrder"}})})}),_wAMD.define("commerce/editor/model/Coupon",["./_baseCommerceModel"],function(e){return e.extend({useServerGeneratedDefaultsFor:"Coupon",get:function(t){return"shipping_rates"==t?this.getRelated("shipping_rate_ids","site_shipping_price_id",require("commerce/editor/collection/ShippingRate")):"categories"==t?this.getRelated("category_ids","site_category_id",require("commerce/editor/collection/Category")):"products"==t?this.getRelated("product_ids","site_product_id",require("commerce/editor/collection/Product")):e.prototype.get.apply(this,arguments)}})}),_wAMD.define("commerce/editor/collection/Coupon",["./_baseCommerceCollection","../model/Coupon"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"Coupon"})}),_wAMD.define("tpl!commerce/editor/store/coupon/list/item",[],function(){return'<td class="code">{{code}}</td>\n<td class="summary">{{{summary}}}</td>\n<td class="availability">{{availability}}</td>\n<td class="used">{{num_used}}/{{available}}</td>\n<td class="options"><span class="menu w-icon-cog">{{>ui/hover-toolbar}}</span></td>'}),_wAMD.define("commerce/editor/store/coupon/list/CouponListItemView",["backbone-all","mustache","editor/app","tpl!commerce/editor/store/coupon/list/item"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),tagName:"tr",className:"selectable",templateHelpers:{available:function(){return null===this.num_available?"∞":this.num_available},hoverToolbarActions:function(){var e=[];return e.push({name:"delete",icon:"w-icon-delete",title:_W.tl("Delete")}),e}},ui:{toolbar:".hover-toolbar"},modelEvents:{change:"render"},events:{"click td":"editCoupon","click .copy":"copyCoupon","click .delete":"deleteCoupon","click .menu":"showToolbar",mouseleave:"hideToolbar"},showToolbar:function(e){e.stopPropagation(),this.ui.toolbar.toggle()},hideToolbar:function(){this.ui.toolbar.hide()},editCoupon:function(){i.commerce.vent.trigger("store:coupon:edit",this.model)},copyCoupon:function(){i.commerce.vent.trigger("store:coupon:copy",this.model)},deleteCoupon:function(e){e.stopPropagation(),i.commerce.vent.trigger("store:coupon:delete",this.model)}});return o}),_wAMD.define("tpl!commerce/editor/store/coupon/list/empty",[],function(){return'<td colspan="5">\n	{{#tl}}You currently don\'t have any coupons.{{/tl}}\n</td>\n'}),_wAMD.define("commerce/editor/store/coupon/list/CouponListEmptyView",["backbone-all","mustache","tpl!commerce/editor/store/coupon/list/empty"],function(e,t,i){var n=e.Marionette.CompositeView.extend({tagName:"tr",className:"coupon-list-empty",template:t.compile(i)});return n}),_wAMD.define("tpl!commerce/editor/store/coupon/list/list",[],function(){return'<table class="coupon-list entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th class="codes">{{#tl}}Coupon Codes{{/tl}}</th>\n			<th class="criteria">{{#tl}}Criteria{{/tl}}</th>\n			<th class="availability">{{#tl}}Date Availability{{/tl}}</th>\n			<th class="used">{{#tl}}Used{{/tl}}</th>\n			<th class="options"></th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>\n'}),_wAMD.define("commerce/editor/store/coupon/list/CouponListTableView",["backbone-all","mustache","./CouponListItemView","commerce/editor/store/general/list/ListLoadingView","./CouponListEmptyView","tpl!commerce/editor/store/coupon/list/list"],function(e,t,i,n,o,s){var r=e.Marionette.CompositeView.extend({template:t.compile(s),itemView:i,itemViewContainer:".coupon-list tbody",emptyView:n.extend({colspan:5}),initialize:function(){var e=this,t=e.collection.fetch();t.done(function(){e.emptyView=o,e.rendered&&e.render()}),t.fail(function(e){console.log(e)})},onRender:function(){this.rendered=!0}});return r}),_wAMD.define("tpl!commerce/editor/store/coupon/list/layout",[],function(){return'<div class="title-bar">\n	<div class="buttons">\n		<button class="btn-com btn-info btn-large btn-icon-left add-coupon-button">\n			<span class="w-icon-plus"></span>\n			{{#tl}}Add Coupon{{/tl}}\n		</button>\n	</div>\n\n	<h1>{{#tl}}Coupons{{/tl}}</h1>\n</div>\n\n{{>commerce/editor/store/coupon/buy-now-warning}}\n\n<div class="list"></div>\n<div class="pagination"></div>\n<div class="dialog-region"></div>'
}),_wAMD.define("tpl!commerce/editor/store/coupon/buy-now-warning",[],function(){return'{{#buyItNowEnabled}}\n	<div class="msg msg-warning">\n		<p>{{#tl}}Warning: Because your store mode is set to "Buy Now", and coupons are applied when viewing a cart, your customers will not have the opportunity to use coupons.  You can change your store mode <a href="#" class="change-store-mode">here</a>.{{/tl}}</p>\n	</div>\n{{/buyItNowEnabled}}\n'}),_wAMD.define("commerce/editor/store/coupon/list/CouponListView",["underscore","backbone-all","mustache","editor/app","commerce/editor/model/_baseCommerceModel","commerce/editor/collection/Coupon","./CouponListTableView","commerce/editor/store/general/pagination/PaginationView","components/regions/Dialog","components/views/ConfirmView","tpl!commerce/editor/store/coupon/list/layout","tpl!commerce/editor/store/coupon/buy-now-warning"],function(e,t,i,n,o,s,r,a,l,c,u,d){i.compilePartial("commerce/editor/store/coupon/buy-now-warning",d);var h=t.Marionette.Layout.extend({className:"store-coupon-list",template:i.compile(u),ui:{changeStoreMode:".change-store-mode"},regions:{listRegion:".list",paginationRegion:".pagination",dialogRegion:l.extend({el:".dialog-region"})},events:{"click .add-coupon-button":"addCoupon","click .change-store-mode":"changeStoreMode"},templateHelpers:{buyItNowEnabled:function(){return"buynow"==n.commerce.storefrontSettings.get("store_mode")}},initialize:function(){this.listenTo(o.vent,"create:coupon",this.close),this.listenTo(n.commerce.vent,"store:coupon:delete",this.couponDeleteHandler)},couponDeleteHandler:function(e){var t=new c({message:_W.tl("Are you sure?"),callback:function(t){t&&e.destroy()}});this.dialogRegion.show(t)},onRender:function(){var e=new s;this.paginationRegion.show(new a({collection:e})),this.listRegion.show(new r({collection:e}))},addCoupon:function(){n.vent.trigger("store:coupon:add")},changeStoreMode:function(e){e.preventDefault(),n.vent.triggerCascade("store:setting:general:list")}});return h}),_wAMD.define("commerce/editor/model/ShippingRate",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ShippingRate",get:function(e){return"coupons"==e?this.getRelated("coupon_ids","site_coupon_id",require("commerce/editor/collection/Coupon")):t.prototype.get.apply(this,arguments)},saveWithRegionRates:function(){return this.get("region_rates").each(function(e){e.hasChanged()&&(0==e.get("rate_disabled")&&0==e.get("price_adjustment")?e.destroy():e.save())}),this.save()},resetWithRegionRates:function(){this.get("region_rates").each(function(e){e.hasChanged()&&e.rollback()}),this.hasChanged()&&this.rollback()}})}),_wAMD.define("commerce/editor/collection/ShippingRate",["./_baseCommerceCollection","../model/ShippingRate"],function(e,t){return e.extend({model:t,useServerGeneratedDefaultsFor:"ShippingRate"})}),_wAMD.define("tpl!commerce/editor/general/chooser/shippingRate/name",[],function(){return"{{title}}\n\n{{#minimum}}{{#maximum}}\n	for {{prefix}}{{minimum}}{{suffix}} - {{prefix}}{{maximum}}{{suffix}}\n{{/maximum}}{{/minimum}}\n\n{{^minimum}}{{#maximum}}\n	for up to {{prefix}}{{maximum}}{{suffix}}\n{{/maximum}}{{/minimum}}\n\n{{#minimum}}{{^maximum}}\n	for {{prefix}}{{minimum}}{{suffix}} and up\n{{/maximum}}{{/minimum}}\n\n{{#multipleCountries}}\n	({{country}})\n{{/multipleCountries}}"}),_wAMD.define("commerce/editor/components/chooser/ShippingRateChooser",["underscore","jquery","mustache","editor/app","commerce/editor/collection/ShippingRate","components/chooser/Chooser","tpl!commerce/editor/general/chooser/shippingRate/name"],function(e,t,i,n,o,s,r){var r=i.compile(r),a=s.extend({initialize:function(i){var a=n.commerce.storefrontSettings;i.chooser={foreignKey:"shipping_rates",fullCollection:o,attrs:{id:"site_shipping_price_id",relation:i.reverseRelationKey},text:t.extend({list:_W.tl("Shipping Rates"),select:_W.tl("Select Shipping Rates"),create:_W.tl("Add a shipping rate"),noneChosen:_W.tl("No shipping rates chosen."),noneFound:_W.tl("No shipping rates found.")},i.text||{}),itemView:{templateHelpers:{name:function(){return r(this)},prefix:function(){return a.get("Weight"==this.type?"weight_prefix":"currency_prefix")},suffix:function(){return a.get("Weight"==this.type?"weight_suffix":"currency_suffix")},multipleCountries:function(){var t=e.uniq(l.pluck("country"));return t.length>1}}}};var l=new i.chooser.fullCollection;l.fetch(),s.prototype.initialize.apply(this,arguments)},createModel:function(){}});return a}),_wAMD.define("commerce/editor/components/chooser/CategoryChooser",["jquery","editor/app","commerce/editor/collection/Category","components/chooser/Chooser"],function(e,t,i,n){var o=n.extend({initialize:function(o){var s=t.commerce.storefrontSettings.get("storefront_category_id");o.chooser={foreignKey:"categories",fullCollection:i,orderIdsKey:"preferred_order_category_ids",blacklist:[s],attrs:{id:"site_category_id",relation:o.reverseRelationKey},text:e.extend({list:_W.tl("Categories"),select:_W.tl("Select Categories"),create:_W.tl("Add a catgegory"),noneChosen:_W.tl("No categories chosen."),noneFound:_W.tl("No categories found."),hidden:_W.tl("Category Hidden")},o.text||{})},n.prototype.initialize.apply(this,arguments)},createModel:function(){t.vent.trigger("store:category:list"),t.vent.trigger("store:category:add")}});return o}),_wAMD.define("tpl!commerce/editor/store/coupon/detail/layout",[],function(){return'<div class="title-bar">	\n	<div class="buttons">\n		<!--\n		<button class="copy-product btn-com btn-icon-left">\n			<span class="w-icon-plus"></span>\n			{{#tl}}Copy Existing{{/tl}}\n		</button>\n		-->\n	</div>\n\n	<button class="back btn-com btn-back">{{#tl}}Back{{/tl}}</button>\n\n	<h1>\n		{{#isNew}}\n			{{#tl}}Add Coupon{{/tl}}\n		{{/isNew}}\n		{{^isNew}}\n			{{#tl}}Edit Coupon{{/tl}}\n		{{/isNew}}\n	</h1>\n</div>\n\n{{>commerce/editor/store/coupon/buy-now-warning}}\n\n<div class="info scaffold-com">\n	<div class="section">\n		<table>\n			<tbody>\n				<tr>\n					<td class="coupon-code">\n						<label class="label" for="coupon-code">{{#tl}}Coupon Code{{/tl}}</label>\n						<input type="text" id="coupon-code" name="code" value="{{code}}" placeholder="{{#esc_attr}}{{#tl}}Enter specific code{{/tl}}{{/esc_attr}}">\n					</td>\n					<td>\n						<label class="label" for="coupon-available">{{#tl}}Number Available{{/tl}}</label><br>\n						<input type="text" id="coupon-available" value="{{num_available}}" name="num_available">\n					</td>\n					<td class="coupon-checkbox">\n						<input type="checkbox" id="coupon-unlimited-available" name="unlimited-available" {{^num_available}}checked{{/num_available}} data-disable-target="num_available">\n						<label for="coupon-unlimited-available">{{#tl}}Unlimited{{/tl}}</label>\n					</td>\n				</tr>\n			</tbody>\n		</table>\n		<table>\n			<tbody>\n				<tr>\n					<td>\n						<label class="label">{{#tl}}Dates Available{{/tl}}</label>\n						<div class="input-prepend">\n							<span class="add-on date">{{#tl}}First Day{{/tl}}</span>\n							<input data-provide="datepicker" data-date-orientation="top auto" data-date-autoclose="true" data-date-parent-element="#site-store-container" data-date-format="{{date_format}}" type="text" name="start_date" value="{{#start_date}}{{format_start_date}}{{/start_date}}" placeholder="{{placeholder_date}}">\n						</div>\n					</td>\n					<td>\n						<label class="label">&nbsp;</label>\n						<div class="input-prepend">\n							<span class="add-on date">{{#tl}}Last Day{{/tl}}</span>\n							<input data-provide="datepicker" data-date-orientation="top auto" data-date-autoclose="true" data-date-parent-element="#site-store-container" data-date-format="{{date_format}}" type="text" name="end_date" value="{{#end_date}}{{format_end_date}}{{/end_date}}" placeholder="{{placeholder_date}}">\n						</div>\n					</td>\n					<td class="coupon-checkbox">\n						<input type="checkbox" id="coupon-never-expires" name="never-expires" {{^end_date}}checked{{/end_date}} data-disable-target="end_date">\n						<label for="coupon-never-expires">{{#tl}}Never Expires{{/tl}}</label>\n					</td>\n				</tr>\n			</tbody>\n		</table>\n		<div class="sub-title-bar sub-title-separator inner-subtitle">\n			<h2>{{#tl}}Coupon Criteria{{/tl}}</h2>\n			<h3>{{#tl}}Select the type of discount and its conditions{{/tl}}</h3>\n		</div>\n		<table>\n			<tbody>\n				<tr>\n					<td class="coupon-input-select coupon-type-select">\n						<label class="label" for="coupon-type">{{#tl}}Type{{/tl}}</label>\n						<br/>\n						<div class="coupon-input-select-wrapper">\n							<select name="type" id="coupon-type">\n								{{#typeOptions}}\n								<option value="{{value}}" {{typeSelected}}>{{{text}}}</option>\n								{{/typeOptions}}\n							</select>\n						</div>\n					</td>\n\n					<td id="shipping-rate-section" class="coupon-input criteria-select">\n						<label class="label">{{#tl}}Shipping Rates{{/tl}}</label><br>\n						<div class="shipping-rates-region"></div>\n					</td>\n\n					<td class="coupon-input coupon-amount-absolute">\n						<label class="label absolute">{{#tl}}Amount{{/tl}}</label>\n						<br/>\n						<span class="input-absolute USD">\n							<input type="text" id="coupon-amount-absolute" name="amount" value="{{amount}}">\n						</span>\n					</td>\n\n					<td class="coupon-input coupon-amount-percent">\n						<label class="label percent">{{#tl}}Percent{{/tl}}</label>\n						<br/>\n						<span class="input-percent">\n							<input type="text" id="coupon-amount-percent" name="amount" value="{{amount}}">\n						</span>\n					</td>\n\n					<td class="coupon-input-select coupon-for-select">\n						<label class="label" for="coupon-for">{{#tl}}For{{/tl}}</label>\n						<br/>\n						<div class="coupon-input-select-wrapper">\n							<select name="criteria" id="coupon-for">\n								{{#criteriaOptions}}\n								<option value="{{value}}" {{criteriaSelected}}>{{text}}</option>\n								{{/criteriaOptions}}\n							</select>\n						</div>\n					</td>\n\n					<td id="total-over-section" class="price-over criteria-select">\n						<label for="label coupon-total-over">{{#tl}}Price Over{{/tl}}</label><br>\n						<span class="input-currency USD">\n							<input type="text" id="coupon-total-over" name="total_over" value="{{criteria_amount}}">\n						</span>\n					</td>\n\n					<td id="category-section" class="coupon-input criteria-select">\n						<label class="label">{{#tl}}Select Categories{{/tl}}</label><br>\n						<div class="categories-region">{{! categoriesRegion }}</div>\n					</td>\n\n					<td id="product-section" class="criteria-select">\n						<label class="label">{{#tl}}Select Products{{/tl}}</label><br>\n						<div class="products-region">{{! productsRegion }}</div>\n					</td>\n				</tr>\n			</tbody>\n		</table>\n	</div>\n</div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	{{^isNew}}\n		<button class="delete-coupon btn-com btn-danger">\n			{{#tl}}Delete Coupon{{/tl}}\n		</button>\n	{{/isNew}}\n\n	<div class="main-actions">\n		<button class="cancel-coupon-edit btn-com">{{#tl}}Cancel{{/tl}}</button>\n		<button class="save-coupon btn-com btn-success">{{#tl}}Save Coupon{{/tl}}</button>\n	</div>\n</div>\n\n<div class="dialog-region"></div>'}),_wAMD.define("commerce/editor/store/coupon/detail/CouponDetailView",["underscore","jquery","backbone-all","mustache","moment","editor/app","commerce/editor/model/Coupon","commerce/editor/components/chooser/ShippingRateChooser","commerce/editor/components/chooser/CategoryChooser","commerce/editor/components/chooser/ProductChooser","components/regions/Dialog","components/views/ConfirmView","tpl!commerce/editor/store/coupon/detail/layout","tpl!editor/loading","util/ui/wLoadButton","util/ui/wSelectbox","util/ui/wDatepicker"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p){var f={layout:n.compile(h),loading:n.compile(p)},m=i.Marionette.Layout.extend({className:"coupon-detail",template:f.layout,regions:{shippingRatesRegion:".shipping-rates-region",productsRegion:".products-region",categoriesRegion:".categories-region",dialogRegion:u.extend({el:".dialog-region"})},ui:{saveButton:".save-product",deleteButton:".delete-product",footerBar:".footer-bar",amount:"input[name=amount]",amountParent:".coupon-amount",shippingRate:"#shipping-rate-section",amountPercent:".coupon-amount-percent",amountAbsolute:".coupon-amount-absolute",unlimited:"input[name=unlimited-available]",numAvailable:"input[name=num_available]",startDate:"input[name=start_date]",endDate:"input[name=end_date]",code:"input[name=code]",type:"select[name=type]",selects:"select",criteria:"select[name=criteria]",checkboxes:"input[type=checkbox]",criteriaSelect:".criteria-select",totalOver:"#total-over-section",productsSelect:"#product-section",categoriesSelect:"#category-section",changeStoreMode:".change-store-mode"},events:{"change input":"updateModel","change select":"updateModel","click .back":"cancelEdit","click .save-coupon":"saveCoupon","click .delete-coupon":"deleteCoupon","click .cancel-coupon-edit":"cancelEdit"},modelEvents:{"change:type":"updateUI","change:criteria":"updateUI","change:end_date":"updateUI","change:num_available":"updateUI"},templateHelpers:function(){var e=this,t=s.commerce.storefrontSettings.get("currency_prefix");return{isNew:function(){return e.model.isNew()},unlimitedAvailable:function(){return null===this.num_available},selectIfType:function(){return function(e){return e==this.type?"selected":""}},typeOptions:[{value:"percent",text:_W.tl("% Discount")},{value:"absolute",text:t+" "+_W.tl("Discount")},{value:"shipping",text:_W.tl("Free Shipping")}],typeSelected:function(){return this.value==e.model.get("type")?"selected":""},criteriaOptions:[{value:"all",text:_W.tl("All Orders")},{value:"total_over",text:_W.tl("Orders Over")},{value:"categories",text:_W.tl("Specific Categories")},{value:"products",text:_W.tl("Specific Products")}],criteriaSelected:function(){return this.value==e.model.get("criteria")?"selected":""},buyItNowEnabled:function(){return"buynow"==s.commerce.storefrontSettings.get("store_mode")},date_format:function(){return _W.siteContext.jdateFormat},placeholder_date:function(){return o().format(_W.siteContext.mdateFormat)},format_start_date:function(){return this.format_date(e.model.get("start_date"))},format_end_date:function(){return this.format_date(e.model.get("end_date"))},format_date:function(e){return o.unix(e).format(_W.siteContext.mdateFormat)}}},initialize:function(e){var t=this;e=e||{};var n=r.getID(e.model);n?(t.model=r.findOrCreate({site_coupon_id:n}),startWait(),t.loading=!0,t.template=f.loading,t.model.fetch().done(function(){endWait(),t.loading=!1,t.template=f.layout,t.render()}).fail(function(){})):t.model=new r,t.on("show:leaving",function(){t.ui.footerBar.hide()}),i.Validation.bind(t)},onRender:function(){var e=this;e.rendered=!0,e.loading||(e.shippingRatesRegion.show(new a({model:e.model,reverseRelationKey:"coupons",mini:!0})),e.categoriesRegion.show(new l({model:e.model,reverseRelationKey:"coupons",mini:!0})),e.productsRegion.show(new c({model:e.model,reverseRelationKey:"coupons",mini:!0})),e.ui.saveButton.wLoadButton(),e.ui.deleteButton.wLoadButton(),e.ui.checkboxes.wCheckbox(),e.ui.selects.wSelectbox({theme:"com"}),e.updateUI(),e.ui.changeStoreMode.click(function(e){e.preventDefault(),s.vent.triggerCascade("store:setting:general:list")}))},onClose:function(){this.model.rollback()},onShowAnimated:function(e){return this.loading?(this.listenToOnce(this,"render",function(){this.onShowAnimated(e)}),void 0):(this.ui.footerBar.show(),void 0)},updateUI:function(){var t=this,i=t.ui,n=t.model,s=n.get("type"),r=n.get("criteria"),a=e.isNull(n.get("end_date")),l=e.isNull(n.get("num_available"));i.amountPercent.toggle("percent"==s),i.amountAbsolute.toggle("absolute"==s),i.shippingRate.toggle("shipping"==s),i.totalOver.toggle("total_over"==r),i.categoriesSelect.toggle("categories"==r),i.productsSelect.toggle("products"==r),i.unlimited.prop("checked",l),i.numAvailable.prop("disabled",l),i.endDate.prop("disabled",a),l&&i.numAvailable.val(_W.tl("Unlimited")),a&&i.endDate.val(_W.tl("—-")),""===i.startDate.val()&&i.startDate.prop("placeholder",o().format(_W.siteContext.mdateFormat))},updateModel:function(e){var t=this,i=t.$(e.target),n=i.attr("name"),s=t.fieldValue(i);switch(n){case"code":case"num_available":case"type":case"amount":case"criteria":t.model.set(n,s);break;case"start_date":case"end_date":var r=o(s,_W.siteContext.mdateFormat);r&&!r.isValid()&&(r=!1),t.model.set(n,r?r.unix():null);break;case"unlimited-available":var a=i.prop("checked"),l=i.attr("data-disable-target"),c=t.$("input[name="+l+"]");c.prop("disabled",a),a?s=null:(c.val(""),s=""),t.model.set(l,s);break;case"never-expires":var a=i.prop("checked"),l=i.attr("data-disable-target"),c=t.$("input[name="+l+"]");if(c.prop("disabled",a),a)s=null;else{var r=o();c.val(r.format(_W.siteContext.mdateFormat)),s=r.unix()}t.model.set(l,s);break;case"total_over":t.model.set("criteria_amount",s)}},fieldValue:function(e){return t.trim(e.val())||null},validateCoupon:function(){this.clearFormErrors();var t=this.model,i=t.get("type"),n=t.get("criteria");e.extend(t.validation,{amount:"shipping"!=i?{required:!0,pattern:"number"}:null,shipping_rate_ids:"shipping"==i?{required:!0}:null,criteria_amount:"total_over"==n?{required:!0}:null,category_ids:"categories"==n?{required:!0}:null,product_ids:"products"==n?{required:!0}:null});var o=t.validate();return this.displayError(o),!e.size(o)},displayError:function(i){e.isString(i)&&(i={general:i}),e.each(i,function(e,i){var n,o=t('<div class="form-error alert alert-error" />');switch(n=e,i){case"code":n=""===this.ui.code.val()?_W.tl("Code is required"):_W.tl("Only letters, numbers, or !$.%&@#_+ allowed");break;case"category_ids":n=_W.tl("Select at least one category");break;case"product_ids":n=_W.tl("Select at least one product");break;case"criteria_amount":n=_W.tl("Amount is required")}switch(o.text(n),i){case"amount":this.$('[name="'+i+'"]').addClass("error").parent().after(o);break;case"criteria_amount":this.$('[name="total_over"]').addClass("error").parent().after(o);break;case"shipping_rate_ids":this.$(".shipping-rates-region .add-container").addClass("error").after(o);break;case"category_ids":this.$(".categories-region .add-container").addClass("error").after(o);break;case"product_ids":this.$(".products-region .add-container").addClass("error").after(o);break;case"general":this.$(".info > .section").prepend(o);break;default:this.$('[name="'+i+'"]').addClass("error").after(o)}},this)},clearFormErrors:function(){this.$(".form-error.alert-error").remove(),this.$(".error").removeClass("error")},saveCoupon:function(){var e=this;if(e.validateCoupon()){e.ui.saveButton.wLoadButton("startWait");var t=e.model.commit();t.done(function(){e.ui.saveButton.wLoadButton("endWait"),e.ui.footerBar.hide(),s.commerce.vent.trigger("store:coupon:list")}),t.fail(function(t){e.displayError(t)})}},deleteCoupon:function(){var e=this,t=new d({message:_W.tl("Are you sure you want to delete this item?"),callback:function(t){t&&(e.ui.deleteButton.wLoadButton("startWait"),e.model.destroy().done(function(){e.ui.deleteButton.wLoadButton("endWait"),e.cancelEdit()}))}});e.dialogRegion.show(t)},cancelEdit:function(){s.commerce.vent.trigger("store:coupon:list",{reload:!1})}});return m}),_wAMD.define("commerce/editor/store/coupon/CouponView",["jquery","backbone-all","editor/app","commerce/editor/collection/Coupon","components/views/ListDetailView","./list/CouponListView","./detail/CouponDetailView","components/regions/Dialog","commerce/editor/store/BusinessWarningView","commerce/editor/store/general/pagination/PaginationView"],function(e,t,i,n,o,s,r,a,l,c){var u=o.prototype,d=o.extend({listDetailOptions:{ListView:s,DetailView:r,eventModelName:"coupon"},initialize:function(){var e=this;u.initialize.apply(e,arguments),c.resetState(n),e.listenTo(i.commerce.vent,{"store:coupon:list":e.list,"store:coupon:edit":e.edit,"store:coupon:add":e.add,"store:coupon:copy":e.copy})},onRender:function(){var n=this;u.onRender.apply(n,arguments),Weebly.Restrictions.hasAccess("com_coupons")||(n.addRegions({dialogRegion:a.extend({el:e('<div class="dialog">').appendTo(n.$el)})}),n.dialogRegion.show(new l({model:new t.Model({warning:_W.tl("You must upgrade to the Business Package to use coupons."),feature:"com_coupons",cancel:function(){i.vent.trigger("store:dashboard:list")}})})))}});return d}),_wAMD.define("commerce/editor/store/coupon/module",["jquery","backbone-all","editor/app","commerce/editor/model/Coupon","./CouponView"],function(e,t,i,n,o){i.module("commerce.store.coupon",function(e){var s={view:function(){i.commerce.store.layout.mainRegion.show(new o({app:i.commerce,namespace:"store",regionClass:"commerce-store-main-region"}))},list:function(){t.preventClose(function(){r.navigate("store/coupon"),s.view(),i.commerce.vent.trigger("store:coupon:list")})},edit:function(e){e=e||{},t.preventClose(function(){var t;e._class?t=e:e.coupon?t=e.coupon:e.site_coupon_id&&(t=n.findOrCreate({site_coupon_id:e.site_coupon_id})),t.fetch().done(function(e){r.navigate("store/coupons/"+e.get("site_coupon_id"))}).fail(function(){}),i.commerce.vent.trigger("store:coupon:edit",e)})},add:function(e){t.preventClose(function(){r.navigate("store/coupon/new"),i.commerce.vent.trigger("store:coupon:add",e)})}};e.on("start",function(){i.vent.on({"store:coupon":function(){s.view()},"store:coupon:list":function(){s.list()},"store:coupon:add":function(e){s.add(e)},"store:coupon:edit":function(e){s.edit(e)}})});var r=new t.Marionette.AppRouter({controller:s,appRoutes:{"store/coupons":"list","store/coupons/new":"add","store/coupons/:id":"edit"}})})}),function(e,t){function i(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function n(e){return d?d(e):"[object Array]"===h.call(e)}function o(e){return e&&"[object Object]"===h.call(e)}function s(e,t){var i;e=e||{},t=t||{};for(i in t)t.hasOwnProperty(i)&&null==e[i]&&(e[i]=t[i]);return e}function r(e,t,i){var n,o,s=[];if(!e)return s;if(u&&e.map===u)return e.map(t,i);for(n=0,o=e.length;o>n;n++)s[n]=t.call(i,e[n],n,e);return s}function a(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function l(e){var t=c.settings.currency.format;return"function"==typeof e&&(e=e()),i(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:i(t)?c.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var c={};c.version="0.3.2",c.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var u=Array.prototype.map,d=Array.isArray,h=Object.prototype.toString,p=c.unformat=c.parse=function(e,t){if(n(e))return r(e,function(e){return p(e,t)});if(e=e||0,"number"==typeof e)return e;t=t||c.settings.number.decimal;var i=new RegExp("[^0-9-"+t+"]",["g"]),o=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(i,"").replace(t,"."));return isNaN(o)?0:o},f=c.toFixed=function(e,t){t=a(t,c.settings.number.precision);var i=Math.pow(10,t);return(Math.round(c.unformat(e)*i)/i).toFixed(t)},m=c.formatNumber=function(e,t,i,l){if(n(e))return r(e,function(e){return m(e,t,i,l)});e=p(e);var u=s(o(t)?t:{precision:t,thousand:i,decimal:l},c.settings.number),d=a(u.precision),h=0>e?"-":"",g=parseInt(f(Math.abs(e||0),d),10)+"",v=g.length>3?g.length%3:0;return h+(v?g.substr(0,v)+u.thousand:"")+g.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+u.thousand)+(d?u.decimal+f(Math.abs(e),d).split(".")[1]:"")},g=c.formatMoney=function(e,t,i,u,d,h){if(n(e))return r(e,function(e){return g(e,t,i,u,d,h)});e=p(e);var f=s(o(t)?t:{symbol:t,precision:i,thousand:u,decimal:d,format:h},c.settings.currency),v=l(f.format),b=e>0?v.pos:0>e?v.neg:v.zero;return b.replace("%s",f.symbol).replace("%v",m(Math.abs(e),a(f.precision),f.thousand,f.decimal))};c.formatColumn=function(e,t,u,d,h,f){if(!e)return[];var g=s(o(t)?t:{symbol:t,precision:u,thousand:d,decimal:h,format:f},c.settings.currency),v=l(g.format),b=v.pos.indexOf("%s")<v.pos.indexOf("%v")?!0:!1,y=0,w=r(e,function(e){if(n(e))return c.formatColumn(e,g);e=p(e);var t=e>0?v.pos:0>e?v.neg:v.zero,i=t.replace("%s",g.symbol).replace("%v",m(Math.abs(e),a(g.precision),g.thousand,g.decimal));return i.length>y&&(y=i.length),i});return r(w,function(e){return i(e)&&e.length<y?b?e.replace(g.symbol,g.symbol+new Array(y-e.length+1).join(" ")):new Array(y-e.length+1).join(" ")+e:e})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.accounting=c):"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("accounting",[],function(){return c}):(c.noConflict=function(i){return function(){return e.accounting=i,c.noConflict=t,c}}(e.accounting),e.accounting=c)}(this),_wAMD.define("tpl!commerce/editor/store/setting/general",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}Store Settings{{/tl}}</h1>\n</div>\n\n<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}General{{/tl}}</h2>\n	<h3>{{#tl}}The basic settings of your store{{/tl}}</h3>\n</div>\n\n<div class="dd-option-list">\n	<div class="dd-option-container">\n		<div class="dd-option-label">{{#tl}}Currency{{/tl}}:</div>\n		<div class="dd-option">\n			{{#hasPaymentGateway}}\n				<b>{{currency}}</b> | <span class="">{{#tl}}Disconnect from {{gateway}} to change store currency{{/tl}}</span>\n			{{/hasPaymentGateway}}\n			{{^hasPaymentGateway}}\n				<select name="currency">\n					{{#currencies}}\n					<option value="{{abbreviation}}" {{#isCurrentCurrency}}selected{{/isCurrentCurrency}}>\n						{{abbreviation}} - {{name}}\n					</option>\n					{{/currencies}}\n				</select>\n			{{/hasPaymentGateway}}\n		</div>\n	</div>\n	<div class="dd-option-container">\n		<div class="dd-option-label">{{#tl}}Weight Unit{{/tl}}:</div>\n		<div class="dd-option">\n			<select name="weight_unit">\n				{{#weights}}\n				<option value="{{weight_suffix}}" {{#isCurrentWeight}}selected{{/isCurrentWeight}}>\n					{{name}} - {{example}}\n				</option>\n				{{/weights}}\n			</select>\n		</div>\n	</div>\n	<div class="dd-option-container">\n		<div class="dd-option-label">{{#tl}}Store Mode{{/tl}}:</div>\n		<div class="dd-option">\n			<select name="store_mode">\n				{{#store_mode}}\n				<option value="{{mode}}" {{#selected}}selected{{/selected}}>{{name}}</option>\n				{{/store_mode}}\n			</select>\n		</div>\n	</div>\n</div>\n\n<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Store Information{{/tl}}</h2>\n	<h3>{{#tl}}This will appear on your invoices{{/tl}}</h3>\n</div>\n<div class="address-form section">\n	<label class="label">\n		{{#tl}}Company Name{{/tl}}\n		<input type="text" name="company_name" value="{{company_name}}" />\n	</label><br>\n	\n	<label class="label">\n		{{#tl}}Street{{/tl}}\n		<input type="text" name="store_address_street" value="{{store_address_street}}" />\n	</label><br>\n	\n	<table>\n		<tbody>\n			<tr>\n				<td>\n					<label class="label">\n						{{#tl}}City{{/tl}}\n						<input type="text" name="store_address_city" value="{{store_address_city}}" />\n					</label><br>\n				</td>\n				<td>\n					<label class="label">\n						{{#tl}}Postal / Zip Code{{/tl}}\n						<input type="text" name="store_address_postal_code" value="{{store_address_postal_code}}" />\n					</label><br>\n				</td>\n			</tr>\n			<tr>\n				<td>\n					<label class="label">\n						{{#tl}}Country{{/tl}}\n						<select name="store_address_country">\n							{{#countries}}\n								{{^exclude}}\n									<option value="{{cca2}}" {{#isCurrentCountry}}selected{{/isCurrentCountry}}>{{name}}</option>\n								{{/exclude}}	\n							{{/countries}}\n						</select>\n					</label><br>\n				</td>\n				<td>\n					<label class="label">\n						{{#tl}}State / Province{{/tl}}\n						{{#hasStates}}\n							<select name="store_address_state">\n								{{#states}}\n									<option value="{{abbr}}" {{#isCurrentState}}selected{{/isCurrentState}}>{{name}}</option>\n								{{/states}}\n							</select>\n						{{/hasStates}}\n						{{^hasStates}}\n							<input type="text" name="store_address_state" value="{{store_address_state}}" />\n						{{/hasStates}}\n					</label><br>\n				</td>\n			</tr>\n			<tr>\n				<td>\n					<label class="label">\n						{{#tl}}Email{{/tl}}\n						<input type="text" name="customer_support_email" value="{{customer_support_email}}" />\n					</label>\n				</td>\n				<td>\n					<label class="label">\n						{{#tl}}Phone Number{{/tl}}\n						<input type="text" name="phone_number" value="{{phone_number}}" />\n					</label>\n				</td>\n			</tr>\n		</tbody>\n	</table>\n	\n</div>\n\n\n<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Store Policies{{/tl}}</h2>\n	<h3>{{#tl}}This will appear on your cart and checkout pages{{/tl}}</h3>\n</div>\n\n<div class="policy-form section">\n	<div class="policy richtext-area">\n		<label class="label richtext">{{#tl}}Return Policy{{/tl}}</label>\n		<div id="site-com-return-policy" name="return_policy" class="textarea-input" placeholder="">{{{return_policy}}}</div>\n	</div>\n\n	<div class="policy richtext-area">\n		<label class="label richtext">{{#tl}}Shipping Policy{{/tl}}</label>\n		<div id="site-com-shipping-policy" name="shipping_policy" class="textarea-input" placeholder="">{{{shipping_policy}}}</div>\n	</div>\n</div>\n\n	<div class="sub-title-bar sub-title-separator inner-subtitle">\n		<h2>{{#tl}}Note to Seller{{/tl}}</h2>\n		<h3>{{#tl}}Display a text box for customers to leave a note during checkout{{/tl}}</h3>\n	</div>\n	<div class="dd-option-list">\n		<div class="dd-option-container">\n			<div class="dd-option-wide-label dd-option-wide-legacy-label">{{#tl}}Note to Seller{{/tl}}:</div>\n			<div class="dd-option">\n				<div class="toggle-switch control light">\n					<input type="checkbox" id="site-com-checkout-text-toggle" class="toggle-field" name=\'checkout_text_input\'>\n					<label for="site-com-checkout-text-toggle">\n						<div class="background-container">\n							<div class="background-slider">\n								<span class="label-on">{{#tl}}ON{{/tl}}</span>\n								<span class="label-off">{{#tl}}OFF{{/tl}}</span>\n							</div>\n						</div>\n						<span class="blob">\n							<span class="blob-inner"></span>\n						</span>\n					</label>\n				</div>\n			</div>\n		</div>\n	</div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save-settings btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save Settings{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>\n'}),_wAMD.define("json",["text"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,""),e+=e.indexOf("?")<0?"?":"&",e+CACHE_BUST_QUERY_PARAM+"="+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM="bust",CACHE_BUST_FLAG="!bust",jsonParse="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse:function(val){return eval("("+val+")")},buildMap={};return{load:function(e,t,i,n){!n.isBuild||n.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+"=")?text.get(t.toUrl(e),function(t){if(n.isBuild)buildMap[e]=t,i(t);else{var o=jsonParse(t);i(o)}},i.error,{accept:"application/json"}):i(null)},normalize:function(e){return-1===e.indexOf(CACHE_BUST_FLAG)?e:cacheBust(e)},write:function(e,t,i){if(t in buildMap){var n=buildMap[t];i('define("'+e+"!"+t+'", function(){ return '+n+";});\n")}}}}),_wAMD.define("json!definitions/currencies.json",function(){return[{abbreviation:"USD",symbol:"$",name:"U.S. Dollars",gateways:["PayPal","Stripe","AuthorizeNet","Square"],stripeCountries:["US","CA","UK","FR","NL","IE","BE","DE","ES","LU"]},{abbreviation:"EUR",symbol:"&euro;",name:"Euros",gateways:["PayPal","Stripe"],stripeCountries:["UK","FR","NL","IE","BE","DE","ES","LU"]},{abbreviation:"GBP",symbol:"&pound;",name:"Pounds Sterling",gateways:["PayPal","Stripe"],stripeCountries:["UK","FR","NL","IE","BE","DE","ES","LU"]},{abbreviation:"JPY",symbol:"&yen;",name:"Yen",gateways:["PayPal"]},{abbreviation:"AUD",symbol:"A$",name:"Australian Dollars",gateways:["PayPal"]},{abbreviation:"CAD",symbol:"C$",name:"Canadian Dollars",gateways:["PayPal","Stripe"],stripeCountries:["CA"]},{abbreviation:"NZD",symbol:"$",name:"New Zealand Dollars",gateways:["PayPal"]},{abbreviation:"CHF",symbol:"CHF",name:"Swiss Franc",gateways:["PayPal"]},{abbreviation:"HKD",symbol:"$",name:"Hong Kong Dollars",gateways:["PayPal"]},{abbreviation:"SGD",symbol:"$",name:"Singapore Dollars",gateways:["PayPal"]},{abbreviation:"SEK",symbol:"kr",name:"Swedish Krona",gateways:["PayPal"]},{abbreviation:"DKK",symbol:"kr",name:"Danish Krone",gateways:["PayPal"]},{abbreviation:"PLN",symbol:"z&#322;",name:"Polish Zloty",gateways:["PayPal"]},{abbreviation:"NOK",symbol:"kr",name:"Norwegian Krone",gateways:["PayPal"]},{abbreviation:"HUF",symbol:"Ft",name:"Hungarian Forint",gateways:["PayPal"]},{abbreviation:"CZK",symbol:"K&#268;",name:"Czech Koruna",gateways:["PayPal"]},{abbreviation:"ILS",symbol:"&#8362;",name:"Israeli Shekel",gateways:["PayPal"]},{abbreviation:"MXN",symbol:"Mex$",name:"Mexican Peso",gateways:["PayPal"]},{abbreviation:"MYR",symbol:"MYR",name:"Malaysian Ringgits",gateways:["PayPal"]},{abbreviation:"BRL",symbol:"R$",name:"Brazilian Real",gateways:["PayPal"]},{abbreviation:"PHP",symbol:"&#8369;",name:"Philippine Peso",gateways:["PayPal"]},{abbreviation:"RUB",symbol:"&#8381;",name:"Russian Ruble",gateways:["PayPal"]},{abbreviation:"THB",symbol:"&#3647;",name:"Thai Baht",gateways:["PayPal"]},{abbreviation:"TRY",symbol:"TL",name:"Turkish Lira",gateways:["PayPal"]},{abbreviation:"TWD",symbol:"NT$",name:"Taiwan New Dollar",gateways:["PayPal"]}]
}),_wAMD.define("json!definitions/weights.json",function(){return[{code:"si",name:"Imperial",example:"Pound, inch",weight_suffix:"lb"},{code:"metric",name:"Metric",example:"Kilogram, centimeter",weight_suffix:"kg"}]}),_wAMD.define("json!definitions/countries.json",function(){return[{name:"United States",tld:".us",cca2:"US",ccn3:840,cca3:"USA",currency:"USD,USN,USS","calling-code":"1","alt-spellings":"US,USA,United States of America",relevance:3.5,region:"Americas",subregion:"Northern America"},{name:"Canada",tld:".ca",cca2:"CA",ccn3:124,cca3:"CAN",currency:"CAD","calling-code":"1","alt-spellings":"CA",relevance:2,region:"Americas",subregion:"Northern America"},{name:"United Kingdom",tld:".gb",cca2:"GB",ccn3:826,cca3:"GBR",currency:"GBP","calling-code":"44","alt-spellings":"GB,Great Britain,England,UK,Wales,Scotland,Northern Ireland",relevance:2.5,region:"Europe",subregion:"Northern Europe"},{name:"Afghanistan",tld:".af",cca2:"AF",ccn3:4,cca3:"AFG",currency:"AFN","calling-code":"93","alt-spellings":"AF,Afġānistān",relevance:0,region:"Asia",subregion:"Southern Asia"},{name:"Åland Islands",tld:".ax",cca2:"AX",ccn3:248,cca3:"ALA",currency:"EUR","calling-code":"358","alt-spellings":"AX,Aaland,Aland",relevance:.5,region:"Europe",subregion:"Northern Europe"},{name:"Albania",tld:".al",cca2:"AL",ccn3:8,cca3:"ALB",currency:"ALL","calling-code":"355","alt-spellings":"AL,Shqipëri,Shqipëria,Shqipnia",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Algeria",tld:".dz",cca2:"DZ",ccn3:12,cca3:"DZA",currency:"DZD","calling-code":"213","alt-spellings":"DZ,al-Jazā'ir",relevance:0,region:"Africa",subregion:"Northern Africa"},{name:"American Samoa",tld:".as",cca2:"AS",ccn3:16,cca3:"ASM",currency:"USD","calling-code":"1684","alt-spellings":"AS,Amerika Sāmoa",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Andorra",tld:".ad",cca2:"AD",ccn3:20,cca3:"AND",currency:"EUR","calling-code":"376","alt-spellings":"AD",relevance:.5,region:"Europe",subregion:"Southern Europe"},{name:"Angola",tld:".ao",cca2:"AO",ccn3:24,cca3:"AGO",currency:"AOA","calling-code":"244","alt-spellings":"AO",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Anguilla",tld:".ai",cca2:"AI",ccn3:660,cca3:"AIA",currency:"XCD","calling-code":"1264","alt-spellings":"AI",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Antarctica",exclude:!0,tld:".aq",cca2:"AQ",ccn3:10,cca3:"ATA",currency:"","calling-code":"null","alt-spellings":"AQ",relevance:.5,region:"",subregion:""},{name:"Antigua and Barbuda",tld:".ag",cca2:"AG",ccn3:28,cca3:"ATG",currency:"XCD","calling-code":"1268","alt-spellings":"AG",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Argentina",tld:".ar",cca2:"AR",ccn3:32,cca3:"ARG",currency:"ARS","calling-code":"54","alt-spellings":"AR",relevance:0,region:"Americas",subregion:"South America"},{name:"Armenia",tld:".am",cca2:"AM",ccn3:51,cca3:"ARM",currency:"AMD","calling-code":"374","alt-spellings":"AM,Hayastan",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Aruba",tld:".aw",cca2:"AW",ccn3:533,cca3:"ABW",currency:"AWG","calling-code":"297","alt-spellings":"AW",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Australia",tld:".au",cca2:"AU",ccn3:36,cca3:"AUS",currency:"AUD","calling-code":"61","alt-spellings":"AU",relevance:1.5,region:"Oceania",subregion:"Australia,New Zealand"},{name:"Austria",tld:".at",cca2:"AT",ccn3:40,cca3:"AUT",currency:"EUR","calling-code":"43","alt-spellings":"AT,Österreich,Osterreich,Oesterreich",relevance:0,region:"Europe",subregion:"Western Europe"},{name:"Azerbaijan",tld:".az",cca2:"AZ",ccn3:31,cca3:"AZE",currency:"AZN","calling-code":"994","alt-spellings":"AZ",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Bahamas",tld:".bs",cca2:"BS",ccn3:44,cca3:"BHS",currency:"BSD","calling-code":"1242","alt-spellings":"BS",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Bahrain",tld:".bh",cca2:"BH",ccn3:48,cca3:"BHR",currency:"BHD","calling-code":"973","alt-spellings":"BH",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Bangladesh",tld:".bd",cca2:"BD",ccn3:50,cca3:"BGD",currency:"BDT","calling-code":"880","alt-spellings":"BD",relevance:2,region:"Asia",subregion:"Southern Asia"},{name:"Barbados",tld:".bb",cca2:"BB",ccn3:52,cca3:"BRB",currency:"BBD","calling-code":"1246","alt-spellings":"BB",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Belarus",tld:".by",cca2:"BY",ccn3:112,cca3:"BLR",currency:"BYR","calling-code":"375","alt-spellings":"BY",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Belgium",tld:".be",cca2:"BE",ccn3:56,cca3:"BEL",currency:"EUR","calling-code":"32","alt-spellings":"BE,België,Belgie,Belgien,Belgique",relevance:1.5,region:"Europe",subregion:"Western Europe"},{name:"Belize",tld:".bz",cca2:"BZ",ccn3:84,cca3:"BLZ",currency:"BZD","calling-code":"501","alt-spellings":"BZ",relevance:0,region:"Americas",subregion:"Central America"},{name:"Benin",tld:".bj",cca2:"BJ",ccn3:204,cca3:"BEN",currency:"XOF","calling-code":"229","alt-spellings":"BJ",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Bermuda",tld:".bm",cca2:"BM",ccn3:60,cca3:"BMU",currency:"BMD","calling-code":"1441","alt-spellings":"BM",relevance:.5,region:"Americas",subregion:"Northern America"},{name:"Bhutan",tld:".bt",cca2:"BT",ccn3:64,cca3:"BTN",currency:"BTN,INR","calling-code":"975","alt-spellings":"BT",relevance:0,region:"Asia",subregion:"Southern Asia"},{name:"Bolivia",tld:".bo",cca2:"BO",ccn3:68,cca3:"BOL",currency:"BOB,BOV","calling-code":"591","alt-spellings":"BO",relevance:0,region:"Americas",subregion:"South America"},{name:"Bonaire",exclude:!0,tld:".bq",cca2:"BQ",ccn3:535,cca3:"BES",currency:"USD","calling-code":"5997","alt-spellings":"BQ",relevance:0,region:"",subregion:""},{name:"Bosnia and Herzegovina",tld:".ba",cca2:"BA",ccn3:70,cca3:"BIH",currency:"BAM","calling-code":"387","alt-spellings":"BA",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Botswana",tld:".bw",cca2:"BW",ccn3:72,cca3:"BWA",currency:"BWP","calling-code":"267","alt-spellings":"BW",relevance:0,region:"Africa",subregion:"Southern Africa"},{name:"Bouvet Island",exclude:!0,tld:".bv",cca2:"BV",ccn3:74,cca3:"BVT",currency:"NOK","calling-code":"null","alt-spellings":"BV,Bouvetøya",relevance:0,region:"",subregion:""},{name:"Brazil",tld:".br",cca2:"BR",ccn3:76,cca3:"BRA",currency:"BRL","calling-code":"55","alt-spellings":"BR,Brasil",relevance:2,region:"Americas",subregion:"South America"},{name:"British Indian Ocean Territory",tld:".io",cca2:"IO",ccn3:86,cca3:"IOT",currency:"USD","calling-code":"246","alt-spellings":"IO",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Brunei Darussalam",tld:".bn",cca2:"BN",ccn3:96,cca3:"BRN",currency:"BND","calling-code":"673","alt-spellings":"BN",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Bulgaria",tld:".bg",cca2:"BG",ccn3:100,cca3:"BGR",currency:"BGN","calling-code":"359","alt-spellings":"BG",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Burkina Faso",tld:".bf",cca2:"BF",ccn3:854,cca3:"BFA",currency:"XOF","calling-code":"226","alt-spellings":"BF",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Burundi",tld:".bi",cca2:"BI",ccn3:108,cca3:"BDI",currency:"BIF","calling-code":"257","alt-spellings":"BI",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Cambodia",tld:".kh",cca2:"KH",ccn3:116,cca3:"KHM",currency:"KHR","calling-code":"855","alt-spellings":"KH",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Cameroon",tld:".cm",cca2:"CM",ccn3:120,cca3:"CMR",currency:"XAF","calling-code":"237","alt-spellings":"CM",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Cape Verde",tld:".cv",cca2:"CV",ccn3:132,cca3:"CPV",currency:"CVE","calling-code":"238","alt-spellings":"CV,Cabo",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Cayman Islands",tld:".ky",cca2:"KY",ccn3:136,cca3:"CYM",currency:"KYD","calling-code":"1345","alt-spellings":"KY",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Central African Republic",tld:".cf",cca2:"CF",ccn3:140,cca3:"CAF",currency:"XAF","calling-code":"236","alt-spellings":"CF",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Chad",tld:".td",cca2:"TD",ccn3:148,cca3:"TCD",currency:"XAF","calling-code":"235","alt-spellings":"TD,Tchad",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Chile",tld:".cl",cca2:"CL",ccn3:152,cca3:"CHL",currency:"CLF,CLP","calling-code":"56","alt-spellings":"CL",relevance:0,region:"Americas",subregion:"South America"},{name:"China",tld:".cn",cca2:"CN",ccn3:156,cca3:"CHN",currency:"CNY","calling-code":"86","alt-spellings":"CN,Zhongguo,Zhonghua,Peoples Republic",relevance:0,region:"Asia",subregion:"Eastern Asia"},{name:"Christmas Island",tld:".cx",cca2:"CX",ccn3:162,cca3:"CXR",currency:"AUD","calling-code":"61","alt-spellings":"CX",relevance:.5,region:"Oceania",subregion:"Australia,New Zealand"},{name:"Cocos (Keeling) Islands",tld:".cc",cca2:"CC",ccn3:166,cca3:"CCK",currency:"AUD","calling-code":"61","alt-spellings":"CC",relevance:0,region:"Oceania",subregion:"Australia,New Zealand"},{name:"Colombia",tld:".co",cca2:"CO",ccn3:170,cca3:"COL",currency:"COP,COU","calling-code":"57","alt-spellings":"CO",relevance:0,region:"Americas",subregion:"South America"},{name:"Comoros",tld:".km",cca2:"KM",ccn3:174,cca3:"COM",currency:"KMF","calling-code":"269","alt-spellings":"KM",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Republic of the Congo",tld:".cg",cca2:"CG",ccn3:178,cca3:"COG",currency:"XAF","calling-code":"242","alt-spellings":"CG",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Democratic Republic of the Congo",tld:".cd",cca2:"CD",ccn3:180,cca3:"COD",currency:"CDF","calling-code":"243","alt-spellings":"CD,Congo-Brazzaville,Repubilika ya Kongo",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Cook Islands",tld:".ck",cca2:"CK",ccn3:184,cca3:"COK",currency:"NZD","calling-code":"682","alt-spellings":"CK",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Costa Rica",tld:".cr",cca2:"CR",ccn3:188,cca3:"CRI",currency:"CRC","calling-code":"506","alt-spellings":"CR",relevance:0,region:"Americas",subregion:"Central America"},{name:"Côte d'Ivoire",tld:".ci",cca2:"CI",ccn3:384,cca3:"CIV",currency:"XOF","calling-code":"225","alt-spellings":"CI,Cote,dIvoire",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Croatia",tld:".hr",cca2:"HR",ccn3:191,cca3:"HRV",currency:"HRK","calling-code":"385","alt-spellings":"HR,Hrvatska",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Cuba",exclude:!0,tld:".cu",cca2:"CU",ccn3:192,cca3:"CUB",currency:"CUC,CUP","calling-code":"53","alt-spellings":"CU",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Curaçao",tld:".cw",cca2:"CW",ccn3:531,cca3:"CUW",currency:"ANG","calling-code":"5999","alt-spellings":"CW,Curacao",relevance:0,region:"",subregion:""},{name:"Cyprus",tld:".cy",cca2:"CY",ccn3:196,cca3:"CYP",currency:"EUR","calling-code":"357","alt-spellings":"CY,Kýpros",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Czech Republic",tld:".cz",cca2:"CZ",ccn3:203,cca3:"CZE",currency:"CZK","calling-code":"420","alt-spellings":"CZ,Ceska",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Denmark",tld:".dk",cca2:"DK",ccn3:208,cca3:"DNK",currency:"DKK","calling-code":"45","alt-spellings":"DK,Danmark",relevance:1.5,region:"Europe",subregion:"Northern Europe"},{name:"Djibouti",tld:".dj",cca2:"DJ",ccn3:262,cca3:"DJI",currency:"DJF","calling-code":"253","alt-spellings":"DJ,Jabuuti,Gabuuti",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Dominica",tld:".dm",cca2:"DM",ccn3:212,cca3:"DMA",currency:"XCD","calling-code":"1767","alt-spellings":"DM,Dominique",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Dominican Republic",tld:".do",cca2:"DO",ccn3:214,cca3:"DOM",currency:"DOP","calling-code":"1809,1829,1849","alt-spellings":"DO",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Ecuador",tld:".ec",cca2:"EC",ccn3:218,cca3:"ECU",currency:"USD","calling-code":"593","alt-spellings":"EC",relevance:0,region:"Americas",subregion:"South America"},{name:"Egypt",tld:".eg",cca2:"EG",ccn3:818,cca3:"EGY",currency:"EGP","calling-code":"20","alt-spellings":"EG",relevance:1.5,region:"Africa",subregion:"Northern Africa"},{name:"El Salvador",tld:".sv",cca2:"SV",ccn3:222,cca3:"SLV",currency:"SVC,USD","calling-code":"503","alt-spellings":"SV",relevance:0,region:"Americas",subregion:"Central America"},{name:"Equatorial Guinea",tld:".gq",cca2:"GQ",ccn3:226,cca3:"GNQ",currency:"XAF","calling-code":"240","alt-spellings":"GQ",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Eritrea",tld:".er",cca2:"ER",ccn3:232,cca3:"ERI",currency:"ERN","calling-code":"291","alt-spellings":"ER",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Estonia",tld:".ee",cca2:"EE",ccn3:233,cca3:"EST",currency:"EUR","calling-code":"372","alt-spellings":"EE,Eesti",relevance:0,region:"Europe",subregion:"Northern Europe"},{name:"Ethiopia",tld:".et",cca2:"ET",ccn3:231,cca3:"ETH",currency:"ETB","calling-code":"251","alt-spellings":"ET",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Falkland Islands (Malvinas)",tld:".fk",cca2:"FK",ccn3:238,cca3:"FLK",currency:"FKP","calling-code":"500","alt-spellings":"FK",relevance:.5,region:"Americas",subregion:"South America"},{name:"Faroe Islands",tld:".fo",cca2:"FO",ccn3:234,cca3:"FRO",currency:"DKK","calling-code":"298","alt-spellings":"FO,Føroyar,Færøerne",relevance:.5,region:"Europe",subregion:"Northern Europe"},{name:"Fiji",tld:".fj",cca2:"FJ",ccn3:242,cca3:"FJI",currency:"FJD","calling-code":"679","alt-spellings":"FJ,Viti",relevance:0,region:"Oceania",subregion:"Melanesia"},{name:"Finland",tld:".fi",cca2:"FI",ccn3:246,cca3:"FIN",currency:"EUR","calling-code":"358","alt-spellings":"FI,Suomi",relevance:0,region:"Europe",subregion:"Northern Europe"},{name:"France",tld:".fr",cca2:"FR",ccn3:250,cca3:"FRA",currency:"EUR","calling-code":"33","alt-spellings":"FR,République française",relevance:2.5,region:"Europe",subregion:"Western Europe"},{name:"French Guiana",exclude:!0,tld:".gf",cca2:"GF",ccn3:254,cca3:"GUF",currency:"EUR","calling-code":"594","alt-spellings":"GF",relevance:0,region:"Americas",subregion:"South America"},{name:"French Polynesia",tld:".pf",cca2:"PF",ccn3:258,cca3:"PYF",currency:"XPF","calling-code":"689","alt-spellings":"PF,Polynésie française",relevance:0,region:"Oceania",subregion:"Polynesia"},{name:"French Southern Territories",tld:".tf",cca2:"TF",ccn3:260,cca3:"ATF",currency:"EUR","calling-code":"null","alt-spellings":"TF",relevance:0,region:"",subregion:""},{name:"Gabon",tld:".ga",cca2:"GA",ccn3:266,cca3:"GAB",currency:"XAF","calling-code":"241","alt-spellings":"GA,République Gabonaise",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Gambia",tld:".gm",cca2:"GM",ccn3:270,cca3:"GMB",currency:"GMD","calling-code":"220","alt-spellings":"GM",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Georgia",tld:".ge",cca2:"GE",ccn3:268,cca3:"GEO",currency:"GEL","calling-code":"995","alt-spellings":"GE",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Germany",tld:".de",cca2:"DE",ccn3:276,cca3:"DEU",currency:"EUR","calling-code":"49","alt-spellings":"DE,Bundesrepublik,Deutschland",relevance:3,region:"Europe",subregion:"Western Europe"},{name:"Ghana",tld:".gh",cca2:"GH",ccn3:288,cca3:"GHA",currency:"GHS","calling-code":"233","alt-spellings":"GH",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Gibraltar",tld:".gi",cca2:"GI",ccn3:292,cca3:"GIB",currency:"GIP","calling-code":"350","alt-spellings":"GI",relevance:.5,region:"Europe",subregion:"Southern Europe"},{name:"Greece",tld:".gr",cca2:"GR",ccn3:300,cca3:"GRC",currency:"EUR","calling-code":"30","alt-spellings":"GR",relevance:1.5,region:"Europe",subregion:"Southern Europe"},{name:"Greenland",tld:".gl",cca2:"GL",ccn3:304,cca3:"GRL",currency:"DKK","calling-code":"299","alt-spellings":"GL,grønland",relevance:.5,region:"Americas",subregion:"Northern America"},{name:"Grenada",tld:".gd",cca2:"GD",ccn3:308,cca3:"GRD",currency:"XCD","calling-code":"1473","alt-spellings":"GD",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Guadeloupe",exclude:!0,tld:".gp",cca2:"GP",ccn3:312,cca3:"GLP",currency:"EUR","calling-code":"590","alt-spellings":"GP",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Guam",tld:".gu",cca2:"GU",ccn3:316,cca3:"GUM",currency:"USD","calling-code":"1671","alt-spellings":"GU",relevance:0,region:"Oceania",subregion:"Micronesia"},{name:"Guatemala",tld:".gt",cca2:"GT",ccn3:320,cca3:"GTM",currency:"GTQ","calling-code":"502","alt-spellings":"GT",relevance:0,region:"Americas",subregion:"Central America"},{name:"Guernsey",tld:".gg",cca2:"GG",ccn3:831,cca3:"GGY",currency:"GBP","calling-code":"44","alt-spellings":"GG",relevance:.5,region:"Europe",subregion:"Northern Europe"},{name:"Guinea",tld:".gn",cca2:"GN",ccn3:324,cca3:"GIN",currency:"GNF","calling-code":"224","alt-spellings":"GN",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Guinea-Bissau",tld:".gw",cca2:"GW",ccn3:624,cca3:"GNB",currency:"XOF","calling-code":"245","alt-spellings":"GW",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Guyana",tld:".gy",cca2:"GY",ccn3:328,cca3:"GUY",currency:"GYD","calling-code":"592","alt-spellings":"GY",relevance:0,region:"Americas",subregion:"South America"},{name:"Haiti",tld:".ht",cca2:"HT",ccn3:332,cca3:"HTI",currency:"HTG,USD","calling-code":"509","alt-spellings":"HT",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Heard Island and McDonald Islands",exclude:!0,tld:".hm",cca2:"HM",ccn3:334,cca3:"HMD",currency:"AUD","calling-code":"null","alt-spellings":"HM",relevance:0,region:"",subregion:""},{name:"Vatican City",tld:".va",cca2:"VA",ccn3:336,cca3:"VAT",currency:"EUR","calling-code":"39066,379","alt-spellings":"VA",relevance:.5,region:"Europe",subregion:"Southern Europe"},{name:"Honduras",tld:".hn",cca2:"HN",ccn3:340,cca3:"HND",currency:"HNL","calling-code":"504","alt-spellings":"HN",relevance:0,region:"Americas",subregion:"Central America"},{name:"Hong Kong",tld:".hk",cca2:"HK",ccn3:344,cca3:"HKG",currency:"HKD","calling-code":"852","alt-spellings":"HK",relevance:0,region:"Asia",subregion:"Eastern Asia"},{name:"Hungary",tld:".hu",cca2:"HU",ccn3:348,cca3:"HUN",currency:"HUF","calling-code":"36","alt-spellings":"HU,Magyarország",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Iceland",tld:".is",cca2:"IS",ccn3:352,cca3:"ISL",currency:"ISK","calling-code":"354","alt-spellings":"IS,Island",relevance:0,region:"Europe",subregion:"Northern Europe"},{name:"India",tld:".in",cca2:"IN",ccn3:356,cca3:"IND",currency:"INR","calling-code":"91","alt-spellings":"IN,Hindustan",relevance:3,region:"Asia",subregion:"Southern Asia"},{name:"Indonesia",tld:".id",cca2:"ID",ccn3:360,cca3:"IDN",currency:"IDR","calling-code":"62","alt-spellings":"ID",relevance:2,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Iran",exclude:!0,tld:".ir",cca2:"IR",ccn3:364,cca3:"IRN",currency:"IRR","calling-code":"98","alt-spellings":"IR",relevance:0,region:"Asia",subregion:"Southern Asia"},{name:"Iraq",tld:".iq",cca2:"IQ",ccn3:368,cca3:"IRQ",currency:"IQD","calling-code":"964","alt-spellings":"IQ",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Ireland",tld:".ie",cca2:"IE",ccn3:372,cca3:"IRL",currency:"EUR","calling-code":"353","alt-spellings":"IE,Éire",relevance:1.2,region:"Europe",subregion:"Northern Europe"},{name:"Isle of Man",tld:".im",cca2:"IM",ccn3:833,cca3:"IMN",currency:"GBP","calling-code":"44","alt-spellings":"IM",relevance:.5,region:"Europe",subregion:"Northern Europe"},{name:"Israel",tld:".il",cca2:"IL",ccn3:376,cca3:"ISR",currency:"ILS","calling-code":"972","alt-spellings":"IL",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Italy",tld:".it",cca2:"IT",ccn3:380,cca3:"ITA",currency:"EUR","calling-code":"39","alt-spellings":"IT,Italia",relevance:2,region:"Europe",subregion:"Southern Europe"},{name:"Jamaica",tld:".jm",cca2:"JM",ccn3:388,cca3:"JAM",currency:"JMD","calling-code":"1876","alt-spellings":"JM",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Japan",tld:".jp",cca2:"JP",ccn3:392,cca3:"JPN",currency:"JPY","calling-code":"81","alt-spellings":"JP,Nippon,Nihon",relevance:2.5,region:"Asia",subregion:"Eastern Asia"},{name:"Jersey",tld:".je",cca2:"JE",ccn3:832,cca3:"JEY",currency:"GBP","calling-code":"44","alt-spellings":"JE",relevance:.5,region:"Europe",subregion:"Northern Europe"},{name:"Jordan",tld:".jo",cca2:"JO",ccn3:400,cca3:"JOR",currency:"JOD","calling-code":"962","alt-spellings":"JO",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Kazakhstan",tld:".kz",cca2:"KZ",ccn3:398,cca3:"KAZ",currency:"KZT","calling-code":"76,77","alt-spellings":"KZ",relevance:0,region:"Asia",subregion:"Central Asia"},{name:"Kenya",tld:".ke",cca2:"KE",ccn3:404,cca3:"KEN",currency:"KES","calling-code":"254","alt-spellings":"KE",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Kiribati",tld:".ki",cca2:"KI",ccn3:296,cca3:"KIR",currency:"AUD","calling-code":"686","alt-spellings":"KI",relevance:0,region:"Oceania",subregion:"Micronesia"},{name:"Kuwait",tld:".kw",cca2:"KW",ccn3:414,cca3:"KWT",currency:"KWD","calling-code":"965","alt-spellings":"KW",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Kyrgyzstan",tld:".kg",cca2:"KG",ccn3:417,cca3:"KGZ",currency:"KGS","calling-code":"996","alt-spellings":"KG",relevance:0,region:"Asia",subregion:"Central Asia"},{name:"Laos",tld:".la",cca2:"LA",ccn3:418,cca3:"LAO",currency:"LAK","calling-code":"856","alt-spellings":"LA",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Latvia",tld:".lv",cca2:"LV",ccn3:428,cca3:"LVA",currency:"LVL","calling-code":"371","alt-spellings":"LV,Latvija",relevance:0,region:"Europe",subregion:"Northern Europe"},{name:"Lebanon",tld:".lb",cca2:"LB",ccn3:422,cca3:"LBN",currency:"LBP","calling-code":"961","alt-spellings":"LB",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Lesotho",tld:".ls",cca2:"LS",ccn3:426,cca3:"LSO",currency:"LSL,ZAR","calling-code":"266","alt-spellings":"LS",relevance:0,region:"Africa",subregion:"Southern Africa"},{name:"Liberia",tld:".lr",cca2:"LR",ccn3:430,cca3:"LBR",currency:"LRD","calling-code":"231","alt-spellings":"LR",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Libya",tld:".ly",cca2:"LY",ccn3:434,cca3:"LBY",currency:"LYD","calling-code":"218","alt-spellings":"LY",relevance:0,region:"Africa",subregion:"Northern Africa"},{name:"Liechtenstein",tld:".li",cca2:"LI",ccn3:438,cca3:"LIE",currency:"CHF","calling-code":"423","alt-spellings":"LI",relevance:0,region:"Europe",subregion:"Western Europe"},{name:"Lithuania",tld:".lt",cca2:"LT",ccn3:440,cca3:"LTU",currency:"LTL","calling-code":"370","alt-spellings":"LT,Lietuva",relevance:0,region:"Europe",subregion:"Northern Europe"},{name:"Luxembourg",tld:".lu",cca2:"LU",ccn3:442,cca3:"LUX",currency:"EUR","calling-code":"352","alt-spellings":"LU",relevance:0,region:"Europe",subregion:"Western Europe"},{name:"Macao",tld:".mo",cca2:"MO",ccn3:446,cca3:"MAC",currency:"MOP","calling-code":"853","alt-spellings":"MO",relevance:0,region:"Asia",subregion:"Eastern Asia"},{name:"Macedonia",tld:".mk",cca2:"MK",ccn3:807,cca3:"MKD",currency:"MKD","calling-code":"389","alt-spellings":"MK",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Madagascar",tld:".mg",cca2:"MG",ccn3:450,cca3:"MDG",currency:"MGA","calling-code":"261","alt-spellings":"MG,Madagasikara",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Malawi",tld:".mw",cca2:"MW",ccn3:454,cca3:"MWI",currency:"MWK","calling-code":"265","alt-spellings":"MW",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Malaysia",tld:".my",cca2:"MY",ccn3:458,cca3:"MYS",currency:"MYR","calling-code":"60","alt-spellings":"MY",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Maldives",tld:".mv",cca2:"MV",ccn3:462,cca3:"MDV",currency:"MVR","calling-code":"960","alt-spellings":"MV",relevance:0,region:"Asia",subregion:"Southern Asia"},{name:"Mali",tld:".ml",cca2:"ML",ccn3:466,cca3:"MLI",currency:"XOF","calling-code":"223","alt-spellings":"ML",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Malta",tld:".mt",cca2:"MT",ccn3:470,cca3:"MLT",currency:"EUR","calling-code":"356","alt-spellings":"MT",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Marshall Islands",tld:".mh",cca2:"MH",ccn3:584,cca3:"MHL",currency:"USD","calling-code":"692","alt-spellings":"MH",relevance:.5,region:"Oceania",subregion:"Micronesia"},{name:"Martinique",exclude:!0,tld:".mq",cca2:"MQ",ccn3:474,cca3:"MTQ",currency:"EUR","calling-code":"596","alt-spellings":"MQ",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Mauritania",tld:".mr",cca2:"MR",ccn3:478,cca3:"MRT",currency:"MRO","calling-code":"222","alt-spellings":"MR",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Mauritius",tld:".mu",cca2:"MU",ccn3:480,cca3:"MUS",currency:"MUR","calling-code":"230","alt-spellings":"MU",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Mayotte",exclude:!0,tld:".yt",cca2:"YT",ccn3:175,cca3:"MYT",currency:"EUR","calling-code":"262","alt-spellings":"YT",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Mexico",tld:".mx",cca2:"MX",ccn3:484,cca3:"MEX",currency:"MXN,MXV","calling-code":"52","alt-spellings":"MX,Mexicanos",relevance:1.5,region:"Americas",subregion:"North America"},{name:"Micronesia",tld:".fm",cca2:"FM",ccn3:583,cca3:"FSM",currency:"USD","calling-code":"691","alt-spellings":"FM",relevance:0,region:"Oceania",subregion:"Micronesia"},{name:"Moldova",tld:".md",cca2:"MD",ccn3:498,cca3:"MDA",currency:"MDL","calling-code":"373","alt-spellings":"MD",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Monaco",tld:".mc",cca2:"MC",ccn3:492,cca3:"MCO",currency:"EUR","calling-code":"377","alt-spellings":"MC",relevance:0,region:"Europe",subregion:"Western Europe"},{name:"Mongolia",tld:".mn",cca2:"MN",ccn3:496,cca3:"MNG",currency:"MNT","calling-code":"976","alt-spellings":"MN",relevance:0,region:"Asia",subregion:"Eastern Asia"},{name:"Montenegro",tld:".me",cca2:"ME",ccn3:499,cca3:"MNE",currency:"EUR","calling-code":"382","alt-spellings":"ME",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Montserrat",tld:".ms",cca2:"MS",ccn3:500,cca3:"MSR",currency:"XCD","calling-code":"1664","alt-spellings":"MS",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Morocco",tld:".ma",cca2:"MA",ccn3:504,cca3:"MAR",currency:"MAD","calling-code":"212","alt-spellings":"MA",relevance:0,region:"Africa",subregion:"Northern Africa"},{name:"Mozambique",tld:".mz",cca2:"MZ",ccn3:508,cca3:"MOZ",currency:"MZN","calling-code":"258","alt-spellings":"MZ,Moçambique",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Myanmar (Burma)",tld:".mm",cca2:"MM",ccn3:104,cca3:"MMR",currency:"MMK","calling-code":"95","alt-spellings":"MM",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Namibia",tld:".na",cca2:"NA",ccn3:516,cca3:"NAM",currency:"NAD,ZAR","calling-code":"264","alt-spellings":"NA,Namibië",relevance:0,region:"Africa",subregion:"Southern Africa"},{name:"Nauru",tld:".nr",cca2:"NR",ccn3:520,cca3:"NRU",currency:"AUD","calling-code":"674","alt-spellings":"NR,Naoero",relevance:.5,region:"Oceania",subregion:"Micronesia"},{name:"Nepal",tld:".np",cca2:"NP",ccn3:524,cca3:"NPL",currency:"NPR","calling-code":"977","alt-spellings":"NP",relevance:0,region:"Asia",subregion:"Southern Asia"},{name:"Netherlands",tld:".nl",cca2:"NL",ccn3:528,cca3:"NLD",currency:"EUR","calling-code":"31","alt-spellings":"NL,Holland,Nederland",relevance:1.5,region:"Europe",subregion:"Western Europe"},{name:"New Caledonia",tld:".nc",cca2:"NC",ccn3:540,cca3:"NCL",currency:"XPF","calling-code":"687","alt-spellings":"NC",relevance:.5,region:"Oceania",subregion:"Melanesia"},{name:"New Zealand",tld:".nz",cca2:"NZ",ccn3:554,cca3:"NZL",currency:"NZD","calling-code":"64","alt-spellings":"NZ,Aotearoa",relevance:0,region:"Oceania",subregion:"Australia,New Zealand"},{name:"Nicaragua",tld:".ni",cca2:"NI",ccn3:558,cca3:"NIC",currency:"NIO","calling-code":"505","alt-spellings":"NI",relevance:0,region:"Americas",subregion:"Central America"},{name:"Niger",tld:".ne",cca2:"NE",ccn3:562,cca3:"NER",currency:"XOF","calling-code":"227","alt-spellings":"NE,Nijar",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Nigeria",tld:".ng",cca2:"NG",ccn3:566,cca3:"NGA",currency:"NGN","calling-code":"234","alt-spellings":"NG,Nijeriya,Naíjíríà",relevance:1.5,region:"Africa",subregion:"Western Africa"},{name:"Niue",tld:".nu",cca2:"NU",ccn3:570,cca3:"NIU",currency:"NZD","calling-code":"683","alt-spellings":"NU",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Norfolk Island",tld:".nf",cca2:"NF",ccn3:574,cca3:"NFK",currency:"AUD","calling-code":"672","alt-spellings":"NF",relevance:.5,region:"Oceania",subregion:"Australia,New Zealand"},{name:"North Korea",exclude:!0,tld:".kp",cca2:"KP",ccn3:408,cca3:"PRK",currency:"KPW","calling-code":"850","alt-spellings":"KP",relevance:0,region:"Asia",subregion:"Eastern Asia"},{name:"Northern Mariana Islands",tld:".mp",cca2:"MP",ccn3:580,cca3:"MNP",currency:"USD","calling-code":"1670","alt-spellings":"MP",relevance:.5,region:"Oceania",subregion:"Micronesia"},{name:"Norway",tld:".no",cca2:"NO",ccn3:578,cca3:"NOR",currency:"NOK","calling-code":"47","alt-spellings":"NO,Norge,Noreg",relevance:1.5,region:"Europe",subregion:"Northern Europe"},{name:"Oman",tld:".om",cca2:"OM",ccn3:512,cca3:"OMN",currency:"OMR","calling-code":"968","alt-spellings":"OM",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Pakistan",tld:".pk",cca2:"PK",ccn3:586,cca3:"PAK",currency:"PKR","calling-code":"92","alt-spellings":"PK",relevance:2,region:"Asia",subregion:"Southern Asia"},{name:"Palau",tld:".pw",cca2:"PW",ccn3:585,cca3:"PLW",currency:"USD","calling-code":"680","alt-spellings":"PW",relevance:.5,region:"Oceania",subregion:"Micronesia"},{name:"Palestinian Territory",exclude:!0,tld:".ps",cca2:"PS",ccn3:275,cca3:"PSE",currency:"","calling-code":"970","alt-spellings":"PS",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Panama",tld:".pa",cca2:"PA",ccn3:591,cca3:"PAN",currency:"PAB,USD","calling-code":"507","alt-spellings":"PA",relevance:0,region:"Americas",subregion:"Central America"},{name:"Papua New Guinea",tld:".pg",cca2:"PG",ccn3:598,cca3:"PNG",currency:"PGK","calling-code":"675","alt-spellings":"PG",relevance:0,region:"Oceania",subregion:"Melanesia"},{name:"Paraguay",tld:".py",cca2:"PY",ccn3:600,cca3:"PRY",currency:"PYG","calling-code":"595","alt-spellings":"PY",relevance:0,region:"Americas",subregion:"South America"},{name:"Peru",tld:".pe",cca2:"PE",ccn3:604,cca3:"PER",currency:"PEN","calling-code":"51","alt-spellings":"PE",relevance:0,region:"Americas",subregion:"South America"},{name:"Philippines",tld:".ph",cca2:"PH",ccn3:608,cca3:"PHL",currency:"PHP","calling-code":"63","alt-spellings":"PH,Pilipinas",relevance:1.5,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Pitcairn",tld:".pn",cca2:"PN",ccn3:612,cca3:"PCN",currency:"NZD","calling-code":"64","alt-spellings":"PN",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Poland",tld:".pl",cca2:"PL",ccn3:616,cca3:"POL",currency:"PLN","calling-code":"48","alt-spellings":"PL,Polska",relevance:1.25,region:"Europe",subregion:"Eastern Europe"},{name:"Portugal",tld:".pt",cca2:"PT",ccn3:620,cca3:"PRT",currency:"EUR","calling-code":"351","alt-spellings":"PT,Portuguesa",relevance:1.5,region:"Europe",subregion:"Southern Europe"},{name:"Puerto Rico",tld:".pr",cca2:"PR",ccn3:630,cca3:"PRI",currency:"USD","calling-code":"1787,1939","alt-spellings":"PR",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Qatar",tld:".qa",cca2:"QA",ccn3:634,cca3:"QAT",currency:"QAR","calling-code":"974","alt-spellings":"QA",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Réunion",exclude:!0,tld:".re",cca2:"RE",ccn3:638,cca3:"REU",currency:"EUR","calling-code":"262","alt-spellings":"RE,Reunion",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Romania",tld:".ro",cca2:"RO",ccn3:642,cca3:"ROU",currency:"RON","calling-code":"40","alt-spellings":"RO,Rumania,Roumania,România",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Russian Federation",tld:".ru",cca2:"RU",ccn3:643,cca3:"RUS",currency:"RUB","calling-code":"7","alt-spellings":"RU,Rossiya",relevance:2.5,region:"Europe",subregion:"Eastern Europe"},{name:"Rwanda",tld:".rw",cca2:"RW",ccn3:646,cca3:"RWA",currency:"RWF","calling-code":"250","alt-spellings":"RW",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Saint Barthélemy",exclude:!0,tld:".bl",cca2:"BL",ccn3:652,cca3:"BLM",currency:"EUR","calling-code":"590","alt-spellings":"BL,St. Barthelemy",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Saint Helena",tld:".sh",cca2:"SH",ccn3:654,cca3:"SHN",currency:"SHP","calling-code":"290","alt-spellings":"SH,St.",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Saint Kitts and Nevis",tld:".kn",cca2:"KN",ccn3:659,cca3:"KNA",currency:"XCD","calling-code":"1869","alt-spellings":"KN,St.",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Saint Lucia",tld:".lc",cca2:"LC",ccn3:662,cca3:"LCA",currency:"XCD","calling-code":"1758","alt-spellings":"LC,St.",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Saint Martin",exclude:!0,tld:".mf",cca2:"MF",ccn3:663,cca3:"MAF",currency:"EUR","calling-code":"590","alt-spellings":"MF,St.",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Saint Pierre and Miquelon",exclude:!0,tld:".pm",cca2:"PM",ccn3:666,cca3:"SPM",currency:"EUR","calling-code":"508","alt-spellings":"PM,St.",relevance:0,region:"Americas",subregion:"Northern America"},{name:"Saint Vincent and the Grenadines",tld:".vc",cca2:"VC",ccn3:670,cca3:"VCT",currency:"XCD","calling-code":"1784","alt-spellings":"VC,St.",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Samoa",tld:".ws",cca2:"WS",ccn3:882,cca3:"WSM",currency:"WST","calling-code":"685","alt-spellings":"WS",relevance:0,region:"Oceania",subregion:"Polynesia"},{name:"San Marino",tld:".sm",cca2:"SM",ccn3:674,cca3:"SMR",currency:"EUR","calling-code":"378","alt-spellings":"SM",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"São Tomé and Príncipe",tld:".st",cca2:"ST",ccn3:678,cca3:"STP",currency:"STD","calling-code":"239","alt-spellings":"ST",relevance:0,region:"Africa",subregion:"Middle Africa"},{name:"Saudi Arabia",tld:".sa",cca2:"SA",ccn3:682,cca3:"SAU",currency:"SAR","calling-code":"966","alt-spellings":"SA",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Senegal",tld:".sn",cca2:"SN",ccn3:686,cca3:"SEN",currency:"XOF","calling-code":"221","alt-spellings":"SN,Sénégal",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Serbia",tld:".rs",cca2:"RS",ccn3:688,cca3:"SRB",currency:"RSD","calling-code":"381","alt-spellings":"RS,Srbija",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Seychelles",tld:".sc",cca2:"SC",ccn3:690,cca3:"SYC",currency:"SCR","calling-code":"248","alt-spellings":"SC",relevance:.5,region:"Africa",subregion:"Eastern Africa"},{name:"Sierra Leone",tld:".sl",cca2:"SL",ccn3:694,cca3:"SLE",currency:"SLL","calling-code":"232","alt-spellings":"SL",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Singapore",tld:".sg",cca2:"SG",ccn3:702,cca3:"SGP",currency:"SGD","calling-code":"65","alt-spellings":"SG,Singapura",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Sint Maarten",tld:".sx",cca2:"SX",ccn3:534,cca3:"SXM",currency:"ANG","calling-code":"1721","alt-spellings":"SX",relevance:0,region:"",subregion:""},{name:"Slovakia",tld:".sk",cca2:"SK",ccn3:703,cca3:"SVK",currency:"XSU","calling-code":"421","alt-spellings":"SK,Slovenská,Slovensko",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"Slovenia",tld:".si",cca2:"SI",ccn3:705,cca3:"SVN",currency:"EUR","calling-code":"386","alt-spellings":"SI,Slovenija",relevance:0,region:"Europe",subregion:"Southern Europe"},{name:"Solomon Islands",tld:".sb",cca2:"SB",ccn3:90,cca3:"SLB",currency:"EUR","calling-code":"677","alt-spellings":"SB",relevance:0,region:"Oceania",subregion:"Melanesia"},{name:"Somalia",tld:".so",cca2:"SO",ccn3:706,cca3:"SOM",currency:"SBD","calling-code":"252","alt-spellings":"SO",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"South Africa",tld:".za",cca2:"ZA",ccn3:710,cca3:"ZAF",currency:"SOS","calling-code":"27","alt-spellings":"ZA,RSA,Suid-Afrika",relevance:0,region:"Africa",subregion:"Southern Africa"},{name:"South Georgia",tld:".gs",cca2:"GS",ccn3:239,cca3:"SGS",currency:"ZAR","calling-code":"500","alt-spellings":"GS",relevance:0,region:"Americas",subregion:"South America"},{name:"South Korea",tld:".kr",cca2:"KR",ccn3:410,cca3:"KOR",currency:"KRW","calling-code":"82","alt-spellings":"KR",relevance:1.5,region:"Asia",subregion:"Eastern Asia"},{name:"South Sudan",tld:".ss",cca2:"SS",ccn3:728,cca3:"SSD",currency:"SSP","calling-code":"211","alt-spellings":"SS",relevance:0,region:"",subregion:""},{name:"Spain",tld:".es",cca2:"ES",ccn3:724,cca3:"ESP",currency:"EUR","calling-code":"34","alt-spellings":"ES,España",relevance:2,region:"Europe",subregion:"Southern Europe"},{name:"Sri Lanka",tld:".lk",cca2:"LK",ccn3:144,cca3:"LKA",currency:"LKR","calling-code":"94","alt-spellings":"LK",relevance:0,region:"Asia",subregion:"Southern Asia"},{name:"Sudan",exclude:!0,tld:".sd",cca2:"SD",ccn3:729,cca3:"SDN",currency:"SDG","calling-code":"249","alt-spellings":"SD",relevance:0,region:"Africa",subregion:"Northern Africa"},{name:"Suriname",tld:".sr",cca2:"SR",ccn3:740,cca3:"SUR",currency:"SRD","calling-code":"597","alt-spellings":"SR,Sarnam,Sranangron",relevance:0,region:"Americas",subregion:"South America"},{name:"Svalbard and Jan Mayen",exclude:!0,tld:".sj",cca2:"SJ",ccn3:744,cca3:"SJM",currency:"NOK","calling-code":"4779","alt-spellings":"SJ",relevance:.5,region:"Europe",subregion:"Northern Europe"},{name:"Swaziland",tld:".sz",cca2:"SZ",ccn3:748,cca3:"SWZ",currency:"SZL","calling-code":"268","alt-spellings":"SZ,weSwatini,Swatini,Ngwane",relevance:0,region:"Africa",subregion:"Southern Africa"},{name:"Sweden",tld:".se",cca2:"SE",ccn3:752,cca3:"SWE",currency:"SEK","calling-code":"46","alt-spellings":"SE,Sverige",relevance:1.5,region:"Europe",subregion:"Northern Europe"},{name:"Switzerland",tld:".ch",cca2:"CH",ccn3:756,cca3:"CHE",currency:"CHE,CHF,CHW","calling-code":"41","alt-spellings":"CH,Swiss Confederation,Schweiz,Suisse,Svizzera,Svizra",relevance:1.5,region:"Europe",subregion:"Western Europe"},{name:"Syrian Arab Republic",exclude:!0,tld:".sy",cca2:"SY",ccn3:760,cca3:"SYR",currency:"SYP","calling-code":"963","alt-spellings":"SY,Syria",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Taiwan",tld:".tw",cca2:"TW",ccn3:158,cca3:"TWN",currency:"TWD","calling-code":"886","alt-spellings":"TW",relevance:0,region:"Asia",subregion:"Eastern Asia"},{name:"Tajikistan",tld:".tj",cca2:"TJ",ccn3:762,cca3:"TJK",currency:"TJS","calling-code":"992","alt-spellings":"TJ,Toçikiston",relevance:0,region:"Asia",subregion:"Central Asia"},{name:"Tanzania",tld:".tz",cca2:"TZ",ccn3:834,cca3:"TZA",currency:"TZS","calling-code":"255","alt-spellings":"TZ",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Thailand",tld:".th",cca2:"TH",ccn3:764,cca3:"THA",currency:"THB","calling-code":"66","alt-spellings":"TH,Prathet,Thai",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Timor-Leste",tld:".tl",cca2:"TL",ccn3:626,cca3:"TLS",currency:"USD","calling-code":"670","alt-spellings":"TL",relevance:0,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Togo",tld:".tg",cca2:"TG",ccn3:768,cca3:"TGO",currency:"XOF","calling-code":"228","alt-spellings":"TG,Togolese",relevance:0,region:"Africa",subregion:"Western Africa"},{name:"Tokelau",tld:".tk",cca2:"TK",ccn3:772,cca3:"TKL",currency:"NZD","calling-code":"690","alt-spellings":"TK",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Tonga",tld:".to",cca2:"TO",ccn3:776,cca3:"TON",currency:"TOP","calling-code":"676","alt-spellings":"TO",relevance:0,region:"Oceania",subregion:"Polynesia"},{name:"Trinidad and Tobago",tld:".tt",cca2:"TT",ccn3:780,cca3:"TTO",currency:"TTD","calling-code":"1868","alt-spellings":"TT",relevance:0,region:"Americas",subregion:"Caribbean"},{name:"Tunisia",tld:".tn",cca2:"TN",ccn3:788,cca3:"TUN",currency:"TND","calling-code":"216","alt-spellings":"TN",relevance:0,region:"Africa",subregion:"Northern Africa"},{name:"Turkey",tld:".tr",cca2:"TR",ccn3:792,cca3:"TUR",currency:"TRY","calling-code":"90","alt-spellings":"TR,Türkiye,Turkiye",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Turkmenistan",tld:".tm",cca2:"TM",ccn3:795,cca3:"TKM",currency:"TMT","calling-code":"993","alt-spellings":"TM,Türkmenistan",relevance:0,region:"Asia",subregion:"Central Asia"},{name:"Turks and Caicos Islands",tld:".tc",cca2:"TC",ccn3:796,cca3:"TCA",currency:"USD","calling-code":"1649","alt-spellings":"TC",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Tuvalu",tld:".tv",cca2:"TV",ccn3:798,cca3:"TUV",currency:"AUD","calling-code":"688","alt-spellings":"TV",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Uganda",tld:".ug",cca2:"UG",ccn3:800,cca3:"UGA",currency:"UGX","calling-code":"256","alt-spellings":"UG",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Ukraine",tld:".ua",cca2:"UA",ccn3:804,cca3:"UKR",currency:"UAH","calling-code":"380","alt-spellings":"UA,Ukrayina",relevance:0,region:"Europe",subregion:"Eastern Europe"},{name:"United Arab Emirates",tld:".ae",cca2:"AE",ccn3:784,cca3:"ARE",currency:"AED","calling-code":"971","alt-spellings":"AE,UAE",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"United States Minor Outlying Islands",exclude:!0,tld:".us",cca2:"UM",ccn3:581,cca3:"UMI",currency:"USD","calling-code":"null","alt-spellings":"UM",relevance:0,region:"Americas",subregion:"Northern America"},{name:"Uruguay",tld:".uy",cca2:"UY",ccn3:858,cca3:"URY",currency:"UYI,UYU","calling-code":"598","alt-spellings":"UY",relevance:0,region:"Americas",subregion:"South America"},{name:"Uzbekistan",tld:".uz",cca2:"UZ",ccn3:860,cca3:"UZB",currency:"UZS","calling-code":"998","alt-spellings":"UZ,O'zbekstan,O‘zbekiston",relevance:0,region:"Asia",subregion:"Central Asia"},{name:"Vanuatu",tld:".vu",cca2:"VU",ccn3:548,cca3:"VUT",currency:"VUV","calling-code":"678","alt-spellings":"VU",relevance:0,region:"Oceania",subregion:"Melanesia"},{name:"Venezuela",tld:".ve",cca2:"VE",ccn3:862,cca3:"VEN",currency:"VEF","calling-code":"58","alt-spellings":"VE",relevance:0,region:"Americas",subregion:"South America"},{name:"Viet Nam",tld:".vn",cca2:"VN",ccn3:704,cca3:"VNM",currency:"VND","calling-code":"84","alt-spellings":"VN,Viet,Nam",relevance:1.5,region:"Asia",subregion:"South-Eastern,Asia"},{name:"Virgin Islands (British)",tld:".vg",cca2:"VG",ccn3:92,cca3:"VGB",currency:"USD","calling-code":"1284","alt-spellings":"VG",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Virgin Islands (U.S.)",tld:".vi",cca2:"VI",ccn3:850,cca3:"VIR",currency:"USD","calling-code":"1340","alt-spellings":"VI",relevance:.5,region:"Americas",subregion:"Caribbean"},{name:"Wallis and Futuna",exclude:!0,tld:".wf",cca2:"WF",ccn3:876,cca3:"WLF",currency:"XPF","calling-code":"681","alt-spellings":"WF",relevance:.5,region:"Oceania",subregion:"Polynesia"},{name:"Western Sahara",exclude:!0,tld:".eh",cca2:"EH",ccn3:732,cca3:"ESH",currency:"MAD,DZD,MRO","calling-code":"212","alt-spellings":"EH",relevance:0,region:"Africa",subregion:"Northern Africa"},{name:"Yemen",tld:".ye",cca2:"YE",ccn3:887,cca3:"YEM",currency:"YER","calling-code":"967","alt-spellings":"YE",relevance:0,region:"Asia",subregion:"Western Asia"},{name:"Zambia",tld:".zm",cca2:"ZM",ccn3:894,cca3:"ZMB",currency:"ZMK","calling-code":"260","alt-spellings":"ZM",relevance:0,region:"Africa",subregion:"Eastern Africa"},{name:"Zimbabwe",tld:".zw",cca2:"ZW",ccn3:716,cca3:"ZWE",currency:"ZWL","calling-code":"263","alt-spellings":"ZW",relevance:0,region:"Africa",subregion:"Eastern Africa"}]
}),_wAMD.define("json!definitions/states.json",function(){return{US:[{name:"Alabama",abbr:"AL"},{name:"Alaska",abbr:"AK"},{name:"American Samoa",abbr:"AS"},{name:"Arizona",abbr:"AZ"},{name:"Arkansas",abbr:"AR"},{name:"California",abbr:"CA"},{name:"Colorado",abbr:"CO"},{name:"Connecticut",abbr:"CT"},{name:"Delaware",abbr:"DE"},{name:"District Of Columbia",abbr:"DC"},{name:"Federated States Of Micronesia",abbr:"FM"},{name:"Florida",abbr:"FL"},{name:"Georgia",abbr:"GA"},{name:"Guam",abbr:"GU"},{name:"Hawaii",abbr:"HI"},{name:"Idaho",abbr:"ID"},{name:"Illinois",abbr:"IL"},{name:"Indiana",abbr:"IN"},{name:"Iowa",abbr:"IA"},{name:"Kansas",abbr:"KS"},{name:"Kentucky",abbr:"KY"},{name:"Louisiana",abbr:"LA"},{name:"Maine",abbr:"ME"},{name:"Marshall Islands",abbr:"MH"},{name:"Maryland",abbr:"MD"},{name:"Massachusetts",abbr:"MA"},{name:"Michigan",abbr:"MI"},{name:"Minnesota",abbr:"MN"},{name:"Mississippi",abbr:"MS"},{name:"Missouri",abbr:"MO"},{name:"Montana",abbr:"MT"},{name:"Nebraska",abbr:"NE"},{name:"Nevada",abbr:"NV"},{name:"New Hampshire",abbr:"NH"},{name:"New Jersey",abbr:"NJ"},{name:"New Mexico",abbr:"NM"},{name:"New York",abbr:"NY"},{name:"North Carolina",abbr:"NC"},{name:"North Dakota",abbr:"ND"},{name:"Northern Mariana Islands",abbr:"MP"},{name:"Ohio",abbr:"OH"},{name:"Oklahoma",abbr:"OK"},{name:"Oregon",abbr:"OR"},{name:"Palau",abbr:"PW"},{name:"Pennsylvania",abbr:"PA"},{name:"Puerto Rico",abbr:"PR"},{name:"Rhode Island",abbr:"RI"},{name:"South Carolina",abbr:"SC"},{name:"South Dakota",abbr:"SD"},{name:"Tennessee",abbr:"TN"},{name:"Texas",abbr:"TX"},{name:"Utah",abbr:"UT"},{name:"Vermont",abbr:"VT"},{name:"Virgin Islands",abbr:"VI"},{name:"Virginia",abbr:"VA"},{name:"Washington",abbr:"WA"},{name:"West Virginia",abbr:"WV"},{name:"Wisconsin",abbr:"WI"},{name:"Wyoming",abbr:"WY"}],CA:[{name:"Alberta",abbr:"AB"},{name:"British Columbia",abbr:"BC"},{name:"Manitoba",abbr:"MB"},{name:"New Brunswick",abbr:"NB"},{name:"Newfoundland",abbr:"NL"},{name:"Northwest Territories",abbr:"NT"},{name:"Nova Scotia",abbr:"NS"},{name:"Nunavut",abbr:"NU"},{name:"Ontario",abbr:"ON"},{name:"Prince Edward Island",abbr:"PE"},{name:"Quebec",abbr:"QC"},{name:"Saskatchewan",abbr:"SK"},{name:"Yukon Territory",abbr:"YT"}],BR:[{name:"Acre",abbr:"AC"},{name:"Alagoas",abbr:"AL"},{name:"Amapá",abbr:"AP"},{name:"Amazonas",abbr:"AM"},{name:"Bahia",abbr:"BA"},{name:"Ceará",abbr:"CE"},{name:"Distrito Federal",abbr:"DF"},{name:"Espírito Santo",abbr:"ES"},{name:"Goiás",abbr:"GO"},{name:"Maranhão",abbr:"MA"},{name:"Mato Grosso",abbr:"MT"},{name:"Mato Grosso do Sul",abbr:"MS"},{name:"Minas Gerais",abbr:"MG"},{name:"Pará",abbr:"PA"},{name:"Paraíba",abbr:"PB"},{name:"Paraná",abbr:"PR"},{name:"Pernambuco",abbr:"PE"},{name:"Piauí",abbr:"PI"},{name:"Rio de Janeiro",abbr:"RJ"},{name:"Rio Grande do Norte",abbr:"RN"},{name:"Rio Grande do Sul",abbr:"RS"},{name:"Rondônia ",abbr:"RO"},{name:"Roraima",abbr:"RR"},{name:"Santa Catarina",abbr:"SC"},{name:"São Paulo ",abbr:"SP"},{name:"Sergipe",abbr:"SE"},{name:"Tocantins",abbr:"TO"}]}}),_wAMD.define("commerce/editor/store/setting/GeneralView",["jquery","backbone-all","mustache","editor/app","commerce/editor/collection/ShippingProvider","util/ui/wLoadButton","tpl!commerce/editor/store/setting/general","json!definitions/currencies.json","json!definitions/weights.json","json!definitions/countries.json","json!definitions/states.json","util/ui/jquery-richtext"],function(e,t,i,n,o,s,r,a,l,c,u){var d=t.Marionette.ItemView.extend({template:i.compile(r),templateHelpers:function(){for(var e=this,t=0;t<a.length;t++)a[t].name=_W.tl(a[t].name);for(var i=0;i<l.length;i++)l[i].example=_W.tl(l[i].example),l[i].name=_W.tl(l[i].name);for(var n=0;n<c.length;n++)c[n].name=_W.tl(c[n].name);for(var o in u)for(var s=u[o],r=0;r<s.length;r++)u[o][r].name=_W.tl(u[o][r].name);return{currencies:a,weights:l,countries:c,isCurrentCurrency:function(){return this.abbreviation==e.model.get("currency")},isCurrentWeight:function(){return this.weight_suffix==e.model.get("weight_unit")},isCurrentCountry:function(){return this.cca2==e.model.get("store_address_country")},isCurrentState:function(){return this.abbr==e.model.get("store_address_state")},states:function(){return u[this.store_address_country]},store_mode:function(){return[{mode:"cart",name:_W.tl("Add to Cart"),selected:"cart"==e.model.get("store_mode")},{mode:"buynow",name:_W.tl("Buy Now"),selected:"buynow"==e.model.get("store_mode")}]},hasStates:function(){return!!u[this.store_address_country]},hasPaymentGateway:function(){return"none"==this.gateway?!1:!!this.gateway},gatewayName:function(){return"none"!==this.gateway?this.gateway:void 0}}},initialize:function(){this.model.get("store_address_country")||this.model.set("store_address_country","US")},ui:{selects:"select",richTexts:"div.richtext-area div.textarea-input",footerBar:".footer-bar",saveButton:".footer-bar .save-settings"},onRender:function(){var t=this.model;this.$el.find("input[type=checkbox]").each(function(){var i=e(this),n=i.attr("name"),o=t.get(n)||!1;i.prop("checked",o),i.toggleClass("checked",o)}),this.ui.selects.wSelectbox({theme:"com"}),this.ui.richTexts.richText(),this.ui.footerBar.show(),this.ui.saveButton.wLoadButton({endText:_W.tl("Saved")})},events:{"keydown input":"resetSaveButton","keydown div.input":"resetSaveButton","change select":"changeSettings","change input[type=checkbox]":"updateToggle","blur input":"changeSettings","blur div.input":"changeSettings","change select[name=store_address_country]":"render","click .save-settings":"saveSettings"},changeSettings:function(){this.resetSaveButton();var e=this.$el.getValues();this.model.set(e),this.originalAttributes||(this.originalAttributes=this.model.previousAttributes())},updateToggle:function(t){this.resetSaveButton();var i=e(t.target),n=i.is(":checked"),o=i.attr("name");i.toggleClass("checked",n),this.model.set(o,n)},preventClose:function(){if(this.originalAttributes){var e=this.model.changedAttributes();for(tempAttribute in e)if((""!=e[tempAttribute]||null!=this.originalAttributes[tempAttribute])&&e[tempAttribute]!=this.originalAttributes[tempAttribute])return t.preventClose.ifModelChanged(this.model)}},onClose:function(){this.model.rollback()},saveSettings:function(){var e=this,t=this.ui.saveButton.wLoadButton("startWait");this.model.commit().done(function(){t.wLoadButton("endWait")}),o.count().done(function(t){t||editorApp.commerce.RPC.ShippingProvider.generateShippingProviders(e.model.get("owner_id"),e.model.get("site_id"),e.model.get("store_address_country"))})},resetSaveButton:function(){this.ui.saveButton.wLoadButton("reset")}});return d}),_wAMD.define("tpl!commerce/editor/store/setting/payment/options-list",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}Checkout Options{{/tl}}</h1>\n</div>\n\n<div class="sub-title-bar">\n	<h2 class="accept-cards">\n		<span> {{#tl}}Accept Credit Cards{{/tl}} </span>\n		<span class="cards"></span>\n	</h2>\n</div>\n\n<table class="payment-option-container credit-cards">\n	{{^authorize_connected}}{{^square_connected}}\n		{{>commerce/editor/store/setting/payment/options/stripe}}\n	{{/square_connected}}{{/authorize_connected}}\n\n	{{^credit_card_connected}}\n		<tr>\n			<td colspan="3"><div class="divider">&nbsp;</div></td>\n		</tr>\n	{{/credit_card_connected}}\n\n	{{^authorize_connected}}{{^stripe_connected}}\n		{{>commerce/editor/store/setting/payment/options/square}}\n	{{/stripe_connected}}{{/authorize_connected}}\n	\n	{{^credit_card_connected}}\n		<tr>\n			<td colspan="3"><div class="divider">&nbsp;</div></td>\n		</tr>\n	{{/credit_card_connected}}\n\n	{{^stripe_connected}}{{^square_connected}}\n		{{>commerce/editor/store/setting/payment/options/authorize}}\n	{{/square_connected}}{{/stripe_connected}}\n</table>\n\n{{#stripe_details_needed}}\n	<div class="update-account">\n		<span class="inner">\n			{{#tl}}Fill out your bank account details to collect the money from your sales.{{/tl}}\n			<a href="{{stripe_update_url}}" target="_blank">{{#tl}}Start now{{/tl}}</a>.\n		</span>\n	</div>\n{{/stripe_details_needed}}\n\n{{#square_details_needed}}\n	<div class="update-account">\n		<span class="inner">\n			{{#tl}}Your Square account is not currently enabled to accept payments. {{/tl}}\n			<a href="{{square_update_url}}" target="_blank">{{#tl}}Login{{/tl}}</a>{{#tl}} to or {{/tl}}<a href="{{square_contact_url}}" target="_blank">{{#tl}}contact{{/tl}}</a>{{#tl}} Square for more information.{{/tl}}\n		</span>\n	</div>\n{{/square_details_needed}}\n\n<div class="sub-title-bar secondary-title">\n	<h2>{{#tl}}Accept PayPal{{/tl}}</h2>\n</div>\n\n<table class="payment-option-container secondary">\n	{{>commerce/editor/store/setting/payment/options/paypal}}\n</table>\n'}),_wAMD.define("tpl!commerce/editor/store/setting/payment/options/stripe",[],function(){return'<tr class="payment-option stripe {{#stripe_connected}}connected{{/stripe_connected}}">\n	<td class="option-left">\n		<span class="logo"></span>\n	</td>\n	<td class="option-center">\n		<ul>\n			<li><i class="w-icon-dollar-circle"></i>{{#tl}}Instantly start accepting credit cards{{/tl}}</li>\n			<li><i class="w-icon-branded"></i>{{#tl}}Integrated shopping cart on your site{{/tl}}</li>\n			<li><i class="w-icon-pie-chart"></i>{{#tl}}2.9% plus 30&cent; per transaction{{/tl}}</li>\n			<li><i class="w-icon-bank"></i>{{#tl}}Funds deposited after 7 days{{/tl}}\n			{{#fee_required}}\n			<li>\n				{{#is_client_site}}\n					<i class="w-icon-pie-chart"></i>\n					{{#tl}}Transaction fee: 3% per charge{{/tl}}\n				{{/is_client_site}}\n				{{^is_client_site}}\n					<i class="w-icon-li-w"></i>\n					{{#tl}}Weebly fee: 3% per charge{{/tl}}\n				{{/is_client_site}} \n				| <a href="#" class="upgrade-business" data-gateway="Stripe">{{#tl}}Remove this{{/tl}}</a>\n			</li>\n			{{/fee_required}}\n		</ul>\n	</td>\n	<td class="option-right">\n		{{#stripe_connected}}\n			<div class="connected">\n				<span class="w-icon-check-mark"></span>&nbsp;<b>{{#tl}}Connected to{{/tl}}</b><br> <b>{{stripe_name}}</b><br>\n				{{#can_edit_store}}\n				    <span class="divider"></span><br>\n				    <a class="disconnect-button" data-gateway="Stripe" href="#"><b>{{#tl}}Disable{{/tl}}</b></a>\n				{{/can_edit_store}}\n			</div>\n		{{/stripe_connected}}\n		{{^stripe_connected}}\n			<a class="btn btn-block btn-info connect-button" data-gateway="Stripe">{{#tl}}Enable{{/tl}}</a>\n		{{/stripe_connected}}\n	</td>\n	<div style="clear: both;"></div>\n</tr>\n'}),_wAMD.define("tpl!commerce/editor/store/setting/payment/options/paypal",[],function(){return'<tr class="payment-option paypal {{#paypal_connected}}connected{{/paypal_connected}}">\n	<td class="option-left">\n		<span class="logo"></span>\n	</td>\n	<td class="option-center">\n		<ul>\n			<li><i class="w-icon-checkmark-circle"></i>{{#tl}}Easy to <a href="https://www.paypal.com/us/webapps/mpp/referral/paypal-express-checkout2?partner_id=UYPYUH8GJJ8XJ" target="_blank">sign up</a> and connect{{/tl}}</li>\n			<li><i class="w-icon-right-chevron-circle"></i>{{#tl}}Redirects to PayPal for checkout{{/tl}}</li>\n			<li><i class="w-icon-pie-chart"></i>{{#tl}}2.9% plus 30&cent; per transaction{{/tl}}</li>\n		</ul>\n	</td>\n	<td class="option-right">\n		{{#paypal_connected}}\n			<div class="connected">\n				<span class="w-icon-check-mark"></span>&nbsp;<b>{{#tl}}Connected to{{/tl}}</b><br> <b>{{paypal_name}}</b><br>\n				{{#can_edit_store}}\n				    <span class="divider"></span><br>\n				    <a class="disconnect-button" data-gateway="PayPal" href="#"><b>{{#tl}}Disable{{/tl}}</b></a>\n				{{/can_edit_store}}\n			</div>\n		{{/paypal_connected}}\n\n		{{^paypal_connected}}\n			{{#has_paypal_access}}\n				<a class="btn-com btn-block connect-button" data-gateway="PayPal">{{#tl}}Enable{{/tl}}</a>\n			{{/has_paypal_access}}\n			{{^has_paypal_access}}\n				<div class="upgrade-required">\n					<span>\n						<a href="#" class="upgrade-business" data-gateway="PayPal">{{#tl}}Upgrade{{/tl}}</a> {{#tl}} to the Business Plan to use PayPal {{/tl}}\n					</span>\n				</div>\n			{{/has_paypal_access}}\n		{{/paypal_connected}}\n	</td>\n</tr>\n'}),_wAMD.define("tpl!commerce/editor/store/setting/payment/options/authorize",[],function(){return'<tr class="payment-option authorize {{#authorize_connected}}connected{{/authorize_connected}}">\n	<td class="option-left">\n		<span class="logo"></span>\n	</td>\n	<td class="option-center">\n		<ul>\n			<li><i class="w-icon-checkmark-circle"></i>{{#tl}}Merchant account application required{{/tl}}</li>\n			<li><i class="w-icon-branded"></i>{{#tl}}Integrated checkout on your site{{/tl}}</li>\n			<li><i class="w-icon-pie-chart"></i>{{#tl}}2.4% plus 30&cent;/transaction &amp; setup fee{{/tl}}</li>\n		</ul>\n	</td>\n	<td class="option-right">\n		{{#authorize_connected}}\n			<div class="connected">\n				<span class="w-icon-check-mark"></span>&nbsp;<b>{{#tl}}Connected to{{/tl}}</b><br> <b>{{authorize_name}}</b><br>\n				{{#can_edit_store}}\n				    <span class="divider"></span><br>\n				    <a class="disconnect-button" data-gateway="AuthorizeNet" href="#"><b>{{#tl}}Disable{{/tl}}</b></a>\n				{{/can_edit_store}}\n			</div>\n		{{/authorize_connected}}\n		{{^authorize_connected}}\n			{{#has_business}}\n				<a class="btn-com btn-block connect-button" data-gateway="AuthorizeNet">{{#tl}}Enable{{/tl}}</a>\n			{{/has_business}}\n\n			{{^has_business}}\n				<div class="upgrade-required">\n					<span>\n						<a href="#" class="upgrade-business" data-gateway="AuthorizeNet">{{#tl}}Upgrade{{/tl}}</a> {{#tl}} to Business to use Authorize.net{{/tl}}\n					</span>\n				</div>\n			{{/has_business}}\n		{{/authorize_connected}}\n	</td>\n</tr>\n'}),_wAMD.define("tpl!commerce/editor/store/setting/payment/options/square",[],function(){return'<tr class="payment-option square {{#square_connected}}connected{{/square_connected}}">\n	<td class="option-left">\n		<span class="logo"></span>\n	</td>\n	<td class="option-center">\n		<ul>\n			<li><i class="w-icon-dollar-circle"></i>{{#tl}}Instantly start accepting credit cards{{/tl}}</li>\n			<li><i class="w-icon-branded"></i>{{#tl}}Integrated Square POS and shopping cart{{/tl}}</li>\n			<li><i class="w-icon-pie-chart"></i>{{#tl}}2.9% plus 30¢ per transaction{{/tl}}</li>\n			<li><i class="w-icon-bank"></i>{{#tl}}Funds deposited in 1-2 business days{{/tl}}</li>\n		</ul>\n	</td>\n	<td class="option-right">\n		{{#square_connected}}\n			<div class="connected">\n				<span class="w-icon-check-mark"></span>&nbsp;<b>{{#tl}}Connected to{{/tl}}</b><br> <b>{{square_name}}</b><br>\n				{{#can_edit_store}}\n				    <span class="divider"></span><br>\n				    <a class="disconnect-button" data-gateway="Square" href="#"><b>{{#tl}}Disable{{/tl}}</b></a>\n				{{/can_edit_store}}\n			</div>\n		{{/square_connected}}\n		{{^square_connected}}\n			{{#has_business}}\n				<a class="btn-com btn-block connect-button inactive" data-gateway="Square">{{#tl}}Enable{{/tl}}</a>\n			{{/has_business}}\n\n			{{^has_business}}\n				<div class="upgrade-required">\n					<span>\n						<a href="#" class="upgrade-business" data-gateway="Square">{{#tl}}Upgrade{{/tl}}</a> {{#tl}} to Business to use Square{{/tl}}\n					</span>\n				</div>\n			{{/has_business}}\n		{{/square_connected}}\n	</td>\n	<div style="clear: both;"></div>\n</tr>\n'}),_wAMD.define("commerce/editor/store/setting/payment/OptionsListView",["jquery","backbone-all","mustache","editor/app","components/views/ConfirmView","tpl!commerce/editor/store/setting/payment/options-list","tpl!commerce/editor/store/setting/payment/options/stripe","tpl!commerce/editor/store/setting/payment/options/paypal","tpl!commerce/editor/store/setting/payment/options/authorize","tpl!commerce/editor/store/setting/payment/options/square"],function(e,t,i,n,o,s,r,a,l,c){i.compilePartial("commerce/editor/store/setting/payment/options/stripe",r),i.compilePartial("commerce/editor/store/setting/payment/options/paypal",a),i.compilePartial("commerce/editor/store/setting/payment/options/authorize",l),i.compilePartial("commerce/editor/store/setting/payment/options/square",c);var u=t.Marionette.ItemView.extend({template:i.compile(s),templateHelpers:function(){var e=this;return{stripe_connected:function(){return e.enabledGateways.Stripe},square_connected:function(){return e.enabledGateways.Square},paypal_connected:function(){return e.enabledGateways.PayPal},authorize_connected:function(){return e.enabledGateways.AuthorizeNet},credit_card_connected:function(){return""!=e.enabledGateways&&!_.isEmpty(_.pick(e.enabledGateways,"Square","Stripe","AuthorizeNet"))},authorize_name:function(){return e.enabledGateways.AuthorizeNet.login},paypal_name:function(){return e.enabledGateways.PayPal.login},has_paypal_access:function(){return Weebly.Restrictions.hasAccess("com_paypal_payment")},stripe_name:function(){return e.stripe_account?e.stripe_account.email:""},stripe_details_needed:function(){return e.stripe_account&&!e.stripe_account.details_submitted},stripe_update_url:function(){return e.stripe_account?"https://connect.stripe.com/account/activate?client_id="+e.stripe_account.client_id+"&user_id="+e.stripe_account.id+"&state="+e.stripe_account.state:""},square_name:function(){return e.square_account?e.square_account.email:""},square_details_needed:function(){return e.square_account?!_.contains(e.square_account.account_capabilities,"CREDIT_CARD_PROCESSING"):e.square_account&&!0},square_update_url:function(){return e.square_account?"https://squareup.com/login":""},square_contact_url:function(){return e.square_account?"https://squareup.com/square-support":""},has_business:function(){return Weebly.Restrictions.hasBusiness()},fee_required:function(){return Weebly.Restrictions.accessValue("com_transaction_fee")>0},is_site_owner:function(){return isMaster||!Weebly.Permissions.isContributor},is_client_site:function(){return Weebly.Restrictions.isClientSite},can_edit_store:function(){return isMaster||Weebly.Permissions.store_edit}}},ui:{connectBtn:".connect-button"},initialize:function(){this.enabledGateways=n.commerce.storefrontSettings.get("enabled_gateways"),this.listenTo(n.vent,"user:upgrade",this.render),this.listenTo(n.commerce.storefrontSettings,"change",this.render)},onBeforeRender:function(){this.enabledGateways=n.commerce.storefrontSettings.get("enabled_gateways")},onRender:function(){var e=this;_.has(this.enabledGateways,"Stripe")&&!this.stripe_account&&this.refreshStripeAccount(),_.has(this.enabledGateways,"Square")&&!this.square_account&&this.refreshSquareAccount(),n.commerce.store.setting.getSquareConnectData(function(){e.ui.connectBtn.removeClass("inactive")}),this.ui.connectBtn.wLoadButton()},onShow:function(){},events:{"click .connect-button":"connectGateway","click .disconnect-button":"disconnectGateway","click .upgrade-business":"showBilling"},connectGateway:function(t){if(e(t.currentTarget).hasClass("inactive"))return!1;this.trigger("change");var i=this,o=e(t.target).data("gateway");if(n.commerce.storefrontSettings.get("currency"),e(t.target),o&&this.validGatewayCombination(o)){var s="com_"+o.toLowerCase()+"_payment";if(!Weebly.Restrictions.hasAccess(s))return n.vent.trigger("billing:upgrade:window",{restrictionID:s,restrictionType:"feature",refer:"commerce"}),void 0}"Stripe"==o?n.commerce.store.setting.getStripeConnectData(function(){n.commerce.vent.trigger("store:setting:payment:connect",o)}):"Square"==o?i.openSquareConnect():n.commerce.vent.trigger("store:setting:payment:connect",o)},validGatewayCombination:function(e){return"AuthorizeNet"==e&&_.has(this.enabledGateways,"Stripe")||"Stripe"==e&&_.has(this.enabledGateways,"AuthorizeNet")?!1:!0},disconnectGateway:function(t){t.preventDefault();var i=e(t.currentTarget).data("gateway");Weebly.Commerce.RPC.StorefrontSettings.disconnectGateway(i),this.stripe_account=null,this.square_account=null,n.commerce.storefrontSettings.fetch(),this.trigger("change")},refreshStripeAccount:function(){var e=this;n.commerce.RPC.StorefrontSettings.getStripeAccount().done(function(t){t.id&&(e.stripe_account=t,e.render())})},refreshSquareAccount:function(){var e=this;n.commerce.RPC.StorefrontSettings.getSquareAccount().done(function(t){t.id&&(e.square_account=t,e.render())})},showBilling:function(e){e.preventDefault();var t,i=this,s=e.target.dataset.gateway;"Stripe"==s?(t=Weebly.Restrictions.isClientSite?_W.tl("Upgrade to the Business plan to remove the 3% transaction fee. If you upgrade, your only transaction fee will be the 2.9% + 30¢ fee charged by Stripe."):_W.tl("Upgrade to the Business plan to remove the 3% transaction fee charged by Weebly. If you upgrade, your only transaction fee will be the 2.9% + 30¢ fee charged by Stripe."),n.showDialog(new o({title:_W.tl("Upgrade to Business Plan"),message:t,confirmText:_W.tl("Upgrade to Business"),callback:function(e){e&&i.openBillingUpgradeWindow()}}))):this.openBillingUpgradeWindow()},openBillingUpgradeWindow:function(){n.vent.trigger("billing:upgrade:window",{restrictionID:"transaction_fee",restrictionType:"feature",type:"business",refer:"commerce"})},openSquareConnect:function(){function e(){i.closed?n.commerce.storefrontSettings.fetch().done(function(){n.commerce.storefrontSettings.get("enabled_gateways").Square&&t.trigger("dialog:close")}):setTimeout(e,200)}var t=this,i=window.open(n.commerce.store.setting.squareConnectUrl,"_blank","width=900,height=800");setTimeout(e,200)}});return u}),_wAMD.define("tpl!commerce/editor/store/setting/payment/connect-gateway",[],function(){return'<form>\n	<div class="alert alert-error">\n		<span class="error-message"></span>\n	</div>\n	{{#is_paypal}}\n		{{>commerce/editor/store/setting/payment/connect-gateway-paypal}}\n	{{/is_paypal}}\n\n	{{#is_authorize}}\n		{{>commerce/editor/store/setting/payment/connect-gateway-authorize}}\n	{{/is_authorize}}\n</form>'}),_wAMD.define("tpl!commerce/editor/store/setting/payment/connect-gateway-paypal",[],function(){return'<label for="editor_commerce_paypal_login">{{#tl}}Email{{/tl}}</label><br>\n<input id="editor_commerce_paypal_login" class="login_email" type="text" name="PayPal_login" value="{{user_email}}" />\n{{#gateway_set}}\n	<b>{{#tl}}Currency{{/tl}}</b><br>\n	{{currency}} <span class="">{{#tl}} | Disconnect from {{existing_gateway}} to change store currency{{/tl}}</span>\n{{/gateway_set}}\n{{^gateway_set}}\n	<label for="editor_commerce_paypal_currency">{{#tl}}Currency{{/tl}}</label><br>\n	<select id="editor_commerce_paypal_currency" name="currency">\n		{{#currencies}}\n		<option value="{{abbreviation}}">{{abbreviation}} - {{name}}</option>\n		{{/currencies}}\n	</select>\n{{/gateway_set}}'}),_wAMD.define("tpl!commerce/editor/store/setting/payment/connect-gateway-authorize",[],function(){return'{{#not_usd}}\n	<p class="ui-dialog-alert"><strong>{{#tl}}Important:{{/tl}}</strong> {{#tl}}Currently Authorize.net is only supported with USD. Your store\'s currency will be changed to USD if you connect to Authorize.net.{{/tl}}</p>\n{{/not_usd}}\n\n<label for="editor_commerce_authorize_login">{{#tl}}Login ID{{/tl}}</label><br>\n<input id="editor_commerce_authorize_login" type="text" name="AuthorizeNet_login" />\n\n<label for="editor_commerce_authorize_password">{{#tl}}Transaction Key{{/tl}}</label><br>\n<input id="editor_commerce_authorize_password" type="text" name="AuthorizeNet_password" />'}),_wAMD.define("commerce/editor/store/setting/payment/ConnectGatewayView",["jquery","backbone-all","mustache","editor/app","editor/utils","commerce/editor/model/PaymentGateway","util/ui/wLoadButton","tpl!commerce/editor/store/setting/payment/connect-gateway","tpl!commerce/editor/store/setting/payment/connect-gateway-paypal","tpl!commerce/editor/store/setting/payment/connect-gateway-authorize","json!definitions/currencies.json","json!definitions/countries.json"],function(e,t,i,n,o,s,r,a,l,c,u,d){var h="commerce/editor/store/setting/payment/";({paypal:i.compilePartial(h+"connect-gateway-paypal",l),authorize:i.compilePartial(h+"connect-gateway-authorize",c)});var p=t.Marionette.ItemView.extend({template:i.compile(a),templateHelpers:{currencies:u,countries:d,currency:function(){return n.commerce.storefrontSettings.get("currency")},existing_gateway:function(){return n.commerce.storefrontSettings.get("gateway")},is_paypal:function(){return"PayPal"==this.gateway},is_authorize:function(){return"AuthorizeNet"==this.gateway},user_email:function(){return"undefined"!=typeof userEmail?userEmail:""},not_usd:function(){return"USD"!=n.commerce.storefrontSettings.get("currency")},gateway_set:function(){return _.size(n.commerce.storefrontSettings.get("enabled_gateways"))>0}},dialog:{title:_W.tl("Connect Gateway"),dialogClass:"payment-connect-gateway-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Connect"),className:"btn-com btn-save btn-success"}]}]},onShow:function(){this.$el.find(".btn-save").wLoadButton()},events:{"click .btn-cancel":"cancel","click .btn-save":"saveGateway","submit form":"saveGateway"},ui:{errorBox:".alert-error",errorMsg:".error-message"},cancel:function(e){e.preventDefault(),this.trigger("dialog:close")},saveGateway:function(e){e.preventDefault();var t=this,i=this.model.get("gateway");if("PayPal"==i){var n=t.$el.find(".login_email").val().toLowerCase();o.isValidEmail(n)?this.saveGatewayData(i):(t.ui.errorMsg.html(_W.tl("Invalid email address")),t.ui.errorBox.show())}else this.saveGatewayData(i)},saveGatewayData:function(e){n.commerce.storefrontSettings.get("enabled_gateways");var t=s.findOrCreate({owner_id:n.commerce.owner_id,site_id:n.commerce.site_id,gateway:e}),i=this.getCurrency(e);t.set(this.getGatewayValues()),t.save().done(function(t){t.success&&n.commerce.storefrontSettings.set({gateway:e,currency:i}),n.commerce.storefrontSettings.save(),n.commerce.storefrontSettings.fetch()}),this.trigger("dialog:close")},getGatewayValues:function(){var t=this.model.get("gateway"),i={},n=this.$el.find("form").serializeArray();return e.each(n,function(){if(-1!=this.name.indexOf(t)){var e=this.name.replace(t+"_","");i[e]=this.value}}),i},getCurrency:function(e){if("AuthorizeNet"==e)return"USD";var t=this.$el.find("select[name=currency]").val();return t?t:n.commerce.storefrontSettings.get("currency")}});return p}),_wAMD.define("tpl!commerce/editor/store/setting/payment/connect-gateway-stripe",[],function(){return'{{#isClientSite}}\n	<p>{{#tl}}We have partnered with Stripe to provide an integrated checkout experience directly within your site.{{/tl}}</p>\n{{/isClientSite}}\n\n{{^isClientSite}}\n	<p>{{#tl}}Weebly has partnered with Stripe to provide an integrated checkout experience directly within your site.{{/tl}}</p>\n{{/isClientSite}}\n\n<p>{{#tl}}Continue to instantly start accepting payment from your customers{{/tl}}</p>\n\n<form>\n	<label>\n		<input type="radio" name="connect-type" value="new" checked />\n		{{#tl}}Create a New Stripe Account{{/tl}}\n	</label><br>\n	<label>\n		<input type="radio" name="connect-type" value="existing" />\n		{{#tl}}I already have a Stripe Acount{{/tl}}\n	</label>\n</form>'}),_wAMD.define("commerce/editor/store/setting/payment/ConnectStripeView",["jquery","backbone-all","mustache","editor/app","commerce/editor/model/PaymentGateway","util/ui/wLoadButton","tpl!commerce/editor/store/setting/payment/connect-gateway-stripe"],function(e,t,i,n,o,s,r){var a=t.Marionette.ItemView.extend({template:i.compile(r),dialog:{title:_W.tl("Connect Stripe"),dialogClass:"payment-connect-stripe-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{html:'<span class="text">'+_W.tl("Next")+"</span>",className:"btn-com btn-info btn-next"}]}]},templateHelpers:{isClientSite:function(){return Weebly.Restrictions.isClientSite}},onRender:function(){this.$el.find("input[type=radio]").wRadio(),this.highlightSelected()},onShow:function(){this.$el.find(".btn-next").wLoadButton()},events:{"click .btn-cancel":"cancel","click .btn-next":"next","change input[type=radio]":"highlightSelected"},highlightSelected:function(){var e=this;setTimeout(function(){e.$el.find("label").removeClass("selected"),e.$el.find("input:checked").parents("label").addClass("selected")},10)},cancel:function(e){e.preventDefault(),this.trigger("dialog:close")},next:function(e){e.preventDefault();var t=this.$el.find('input[type="radio"]:checked').val(),i=this;"existing"==t?this.openStripeConnect():(i.$el.find(".btn-next").wLoadButton("startWait"),n.commerce.RPC.StorefrontSettings.getStripeAllowedCountriesWithCurrencies().done(function(e){i.$el.find(".btn-next").wLoadButton("endWait"),i.trigger("dialog:close"),n.commerce.vent.trigger("store:setting:payment:stripe:create",e)}))},openStripeConnect:function(){function e(){i.closed?n.commerce.storefrontSettings.fetch().done(function(){n.commerce.storefrontSettings.get("enabled_gateways").Stripe&&t.trigger("dialog:close")}):setTimeout(e,200)}var t=this,i=window.open(n.commerce.store.setting.stripeConnectUrl,"_blank","width=900,height=800");setTimeout(e,200)}});return a}),_wAMD.define("tpl!commerce/editor/store/setting/payment/create-stripe-account",[],function(){return'<form>\n	<div class="alert alert-error">\n		<span class="error-message"></span>\n	</div>\n	<p>{{#tl}}Please confirm this information about your store.{{/tl}}</p>\n	\n	<label for="editor_commerce_stripe_email">{{#tl}}Email{{/tl}}</label><br>\n	<input id="editor_commerce_stripe_email" type="text" name="Stripe_email" value="{{email}}" />\n	\n	<label for="editor_commerce_stripe_location">{{#tl}}Location{{/tl}}</label><br>\n	<select id="editor_commerce_stripe_location" name="Stripe_country">\n		{{#countries}}\n		<option value="{{cca2}}">{{name}}</option>\n		{{/countries}}\n	</select><br>\n	\n	<label for="editor_commerce_stripe_currency">{{#tl}}Currency{{/tl}}</label><br>\n	<select id="editor_commerce_stripe_currency" name="Stripe_currency">\n	</select>\n\n	<div class="extra-fields">\n		<label for="editor_commerce_stripe_url">{{#tl}}Store URL{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_url" type="text" name="Stripe_url" value="{{url}}"/>\n\n		<label for="editor_commerce_stripe_first_name">{{#tl}}First name{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_first_name" type="text" name="Stripe_first_name"/>\n\n		<label for="editor_commerce_stripe_last_name">{{#tl}}Last name{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_last_name" type="text" name="Stripe_last_name"/>\n\n		<label for="editor_commerce_stripe_street_address">{{#tl}}Street address{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_street_address" type="text" name="Stripe_street_address" value="{{streetAddress}}"/>\n\n		<label for="editor_commerce_stripe_street_city">{{#tl}}City{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_street_city" type="text" name="Stripe_city" value="{{city}}"/>\n\n		<label for="editor_commerce_stripe_street_state">{{#tl}}State{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_street_state" type="text" name="Stripe_state" value="{{state}}"/>\n\n		<label for="editor_commerce_stripe_street_zip">{{#tl}}Zip{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_street_zip" type="text" name="Stripe_zip" value="{{zip}}"/>\n\n		<label for="editor_commerce_stripe_street_phone_number">{{#tl}}Phone number{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_street_phone_number" type="text" name="Stripe_phone_number" value="{{phoneNumber}}"/>\n\n		<label for="editor_commerce_stripe_street_business_name">{{#tl}}Business name{{/tl}}</label><br>\n		<input id="editor_commerce_stripe_street_business_name" type="text" name="Stripe_business_name" value="{{businessName}}"/>\n\n		<label for="editor_commerce_stripe_product_category">{{#tl}}Business category{{/tl}}</label><br>\n		<select id="editor_commerce_stripe_product_category" name="Stripe_product_category">\n			{{#productCategories}}\n			<option value="{{category}}">{{humanName}}</option>\n			{{/productCategories}}\n		</select><br>\n\n		<label for="editor_commerce_stripe_business_type">{{#tl}}Business type{{/tl}}</label><br>\n		<select id="editor_commerce_stripe_business_type" name="Stripe_business_type">\n			{{#businessTypes}}\n			<option value="{{type}}">{{humanName}}</option>\n			{{/businessTypes}}\n		</select>\n	</div>\n</form>'
}),_wAMD.define("commerce/editor/store/setting/payment/CreateStripeView",["jquery","backbone-all","mustache","editor/app","commerce/editor/model/PaymentGateway","util/ui/wLoadButton","tpl!commerce/editor/store/setting/payment/create-stripe-account"],function(e,t,i,n,o,s,r){var a=t.Marionette.ItemView.extend({template:i.compile(r),className:"connect-stripe-container",currencies:{USD:_W.tl("U.S. Dollars"),CAD:_W.tl("Canadian Dollars"),EUR:_W.tl("Euros"),GBP:_W.tl("British Pounds"),AUD:_W.tl("Australian Dollars")},templateHelpers:{countries:function(){return[{name:_W.tl("United States"),tld:".us",cca2:"US",ccn3:840,cca3:"USA",currency:"USD,USN,USS","calling-code":"1","alt-spellings":"US,USA,United States of America",relevance:3.5,region:"Americas",subregion:"Northern America"},{name:_W.tl("Canada"),tld:".ca",cca2:"CA",ccn3:124,cca3:"CAN",currency:"CAD","calling-code":"1","alt-spellings":"CA",relevance:2,region:"Americas",subregion:"Northern America"},{name:_W.tl("United Kingdom"),cca2:"GB"},{name:_W.tl("Ireland"),cca2:"IE"},{name:_W.tl("France"),cca2:"FR"},{name:_W.tl("Netherlands"),cca2:"NL"},{name:_W.tl("Belgium"),cca2:"IE"},{name:_W.tl("Germany"),cca2:"DE"},{name:_W.tl("Spain"),cca2:"ES"},{name:_W.tl("Luxembourg"),cca2:"LU"},{name:_W.tl("Finland"),cca2:"FI"},{name:_W.tl("Australia"),cca2:"AU"}]},productCategories:function(){return[{category:"art_and_graphic_design",humanName:_W.tl("Art and graphic design")},{category:"advertising",humanName:_W.tl("Advertising")},{category:"charity",humanName:_W.tl("Charity")},{category:"clothing_and_accessories",humanName:_W.tl("Clothing and accessories")},{category:"consulting",humanName:_W.tl("Consulting")},{category:"clubs_and_membership_organizations",humanName:_W.tl("Clubs and membership organizations")},{category:"education",humanName:_W.tl("Education")},{category:"events_and_ticketing",humanName:_W.tl("Events and ticketing")},{category:"food_and_restaurants",humanName:_W.tl("Food and restaurants")},{category:"software",humanName:_W.tl("Software")},{category:"professional_services",humanName:_W.tl("Professional services")},{category:"tourism_and_travel",humanName:_W.tl("Tourism and travel")},{category:"web_development",humanName:_W.tl("Web development")},{category:"other",humanName:_W.tl("Other")}]},businessTypes:function(){return[{type:"sole_prop",humanName:_W.tl("Sole proprietorship")},{type:"corporation",humanName:_W.tl("Corporation")},{type:"non_profit",humanName:_W.tl("Non-profit")},{type:"partnership",humanName:_W.tl("Partnership")},{type:"llc",humanName:_W.tl("L.L.C.")}]},email:function(){return n.commerce.store.setting.stripeEmail},url:function(){return currentSiteLocation},streetAddress:function(){return n.commerce.storefrontSettings.get("store_address_street")},city:function(){return n.commerce.storefrontSettings.get("store_address_city")},state:function(){return n.commerce.storefrontSettings.get("store_address_state")},zip:function(){return n.commerce.storefrontSettings.get("store_address_postal_code")},phoneNumber:function(){return n.commerce.storefrontSettings.get("phone_number")},businessName:function(){return n.commerce.storefrontSettings.get("company_name")}},dialog:{title:_W.tl("Create Stripe Account"),dialogClass:"payment-connect-gateway-dialog",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-back"},{group:"pull-right",buttons:[{text:_W.tl("Next"),className:"btn-com btn-info btn-connect"}]}]},ui:{countrySelect:"#editor_commerce_stripe_location",currencySelect:"#editor_commerce_stripe_currency",extraFields:".extra-fields",errorBox:".alert-error",errorMsg:".error-message"},onRender:function(){this.$el.find("select[name=Stripe_country]").val(n.commerce.storefrontSettings.get("store_address_country")),this.$el.find("select[name=Stripe_currency]").val(n.commerce.storefrontSettings.get("currency")),this.updateCurrencies(),this.smartToggleExtraFields()},onShow:function(){this.$el.find(".btn-connect").wLoadButton()},events:{"click .btn-back":"cancel","click .btn-connect":"createStripeAccount","submit form":"createStripeAccount","change #editor_commerce_stripe_location":function(){this.updateCurrencies(),this.smartToggleExtraFields()}},smartToggleExtraFields:function(){var e=this.ui.countrySelect.val();"US"==e||"CA"==e||"AU"==e?this.ui.extraFields.hide():this.ui.extraFields.show()},updateCurrencies:function(){for(var e=this.ui.countrySelect.val(),t="",i=this.options.allowedCurrencies[e],n=0;n<i.length;n++)t+='<option value="'+i[n]+'">'+i[n]+" - "+this.currencies[i[n]]+"</option>";this.ui.currencySelect.empty().append(t)},cancel:function(e){e.preventDefault(),this.trigger("dialog:close"),n.commerce.vent.trigger("store:setting:payment:connect","Stripe")},createStripeAccount:function(){var t=this,i=this.getGatewayValues(),o=this.$el.find(".btn-connect").wLoadButton("startWait");Weebly.Commerce.RPC.StorefrontSettings.createStripeAccount(i).done(function(i){if(o.wLoadButton("endWait"),n.commerce.storefrontSettings.fetch(),"success"==i.status&&(n.commerce.store.setting.stripe_user_id=i.stripe_user_id,n.commerce.store.setting.stripe_client_id=i.client_id,n.commerce.store.setting.stripe_state=i.state,t.trigger("dialog:close"),n.commerce.vent.trigger("store:setting:payment:stripe:confirm")),i.error){var s="Missing required param: ",r=i.error.message.indexOf(s),a="";if(0==r)var l=i.error.message.substring(s.length),c=l.replace("_"," "),a=_W.tl("Missing parameter: ")+c;else a=i.error.message;t.ui.errorMsg.html(a),t.ui.errorBox.show(),e(".connect-stripe-container").animate({scrollTop:0},"medium")}})},getGatewayValues:function(){var t="Stripe",i={},n=this.$el.find("form").serializeArray();e.each(n,function(){if(-1!=this.name.indexOf(t)){var e=this.name.replace(t+"_","");""!==this.value&&(i[e]=this.value)}});var o=this.ui.countrySelect.val();return("US"==o||"CA"==o||"AU"==o)&&this.$el.find(".extra-fields input").each(function(e,t){var n=t.getAttribute("name").substring(7);delete i[n]}),i}});return a}),_wAMD.define("tpl!commerce/editor/store/setting/payment/stripe-account-created",[],function(){return'<p><b>{{#tl}}Congratulations, your store is connected with Stripe and you are now accepting payments from customers!{{/tl}}</b></p>\n\n<p>{{#tl}}Stripe needs you to <a href="{{stripe_activate_url}}" target="_blank">provide some additional information</a> in order to deposit money into your bank account. Please check your email for details on completing this final step.{{/tl}}</p>\n'}),_wAMD.define("commerce/editor/store/setting/payment/StripeAccountCreatedView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/payment/stripe-account-created"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:{stripe_activate_url:function(){return"https://connect.stripe.com/account/activate?client_id="+n.commerce.store.setting.stripe_client_id+"&user_id="+n.commerce.store.setting.stripe_user_id+"&state="+n.commerce.store.setting.stripe_state}},dialog:{title:_W.tl("Congratulations!"),dialogClass:"payment-connect-gateway-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Close"),className:"btn-com btn-close"}]}]},events:{"click .btn-close":"cancel"},cancel:function(){this.trigger("dialog:close")}});return s}),_wAMD.define("tpl!commerce/editor/store/setting/payment/main",[],function(){return'<div class="payment-options-list"></div>\n'}),_wAMD.define("commerce/editor/store/setting/payment/PaymentView",["jquery","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","commerce/editor/model/PaymentGateway","commerce/editor/store/setting/payment/OptionsListView","commerce/editor/store/setting/payment/ConnectGatewayView","commerce/editor/store/setting/payment/ConnectStripeView","commerce/editor/store/setting/payment/CreateStripeView","commerce/editor/store/setting/payment/StripeAccountCreatedView","tpl!commerce/editor/store/setting/payment/main"],function(e,t,i,n,o,s,r,a,l,c,u,d){var h=o.extend({template:i.compile(d),regions:{paymentOptions:".payment-options-list"},onRender:function(){o.prototype.onRender.call(this);var e=new r;this.paymentOptions.show(e)},initialize:function(){var e=this;this.listenTo(n.commerce.vent,"store:setting:payment:connect",function(i){var n;"Stripe"==i?(n=new l,e.dialogRegion.show(n)):(n=new a({model:new t.Model({gateway:i})}),e.dialogRegion.show(n))}),this.listenTo(n.commerce.vent,"store:setting:payment:stripe:create",function(t){e.dialogRegion.show(new c({allowedCurrencies:t}))}),this.listenTo(n.commerce.vent,"store:setting:payment:stripe:confirm",function(){e.dialogRegion.show(new u)})}});return h}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/add-country",[],function(){return'<div class="dialog-body">\n	<a class="pill-left show-countries selected" href="#">{{#tl}}Countries{{/tl}}</a><a class="pill-right show-regions" href="#">{{#tl}}Regions{{/tl}}</a>\n	\n	<span class="input-labeled input-search">\n		<input type="text" name="search" placeholder="{{#esc_attr}}{{#tl}}Search{{/tl}}{{/esc_attr}}" />\n	</span>\n	\n	<div class="country-chooser country-list w-massless-scroll">\n		<div class="scroll-outer">\n			<div class="scroll-inner">\n				<ul>\n					{{#regions}}\n					<li class="region">\n						<strong class="item">\n							{{region}}\n							<i class="w-icon-check-mark"></i>\n						</strong>\n						<ul>\n							{{#countries}}\n							<li class="item {{^isRegion}}country-item{{/isRegion}}" data-country="{{cca2}}">\n								<img class="flag" src="//{{ASSETS_BASE}}/images/util/flags/{{flag}}.png" />\n								<span class="country-name">{{name}}</span>\n								<i class="w-icon-check-mark"></i>\n							</li>\n							{{/countries}}\n						</ul>\n					</li>\n					{{/regions}}\n				</ul>\n			</div>\n		</div>\n	</div>\n	\n	<div class="country-chooser region-list">\n		<ul>\n			{{#restOfRegions}}\n			<li class="item country-item" data-country="{{cca2}}">\n				<span class="country-name">{{name}}</span>\n				<i class="w-icon-check-mark"></i>\n			</li>\n			{{/restOfRegions}}\n		</ul>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/setting/shipping/AddCountryView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/shipping/add-country","json!definitions/countries.json"],function(e,t,i,n,o,s){var r=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:function(){return{ASSETS_BASE:ASSETS_BASE,regions:this.regions,restOfRegions:this.restOfRegions}},initialize:function(e){this.options=e,this.createRegionCountries()},dialog:{title:_W.tl("Add Shipping Location"),buttons:[{group:"pull-right",buttons:[{text:"Cancel",className:"btn-com btn-cancel"},{text:"Add",className:"btn-com btn-save btn-success"}]}],dialogClass:"shipping-add-country-dialog"},onRender:function(){this.initScrolling(),this.showCountries()},initScrolling:function(){this.$el.find(".scroll-inner").weeblyScroll(),this.$el.find(".w-massless-scroll").stickySectionHeaders({scrollSelector:".scroll-inner"})},destroyScrolling:function(){this.$el.find(".scroll-inner").weeblyScroll("destroy"),this.$el.find(".scroll-inner").weeblyScroll(),this.$el.find(".w-massless-scroll").stickySectionHeaders("destroy")},events:{"click a.show-countries":"showCountries","click a.show-regions":"showRegions","click li.item":"selectCountry","keyup input[name=search]":"search","click .btn-cancel":function(){this.trigger("dialog:close")},"click .btn-save":"addCountries"},showCountries:function(e){e&&e.preventDefault(),this.$el.find("a.show-regions").removeClass("selected"),this.$el.find("a.show-countries").addClass("selected"),this.$el.find(".country-list").show(),this.$el.find(".region-list").hide()},showRegions:function(e){e&&e.preventDefault(),this.$el.find("a.show-regions").addClass("selected"),this.$el.find("a.show-countries").removeClass("selected"),this.$el.find(".country-list").hide(),this.$el.find(".region-list").show()},selectCountry:function(t){var i=e(t.currentTarget),n=i.parents(".region");i.toggleClass("selected"),n.find("li.country-item").length==n.find("li.country-item.selected").length?n.addClass("selected"):n.removeClass("selected")},selectRegion:function(){var t=e(event.target).parents(".region");t.hasClass("selected")?(t.find("li.country-item").removeClass("selected"),t.removeClass("selected")):(t.find("li.country-item").addClass("selected"),t.addClass("selected"))},search:function(){var t=this.$el.find("input[name=search]").val(),i=this.$el.find(".item");t?(t=t.toLowerCase(),i.hide(),this.destroyScrolling(),this.$el.find(".region.sticky").css({paddingTop:"0px"}),i.each(function(){var i=e(this).find(".country-name").text();i&&-1!==i.toLowerCase().indexOf(t)&&this.show()})):(this.$el.find(".region.sticky").css({paddingTop:"38px"}),this.initScrolling(),i.show())},addCountries:function(t){t.preventDefault();var i=[];this.$el.find(".item.selected").each(function(){var t=e(this).data("country");countryRates=n.commerce.store.setting.createCountryRatesModel(t),i.push(countryRates),n.commerce.store.setting.used_countries.push(t)}),i.length>0&&n.commerce.store.setting.country_rates.add(i),this.trigger("dialog:close")},createRegionCountries:function(){function t(e){var t="";switch(e){case"North America":t="0";break;case"Europe":t="1";break;case"South America":t="2";break;case"Central America":t="3";break;case"Asia":t="4";break;case"Oceania":t="5"}return t+e}var i=this,o={},r=this.options.unavailable_countries||[],a=s.slice(0);e.each(a,function(){if(-1==_.indexOf(r,this.cca2)&&!this.exclude){this.flag=this.cca2.toLowerCase();var e=i.getRegionFromCountry(this);o[e]?o[e].countries.push(this):o[e]={region:e,countries:[this]}}});var l=_.values(o);this.restOfRegions=[],-1==_.indexOf(r,"WORLD")&&this.restOfRegions.push({cca2:"WORLD",name:_W.tl("Rest of World"),isRegion:!0}),e.each(l,function(){var e=this.region.toUpperCase().replace(/\s/g,"");"Other"!=this.region&&-1==_.indexOf(r,e)&&i.restOfRegions.push({cca2:e,name:n.commerce.store.setting.getCountryName(e),flag:this.region.toLowerCase().replace(/\s/g,""),isRegion:!0})}),l.sort(function(e,i){var n=t(e.region),o=t(i.region);return n>o?1:o>n?-1:0}),this.regions=l},getRegionFromCountry:function(e){var t=e.region||"Other";return"Americas"==t&&(t=e.subregion),"Northern America"==t&&(t="North America"),t}});return r}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/rate-detail",[],function(){return'<form id="commerce-store-shipping-edit-rate">\n	<div class="rate-form-row">\n		<label for="editor_commerce_rate_title">{{#tl}}Shipping Title{{/tl}}</label><br>\n		<input id="editor_commerce_rate_title" type="text" name="title" placeholder="{{#esc_attr}}{{#tl}}USPS, Fedex 3-day, etc{{/tl}}{{/esc_attr}}" value="{{title}}" />\n	</div>\n	<div class="rate-form-row">\n		<div class="form-left">\n			<label>{{#tl}}Based On:{{/tl}}</label><br>\n			<a class="pill-left based-on-price selected" href="#">{{#tl}}Price{{/tl}}</a><a class="pill-right based-on-weight" href="#">{{#tl}}Weight{{/tl}}</a>\n			<input type="hidden" name="type" value="{{type}}" />\n		</div>\n		<div class="form-right range-section">\n			<label for="editor_commerce_rate_range_min" class="range-label">{{#tl}}Price Range{{/tl}}</label> <span class="optional">({{#tl}}optional{{/tl}})</span><br>\n			<span class="{{currency_class}} input-label-number">\n				<input id="editor_commerce_rate_range_min" class="price-range" type="number" name="minimum" min="0" value="{{formatted_minimum}}" />\n			</span>\n\n			<span class="price-range-to"> - </span>\n			<span class="{{currency_class}} input-label-number">\n				<input id="editor_commerce_rate_range_max" class="price-range" type="number" name="maximum" min="0" value="{{formatted_maximum}}" />\n			</span>\n		</div>\n	</div>\n	<div class="rate-form-row">\n		<label for="editor_commerce_rate_shipping_price">{{#tl}}Shipping Price{{/tl}}</label><br>\n		<span class="{{currency_class}} input-label-number">\n			<input id="editor_commerce_rate_shipping_price" type="number" name="price" min="0" value="{{formatted_price}}" />\n		</span>\n	</div>\n</form>\n'}),_wAMD.define("commerce/editor/store/setting/shipping/RateDetailView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/shipping/rate-detail","json!definitions/states.json"],function(e,t,i,n,o,s){function r(e){return parseFloat(e).toFixed(2)}var a=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:{currency_class:function(){return"input-currency-"+n.commerce.storefrontSettings.get("currency")},formatted_minimum:function(){return r(this.minimum)},formatted_maximum:function(){return r(this.maximum)},formatted_price:function(){return r(this.price)}},dialog:{dialogClass:"shipping-rate-detail-dialog"},initialize:function(){this.dialog.title=this.model.isNew()?_W.tl("Add Shipping Rate"):_W.tl("Edit Shipping Rate");var e=[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Save"),className:"btn-com btn-save btn-success"}]}];this.hasRegions()&&e.push({text:_W.tl("Edit Subregions"),className:"btn-subregion btn-com"}),this.dialog.buttons=e},hasRegions:function(){return!!s[this.model.get("country")]},onRender:function(){this.setType(this.model.get("type")),this.setRangeLabel()},events:{"click .btn-cancel":"cancelEdit","click .btn-save":"saveRate","click .btn-subregion":"editRegions","click .based-on-price":function(){this.setType("Price")},"click .based-on-weight":function(){this.setType("Weight")}},saveRate:function(){var e=this.model,t=e.isNew();this.updateRate(),this.model.saveWithRegionRates().done(function(i){t&&i&&i.success&&n.commerce.storefrontSettings.get("shipping_rates").add(e)}),this.trigger("dialog:close")},updateRate:function(){var t={};e.each(this.$el.find("form").serializeArray(),function(){t[this.name]=this.value}),this.model.set(t)},cancelEdit:function(){this.model.resetWithRegionRates(),this.trigger("dialog:close")},editRegions:function(){this.updateRate(),n.commerce.vent.trigger("store:setting:shipping:region:edit",this.model)},setType:function(e){switch(e){case"Price":var t="Price",i=".based-on-price",n=".based-on-weight";break;case"Weight":var t="Weight",i=".based-on-weight",n=".based-on-price"}this.$el.find("input[name=type]").val(t),this.$el.find(n).removeClass("selected"),this.$el.find(i).addClass("selected"),this.setRangeLabel()},setRangeLabel:function(){var e=_W.tl("Price Range"),t="input-currency-"+n.commerce.storefrontSettings.get("currency");"Weight"==this.$el.find("input[name=type]").val()&&(e=_W.tl("Weight Range"),t=this.getWeightLabelClass()),this.$el.find(".range-label").text(e),this.$el.find(".range-section span.input-label-number").attr("class","input-label-number "+t)},getWeightLabelClass:function(){var e="input-weight-si";return"kg"==n.commerce.storefrontSettings.get("weight_unit")&&(e="input-weight-metric"),e}});return a}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/country-item",[],function(){return'<table class="rate-country list-table" cellspacing="0">\n	<thead>\n		<tr>\n			<th>\n				<img class="flag" src="//{{ASSETS_BASE}}/images/util/flags/{{flag}}.png" />\n				{{name}}\n			</th>\n			<th></th>\n			<th>\n				<a class="delete-country" href="#"><i class="w-icon-delete"></i></a>\n			</th>\n		</tr>\n	</thead>\n	<tfoot class="add-rate">\n		<tr>\n			<td>\n				<a href="#" class="light-text"><i class="w-icon-plus"></i> {{#tl}}Add Rate{{/tl}}</a>\n			</td>\n			<td></td>\n			<td></td>\n		</tr>\n	</tfoot>\n	<tbody class="rate-list"></tbody>\n</table>'}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/rate-item",[],function(){return'<td class="rate-title">{{title}}</td>\n<td class="rate-range {{range_class}}">{{{range}}}</td>\n<td class="rate-price {{price_class}}">\n	{{{formatted_price}}}\n	<a class="delete-rate" href="#"><i class="w-icon-delete"></i></a>\n</td>'}),_wAMD.define("commerce/editor/store/setting/shipping/RateItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/shipping/rate-item"],function(e,t,i,n,o){function s(e){return parseFloat(e).toFixed(2)}var r=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"tr",className:"rate-list-item",templateHelpers:{range:function(){var e,t,i=n.commerce.storefrontSettings,o=_.isNumber(this.minimum)?s(this.minimum):null,r=_.isNumber(this.maximum)?s(this.maximum):null;return"Weight"==this.type?(e=i.get("weight_prefix"),t=i.get("weight_suffix")):(e=i.get("currency_prefix"),t=i.get("currency_suffix")),!o&&r?"Up to "+e+r+" "+t:!r&&o?e+o+" "+t+" and up":o||r?e+o+" "+t+" - "+e+r+" "+t:"No Price Range"},formatted_price:function(){var e="No Shipping Price";if(_.isNumber(this.price)){var t=s(this.price),i=n.commerce.storefrontSettings,o=i.get("currency_prefix"),r=i.get("currency_suffix"),a=i.get("currency");e=o+t+r+" "+a}return e},range_class:function(){return _.isNumber(this.minimum)||_.isNumber(this.maximum)?"":"empty-field"},price_class:function(){return _.isNumber(this.price)?"":"empty-field"}},modelEvents:{change:"render"},events:{"click .delete-rate":"deleteRate","click td":"editRate"},editRate:function(e){e.originalEvent.isDelete||n.commerce.vent.trigger("store:setting:shipping:rate:edit",this.model)},deleteRate:function(e){e.preventDefault(),e.originalEvent.isDelete=!0,n.commerce.vent.trigger("store:setting:shipping:rate:delete",this.model)}});return r}),_wAMD.define("commerce/editor/store/setting/shipping/CountryItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/shipping/country-item","commerce/editor/store/setting/shipping/RateItemView"],function(e,t,i,n,o,s){var r=t.Marionette.CompositeView.extend({template:i.compile(o),itemView:s,itemViewContainer:".rate-list",templateHelpers:{ASSETS_BASE:function(){return ASSETS_BASE}},initialize:function(){this.collection=this.model.get("rates")},events:{"click .add-rate a":"addRate","click .delete-country":"deleteCountry"},addRate:function(){n.commerce.vent.trigger("store:setting:shipping:rate:add",this.model)},deleteCountry:function(e){e.preventDefault(),n.commerce.vent.trigger("store:setting:shipping:countryRate:delete",this.model)}});return r}),_wAMD.define("commerce/editor/store/setting/shipping/CountryListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/store/setting/shipping/CountryItemView"],function(e,t,i,n,o){var s=t.Marionette.CollectionView.extend({className:"store-setting-country-shipping-list",itemView:o});return s}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/region-item",[],function(){return'<td><input type="checkbox" {{^disabled}}checked="checked"{{/disabled}} /></td>\n<td class="region-col">{{name}}</td>\n<td class="adjust-col">\n	<a class="number-input decrease" href="#"><i class="w-icon-decrease"></i></a><a class="number-input increase" href="#"><i class="w-icon-increase"></i></a>\n	<span class="rate-difference">{{difference}}</span>\n</td>\n<td class="final-col {{rate_change_class}}">{{{final_rate}}}</td>'}),_wAMD.define("commerce/editor/store/setting/shipping/RegionItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/shipping/region-item"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"tr",templateHelpers:{difference:function(){var e=this.region_rate.get("price_adjustment");return e>0&&(e="+"+e),e},final_rate:function(){var e=this.region_rate.get("price_adjustment"),t=parseFloat(this.rate.get("price"))+e;return t=t.toFixed(2),n.commerce.storefrontSettings.get("currency_prefix")+t},disabled:function(){return this.region_rate.get("rate_disabled")},rate_change_class:function(){var e=this.region_rate.get("price_adjustment");return 0==e?"":e>0?"rate-greater":"rate-less"}},onRender:function(){var e=this;this.model.get("region_rate").get("rate_disabled")?this.$el.removeClass("rate-enabled").addClass("rate-disabled"):this.$el.removeClass("rate-disabled").addClass("rate-enabled"),this.$el.find("input[type=checkbox]").wCheckbox().on("change",function(t){var i=t.target.checked===!0?0:1,n={rate_disabled:i};i&&(n.price_adjustment=0),e.model.get("region_rate").set(n),e.render()})},events:{"click .increase":function(e){e.preventDefault(),this.changePrice("increase")},"click .decrease":function(e){e.preventDefault(),this.changePrice("decrease")}},changePrice:function(e){var t="increase"==e?1:-1,i=this.model.get("region_rate"),n=i.get("price_adjustment");i.set("price_adjustment",n+t),this.render()}});return s}),_wAMD.define("commerce/editor/model/ShippingRegionRate",["backbone-all","./_baseCommerceModel"],function(e,t){return t.extend({useServerGeneratedDefaultsFor:"ShippingRegionRate"})}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/region-list",[],function(){return'<table class="region-list">\n	<thead>\n		<tr>\n			<th class="active-col"></th>\n			<th class="region-col">{{#tl}}Region{{/tl}}</th>\n			<th class="adjust-col">{{#tl}}Adjust Rate{{/tl}}</th>\n			<th class="final-col">{{#tl}}Final Rate{{/tl}}</th>\n		</tr>\n	</thead>\n	<tbody>\n		\n	</tbody>\n</table>'}),_wAMD.define("commerce/editor/store/setting/shipping/RegionListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/store/setting/shipping/RegionItemView","commerce/editor/model/ShippingRegionRate","tpl!commerce/editor/store/setting/shipping/region-list","json!definitions/states.json"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CompositeView.extend({template:i.compile(r),itemView:o,itemViewContainer:"tbody",initialize:function(){this.buildCollection()},buildCollection:function(){var i=a[this.model.get("country")],n=new t.Collection,o=this.model,s=this;e.each(i,function(){var e=s.getModelForRegion(this.abbr),i=new t.Model({abbr:this.abbr,name:this.name,rate:o,region_rate:e});n.add(i)}),this.collection=n},getModelForRegion:function(e){var t=!1;return this.model.get("region_rates").each(function(i){i.get("region")==e&&(t=i)}),t||(t=new s({region:e,site_shipping_price_id:this.model.get("site_shipping_price_id")})),t},dialog:{title:_W.tl("Adjust Region Rates"),buttons:[{text:_W.tl("Back"),className:"btn-back btn-com"},{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Save"),className:"btn-com btn-save btn-success"}]}],dialogClass:"region-list-dialog"},events:{"click .btn-back":"goBack","click .btn-save":"saveRegions","click .btn-cancel":"cancel"},goBack:function(){this.addNewRates(),n.commerce.vent.trigger("store:setting:shipping:rate:slidein",this.model)},saveRegions:function(){var e=this.model,t=e.isNew();this.addNewRates(),this.model.saveWithRegionRates().done(function(i){t&&i&&i.success&&n.commerce.storefrontSettings.get("shipping_rates").add(e)}),this.trigger("dialog:close")},cancel:function(){this.model.resetWithRegionRates(),this.trigger("dialog:close")},addNewRates:function(){var e=this.model;this.collection.each(function(t){var i=t.get("region_rate");i.hasChanged()&&i.isNew()&&e.get("region_rates").add(i)})}});return l}),_wAMD.define("commerce/editor/collection/ShippingRegionRate",["underscore","./_baseCommerceCollection","../model/ShippingRegionRate"],function(e,t,i){var n=t;return n.prototype,n.extend({model:i,useServerGeneratedDefaultsFor:"ShippingRegionRate"},{})}),_wAMD.define("tpl!commerce/editor/store/setting/shipping/main",[],function(){return'<div class="title-bar">\n	<h1>\n		{{#tl}}Shipping{{/tl}}\n		<span class="com-tutorial-badge tut-header" data-key="settings:shipping"/>\n	</h1>\n</div>\n\n<div class="sub-title-bar">\n	<h2>{{#tl}}Shipping Rates{{/tl}}</h2>\n	<h3>{{#tl}}Adjust shipping rate based off location{{/tl}}</h3>\n	<button class="btn-com btn-icon-left add-location-button">\n		<span class="w-icon-plus"></span> {{#tl}}Add Location{{/tl}}\n	</button>\n</div>\n\n<div class="country-rates"></div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save-settings btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save Settings{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/setting/shipping/ShippingView",["jquery","underscore","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","components/views/ConfirmView","commerce/editor/store/setting/shipping/AddCountryView","commerce/editor/store/setting/shipping/RateDetailView","commerce/editor/store/setting/shipping/CountryListView","commerce/editor/store/setting/shipping/RegionListView","commerce/editor/store/BusinessWarningView","commerce/editor/model/ShippingRate","commerce/editor/collection/ShippingRegionRate","tpl!commerce/editor/store/setting/shipping/main"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f){var m=s.extend({template:n.compile(f),className:"commerce-store-settings-shipping",regions:{countryRates:".country-rates"},ui:{footerBar:".footer-bar",saveButton:".footer-bar .save-settings"},events:{"click .add-location-button":"addLocation","click .save-settings":"saveSettings"},onRender:function(){s.prototype.onRender.call(this),this.showCountryRates(),Weebly.Restrictions.hasAccess("com_shipping_settings")||this.dialogRegion.show(new d({model:new i.Model({warning:_W.tl("You must upgrade to the Business Package to use shipping settings."),feature:"com_shipping_settings",cancel:function(){o.vent.trigger("store:setting:general:list")}})})),this.ui.footerBar.show(),this.ui.saveButton.wLoadButton({endText:_W.tl("Saved")}),this.listenTo(o.commerce.storefrontSettings.get("shipping_rates"),"all",this.resetSaveButton)},initialize:function(){var e=this;o.commerce.store.setting.createShippingCollections(),o.commerce.store.setting.country_rates.on({change:"render"}),this.listenTo(o.commerce.storefrontSettings.get("shipping_rates"),"add",function(){o.commerce.store.setting.createShippingCollections(),e.showCountryRates()}),this.listenTo(o.commerce.vent,{"store:setting:shipping:rate:add":function(e){var t=new h({country:e.get("cca2"),type:"Price"});this.dialogRegion.show(new l({model:t}))},"store:setting:shipping:rate:edit":function(e){this.showRateDetail(e)},"store:setting:shipping:rate:slidein":function(e){this.showRateDetail(e,!0)},"store:setting:shipping:region:edit":function(e){this.dialogRegion.show(new u({model:e}),"left")},"store:setting:shipping:countryRate:delete":function(e){this.dialogRegion.show(new r({message:_W.tl("Are you sure?"),callback:function(t){if(t){var i=e.get("rates");i.each(function(e){e.destroy()}),e.destroy(),o.commerce.store.setting.used_countries=o.commerce.store.setting.used_countries.without(e.get("cca2"))}}}))},"store:setting:shipping:rate:delete":function(e){this.dialogRegion.show(new r({message:_W.tl("Are you sure?"),callback:function(t){if(t){var i=e.get("region_rates");i.each(function(e){e.destroy()}),e.destroy()}}}))}})},addLocation:function(e){e.preventDefault(),this.dialogRegion.show(new a({unavailable_countries:o.commerce.store.setting.used_countries}))},showCountryRates:function(){this.countryRates.show(new c({collection:o.commerce.store.setting.country_rates}))},showRateDetail:function(e,t){var i=new l({model:e});t?this.dialogRegion.show(i,"right"):this.dialogRegion.show(i)},saveSettings:function(){var e=this.ui.saveButton.wLoadButton("startWait");this.model.commit().done(function(){e.wLoadButton("endWait")})},resetSaveButton:function(){this.isClosed||this.ui.saveButton.wLoadButton("reset")}});return m}),_wAMD.define("tpl!commerce/editor/store/setting/tax/country-item",[],function(){return'<table class="rate-country list-table" cellspacing="0">\n	<thead>\n		<tr>\n			<th>\n				<img class="flag" src="//{{ASSETS_BASE}}/images/util/flags/{{flag}}.png" />\n				{{name}}\n			</th>\n			<th>{{#hasTaxTypes}}{{#tl}}Tax Type{{/tl}}{{/hasTaxTypes}}</th>\n			<th>\n				{{#tl}}Tax Rate{{/tl}}\n				<a class="delete-country" href="#"><i class="w-icon-delete"></i></a>\n			</th>\n		</tr>\n	</thead>\n	<tfoot class="add-rate">\n		{{#isUS}}\n		<tr class="add-rate-button">\n			<td class="add-rate-button">\n				<a href="#" class="light-text"><i class="w-icon-plus"></i> {{#tl}}Add Zip Code{{/tl}}</a>\n			</td>\n			<td></td>\n			<td></td>\n		</tr>\n		<tr class="add-rate-entry">\n			<td>\n				<input type="text" name="zipcode" />\n			</td>\n			<td></td>\n			<td>\n				<button class="btn-com btn-cancel">{{#tl}}Cancel{{/tl}}</button>\n				<button class="btn-com btn-save-zip">{{#tl}}Save{{/tl}}</button>\n			</td>\n		{{/isUS}}\n		{{#hasSubregions}}\n		<tr class="add-rate-button">\n			<td>\n				<a href="#" class="light-text"><i class="w-icon-plus"></i> {{#tl}}Add Province{{/tl}}</a>\n			</td>\n			<td></td>\n			<td></td>\n		</tr>\n		<tr class="add-rate-entry">\n			<td>\n				<select name="region"></select>\n			</td>\n			<td></td>\n			<td>{{>commerce/editor/store/setting/tax/rate-chooser}}</td>\n		</tr>\n		{{/hasSubregions}}\n	</tfoot>\n	<tbody class="rate-list"></tbody>\n</table>\n'
}),_wAMD.define("tpl!commerce/editor/store/setting/tax/tax-item",[],function(){return'<td class="rate-title">{{label}}</td>\n<td class="rate-type">{{rate_type}}</td>\n<td class="rate-percent">\n	<span class="rate-price">{{rate}}% <i class="{{rate_icon_class}}"></i></span>\n	{{>commerce/editor/store/setting/tax/rate-chooser}}\n	<a class="delete-rate" href="#"><i class="w-icon-delete"></i></a>\n</td>'}),_wAMD.define("tpl!commerce/editor/store/setting/tax/rate-chooser",[],function(){return'<div class="rate-chooser">\n	<div class="input-section">\n		<input type="text" name="new_rate" value="{{rate}}%" />\n		<input type="hidden" name="new_rate_type" />\n		<div class="vertical-divider"></div>\n		<a href="#" class="change-rate-type-button"><i class="{{rate_icon_class}}"></i></a>\n		<div class="hover-toolbar hover-toolbar-below">\n			<div class="hover-toolbar-arrow hover-toolbar-arrow-border"></div>\n			<div class="hover-toolbar-arrow" style="left: 126px;"></div>\n			<div class="hover-toolbar-inner">\n				<div class="hover-toolbar-inner2">\n					<div class="hover-toolbar-inner3 w-ui">\n						<ul id="other-actions-dropdown" class="dropdown-content">\n							<li>\n								<a class="add">\n									<span class="icon w-icon-increase"></span>\n									{{#tl}}Add{{/tl}}\n								</a>\n							</li>\n							<li>\n								<a class="instead">\n									<span class="icon w-icon-loop"></span>\n									{{#tl}}Instead{{/tl}}\n								</a>\n							</li>\n							<li>\n								<a class="combine">\n									<span class="icon w-icon-double-loop"></span>\n									{{#tl}}Compound{{/tl}}\n								</a>\n							</li>\n						</ul>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<button class="btn-com btn-cancel">{{#tl}}Cancel{{/tl}}</button>\n	<button class="btn-com btn-success btn-save">{{#tl}}Save{{/tl}}</button>\n</div>\n'}),_wAMD.define("commerce/editor/store/setting/tax/TaxItemView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/tax/tax-item","tpl!commerce/editor/store/setting/tax/rate-chooser"],function(e,t,i,n,o,s){var r="commerce/editor/store/setting/tax/";({rateChooser:i.compilePartial(r+"rate-chooser",s)});var a=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"tr",className:function(){var e="rate-list-item";return this.model.get("default_tax_rate_id")&&(e+=" "+this.model.get("default_rate").models[0].get("region_type")),e},templateHelpers:function(){var e=this;return{label:function(){return this.isCountry?_W.tl("Country Rate"):this.default_tax_rate_id?this.default_rate[0].display_name:this.identifier},rate:function(){var t=e.getCurrentRate();return(100*t).toFixed(2)},rate_icon_class:function(){return e.getRateTypeClass(e.model.get("rate_type"))},rate_type:function(){return"CA"==this.country&&this.default_tax_rate_id?this.default_rate[0].tax_type_label:""}}},events:{"click .btn-cancel":"cancelEdit","click .btn-save":"saveRate","click a.delete-rate":"deleteRate","click a.change-rate-type-button":"openRateTypeChooser","mouseleave .rate-list-item":"hideRateTypeChooser","click td":"selectRate","click a.add":function(){this.setRateType("add")},"click a.instead":function(){this.setRateType("instead")},"click a.combine":function(){this.setRateType("combine")}},selectRate:function(t){t.preventDefault(),t.dontSelect||(e("#site-store-container").find(".rate-list-item").removeClass("selected"),this.$el.addClass("selected"),this.$el.find("input[name=new_rate]").focus())},saveRate:function(e){e.preventDefault(),e.dontSelect=!0;var t=this.getNewRate();t!=this.getCurrentRate()&&this.model.set("user_tax_rate",t);var i=this.$el.find("input[name=new_rate_type]").val();i&&this.model.set("rate_type",i),this.model.hasChanged()&&this.model.save(),this.$el.removeClass("selected"),this.render()},getNewRate:function(){var e=this.$el.find("input[name=new_rate]").val();return n.commerce.store.setting.taxPercentToFloat(e)},cancelEdit:function(e){e.preventDefault(),this.$el.removeClass("selected"),e.dontSelect=!0,this.render()},deleteRate:function(e){e.preventDefault(),e.dontSelect=!0,n.commerce.vent.trigger("store:setting:tax:rate:delete",this.model)},openRateTypeChooser:function(t){t.preventDefault(),e("#site-store-container").find(".rate-list-item .hover-toolbar").removeClass("open"),this.$el.find(".hover-toolbar").addClass("open")},hideRateTypeChooser:function(){this.$el.find(".hover-toolbar").removeClass("open")},setRateType:function(e){var t=this.getRateTypeClass(e);this.$el.find(".change-rate-type-button").html('<i class="'+t+'"></i>'),this.$el.find("input[name=new_rate_type]").val(e),this.hideRateTypeChooser()},getRateTypeClass:function(e){return n.commerce.store.setting.getClassFromRateType(e)},getCurrentRate:function(){var e=this.model.get("user_tax_rate");return null==e&&this.model.get("default_tax_rate_id")&&(e=this.model.get("default_rate").at(0).get("tax_rate")),e}});return a}),_wAMD.define("commerce/editor/store/setting/tax/CountryItemView",["jquery","backbone-all","mustache","util/ui/wLoadButton","editor/app","commerce/editor/model/TaxRate","tpl!commerce/editor/store/setting/tax/country-item","commerce/editor/store/setting/tax/TaxItemView"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CompositeView.extend({template:i.compile(r),itemView:a,itemViewContainer:".rate-list",templateHelpers:function(){var e=this;return{ASSETS_BASE:function(){return ASSETS_BASE},isUS:function(){return"US"==this.cca2},hasSubregions:function(){return e.hasSubregions()},hasTaxTypes:function(){return"CA"==this.cca2},rate:function(){return"0.00"},rate_icon_class:function(){return"w-icon-increase"}}},initialize:function(){this.collection=this.model.get("rates")},events:{"click .add-rate-button a":"showAddRate","click .add-rate-entry .btn-cancel":"hideAddRate","click .add-rate-entry .btn-save-zip":"saveZipCode","click .add-rate-entry .btn-save":"saveRegion","click .delete-country":"deleteCountry","change select[name=region]":"updateNewRateValue","click .add-rate a.change-rate-type-button":"openRateTypeChooser","mouseleave .add-rate":"hideRateTypeChooser","click a.add":function(){this.setRateType("add")},"click a.instead":function(){this.setRateType("instead")},"click a.combine":function(){this.setRateType("combine")}},showAddRate:function(t){t.preventDefault();var i=this.$el,n=this,s=this.model.get("cca2");i.find(".add-rate").addClass("selected"),this.hasSubregions()&&o.commerce.store.setting.getCountryRegions(s,function(t){var r="";e.each(t,function(){o.commerce.storefrontSettings.get("tax_rates").findWhere({country:s,identifier:this.identifier})||(r+='<option value="'+this.identifier+'">'+this.display_name+"</option>")}),i.find("select[name=region]").html(r),n.updateNewRateValue()}),"US"==s&&i.find("input[name=zipcode]").focus()},hideAddRate:function(e){e&&e.preventDefault(),this.$el.find(".add-rate").removeClass("selected")},openRateTypeChooser:function(t){t.preventDefault(),e("#site-store-container").find(".rate-list-item .hover-toolbar").removeClass("open"),this.$el.find(".add-rate .hover-toolbar").addClass("open")},hideRateTypeChooser:function(){this.$el.find(".add-rate .hover-toolbar").removeClass("open")},saveZipCode:function(e){e.preventDefault();var t=this.$el.find("input[name=zipcode]").val();t&&o.commerce.store.setting.saveZipCodeTax(t)},saveRegion:function(e){e.preventDefault();var t=this,i=t.$el.find(".btn-save"),n=this.model.get("cca2"),r=this.$el.find("select[name=region]").val(),a=parseFloat(this.$el.find(".add-rate input[name=new_rate]").val());a/=100;var l=this.$el.find(".add-rate-entry i").attr("class"),c=o.commerce.store.setting.getRateTypeFromClass(l),u=o.commerce.store.setting.getRegionDefaultRate(n,r),d=o.commerce.storefrontSettings.get("tax_rates"),h=d.findWhere({country:n,isCountry:!0}),p=new s({identifier:r,country:n,isCountry:!1,user_tax_rate:null,rate_type:c,parent_tax_rate_id:h.get("site_tax_rate_id"),default_tax_rate_id:u.default_tax_rate_id});a!=u.tax_rate&&p.set("user_tax_rate",a),i.wLoadButton(),i.wLoadButton("startWait"),p.save().done(function(){i.wLoadButton("endWait"),p.get("default_rate").add(u),d.add(p),t.hideAddRate()})},deleteCountry:function(e){e.preventDefault(),o.commerce.vent.trigger("store:setting:tax:countryRate:delete",this.model)},hasSubregions:function(){return"CA"==this.model.get("cca2")},updateNewRateValue:function(){var e=this.$el.find("select[name=region]").val(),t=o.commerce.store.setting.getRegionDefaultRate(this.model.get("cca2"),e);this.$el.find(".add-rate input[name=new_rate]").val((100*t.tax_rate).toFixed(2)+"%")},setRateType:function(e){var t=o.commerce.store.setting.getClassFromRateType(e);this.$el.find(".add-rate .change-rate-type-button").html('<i class="'+t+'"></i>'),this.hideRateTypeChooser()}});return l}),_wAMD.define("commerce/editor/store/setting/tax/CountryListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/store/setting/tax/CountryItemView"],function(e,t,i,n,o){var s=t.Marionette.CollectionView.extend({className:"store-setting-country-tax-list",itemView:o});return s}),_wAMD.define("tpl!commerce/editor/store/setting/tax/add-tax",[],function(){return'<form>\n	<label for="editor_commerce_tax_country">{{#tl}}Select a Country{{/tl}}</label><br>\n	<select id="editor_commerce_tax_country" name="country">\n		<option value="">{{#tl}}Choose{{/tl}}</option>\n		{{#countries}}\n		<option value="{{cca2}}">{{name}}</option>\n		{{/countries}}\n	</select>\n	\n	{{#country}}\n		{{#isUS}}\n		<label for="editor_commerce_tax_zip">{{#tl}}Zip Code{{/tl}}</label><br>\n		<input id="editor_commerce_tax_zip" type="text" name="zipcode" />\n		<p class="disclaimer">{{#tl}}You are required to charge local and state taxes where your business has a physical presence.{{/tl}}</p>\n		{{/isUS}}\n		{{^hasRegions}}\n		<label for="editor_commerce_tax_rate">{{#tl}}Apply tax rate to all of {{/tl}}{{country_name}}</label><br>\n		<input id="editor_commerce_tax_rate" type="text" name="rate" value="0.00%" />\n		{{/hasRegions}}\n	{{/country}}\n</form>'}),_wAMD.define("commerce/editor/store/setting/tax/AddTaxView",["jquery","backbone-all","mustache","editor/app","commerce/editor/model/TaxRate","tpl!commerce/editor/store/setting/tax/add-tax","json!definitions/countries.json"],function(e,t,i,n,o,s,r){return t.Marionette.ItemView.extend({template:i.compile(s),templateHelpers:function(){return{ASSETS_BASE:ASSETS_BASE,countries:r,isUS:function(){return"US"==this.country},country_name:function(){return this.country?n.commerce.store.setting.getCountryName(this.country):""},hasRegions:function(){return"US"==this.country||"CA"==this.country}}},onRender:function(){var e=this.model.get("country"),t=this.$el.find("select[name=country]");e&&t.val(e),t.wSelectbox({theme:"com"})},dialog:{title:_W.tl("Add Country"),buttons:[{group:"pull-right",buttons:[{text:"Cancel",className:"btn-com btn-cancel"},{text:"Add",className:"btn-com btn-save btn-success"}]}],dialogClass:"taxes-add-country-dialog"},events:{"click .btn-cancel":function(){this.trigger("dialog:close")},"click .btn-save":"addTax","submit form":"addTax","change select[name=country]":"changeCountry"},addTax:function(e){e.preventDefault();var t=this.model.get("country");if(t)if("US"==t){var i=this.$el.find("input[name=zipcode]").val();i&&n.commerce.store.setting.saveZipCodeTax(i)}else if("CA"==t)n.commerce.store.setting.addCountryWithAllRegions("CA");else{var o=this.$el.find("input[name=rate]").val(),s=n.commerce.store.setting.taxPercentToFloat(o);this.model.set({user_tax_rate:s}),this.model.save(),n.commerce.storefrontSettings.get("tax_rates").add(this.model)}this.trigger("dialog:close")},addZipCodeTax:function(e){var t=new o({identifier:e,country:this.model.get("country"),isCountry:!1});t.save()},changeCountry:function(){var e=this.$el.find("select[name=country]").val();e&&(this.model.set({country:e,identifier:e}),this.render())}})}),_wAMD.define("tpl!commerce/editor/store/setting/tax/main",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}Taxes{{/tl}}</h1>\n</div>\n\n<div class="sub-title-bar">\n	<h2>{{#tl}}Tax Rates{{/tl}}</h2>\n	<h3>{{#tl}}Applied to each shipping location{{/tl}}</h3>\n	<button class="btn-com btn-icon-left add-tax-button">\n		<span class="w-icon-plus"></span> {{#tl}}Add Location{{/tl}}\n	</button>\n</div>\n\n<div class="country-tax-rates"></div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save-settings btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save Settings{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/setting/tax/TaxView",["jquery","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","components/views/ConfirmView","commerce/editor/store/setting/tax/CountryListView","commerce/editor/store/setting/tax/AddTaxView","commerce/editor/store/BusinessWarningView","commerce/editor/model/TaxRate","tpl!commerce/editor/store/setting/tax/main"],function(e,t,i,n,o,s,r,a,l,c,u){return o.extend({template:i.compile(u),className:"commerce-store-settings-tax",regions:{countryTaxes:".country-tax-rates"},ui:{footerBar:".footer-bar",saveButton:".footer-bar .save-settings"},events:{"click .add-tax-button":"showAddTax","click .save-settings":"saveSettings"},initialize:function(){var t=this;editorApp.commerce.store.setting.createTaxCollections(),this.listenTo(editorApp.commerce.storefrontSettings.get("tax_rates"),"add",function(){editorApp.commerce.store.setting.createTaxCollections(),t.showCountryRates()}),editorApp.commerce.vent.on({"store:setting:tax:countryRate:delete":function(e){t.dialogRegion.show(new s({message:_W.tl("Are you sure?"),callback:function(t){if(t){for(var i=e.get("rates");i.models.length>0;)i.models[0].destroy();e.destroy()}}}))},"store:setting:tax:rate:delete":function(i){t.dialogRegion.show(new s({message:_W.tl("Are you sure?"),callback:function(t){if(t){var n=i.get("country"),o=editorApp.commerce.storefrontSettings.get("tax_rates").where({parent_tax_rate_id:i.get("site_tax_rate_id")});e.each(o,function(){this.destroy()}),i.destroy();var s=editorApp.commerce.store.setting.country_tax_rates.findWhere({cca2:n});0==s.get("rates").length&&s.destroy()}}}))}})},onRender:function(){o.prototype.onRender.call(this),this.showCountryRates(),Weebly.Restrictions.hasAccess("com_tax_settings")||this.dialogRegion.show(new l({model:new t.Model({warning:_W.tl("You must upgrade to the Business Package to use tax settings."),feature:"com_tax_settings",cancel:function(){editorApp.vent.trigger("store:setting:general:list")}})})),this.ui.footerBar.show(),this.ui.saveButton.wLoadButton({endText:_W.tl("Saved")}),this.listenTo(editorApp.commerce.storefrontSettings.get("tax_rates"),"all",this.resetSaveButton)},showAddTax:function(e){e.preventDefault();var t=new c({isCountry:!0,rate_type:"base"});this.dialogRegion.show(new a({model:t}))},showCountryRates:function(){this.countryTaxes.show(new r({collection:editorApp.commerce.store.setting.country_tax_rates}))},saveSettings:function(){var e=this.ui.saveButton.wLoadButton("startWait");this.model.commit().done(function(){e.wLoadButton("endWait")})},resetSaveButton:function(){this.ui.saveButton.wLoadButton("reset")}})}),_wAMD.define("tpl!commerce/editor/store/setting/display",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}Display Options{{/tl}}</h1>\n</div>\n\n<form>\n	<div class="sub-title-bar sub-title-separator">\n		<h2>{{#tl}}Store Layout{{/tl}}</h2>\n		<h3>{{#tl}}Set the store layouts{{/tl}}</h3>\n	</div>\n	<div class="dd-option-list">\n		{{#storeHasCategories}}\n			<!--Columns of categories-->\n			<div class="dd-option-container">\n				<div class="dd-option-wide-label">{{#tl}}Columns of categories{{/tl}}:</div>\n				<div class="dd-option">\n					<input type="radio" id="category_per_row_2" name="category_per_row" value="2">\n					<label class="layout-label" for="category_per_row_2">{{#tl}}2{{/tl}}</label>\n					<input type="radio" id="category_per_row_3" name="category_per_row" value="3">\n					<label class="layout-label" for="category_per_row_3">{{#tl}}3{{/tl}}</label>\n					<input type="radio" id="category_per_row_4" name="category_per_row" value="4">\n					<label class="layout-label" for="category_per_row_4">{{#tl}}4{{/tl}}</label>\n					<input type="radio" id="category_per_row_6" name="category_per_row" value="6">\n					<label class="layout-label" for="category_per_row_6">{{#tl}}6{{/tl}}</label>\n				</div>\n			</div>\n		{{/storeHasCategories}}\n\n			<!--Columns of products-->\n			<div class="dd-option-container">\n				<div class="dd-option-wide-label">{{#tl}}Columns of products{{/tl}}:</div>\n				<div class="dd-option">\n					<input type="radio" id="product_per_row_2" name="product_per_row" value="2">\n					<label class="layout-label" for="product_per_row_2">{{#tl}}2{{/tl}}</label>\n					<input type="radio" id="product_per_row_3" name="product_per_row" value="3">\n					<label class="layout-label" for="product_per_row_3">{{#tl}}3{{/tl}}</label>\n					<input type="radio" id="product_per_row_4" name="product_per_row" value="4">\n					<label class="layout-label" for="product_per_row_4">{{#tl}}4{{/tl}}</label>\n					<input type="radio" id="product_per_row_6" name="product_per_row" value="6">\n					<label class="layout-label" for="product_per_row_6">{{#tl}}6{{/tl}}</label>\n				</div>\n			</div>\n\n		{{#storeHasCategories}}\n		<!--Columns of products on storefront-->\n		<div class="dd-option-container">\n			<div class="dd-option-wide-label">{{#tl}}Columns of products on storefront{{/tl}}:</div>\n			<div class="dd-option">\n				<input type="radio" id="featured_product_per_row_2" name="featured_product_per_row" value="2">\n				<label class="layout-label" for="featured_product_per_row_2">{{#tl}}2{{/tl}}</label>\n				<input type="radio" id="featured_product_per_row_3" name="featured_product_per_row" value="3">\n				<label class="layout-label" for="featured_product_per_row_3">{{#tl}}3{{/tl}}</label>\n				<input type="radio" id="featured_product_per_row_4" name="featured_product_per_row" value="4">\n				<label class="layout-label" for="featured_product_per_row_4">{{#tl}}4{{/tl}}</label>\n				<input type="radio" id="featured_product_per_row_6" name="featured_product_per_row" value="6">\n				<label class="layout-label" for="featured_product_per_row_6">{{#tl}}6{{/tl}}</label>\n			</div>\n		</div>\n		{{/storeHasCategories}}\n\n		<!--Products per page-->\n		<div class="dd-option-container">\n			<div class="dd-option-wide-label">{{#tl}}Products per page{{/tl}}:</div>\n			<div class="dd-option">\n				<input type="radio" id="product_per_page_24" name="product_per_page" value="24">\n				<label class="layout-label" for="product_per_page_24">{{#tl}}24{{/tl}}</label>\n				<input type="radio" id="product_per_page_36" name="product_per_page" value="36">\n				<label class="layout-label" for="product_per_page_36">{{#tl}}36{{/tl}}</label>\n				<input type="radio" id="product_per_page_48" name="product_per_page" value="48">\n				<label class="layout-label" for="product_per_page_48">{{#tl}}48{{/tl}}</label>\n				<input type="radio" id="product_per_page_60" name="product_per_page" value="60">\n				<label class="layout-label" for="product_per_page_60">{{#tl}}60{{/tl}}</label>\n				<input type="radio" id="product_per_page_72" name="product_per_page" value="72">\n				<label class="layout-label" for="product_per_page_72">{{#tl}}72{{/tl}}</label>\n			</div>\n		</div>\n	</div>\n\n	<div class="sub-title-bar sub-title-separator">\n		<h2>{{#tl}}Image Ratios{{/tl}}</h2>\n		<h3>{{#tl}}Set the image ratios{{/tl}}</h3>\n	</div>\n	<div class="dd-option-list">\n		<!--Product image Ratio-->\n		<div class="dd-option-container dd-option-image-container">\n			<div class="dd-option-wide-label dd-option-wide-image-label">{{#tl}}Product Image{{/tl}}:</div>\n			<div class="dd-option">\n				<input type="radio" id="product_image_ratio_w3h2" name="product_image_ratio" value="w3h2">\n				<label class="image-label" for="product_image_ratio_w3h2">\n					<div class="image-icon image-3x2"></div>\n					<div class="image-caption">{{#tl}}3x2{{/tl}}</div>\n				</label>\n				<input type="radio" id="product_image_ratio_w4h3" name="product_image_ratio" value="w4h3">\n				<label class="image-label" for="product_image_ratio_w4h3">\n					<div class="image-icon image-4x3"></div>\n					<div class="image-caption">{{#tl}}4x3{{/tl}}</div>\n				</label>\n				<input type="radio" id="product_image_ratio_w1h1" name="product_image_ratio" value="w1h1">\n				<label class="image-label" for="product_image_ratio_w1h1">\n					<div class="image-icon image-1x1"></div>\n					<div class="image-caption">{{#tl}}1x1{{/tl}}</div>\n				</label>\n				<input type="radio" id="product_image_ratio_w3h4" name="product_image_ratio" value="w3h4">\n				<label class="image-label" for="product_image_ratio_w3h4">\n					<div class="image-icon image-3x4"></div>\n					<div class="image-caption">{{#tl}}3x4{{/tl}}</div>\n				</label>\n				<input type="radio" id="product_image_ratio_w2h3" name="product_image_ratio" value="w2h3">\n				<label class="image-label" for="product_image_ratio_w2h3">\n					<div class="image-icon image-2x3"></div>\n					<div class="image-caption">{{#tl}}2x3{{/tl}}</div>\n				</label>\n			</div>\n		</div>\n		<!--Category image Ratio-->\n		<div class="dd-option-container dd-option-image-container">\n			<div class="dd-option-wide-label dd-option-wide-image-label">{{#tl}}Category Image{{/tl}}:</div>\n			<div class="dd-option">\n				<input type="radio" id="category_image_ratio_w3h2" name="category_image_ratio" value="w3h2">\n				<label class="image-label" for="category_image_ratio_w3h2">\n					<div class="image-icon image-3x2"></div>\n					<div class="image-caption">{{#tl}}3x2{{/tl}}</div>\n				</label>\n				<input type="radio" id="category_image_ratio_w4h3" name="category_image_ratio" value="w4h3">\n				<label class="image-label" for="category_image_ratio_w4h3">\n					<div class="image-icon image-4x3"></div>\n					<div class="image-caption">{{#tl}}4x3{{/tl}}</div>\n				</label>\n				<input type="radio" id="category_image_ratio_w1h1" name="category_image_ratio" value="w1h1">\n				<label class="image-label" for="category_image_ratio_w1h1">\n					<div class="image-icon image-1x1"></div>\n					<div class="image-caption">{{#tl}}1x1{{/tl}}</div>\n				</label>\n				<input type="radio" id="category_image_ratio_w3h4" name="category_image_ratio" value="w3h4">\n				<label class="image-label" for="category_image_ratio_w3h4">\n					<div class="image-icon image-3x4"></div>\n					<div class="image-caption">{{#tl}}3x4{{/tl}}</div>\n				</label>\n				<input type="radio" id="category_image_ratio_w2h3" name="category_image_ratio" value="w2h3">\n				<label class="image-label" for="category_image_ratio_w2h3">\n					<div class="image-icon image-2x3"></div>\n					<div class="image-caption">{{#tl}}2x3{{/tl}}</div>\n				</label>\n			</div>\n		</div>\n	</div>\n\n	<div class="sub-title-bar sub-title-separator">\n		<h2>{{#tl}}Category Layout{{/tl}}</h2>\n		<h3>{{#tl}}Set the category layout{{/tl}}</h3>\n	</div>\n	<div class="dd-option-list">\n		<div class="dd-option-container dd-option-image-container">\n			<div class="dd-option-wide-label dd-option-wide-image-label">{{#tl}}Categories Display{{/tl}}:</div>\n			<div class="dd-option">\n				<input type="radio" id="category_layout_sidebar" name="show_sidebar" value="1">\n				<label class="category-label" for="category_layout_sidebar">\n					<div class="category-icon category-icon-sidebar"></div>\n					<div class="category-caption">{{#tl}}Sidebar{{/tl}}</div>\n				</label>\n				<input type="radio" id="category_layout_block" name="show_sidebar" value="0">\n				<label class="category-label" for="category_layout_block">\n					<div class="category-icon category-icon-block"></div>\n					<div class="category-caption">{{#tl}}Block{{/tl}}</div>\n				</label>\n			</div>\n		</div>\n	</div>\n\n	<div class="sub-title-bar sub-title-separator inner-subtitle">\n		<h2>{{#tl}}Legacy Mode{{/tl}}</h2>\n		<h3>{{#tl}}Enable legacy mode to switch back to the old product element design{{/tl}}</h3>\n	</div>\n	<div class="dd-option-list">\n		<div class="dd-option-container">\n			<div class="dd-option-wide-label dd-option-wide-legacy-label">{{#tl}}Legacy Mode{{/tl}}:</div>\n			<div class="dd-option">\n				<div class="toggle-switch control light">\n					<input type="checkbox" id="site-com-legacy-toggle" class="toggle-field" name=\'element_legacy_mode\'>\n					<label for="site-com-legacy-toggle">\n						<div class="background-container">\n							<div class="background-slider">\n								<span class="label-on">{{#tl}}ON{{/tl}}</span>\n								<span class="label-off">{{#tl}}OFF{{/tl}}</span>\n							</div>\n						</div>\n						<span class="blob">\n							<span class="blob-inner"></span>\n						</span>\n					</label>\n				</div>\n			</div>\n		</div>\n	</div>\n\n</form>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save-settings btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save Settings{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/store/setting/DisplayView",["jquery","backbone-all","mustache","editor/app","util/ui/wLoadButton","commerce/editor/collection/Category","tpl!editor/loading","tpl!commerce/editor/store/setting/display"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.ItemView.extend({template:i.compile(r),initialize:function(){var e=this;s.count().done(function(t){e.storeHasCategories=e.model.isNew()||t>1,e.template=i.compile(a),e.render()})},templateHelpers:function(){var e=this;return{storeHasCategories:function(){return e.storeHasCategories}}},className:"store-settings-display-view",ui:{footerBar:".footer-bar",saveButton:".footer-bar .save-settings"},events:{"change select":"changeSettings","change input[type=checkbox]":"updateToggle","change input[type=radio]":"changeSettings","click .save-settings":"saveSettings"},onRender:function(){var t=this.model;this.$el.find("select").each(function(){var i=e(this),n=i.attr("name");i.val(t.get(n)),i.wSelectbox({theme:"com"})}),this.$el.find("input[type=checkbox]").each(function(){var i=e(this),n=i.attr("name"),o=t.get(n)||!1;i.prop("checked",o),i.toggleClass("checked",o)}),this.$el.find("input[type=radio]").each(function(){var i=e(this),n=t.get(i.attr("name"))||"undefined",o=i.attr("value").toString();("undefined"===n&&("category_layout_block"===i.attr("id")||"product_image_ratio_w1h1"===i.attr("id")||"category_image_ratio_w1h1"===i.attr("id"))||n.toString()===o)&&i.prop("checked",!0)}),this.ui.footerBar.show(),this.ui.saveButton.wLoadButton({endText:_W.tl("Saved")})},changeSettings:function(){this.resetSaveButton();var t={};e.each(this.$el.find("form").serializeArray(),function(){t[this.name]=this.value}),this.model.set(t)},updateToggle:function(t){this.resetSaveButton();var i=e(t.target),n=i.is(":checked"),o=i.attr("name");i.toggleClass("checked",n),this.model.set(o,n)},preventClose:function(){return t.preventClose.ifModelChanged(this.model)},onClose:function(){this.model.rollback()},saveSettings:function(){var e=this.ui.saveButton.wLoadButton("startWait");this.model.commit().done(function(){n.vent.trigger("store:setting:applySettingStyles"),e.wLoadButton("endWait")})},resetSaveButton:function(){this.ui.saveButton.wLoadButton("reset")}});return l}),_wAMD.define("tpl!commerce/editor/store/setting/emails/edit-reply-to",[],function(){return'<div class="edit-reply-to-email dialog-body">\n	<p>{{#tl}}This is the email address that your customers will send to if they reply to any of your store-related emails, such as order confirmations. If you do not specify a reply-to email address then replies will be sent to your <a href="#" class="general-settings-link">store\'s email address</a>.{{/tl}}</p>\n	<input type="text" id="reply-to-input" value="{{replyTo}}">\n</div>'}),_wAMD.define("commerce/editor/store/setting/emails/EmailsEditReplyToView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/emails/edit-reply-to","editor/utils"],function(e,t,i,n,o,s){var r=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:function(){return{replyTo:function(){return n.commerce.storefrontSettings.get("reply_to_email")}}},ui:{replyToInput:"#reply-to-input"},triggers:{"click .msg-cancel":"dialog:close"},events:{"click .reply-save":"saveReplyTo","keypress #reply-to-input":"checkForEscOrEnter","click .general-settings-link":"navigateToGeneralSettings"},dialog:{title:_W.tl("Edit Reply-To Email Address"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com msg-cancel"},{text:_W.tl("Apply"),className:"btn-com btn-success reply-save"}]}],cancelX:!0,dialogClass:"edit-reply-to-dialog",size:"500x460"},saveReplyTo:function(){var e=this.ui.replyToInput.val();s.isValidEmail(e)||""===e?(this.trigger("dialog:close"),n.commerce.vent.trigger("store:setting:emails:replyTo:edit",e)):(this.ui.replyToInput.popover({content:_W.tl("You need to enter a valid email address."),placement:"bottom",trigger:"manual"}),this.ui.replyToInput.popover("show"))},checkForEscOrEnter:function(e){13===e.which?this.saveReplyTo():27===e.which&&this.trigger("dialog:close")},navigateToGeneralSettings:function(){this.trigger("dialog:close"),n.commerce.vent.trigger("store:setting:general:list")},onShow:function(){this.ui.replyToInput.focus()}});return r}),_wAMD.define("tpl!commerce/editor/store/setting/emails/types-list",[],function(){return'<div class="wrapper">\n	<div class="title-bar">\n		<div class="reply-to">\n			<span class="reply-to-label">{{#tl}}Reply-to address{{/tl}}:</span>\n			<span class="reply-to-email">{{replyTo}}</span>\n			{{#isCustomerSupportEmail}}\n			<span class="help w-icon-question"></span>\n			{{/isCustomerSupportEmail}}\n			<a href="#" class="edit-reply-to">{{#tl}}Edit{{/tl}}</a>\n		</div>\n		<h1>\n			{{#tl}}Emails{{/tl}}\n		</h1>\n	</div>\n\n	<div class="emails-list-header">\n		<div class="emails-info">\n			{{#tl}}Email Type{{/tl}}\n		</div>\n	</div>\n\n	<div class="emails-list">\n		<ul>\n			{{#emailTemplates}}\n			<li data-email="{{emailType}}" data-title="{{title}}" class="emails">\n				<div class="email-info">\n					<div class="email-controls">\n						<i class="w-icon-chevron-right"></i>\n					</div>\n					<div class="email-name">\n						<span>{{title}}</span>\n					</div>\n				</div>\n			</li>\n			{{/emailTemplates}}\n		</ul>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/setting/emails/EmailsListView",["jquery","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","commerce/editor/store/setting/emails/EmailsEditReplyToView","tpl!commerce/editor/store/setting/emails/types-list"],function(e,t,i,n,o,s,r){var a=o.extend({template:i.compile(r),templateHelpers:function(){return{emailTemplates:[{emailType:"order-confirmation",title:_W.tl("Order Confirmation")},{emailType:"download-confirmation",title:_W.tl("Download Confirmation")},{emailType:"shipped",title:_W.tl("Shipped Email")},{emailType:"refund",title:_W.tl("Refund Email")},{emailType:"canceled",title:_W.tl("Canceled Email")}],replyTo:function(){var e=n.commerce.storefrontSettings.get("reply_to_email"),t=n.commerce.storefrontSettings.get("customer_support_email");return e?e:t?t:_W.tl("(not set)")},isCustomerSupportEmail:function(){var e=n.commerce.storefrontSettings.get("reply_to_email"),t=n.commerce.storefrontSettings.get("customer_support_email");return!(e||!t)}}},events:{"click .emails":"editEmailTemplate","click .edit-reply-to":"editReplyTo"},initialize:function(){var e=this;e.listenTo(n.commerce.vent,"store:setting:emails:replyTo:edit",function(t){n.commerce.storefrontSettings.set("reply_to_email",t),n.commerce.storefrontSettings.save(),e.render()})},onRender:function(){o.prototype.onRender.call(this),this.$el.find(".help").popover({trigger:"hover",placement:"bottom",content:_W.tl("This is your store's email address."),width:100})
},editEmailTemplate:function(e){var t=e.currentTarget.getAttribute("data-email"),i=e.currentTarget.getAttribute("data-title");n.commerce.vent.trigger("store:setting:emails:templates:edit",{emailType:t,emailTemplateTitle:i})},editReplyTo:function(e){e.preventDefault(),this.dialogRegion.show(new s({view:this}))}});return a}),_wAMD.define("tpl!commerce/editor/store/setting/emails/edit-custom-msg",[],function(){return'<div class="richtext-area">\n	<div id="email-edit-message" class="textarea-input" name="message">{{{customMessage}}}</div>\n</div>'}),_wAMD.define("commerce/editor/store/setting/emails/EmailsEditHeaderMsgView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/emails/edit-custom-msg","util/ui/jquery-richtext"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:function(){var e=this;return{customMessage:function(){return e.options.customMessage}}},ui:{editMsg:"#email-edit-message"},triggers:{"click .msg-cancel":"dialog:close"},events:{"click .msg-save":"saveMessage"},dialog:{title:_W.tl("Add Header Message"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com msg-cancel"},{text:_W.tl("Apply"),className:"btn-com btn-success msg-save"}]}],cancelX:!0,dialogClass:"edit-msg-dialog"},saveMessage:function(){var e=this.ui.editMsg.html();this.trigger("dialog:close"),this.options.footer?n.commerce.vent.trigger("store:setting:emails:footerMsg:edit",e):n.commerce.vent.trigger("store:setting:emails:headerMsg:edit",e)},initialize:function(e){this.options=e,this.dialog.title=this.options.footer?_W.tl("Add Footer Message"):_W.tl("Add Header Message")},onShow:function(){this.ui.editMsg.richText(),this.ui.editMsg.parent().find(".command, .separator").css("opacity",1);var e=this.options.footer?_W.tl("Click here to add footer text"):_W.tl("Click here to add header text");_editBoxOptions["email-edit-message"]={emptyText:e},this.ui.editMsg.focus()}});return s}),_wAMD.define("tpl!commerce/editor/store/setting/emails/edit-template",[],function(){return'<div class="title-bar">\n	<button class="back btn-com btn-back">\n		{{#tl}}Back{{/tl}}\n	</button>\n	<div class="right-buttons">\n		<button class="btn-com send-test-email-btn">\n			{{#tl}}Send Test Email{{/tl}}\n		</button>\n	</div>\n	<h1>{{templateTitle}}</h1>\n</div>\n\n<div class="alert alert-success">\n	<button type="button" class="close" data-dismiss="alert">&times;</button>\n	<span class="alert-msg">{{#tl}}Test email sent to: {{/tl}}</span><span class="alert-test-email">{{testEmailAddress}}</span>\n</div>\n\n<div class="email-template-padding">\n	<div class="email-template-holder" id="commerce-email">\n	</div>\n</div>\n'}),_wAMD.define("tpl!platform/theme/core/email/order/cancel",[],function(){return'{{> platform/theme/core/email/order/parts/header}}\n\n<div class="content">\n	<h1>{{#tl}}Your order has been canceled.{{/tl}}</h1>\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-header-message}}\n		{{> platform/theme/core/email/order/parts/refund}}\n	</div> {{! .sub-content }}\n\n	<h2>{{#tl}}Order Receipt{{/tl}}</h2>\n	<div class="sub-content">\n		<table id="orders" height="100%" width="100%" border="0" cellpadding="0" cellspacing="0">\n			{{> platform/theme/core/email/order/parts/order-items}}\n			{{> platform/theme/core/email/order/parts/subtotal}}\n			{{> platform/theme/core/email/order/parts/full-refund}}\n		</table>\n	</div> {{! .sub-content }}\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-footer-message}}\n	</div>\n\n	{{! TODO: print link }}\n\n</div> {{! .content }}\n\n{{> platform/theme/core/email/order/parts/company-info}}\n\n{{! TODO: tracking pixel }}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/receipt",[],function(){return'{{> platform/theme/core/email/order/parts/header}}\n\n<div class="content">\n	<h1 id="email-header">\n		{{#sendToOwner}}\n			{{#tl}}New Order{{/tl}}\n		{{/sendToOwner}}\n		{{^sendToOwner}}\n			{{#allPhysical}}{{#tl}}Thank you for your order!{{/tl}}{{/allPhysical}}\n			{{#allDigital}}{{#tl}}Your download is ready!{{/tl}}{{/allDigital}}\n			{{#mixedType}}{{#tl}}Thank you for your order,<br />your download is ready!{{/tl}}{{/mixedType}}\n		{{/sendToOwner}}\n	</h1>\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-header-message}}\n		{{> platform/theme/core/email/order/parts/download}}\n		{{> platform/theme/core/email/order/parts/shipping-address}}\n		{{> platform/theme/core/email/order/parts/billing-info}}\n		{{> platform/theme/core/email/order/parts/order-notes}}\n	</div> {{! .sub-content }}\n\n	<h2>{{#tl}}Order Receipt{{/tl}}</h2>\n	<div class="sub-content">\n		<table id="orders" height="100%" width="100%" border="0" cellpadding="0" cellspacing="0">\n			{{> platform/theme/core/email/order/parts/order-items}}\n			{{> platform/theme/core/email/order/parts/subtotal}}\n			{{> platform/theme/core/email/order/parts/total}}\n		</table>\n	</div> {{! .sub-content }}\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-footer-message}}\n	</div>\n\n	{{! TODO: print link }}\n\n</div> {{! .content }}\n\n{{^paying_owner}}\n	{{> platform/theme/core/email/order/parts/free-user-footer}}\n{{/paying_owner}}\n\n{{> platform/theme/core/email/order/parts/company-info}}\n\n{{! TODO: tracking pixel }}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/refund",[],function(){return'{{> platform/theme/core/email/order/parts/header}}\n\n<div class="content">\n	<h1>{{#tl}}Your refund is on the way.{{/tl}}</h1>\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-header-message}}\n		{{^paypalTransaction}}\n			{{> platform/theme/core/email/order/parts/refund}}\n		{{/paypalTransaction}}\n\n	</div> {{! .sub-content }}\n\n	<h2>{{#tl}}Order Receipt{{/tl}}</h2>\n	<div class="sub-content">\n		<table id="orders" height="100%" width="100%" border="0" cellpadding="0" cellspacing="0">\n			{{> platform/theme/core/email/order/parts/total-refund}}\n		</table>\n	</div> {{! .sub-content }}\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-footer-message}}\n	</div>\n\n	{{! TODO: print link }}\n\n</div> {{! .content }}\n\n{{> platform/theme/core/email/order/parts/company-info}}\n\n{{! TODO: tracking pixel }}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/shipped",[],function(){return'{{> platform/theme/core/email/order/parts/header}}\n\n<div class="content">\n	<h1>{{#tl}}Your order has been shipped!{{/tl}}</h1>\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-header-message}}\n		{{> platform/theme/core/email/order/parts/shipping-address}}\n		{{> platform/theme/core/email/order/parts/delivery}}\n	</div> {{! .sub-content }}\n\n	<h2>{{#tl}}Order Receipt{{/tl}}</h2>\n	<div class="sub-content">\n		<table id="orders" height="100%" width="100%" border="0" cellpadding="0" cellspacing="0">\n			{{> platform/theme/core/email/order/parts/order-items}}\n			{{> platform/theme/core/email/order/parts/subtotal}}\n			{{> platform/theme/core/email/order/parts/total}}\n		</table>\n	</div> {{! .sub-content }}\n\n	<div class="sub-content">\n		{{> platform/theme/core/email/order/parts/custom-footer-message}}\n	</div>\n\n	{{! TODO: print link }}\n\n</div> {{! .content }}\n\n{{> platform/theme/core/email/order/parts/company-info}}\n\n{{! TODO: tracking pixel }}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/billing-info",[],function(){return'{{#transaction}}\n	<h3>{{#tl}}Billing Information{{/tl}}</h3>\n	<p>\n		{{#isPaypal}}\n			<span class="ccType">{{cc_type}}</span>\n			<span class="paymentEmail">{{#payment_email}}&ndash; <a href="mailto:{{.}}">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</a><br />{{/payment_email}}</span>\n			{{#tx_id}}<span class="transactionNumber">{{#tl}}Transaction # <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_view-a-trans&id={{.}}">{{.}}</a></span>{{/tl}}<br />{{/tx_id}}\n		{{/isPaypal}}\n\n		{{^isPaypal}}\n			{{#cc_img_or_last_4}}\n				{{#cc_img}}<div class="ccImg"><img src="{{.}}" class="cc-img" alt="{{#esc_attr}}{{#tl}}logo{{/tl}}{{/esc_attr}}" height="20" align="left" /></div>{{/cc_img}}\n				{{#cc_last_4}}{{cc_type}} {{#tl}}ending in{{/tl}} <span class="ccLast4">{{.}}</span><br />{{/cc_last_4}}\n			{{/cc_img_or_last_4}}\n		{{/isPaypal}}\n\n		{{#billing}}\n			{{#full_name}}<span class="fullName">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</span><br />{{/full_name}}\n			{{#street}}<span class="street">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</span><br />{{/street}}\n			{{#street2}}<span class="street2">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</span><br />{{/street2}}\n			{{#city}}<span class="city">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</span>{{#region}},{{/region}}{{/city}}\n			{{#region}}<span class="region">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</span>{{/region}}\n			{{#postal_code}}<span class="postalCode">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</span>{{/postal_code}}\n		{{/billing}}\n	</p>\n{{/transaction}}'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/custom-header-message",[],function(){return'{{#customHeaderMessage}}<div class="custom-message header-message">{{#unescaped_special_chars}}{{customHeaderMessage}}{{/unescaped_special_chars}}</div>{{/customHeaderMessage}}'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/custom-footer-message",[],function(){return'{{#customFooterMessage}}<div class="custom-message footer-message">{{#unescaped_special_chars}}{{customFooterMessage}}{{/unescaped_special_chars}}</div>{{/customFooterMessage}}'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/delivery",[],function(){return'{{#shipments}}\n	{{#tracking_number}}\n		<h3>\n			{{#tl}}Delivery{{/tl}}\n			<span class="column-header">{{#tl}}Tracking #{{/tl}}</span>\n		</h3>\n		<table id="tracking-numbers" height="100%" width="100%" border="0" cellpadding="0" cellspacing="0">\n			<tr>\n				<td>{{#tl}}<span class="shippingProvider">{{shipping_provider}}</span> will deliver to the address above{{/tl}}</td>\n				<td class="tracking-number">{{tracking_number}}</td>\n			</tr>\n		</table>\n	{{/tracking_number}}\n{{/shipments}}'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/download",[],function(){return'{{#hasDownloads}}\n	<h3>{{#tl}}Download Information{{/tl}}</h3>\n\n	{{^sendToOwner}}\n		<p>{{#tl}}Thank you for your purchase!{{/tl}}</p>\n	{{/sendToOwner}}\n\n	{{#items}}\n		{{#isDigital}}\n			<div class="download-details">\n				<p>\n					<span class="productName">{{name}}</span>\n\n					{{#expires}}\n						- {{#tl}}Link expires on <span class="expiration">{{expiration}}</span>{{/tl}}\n					{{/expires}}\n\n					{{#download_limit}}\n						-\n						{{#multiple_downlads_left}}\n							{{#tl}}Link can be downloaded <span class="downloadsLeft">{{downlads_left}}</span> times{{/tl}}\n						{{/multiple_downlads_left}}\n						{{^multiple_downlads_left}}\n							{{#tl}}Link can be downloaded <span class="downloadsLeft">{{downlads_left}}</span> time{{/tl}}\n						{{/multiple_downlads_left}}\n					{{/download_limit}}\n				</p>\n\n				{{#downloads}}\n					<p class="productLink"><a href="{{url}}" target="_blank">{{filename}}</a></p>\n				{{/downloads}}\n			</div>\n		{{/isDigital}}\n	{{/items}}\n{{/hasDownloads}}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/free-user-footer",[],function(){return'<div class="weeblyFooter">\n	{{#tl}}Create your own online store with{{/tl}} <a href="http://www.weebly.com" target="_blank">Weebly</a>\n</div>\n'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/header",[],function(){return'<div id="commerce-header">\n	<table width="100%" border="0" cellpadding="0" cellspacing="0">\n		<tr>\n			<td class="site-title">{{company_name}}</td>\n			<td class="info">\n				{{#tl}}Order Confirmation{{/tl}}<br />\n				<span class="order-number">#{{site_order_id}}</span>\n			</td>\n		</tr>\n	</table>\n</div>'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/order-items",[],function(){return'{{#items}}\n	<tr class="product">\n		<td>\n			<strong>{{#unescaped_special_chars}}{{name}}{{/unescaped_special_chars}}</strong>\n			<span class="options">\n				{{#isDigital}}\n					<br />\n					{{#tl}}Type: Digital download{{/tl}}\n					{{#downloadMultipleFiles}}\n						{{#tl}}(Includes <span class="downloadFileCount">{{downloadFileCount}}</span> files){{/tl}}\n					{{/downloadMultipleFiles}}\n				{{/isDigital}}\n\n				{{#options}}\n					<br />{{#tl}}<span class="option">{{option}}</span>: <span class="choice">{{choice}}</span>{{/tl}}\n				{{/options}}\n			</span>\n\n			{{#discounts}}\n				<span class="item-discounts">\n					{{#isCoupon}}\n						<br />{{#tl}}coupon: {{code}}{{/tl}}\n					{{/isCoupon}}\n				</span>\n			{{/discounts}}\n\n			{{#moreThanOne}}\n				<span class="quantity">\n					<br />{{#tl}}Quantity: {{quantity}} @ <span class="price">{{#orderEmailFormat.currency}}{{#discounted_price}}{{.}}{{/discounted_price}}{{^discounted_price}}{{price}}{{/discounted_price}}{{/orderEmailFormat.currency}}</span> each{{/tl}}\n				</span>\n			{{/moreThanOne}}\n		</td>\n		<td class="price">\n			<strong>{{#orderEmailFormat.currency}}{{currentSubtotal}}{{/orderEmailFormat.currency}}</strong>\n\n			{{#discounts}}\n				{{#isCoupon}}\n					<br />\n					<span class="item-discount-subtotal">\n						-{{#orderEmailFormat.currency}}{{subtotal}}{{/orderEmailFormat.currency}}\n					</span>\n				{{/isCoupon}}\n			{{/discounts}}\n		</td>\n	</tr>\n{{/items}}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/refund",[],function(){return'{{#transaction}}\n	<h3>{{#tl}}Refund Information{{/tl}}</h3>\n	<p>\n		{{#tl}}Your refund will appear on your account in <strong>3 - 5</strong> Days.{{/tl}}<br />\n		{{#tl}}Refund will be applied to:{{/tl}}\n	</p>\n	<p>\n		<div class="ccImgOrLast4">{{#cc_img}}<img src="{{cc_img}}" alt="{{cc_type}}" />{{/cc_img}}\n		&hellip;<span class="ccLast4">{{cc_last_4}}</span> - <span class="ccType">{{cc_type}}</span></div>\n	</p>\n{{/transaction}}'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/shipping-address",[],function(){return'{{#shipments}} {{! TODO: handle multiple shipments }}\n	<h3>\n		{{#requiresShipping}}\n			{{#tl}}Shipping Address{{/tl}}\n		{{/requiresShipping}}\n		{{^requiresShipping}}\n			{{#tl}}Personal Information{{/tl}}\n		{{/requiresShipping}}\n	</h3>\n	<p>\n		<span class="fullName">{{#unescaped_special_chars}}{{full_name}}{{/unescaped_special_chars}}</span><br />\n		{{#street}}<span class="street">{{#unescaped_special_chars}}{{street}}{{/unescaped_special_chars}}</span><br />{{/street}}\n		{{#street2}}<span class="street2">{{#unescaped_special_chars}}{{street2}}{{/unescaped_special_chars}}</span><br />{{/street2}}\n		<span class="city">{{#unescaped_special_chars}}{{city}}{{/unescaped_special_chars}}</span>, <span class="region">{{#unescaped_special_chars}}{{region}}{{/unescaped_special_chars}}</span> <span class="postalCode">{{#unescaped_special_chars}}{{postal_code}}{{/unescaped_special_chars}}</span><br />\n		<span class="country">{{#unescaped_special_chars}}{{country}}{{/unescaped_special_chars}}</span>\n\n		{{#email}}<a href="mailto:{{.}}">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</a><br />{{/email}}\n		{{#phone}}<a href="tel:{{.}}">{{#unescaped_special_chars}}{{.}}{{/unescaped_special_chars}}</a><br />{{/phone}}\n		\n	</p>\n{{/shipments}}\n'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/subtotal",[],function(){return'<tr class="subtotal">\n	<td>{{#tl}}Subtotal{{/tl}}</td>\n	<td class="price"><strong>{{#orderEmailFormat.currency}}{{order_subtotal}}{{/orderEmailFormat.currency}}</strong></td>\n</tr>\n\n{{#discounts}}\n	{{#isCoupon}}\n		<tr class="discount">\n			<td>{{#tl}}coupon {{code}}{{/tl}}</td>\n			<td class="price">\n				{{^isFreeShipping}}\n					{{! TODO: better negative formatting }}\n					{{#orderEmailFormat.currency}}{{discount}}{{/orderEmailFormat.currency}}\n				{{/isFreeShipping}}\n			</td>\n		</tr>\n	{{/isCoupon}}\n{{/discounts}}\n\n{{#requiresShipping}}\n	{{#shipments}}\n		<tr class="shipping">\n			<td>\n				{{#tl}}Shipping{{/tl}}\n					{{#title}} - <span class="title">{{title}}</span>{{/title}}\n					{{^title}}{{#shipping_provider}} - <span class="shippingProvider">{{shipping_provider}}</span>{{/shipping_provider}}{{/title}}\n			</td>\n			<td class="price"><strong>\n				{{#orderEmailFormat.currency}}\n					{{order_shipping_total}}\n				{{/orderEmailFormat.currency}}</strong></td>\n		</tr>\n	{{/shipments}}\n{{/requiresShipping}}\n\n{{#order_tax_rates}}\n	{{#order_tax_rates.rates}}\n		<tr class="tax">\n			<td>{{#tl}}Tax - {{name}}: <span class="taxPercentRate">{{#format.percent}}{{rate}}{{/format.percent}}</span>{{/tl}}</td>\n			<td class="price"><strong>{{#orderEmailFormat.currency}}{{amount}}{{/orderEmailFormat.currency}}</strong></td>\n		</tr>\n	{{/order_tax_rates.rates}}\n{{/order_tax_rates}}\n{{^order_tax_rates}}\n	{{#order_tax_total}}\n		<tr class="tax">\n			<td>{{#tl}}Tax{{/tl}}</td>\n			<td class="price"><strong>{{#orderEmailFormat.currency}}{{order_tax_total}}{{/orderEmailFormat.currency}}</strong></td>\n		</tr>\n	{{/order_tax_total}}\n{{/order_tax_rates}}\n\n<tr class="subtotal-spacer"><td></td></tr>\n'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/total-refund",[],function(){return'<tr class="total">\n	<td>{{#tl}}Total Refund{{/tl}}</td>\n	<td class="price"><strong>{{#orderEmailFormat.currency}}{{refunded_amount}}{{/orderEmailFormat.currency}}</strong></td>\n</tr>'}),_wAMD.define("tpl!platform/theme/core/email/order/parts/total",[],function(){return'<tr class="total">\n	<td>{{#tl}}Total{{/tl}}</td>\n	<td class="price"><strong>{{#orderEmailFormat.currency}}{{order_total}}{{/orderEmailFormat.currency}}</strong></td>\n</tr>'}),_wAMD.define("commerce/editor/store/setting/emails/EmailsEditView",["jquery","underscore","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","commerce/editor/store/setting/emails/EmailsEditHeaderMsgView","tpl!commerce/editor/store/setting/emails/edit-template","tpl!platform/theme/core/email/order/cancel","tpl!platform/theme/core/email/order/receipt","tpl!platform/theme/core/email/order/refund","tpl!platform/theme/core/email/order/shipped","tpl!platform/theme/core/email/order/parts/billing-info","tpl!platform/theme/core/email/order/parts/custom-header-message","tpl!platform/theme/core/email/order/parts/custom-footer-message","tpl!platform/theme/core/email/order/parts/delivery","tpl!platform/theme/core/email/order/parts/download","tpl!platform/theme/core/email/order/parts/free-user-footer","tpl!platform/theme/core/email/order/parts/header","tpl!platform/theme/core/email/order/parts/order-items","tpl!platform/theme/core/email/order/parts/refund","tpl!platform/theme/core/email/order/parts/shipping-address","tpl!platform/theme/core/email/order/parts/subtotal","tpl!platform/theme/core/email/order/parts/total-refund","tpl!platform/theme/core/email/order/parts/total","commerce/editor/model/EmailCustomMsg","util/general-utils"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v,b,y,w,_,M,C,x,k,S){var T=s.extend({template:n.compile(a),className:"emails-edit-view",customHeaderMessage:"",customFooterMessage:"",fakeTemplateData:{},templateHelpers:function(){return{templateTitle:this.model.get("emailTemplateTitle"),siteTitle:currentSiteTitle}},events:{"click .btn-back":"returnToTemplateListing","click .header-message":function(){this.openMessageDialog(!1)},"click .footer-message":function(){this.openMessageDialog(!0)},"click .send-test-email-btn":"sendTestEmail","click .productLink a":function(e){e.preventDefault(),e.stopPropagation()},"close .alert":function(e){e.preventDefault(),this.ui.alert.fadeOut("medium")}},ui:{template:".email-template-holder",alert:".alert-success",alertTestEmail:".alert-test-email",testEmailBtn:".send-test-email-btn"},initialize:function(){var e=this,t=e.getCustomEmailMessageModel(!1);t&&(e.customHeaderMessage=t.get("message"));var i=e.getCustomEmailMessageModel(!0);i&&(e.customFooterMessage=i.get("message")),e.listenTo(o.commerce.vent,{"store:setting:emails:headerMsg:edit":function(t){e.setMessage(t,!1)},"store:setting:emails:footerMsg:edit":function(t){e.setMessage(t,!0)}})},onRender:function(){s.prototype.onRender.call(this),this.ui.alert.alert()},onShow:function(){var e={unescaped_special_chars:function(){return function(e,t){return S.htmlDecode(t(e))}},customHeaderMessage:this.customHeaderMessage||"<i>"+_W.tl("Click here to add a header message")+"</i>",customFooterMessage:this.customFooterMessage||"<i>"+_W.tl("Click here to add a footer message")+"</i>",sendToOwner:!1,company_name:o.commerce.storefrontSettings.get("company_name"),company_address:o.commerce.storefrontSettings.get("store_address_street"),store_address_city:o.commerce.storefrontSettings.get("store_address_city"),store_address_postal_code:o.commerce.storefrontSettings.get("store_address_postal_code"),store_address_state:o.commerce.storefrontSettings.get("store_address_state"),store_address_country:o.commerce.storefrontSettings.get("store_address_country"),customer_support_email:o.commerce.storefrontSettings.get("customer_support_email"),phone_number:o.commerce.storefrontSettings.get("phone_number"),site_order_id:"12345678",orderEmailFormat:{currency:o.commerce.storefrontSettings.get("currency")},transaction:!0,isPaypal:"PayPal"==o.commerce.storefrontSettings.get("gateway"),paypalTransaction:"PayPal"==o.commerce.storefrontSettings.get("gateway"),tx_id:["000000"],cc_img:"//"+ASSETS_BASE+"/images/commerce/credit-cards/37/visa.png",cc_type:"Visa",paymentEmail:"johndoe@example.com",cc_last_4:"1234",billing:{full_name:["John Doe"],street:["123 Anywhere Road"],city:["Nowhere"],region:["CA"],postal_code:["99999"],country:["USA"]},paying_owner:Weebly.Restrictions.level>0};e.show_company_info=!!(e.company_name||e.company_name||e.company_address||e.store_address_city||e.store_address_postal_code||e.store_address_state||e.store_address_country||e.customer_support_email||e.phone_number);var t,i,s,r,a,k={"platform/theme/core/email/order/parts/billing-info":h,"platform/theme/core/email/order/parts/custom-header-message":p,"platform/theme/core/email/order/parts/custom-footer-message":f,"platform/theme/core/email/order/parts/delivery":m,"platform/theme/core/email/order/parts/download":g,"platform/theme/core/email/order/parts/free-user-footer":v,"platform/theme/core/email/order/parts/header":b,"platform/theme/core/email/order/parts/order-items":y,"platform/theme/core/email/order/parts/refund":w,"platform/theme/core/email/order/parts/shipping-address":_,"platform/theme/core/email/order/parts/subtotal":M,"platform/theme/core/email/order/parts/total-refund":C,"platform/theme/core/email/order/parts/total":x},T=this.model.get("emailType");switch(T){case"order-confirmation":case"shipped":case"canceled":t=l,e.allPhysical=!0,e.requiresShipping=!0,e.shipments=[{full_name:_W.tl("John Doe"),street:_W.tl("123 Anywhere Road"),city:_W.tl("Nowhere"),region:_W.tl("CA"),postal_code:"99999",country:_W.tl("USA")}],e.items=[{name:_W.tl("Widget"),moreThanOne:!0,quantity:2,price:this.renderPrice(20),total_price:this.renderPrice(40)},{name:_W.tl("Gadget"),quantity:1,price:this.renderPrice(3.99),total_price:this.renderPrice(3.99),options:[{option:_W.tl("Size"),choice:_W.tl("Small")}]}],e.order_subtotal=this.renderPrice(43.99),e.order_total=43.99;var A=o.commerce.storefrontSettings.get("shipping_rates");if(A&&A.length>0&&(A.some(function(e){return"US"===e.get("country")&&(i=e),i}),i)){e.shipments[0].title=i.get("title");var D=i.get("price")||0;e.shipments[0].price=this.renderPrice(D),e.order_total+=i.get("price")}switch(r=o.commerce.storefrontSettings.get("tax_rates"),r&&r.length>0&&(r.forEach(function(e){return"US"==e.get("country")&&"CA"==e.get("identifier")?(s=e,void 0):void 0}),s&&(a=s.get("actual_rate")*e.order_total,e.order_tax_rates={rates:[{name:_W.tl("California"),rate:(100*s.get("actual_rate")).toFixed(2)+"%",format:{percent:!0},amount:this.renderPrice(a)}]},e.order_total+=a)),e.order_total=this.renderPrice(e.order_total),T){case"order-confirmation":t=c;break;case"shipped":t=d;break;case"canceled":t=l}break;case"download-confirmation":e.allDigital=!0,e.hasDownloads=!0,e.items=[{name:"Digital Widget Guide",isDigital:!0,expires:!0,expiration:"Sept. 4, 2014",download_limit:!0,multiple_downlads_left:!0,downlads_left:4,downloads:[{filename:"WidgetGuide.pdf",url:"#"}],price:this.renderPrice(20),total_price:this.renderPrice(20)}],e.order_subtotal=this.renderPrice(20),e.order_total=20,r=o.commerce.storefrontSettings.get("tax_rates"),r&&r.length>0&&(r.forEach(function(e){return"US"==e.get("country")&&"CA"==e.get("identifier")?(s=e,void 0):void 0}),s&&(a=s.get("actual_rate")*e.order_total,e.order_tax_rates={rates:[{name:_W.tl("California"),rate:(100*s.get("actual_rate")).toFixed(2)+"%",format:{percent:!0},amount:this.renderPrice(a)}]},e.order_total+=a)),e.order_total=this.renderPrice(e.order_total),t=c;break;case"refund":e.refunded_amount=this.renderPrice(53.73),t=u}this.fakeTemplateData=e;var E=n.render(t,e,k);this.ui.template.html(E)},setMessage:function(t,i){_editBoxOptions["email-edit-message"]&&_editBoxOptions["email-edit-message"].emptyText&&_editBoxOptions["email-edit-message"].emptyText==t&&(t=""),i?this.customFooterMessage=t:this.customHeaderMessage=t,this.updateOrInsertCustomEmailMessage(t,i),this.onShow();var n=i?".footer-message":".header-message",o=e(n).css("backgroundColor");e(n).animate({backgroundColor:"#ffff99"},400,"swing",function(){e(n).animate({backgroundColor:o})})},returnToTemplateListing:function(){o.commerce.vent.trigger("store:setting:emails:templates:list")},openMessageDialog:function(e){this.dialogRegion.show(new r({footer:e,customMessage:e?this.customFooterMessage:this.customHeaderMessage}))},sendTestEmail:function(){var e=this;e.ui.alert.hide(),e.ui.testEmailBtn.attr("disabled","disabled");var t=e.getCustomEmailMessageModel(!1);e.fakeTemplateData.customHeaderMessage=t?t.get("message"):!1;var i=e.getCustomEmailMessageModel(!0);e.fakeTemplateData.customFooterMessage=i?i.get("message"):!1,Weebly.Commerce.RPC.StorefrontSettings.sendTestEmail(e.model.get("emailType"),e.fakeTemplateData).done(function(){e.ui.testEmailBtn.removeAttr("disabled"),e.ui.alertTestEmail.text(userEmail),e.ui.alert.slideDown()})},renderPrice:function(t){function i(t){return e("<div/>").html(t).text()}var n=""+t.toFixed(2);return n=i(o.commerce.storefrontSettings.get("currency_prefix"))+n,n+=i(o.commerce.storefrontSettings.get("currency_suffix"))},updateOrInsertCustomEmailMessage:function(e,t){var i=this.model.get("emailType"),n=this.getCustomEmailMessageModel(t);if(n)n.set("message",e),n.save();else{var s=new k({email_template:i,message:e,location:t?"footer":"header"});s.save(),o.commerce.storefrontSettings.get("email_custom_msgs").add(s)}o.commerce.storefrontSettings.save()},getCustomEmailMessageModel:function(e){var t=this.model.get("emailType"),i=o.commerce.storefrontSettings.get("email_custom_msgs"),n=e?"footer":"header";return i.findWhere({email_template:t,location:n})}});return T}),_wAMD.define("commerce/editor/store/setting/emails/EmailsView",["jquery","backbone-all","mustache","editor/app","components/regions/ListDetail","commerce/editor/store/setting/emails/EmailsListView","commerce/editor/store/setting/emails/EmailsEditView"],function(e,t,i,n,o,s,r){var a=t.Marionette.Layout.extend({template:function(){return'<div class="email-settings-main-region"></div>'},regions:{mainRegion:{selector:".email-settings-main-region",regionType:o}},onRender:function(){n.commerce.vent.trigger("store:setting:emails:templates:list")},initialize:function(){var e=this;this.listenTo(n.commerce.vent,{"store:setting:emails:templates:list":function(){e.mainRegion.show(new s,"right")},"store:setting:emails:templates:edit":function(i){var n=new t.Model({emailType:i.emailType,emailTemplateTitle:i.emailTemplateTitle}),o=new r({model:n});e.mainRegion.show(o,"left")}})}});return a}),_wAMD.define("tpl!commerce/editor/store/setting/advanced/main",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}Advanced Settings{{/tl}}</h1>\n</div>\n\n<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}Tracking Pixels{{/tl}}</h2>\n	<h3>{{#tl}}Add tracking pixels or tags to specific pages{{/tl}}</h3>\n</div>\n\n<div class="section">\n	<h3 class="ga-title">{{#tl}}Google Analytics Tracking ID{{/tl}}</h3>\n	<span class="help w-icon-question" data-content="{{#esc_attr}}{{#tl}}The tracking ID of your Google Analytics account tells Google which account and property to send data to. If you enter your tracking ID here, all of your pages will have the Google Analytics tracking code added to them when you publish. In order to see tracking data for purchases made in your store, you must enable eCommerce tracking in your Google Analytics account under Admin > View Settings.{{/tl}}{{/esc_attr}}" data-original-title="" title=""></span>\n	<div class="ga-id-container">\n		<input type="text" id="ga-tracking-id" value="{{gaUaTrackingId}}"></input>\n		<span class="ga-ua-prompt">UA-</span>\n	</div>\n</div>\n\n<div class="drawer-toggle sub-title-bar" rel="tracking-pixels-drawer">\n	<h3>{{#tl}}Add custom tracking code{{/tl}}</h3>\n	<div class="drawer-caret"></div>\n</div>\n\n<div id="tracking-pixels-drawer" class="drawer scaffold-com">\n	<div class="tracking-pixel-sections">\n		<div class="section">\n			<label class="label" for="editor-commerce-cart-page">{{#tl}}Cart Page{{/tl}}</label><br>\n			<textarea id="editor-commerce-cart-page" class="track-pixel-field" name="cart_page">{{cart_page}}</textarea>\n		</div>\n		<div class="section">\n			<label class="label" for="editor-commerce-payment-page">{{#tl}}Payment Page{{/tl}}</label><br>\n			<textarea id="editor-commerce-payment-page" class="track-pixel-field" name="payment_page">{{payment_page}}</textarea>\n		</div>\n		<div class="section">\n			<label class="label" for="editor-commerce-receipt-page">{{#tl}}Receipt Page{{/tl}}</label><br>\n			<textarea id="editor-commerce-receipt-page" class="track-pixel-field" name="receipt_page">{{receipt_page}}</textarea>\n		</div>\n		<div class="drawer-footer-spacer"></div>\n	</div>\n\n	<div class="snippet-guide">\n		<span class="intro">{{#tl}}Optional: Use variables to fill in order details:{{/tl}}</span>\n		<br>\n		<br>\n		{{#snippets}}\n			<span class="snippet-code">&#123;{{name}}&#125;</span>\n			<span> - </span>\n			<span class="snippet-desc">{{description}}</span><br>\n		{{/snippets}}\n	</div>\n</div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n\n		<button class="update-changes btn-com btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">{{#tl}}Update Changes{{/tl}}</span>\n		</button>\n	</div>\n</div>'}),function(e){e.fn.extend({filter_input:function(t){function i(n){var o=n.input?n.input:e(this);if(!n.ctrlKey&&!n.altKey){if("keypress"==n.type){var s=n.charCode?n.charCode:n.keyCode?n.keyCode:0;if((8==s||9==s||13==s||35==s||36==s||37==s||39==s||46==s)&&0==n.charCode&&n.keyCode==s)return!0;var r=String.fromCharCode(s);if(t.negkey&&r==t.negkey)return o.val().substr(0,1)==r?o.val(o.val().substring(1,o.val().length)).change():o.val(r+o.val()).change(),!1;var a=new RegExp(t.regex)}else{if("paste"==n.type)return o.data("value_before_paste",n.target.value),setTimeout(function(){i({type:"after_paste",input:o})},1),!0;if("after_paste"!=n.type)return!1;var r=o.val(),a=new RegExp("^("+t.regex+")+$")}return a.test(r)?!0:("function"==typeof t.feedback&&t.feedback.call(this,r),"after_paste"==n.type&&o.val(o.data("value_before_paste")),!1)}}var n={regex:".",negkey:!1,live:!1,events:"keypress paste"},t=e.extend(n,t),o=e.fn.jquery.split(".");return t.live?(parseInt(o[0])>=1&&parseInt(o[1])>=7?e(this).on(t.events,i):e(this).live(t.events,i),void 0):this.each(function(){var n=e(this);
parseInt(o[0])>=1&&parseInt(o[1])>=7?n.off(t.events).on(t.events,i):n.unbind(t.events).bind(t.events,i)})}})}(jQuery),_wAMD.define("vendor/jquery.filter_input",function(){}),_wAMD.define("commerce/editor/store/setting/advanced/AdvancedView",["jquery","backbone-all","mustache","editor/app","tpl!commerce/editor/store/setting/advanced/main","util/ui/drawer","util/ui/wLoadButton","vendor/jquery.filter_input"],function(e,t,i,n,o){var s=t.Marionette.Layout.extend({template:i.compile(o),className:"commerce-store-settings-advanced",ui:{drawer:".drawer",helpIcon:".help",footerBar:".footer-bar",gaUaTrackingId:"#ga-tracking-id",saveBtn:".update-changes",trackingPixelFields:".track-pixel-field"},regions:{mainRegion:{selector:".advanced-settings-main-region"}},events:{"click .update-changes":"updateChanges","keydown #ga-tracking-id":"resetSaveBtn","change #ga-tracking-id":"resetSaveBtn","paste #ga-tracking-id":"resetSaveBtn","cut #ga-tracking-id":"resetSaveBtn","keydown .track-pixel-field":"resetSaveBtn","change .track-pixel-field":"resetSaveBtn","paste .track-pixel-field":"resetSaveBtn","cut .track-pixel-field":"resetSaveBtn"},templateHelpers:function(){var e=this,t=e.model.get("tracking_pixels")||{};return{gaUaTrackingId:e.model.get("ga_ua_tracking_id"),snippets:[{name:"txid",description:_W.tl("Transaction id")},{name:"storeName",description:_W.tl("Store name")},{name:"tax",description:_W.tl("Tax value")},{name:"shipping",description:_W.tl("Shipping value")},{name:"total",description:_W.tl("Total order value")}],cart_page:t.cart_page,payment_page:t.payment_page,receipt_page:t.receipt_page}},onShow:function(){var e=this;this.ui.drawer.drawer({onOpen:function(){e.ui.drawer.find("[name=cart-page]").focus()}}),this.ui.helpIcon.popover({trigger:"hover",placement:"right"}),this.ui.footerBar.show(),this.ui.saveBtn.wLoadButton({endText:_W.tl("Saved")}),this.ui.gaUaTrackingId.filter_input({regex:"[0-9-]"})},resetSaveBtn:function(){this.ui.saveBtn.wLoadButton("reset")},updateChanges:function(){var e=this;e.ui.saveBtn.wLoadButton("startWait"),e.model.set("ga_ua_tracking_id",this.ui.gaUaTrackingId.val());var t=e.model.get("tracking_pixels")||{};this.ui.trackingPixelFields.each(function(e,i){t[i.getAttribute("name")]=i.value}),e.model.set("tracking_pixels",t),e.model.save().done(function(){e.ui.saveBtn.wLoadButton("endWait")})}});return s}),_wAMD.define("commerce/editor/store/setting/SettingView",["jquery","backbone-all","mustache","editor/app","commerce/editor/store/setting/GeneralView","commerce/editor/store/setting/payment/PaymentView","commerce/editor/store/setting/shipping/ShippingView","commerce/editor/store/setting/tax/TaxView","commerce/editor/store/setting/DisplayView","commerce/editor/store/setting/emails/EmailsView","commerce/editor/store/setting/advanced/AdvancedView"],function(e,t,i,n,o,s,r,a,l,c,u){var d=t.Marionette.Layout.extend({className:"store-settings-view sliding-panel-main-region",template:function(){return'<div class="setting-view-main-region scaffold-com"></div>'},regions:{mainRegion:".setting-view-main-region"},initialize:function(){this.listenTo(editorApp.commerce.vent,{"store:setting:general:list":function(){this.mainRegion.show(new o({model:this.model}))},"store:setting:payment:list":function(){this.mainRegion.show(new s({model:this.model}))},"store:setting:shipping:list":function(){this.mainRegion.show(new r({model:this.model}))},"store:setting:tax:list":function(){this.mainRegion.show(new a({model:this.model}))},"store:setting:display:list":function(){this.mainRegion.show(new l({model:this.model}))},"store:setting:emails:list":function(){this.mainRegion.show(new c({model:this.model}))},"store:setting:advanced:list":function(){this.mainRegion.show(new u({model:this.model}))}})}});return d}),_wAMD.define("commerce/editor/store/setting/module",["jquery","backbone-all","accounting","editor/app","commerce/editor/store/setting/SettingView","commerce/editor/model/TaxRate","json!definitions/countries.json","json!definitions/currencies.json"],function(e,t,i,n,o,s,r,a){n.module("commerce.store.setting",function(l){var c={showSettingArea:function(){t.preventClose(function(){var e=n.commerce.storefrontSettings;n.commerce.store.layout.mainRegion.show(new o({model:e}))})},showSettingList:function(){this.showSettingArea(),n.commerce.vent.trigger("store:setting:list")},showSettingSubpage:function(e){t.preventClose(function(){n.commerce.vent.trigger("store:setting:"+e+":list")})},applySettingStyles:function(){var t=n.commerce.storefrontSettings,i="",o=t.getRatioAsPercent("product_image_ratio"),s=t.getRatioAsPercent("category_image_ratio"),r=t.get("product_per_row"),a=t.get("featured_product_per_row"),l=t.get("category_per_row");o&&(o="margin-bottom: "+o+"% !important",i+=".entity-list-image-container .wsite-imageaspectratio-image-height, ",i+=".product-images-view .wsite-imageaspectratio-image-height, ",i+=".wsite-com-category-product-image-height.wsite-imageaspectratio-image-height, ",i+=".wsite-com-category-product-featured-image-height.wsite-imageaspectratio-image-height { "+o+" } "),s&&(s="margin-bottom: "+s+"% !important",i+=".category_image .wsite-imageaspectratio-image-height { "+s+" } ",i+=".wsite-com-category-subcategory-image-height.wsite-imageaspectratio-image-height { "+s+" } "),r&&(r="width: "+(Math.floor(100*(100/r))/100).toFixed(2)+"% !important",i+=".wsite-com-category-product-group .wsite-com-column { "+r+" } "),a&&(a="width: "+(Math.floor(100*(100/a))/100).toFixed(2)+"% !important",i+=".wsite-com-category-product-featured-group .wsite-com-column { "+a+" } "),l&&(l="width: "+(Math.floor(100*(100/l))/100).toFixed(2)+"% !important",i+=".wsite-com-category-subcategory-group .wsite-com-column { "+l+" } "),e("#storeOptionsStyle").remove(),e("head").append('<style type="text/css" id="storeOptionsStyle">'+i+"</style>")}};l.on("start",function(){n.vent.on({all:function(e){var i=e.match(/store:setting:(.*?):list/);i&&t.preventClose(function(){var e=i[1];u.navigate("store/setting/"+e),c.showSettingSubpage(e)})},"store:setting":function(){c.showSettingArea()},"store:setting:list":function(){t.preventClose(function(){u.navigate("store/setting"),c.showSettingList()})},"store:setting:applySettingStyles":function(){c.applySettingStyles()}})});var u=new t.Marionette.AppRouter({controller:c,appRoutes:{"store/setting":"showSettingList","store/setting/:subpage":"showSettingSubpage"}});this.addInitializer(function(){this.countryRegions={}}),n.reqres.setHandler("commerce:settings:currency:format",function(e,t){t||(t=n.commerce.storefrontSettings.get("currency"));var o=n.request("commerce:settings:currency:prefix",t);return"string"==typeof e&&(e=parseFloat(e)),e=i.formatMoney(e,o,2)}),n.reqres.setHandler("commerce:settings:currency:prefix",function(t){var i="";return e.each(a,function(){this.abbreviation==t&&(i=this.symbol)}),i}),this.createShippingCollections=function(){var i=n.commerce.storefrontSettings.get("shipping_rates"),o=this.sortCollectionByCountry(i);this.used_countries&&this.used_countries.length&&e.each(this.used_countries,function(){o[this]||(o[this]=l.createCountryRatesModel(this))}),this.country_rates=new t.Collection(_.values(o)),this.used_countries=_.keys(o)},this.createTaxCollections=function(){var e=n.commerce.storefrontSettings.get("tax_rates"),i={comparator:function(t){var i=t.get("parent_tax_rate_id");if(i){var n=e.findWhere({site_tax_rate_id:i});if(n)return n.get("identifier")+t.get("identifier")}return t.get("identifier")}},o=this.sortCollectionByCountry(e,i);this.country_tax_rates=new t.Collection,this.country_tax_rates.add(_.values(o))},this.saveZipCodeTax=function(t){n.commerce.RPC.TaxRate.addUsTax(t).done(function(t){var i=[];e.each(t,function(){i.push(new s(this))}),n.commerce.storefrontSettings.get("tax_rates").add(i)})},this.addCountryWithAllRegions=function(t){n.commerce.RPC.TaxRate.addCountryWithSubregions(t).done(function(t){var i=[];e.each(t,function(){i.push(new s(this))}),n.commerce.storefrontSettings.get("tax_rates").add(i)})},this.getCountryRegions=function(e,t){this.countryRegions[e]?t(this.countryRegions[e]):n.commerce.RPC.TaxRate.getCountrySubregions(e).done(function(i){l.countryRegions[e]=i,t(i)})},this.getRegionDefaultRate=function(t,i){if(!this.countryRegions[t])return 0;var n={};return e.each(this.countryRegions[t],function(){this.identifier==i&&(n=this)}),n},this.sortCollectionByCountry=function(e,t){var i={};return _.uniq(e.pluck("country")).each(function(n){i[n]=l.createCountryRatesModel(n,null,t),i[n].get("rates").add(e.where({country:n}))}),i},this.createCountryRatesModel=function(e,i,n){var o=new t.Collection;return n=n||{},n.comparator&&(o.comparator=n.comparator),i&&o.add(i),new t.Model({cca2:e,name:this.getCountryName(e),flag:e.toLowerCase().replace(/\s/g,""),rates:o})},this.getCountryName=function(t){switch(t){case"WORLD":return _W.tl("Rest of World");case"NORTHAMERICA":return _W.tl("North America");case"EUROPE":return _W.tl("Europe");case"SOUTHAMERICA":return _W.tl("South America");case"CENTRALAMERICA":return _W.tl("Central America");case"ASIA":return _W.tl("Asia");case"OCEANIA":return _W.tl("Oceania");case"AFRICA":return _W.tl("Africa");case"CARIBBEAN":return _W.tl("Caribbean")}var i="";return e.each(r,function(){return this.cca2==t?(i=this.name,!1):void 0}),i},this.getClassFromRateType=function(e){switch(e){case"add":return"w-icon-increase";case"instead":return"w-icon-loop";case"combine":return"w-icon-double-loop";default:return""}},this.getRateTypeFromClass=function(e){switch(e){case"w-icon-increase":return"add";case"w-icon-loop":return"instead";case"w-icon-double-loop":return"combine";default:return""}},this.taxPercentToFloat=function(e){var t=e.replace(/[^\d\.]/g,"");return t/100},this.getStripeConnectData=function(e){l.stripeConnectUrl&&l.stripeEmail?e():Weebly.Commerce.RPC.PaymentGateway.getStripeConnectData().done(function(t){"object"==typeof t&&t.connect_url&&t.user_email?(l.stripeConnectUrl=t.connect_url,l.stripeEmail=t.user_email,e()):"object"==typeof t&&t.connect_url?(l.stripeConnectUrl=t.connect_url,e()):alert(_W.tl("There was an error loading Stripe connection data"))})},this.getSquareConnectData=function(e){l.squareConnectUrl&&l.squareEmail?e():Weebly.Commerce.RPC.PaymentGateway.getSquareConnectData().done(function(t){"object"==typeof t&&t.connect_url&&t.user_email?(l.squareConnectUrl=t.connect_url,l.squareEmail=t.user_email,e()):"object"==typeof t&&t.connect_url?(l.squareConnectUrl=t.connect_url,e()):alert(_W.tl("There was an error loading Square connection data"))})}})}),_wAMD.define("tpl!commerce/editor/store/util/format-chooser",[],function(){return"\n<ul>\n{{#items}}\n	<li data-format='{{format}}'>\n		<div class='checkmark'>\n		</div>\n		{{#text}}\n			<span>{{text}}</span>\n		{{/text}}\n		{{#image}}\n			<img src='{{image}}' />\n		{{/image}}\n	</li>\n{{/items}}\n</ul>\n\n<div class='after-ul'></div>"}),_wAMD.define("commerce/editor/store/import/FormatChooserView",["jquery","backbone-all","mustache","tpl!commerce/editor/store/util/format-chooser"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({currentFormat:null,className:"store-import-format-chooser",template:i.compile(n),dialog:{title:_W.tl("Import Products"),dialogClass:"product-import-format-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Continue"),className:"btn-com btn-proceed btn-info"}]}]},events:{"click .btn-cancel":"cancel","click .btn-proceed":"proceed","click li[data-format]":function(t){this.select(e(t.currentTarget).data("format"))}},onRender:function(){this.select("csv")},select:function(e){this.$el.find("li").removeClass("selected").filter('[data-format="'+e+'"]').addClass("selected"),this.currentFormat=e},cancel:function(){this.trigger("cancel")},proceed:function(){this.trigger("proceed",this.currentFormat)}});return o}),_wAMD.define("tpl!commerce/editor/store/import/instructions-csv",[],function(){return"\n<p style='font-size:16px'>\n	{{^isClientSite}}\n		<a href='http://kb.weebly.com/uploads/4/5/0/0/4500922/sampleproducts.csv' target='_blank'>\n			{{#tl}}Download a sample CSV{{/tl}}\n		</a>\n		|\n		<a href='http://kb.weebly.com/import-store.html' target='_blank'>\n			{{#tl}}Read the instructions{{/tl}}\n		</a>\n	{{/isClientSite}}\n\n	{{#isClientSite}}\n		<a href='http://kb.editmysite.com/uploads/4/5/0/0/4500922/sampleproducts.csv' download=\"sampleproducts.csv\" target='_blank'>\n			{{#tl}}Download a sample CSV{{/tl}}\n		</a>\n	{{/isClientSite}}\n</p>\n\n<p>\n	<div class='btn btn-com btn-info w-upload-target'>Select CSV File</div>\n</p>\n"}),_wAMD.define("tpl!commerce/editor/store/import/instructions-etsy",[],function(){return"\n<p style='font-size:16px'>\n	{{#tl}}Upload the CSV export file from Etsy{{/tl}}\n	|\n	<a href='http://www.etsy.com/help/article/338' target='_blank'>\n		{{#tl}}See instructions{{/tl}}\n	</a>\n</p>\n\n<p>\n	<div class='btn btn-com btn-info w-upload-target'>Select CSV File</div>\n</p>\n"}),_wAMD.define("tpl!commerce/editor/store/import/instructions-shopify",[],function(){return"\n<p style='font-size:16px'>\n	{{#tl}}Upload the CSV export file from Shopify{{/tl}}\n	|\n	<a href='http://docs.shopify.com/manual/your-store/products/export-products' target='_blank'>\n		{{#tl}}See instructions{{/tl}}\n	</a>\n</p>\n\n<p>\n	<div class='btn btn-com btn-info w-upload-target'>Select CSV File</div>\n</p>\n"}),_wAMD.define("commerce/editor/store/import/InstructionsView",["jquery","backbone-all","mustache","components/uploader-view/UploaderView","tpl!commerce/editor/store/import/instructions-csv","tpl!commerce/editor/store/import/instructions-etsy","tpl!commerce/editor/store/import/instructions-shopify"],function(e,t,i,n,o,s,r){o=i.compile(o),s=i.compile(s),r=i.compile(r);var a=n.extend({getTemplate:function(){switch(this.options.format){case"csv":return o;case"etsy":return s;case"shopify":return r}},templateHelpers:{isClientSite:function(){return Weebly.Restrictions.isClientSite}},dialog:{title:_W.tl("Instructions"),dialogClass:"product-import-instructions-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"}]}]},initialize:function(e){e.uploadOptions={type:"all",multipleFiles:!1,forceSWFU:!1,params:{type:"com_import",format:this.options.format,cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}},n.prototype.initialize.apply(this,arguments)},events:{"click .btn-cancel":"cancel"},cancel:function(){this.trigger("cancel")},onUploadSuccess:function(e){this.trigger("proceed",e)}});return a}),_wAMD.define("tpl!commerce/editor/store/import/review-subrow",[],function(){return'\n<td>\n	&nbsp;\n</td>\n<td class="thumbnail">\n	<div class="thumbnail-sizer">{{{thumbnailHtml}}}</div>\n</td>\n<td class="description" colspan=\'2\'>\n	{{description}}\n</td>\n<td class="price">\n	{{{priceHtml}}}\n</td>\n<td class="sku">\n	{{#sku}}{{sku}}{{/sku}}\n	{{^sku}}&mdash;{{/sku}}\n</td>\n<td class="inventory">\n	{{#trackInventory}}{{inventory}}{{/trackInventory}}\n	{{^trackInventory}}&mdash;{{/trackInventory}}\n</td>'}),_wAMD.define("commerce/editor/store/import/ReviewSubrowView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!commerce/editor/store/import/review-subrow"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({tagName:"tr",className:"subrow",template:n.compile(s),templateHelpers:function(){var e=this,i=e.options.product,n=e.model,s=o.module("commerce"),r=s.storefrontSettings,a=r.get("currency_prefix"),l=r.get("currency_suffix"),c=i.get("import_data")||{};return{thumbnailHtml:function(){var e=c.images;if(e&&this.image_order&&this.image_order.length){var t=this.image_order[0]-1;return i.thumbnail(null,null,e[t])}return i.thumbnail()},priceHtml:function(){return a+n.get("price").toFixed(2)+l},description:function(){return t.pluck(this.optionchoices,"choice").join(", ")},trackInventory:function(){return i.get("track_inventory")}}},initialize:function(e){this.options=e}});return r}),_wAMD.define("tpl!commerce/editor/store/import/review-row",[],function(){return'\n<td class=\'expander\'>\n	{{#hasSkus}}\n		<span class=\'expander-control\'></span>\n	{{/hasSkus}}\n</td>\n<td class="thumbnail">\n	<div class="thumbnail-sizer">{{{thumbnailHtml}}}</div>\n</td>\n<td class="name">\n	<div class="name-inner">\n		{{name}}\n	</div>\n</td>\n<td class="description">\n	<div class="description-inner">\n		{{{short_description}}}\n	</div>\n</td>\n<td class="price">\n	{{#priceHtml}}{{{priceHtml}}}{{/priceHtml}}\n	{{^priceHtml}}&mdash;{{/priceHtml}}\n</td>\n<td class="sku">\n	{{#sku}}{{sku}}{{/sku}}\n	{{^sku}}&mdash;{{/sku}}\n</td>\n<td class="inventory">\n	{{#trackInventory}}{{totalInventory}}{{/trackInventory}}\n	{{^trackInventory}}&mdash;{{/trackInventory}}\n</td>'}),_wAMD.define("commerce/editor/store/import/ReviewRowView",["jquery","underscore","backbone-all","mustache","./ReviewSubrowView","tpl!commerce/editor/store/import/review-row"],function(e,t,i,n,o,s){var r=i.Marionette.CompositeView.extend({subrows:null,tagName:"tr",template:n.compile(s),templateHelpers:function(){var e=this,i=e.model,n=editorApp.module("commerce"),o=n.storefrontSettings,s=o.get("currency_prefix"),r=o.get("currency_suffix"),a=i.get("import_data")||{};return{hasSkus:function(){return!!e.collection},sku:function(){if(!e.collection){var t=i.get("skus").at(0);if(t)return t.get("sku")}},thumbnailHtml:function(){var e=a.images;return e&&e.length?i.thumbnail(null,null,e[0]):i.thumbnail()},priceHtml:function(){if(this.price_range)return this.price_range;var e=i.get("skus");return s+e.at(0).get("price").toFixed(2)+r},trackInventory:function(){return this.track_inventory},totalInventory:function(){if(void 0!==a.inventory)return a.inventory;var e=i.get("skus").pluck("inventory");return t.reduce(e,function(e,t){return e+t},0)}}},events:{"click .expander":"toggleExpand"},itemView:o,itemViewOptions:function(){return{product:this.model}},initialize:function(){var t=this.model.get("skus"),i=this.model.get("options2");t.length&&i.length&&(this.collection=t),this.subrows=e()},appendHtml:function(e,t){this.subrows=this.subrows.add(t.el)},toggleExpand:function(){this.$el.toggleClass("expanded"),this.subrows.toggleClass("visible")}});return r}),_wAMD.define("tpl!commerce/editor/store/import/review",[],function(){return'\n<div class="w-ui-topbar te-head">\n	<div class="w-logo-top">\n		<div class="w-logo"></div>\n		<div class="te-title">{{#tl}}Store Import{{/tl}}</div>\n	</div>\n	<div class="te-head-buttons">\n		<div class="te-cancel-button te-button btn-cancel">\n			<span class="bi">{{#tl}}Cancel{{/tl}}</span>\n		</div>\n		{{#showSave}}\n			<div class="te-save-button te-button btn-save">\n				<span class="bi">{{#tl}}Import{{/tl}}</span>\n			</div>\n		{{/showSave}}\n	</div>\n</div>\n\n{{#error}}\n	<p class="alert">\n		<b>{{#tl}}Error during import:{{/tl}}</b>\n		{{error}}\n	</p>\n{{/error}}\n\n{{^error}}\n	<div class="grid-wrap">\n		<div class="grid">\n			<table class="product-list entity-list" cellspacing="0">\n				<thead>\n					<tr>\n						<th class="expander"></th>\n						<th class="thumbnail"></th>\n						<th class="name">{{#tl}}Name{{/tl}}</th>\n						<th class="description">{{#tl}}Description{{/tl}}</th>\n						<th class="price">{{#tl}}Price{{/tl}}</th>\n						<th class="sku">{{#tl}}Sku{{/tl}}</th>\n						<th class="inventory">{{#tl}}Inventory{{/tl}}</th>\n					</tr>\n				</thead>\n				<tbody></tbody>\n			</table>\n		</div>\n	</div>\n{{/error}}\n\n<div class="loading-screen" style="display:none">\n	<div class="loading-screen-inner">\n		<h2>\n			{{#tl}}Your products are being imported...{{/tl}}\n		</h2>\n		<div class="progress-meter">\n			<div></div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("commerce/editor/store/import/ReviewView",["jquery","underscore","backbone-all","mustache","editor/app","./ReviewRowView","tpl!commerce/editor/store/import/review"],function(e,t,i,n,o,s,r){var a=i.Marionette.CompositeView.extend({className:"import-review w-ui",template:n.compile(r),itemView:s,templateHelpers:function(){var e=this;return{showSave:function(){var t=e.options.remaining;return!e.options.error&&("number"!=typeof t||t)},error:function(){return e.options.error}}},appendHtml:function(e,t,i){var n=e.$(".grid tbody"),o=t.$el.add(t.subrows),s=e.options.remaining,r=e.options.limit;if("number"==typeof s){if(i==s){var a;a=s?s!=r?_W.tl("Only %%REMAINING%% products will be imported because your site is limited to %%LIMIT%% products."):_W.tl("Only %%REMAINING%% products will be imported."):_W.tl("No products will be imported because your site is limited to %%LIMIT%% products."),a=a.replace("%%REMAINING%%",s).replace("%%LIMIT%%",r),a+=" "+_W.tl("Upgrade to the <a>Business Plan</a> to import unlimited products.").replace("<a>","<a class='upgrade' href='#'>"),s?n.append("<tr><td colspan='7' class='alert'><div>"+a+"</div>"+"</td>"+"</tr>"):e.$(".grid").before("<p class='alert'>"+a+"</p>")}i>=s&&o.addClass("disabled")}n.append(o)},events:{"click .btn-cancel":"cancel","click .btn-save":"proceed","click .upgrade":"showUpgradeWindow"},initialize:function(e){this.options=e},cancel:function(){this.trigger("cancel")},proceed:function(){this.trigger("proceed")},showUpgradeWindow:function(e){e.preventDefault(),o.vent.trigger("billing:upgrade:window",{restrictionID:"com_product_limit",restrictionType:"feature",refer:"commerce"})}});return a}),_wAMD.define("commerce/editor/store/import/module",["jquery","backbone-all","editor/app","./FormatChooserView","./InstructionsView","./ReviewView","components/views/AlertView","commerce/editor/model/CategoryHierarchy","commerce/editor/collection/Category","commerce/editor/collection/Product"],function(e,t,i,n,o,s,r,a,l,c){function u(){f().done(function(e){if(1==e)i.showDialog(new r({message:_W.tl("You must wait until the import in progress completes"),title:_W.tl("Import Products")}));else{var o=new n({collection:new t.Collection([{format:"csv",text:_W.tl("Import CSV file")},{format:"etsy",image:"//"+ASSETS_BASE+"/images/logos/etsy.png"},{format:"shopify",image:"//"+ASSETS_BASE+"/images/logos/shopify.png"}])}).on("cancel",function(){o.trigger("dialog:close")}).on("proceed",function(e){d(e)});i.showDialog(o)}})}function d(e){var t=new o({format:e}).on("cancel",function(){t.trigger("dialog:close")}).on("proceed",function(i){i.format=e,h(i,function(){t.trigger("dialog:close")})});i.showDialog(t)}function h(e,t){var n=new s({collection:new c(e.products),error:e.error,limit:e.limit,remaining:e.remaining}).on("cancel",function(){n.close()}).on("proceed",function(){var i=n.$(".loading-screen").css("display",""),o=i.find(".progress-meter div").width(0);p(e,function(e){o.css("width",e+"%")},function(){i.css("display","none"),n.close(),t&&t()})});n.listenTo(i.vent,"plan:upgraded",function(){n.close()}),n.render().$el.appendTo("body")}function p(t,n,o){e.ajax({url:"/editor/getElements.php",type:"POST",data:{pos:"import_store",format:t.format,filename:t.filename,token:Weebly.RequestToken}}).done(function(){function s(){e.ajax({url:"/editor/getElements.php",type:"POST",data:{pos:"get_store_import_progress",filename:t.filename,token:Weebly.RequestToken}}).done(function(e){var t=parseInt(e);100==t?(n(t),r()):(t&&n(t),setTimeout(s,2e3))})}function r(){var t=a.findOrCreate(),n=new l,s=new c;e.when(t.fetch({force:!0}),n.fetch({force:!0}),s.fetch()).done(function(){i.isPageDirty=!0,i.vent.trigger("store:product:list"),o&&o()})}s()})}function f(){return e.ajax({url:"/editor/getElements.php",type:"POST",data:{pos:"is_store_import_in_progress",token:Weebly.RequestToken}})}i.module("commerce.store.import",function(e){e.on("start",function(){i.vent.on({"store:import":u})})})}),_wAMD.define("commerce/editor/store/module",["jquery","backbone-all","editor/app","./StoreView","legacy/weebly_sliding_panel","./category/module","./dashboard/module","./product/module","./order/module","./coupon/module","./setting/module","./import/module"],function(e,t,i,n,o){i.module("commerce.store",function(s){function r(){return o.isOpened("site-store-container")}var a={openStore:function(){if(!r()){var t=e(".dashboard-view-main-region").length;o.toggle("site-store-container"),(!n.initialized||t)&&(i.vent.trigger("store:dashboard:list"),n.initialized=!0)}},closeStore:function(){r()&&o.toggle("site-store-container")},toggleShowStore:function(){r()?a.closeStore():a.openStore()}};s.addInitializer(function(){s.layout=new n,e("#site-store-container").append(this.layout.el),s.layout.render(),o.resize()});var l=new t.Marionette.AppRouter({controller:a,appRoutes:{store:"openStore"}});s.on("start",function(){i.vent.on({store:function(){l.navigate("store"),a.openStore()}}),e("#weebly_tab_commerce_editor span").click(function(){a.toggleShowStore()})})})}),_wAMD.define("commerce/editor/settings/module",["backbone-all","editor/app"],function(e,t){t.module("commerce.settings",function(i){var n={};new e.Marionette.AppRouter({appRoutes:{},controller:n}),t.vent.on({}),i.addInitializer(function(){t.addRegions({})})})}),_wAMD.define("commerce/editor/devHelpers",["jquery","underscore","commerce/editor/model/CategoryHierarchy","commerce/editor/collection/Category","commerce/editor/collection/Product","commerce/editor/collection/Coupon","commerce/editor/collection/Order"],function(e,t,i,n,o,s,r){return{exportEntities:function(){var e={categoryHierarchy:i.findOrCreate(),products:new o,categories:new n,coupons:new s,orders:new r};t.each(e,function(e,t){e.fetch().done(function(){console.log("exporting",t),window[t]=e})})},counts:function(){e.when(o.count(),n.count(),s.count(),r.count()).done(function(e,t,i,n){console.log({products:e,categories:t,coupons:i,orders:n})})}}}),_wAMD.define("commerce/editor/module",["jquery","backbone-all","editor/app","./model/StorefrontSettings","./model/CategoryHierarchy","./collection/Category","./build/module","./design/module","./pages/module","./store/module","./settings/module","./devHelpers"],function(e,t,i,n,o,s){i.module("commerce",function(e){e.startWithParent=!1,e.RPC=window.Weebly.Commerce.RPC,e.vent=new t.Wreqr.EventAggregator,e.addInitializer(function(){e.owner_id=window.com_userID,e.site_id=window.com_currentSite,(new s).fetch(),(new o).fetch()});var i={};Weebly&&Weebly.Commerce&&Weebly.Commerce.BackboneBootstrap&&Weebly.Commerce.BackboneBootstrap.StorefrontSettings&&(i=Weebly.Commerce.BackboneBootstrap.StorefrontSettings),e.storefrontSettings=new n(i)}),i.trigger("commerce:ready")}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-item",[],function(){return'{{#hasSku}}\n	<div class="product-thumb-holder">{{{thumb}}}</div>\n	<div class="product-sku-name" title="{{variation}}">\n		{{variation}}\n	</div>\n	<div class="product-actions">\n		<button class="connect-product-button btn-com">{{#tl}}Connect{{/tl}}</button>\n	</div>\n{{/hasSku}}\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListItem",["underscore","backbone-all","mustache","commerce/util/product-utils","tpl!editor/dialogs/product-element/product-element-item"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"li",className:"product-sku-item",templateHelpers:function(){var t=this.options.product;return{hasSku:function(){return this.optionchoices.size()>0},variation:function(){var t,i=[];return e.each(this.optionchoices,function(e){t=n.filterOptionText(e.choice),i.push(t)}),i.join(", ")},thumb:function(){return t.thumbnail(null,this.image_order?this.image_order[0]:null)}}},events:{"click .connect-product-button":"selectProduct"},initialize:function(e){this.options=e},selectProduct:function(){this.trigger("select",this.model)}});return s}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-item-view",[],function(){return'<div class="product-thumb-holder">{{{thumb}}}</div>\n<div class="product-name" title="{{productName}}">{{productName}}</div>\n	<div class="product-actions">\n		{{#hasSku}}\n			<button class="toggle-product-button btn-com"><span class="w-icon-increase"></span></button>\n		{{/hasSku}}\n		{{^hasSku}}\n			<button class="connect-single-product-button btn-com">{{#tl}}Connect{{/tl}}</button>\n		{{/hasSku}}\n	</div>\n</div>\n\n<ul class="product-skus"></ul>\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListItemView",["backbone-all","mustache","commerce/editor/view/elements/ProductSelectListItem","tpl!editor/dialogs/product-element/product-element-item-view"],function(e,t,i,n){var o=e.Marionette.CompositeView.extend({template:t.compile(n),itemView:i,itemViewContainer:".product-skus",tagName:"li",className:"product-item",ui:{skus:".product-skus",skuToggle:".toggle-product-button span"},events:{"click .toggle-product-button":"toggleProduct","click .connect-single-product-button":"selectProduct"},templateHelpers:function(){var e=this.model;return{thumb:function(){return e.thumbnail()},productName:function(){return this.name},hasSku:function(){return this.skus.length>1&&this.options2.length?!0:null}}},initialize:function(){this.model.get("skus").size()>1&&(this.collection=this.model.get("skus"))},itemViewOptions:function(){return{product:this.model}},toggleProduct:function(){var e=this.ui.skus,t=e.is(":visible")?"w-icon-increase":"w-icon-decrease";this.ui.skuToggle.attr("class",t),e.toggle()},selectProduct:function(){this.trigger("select",this.model.get("skus").first())},onItemviewSelect:function(e,t){this.trigger("select",t)}});return o}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-empty",[],function(){return'<div class="product-name">\n	{{#tl}}You currently don\'t have any products.{{/tl}}\n</div>\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListEmptyView",["jquery","backbone-all","mustache","editor/app","tpl!editor/dialogs/product-element/product-element-empty"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),tagName:"li",className:"product-item-empty"});return s}),_wAMD.define("commerce/editor/view/elements/ProductSelectListView",["jquery","backbone-all","mustache","editor/app","commerce/editor/collection/Product","./ProductSelectListItemView","./ProductSelectListEmptyView","components/views/LoadingView","waypoints"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CollectionView,c=l.prototype,u=l.extend({tagName:"ul",itemView:s,emptyView:t.View,initialize:function(e){var t=this;t.currentProduct=e.currentProduct,t.pagedCollection=new o([],{mode:"infinite",state:{pageSize:10},searchText:e.searchText,view:"detail"}),t.collection=t.pagedCollection.fullCollection,t.fetchPromise=t.pagedCollection.fetch().done(function(){t.emptyView=r,!t.isClosed&&t.collection.isEmpty()&&t.render()})},_initialEvents:function(){var t=this;c._initialEvents.apply(t,arguments),t.listenTo(t.collection,"add remove reset",function(){e.waypoints("refresh")})},onShow:function(){var t=this,i=t.pagedCollection,n=t.parent=t.$el.parent(),o=new a({el:e("<div>").insertAfter(t.$el).addClass("loading")}).render(),s=function(){i.hasNext()||o.close()};t.fetchPromise.done(s),t.$el.waypoint({context:n,offset:"bottom-in-view",handler:function(e){"down"==e&&i.hasNext()&&i.getNextPage().done(s)}})},onClose:function(){this.parent.weeblyScroll("destroy")},onItemviewSelect:function(e,t){this.trigger("select",t)}});return u}),_wAMD.define("tpl!editor/dialogs/product-element/product-element-layout",[],function(){return'<div class="product-element-chooser-header">\n	<input class="product-element-chooser-search" type="text" name="search" placeholder="{{#esc_attr}}{{#tl}}Search Products{{/tl}}{{/esc_attr}}" />\n	<button class="product-element-add-product btn-com">{{#tl}}New Product{{/tl}}</button>\n</div>\n<div class="product-element-chooser w-massless-scroll">\n	<div class="scroll-outer">\n		<div class="scroll-inner">\n			<div class="list-region products-holder">{{! listRegion }}</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("commerce/editor/view/elements/ProductSelectListLayoutView",["backbone-all","mustache","editor/app","./ProductSelectListView","tpl!editor/dialogs/product-element/product-element-layout"],function(e,t,i,n,o){var s=e.Marionette.Layout.extend({template:t.compile(o),ui:{search:"input[name=search]",addNewBtn:".product-element-add-product",scrollInner:".scroll-inner"},regions:{listRegion:".list-region"},events:{"keyup input[name=search]":"search","click @ui.addNewBtn":"addNewProduct","click .btn-cancel":"dialogCancel"},dialog:{title:_W.tl("Connect Product"),buttons:[{group:"pull-right",buttons:[{text:"Cancel",className:"btn-com btn-cancel"}]}],dialogClass:"product-element-chose-product-dialog"},initialize:function(e){this.options=e
},onRender:function(){this.renderList(),this.ui.scrollInner.weeblyScroll(),Weebly.Permissions.store_settings||this.ui.addNewBtn.remove()},onClose:function(){this.ui.scrollInner.weeblyScroll("destroy")},renderList:function(){var e=this,t=e.options.currentCommerceProduct,i=new n({searchText:e.searchText});e.listRegion.show(i),e.listenTo(i,"select",function(i){e.trigger("dialog:close");var n=i.get("site_product_id"),o=i.get("site_product_sku_id");t.saveProductAssociation(n,o),t.renderProduct(n,o)})},dialogCancel:function(){deleteWeeblyElement(this.options.currentCommerceProduct.li,!0),this.trigger("dialog:close")},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.searchText=t.ui.search.val(),t.renderList()},n)},addNewProduct:function(){this.trigger("dialog:close"),i.vent.triggerCascade("store:product:add",{onSave:this.options.saveCallback,onClose:this.options.closeCallback,closeStoreTab:!0})}});return s}),_wAMD.define("editor/build/elements/utils",["underscore","jquery","editor/app","legacy/weebly_events","legacy/weebly_utils","legacy/weebly_utils_ajax","legacy/weebly_element_utils"],function(e,t,i,n){function o(e){var t=e[0].id.replace("inside_","");i.vent.trigger("editor:saving"),s(e)||l(e)?new window.Ajax.Request(window.ajax,{parameters:{pos:"deleteformpageelement",pei:t,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:c,onFailure:window.errFunc,onException:window.exceptionFunc}):new window.Ajax.Request(window.ajax,{parameters:{pos:"deletepageelement",pei:t,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:c,onFailure:window.errFunc,onException:window.exceptionFunc})}function s(e){return e.find(".wsite-multicol-col[id$=lhs], .weebly-splitpane-2, .wsite-multicol-col").filter(function(){return t(this).closest("li.inside").is(e)}).length>0}function r(e){return e.find(".platform-element-child").length>0}function a(e){return e.find("li.inside").length?!0:!1}function l(e){var t=e.find(".formlist").eq(0);if(t.length){var i=e.find(".columnlist").eq(0);return i.length?t.parents().length<i.parents().length:!0}return!1}function c(e){e.responseText.indexOf("ERROR")>-1?(t(".inside-inactive").removeClass("inside-inactive"),window.showError(e.responseText)):u()}function u(){i.vent.trigger("editor:saved"),n.fireEvent("editorPageElementDeleted")}var d={scriptSrc:[],scriptId:[],runIncludedScripts:function(){if(d.scriptId.length&&d.scriptSrc.length){var e,i=d.scriptId.pop(),n=d.scriptSrc.pop(),o=i.replace(/scriptInclude/,""),s=document.getElementById(i).contentWindow.document,r="";n.indexOf("<%HEAD%>")>-1&&(e=[],e=n.split("<%HEAD%>"),n=e[1],r=e[0]);var a="";n.indexOf("<%BODY%>")>-1&&(e=[],e=n.split("<%BODY%>"),n=e[1],a=e[0]);var l="<html><head> "+r+" </head>"+"<body"+' style=" margin: 0px; padding: 0px; background-color: transparent;"'+' onload="parent.resizeMe();'+a+'"'+" onClick=\"parent.clickHandler(event, '"+o+"');\"> "+n+'<script type="text/javascript">'+'parent.resizeMe("'+i+'");'+"parent.setInterval(\"resizeMe('"+i+"');\", 250);"+"</script>"+"</body></html>";if(s.write(l),!t("#"+i+"-coverbox").length){var c=t("#"+i);t("<div/>",{id:i+"-coverbox"}).css({position:"absolute",overflow:"hidden",background:"transparent",top:"17px",left:"0px",height:c.css("height"),width:c.css("width")}).appendTo(c.parent())}d.runIncludedScripts()}},resizeMe:function(e){var i=t("#"+e);if(i.length){var n,o=i[0].contentWindow.document,s=t(o.body).find("iframe");if(n=s.length>0?s.first().height():o.body.offsetHeight,n!=i.css("height").replace(/px/,"")){i.css("height",n+"px");var r=t("#"+e+"-coverbox");r.length&&r.css("height",n+"px"),window.resizeAllColumns()}}},deleteWeeblyElement:function(e,i,n){e=t(e),!a(e)||l(e)||s(e)||r(e)?i?o(e):window.showConfirm({title:window._W.tl("Delete this element?"),message:n||window._W.tl("Are you sure you want to delete this element?"),okText:window._W.tl("Yes, delete it"),onConfirm:function(){o(e)},onCancel:function(){e.removeClass("inside-inactive")}}):e.hasClass("wsite-multicol-li")?(window.showWarning(window._W.tl("Please remove all elements inside the columns before deleting them."),{okButton:!0}),e.removeClass("inside-inactive")):window.showWarning(window._W.tl("Please remove all elements inside this element before deleting it."),{okButton:!0})},moveElementObject:function(e,i,n){var o=window.getElementParentString(e[0]),s=e.closest("ul.weebly-content-area");s.parent().find(".empty-element-message, .empty-message").remove();var r=null;s.find("li.inside").each(function(){return t(this).attr("id")===e.attr("id")?!1:(r=this,void 0)});var a,l=window.getElementObject(e[0]),c=window.getAreaInstanceForElement(s.parent()[0]);a=t(i).hasClass("wsite-com-long-description")?n.long_description_elements:i?window.getElementSiblings(i):n.elements;var u=a.indexOf(l);a.splice(u,1);var d;d=t(o).hasClass("wsite-com-long-description")?c.long_description_elements:o?window.getElementSiblings(o):c.elements;var h=0;r&&window.getElementParentString(r)===o&&(h=d.indexOf(window.getElementObject(r))+1),d.splice(h,0,l);var p=n.context,f=c.context;return p!==f&&(delete p.elementsByID[l.id],f.elementsByID[l.id]=l,window.hashEach(l.content_fields,function(e,t){delete p.contentFieldsByID[e],f.contentFieldsByID[e]=t})),{parentString:o,areaInstance:c}}};return window.resizeMe=d.resizeMe,window.deleteWeeblyElement=d.deleteWeeblyElement,d}),_wAMD.define("editor/build/images/tooltip",["jquery"],function(e){function t(e){i.css({top:e.pageY+10+"px",left:e.pageX+10+"px"})}var i,n={},o=!0;return n.init=function(n,s){function r(e){o&&(c?e&&t(e):(t(e),i.html(s).show(),c=!0))}function a(){c&&(i.hide(),c=!1)}function l(){a(),n.off(u),i.remove(),i=null}n=e(n);var c=!1;i||(i=e("<div/>",{"class":"ext-tooltip",css:{position:"absolute",display:"none"}}),e("body").append(i));var u={"mouseover mousemove":r,mouseout:a};return n.on(u),l},n.enable=function(){o=!0},n.disable=function(){n.hide(),o=!1},n.hide=function(){i&&i.hide()},n}),_wAMD.define("editor/build/images/resizing",["jquery","editor/app","./tooltip","../ui/utils","./utils","legacy/weebly_element_utils","legacy/weebly_utils_ajax","legacy/weebly_utils","jquery-ui/resizable"],function(e,t,i,n,o){function s(e){var t=e.attr("style");return t&&null!==t.match(/(^|[^\w-])width:/)?!0:!1}function r(e,t){return t.replace(/margin:([^;!]+)(!important)?(;|$)/,"margin:$1 !important$3")}function a(e,t){return t.replace(/margin:([^;!]+)(!important)?(;|$)/,"margin:$1$3")}function l(e,t){Weebly.Elements.selectElement(t.element.closest(".element")[0]),f.resizing=!0,i.disable(),c(t.originalElement,t.element)}function c(e,t){var i=t.parentsUntil("div").last().parent().width(),n=e.outerWidth(!0)-e.width()+(t.outerWidth(!0)-t.width()),o=i-n;return e.resizable("option","maxWidth",o),o}function u(){p&&(p(),p=null)}function d(t,i,n,o){var s=window.getContentFieldProperty(n,"<!SRC!>");if(s){window.pushLoading();var r=s.ucfpid;new window.Ajax.Request(window.ajax,{parameters:{pos:"resizeimage",ucfid:n,ucfpid:r,width:t,height:i,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(i){var s=i.responseText.replace(/\r|\n/g,"").replace(/\?[0-9x]*$/,"")+"?"+t,r=e(o),a=f.updateElementWidth(r);null!==a&&(t=a),window.setContentFieldProperty(n,"<!WIDTH!>",t),window.setContentFieldProperty(n,"<!MAXWIDTH!>","100%"),window.setContentFieldProperty(n,"<!SRC!>",s),Weebly.Elements.saveProperties(),r.attr("src",s)},onFailure:window.errFunc,onComplete:window.popLoading,asynchronous:!1})}}function h(){var t=e(this);if(t.data("ui-resizable")){var i=c(t,t.parent()),n={width:"",height:""};t.css(n).css("max-width",i+"px").closest(".ui-wrapper").css(n)}}var p,f={resizing:!1},m=!0,g=100;return f.init=function(e,n,c){function h(){var e=n[0].src;if(n.data("ui-resizable")||n.width()<=0||n.height()<=0||!n[0].complete||!e.match(/^http:\/\/[^\.]+\.weebly\.com\/uploads\//)&&!e.match(/\/uploads\//))return!1;var t=n.closest(".element");return s(t)&&t.css("width","auto"),n.resizable({handles:"se",aspectRatio:!0,minWidth:30,minHeight:30,maxWidth:1e3,maxHeight:2e3,start:l,stop:v,resize:b}).css({margin:"0","max-width":"100%"}).attr("style",r).closest(".ui-wrapper").css({display:"inline-block",overflow:"visible","vertical-align":n.css("vertical-align")}),f.updateElementWidth(n),x=n.siblings(".ui-resizable-handle").addClass("imageresizer").hide(),i.init(x,window._W.tl("Resize image")),!0}function v(o,s){i.enable();var r=Math.round(s.size.width-n.outerWidth(!0)+n.width()),a=Math.round(s.size.height-n.outerHeight(!0)+n.height());d(r,a,e[0].id,n[0]),window.resizeAllColumns(),t.vent.trigger("editor:elements:changed"),f.resizing=!1,o.originalEvent.originalEvent.stopImmediatePropagation()}function b(){f.updateElementWidth(n)}function y(){return n.data("ui-resizable")?(!S&&x&&m&&!o.isInitialImage(n[0])&&c()&&(u(),x.show(),S=!0,p=w),void 0):(h(),void 0)}function w(){S&&x&&(x.hide(),S=!1)}function _(){n.data("ui-resizable")&&(n.attr("style",a).css("margin",n.parent().css("margin")),w(),n.resizable("destroy").css({width:"",height:""}),e.off(A))}function M(){T++,y()}function C(){if(n.data("ui-resizable")){var t=T;setTimeout(function(){t!==T||e.is(Weebly.Elements.currentElement)||w()},g)}}var x,k={show:y,hide:w,destroy:_},S=!1,T=0,A={mouseover:M,mouseout:C};return e.on(A),h()?k:k},f.updateElementWidth=function(e){var t=e.closest(".element");if(!s(t))return null;e.data("ui-resizable")&&(e=e.closest(".ui-wrapper"));var i=e.outerWidth(!0)+"px";return t.css("width",i),i},f.disable=function(){u(),m=!1},f.enable=function(){m=!0},f.unsetDimensions=function(t){return t instanceof e||(t=n.getScrollContainer()),t.find(".ui-wrapper").children("img").each(h)},f}),_wAMD.define("legacy/classes/elements/CommerceProduct",["jquery","mustache","tpl!elements/commerce-product","tpl!elements/commerce-product-price","tpl!elements/commerce-product-legacy-grid","tpl!elements/commerce-product-legacy-large","tpl!elements/commerce-product-legacy-long","tpl!elements/commerce-product-legacy-small","tpl!elements/commerce-product-legacy-price","legacy/classes/Element","editor/app","commerce/editor/model/Product","commerce/editor/view/elements/ProductSelectListLayoutView","commerce/util/product-utils","editor/build/elements/utils","legacy/weebly_editbox","editor/build/images/resizing","commerce/editor/module"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g){var v={view:"View Details",buy:"Buy Now",cart:"Add to Cart"},b={tpl_commerce_product_legacy_grid:o,tpl_commerce_product_legacy_large:s,tpl_commerce_product_legacy_long:r,tpl_commerce_product_legacy_small:a},y=window.Class.create(c,{"<!PRODUCT!>":function(){return""},afterRender:function($super,e,t){$super(e,t);var i=this,n=this.getContentField(),o=n.getProperty("<!PRODUCTID!>").property_result||!1,s=n.getProperty("<!PRODUCTSKUID!>").property_result||!1,r=require("config");if(!r.chromeless||o&&s)if(r.chromeless||o&&s)this.renderProduct(o,s);else{var a=!1,l=function(e){a=!0;var t=e.get("skus");1==t.size()&&i.saveProductAssociation(t.first().get("site_product_id"),t.first().get("site_product_sku_id"))},c=function(){a||f.deleteWeeblyElement(i.li,!0)};u.showDialog(new h({currentCommerceProduct:i,currentEl:i.li,saveCallback:l,closeCallback:c}))}},renderProduct:function(e,t){function i(i,o){var l=u.commerce.storefrontSettings,c="buynow"==l.get("store_mode");n=l.get("element_legacy_mode");var d=l.getRatioAsPercent("product_image_ratio"),h=r.getProperty("<!BUTTONTYPE!>").property_result;if("view"!=h&&(h=c?"buy":"cart"),i.buttonClass=["wsite-button","wsite-product-button","wsite-button-"+r.getProperty("<!BUTTONSIZE!>").property_result,"view"==h?"wsite-button-normal":"wsite-button-highlight"].join(" "),i.buttonType=h,i.marginTop=r.getProperty("<!MARGINTOP!>").property_result,i.marginBottom=r.getProperty("<!MARGINBOTTOM!>").property_result,i.showPrice="1"==r.getProperty("<!SHOWPRICE!>").property_result,i.showImage="1"==r.getProperty("<!SHOWIMAGE!>").property_result,i.showDescription="1"==r.getProperty("<!SHOWDESCRIPTION!>").property_result,i.productId=e,i.productSkuId=t,i.inEditor=!0,i.staticDomain=window.editorStatic,i.imageWidth=r.getProperty("<!IMAGEWIDTH!>").property_result,i.imageLinkAttrs="href='#' onclick='return false'",o&&(i.imageHtml=s.thumbnail(320,m),i.imageUrl=s.getImageUrl(320,m),i.title=s.get("name")),i.isViewButton="view"==h,i.isAddToCartButton="view"!=h&&!c,i.isBuyNowButton="view"!=h&&c,i.buttonText=v[h],i.buttonUrl="javascript:;",o){i.descriptionHtml=s.get("short_description"),i.currencyPrefix=l.get("currency_prefix"),i.currencySuffix=l.get("currency_suffix");var f=s.get("skus").filter(function(e){return e.get("site_product_sku_id")==t}).first(),m=f.get("image_order")?f.get("image_order")[0]:void 0;i.price="number"==typeof f.get("price")&&f.get("price").toFixed(2),i.salePrice="number"==typeof f.get("sale_price")&&f.get("sale_price").toFixed(2)}if(n){var g=r.getProperty("<!LEGACYALIGN!>").property_result;"right"==g?i.alignCss="margin-left: auto !important":"center"==g&&(i.alignCss="margin-left: auto !important; margin-right: auto !important")}else if(o&&"view"!=h&&f.get("optionchoices").size()){var b=f.get("optionchoices");i.hasVariants=!0,i.variantOptions=[],b.each(function(e){i.variantOptions.push({name:e.get("name"),choice:p.filterOptionText(e.get("choice"))})})}a.chromeless&&($imageHtml=jQuery(i.imageHtml),$imageHtml.find(".wsite-imageaspectratio-image-height").attr("style","margin-bottom: "+d+"% !important"),i.imageHtml=$imageHtml.prop("outerHTML"),""==i.imageUrl&&(i.imageUrl="blank-product-w320.png",i.imageHtml=i.imageHtml.replace('src=""','src="blank-product-w320.png"')),i.name&&(i.title=i.name),i.short_description&&(i.descriptionHtml=i.short_description))}var n,o=this,s=d.findOrCreate({site_product_id:e}),r=this.getContentField(),a=require("config");if(this.product_data&&this.product_data.length||this.product_data&&a.chromeless){var l=this.product_data;i(l),this.renderProductHTML(l,n),a.chromeless||delete this.product_data}else s.fetch().done(function(e){if(e.success){var t={};i(t,!0),o.renderProductHTML(t,n)}})},renderProductHTML:function(o,s){var r,a,c=this.getContentField(),u=e(this.li).find(".element");if(s){var d=c.getProperty("<!LEGACYDISPLAY!>").property_result;r=t.compile(b["tpl_commerce_product_legacy_"+d]),a=t.compile(l)}else r=t.compile(i),a=t.compile(n);o.priceHtml=a({currencyPrefix:o.currencyPrefix,currencySuffix:o.currencySuffix,price:o.price,salePrice:o.salePrice}),u.html(r(o)),!s&&Weebly.Permissions.store_edit&&(m.makeElementContentEditable(u.find(".wsite-product-title").get(0),{richTextControls:!1,saveCallback:function(){p.saveProductChanges("title",o.productId,u.find(".wsite-product-title"))}}),"1"==c.getProperty("<!SHOWDESCRIPTION!>").property_result&&m.makeElementContentEditable(u.find(".wsite-product-description").get(0),{saveCallback:function(){p.saveProductChanges("description",o.productId,u.find(".wsite-product-description"))}})),this.initImageResizing()},initImageResizing:function(){var t=this,i=e(t.li).find(".wsite-product-image, .product-image"),n=i.parent(),o=i.is(".product-image");o&&n.parent().is(".product-block-inner")||(o&&n.css({position:"relative","float":"left"}),n.resizable({aspectRatio:!0,handles:"se",minWidth:50,start:function(){g.resizing=!0},resize:function(e,t){o&&i.css("width",Math.round(t.size.width)-(o?10:0))},stop:function(){g.resizing=!1,n.css("height","");var e=n.width()-(o?10:0)+"px",i=t.getContentField();i.getProperty("<!IMAGEWIDTH!>").property_result=e,i.saveProperties()}}))},saveProductAssociation:function(e,t){var i=this.getContentField();i.getProperty("<!PRODUCTID!>").property_result=e,i.getProperty("<!PRODUCTSKUID!>").property_result=t,i.saveProperties()}});return y.afterRender=function(){u.vent.trigger("store:setting:applySettingStyles")},y.getLegacyMode=function(){return u.commerce.storefrontSettings.get("element_legacy_mode")},Weebly.CommerceProduct=y,c.register("5699726",y),y}),_wAMD.define("editor/build/themes/main",["underscore","legacy/weebly_mobile","legacy/weebly_view","./utils","editor/app","legacy/weebly_cache","legacy/weebly_utils_ajax","legacy/weebly_utils","legacy/weebly_design_options"],function(e,t,i,n,o){var s={};return s.changeTheme=function(e,i,r,a){var l={pos:"settheme",keys:e,color:i||"",cookie:document.cookie,token:Weebly.RequestToken};r&&(l.favorite=1),new window.Ajax.Request(window.ajax,{parameters:l,onSuccess:function(r){var l;try{l=JSON.parse(r.responseText)}catch(c){return window.errFunc(),void 0}o.vent.trigger("forceThemeRerender"),t.clearSettingsCache(),n.setCurrentTheme(e,!1),s.currentThemeColor=i,window.currentThemeColor=i,l.mobileSettings&&(window.currentMobileTheme=l.mobileSettings.mobile_theme),window.updateList(currentPage),l.designOptions?window.setDesignOptions(l.designOptions):window.setDesignOptions(l),window.applyDesignOptions(),a&&a()},onFailure:window.errFunc})},s.getAreaSummary=function(t){var o=s.getCurrentThemeData(),r=n.getPageType(t,o,i.isMobileView),a=o.page_type_templates[r],l=a.body,c=[];return e.each(l,function(e){if("string"==typeof e);else if("menu"==e[0]);else if("credits"==e[0]);else if("header"==e[0]);else{var t=e[0],i=e[1];i||(i=t,t="");var n,o=e[2]||{};n="content"!=i||t?"false"!==o.global:!1,c.push({type:i,name:t,is_global:n})}}),c},s.getCurrentThemeData=function(){var e;return Weebly.themeCache.get(window.currentStandardTheme,function(t){e=t},!0),e},e.extend(window,s),s}),_wAMD.define("tablet/util",["jquery"],function(e){var t={};return t.getImageDimensions=function(t){var i=e("#"+t).find("img");return{offset:i.offset(),height:i.height(),innerHeight:i.innerHeight(),width:i.width(),innerWidth:i.innerWidth()}},t.addPlaceholder=function(t){var i=e(t),n=i.outerWidth(!1),o=i.outerHeight(!1);e(".wsite-transparent-placeholder").remove();var s=e('<div class="wsite-transparent-placeholder"></div>');s.width(n),s.height(o),s.css("marginTop",i.css("marginTop")),s.css("marginBottom",i.css("marginBottom")),s.css("marginLeft",i.css("marginLeft")),s.css("marginRight",i.css("marginRight")),i.after(s),i.hide()},t.removePlaceholder=function(t){t&&e(t).show(),e(".wsite-transparent-placeholder").remove()},t.resizePlaceholder=function(t,i){var n=parseInt(t,10),o=parseInt(i,10),s=e(".wsite-transparent-placeholder");s.width(n+"px"),s.height(o+"px")},t.formatPHPDate=function(e,t){var i=["d","j","m","n","y","Y","a","A","g","h","G","H","i","s"],n=["DD","D","MM","M","YY","YYYY","a","A","hh","h","HH","H","mm","ss"];return _.each(i,function(e,i){t=t.replace(e,n[i])}),new Date(t).toString()},t}),_wAMD.define("tpl!mobile/commerce-product-placeholder-image",[],function(){return'<div class="wsite-product-image-image-container wsite-imageaspectratio-image-container">\n	<div class="wsite-product-image-image-height wsite-imageaspectratio-image-height" style="margin-bottom: 67% !important">\n	</div>\n	<div class="wsite-product-image-image-wrap wsite-imageaspectratio-image-wrap">\n		<img class="wsite-product-image-image wsite-imageaspectratio-image" src="http://cdn2.editmysite.com/images/util/blank-product-w320.png" style="width:100%;top:-25%;left:0%">\n	</div>\n</div>'}),_wAMD.define("tablet/api/element",["jquery","underscore","legacy/weebly_editbox","tablet/util","tablet/api/external","tpl!mobile/commerce-product-placeholder-image","legacy/weebly_element_utils"],function(e,t,i,n,o,s){function r(t,i){var n,o,s,r=e("#inside_"+t+" img"),a=editorApp.commerce.storefrontSettings.getRatioAsNumber("product_image_ratio"),l=Math.round(100*i.width/i.height)/100;void 0===i.width?(n=100,o=0,s=0):l>a?(n=(100*(l/a)).toFixed(2),o=0,s=(50*(1-l/a)).toFixed(2)):(n=100,o=(50*(1-a/l)).toFixed(2),s=0),r.attr("src",i.path),r.width(n+"%"),r.css("top",o+"%"),r.css("left",s+"%")}function a(e,i,n,o){var s,r=window.getElementObject(e);if(r&&r.product_data){if(n&&o){var a=r.getContentField();a.getProperty("<!PRODUCTID!>")&&(a.getProperty("<!PRODUCTID!>").property_result=n,a.getProperty("<!PRODUCTSKUID!>").property_result=o)}t.keys(i).each(function(e){r.product_data[e]=i[e],"product_skus"===e&&(r.product_data.price=i[e][0].price,r.product_data.salePrice=i[e][0].sale_price)}),r.rerender(),s=i.image_order?i.image_order[0]:null,l.assignProductImageAttributes(e,i.product_images,s)}}var l={};return l.addElement=function(t,i,n,o,s){if(!s){var r=Weebly.pageContext.getArea(t,i)||Weebly.siteContext.getArea(t,i);return r?(r.addElement(n,o),!0):!1}var a=e("#"+s);if(!a.length)return!1;var l=window.getElementObject(a.closest("li.inside").attr("id").replace("inside_",""));return l&&l.addChild?l.addChild(n,o,s):!1},l.removeElement=function(t){var i=window.getAreaInstanceForElement(e("#inside_"+t).closest(".weebly-area")[0]);i.removeElement(t)},l.updateColumnWidths=function(e,t){return window.getElementObject(e).updateWidths(t)},l.addColumn=function(t,i,n,o){var s=window.getAreaInstanceForElement(e("#inside_"+t).closest(".weebly-area")[0]);s.addColumn(t,i,n,null,o)},l.setProperty=function(t,i,n,s){setTimeout(function(){var r=window.getElementObject(t),a=r.content_fields[i];window.setContentFieldProperty(i,n,s);var c=window.getContentFieldProperty(i,n);if(c&&"<!SRC!>"===c.reference_property&&""!==c.property_result){var u=a.getProperty("<!DATA!>"),d=u.property_result||"{}",h=JSON.parse(d);h.placeholder=!1,u.property_result=JSON.stringify(h)}var p=e("#"+i);if(r.rerenderContentField(a,p[0],o.forceDocumentSizeChange),r.product_data){var f=r.product_data.image_order?r.product_data.image_order[0]:null;l.assignProductImageAttributes(t,r.product_data.product_images,f)}},0)},l.setProductElementImage=function(t,i){setTimeout(function(){e("#inside_"+t+" img").attr("src",i)},0)},l.assignProductImageAttributes=function(t,i,n){e("#inside_"+t+" .wsite-product-image").html(s);for(var o=null,i=i||[],a=0;a<i.length;a++)if(i[a].product_image_id===n){o=i[a];break}null!==o&&r(t,o)},l.setProductAttributes=function(e,t,i,n){a(e,n,t,i)},l.updateElementsForProduct=function(e,i){var n=Weebly.pageContext.elementsByID;t.each(n,function(t){t.product_data&&t.product_data.product_id===e&&a(t.id,i)})},l.setProperties=function(e,t,i){for(var n=0,o=i.length;o>n;n++)this.setProperty(e,t,i[n].ucfpid,i[n].property_result)},l.getProperty=function(e,t,i){var n=window.getElementObject(e);if(!n)return null;var o=n.getContentField(t);if(!o)return null;var s=o.getProperty(i);return s?s.property_result:null},l.showElement=function(e){var t="#inside_"+e;n.removePlaceholder(t),o.forceDocumentSizeChange()},l.getImageDimensions=function(e){return n.getImageDimensions(e)},l.resizePlaceholder=function(e,t){n.resizePlaceholder(e,t)},l.hideElement=function(e){var t="#inside_"+e;n.addPlaceholder(t)},l.blur=function(){e(":focus").blur()},l}),function(e){function t(){return"weebly-area-"+n++}var i=Class.create({tagName:"div",initialize:function(e,i){this.type=e.type,this.name=e.name||"",this.data=ensureObject(e.data),this.attrs={},this.context=i,this.name==this.type&&(this.name=""),this.elID||(this.elID=t())},getHTML:function(){return"<"+this.tagName+" id='"+this.elID+"'"+" class='weebly-area weebly-"+this.type+"-area'"+">"+this.getInnerHTML()+"</"+this.tagName+">"},beforeRender:function(){},getInnerHTML:function(){return""},afterRender:function(){var t=e.view.isMobileView;t&&this.data.mobileHidden||!t&&this.data.hidden?this.el.hide():this.el.show()},render:function(){var e=this;e.beforeRender(),e.el.innerHTML=e.getInnerHTML(),e.afterRender()},rerender:function(){var e=this,t=e.el;t&&e.unrender(),e.beforeRender(),e.el=t,e.el.innerHTML=e.getInnerHTML(),e.afterRender()},save:function(t){var i=require("config"),n=require("tablet/api/external");"text"==this.type&&n.finishedEditingAreaText(this.type,this.name,this.data.text),i.chromeless||new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"savearea",page_id:this.context.pageID||"",area_type:this.type,area_name:this.name,area_data:Object.toJSON(this.data),extra_data:t?Object.toJSON(t):"",cookie:document.cookie,token:e.RequestToken}})},hide:function(){this.el&&this.el.hide&&this.el.hide(),e.view.isMobileView?this.data.mobileHidden=!0:this.data.hidden=!0,this.save()},show:function(){this.el&&this.el.show(),e.view.isMobileView?delete this.data.mobileHidden:delete this.data.hidden,this.save()},reposition:function(){},unrender:function(){delete this.el}}),n=1;e.GenericLoader.call(i,"type"),i.getNewElID=t,e.Area=i}(Weebly),_wAMD.define("legacy/classes/Area",["legacy/classes/GenericLoader"],function(e){return function(){var t;return t||e.Weebly.Area}}(this)),function(e){var t=Class.create(e.Area,{initialize:function($super,e,t){$super(e,t),this.elements=t.loadElements(e.elements),this.isMain()&&(this.elID="secondlistParent",this.listElID="secondlist")},getHTML:function(){return"<div id='"+this.elID+"'"+" class='weebly-area wsite-elements "+("footer"==this.name||"footer"==this.type?" wsite-footer":" wsite-not-footer")+"'>"+this.getInnerHTML()+"</div>"},getInnerHTML:function(){var e="<ul"+(this.listElID?" id='"+this.listElID+"'":"")+" class='weebly-content-area'"+">",t=this.elements;return t.length?this.elements.each(function(t){e+=t.renderHTML(!1)+"\n"}):e+=this.insertEmptyMessage(),e+="</ul>"},insertEmptyMessage:function(){var e="",t=this.name;if(this.isMain()&&"blog"!=this.context.kind){var i=require("config");e="splash"==_W.PageManager.pages[window.currentPage].layout||_W.view.isMobileView||i.chromeless?'<div id="empty-message-standard" class="empty-element-message"><div class="empty-message-inner">'+_W.tl("Drag Elements Here")+"</div>"+"</div>":'<div id="empty-message" class="empty-element-message"><div class="w-ui"><button class="choose-a-layout btn-flat btn-flat-outline btn-flat-light" onclick="require(\'editor/app\').vent.trigger(\'pageLayouts:gallery:show\', \''+t+"', null);\">"+_W.tl("Choose a Layout")+"</button>"+"</div>"+'<div class="or-separator">'+_W.tl("or")+"</div>"+'<div id="empty-message-inner">'+_W.tl("Drag Elements Here")+"</div>"+"</div>"}else"store"==this.context.kind&&$("wsite-com-area-product")?e='<div id="empty-message" class="wsite-com-empty-long-description inside empty-message"><div id="empty-message-inner">'+_W.tl("This product's long description is empty. Drag elements here.")+'<div class="empty-message-line2"></div>':"blog"==this.context.kind&&(e='<div id="empty-message" class="empty-element-message"><div id="empty-message-inner">'+_W.tl("Drag Elements Here")+"</div>"+"</div>");return e},addElement:function(e,t){var i=this.context.loadElement(e);this.spliceExistingElements([i]),this.elements.splice(t,0,i);var n;n=i.li?i.li:i.renderHTML(!1);var o=jQuery(this.el).find("ul").eq(0);o.find("#empty-message, .empty-element-message").eq(0).remove();var s,r=o.children("li").eq(t);if(r.length?(r.before(n),s=r.prev()):(o.append(n),s=o.children().last()),this.context.elementsByID[i.id],this.removeEmptyColumns(),!i.li&&i.afterRender&&i.afterRender(s[0]),i.columns)for(var a=0;a<i.columns.length;a++)for(var l=i.columns[a],c=0;c<l.length;c++){var u=l[c],d=s.find("li#inside_"+u.id);d.length&&u.afterRender(d[0])}},removeEmptyColumns:function(){jQuery("#"+this.elID+" .wsite-multicol-li").each(function(){var e=jQuery(this),t=e.prop("id").replace("inside_",""),i=window.getElementObject(t);i.removeEmptyColumns()})},removeElement:function(e){var t=this.context.deleteElement(e);this.spliceElement(t.id),this.removeEmptyColumns(),0==this.elements.length&&jQuery("#secondlist.weebly-content-area").html(this.insertEmptyMessage())},spliceExistingElements:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.columns)for(var n=0;n<i.columns.length;n++){var o=i.columns[n];this.spliceExistingElements(o)}this.spliceElement(i.id)}},replaceElement:function(e,t){t=[].concat(t);var i=this.findElement(this.elements,e.id);if(i){var n=i.list,o=i.index;n.splice.apply(n,[o,1].concat(t))}},spliceElement:function(e){var t=this.findElement(this.elements,e);return t?t.list.splice(t.index,1)[0]:null},findElement:function(e,t){for(var i=-1,n=0;n<e.length;n++){var o=e[n];if(o.id==t){i=n;break}}if(i>-1)return{element:e[n],index:i,list:e};for(n=0;n<e.length;n++)if(o=e[n],o.columns)for(var s=0;s<o.columns.length;s++){var r=o.columns[s],a=this.findElement(r,t);if(a)return a}return null},moveBelow:function(e,t){var i=this.spliceElement(e),n=jQuery("#inside_"+e);if(jQuery("#inside_"+t).after(n),jQuery("#inside_"+t).parent().hasClass("columnlist"))this.moveToColumn(i,t);else{for(var o=0,s=0;s<this.elements.length;s++){var r=this.elements[s];if(r.id==t){o=s;break}}this.elements.splice(o+1,0,i)}this.removeEmptyColumns()},moveAbove:function(e,t){var i=this.spliceElement(e),n=jQuery("#inside_"+e);if(jQuery("#inside_"+t).before(n),jQuery("#inside_"+t).parent().hasClass("columnlist"))this.moveToColumn(i,t,!0);else{for(var o=0,s=0;s<this.elements.length;s++){var r=this.elements[s];if(r.id==t){o=s;break}}this.elements.splice(o,0,i)}this.removeEmptyColumns()},moveToColumn:function(e,t,i){var n=i?0:1,o=jQuery("#inside_"+t).closest(".wsite-multicol-li"),s=o.attr("id").replace("inside_",""),r=this.findElement(this.elements,s).element;r.columns.each(function(i){for(var o=0;o<i.length;o++)if(i[o].id==t){i.splice(o+n,0,e);break}})},addColumn:function(e,t,i,n,o){var s=window.getElementObject(e);if(!s)return!1;var r;r=n?this.spliceElement(n):o,s.addColumn(t,i,r),this.removeEmptyColumns()},afterRender:function($super){$super();var e=this,t=e.el.down("ul");t.select("li.inside").each(function(t){if("empty-message"!==t.id){var i=t.id.replace("inside_","");i&&e.context.elementsByID[i]&&e.context.elementsByID[i].afterRender(t)}})},isMain:function(){return("content"==this.type||"blog"==this.context.kind&&currentBlog.postId)&&!this.name&&"store"!=this.context.kind}});e.ElementArea=t,e.Area.register("content",t)}(Weebly),_wAMD.define("legacy/classes/areas/ElementArea",["legacy/classes/Area"],function(e){return function(){var t;return t||e.Weebly.ElementArea}}(this)),_wAMD.define("legacy/classes/areas/AdvancedFooterArea",["jquery","config","legacy/classes/areas/ElementArea","legacy/classes/ElementSpotlight","legacy/classes/Area","legacy/weebly_restrictions"],function(e,t){var i='<div class="wsite-footer-separator"></div><div class="wsite-footer-version">Version: <span class="wsite-footer-version-text">Mobile <span class="wsite-footer-vertical">|</span> <a class="wsite-version-web" href="#">Web</a></span></div>',n=Class.create(Weebly.ElementArea,{listElID:"weebly-footer-list",afterRender:function($super){$super();var o,s,r=this,a=Weebly.view.isMobileView;if(!t.chromeless){var l=r.spotlight=new Weebly.ElementSpotlight({container:r.el,uid:"footer",zIndex:10,paddingHeight:a?10:15,paddingWidth:a?0:15,onOpen:function(){l.isRefresh||r.showPageLayoutPicker(),r.removeAddFooterMessage(),n.isEditing=!0,l.isRefresh||setElementsPageType(),o=e('<span class="btn btn-large btn-primary save-button">'+_W.tl("Save Footer")+"</span>"),s='<a class="btn btn-info" target="_blank" href="http://footer.gallery.weebly.com/">'+_W.tl("Browse Gallery")+"</a>",l.getControlsInner().addClass("footer-controls").append(o.on("click",function(){l.close()})),r.ensureWithinScroll(),r.toggleEmptyMessage(),Weebly.view.isMobileView&&Weebly.mobile.resizeScreen()},onClose:function(){n.isEditing=!1,l.isRefresh||setElementsPageType(),l.getControlsInner().empty(),r.attachAddFooterMessage(),r.removeEmptyMessage(),Weebly.view.isMobileView&&Weebly.mobile.resizeScreen()}});l.cover.attr("title",_W.tl("Click to edit the footer"))}var c=e(r.el);a&&0==c.parent(".wsite-mobile-footer").length&&(e(r.el).parent().addClass("wsite-mobile-footer"),e(r.el).after(i)),r.attachAddFooterMessage()},attachAddFooterMessage:function(){var i,n=this;e(n.el).find("li.inside:not(.wsite-multicol-li)").length||(i=t.chromeless?Mustache.compile("<span class='weebly-empty-footer-message {{className}}'>"+_W.tl("Double-tap to add footer")+"</span>"):Mustache.compile("<span class='weebly-empty-footer-message {{className}}'>"+_W.tl("Click to add footer")+"</span>"),e(n.el).find("> ul").append(i({className:"empty-element-message"})))},removeAddFooterMessage:function(){var t=this;e(t.el).find(".weebly-empty-footer-message").remove()
},toggleEmptyMessage:function(){var e=this,t=jQuery("#"+e.elID),i=this.name;e.elements.length?e.removeEmptyMessage():(footerHtml=_W.view.isMobileView?'<div id="empty-message-footer" class="empty-element-message">'+_W.tl("Drag Elements Here")+"</div>":'<div id="empty-message-footer-layouts" class="empty-element-message"><div class="w-ui"><button class="choose-a-layout btn-flat btn-flat-outline btn-flat-light" onclick="require(\'editor/app\').vent.trigger(\'pageLayouts:gallery:show\', \''+i+"', null);\">"+_W.tl("Choose a Layout")+"</button>"+"</div>"+'<div class="or-separator">'+_W.tl("or")+"</div>"+'<div id="empty-message-inner">'+_W.tl("Drag Elements Here")+"</div>"+"</div>",t.find("#weebly-footer-list").prepend(footerHtml).addClass("empty-footer"))},showPageLayoutPicker:function(){var e=this,t=this.name,i=!1;2==e.elements.length&&e.elements[0].columns&&"27280689"==e.elements[0].columns[0][0].eid&&"27280689"==e.elements[0].columns[1][0].eid&&"6942243"==e.elements[1].eid?i=!0:0==e.elements.length&&(i=!0),i&&!_W.view.isMobileView&&require("editor/app").vent.trigger("pageLayouts:gallery:show",t,null)},removeElement:function($super,e){var t=this.context.deleteElement(e);this.spliceElement(t.id),this.removeEmptyColumns(),0==this.elements.length&&this.attachAddFooterMessage()},removeEmptyMessage:function(){var e=this,t=jQuery("#"+e.elID);t.find("#weebly-footer-list").removeClass("empty-footer").find("#empty-message-footer").remove(),t.find("#empty-message-footer-layouts").remove()},unrender:function($super){var e=this;$super(),e.spotlight&&(e.spotlight.destroy(),delete e.spotlight)},reposition:function($super){$super(),this.spotlight&&this.spotlight.resize()},ensureWithinScroll:function(){var t=this,i=e(t.el),n=e("#scroll_container"),o=i.offset().top+i.outerHeight()+30,s=n.offset().top+n.outerHeight();o>s&&n.scrollTop(n.scrollTop()+(o-s))}});return Weebly.AdvancedFooterArea=n,Weebly.Area.register(function(e){return("content"==e.type&&"footer"==e.name||"footer"==e.type)&&ENABLE_ADVANCED_FOOTER&&Weebly.Restrictions.hasAccess("edit_footer")},n),n}),Weebly.Util=Weebly.Util||{},Weebly.Util.Object={mergeOptions:function(e,t){if(!t)return e;var i=function(e){return null===e?"null":Object.isArray(e)?"array":typeof e};for(key in t){var n=e[key],o=t[key],s=i(n),r=i(o);("undefined"===s||s===r||"null"===s)&&(e[key]=o)}return Object.clone(e)},mergeObjects:function(e,t){for(key in t)e[key]=t[key];return Object.clone(e)}},_wAMD.define("legacy/classes/Util/Object",function(e){return function(){var t;return t||e.Weebly.Util.Object}}(this)),Weebly.BrowserWindow=Class.create({id:null,url:"",handle:null,events:null,options:{windowId:null,top:"center",left:"center",width:500,height:400,location:!1,toolbar:!1,menubar:!1,status:!1,resizable:!1,scrollbars:!1,autoopen:!1},initialize:function(e,t){this.options=Weebly.Util.Object.mergeOptions(this.options,t),this.id=this.options.windowId||this.generateId(),this.url=e,this.events=new Weebly.EventManager,this.options.autoopen&&this.open()},open:function(){return this.handle?(this.handle.focus(),this):(this.handle=window.open(this.url,this.id,this.buildParams()),this)},close:function(){this.handle&&(this.handle.close(),this.handle=null)},generateId:function(){var e="WEEBLY_BROWSER_WINDOW_UNIQUE_ID_LIST";return window[e]=window[e]||0,"WeeblyBrowserWindow"+ ++window[e]},buildParams:function(){for(var e=this.options,t={},i=["location","toolbar","menubar","status","resizable","scrollbars"],n=0;n<i.length;n++){var o=i[n];t[o]=e[o]?"yes":"no"}for(var s=["width","height"],n=0;n<s.length;n++){var o=s[n];t[o]=""+e[o]}if("center"==e.top){var r=parseInt(t.height,10),a="undefined"!=typeof window.screenY?window.screenY:window.screenTop,l=document.viewport.getHeight();t.top=parseInt(a+(l-r)/2.5,10)}if("center"==e.left){var c=parseInt(t.width,10),u="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,d=document.viewport.getWidth();t.left=parseInt(u+(d-c)/2,10)}var h=[];for(o in t)h.push(o+"="+t[o]);return h.join(",")}}),_wAMD.define("legacy/classes/BrowserWindow",["legacy/classes/Util/Object","legacy/weebly_events"],function(e){return function(){var t;return t||e.Weebly.BrowserWindow}}(this)),Weebly.BrowserWindow.SocialAuth=Class.create(Weebly.BrowserWindow,{WINDOW_WIDTH:400,WINDOW_HEIGHT:400,CALLBACK_PREFIX:"weebly_social_auth_cb_",POPUP_URL:"/editor/social_auth.php?cb={callback}&{params}",initialize:function($super,e){e=Weebly.Util.Object.mergeOptions({id:this.generateId(),width:this.WINDOW_WIDTH,height:this.WINDOW_HEIGHT,autoopen:!0,onSuccess:null,onFailure:null,onCancel:null,params:{}},e),this.callback=this.CALLBACK_PREFIX+e.id,this.registerCallback(this.callback),$super(this.buildUrl(this.callback,e.params),e),this.options.onSuccess&&this.events.addListener("success",this.options.onSuccess),this.options.onFailure&&this.events.addListener("failure",this.options.onFailure),this.options.onCancel&&this.events.addListener("cancel",this.options.onCancel)},open:function($super){$super(),this.registerCancelObserver()},cancel:function(){this.events.fireEvent("cancel")},registerCallback:function(e){this.callbackCalled=!1,window[e]=function(e,t){this.callbackCalled=!0,this.events.fireEvent(e,t)}.bind(this)},registerCancelObserver:function(){setTimeout(function(){this.invokeCancelObserver()}.bind(this),250)},invokeCancelObserver:function(){this.callbackCalled||(this.handle&&this.handle.location&&!this.handle.closed?this.registerCancelObserver():this.cancel())},buildUrl:function(e,t){return this.POPUP_URL.replace("{callback}",e).replace("{params}",jQuery.param(t||{}))}}),_wAMD.define("legacy/classes/BrowserWindow/SocialAuth",["legacy/classes/BrowserWindow","legacy/classes/Util/Object"],function(e){return function(){var t;return t||e.Weebly.BrowserWindow.SocialAuth}}(this)),Weebly.BrowserWindow.FacebookAuth=Class.create(Weebly.BrowserWindow.SocialAuth,{WINDOW_WIDTH:650,WINDOW_HEIGHT:325,CALLBACK_PREFIX:"weebly_fb_auth_cb_",POPUP_URL:"/editor/fb_auth.php?cb={callback}&{params}"}),_wAMD.define("legacy/classes/BrowserWindow/FacebookAuth",["legacy/classes/BrowserWindow/SocialAuth"],function(e){return function(){var t;return t||e.Weebly.BrowserWindow.FacebookAuth}}(this)),Weebly.BrowserWindow.TwitterAuth=Class.create(Weebly.BrowserWindow.SocialAuth,{WINDOW_WIDTH:650,WINDOW_HEIGHT:500,CALLBACK_PREFIX:"weebly_twitter_auth_cb_",POPUP_URL:"/editor/twitter_auth.php?cb={callback}&{params}"}),_wAMD.define("legacy/classes/BrowserWindow/TwitterAuth",["legacy/classes/BrowserWindow/SocialAuth"],function(e){return function(){var t;return t||e.Weebly.BrowserWindow.TwitterAuth}}(this)),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.CategoryChange=Class.create({initialize:function(e){this.field=e,this.events=new Weebly.EventManager,this.focused=null,this.icon=this.loadIcon(e)},attach:function(e){if(Object.isArray(e))return e.each(this.attach.bind(this)),void 0;var t=e.select("span")[0];e.select("input")[0],t.observe("dblclick",function(){this.hasFocus(e)||(t.focus(),document.execCommand("selectAll",!1,null))}.bind(this)),t.observe("focus",function(){window.disableBackspaceExit=!1,this.skipCancel=!1,this.setFocus(e)}.bind(this)),t.observe("blur",function(){window.disableBackspaceExit=!0,this.skipCancel||this.events.fireEvent("change",e),this.clearFocus()}.bind(this)),t.observe("keydown",function(i){13==i.keyCode?(i.stop(),this.skipCancel=!0,t.blur(),this.events.fireEvent("change",e)):27==i.keyCode&&(i.stop(),t.blur())}.bind(this)),e.observe("mouseenter",this.showIcon.bind(this,e)),e.observe("mouseleave",this.hideIcon.bind(this,e))},setFocus:function(e){e.addClassName("focused"),this.focused=e,this.hideIcon()},clearFocus:function(){this.focused&&(this.focused.removeClassName("focused"),this.focused.select("span")[0].blur(),this.focused=null)},hasFocus:function(e){return e.hasClassName("focused")},showIcon:function(e){if(!this.focused){var t=e.select("span")[0],i=e.select("input")[0],n=this.icon;n.setStyle({display:"block",left:i.getWidth()+parseInt(i.getStyle("margin-right"))+t.originalWidth+"px"}),e.insert(n),n.optionBinding=e}},hideIcon:function(){this.icon.setStyle({display:"none"})},loadIcon:function(e){var t=e.select(".multi-select .multi-select-edit-icon")[0];return t.observe("click",function(e){t.optionBinding&&(e.stop(),t.optionBinding.select("span")[0].focus(),document.execCommand("selectAll",!1,null))}.bind(this)),t}}),_wAMD.define("legacy/classes/BlogEditor/CategoryChange",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.CategoryCreate=Class.create({initialize:function(e){this.isOpen=!1,this.events=new Weebly.EventManager,this.formBox=e.select("div.category-popout")[0],this.inputField=e.select("div.category-popout input")[0],this.showButton=e.select("label a.add-category")[0],this.submitButton=e.select("div.category-popout span.add")[0],this.bindElements()},open:function(){this.isOpen||(this.formBox.setStyle({display:"block"}),this.inputField.focus(),this.isOpen=!0)},close:function(){this.isOpen&&(this.formBox.setStyle({display:"none"}),this.inputField.value="",this.inputField.blur(),window.focus(),this.isOpen=!1)},toggle:function(){this[this.isOpen?"close":"open"]()},create:function(e){e=e||this.inputField.value,this.close(),this.events.fireEvent("create",e)},bindElements:function(){this.inputField.observe("blur",function(e){e.stop(),this.close()}.bind(this)),this.inputField.observe("keydown",function(e){switch(e.keyCode){case 27:this.close();break;case 13:this.create()}}.bind(this)),this.showButton.observe("mousedown",function(e){e.stop(),this.toggle()}.bind(this)),this.submitButton.observe("mousedown",function(e){e.stop(),this.create()}.bind(this))}}),_wAMD.define("legacy/classes/BlogEditor/CategoryCreate",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.CategoryFilter=Class.create({initialize:function(e){this.events=new Weebly.EventManager,this.field=e,this.listing=e.select(".multi-select")[0],this.search=this.listing.select(".multi-select-search")[0],this.input=this.search.down(),this.current="",this.bindEvents(),this.toggle()},filter:function(e){if(e=e.strip(),e!=this.current){this.current=e;var t=this.splitSearch(e);return t.length?(this.listing.select(".option").each(function(e){for(var i=e.select("span")[0].getInnerText(),n="none",o=0;o<t.length;o++)if(-1!==i.indexOf(t[o])){n="block";break}e.setStyle({display:n})}.bind(this)),void 0):(this.clear(),void 0)}},clear:function(){this.current="",this.input.value="",this.listing.select(".option").each(function(e){e.setStyle({display:"block"})})},select:function(){this.listing.select(".option").each(function(e){"none"!=e.getStyle("display")&&this.events.fireEvent("select",e)}.bind(this)),setTimeout(this.clear.bind(this),300)},toggle:function(){this.listing.select(".option").length>5?(this.search.setStyle({display:"block"}),this.autosize()):this.search.setStyle({display:"none"})},autosize:function(){var e=this.input,t=this.search,i=parseInt(e.getStyle("padding-left"))+parseInt(e.getStyle("padding-right"))+parseInt(e.getStyle("border-left-width"))+parseInt(e.getStyle("border-right-width"));e.setStyle({width:t.getWidth()-i+"px"})},bindEvents:function(){this.input.observe("keydown",function(e){switch(e.keyCode){case 27:this.input.blur();break;case 13:this.select()}}.bind(this)),this.input.observe("keyup",function(){this.filter(this.input.value)}.bind(this))},splitSearch:function(e){return e.split(",").map(function(e){return e.stripScripts().stripTags().replace(/\s+/g," ").strip()}).filter(function(e){return e.length>0}).uniq()}}),_wAMD.define("legacy/classes/BlogEditor/CategoryFilter",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.CategoryManager=Class.create({initialize:function(e){this.field=e,this.list=e.select(".multi-select")[0],this.width=this.list.getWidth(),this.events=new Weebly.EventManager,this.creator=new Weebly.BlogEditor.CategoryCreate(e),this.creator.events.addListener("create",this.create.bind(this)),this.changer=new Weebly.BlogEditor.CategoryChange(e),this.changer.attach(this.list.select(".option")),this.changer.events.addListener("change",this.update.bind(this)),this.changer.events.addListener("cancel",this.resetOptionText.bind(this)),this.changer.events.addListener("select",this.toggleOption.bind(this)),this.filter=new Weebly.BlogEditor.CategoryFilter(e),this.filter.events.addListener("select",this.selectOption.bind(this)),this.events.addListener("create",this.filter.toggle.bind(this.filter)),this.events.addListener("update",this.filter.toggle.bind(this.filter)),this.attachAllOptions()},create:function(e,t,i){e=this.normalize(e);var n=this.field.select("em.empty");n=n.length?n[0]:null,t="undefined"==typeof t?!0:t,i="undefined"==typeof i?!0:i;for(var o=0;o<e.length;o++){var s=e[o],r=this.getCategories();if(r[s])this.selectOption(r[s]),this.scrollToOption(r[s]);else{n&&(n.remove(),n=null);var a=["option"];t&&a.push("new"),a=a.join(" ");var l=i?"checked":"",c=new Element("div",{"class":a}).update('<input type="checkbox" value="'+s+'" '+l+" />"+'<span contenteditable="true">'+s+"</span>");this.attachOption(c);var u=null;for(var d in r)if(s.toLowerCase()<d.toLowerCase()){u=d;break}u?r[u].insert({before:c}):this.list.insert(c),this.scrollToOption(c),this.changer.attach(c)}}this.events.fireEvent("create",e),this.resizeAllOptions()},update:function(e){var t=this.normalize(this.getOptionText(e),!0),i=this.getOptionValue(e);if(t==i||""==t)return this.resetOptionText(e),void 0;var n=this.getCategories();if(n[t])return this.resetOptionText(e),void 0;if(e.hasClassName("new")){var o=this.isOptionChecked(e);return e.remove(),this.create(t,!0,o),void 0}new Weebly.BlogEditor.ChangeCategoryDialog({from:i,to:t,onConfirm:function(){this.events.fireEvent("update",i,t),this.save(e,i,t)}.bind(this),onCancel:function(){this.resetOptionText(e)}.bind(this)})},save:function(e,t,i){var n=function(t){return function(i){this.resetOptionText(e),t&&t(i)}.bind(this)}.bind(this);new Ajax.Request(ajax,{parameters:{pos:"blogchangecategory",blogid:this.field.readAttribute("data-blog-id"),from:t,to:i,cookie:document.cookie},onSuccess:function(t){var i=this.isOptionChecked(e);e.remove(),this.create(t.responseText,!1,i)}.bind(this),onFailure:n(errFunc),onException:n(exceptionFunc)})},normalize:function(e,t){return Object.isArray(e)||(e=e.split(",")),e=e.map(function(e){return e.stripScripts().stripTags().replace("/'/g","&apos;").replace('/"/g',"&quot;").replace(/\s+/g," ").strip()}).filter(function(e){return e.length>0}).uniq(),t?e.length?e[0]:"":e},getCategories:function(){var e={};return this.list.select("div.option").each(function(t){e[this.getOptionValue(t)]=t}.bind(this)),e},getOptionValue:function(e){return e.select("input")[0].value},getOptionText:function(e){var t=e.select("span")[0];return t[this.getTextProperty(t)]},setOptionText:function(e,t){var i=e.select("span")[0];i[this.getTextProperty(i)]=t},resetOptionText:function(e){this.setOptionText(e,this.getOptionValue(e))},getTextProperty:function(e){return"innerText"in e?"innerText":"textContent"},attachOption:function(e){var t=e.select("input")[0],i=e.select("span")[0];e.observe("mousedown",function(t){e.currentlyEditing||t.stop()}),t.observe("change",function(){this.events.fireEvent("select",e)}.bind(this)),i.observe("keyup",function(){this.resizeAllOptions()}.bind(this)),e.currentlyEditing=!1,i.observe("focus",function(){e.currentlyEditing=!0}),i.observe("blur",function(){e.currentlyEditing=!1});var n=Prototype.Browser.IE?"beforepaste":"paste";i.observe(n,function(){setTimeout(this.sanitizeOption.bind(this,e),50),this.resizeOption(e)}.bind(this)),this.resizeOption(e)},attachAllOptions:function(){this.list.select(".option").each(this.attachOption.bind(this))},resizeOption:function(e){var t=e.select("input")[0],i=e.select("span")[0];this.list,i.setStyle({width:"auto"}),i.originalWidth=i.getWidth();var n=t.getStyle("margin-right");n||(n=0);var o=e.getWidth()-t.getWidth()-parseInt(n);o>4&&(o-=4),i.setStyle({width:o+"px"})},resizeAllOptions:function(){this.list.select(".option").each(this.resizeOption.bind(this))},sanitizeOption:function(e){if(e){var t=e.select("span")[0],i=t.getInnerText().replace(/[\n\r]+/g," ");t.setInnerText(i)}},toggleOption:function(e){var t=e.select("input")[0];t.writeAttribute("checked",!t.checked),this.events.fireEvent("select",e)},selectOption:function(e){var t=e.select("input")[0];t.writeAttribute("checked",!0),this.events.fireEvent("select",e)},isOptionChecked:function(e){return e.select("input")[0].checked},scrollToOption:function(e){var t=e.positionedOffset().top,i=this.list.scrollTop,n=this.list.getLayout().get("height");(i>t||t>i+n)&&(this.list.scrollTop=t)}}),_wAMD.define("legacy/classes/BlogEditor/CategoryManager",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.ChangeCategoryDialog=Class.create({initialize:function(e){this.options=Object.extend({onConfirm:null,onCancel:null,from:"",to:""},e),this.dialog=new Weebly.Dialog("change-blog-category-prompt",{modal:!0,showClose:!0,closeFunction:this.handleCancel.bind(this)}),this.buttons={confirm:$("change-blog-category-prompt-ok"),cancel:$("change-blog-category-prompt-cancel")},this.buttons.confirm.stopObserving("click"),this.buttons.confirm.observe("click",this.handleConfirm.bind(this)),this.buttons.cancel.stopObserving("click"),this.buttons.cancel.observe("click",this.handleCancel.bind(this));var t=$("change-blog-category-prompt");t.select(".from")[0].update(this.options.from),t.select(".to")[0].update(this.options.to),this.dialog.open()},handleConfirm:function(e){e.stop(),this.dialog.close(),this.options.onConfirm&&this.options.onConfirm()},handleCancel:function(e){e.stop(),this.dialog.close(),this.options.onCancel&&this.options.onCancel()}}),_wAMD.define("legacy/classes/BlogEditor/ChangeCategoryDialog",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.DraftList=Class.create({initialize:function(e,t){this.list=e,this.button=t,this.bindPages(e.select("ul.pages")[0])},isOpen:function(){return this.button.hasClassName("selected")},open:function(){this.list.show(),this.button.addClassName("selected"),document.body.observe("mousedown",this.outerClick())},close:function(){this.list.hide(),this.button.removeClassName("selected"),document.body.stopObserving("mousedown",this.outerClick())},toggle:function(){this.isOpen()?this.close():this.open()},displayPage:function(e){this.pages.select("li").each(function(e){e.removeClassName("selected")}),page=this.pages.select("a.page"+e)[0].up(),page.addClassName("selected"),this.list.select("ul.draft-posts li").each(function(t){var i=t.readAttribute("data-page-num"),n=i==e?"block":"none";t.setStyle({display:n})})},displayAll:function(){this.list.select("ul.draft-posts li").each(function(e){e.setStyle({display:"block"})})},bindPages:function(e){e?(e.select("li").each(this.bindPage.bind(this)),this.pages=e,this.displayPage(0)):(this.pages=null,this.displayAll())},bindPage:function(e,t){e.observe("click",function(e){e.stop(),this.displayPage(t)}.bind(this))},outerClick:function(){if("undefined"==typeof this.__outerclick){var e=this,t=function(e,t){var i=e.viewportOffset(),n=e.getDimensions();return t.x>i.left&&t.x<i.left+n.width&&t.y>i.top&&t.y<i.top+n.height},i=function(i){var n=i.pointer();!t(e.list,n)&&!t(e.button,n)&&e.close()};this.__outerclick=function(e){i(e)}}return this.__outerclick}}),_wAMD.define("legacy/classes/BlogEditor/DraftList",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.ShareButton=Class.create({initialize:function(e){this.button=e,this.buttonType=e.readAttribute("data-button-type"),this.postId=e.readAttribute("data-post-id"),this.postType=e.readAttribute("data-post-type"),this.hasAuth=e.readAttribute("data-has-auth"),this.hasLink=e.readAttribute("data-has-link"),this.isShared="1"==e.readAttribute("data-is-shared"),this.enabled=e.hasClassName("enabled"),this.elements=this.findElements(e),this.isShared||this.bindEvents()},enable:function(){if(this.enabled=!0,this.moveSwitch(1),this.setValue("1"),"1"!==this.hasAuth||"0"==this.hasLink){var e=this.buttonType.capitalize(),t=function(){this.hasAuth="1",this.hasLink="1"}.bind(this);"Facebook"==e?jQuery(this.element).fbConnect({autoLaunch:!0,onSuccess:t,onClose:this.disable.bind(this)}):new Weebly.BrowserWindow[e+"Auth"]({onSuccess:t,onFailure:this.disable.bind(this),onCancel:this.disable.bind(this)})}},disable:function(){this.enabled=!1,this.moveSwitch(0),this.setValue("0")},toggle:function(){this.enabled?this.disable():this.enable()},moveSwitch:function(e){if(0==e)var t=0;else var i=this.button.getWidth()/2,t=i*e;new Effect.Move(this.elements.toggle,{x:t,duration:.2,mode:"absolute",transition:Effect.Transitions.sinoidal}),new Effect.Opacity(this.elements.mask,{to:1==e?1:0,duration:.2,mode:"absolute",transition:Effect.Transitions.sinoidal})},setValue:function(e){this.elements.input.writeAttribute("value",e)},findElements:function(e){var t={};return e.childElements().each(function(e){return e.hasClassName("on")?(t.on=e,void 0):e.hasClassName("off")?(t.off=e,void 0):e.hasClassName("switch")?(t.toggle=e,void 0):e.hasClassName("mask")?(t.mask=e,void 0):"input"==e.nodeName.toLowerCase()?(t.input=e,void 0):void 0}),t},bindEvents:function(){this.button.observe("click",function(e){e.stop(),this.toggle()}.bind(this)),this.elements.mask.setStyle({display:"block",opacity:"block"==this.elements.mask.getStyle("display")?1:0}),this.button.readAttribute("skip-wrap")||this.wrapPublish()},wrapPublish:function(){return}}),_wAMD.define("legacy/classes/BlogEditor/ShareButton",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.TitleEditor=Class.create({initialize:function(e){this.input=e,this.defaultTitle=e.readAttribute("data-placeholder").strip(),this.attachEvents(),this.attachAdjuster(),this.check()},clear:function(){this.clearAdjuster()},check:function(){var e=this.input.getInnerText().strip();""==e&&this.showOverlay()},showOverlay:function(){this.overlay||this.buildOverlay(),this.overlay.show()},hideOverlay:function(){this.overlay&&this.overlay.hide()},buildOverlay:function(){this.overlay=new Element("h2",{id:"blog-post-title-overlay","class":"blog-title"}).update('<a href="javascript:void(0);" class="blog-post-title">'+this.defaultTitle+"</a>"),this.overlay.observe("click",function(){this.input.focus()}.bind(this)),this.input.insert({after:this.overlay})},attachEvents:function(){this.input.observe("focus",function(){window.disableBackspaceExit=!1,this.hideOverlay(),this.sanitizeTitleInput()}.bind(this)),this.input.observe("blur",function(){window.disableBackspaceExit=!0,this.check(),this.sanitizeTitleInput()}.bind(this)),this.input.observe("keydown",function(e){(13==e.keyCode||27==e.keyCode)&&(e.stop(),this.input.blur())}.bind(this));var e=Prototype.Browser.IE?"beforepaste":"paste";this.input.observe(e,function(){setTimeout(this.sanitizeTitleInput.bind(this),50)}.bind(this))},attachAdjuster:function(){this.adjuster||this.invokeAdjuster()},clearAdjuster:function(){clearTimeout(this.adjuster)},invokeAdjuster:function(){this.positionCalendar(),this.adjuster=setTimeout(this.invokeAdjuster.bind(this),50)},positionCalendar:function(){var e=this.input.up().next().select(".date-pick")[0];if(e){var t=e.previous(),i=t.positionedOffset().left+t.getWidth()+6,n=t.positionedOffset().top;e.setStyle({left:i+"px",top:n+"px"})}},sanitizeTitleInput:function(){if(this.input){var e=this.input.getInnerText().replace(/[\n\r]+/g," ");this.input.setInnerText(e)}}}),_wAMD.define("legacy/classes/BlogEditor/TitleEditor",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Weebly.BlogEditor.UnsavedDialog=Class.create({initialize:function(e){this.options=Object.extend({onConfirm:null,onCancel:null},e),this.dialog=new Weebly.Dialog("cancel-blog-post-prompt",{modal:!0,showClose:!0,inner_class:"weebly-dialog-inner-red",closeFunction:this.handleCancel.bind(this)}),this.buttons={confirm:$("cancel-blog-post-ok"),cancel:$("cancel-blog-post-cancel")},this.buttons.confirm.stopObserving("click"),this.buttons.confirm.observe("click",this.handleConfirm.bind(this)),this.buttons.cancel.stopObserving("click"),this.buttons.cancel.observe("click",this.handleCancel.bind(this)),this.dialog.open()},handleConfirm:function(e){e.stop(),this.dialog.close(),this.options.onConfirm&&this.options.onConfirm()},handleCancel:function(e){e.stop(),this.dialog.close(),this.options.onCancel&&this.options.onCancel()}}),_wAMD.define("legacy/classes/BlogEditor/UnsavedDialog",function(){}),Weebly.BlogEditor=Weebly.BlogEditor||{},Object.extend(Weebly.BlogEditor,{UNSAVED_MESSAGE:_W.tl("This blog post has unsaved changes. Do you want to leave the page and discard your changes?"),draftList:null,spotlight:null,title:null,isEditing:!1,isSaving:!1,isQueued:!1,isConfirming:!1,allowSwitch:!1,initialize:function(){this.bindUnloader()},setMessage:function(e){e=e||"";var t=$$("#blog-navigation li.message span");t.length&&t[0].setInnerText(e)},open:function(){var e=$("icontent_container"),t=$("icontent"),i=e.getHeight()>=t.getHeight()?e:t;if(this.isEditing)return this.createSpotlight(i,$$("div.blog-body")),void 0;if(window.blogPostFirstLoad){window.blogPostFirstLoad=!1;var n=$("scroll_container");if(n){var o=$("blogTable").cumulativeOffset().top-100;n.scrollTop=o}}this.createSpotlight(i,$$("div.blog-body")),this.createCategoryManager($$(".field-categories")[0]),this.attachShareButtons($$(".blog-post-share-buttons .blog-post-share-button")),this.createEmptyBackground(),this.bindChangeEvents(),this.bindShareDraftEvents(),this.bindReplyButtonEvents(),this.isEditing=!0,this.neverEdited=!0},close:function(){this.clearSpotlight(),this.clearCategoryManager(),this.isEditing=!1},save:function(){if(this.isEditorUnsaved()){var e=$("blogTable");this.isSaving=!0;var t=function(){this.setMessage(_W.tl("All changes saved")),this.isQueued?(this.isQueued=!1,this.save()):(this.isSaving=!1,e.removeClassName("unsaved"))}.bind(this),i=e.readAttribute("data-post-id");e.readAttribute("data-blog-id"),this.isEditorDraft()||this.isEditorNew()||goStashPost(i,t,!0)}},tryPageSwitch:function(e){e=Array.prototype.slice.call(e);var t=e[0];return this.allowSwitch?!0:this.isConfirming?!0:"goBlogPost"==t&&"themesMenu"==Pages.currentNavPage?(this.allowSwitch=!0,Pages.go("editMenu"),this.allowSwitch=!1,!0):"undefined"==typeof currentBlog||0==currentBlog.postId||"goBlogPost"==t||-1!=Pages.pageWindows[t].indexOf("goBlogPost")?!0:1!=currentBlog.postId?(this.allowSwitch=!0,Pages.go("updateList",currentPage),this.allowSwitch=!1,"updateList"!=t):currentBlog.saving?(currentBlog.saving=0,!0):(this.isConfirming=!0,new Weebly.BlogEditor.UnsavedDialog({onCancel:function(){this.isConfirming=!1}.bind(this),onConfirm:function(){Pages.go("updateList",currentPage),"updateList"!=t&&Pages.go.apply(Pages,e),this.isConfirming=!1}.bind(this)}),!1)},isEditorUnsaved:function(){return 1==$$("#blogTable.unsaved").length},isEditorDraft:function(){return 1==$$("#blogTable.editing.draft").length},isEditorNew:function(){return 1==$$("#blogTable.editing.newpost").length},clearDraftList:function(){this.draftList=null},createTitleEditor:function(e){this.title&&this.clearTitleEditor(),this.title=new Weebly.BlogEditor.TitleEditor(e)},clearTitleEditor:function(){this.title&&this.title.clear()},createSpotlight:function(e,t){function i(){var e=jQuery(s).offset(),i=jQuery(t).offset();jQuery(o).css({width:jQuery(t).outerWidth()+2*n}).css({top:i.top-jQuery(o).outerHeight()-e.top-n-8,left:i.left-e.left-n})}this.spotlight&&this.clearSpotlight();var n=10;this.spotlight=new Weebly.Spotlight({canvasElement:e,element:t,roundedCorners:!0,interval:100,padding:n,light:!0,opacity:.3,onReposition:function(){i()}}),this.spotlight.show();var o=$("blog-navigation"),s=$(this.spotlight.container[0]);s.insert(o),i()},clearSpotlight:function(){this.spotlight&&this.spotlight.destroy(),this.spotlight=null},createCategoryManager:function(e){if(e){this.categoryManager&&this.clearCategoryManager();var t=new Weebly.BlogEditor.CategoryManager(e);t.events.addListener("create",this.triggerSaveEvent.bind(this)),t.events.addListener("update",this.triggerSaveEvent.bind(this)),t.events.addListener("select",this.triggerSaveEvent.bind(this))}},clearCategoryManager:function(){},createEmptyBackground:function(){var e=$("empty-message-blog");if(e){var t=e.select(".empty-message-blog-text")[0],i=$("secondlist-blog").getDimensions();i.width<400&&e.up().addClassName("small");var t=e.select(".empty-message-blog-text")[0],n=t.getDimensions(),o=e.positionedOffset(),s=t.positionedOffset();bg=new Element("div",{id:"empty-message-blog-bg",style:"width: "+n.width+"px; height: "+n.height+"px; "+"top: "+o.top+"px; left: "+s.left+"px;"}),e.insert({after:bg})}},attachShareButtons:function(e){e&&e.each&&e.each(this.attachShareButton.bind(this))},attachShareButton:function(e){e&&new Weebly.BlogEditor.ShareButton(e)},bindUnloader:function(){this.unloader||(this.unloader=function(){return this.isEditorUnsaved()?this.UNSAVED_MESSAGE:void 0}.bind(this),window.onbeforeunload=this.unloader)},bindChangeEvents:function(){var e=this.triggerSaveEvent.bind(this),t=[$("blog-post-title"),$("post-comments"),$("permalink-url"),$("blog-date-field")];t.each(function(t){t&&("hidden"==t.type?t.hidden_change=e:t.readAttribute("contenteditable")?t.observe("blur",e):t.observe("text"==t.type?"keydown":"change",e))})},bindShareDraftEvents:function(){var e=$$(".field-draftlink");if(e.length){e=e[0];var t=e.select(".input-wrapper")[0],i=t.select("input.disabled")[0],n=i.getLayout(),o=n.get("border-box-width")-n.get("width"),s=t.select(".open-link")[0],r=s.getLayout().get("margin-box-width"),a=t.select(".input-overlay")[0];i.setStyle({width:t.getWidth()-o-r+"px"}),a.setStyle({width:i.getWidth()+"px",height:i.getHeight()+"px"}),a.observe("click",function(){i.select()}),s.observe("click",function(){window.open(i.value)})}},bindReplyButtonEvents:function(){var e=$("post-comments");if(e){var t=function(){for(var t=e.select("option[selected]")[0],i="no"==t.readAttribute("data-comment-value")||inEditor()?"none":"block",n=$$(".blogCommentOptions .blog-button.reply-comment"),o=0;o<n.length;o++)n[o].setStyle({display:i})};e.observe("change",t),t()}},triggerSaveEvent:function(){if(this.neverEdited=!1,!this.isQueued){if(this.isSaving)return this.isQueued=!0,void 0;currentBlog.categories=this.getCategoriesValue(),currentBlog.title=this.getTitleValue(),currentBlog.date=this.getDateValue(),currentBlog.comments=this.getCommentsValue(),currentBlog.permalink=this.getPermalinkValue(),$("blogTable").addClassName("unsaved"),this.setMessage(_W.tl("Saving...")),this.saveTimer&&clearTimeout(this.saveTimer),this.saveTimer=setTimeout(this.save.bind(this),1e3)}},unbindUnloader:function(){this.unloader||Event.stopObserving(window,"beforeunload",this.unloader)},getTitleValue:function(){var e=$("blog-post-title");return e?e.getInnerText():""},getPermalinkValue:function(){var e=$("permalink-url");return e?e.value:""},getCommentsValue:function(){var e=$("post-comments");return e?e.value:""},getDateValue:function(){var e=$("blog-date-field");return e?e.value:""},getSharesValue:function(){var e=require("editor/app").request("blog:post:current"),t=[];return void 0!==e&&e.get("share_buttons").each(function(e){e.enabled&&t.push(e.type)}),Object.toJSON(t)},getCategoriesValue:function(){var e=$("blog-post-categories");if(!e)return"";var t=[];return e.select("input[type=checkbox][checked]").each(function(e){t.push(e.readAttribute("value"))}),t.join(",")}}),_wAMD.define("legacy/classes/BlogEditor/BlogEditor",function(){}),_wAMD.define("editor/blog-editor",["editor/app","legacy/weebly_events","legacy/weebly_dialog","legacy/classes/Spotlight","legacy/classes/BrowserWindow/FacebookAuth","legacy/classes/BrowserWindow/TwitterAuth","legacy/classes/BlogEditor/CategoryChange","legacy/classes/BlogEditor/CategoryCreate","legacy/classes/BlogEditor/CategoryFilter","legacy/classes/BlogEditor/CategoryManager","legacy/classes/BlogEditor/ChangeCategoryDialog","legacy/classes/BlogEditor/DraftList","legacy/classes/BlogEditor/ShareButton","legacy/classes/BlogEditor/TitleEditor","legacy/classes/BlogEditor/UnsavedDialog","legacy/classes/BlogEditor/BlogEditor"],function(){return Weebly.BlogEditor
}),Weebly.BlogList={load:function(){var e=$("blog-navigation");if(e){var t=e.getDimensions();$("blog-navigation-placeholder").setStyle({width:t.width+"px",height:t.height+"px"})}}},_wAMD.define("legacy/classes/BlogList/BlogList",function(e){return function(){var t;return t||e.Weebly.BlogList}}(this)),Weebly=window.Weebly||{},Weebly.DropDowns={Version:"0.5",Author:"David Rusenko",Company:"Weebly, Inc.",activeMenu:null,dropdownsRef:[],dropdownsArray:[],init:function(){Event.observe(document,"click",Weebly.DropDowns.handleClick)},register:function(e){0==this.dropdownsArray.length&&this.init(),this.dropdownsRef[e.id]=e,this.dropdownsArray.push(e)},destroy:function(e){if(e.button&&(e.button.pare,e.button.onclick=null),e.element&&e.element.childNodes.length>0)for(var t=0;t<e.element.childNodes.length;t++)e.element.childNodes[t].onclick=null;e.element&&e.element.parentNode&&"weeblyDropDown"==e.element.parentNode.className&&e.element.parentNode.parentNode.removeChild(e.element.parentNode);for(var t=0;t<Weebly.DropDowns.dropdownsArray.length;t++)Weebly.DropDowns.dropdownsArray[t]==e&&Weebly.DropDowns.dropdownsArray.splice(t,1);delete Weebly.DropDowns.dropdownsRef[e.id],delete e},setValue:function(e,t,i){var n=Weebly.DropDowns.dropdownsRef[e];n.open(),n.options.rowFunction?n.close($(e+"-"+t),i):n.close(t,i)},handleClick:function(e){var t;e.target?t=e.target:e.srcElement&&(t=e.srcElement),3==t.nodeType&&(t=t.parentNode)},refreshChildren:function(e){$H(this.dropdownsRef).each(function(t){"object"==typeof t.value&&$(t.value.element).descendantOf(e)&&t.value.adjustScroll()})}},Weebly.DropDown=Class.create(),Weebly.DropDown.prototype={isOpen:!1,initialize:function(e){e=$(e),this.options=Object.extend({width:"95",height:"21",openWidth:"195",openHeight:null,border:"1px solid #9f9f9f",marginRight:0,background:"#FFFFFF url(http://"+editorStatic+"/weebly/images/dropdown_background.jpg) repeat-x",overflowY:"scroll",dropDownButton:{src:"http://"+editorStatic+"/weebly/images/dropdown_arrow.gif",width:"21",height:"18"},containerClass:"",fieldName:e.name,rowFunction:null,rowCompareFunction:null,generateValueFunction:null,generateContentsFunction:null,rowMargin:"3px 0 2px 0",type:null,onClose:function(){},onOpen:function(){},updateFunction:function(){},noInitialUpdate:!0,rowHoverColor:"#B5D2F0",noRefresh:null,scaleBy:20,zIndex:20,availableValues:[]},arguments[1]||{}),this.id=Math.floor(10000001*Math.random());var t=this.id;this.formEl=e,this.values=[],"YesNo"==this.options.type&&(this.options.rowFunction=function(e){return e>1?void 0:0==e%2?["Yes","Yes"]:["No","No"]}),this.options.availableValues.size()>0&&(this.options.rowFunction=function(e){return"object"==typeof this.availableValues[e]?this.availableValues[e]:!1});var i=document.createElement("DIV");i.className="weeblyDropDown",i.style.position="relative",i.style.marginRight=this.options.marginRight+"px",i.style.width=this.options.width+"px",this.container=$(i);var n=document.createElement("DIV");n.id=this.id+"_dropdownButton",n.className="dropdownButton",n.onclick=function(){Weebly.DropDowns.dropdownsRef[t].open()},n.style.position="absolute",n.style.width=this.options.dropDownButton.width+"px",n.style.height=this.options.dropDownButton.height+"px",n.style.cursor="pointer",n.style.zIndex=this.options.zIndex- -1,n.style.top="3px",n.style.right=0,n.style.background="transparent url('"+this.options.dropDownButton.src+"') no-repeat top left",this.button=n;var o=document.createElement("DIV");if(o.id=this.id+"_dropdownContainer",$(o).addClassName("dropdownContainer"),o.style.width=this.options.width+"px",o.style.height=Prototype.Browser.IE?this.options.height- -0+"px":this.options.height+"px",o.style.position="absolute",o.style.border=this.options.border,o.style.background=this.options.background,o.style.zIndex=this.options.zIndex,o.style.overflowX="hidden",o.style.overflowY="hidden",this.options.containerClass&&$(o).addClassName(this.options.containerClass),this.element=$(o),i.appendChild(n),i.appendChild(o),e.parentNode.insertBefore(i,e.nextSibling),this.options.rowFunction){for(var s,r=0;(s=this.options.rowFunction(r))&&!(r>1e3);){var a=document.createElement("DIV");a.id=this.id+"-"+r,t=this.id,this.options.noRefresh,a.onclick=function(){Weebly.DropDowns.dropdownsRef[t].close(this)};var l=this.options.rowHoverColor;a.onmouseover=function(){this.style.background=l},a.onmouseout=function(){this.style.background="none"},a.style.height=this.options.height+"px",a.style.overflow="hidden",a.style.cursor="pointer",a.style.paddingLeft="8px",a.innerHTML="<textarea style='display: none;' name='val'>"+s[0]+"</textarea><div style='line-height:"+this.options.height+"px;'>"+s[1]+"</div>",s[2]&&this.element.appendChild(s[2]),this.element.appendChild(a),e.value&&(this.options.rowCompareFunction?this.options.rowCompareFunction(e.value,s):e.value==s[0])&&(this.element.scrollTop=0,this.element.scrollTop=this.getScrollHeight(r),this.lastEl=a,this.scrollMe(this.getScrollHeight(r)),this.options.noInitialUpdate||this.options.updateFunction(e.value)),this.values[r]=s[0],r++}this.options.openHeight||(this.options.openHeight=r*this.options.height),e.value&&this.lastEl||(this.lastEl=o.firstChild)}else if("function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction){var a=document.createElement("DIV");a.id=this.id+"-value",a.innerHTML=this.options.generateValueFunction(this),a.style.width=this.options.openWidth-10+"px",a.style.height=this.options.height+"px",a.style.cursor="pointer";var l=this.options.rowHoverColor;a.onmouseover=function(){this.style.background=l},a.onmouseout=function(){this.style.background="none"},t=this.id,a.onclick=function(){Weebly.DropDowns.dropdownsRef[t].close(this)},this.element.appendChild(a);var c=document.createElement("DIV");c.id=this.id+"-contents",c.style.width=this.options.openWidth-10+"px",c.style.display="none",this.element.appendChild(c)}Weebly.DropDowns.register(this)},open:function(){var e=this.element.scrollTop;if(this.element.scrollTop=0,this.checkGone(),1!=this.isOpen){if(Weebly.DropDowns.activeMenu&&Weebly.DropDowns.dropdownsRef[Weebly.DropDowns.activeMenu].closeMe(),"function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction){var t=$(this.id+"-contents");if(t.innerHTML=this.options.generateContentsFunction(this),t.style.display="block",$(this.id+"-value").style.display="none",t.innerHTML.match("-currentcolor")){var i=this.id+"-currentcolor";new Control.ColorPicker(this.id+"-currentcolor",{IMAGE_BASE:"http://"+editorStatic+"/weebly/images/colorpicker/",swatch:this.id+"-colorpicker",onClose:function(){setThemeColor(i)}})}}this.adjustLeft=0,this.resizeWidth(this.options.openWidth),this.resizeHeight(this.options.openHeight),this.element.style.overflowY=this.options.overflowY,this.element.style.zIndex=this.options.zIndex- -2,this.container.style.zIndex=this.options.zIndex- -5,this.element.scrollTop=e,this.button.style.display="none",this.isOpen=!0,Weebly.DropDowns.activeMenu=this.id,this.options.onOpen(this)}},close:function(e,t){if(this.checkGone(),0==this.isOpen)return this.open(),void 0;if(Prototype.Browser.IE?this.resizeHeight(this.options.height- -2):this.resizeHeight(this.options.height),this.element.style.overflowY="hidden",this.options.rowFunction){var i=e.id.replace(/^[0-9]+\-([0-9]+)$/,"$1");this.scrollMe(this.getScrollHeight(i)),this.lastEl=e}else if("function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction){$(this.id+"-contents").style.display="none",$(this.id+"-contents").innerHTML="","undefined"!=typeof e&&(this.formEl.value=e,$(this.id+"-value").innerHTML=this.options.generateValueFunction(this)),$(this.id+"-value").style.display="block";var n=$(this.id+"-contents");n.innerHTML.match("-currentcolor")&&"none"!=$("colorpicker").style.display&&(Control.ColorPicker.activeColorPicker.isOpen=!1,$("colorpicker").style.display="none")}this.element.style.zIndex=this.options.zIndex,this.container.style.zIndex=this.options.zIndex,this.button.style.display="block",t||(this.options.rowFunction?(this.formEl.value=e.firstChild.value,this.options.updateFunction(this.formEl.value)):"function"==typeof this.options.generateValueFunction&&"function"==typeof this.options.generateContentsFunction&&(this.formEl.value=e,this.options.updateFunction(e)),this.options.onClose(this.options.noRefresh)),this.isOpen=!1,Weebly.DropDowns.activeMenu=null,this.adjustScroll(),this.resizeWidth(this.options.width)},changeOptions:function(e){this.element.update(""),this.values=[];var t=0;e.each(function(e){var i=new Element("div",{id:this.id+"-"+t});i.onclick=function(){this.close(i)}.bind(this);var n=this.options.rowHoverColor;i.onmouseover=function(){this.style.background=n},i.onmouseout=function(){this.style.background="none"},i.setStyle({height:this.options.height+"px",overflow:"hidden",cursor:"pointer",paddingLeft:"8px"}),i.update("<textarea style='display: none;' name='val'>"+e[0]+"</textarea><div style='line-height:"+this.options.height+"px;'>"+e[1]+"</div>"),this.element.appendChild(i),this.values[t]=e[0],0==t&&(this.setValue(e[0]),this.formEl.value=e[0]),t++},this),this.options.openHeight=t*this.options.height},setValue:function(e){var t=0;this.scrollMe(this.getScrollHeight(t)),this.lastEl=$(this.id+"-"+t),this.values.each(function(i){i==e&&(this.scrollMe(this.getScrollHeight(t)),this.lastEl=$(this.id+"-"+t)),t++}.bind(this))},getValue:function(){return this.formEl.value},closeMe:function(){this.close(this.lastEl,1)},adjustScroll:function(){if(this.options.rowFunction&&this.lastEl){var e=this.lastEl.id.replace(/^[0-9]+\-([0-9]+)$/,"$1");this.scrollMe(this.getScrollHeight(e))}},getScrollHeight:function(e){var t=this.element,i=t.select("> div:not(.font-group-heading):eq("+e+")")[0];return i.cumulativeOffset().top-t.cumulativeOffset().top},checkGone:function(){this.element&&this.button||Weebly.DropDowns.destroy(this)},resizeWidth:function(e){this.options.scaleBy;var t=this.element;Element.getStyle(t,"width").replace(/px/,""),t.style.width=e+"px";var i=Position.cumulativeOffset(t);t.style.marginLeft=i[0]- -e>document.body.clientWidth&&e>this.options.width?"-"+(e-this.options.width)+"px":"0px"},resizeHeight:function(e){this.options.scaleBy;var t=this.element;Element.getStyle(t,"height").replace(/px/,""),t.style.height=e+"px","auto"==this.options.overflowY&&(t.style.height="")},scrollMe:function(e){Prototype.Browser.IE;var t=this.element;$(t.id).scrollTop=e}},_wAMD.define("legacy/weebly_dropdowns",function(e){return function(){var t;return t||e.Weebly.DropDowns}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.Base=Class.create({STATE_NONE:"STATE_NONE",STATE_LOADING:"STATE_LOADING",STATE_SUCCESS:"STATE_SUCCESS",TEXT_LOADING_TITLE:_W.tl("Publishing"),TEXT_LOADING_BODY:_W.tl("Please wait while we publish your site."),TEXT_SUCCESS_TITLE:_W.tl("Website Published!"),URL_SPINNER:"http://"+editorStatic+"/weebly/images/ajax-loader.gif",DEFAULT_HEIGHT:400,DEFAULT_WIDTH:680,getOptions:function(e){return this.mergeOptions({},e)},initialize:function(e){this.options=this.getOptions(e),this.events=new Weebly.EventManager,this.container=$("publishing-status"),this.dialog=this.createDialog(),this.visible=!1,this.clear(),this.init()},init:function(){},open:function(){return this.visible?void 0:(this.dialog.open(),this.visible=!0,this.events.fireEvent("open"),this)},close:function(e){this.visible&&(e=this.mergeOptions({skipDialog:!1,skipGoMain:!1},e),this.clear(),this.visible=!1,this.events.fireEvent("close"),!e.skipDialog&&this.dialog.close(),!e.skipGoMain&&Pages.go("main"))},clear:function(){return this.getTitleElement().innerHTML="",this.getBodyElement().innerHTML="",this.state=this.STATE_NONE,this.events.fireEvent("clear"),this},loading:function(){return this.open(),this.clear(),this.state=this.STATE_LOADING,this.setTitle(this.TEXT_LOADING_TITLE),this.setBody('<div style="text-align:center;display:block;padding-top:90px;"><img src="'+this.URL_SPINNER+'" />'+"<br /><br />"+this.TEXT_LOADING_BODY+"</div><br /><br />"),this.dialog.positionDialog(),this},success:function(e){return this.open(),this.clear(),this.state=this.STATE_SUCCESS,this.setTitle(this.TEXT_SUCCESS_TITLE),this.setBody(e),this.dialog.positionDialog(),this},setTitle:function(e){this.getTitleElement().setInnerText(e)},setBody:function(e){this.getBodyElement().innerHTML=e},getTitleElement:function(){return this.container.select(".titled-box-title")[0]},getBodyElement:function(){return $("exportText")},createDialog:function(){var e=this,t={};return t.modal=!0,t.blackoutOpacity=.8,t.onClose=function(){e.close({skipDialog:!0})},new Weebly.Dialog(this.container,this.getOptions(t))},mergeOptions:function(){for(var e=Array.prototype.slice.apply(arguments),t={},i=0;i<e.length;i++)Object.extend(t,e[i]);return t}}),_wAMD.define("legacy/classes/PublishWindow/Base",["legacy/weebly_events","legacy/weebly_dialog"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.Base}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.ShareButton=Weebly.PublishWindow.ShareButton||{},Weebly.PublishWindow.ShareButton.Standard=new Class.create({STATE_UNSHARED:"unshared",STATE_SHARING:"sharing",STATE_SHARED:"shared",TEXT_FAIL:_W.tl("There was a problem. Please try again."),TEXT_DENY:_W.tl("Please authorize the Weebly app to share."),TEXT_REAUTH:_W.tl("Authorization expired."),TEXT_EPREV:_W.tl("There was a problem sharing with {service}."),TEXT_CLICK:_W.tl("Click here to reauthorize Weebly"),TEXT_RETRY:_W.tl("Click here to try again"),options:{shareHandler:"none",shareOptions:{},authWindow:null,authCallback:null},initialize:function(e,t){this.element=e,this.service=e.readAttribute("data-service"),this.options=Weebly.Util.Object.mergeOptions(this.options,t),this.bindEvents(),this.hasPreviousError()&&this.setError(this.TEXT_EPREV,this.TEXT_RETRY,this.share.bind(this))},click:function(){this.getState()==this.STATE_UNSHARED&&(this.setState(this.STATE_SHARING),this.isAuthenticated()?this.share():this.auth())},share:function(){var e=this.options.shareHandler,t=this.options.shareOptions;return"ajax"==e?(new Ajax.Request(ajax,{bgRequest:!0,parameters:Weebly.Util.Object.mergeObjects({cookie:document.cookie},t||{}),onSuccess:this.shareSuccess.bind(this),onFailure:this.shareFailure.bind(this),onException:this.shareFailure.bind(this)}),void 0):"callback"==e&&t.fn?(t.fn.apply(null,t.args||{}),void 0):void 0},shareSuccess:function(e){var t=e.responseText.evalJSON();return"success"==t.status?(this.setState(this.STATE_SHARED),void 0):"failure"==t.status&&"reauthorize"==t.reason?(this.setState(this.STATE_UNSHARED),this.setError(this.TEXT_REAUTH,this.TEXT_CLICK,this.reauth.bind(this)),void 0):(this.setState(this.STATE_UNSHARED),this.setError(this.TEXT_FAIL),void 0)},shareFailure:function(e,t){console&&console.log(e,t),this.setState(this.STATE_UNSHARED),this.setError(this.TEXT_FAIL)},auth:function(){this.options.authWindow?new this.options.authWindow({onSuccess:this.authSuccess.bind(this),onFailure:this.authFailure.bind(this),onCancel:this.resetState.bind(this)}):this.options.authCallback&&this.options.authCallback()},authSuccess:function(){this.setAuthenticated(!0),this.share()},authFailure:function(e){this.setState(this.STATE_UNSHARED);var t="external"==e.group&&"user_denied"==e.error;this.setMessage(t?this.TEXT_DENY:this.TEXT_FAIL)},adjustSpacing:function(e){if("twitter"==this.service.toLowerCase()){var t=this.element.closest("#publish-window-header").siblings("#publish-window-footer");t=jQuery(t),e?t.addClass("twitter-failure"):t.removeClass("twitter-failure")}},reauth:function(){this.setState(this.STATE_SHARING),this.auth()},isAuthenticated:function(){return"1"===this.element.readAttribute("data-has-auth")},setAuthenticated:function(e){this.element.writeAttribute("data-has-auth",e?"1":"0")},setMessage:function(e,t,i){var n=this.element.down(".publish-share-message");if(n&&(this.adjustSpacing(Boolean(e)),e=e.replace(/\{service\}/g,this.service),n.removeClassName("publish-share-message-error").setInnerText(e+" "),t&&i)){var o=new Element("a",{href:"#"});o.setInnerText(t).observe("click",function(e){e.stop(),i()}),n.insert(o)}},setError:function(e,t,i){var n=this.element.down(".publish-share-message");n&&(this.setMessage(e,t,i),n.addClassName("publish-share-message-error"))},resetMessage:function(){this.setMessage("")},getState:function(){for(var e=this.element,t=[this.STATE_SHARED,this.STATE_SHARING,this.STATE_UNSHARED],i="publish-share-button-",n=0;n<t.length;n++)if(e.hasClassName(i+t[n]))return t[n];return null},setState:function(e){this.resetMessage();var t="publish-share-button-",i=this.element;i.removeClassName(t+this.STATE_UNSHARED).removeClassName(t+this.STATE_SHARING).removeClassName(t+this.STATE_SHARED).addClassName(t+e)},resetState:function(){this.setState(this.STATE_UNSHARED),this.resetMessage()},bindEvents:function(){this.element.observe("click",function(e){e.stop(),this.click()}.bind(this))},hasPreviousError:function(){return"1"===this.element.readAttribute("data-prev-error")}}),_wAMD.define("legacy/classes/PublishWindow/ShareButton/Standard",["legacy/classes/Util/Object"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.ShareButton.Standard}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.ShareButton.Facebook=new Class.create(Weebly.PublishWindow.ShareButton.Standard,{isAuthenticated:function($super){return $super()&&"1"===this.element.readAttribute("data-has-link")},auth:function(){var e=jQuery(this.element),t=e.parents(".weebly-dialog"),i=t.find(".publish-share-fb-connect").show();e.fbConnect({autoLaunch:!0,dialog:t,backButton:t.find(".fb-share-back"),pubWindow:!0,onStart:i.show.bind(i),onSuccess:this.authSuccess.bind(this),onClose:this.resetState.bind(this)})}}),_wAMD.define("legacy/classes/PublishWindow/ShareButton/Facebook",["legacy/classes/PublishWindow/ShareButton/Standard"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.ShareButton.Facebook}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.ShareButton.Twitter=new Class.create(Weebly.PublishWindow.ShareButton.Standard,{}),_wAMD.define("legacy/classes/PublishWindow/ShareButton/Twitter",["legacy/classes/PublishWindow/ShareButton/Standard"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.ShareButton.Twitter}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.Website=Class.create(Weebly.PublishWindow.Base,{TEXT_DOMAIN_AVAILABLE:_W.tl("Available"),TEXT_CLICK_TO_CONTINUE:_W.tl("Click to Continue"),TEXT_VERIFY_NOTICE_TITLE:_W.tl("Please Verify Your Weebly Account"),TEXT_UPGRADE_NOTICE_MESSAGE:_W.tl("Your site contains Weebly Pro elements. Your published site will not include these Pro elements unless you choose to upgrade."),TEXT_UPGRADE_NOTICE_PUBLISH:_W.tl("Upgrade to Pro"),TEXT_UPGRADE_NOTICE_UPGRADE:_W.tl("Publish Anyway"),TEXT_CAPTCHA_REQUIRED:_W.tl("Please verify that you're human"),TEXT_PUBLISH_SITE_TITLE:_W.tl("Publish Site"),TEXT_OK_PUBLISH_MY_SITE:_W.tl("OK, Publish My Site!"),TEXT_CAPTCHA_ERROR:_W.tl("Please try again."),TEXT_CAPTCHA_GET_IMAGE:_W.tl("Get an image CAPTCHA."),TEXT_CAPTCHA_GET_AUDIO:_W.tl("Get an audio CAPTCHA."),TEXT_CAPTCHA_GET_HELP:_W.tl("Help."),TEXT_CAPTCHA_INSTRUCTIONS_AUDIO:_W.tl("Enter the numbers you hear:"),TEXT_CAPTCHA_INSTRUCTIONS_IMAGE:_W.tl("Enter the words above:"),URL_DOMAIN_DROPDOWN_BUTTON:"http://"+editorStatic+"/weebly/images/gray-drop-down-larger.jpg",success:function($super,e){if(e.match(/Error\s/i))return this.close(),showWarning(e),Pages.go("main"),void 0;if(e.match(/VerifyWarning\s/i))return this.close(),showWarning(e),this.createVerifyNotice(),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/verify-account",title:"Verify Account for Publish"}),Pages.go("main"),void 0;if(e.match(/CaptchaRequired\s/i))return this.showCaptchaMarkup(),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/captcha-required",title:"Captcha Required for Publish"}),void 0;if(e.match(/%%UPGRADEELEMENTS%%/)){var t=e.replace(/%%UPGRADEELEMENTS%%/g,"").replace(/\s*/g,"");return this.createUpgradeNotice(t),"function"==typeof window.ga&&window.ga("send","pageview",{page:"/upgrade-required",title:"Upgrade Required for Publish"}),void 0}$super(e);var i=$("siteLocation");i&&(currentSiteLocation=i.innerHTML,this.createDomainSelector(this.getBodyElement()),$("client-preview-button")&&($("client-preview-button").hide(),$("client-go-live-button").hide(),$("publish-button").show())),this.dialog.positionDialog();var n={responseText:e};handleDesignerPublishCodes(n,currentSite,$("exportText"));var o=this.getBodyElement().select(".publish-share");if(o.length&&this.attachShareButtons(o[0]),"function"==typeof window.ga){var s="no";_W.isFirstPublish&&(s="yes"),window.ga("send","pageview",{page:"/publish?first-time="+s,title:"Publish"})}return _W.isFirstPublish=!1,this},createDomainSelector:function(e){this.isDropdownNew()?this.loadNewDropDown(e):this.loadOldDropDown(e)},isDropdownNew:function(){var e=jQuery("#publish_domain_tld");if(0!=e.length)return e.data().hasOwnProperty("dropdown")},loadNewDropDown:function(e){var t=$("publish_domain_tld"),i=jQuery("#publish_domain_tld").wSelectbox({theme:"com"});i.on("change",checkDomain);var n=e.down(".domain-check-success").visible(),o=$("export-title-text")&&$("export-title-text").innerHTML.match(/\.net.*available/);if(n&&o?(t.value="net",i.val("net")):t.value="com",setTimeout(function(){$("publish_domain_sld").focus()},50),n){var s='<a style="color: green;">'+self.TEXT_DOMAIN_AVAILABLE+"</a>";$("domainStatus").innerHTML=s}},loadOldDropDown:function(e){var t=$("publish_domain_tld");if($("publish_domain_sld"),t){var i=new Weebly.DropDown(t,{availableValues:[["com",".com"],["net",".net"],["org",".org"]],width:"65",height:"28",openWidth:"65",dropDownButton:{src:this.URL_DOMAIN_DROPDOWN_BUTTON,width:"21",height:"25"},updateFunction:checkDomain}),n=e.down(".domain-check-success").visible(),o=$("export-title-text")&&$("export-title-text").innerHTML.match(/\.net.*available/);if(n&&o?(t.value="net",i.setValue("net")):t.value="com",setTimeout(function(){$("publish_domain_sld").focus()},50),n){var s='<a style="color: green;">'+self.TEXT_DOMAIN_AVAILABLE+"</a>";$("domainStatus").innerHTML=s}}},createVerifyNotice:function(){$("orange-error-title").update(this.TEXT_VERIFY_NOTICE_TITLE).setStyle({fontSize:"24px"});var e=new Element("a",{"class":"orange-button-29",href:"#"}).update('<span class="bi">'+this.TEXT_CLICK_TO_CONTINUE+"</span>").observe("click",function(e){e.stop(),openVerifyWindow(),warningDialog.close()});$("verifyNotice").insert({after:"<br />"}).insert({after:e})},fixErrorTitle:function(){$("orange-error-title").update("Publish Temporarily Disabled").setStyle({fontSize:"24px"})},showCaptchaMarkup:function(){this.setTitle(this.TEXT_PUBLISH_SITE_TITLE);var e=new Element("a",{"class":"w-ui",href:"#"}).update('<span class="btn btn-large btn-warning">'+this.TEXT_OK_PUBLISH_MY_SITE+"</span>").observe("click",function(e){e.stop(),submitPublishCaptcha($("recaptcha_challenge_field").value,$("recaptcha_response_field").value)});this.setBody('<div class="captcha-container"><div class="captcha-title">'+this.TEXT_CAPTCHA_REQUIRED+"</div>"+'<div id="publish-captcha">'+'<div class="image-container"><div id="recaptcha_image"></div></div>'+'<div class="recaptcha_lower">'+'<div class="recaptcha_buttons">'+'<img onclick="Recaptcha.reload();" src="http://www.google.com/recaptcha/api/img/clean/refresh.png"/>'+'<img class="recaptcha_only_if_image" onclick="Recaptcha.switch_type(\'audio\')"src="http://www.google.com/recaptcha/api/img/clean/audio.png" alt="'+this.TEXT_CAPTCHA_GET_AUDIO+'"/>'+'<img class="recaptcha_only_if_audio" onclick="Recaptcha.switch_type(\'image\')" src="http://www.google.com/recaptcha/api/img/clean/text.png" alt="'+this.TEXT_CAPTCHA_GET_IMAGE+'"/>'+'<img onclick="Recaptcha.showhelp()" src="http://www.google.com/recaptcha/api/img/clean/help.png" alt="'+this.TEXT_CAPTCHA_GET_HELP+'" />'+"</div>"+'<div class="recaptcha_instructions">'+'<span class="recaptcha_only_if_image">'+this.TEXT_CAPTCHA_INSTRUCTIONS_IMAGE+"</span>"+'<span class="recaptcha_only_if_audio">'+this.TEXT_CAPTCHA_INSTRUCTIONS_AUDIO+"</span>"+"</div>"+'<input type="text" class="shaded-input-32" id="recaptcha_response_field" name="recaptcha_response_field" />'+"</div>"+"</div>"+'<div id="publish-captcha-error" style="display:none;color:red;font-weight:bold;padding:5px;">'+this.TEXT_CAPTCHA_ERROR+"</div>");var t={theme:"custom",custom_theme_widget:"publish-captcha"};Recaptcha.create("6Lf4O9USAAAAAOSa9cF4SEtxBcjrwrLe1_yP00ke","captcha-container",t),$("publish-captcha").insert({after:e})},createUpgradeNotice:function(e){this.setBody('<div class="publish-upgrade-notice"><div class="publish-upgrade-notice-title">'+this.TEXT_UPGRADE_NOTICE_MESSAGE+"</div>"+'<div class="publish-upgrade-notice-publish">'+'<a class="btn btn-default btn-large" href="#" onclick="doExport(); return false;">'+this.TEXT_UPGRADE_NOTICE_UPGRADE+"</a>"+"</div>"+'<div class="publish-upgrade-notice-upgrade">'+'<a class="btn btn-large btn-primary" href="#" onclick="editorApp.vent.trigger(\'billing:upgrade:window\', { refer:\'publish_notice\', level:'+e+' }); return false;">'+'<img class="old-button-bg" src="http://'+editorStatic+"/weebly/images/upgrade_large.gif"+'" alt="'+"Upgrade"+'" style="border:none;" />'+'<span class="label">'+this.TEXT_UPGRADE_NOTICE_PUBLISH+"</span>"+"</a>"+"</div>"+"</div>")},attachShareButtons:function(e){this.buttons={};var t={facebook:Weebly.PublishWindow.ShareButton.Facebook,twitter:Weebly.PublishWindow.ShareButton.Twitter};["facebook","twitter"].each(function(i){var n=e.down(".publish-share-"+i);if(n){var o=this.createShareButton(t[i],n,i);this.buttons[i]=o}}.bind(this))},createShareButton:function(e,t,i){var n=this.getBodyElement().select(".publish-share")[0],o=n.readAttribute("data-site-id");return new e(t,{shareHandler:"ajax",shareOptions:{type:i,pos:"publishshare",site_id:o,token:Weebly.RequestToken},authWindow:Weebly.BrowserWindow[i.capitalize()+"Auth"]})}}),_wAMD.define("legacy/classes/PublishWindow/Website",["legacy/weebly_dropdowns","legacy/classes/PublishWindow/Base","legacy/classes/PublishWindow/ShareButton/Facebook","legacy/classes/PublishWindow/ShareButton/Twitter","legacy/classes/BrowserWindow/FacebookAuth","legacy/classes/BrowserWindow/TwitterAuth"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.Website}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.BlogPost=Class.create(Weebly.PublishWindow.Website,{TEXT_LOADING_TITLE:_W.tl("Publishing Post"),TEXT_LOADING_BODY:_W.tl("Please wait while we publish your post."),TEXT_SUCCESS_TITLE:_W.tl("Post Published!"),success:function($super,e){return-1!==e.indexOf("%%PUBLISH_DISABLED%%")?(this.close(),this):$super(e)},createShareButton:function($super,e,t,i){var n=this.getBodyElement().select(".publish-share")[0],o=n.readAttribute("data-post-id");return new e(t,{shareHandler:"ajax",shareOptions:{type:i,pos:"blogpostshare",post_id:o},authWindow:Weebly.BrowserWindow[i.capitalize()+"Auth"]})}}),_wAMD.define("legacy/classes/PublishWindow/BlogPost",["legacy/classes/PublishWindow/Website","legacy/classes/BrowserWindow/FacebookAuth","legacy/classes/BrowserWindow/TwitterAuth"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.BlogPost}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Weebly.PublishWindow.NewBlogPost=Class.create(Weebly.PublishWindow.BlogPost,{TEXT_LOADING_TITLE:_W.tl("Publishing Post"),TEXT_LOADING_BODY:_W.tl("Please wait while we publish your post."),TEXT_SUCCESS_TITLE:_W.tl("New Post Published!")}),_wAMD.define("legacy/classes/PublishWindow/NewBlogPost",["legacy/classes/PublishWindow/BlogPost"],function(e){return function(){var t;return t||e.Weebly.PublishWindow.NewBlogPost}}(this)),Weebly.PublishWindow=Weebly.PublishWindow||{},Object.extend(Weebly.PublishWindow,{deferHtml:null,win:null,instance:function(){return this.win},open:function(e,t){if(this.win){if(this.win.constructor===e)return win;this.win.close({skipGoMain:!0})}return win=this.create(e,t),win.events.addListener("close",function(){this.win=null}.bind(this)),win.loading(),this.win=win,this.win},close:function(){this.win&&(this.win.close({skipGoMain:!0}),window.editorApp&&editorApp.vent.trigger("publish:dialog:close"))},success:function(e){this.win&&(this.win.success(e),window.editorApp&&editorApp.vent.trigger("publish:success"),this.callback&&(this.callback(),this.callback=void 0))},defer:function(e){this.deferHtml=e},resolve:function(){if(this.deferHtml){var e=this.deferHtml;this.deferHtml=null,this.success(e)}},create:function(e,t){return new(e||Weebly.PublishWindow.Website)(t)}}),_wAMD.define("legacy/classes/PublishWindow/PublishWindow",["legacy/classes/PublishWindow/Website","legacy/classes/PublishWindow/BlogPost","legacy/classes/PublishWindow/NewBlogPost"],function(e){return function(){var t;return t||e.Weebly.PublishWindow}}(this)),Weebly.TimingTest={send:function(e,t,i){new Ajax.Request(ajax,{parameters:{pos:"speedtest",test:e,req_time:t,js_time:i,cookie:document.cookie,token:Weebly.RequestToken},bgRequest:!0,failSilently:!0})}},_wAMD.define("legacy/weebly_timing_test",function(e){return function(){var t;return t||e.Weebly.TimingTest}}(this)),function(e){Weebly.SiteSettings={selectMerchantAccount:function(t){Weebly.SiteSettings.saveSettings({"ecommerce-merchant":t});var i=e("#settings-ecommerce-type-"+t);i&&(e(".ecommerce-section").addClass("hidden"),i.removeClass("hidden"))},saveCurrency:function(e){Weebly.SiteSettings.saveSettings({"ecommerce-currency":e})},updatePremium:function(){e("#settings-upload-favicon").show(),e("#settings-favicon-upgrade").hide()}}}(Weebly.jQuery),_wAMD.define("legacy/weebly_site_settings",["legacy/weebly_sliding_panel","legacy/weebly_dialog","legacy/weebly_restrictions","legacy/weebly_page_manager"],function(e){return function(){var t;return t||e.Weebly.SiteSettings}}(this)),function(e){function t(t){function i(e){v=$(e)}function n(e){b=$(e).observe("mouseover",s).observe("mouseout",r)}function o(){_++}function s(){C&&(d(),_++)}function r(){var e=++_;y=setTimeout(function(){e==_&&M&&c()},x)}function a(e){M=e}function l(e){x=e}function c(){clearTimeout(y),m&&m.visible()&&(m.hide(),t.overflow&&u(),w.afterHide())}function u(){e.jQuery(m).removeClass("inner-overflow w-massless-scroll").find(".hover-toolbar-inner").css("height","").find(".hover-toolbar-inner2").weeblyScroll("destroy")}function d(){clearTimeout(y),m&&v&&w.beforeShow()!==!1&&(m.show(),p())}function h(){return"none"!=m.style.display}function p(){if(h()){var i,n,o,s=document.viewport.getWidth(),r=Math.max($(document.body).getHeight(),document.viewport.getHeight()),a=safeCumulativeOffset(v),l=v.getWidth(),c=v.getHeight(),d=t.alignElement,p=m.down(".hover-toolbar-arrow"),f=p.getWidth();m.down(".hover-toolbar-inner");var g=m.getWidth(),b=m.getHeight(),y=m.getOffsetParent(),w=safeCumulativeOffset(y);w.top-=y.scrollTop,w.left-=y.scrollLeft;var _;if(_=t.forceAbove?!0:t.forceBelow?!1:t.preferAbove?a.top-b<0&&a.top+c+b<=r?!1:!0:a.top+c+b>r&&a.top-b>=0?!0:!1,_?(m.removeClassName("hover-toolbar-below").addClassName("hover-toolbar-above"),i=a.top-b):(m.removeClassName("hover-toolbar-above").addClassName("hover-toolbar-below"),i=a.top+c),n=a.left,"left"==t.align||(n+="right"==t.align?l-g:l/2-g/2),n=Math.max(n,2),n=Math.min(n,s-g-2),d){d=$(d);var M=safeCumulativeOffset(d),C=d.getWidth();s/2>n+g/2?(n=Math.min(n,M.left+C-g),n=Math.max(n,M.left)):(n=Math.max(n,M.left),n=Math.min(n,M.left+C-g))}i+=t.adjustY||0,n+=t.adjustX||0,t.overflow&&!m.hasClassName("inner-overflow")&&(i+b>r-10?e.jQuery(m).addClass("inner-overflow w-massless-scroll").find(".hover-toolbar-inner").css("height",r-20-i).find(".hover-toolbar-inner2").weeblyScroll():u()),o=t.centerArrow?g/2-f/2:a.left+l/2-n-f/2,o=Math.max(o,5),o=Math.min(o,g-f-5),i-=w.top,n-=w.left,m.setStyle({top:i+"px",left:n+"px"}),jQuery(".hover-toolbar-arrow").css({left:o+"px"})
}}function f(){m.stopObserving("mouseover",o).stopObserving("mouseout",r),b.stopObserving("mouseover",s).stopObserving("mouseout",r),m.parentNode&&m.remove()}t=t||{};var m,g,v,b,y,w=this,_=0,M=!0,C=!0,x=t.hideDelay||100;w.setTargetElement=i,w.setHoverElement=n,w.show=d,w.hide=c,w.position=p,w.destroy=f,w.setHideDelay=l,w.setAutoHide=a,w.setAutoShow=function(e){C=e},w.getElement=function(){return m},w.getInnerElement=function(){return g},w.afterHide=t.afterHide||function(){},w.beforeShow=t.beforeShow||function(){},w.isShowing=h,m=new Element("div",{"class":"hover-toolbar hover-toolbar-above"}).setStyle({zIndex:t.zIndex||9998,display:"none"}).update("<div class='hover-toolbar-arrow hover-toolbar-arrow-border'></div><div class='hover-toolbar-arrow'></div><div class='hover-toolbar-inner'><div class='hover-toolbar-inner2'><div class='hover-toolbar-inner3'></div></div></div>"),g=m.down(".hover-toolbar-inner3"),$(t.parent||document.body).insert(m),m.observe("mouseover",o).observe("mouseout",r),i(t.targetElement),n(t.hoverElement||t.targetElement)}e.HoverToolbar=t}(Weebly),_wAMD.define("legacy/classes/HoverToolbar",function(e){return function(){var t;return t||e.Weebly.HoverToolbar}}(this));var SplitPane=Class.create();SplitPane.resizing=!1,SplitPane.cache=new Array,SplitPane.cacheIndex=0,SplitPane.handleWidth=4,SplitPane.prototype={initialize:function(e,t,i,n,o,s){this.options={onStart:Prototype.emptyFunction,onDrag:Prototype.emptyFunction,onEnd:Prototype.emptyFunction,active:!1},Object.extend(this.options,s||{}),this.div1=$(e),this.div2=$(i),this.container=this.div1.parentNode,this.div1_width=t>.5?t:.5,this.div2_left=n,this.div2_width=o>.5?o:.5,SplitPane.cache[SplitPane.cacheIndex]=this,SplitPane.cacheIndex=SplitPane.cacheIndex+1},set:function(){Element.makePositioned(this.container),this.div1.style.width=this.div1_width-.1+"%",this.div2.style.width=this.div2_width-.1+"%",this.div2.style.left=this.div2_left-.1+"%",this.div1_width<.1&&(this.div1.style.width="0.5%"),this.div2_width<.1&&(this.div2.style.width="0.5%"),this.divider=document.createElement("DIV"),this.container.appendChild(this.divider),this.divider.className="splitpane-divider",this.divider.style.position="absolute",this.divider.style.width=SplitPane.handleWidth+"px",this.divider.style.top="0px",this.divider.style.zIndex=4,this.containerWidth=this.getWidth(this.container),this.setDividerX(),this.setDividerHeight(),this.options.active&&(this.eventMouseDown=this.startDrag.bindAsEventListener(this),this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventChangeCursor=this.cursor.bindAsEventListener(this),this.eventMouseMove=this.update.bindAsEventListener(this),Event.observe(this.divider,"mousedown",this.eventMouseDown),Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(this.divider,"mousemove",this.eventChangeCursor),Event.observe(document,"mousemove",this.eventMouseMove))},serialize:function(){return"div1="+this.div1.id+"&div1_left="+this.getXPercent(this.div1)+"&div1_width="+this.getWidthPercent(this.div1)+"&div2="+this.div2.id+"&div2_left="+this.getXPercent(this.div2)+"&div2_width="+this.getWidthPercent(this.div2)},dispose:function(){Event.stopObserving(this.divider,"mousedown",this.eventMouseDown),Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(this.divider,"mousemove",this.eventChangeCursor),Event.stopObserving(document,"mousemove",this.eventMouseMove)},cursor:function(){this.divider.style.cursor="e-resize"},startDrag:function(e){if(Event.isLeftClick(e)){this.active=!0;var t=Position.cumulativeOffset(this.divider);this.start_pointer=[Event.pointerX(e),Event.pointerY(e)],this.inset=this.start_pointer[0]-t[0],this.containerWidth=this.getWidth(this.container),this.start_div1_width=this.getWidth(this.div1),this.start_div2_left=this.getX(this.div2),this.start_div2_width=this.getWidth(this.div2),this.start_divider_x=this.getX(this.divider),Event.stop(e),this.options.onStart(this,e),SplitPane.resizing=!0}},endDrag:function(e){this.active&&(this.active=!1,Event.stop(e),this.setDividerX(),this.setDividerHeight(),this.options.onEnd(this,e),SplitPane.resizing=!1,resizeAllColumns())},update:function(e){if(this.active){var t=[Event.pointerX(e),Event.pointerY(e)],i=t[0]-this.start_pointer[0];100*i/this.containerWidth;var n=this.start_div1_width+i;0>n&&(n=0,i=-this.start_div1_width);var o=this.start_div2_width-i;0>o&&(o=0,i=this.start_div2_width,n=this.start_div1_width+i),this.div1.style.width=100*n/this.containerWidth+"%",this.div2.style.left=100*(this.start_div2_left+i)/this.containerWidth+"%",this.div2.style.width=100*o/this.containerWidth+"%",this.divider.style.left=this.start_divider_x+i+"px",Event.stop(e),this.options.onDrag(this,e)}},setDividerX:function(){var e=this.getX(this.div1)+this.getWidth(this.div1),t=100*((this.getX(this.div2)-e-SplitPane.handleWidth)/2+e)/this.containerWidth+"%";this.divider.style.left=t},setDividerHeight:function(){var e=Math.max(this.getHeight(this.div1),this.getHeight(this.div2));this.divider.style.height=e+"px"},getX:function(e){return e.x?e.x:e.offsetLeft},getXPercent:function(e){var t="0";return t=Element.getStyle(e,"left"),t&&(t=t.replace("%","")),t?parseFloat(t):0},getWidthPercent:function(e){var t="0";return t=Element.getStyle(e,"width"),t&&(t=t.replace("%","")),t?parseFloat(t):0},getWidth:function(e){return e.offsetWidth},getHeight:function(e){return e.currentStyle?e.offsetHeight:Element.getStyle(e,"height").replace("px","")}},SplitPane.setAll=function(){for(i=0;i<SplitPane.cache.length;i++)resizeColumns(SplitPane.cache[i].div1.down("ul"))},Event.observe(window,"load",SplitPane.setAll),_wAMD.define("legacy/splitpane",function(){}),function($){function controlsLocked(e){var t=$(e);return t.find(".inside-hover").length||t.closest(".wsite-multicol-li.inside-active").length||window.isDraggingElement||Draggables.activeDraggable||require("editor/build/images/resizing").resizing||SplitPane.resizing||MultiColumnElement.isResizing||Weebly.ElementSpotlight.isOutside(e)||!window.isWithinDroppable(e)||t.closest(".platform-element-child").length}function deleteElement(e,t,i,n){e.addClass("inside-inactive"),deleteWeeblyElement(e[0],!i,n),t()}function showMove(mouseEvent){function close(){setTimeout(function(){inside.removeClass("inside-move-active"),$(document).off("click.element-control.move")},200)}var moveButton=$(this),inside=moveButton.closest(".inside"),eid,value=inside.children("form").find("[name=idfield]").val();try{eval("var idfield = "+value)}catch(e){return showError(_W.tl("This element is not compatible with a recent upgrade. Please delete this element and drag on a new one.")),void 0}Weebly.Element.fetchElementDefinition(idfield.eid,function(e){openElementMoveCopy(e,moveButton)}),inside.addClass("inside-move-active"),Weebly.Elements.setCurrentElement(inside.find(".element")[0]),$(document).on("click.element-control.move",close).on("mouseup.move-copy",function(){setTimeout(function(){inside.removeClass("inside-move-active"),$(document).off("mouseup.move-copy",".w-move-outer")},200)})}function askDelete(e,t,i){function n(){i&&s.removeClass(i),u.addClass("inactive"),setTimeout(function(){u.remove()},1e3),$(document).off("click.element-control.delete",n),editorApp.vent.off("editor:pages:go",n)}var o=$(this),s=o.closest(".inside"),r=!1,a="";s.hasClass("wsite-multicol-li")&&(r=!0,a=_W.tl("This will delete all %NUM% elements within the columns.").replace("%NUM%",s.find("li.inside").length)),i&&s.addClass(i);var l=Weebly.view.isMobileView?$("#w-mobile-phone"):$("#scroll_container"),c=new Weebly.HoverToolbar({targetElement:o[0],alignElement:s[0],parent:l[0],adjustX:26,preferAbove:!0});c.setAutoHide(!1),c.setAutoShow(!1);var u=$(c.getElement()).addClass("w-element-delete-popup").addClass("inactive").on("click",function(){return!1});$(c.getInnerElement()).addClass("w-ui").append("<p>"+t+"</p>").append($("<span class='btn btn-large btn-danger'>"+_W.tl("Delete")+"</span>").on("click",function(){e(s,n,r,a)})),c.show(),u.removeClass("inactive"),$(document).on("click.element-control.delete",n),editorApp.vent.once("editor:pages:go",n)}window.elementControlsEnabled=!1,Weebly.initElementControls=function(){var e=null;$("#scroll_container").on("mouseover","li.inside",function(){controlsLocked(this)||(e&&e.removeClass("inside-hover"),e=$(this).addClass("inside-hover"))}).on("mouseout","li.inside",function(){controlsLocked(this)||($(this).removeClass("inside-hover inside-handle-hover inside-delete-hover"),e=null)}),$(document).on("mouseover",".w-element-controls .w-upgrade",function(){$(this).closest(".inside").addClass("inside-upgrade-hover")}).on("mouseout",".w-element-controls .w-upgrade",function(){$(this).closest(".inside").removeClass("inside-upgrade-hover")}).on("mouseover",".w-element-controls .w-handle",function(){$(this).closest(".inside").addClass("inside-handle-hover")}).on("mouseout",".w-element-controls .w-handle",function(){$(this).closest(".inside").removeClass("inside-handle-hover")}).on("mouseover",".w-element-controls .w-move",function(){$(this).closest(".inside").addClass("inside-move-hover")}).on("mouseout",".w-element-controls .w-move",function(){$(this).closest(".inside").removeClass("inside-move-hover")}).on("click",".w-element-controls .w-move",showMove).on("mouseover",".w-element-controls .w-delete",function(){$(this).closest(".inside").addClass("inside-delete-hover")}).on("mouseout",".w-element-controls .w-delete",function(){$(this).closest(".inside").removeClass("inside-delete-hover")}).on("click",".w-element-controls .w-delete",function(){askDelete.call(this,deleteElement,_W.tl("Are you sure?"),"inside-delete-active")}),window.elementControlsEnabled=!0},Weebly.askDelete=askDelete}(Weebly.jQuery),_wAMD.define("legacy/weebly_element_controls",["legacy/classes/ElementSpotlight","legacy/classes/HoverToolbar","legacy/splitpane"],function(){}),Weebly.Form={drawRadioOptions:function(e){"string"==typeof e&&(e=e.split("||"));var t="",i="radio-"+Math.floor(999*Math.random());return e.each(function(e){t+='<span class="form-radio-container"><input type="radio" name="'+i+'" /><label>'+e+"</label></span>"}),t},drawSelectOptions:function(e){"string"==typeof e&&(e=e.split("||"));var t='<select class="form-select">';return e.each(function(e){t+="<option>"+_W.tl(e)+"</option>"}),t+="</select>"},drawCheckboxes:function(e){"string"==typeof e&&(e=e.split("||"));var t="";return e.each(function(e){t+='<span class="form-radio-container"><input type="checkbox" /><label>'+e+"</label></span>"}),t},isOverInputWarningLimit:function(){if(Weebly.Restrictions.hasAccess("unlimited_form_inputs"))return!1;var e=$$("#secondlist .outside_top");if(1==e.size()){var t=e[0],i=t.up(".formlist");if(i){var n=i.select(".wsite-form-field").size();return n>=Weebly.Restrictions.accessValue("free_form_inputs")-1}}return!1},isOverInputLimit:function(){if(Weebly.Restrictions.hasAccess("unlimited_form_inputs"))return!1;var e=$$("#secondlist .outside_top");if(1==e.size()){var t=e[0],i=t.up(".formlist");if(i){var n=i.select(".wsite-form-field").size();return n>=Weebly.Restrictions.accessValue("free_form_inputs")}}return!1},isNewFormElement:function(){var e=$$("#secondlist .outside_top");if(1==e.size()&&e[0].down("input")){var t=e[0].down("input").value,i=t.replace(/[^\d]/g,"");return Weebly.Form.elements.member(i)}return!1},showFieldInstructions:function(e,t){var i=new Element("div",{"class":"instructions-container",id:t.id+"-instructions"}).update(e);currentVisibleError=i.identify(),i.observe("click",function(){i.hide().remove()}),$("scroll_container").insert({bottom:i});var n=i.getDimensions(),o=$(t),s=o.cumulativeOffset(),r=o.getDimensions(),a=s.top+r.height/2-n.height/2-133+"px",l=s.left+r.width+20+"px";i.setStyle({top:a,left:l});var c=Math.floor(n.height/2)-10,u="-13";i.insert({bottom:'<img src="http://www.weebly.com/images/error_arrow_left.gif" style="position: absolute; left:'+u+"px; top: "+c+'px;" />'})},removeFieldInstructions:function(e){var t=Event.element(e);t.up(".wsite-form-field")||(document.stopObserving("mousemove",Weebly.Form.removeFieldInstructions),$$(".instructions-container").invoke("remove"))},fieldInstructionsHandler:function(){$$(".wsite-form-instructions").each(function(e){Weebly.Form.setupFieldInstructions(e)})},setupFieldInstructions:function(e){var t=$(e.id.replace("instructions","input"));t||(t=e.up(".wsite-form-field").down(".form-select")),t||(t=e.up(".wsite-form-field").down(".wsite-form-label"));var i=t.up(".wsite-form-field");t.up(".wsite-form-input-container")&&t.up(".wsite-form-input-container").hasClassName("wsite-form-left")&&(t=t.up(".wsite-form-input-container").next(".wsite-form-right")),i.stopObserving("mouseover"),i.observe("mouseover",function(){this.hasClassName("wsite-form-field")&&($(t.id+"-instructions")||e.innerHTML.empty()||Weebly.Form.showFieldInstructions(e.innerHTML,t),document.observe("mousemove",Weebly.Form.removeFieldInstructions))})},commonFieldOptions:{Gender:["Male","Female"],Age:["Less than 13","13-18","19-25","26-35","36-50","Over 50","Prefer not to say"],Income:["Less than $10,000","$10,001-$25,000","$25,001-$40,000","$70,001-$100,000","> $100,000","Prefer not to say"],"Marketing Reference":["Internet Search","Advertisment","Friend","Other"],Answer:[_W.tl("Yes"),_W.tl("No"),_W.tl("Maybe")],Education:["Some High School","Completed High School","Some College","Associate's Degree","Bachelor's Degree","Master's Degree","PhD"],Employment:["Unemployed","Part-time","Full-time","Self-employed"],"Days of the Week":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"Months of the Year":["January","February","March","April","May","June","July","August","September","October","November","December"],"U.S. States":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","Washington D.C.","West Virginia","Wisconsin","Wyoming"],"How Often":["Everyday","Once per week","2 to 3 times per week","Once per month","Less than once per month"],"How Long":["Less than 1 month","1-6 months","1-3 years","Over 3 years","Never"],Satisfaction:["Very Satisfied","Satisfied","Neutral","Unsatisfied","Very Unsatisfied"],Importance:["Very Important","Important","Neutral","Somewhat Important","Not at all Important"],Agreement:["Strongly Agree","Agree","Neutral","Disagree","Strongly Disagree"],Comparison:["Much Better","Somewhat Better","About the Same","Somewhat Worse","Much Worse"]}},_wAMD.define("legacy/weebly_form",["legacy/weebly_restrictions"],function(e){return function(){var t;return t||e.Weebly.Form}}(this)),Weebly=window.Weebly||{},Weebly.ColorChooser=Class.create({colors:[["#FFFFFF","#CCCCCC","#C0C0C0","#999999","#666666","#333333","#000000"],["#FFCCCC","#FF6666","#FF0000","#CC0000","#990000","#660000","#330000"],["#FFCC99","#FF9966","#FF9900","#FF6600","#CC6600","#993300","#663300"],["#FFFF99","#FFFF66","#FFCC66","#FFCC33","#CC9933","#996633","#663333"],["#FFFFCC","#FFFF33","#FFFF00","#FFCC00","#999900","#666600","#333300"],["#99FF99","#66FF99","#33FF33","#33CC00","#009900","#006600","#003300"],["#99FFFF","#33FFFF","#66CCCC","#00CCCC","#339999","#336666","#003333"],["#CCFFFF","#66FFFF","#33CCFF","#3366FF","#3333FF","#000099","#000066"],["#CCCCFF","#9999FF","#6666CC","#6633FF","#6600CC","#333399","#330099"],["#FFCCFF","#FF99FF","#CC66CC","#CC33CC","#993399","#663366","#330033"]],css:{hoverClass:"weebly-color-chooser-hover",selectedClass:"weebly-color-chooser-selected",colorClass:"weebly-color-chooser-color",containerClass:"weebly-color-chooser"},initialize:function(e){this.element=$(e);var t=Object.extend({closeOnClick:!0},arguments[1]||{});t.color&&(this.value=t.color,this.value=this.getValue()),$(t.updateElement)&&(this.updateElement=$(t.updateElement)),t.colors&&(this.colors=t.colors),$(t.clickElement)&&$(t.clickElement).observe("click",this.draw.bindAsEventListener(this)),this.options=t},draw:function(){var e=new Element("div",{"class":this.css.containerClass}),t=new Element("table",{cellspacing:"0",cellpadding:"0"}).setStyle({background:"#CCCCCC",border:"1px solid #CCCCCC"}),i=new Element("tbody");t.update(i),this.colors.each(function(e){var t=new Element("tr");e.each(function(e){var i=new Element("td").setStyle({width:"16px",height:"14px"}),n=new Element("div",{"class":"weebly-color-chooser-color"}).setStyle({backgroundColor:e});this.getValue()==e&&n.addClassName(this.css.selectedClass),n.observe("click",this.selectGridColor.bindAsEventListener(this)),n.observe("mouseover",this.hoverGridColor.bindAsEventListener(this)),n.observe("mouseout",this.leaveGridColor.bindAsEventListener(this)),i.update(n),t.insert({bottom:i})},this),i.insert({bottom:t})},this),e.update(t);var n=new Element("div",{"class":"weebly-color-chooser-custom"}).setStyle({backgroundColor:"#CCCCCC"});n.update('<input style="float:left; width:77px; height:18px;" type="text" value="'+this.getValue()+'" />');var o=new Element("img",{src:"http://"+editorStatic+"/weebly/images/color_picker_button.gif",alt:"save"}).setStyle({"float":"right",cursor:"pointer",margin:"2px"});o.observe("click",this.selectCustomColor.bindAsEventListener(this)),n.insert({bottom:o}),n.insert({bottom:'<div style="clear:both"></div>'}),e.insert({bottom:n}),this.element.update(e),this.options.closeOnClick&&(this.closeTime=(new Date).getTime()+100,this.clickClose=function(e){var t=Event.element(e);(new Date).getTime()>this.closeTime&&!t.up("."+this.css.containerClass)&&(this.close(),document.stopObserving("mousedown",this.clickClose))}.bindAsEventListener(this),document.observe("mousedown",this.clickClose))},removeGridClass:function(e){var t=this.element.down("."+e);t&&t.removeClassName(e)},hoverGridColor:function(e){this.removeGridClass(this.css.hoverClass),Event.element(e).addClassName(this.css.hoverClass)},leaveGridColor:function(e){Event.element(e).removeClassName(this.css.hoverClass)},selectGridColor:function(e){var t=Event.element(e);this.updateValue(t.getStyle("backgroundColor")),this.removeGridClass(this.css.selectedClass),t.addClassName(this.css.selectedClass)},selectCustomColor:function(){this.updateValue(this.element.down("input").value),this.removeGridClass(this.css.selectedClass)},updateValue:function(e,t){this.value=e,this.element.down("input").value=this.getValue(),this.updateElement&&this.updateElement.setStyle({backgroundColor:this.getValue()}),t||this.options.onUpdate&&this.options.onUpdate(this.getValue(e)),this.options.closeOnClick&&this.close()},getValue:function(){return this.value?this.value.match("rgb")?this.rgbToHex(this.value):this.value:""},rgbToHex:function(e){var t=e.match(/rgb\((\d+).*?(\d+).*?(\d+)\)/),i=function(e){return"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16)};return"#"+i(parseInt(t[1]))+i(parseInt(t[2]))+i(parseInt(t[3]))},close:function(){var e=this.element.down(".weebly-color-chooser");e&&e.remove()}}),_wAMD.define("legacy/weebly_color_chooser",function(e){return function(){var t;return t||e.Weebly.ColorChooser}}(this));var tipsShown=20,tooltipCallbacks={};_wAMD.define("legacy/weebly_tooltip",function(){});var previousPages=0,currentSite=0,siteType=null,currentPage=0,currentPagePublished=null,obtainedPage=0,recentDrag=0,currentElement=0,currentThemesPage=0,imageUploadSize=0,userID=0,userIDLocation="",publishingWindow=0,publishingAnim=0,publishingLoc="left",uploadUpdater=new Object,oldSecondList="",oldPages="",externalSites=0,scriptType=[],sitePages=new Object,originalSitePages=new Object,pageOrder=[],tempUser=0,originalPages="",documentWriteElement="body",currentThemesPerPage=8,currentThemesCategory="",validateFunction=function(){validateOK()},validateChangeFunction=function(){},headerSelected=null,headerDimensions=Array(),uploadId=null,currentHeader=null,resetScrollTop=null,friendRequests=0,adsenseID=0,currentImageNum=Math.floor(10000000001*Math.random()),newSitePassword="",currentSiteLocation="",userEvents={},forceFlashPosition=!1,skipNewSlideshowDialog=!1,dndEnabled=!1,xhrUploading=null,optionsBoxSelectingText=!1;Prototype.Browser.IE6=Prototype.Browser.IE&&6==parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5)),jQuery(function(){jQuery(window).on("resize",function(){setWidth()})});var calledAdsenseSetup=!1,calledExternalSetup=!1;jQuery(document).ready(function(){Weebly.initElementControls()}),Event.observe(document,"mouseup",clickHandler),Prototype.Browser.Gecko&&window.navigator.userAgent.match(/Macintosh/)&&Event.observe(document,"click",function(e){var t=Event.element(e);"EMBED"==t.tagName&&clickHandler(e)}),shortcut.add("Ctrl+B",function(){runCommand(currentBox,"Bold",null)}),shortcut.add("Ctrl+U",function(){runCommand(currentBox,"Underline",null)}),shortcut.add("Ctrl+I",function(){runCommand(currentBox,"Italic",null)});var faviconUploading=!1,alt=!1;_wAMD.define("legacy/weebly_main",["editor/app","legacy/weebly_page_manager","editor/blog-editor","legacy/classes/BlogList/BlogList","legacy/classes/PublishWindow/PublishWindow","legacy/classes/PublishWindow/NewBlogPost","legacy/classes/PublishWindow/BlogPost","legacy/weebly_utils","legacy/weebly_timing_test","legacy/weebly_slideshow_admin","legacy/weebly_events","legacy/weebly_dialog","legacy/weebly_site_settings","legacy/classes/Spotlight","legacy/weebly_elements","legacy/weebly_element_controls","legacy/slideshow-jq","legacy/weebly_restrictions","legacy/weebly_form","legacy/weebly_image_gallery","legacy/weebly_sliding_panel","legacy/weebly_linker","legacy/weebly_color_chooser","editor/build/images/utils","legacy/weebly_editbox","config","tablet/api/external","legacy/weebly_tooltip"],function(){}),_wAMD.define("legacy/classes/elements/LegacyElement",["config","editor/build/elements/utils","legacy/classes/Element","legacy/weebly_image_gallery","legacy/slideshow-jq","legacy/weebly_form","legacy/weebly_slideshow_admin"],function(e,t){var i=Weebly.Element,n=Class.create(i,{initialize:function($super,t,i){if($super(t,i),this.children&&(this.children=i.loadElements(this.children)),this.leftChildren&&(this.leftChildren=i.loadElements(this.leftChildren)),this.rightChildren&&(this.rightChildren=i.loadElements(this.rightChildren)),!adsenseID){var n=this.getContentField();n&&n.content&&n.content.match(/serveAds\.php\?type=adsense/)&&!adsenseID&&!e.chromeless&&(Pages.go("adsenseSetup"),calledAdsenseSetup=!0)}calledExternalSetup||this.externalSetup&&(Pages.go("externalSetup",this.externalSetup,this.id),calledExternalSetup=!0)},processHTML:function($super,e,n){var o=this,s="",r=o.getContentField();r&&(s=r.ucfid),e=$super(e,n),e=e.replace(/<!WEEBLYGALLERY2?\-.*?!>/g,function(){return o._isGallery=!0,Weebly.ImageGallery.update(s,o.getPropertyResult("<!COLUMNS!>"),o.getPropertyResult("<!SPACING!>"),o.getPropertyResult("<!BORDER!>")||0,o.getPropertyResult("<!CROPPING!>")||0,o.getPropertyResult("<!THUMBCAPTIONTYPE!>"),o.getPropertyResult("<!THUMBCAPTIONHOVER!>"),o.getPropertyResult("<!IMAGESET!>"))}),e=e.replace(/<!WEEBLYSLIDESHOW\-\{.*?\}!>/g,function(){o._isSlideshow=!0;var e=o.getPropertyResult("<!IMAGES!>");return e=e?e.evalJSON():[],Weebly.Slideshow.generateHTML(s,{elementID:s,nav:o.getPropertyResult("<!NAV!>"),navLocation:o.getPropertyResult("<!NAVLOCATION!>"),captionLocation:o.getPropertyResult("<!CAPTIONLOCATION!>"),transition:o.getPropertyResult("<!TRANSITION!>"),autoplay:o.getPropertyResult("<!AUTOPLAY!>"),speed:o.getPropertyResult("<!SPEED!>"),aspectRatio:o.getPropertyResult("<!ASPECTRATIO!>"),showControls:o.getPropertyResult("<!SHOWCONTROLS!>"),randomStart:o.getPropertyResult("<!RANDOMSTART!>"),images:e})}),e=e.replace(/<!WEEBLYRADIO\-(.*?)\-(.*?)!>/g,function(e,t,i){return Weebly.Form.drawRadioOptions(i)}),e=e.replace(/<!WEEBLYSELECT\-(.*?)\-(.*?)!>/g,function(e,t,i){return Weebly.Form.drawSelectOptions(i)}),e=e.replace(/<!WEEBLYCHECKBOXES\-(.*?)\-(.*?)!>/g,function(e,t,i){return Weebly.Form.drawCheckboxes(i)}),o.formParentID&&(e=e.replace("<!"+o.formParentID+"CONTENTS!>",n?$(o.formParentID+"-form-list").innerHTML:i.renderElementsHTML(o.children))),o.columnParentID&&(n||(e=e.replace("<!"+o.columnParentID+"LHSUL!>",o.leftChildren.length?i.renderElementsHTML(o.leftChildren):""),e=e.replace("<!"+o.columnParentID+"RHSUL!>",o.rightChildren.length?i.renderElementsHTML(o.rightChildren):""))),e=e.replace(/<!EXTERNAL:([^!]+)!>/g,function(e,t){if(1e3>externalSites){externalSites++;var i=t;if(remoteAccounts[i])return remoteAccounts[i].remoteId}return""}),e=e.replace(/<weebly include_once(_noexport)? ([^>]*)>([\S\s]*?)<\/weebly>/gim,function(e,i,n,o){return t.scriptSrc.length<30&&(t.scriptSrc.push(o),t.scriptId.push(n)),""}),e=e.replace(/<weebly only_export([^>]*)>([\S\s]*?)<\/weebly>/gim,""),o._isInitialImage=!1,/<img[^>]*src=[\'\"][^\'\"]*\/na.png[^'"]*['"][^>]*>/.test(e)&&(o._isInitialImage=!0);var a,l=o.getPropertyResult("<!DATA!>")||"{}";try{a=JSON.parse(l)}catch(c){a={}}if(a.placeholder&&(o._isInitialImage=!0),n){if(e.match("custom-html-frame"))return!1;if(jQuery(this.li).find(".product-image").length>0)return!0}return e},"%%FEEDURL%%":function(e){return encodeURIComponent(e)},85662917:function(e){updateCustomHtmlAlign(Weebly.Elements.ucfid,e)},afterRender:function($super,e,t){if($super(e,t),t){Weebly.Elements.isFormElement()&&(initSortables(),Weebly.Form.fieldInstructionsHandler());var i=jQuery(this.li).find("element .wsite-form-instructions");i.length&&Weebly.Form.setupFieldInstructions(i[0])}if(this._isGallery&&(t&&Weebly.ImageGallery.init(),jQuery(e).find("img").on("dragstart",!1)),this._isSlideshow){var n=this.getContentField().ucfid;whenThemeCSSLoaded(function(){Weebly.Slideshow.init(n),t&&resizeAllColumns(),jQuery(e).find(".wslide-slides img").on("dragstart",!1)})}this._isInitialImage&&isImageElement(this.eid)?(this._isInitialImage=!1,jQuery(e).addClass("wsite-initial-image")):(jQuery(e).hasClass("wsite-initial-image")&&jQuery(e).find(".tablet-placeholder").removeClass("tablet-placeholder"),jQuery(e).removeClass("wsite-initial-image"))},getPropertyResult:function(e){var t=this.getContentField();if(t){var i=t.getProperty(e);return i?i.property_result:void 0}}});return n.beforeRender=function(){externalSites=0,t.scriptSrc=[],t.scriptId=[]},n.afterRender=function(i){e.chromeless?jQuery(".wsite-youtube-coverbox").hide():i?ImageExtras.reinit(Weebly.Elements.currentElement):ImageExtras.init(),i||Weebly.SlideshowAdmin.isManaging()&&Weebly.SlideshowAdmin.updateManager();try{t.runIncludedScripts()}catch(n){}},Weebly.LegacyElement=n,i.register(!0,n),n}),_wAMD.define("legacy/classes/elements/FormElement",["jquery","config","legacy/classes/elements/LegacyElement","legacy/classes/ElementSpotlight","legacy/classes/Element"],function(e,t){var i=Class.create(Weebly.LegacyElement,{afterRender:function($super,n,o){$super(n,o);var s=this;if(!t.chromeless){var r=s.spotlight=new Weebly.ElementSpotlight({container:n.down(".element"),uid:"form"+s.id,zIndex:8,onOpen:function(){i.isEditing=!0,setElementsPageType(),r.getControlsInner().addClass("form-controls").append(e("<span class='btn'>"+_W.tl("View Entries")+"</span>").on("click",function(){viewFormData(s.getContentField().ucfid)})).append(e("<span class='btn btn-info'>"+_W.tl("Form Options")+"</span>").on("click",function(){Weebly.Elements.selectElement(e(n).find(".element")[0])})).append(e("<span class='btn btn-primary'>"+_W.tl("Save")+"</span>").on("click",function(){r.close()})),!$H(userEvents).get("editAdvancedForm")&&e("#elements_container").is(":visible")&&showTip("These elements can be dragged into your form to create new fields",$$(".outside_top")[0],"y","101")},onClose:function(){i.isEditing=!1,setElementsPageType(),r.getControlsInner().empty()}});r.cover.attr("title","Click on the form to add or edit the fields")}},reposition:function($super){$super(),this.spotlight&&this.spotlight.resize()},unrender:function($super){$super(),this.spotlight&&(this.spotlight.destroy(),delete this.spotlight)}});return Weebly.FormElement=i,Weebly.Element.register("7423607",i),Weebly.FormElement}),_wAMD.define("tpl!ui/element-list",[],function(){return"{{# categories }}\n{{> ui/element-list-category }}\n{{/ categories }}"}),_wAMD.define("tpl!ui/element-list-category",[],function(){return'<li class="section" data-category="{{ category_id }}">\n	<h3>{{ category_name }}</h3>\n	<ul>\n	{{# elements }}\n		{{> ui/element-list-element}}\n	{{/ elements }}\n	</ul>\n	<div style="clear:both"></div>\n</li>'}),_wAMD.define("tpl!ui/element-list-element",[],function(){return'<li class="outside_top w-ui element_list_item_{{ element_id }}{{ proClass }}"{{# nonEnglish }} data-content="{{ nonEnglish }}"{{/ nonEnglish }}>\n	<form{{# platform_element_id }} data-platform-element-id="{{ platform_element_id }}"{{/ platform_element_id }}{{# platform_element_version }} data-platform-element-version="{{ platform_element_version }}"{{/ platform_element_version }} name="id_{{ element_id }}" autocomplete="off">\n		<input type="hidden" name="idfield" value="def:{{ element_id }}{{# defaults }}|{{ defaults }}{{/ defaults }}" />\n	</form>\n	{{# isProElement }}\n	<div class="w-icon-star pro-element-overlay"></div>\n	{{/ isProElement }}\n	{{#platform_element_id}}\n	<div class="w-icon-delete uninstall-platform-element" style="display: none;"></div>\n	{{/platform_element_id}}\n	{{# icon_url }}<div class="icon third-party-icon" style="background-image:url(\'{{ icon_url }}\')"></div>{{/ icon_url }}\n	{{^ icon_url }}<div class="icon w-icon-{{ iconNumber }}{{# icon }}-{{ icon }}{{/ icon }}"></div>{{/ icon_url }}\n	<div class="title-box"><span class="title">{{ title }}</span></div>\n</li>'}),_wAMD.define("tpl!ui/element-list-nav",[],function(){return'{{# categories }}<li data-category="{{ category_id }}">\n	<span class="category-icon w-icon-category-{{ category_id }}"></span>\n</li>{{/ categories}}'}),function(e){function t(e,t){this.scroll=e,this.options=t}e.fn.weeblyScroll=function(i){var n=Array.prototype.slice.call(arguments);return this.each(function(){var o=e(this),s=o.data("weeblyScroll");"string"==typeof i?(s&&s[i].apply(s,n.slice(1)),"destroy"==i&&o.removeData("weeblyScroll")):s?(s.destroy(),s.init()):(s=new t(o,i),s.init(),o.data("weeblyScroll",s))}),this},t.prototype.init=function(){var t=this;t.outer=t.scroll.parent().addClass("w-scroll-outer").append("<div class='w-scrollbar w-scrollbar-v'><div class='w-scrollbar-inner'><div class='w-scrollbar-handle'></div></div></div><div class='w-scrollbar w-scrollbar-h'><div class='w-scrollbar-inner'><div class='w-scrollbar-handle'></div></div></div><div class='w-scroll-corner'></div>"),t.scroll.addClass("w-scroll").on("scroll.weeblyScroll",t.updateScroll.bind(t)),t.content=t.scroll.find("> :first-child").addClass("w-scroll-content"),t.hbar=t.outer.find(".w-scrollbar-h"),t.hbarInner=t.hbar.find(".w-scrollbar-inner"),t.hbarHandle=t.hbar.find(".w-scrollbar-handle"),t.vbar=t.outer.find(".w-scrollbar-v"),t.vbarInner=t.vbar.find(".w-scrollbar-inner"),t.vbarHandle=t.vbar.find(".w-scrollbar-handle"),t.corner=t.outer.find(".w-scroll-corner"),e.each([t.vbarHandle,t.hbarHandle],function(t,i){e(i).attr("unselectable","on").on("selectstart",!1)}),t.vbarHandle.on("mousedown.weeblyScroll",t.vbarHandleMousedown.bind(t)),t.hbarHandle.on("mousedown.weeblyScroll",t.hbarHandleMousedown.bind(t)),t.update(),setTimeout(function(){t.update()},0)},t.prototype.update=function(){var e=this;if(e.scroll.is(":visible")){e.scroll.removeClass("w-has-native-scrollbars");var t=Math.ceil(e.scroll.outerWidth()-e.scroll[0].clientWidth),i=Math.ceil(e.scroll.outerHeight()-e.scroll[0].clientHeight);(t||i)&&e.scroll.addClass("w-has-native-scrollbars"),e.scroll.css({"padding-right":t,"padding-bottom":i,"margin-right":-t,"margin-bottom":-i}),e.content.css({"margin-right":-t,"margin-bottom":-i});
var n,o=e.availableWidth=e.outer.width(),s=e.content.outerWidth();s>o&&i?(n=!0,e.hbar.show(),e.content.css("padding-bottom",e.hbar.outerHeight())):(n=!1,e.hbar&&e.hbar.hide(),e.content.css("padding-bottom",""));var r,a=e.availableHeight=e.outer.height(),l=e.content.outerHeight();if(l>a&&t?(r=!0,e.vbar.show(),e.content.css("padding-right",e.vbar.outerWidth())):(r=!1,e.vbar&&e.vbar.hide(),e.content.css("padding-right","")),n||r?e.scroll.addClass("w-has-scrollbars"):e.scroll.removeClass("w-has-scrollbars"),n&&r){var c=e.vbarInner.outerWidth(),u=e.hbarInner.outerHeight();e.hbar.css("right",c),e.vbar.css("bottom",u),e.corner.css({width:c,height:u}).show()}else e.vbar.css("bottom",""),e.hbar.css("right",""),e.corner.hide();e.overflowX=n,e.overflowY=r,n&&(e.contentWidth=e.content.outerWidth(),e.hbarLength=e.hbarInner.outerWidth()),r&&(e.contentHeight=e.content.outerHeight(),e.vbarLength=e.vbarInner.outerHeight()),e.updateScroll()}},t.prototype.updateScroll=function(){var e=this;e.overflowX&&e.hbarHandle.css({left:e.scroll.scrollLeft()/e.contentWidth*e.hbarLength,width:e.availableWidth/e.contentWidth*e.hbarLength}),e.overflowY&&e.vbarHandle.css({top:e.scroll.scrollTop()/e.contentHeight*e.vbarLength,height:e.availableHeight/e.contentHeight*e.vbarLength})},t.prototype.vbarHandleMousedown=function(t){function i(e){var t=e.pageY-s,i=t*o.content.outerHeight()/o.vbarInner.outerHeight();o.scroll.scrollTop(r+i)}function n(){o.outer.removeClass("w-scrolling"),e("body").removeClass("w-body-scrolling"),e(document).off("mousemove",i).off("mouseup",n)}var o=this,s=t.pageY,r=o.scroll.scrollTop();o.outer.addClass("w-scrolling"),e("body").addClass("w-body-scrolling"),e(document).on("mousemove",i).on("mouseup",n)},t.prototype.hbarHandleMousedown=function(t){function i(e){var t=e.pageX-s,i=t*o.content.outerWidth()/o.hbarInner.outerWidth();o.scroll.scrollLeft(r+i)}function n(){o.outer.removeClass("w-scrolling"),e("body").removeClass("w-body-scrolling"),e(document).off("mousemove",i).off("mouseup",n)}var o=this,s=t.pageX,r=o.scroll.scrollLeft();o.outer.addClass("w-scrolling"),e("body").addClass("w-body-scrolling"),e(document).on("mousemove",i).on("mouseup",n)},t.prototype.destroy=function(){var e=this;e.outer.removeClass("w-scroll-outer"),e.scroll.off("scroll.weeblyScroll").removeClass("w-scroll").removeClass("w-has-scrollbars").removeClass("w-has-native-scrollbars").css({"padding-right":"","padding-bottom":"","margin-right":"","margin-bottom":""}),e.content.removeClass("w-scroll-content").css({"margin-right":"","margin-bottom":""}),e.vbarHandle.off("mousedown.weeblyScroll"),e.hbarHandle.off("mousedown.weeblyScroll"),e.hbar.remove(),e.vbar.remove(),e.corner.remove(),e.hbar=null,e.hbarInner=null,e.hbarHandle=null,e.vbar=null,e.vbarInner=null,e.vbarHandle=null,e.corner=null}}(jQuery),_wAMD.define("legacy/jquery.weeblyscroll",function(){}),function(e){function t(t,i){var n=this;n.container=t,i=e.extend({stickyClass:"sticky",stickyClassOld:"sticky-old",headlineSelector:"strong",scrollSelector:"ul",onStick:function(){}},i),n.options=i,n.scroller=t.find(i.scrollSelector).first().on("scroll.sticky",n.onScroll.bind(n)),n.ul=t.is("ul")?t:t.find("ul:first"),t.data("sticky",n)}e.fn.stickySectionHeaders=function(i){return i=i||{},this.each(function(){var n,o=e(this);"string"==typeof i?(n=o.data("sticky"),n&&n[i].apply(n,Array.prototype.slice.call(arguments,1))):n=new t(o,i)}),this},t.prototype={update:function(){self.lastCacheBuild=null,this.scroller.is(":visible")&&(this.buildCaches(),this.onScroll())},buildCaches:function(){var t=this,i=t.options,n=t.ul,o=n.find("> li"),s=[],r=[],a=[],l=[],c=t.scroller.offset().top-t.scroller.scrollTop();o.each(function(t,n){n=e(n);var o=n.offset().top-c,u=n.outerHeight(),d=n.find(i.headlineSelector);a.push(d),l.push(d.outerHeight()),s.push(o),r.push(o+u)}),t.items=o,t.itemTops=s,t.itemBottoms=r,t.heads=a,t.headHeights=l,t.lastCacheBuild=new Date},onScroll:function(){var t=this,i=t.options,n=new Date;(!t.lastCacheBuild||n>t.lastCacheBuild.getTime()+1e3)&&t.buildCaches();for(var o=t.items,s=t.scroller.scrollTop(),r=0;r<o.length;r++){var a=e(o[r]),l=t.heads[r],c=t.headHeights[r],u=t.itemTops[r]-s,d=t.itemBottoms[r]-s;u>0||0>d?(a.hasClass(i.stickyClass)||a.hasClass(i.stickyClassOld))&&(a.removeClass(i.stickyClass).removeClass(i.stickyClassOld).css("paddingTop",""),l.css({position:"",top:"",width:""})):c>d?(a.addClass(i.stickyClass).addClass(i.stickyClassOld).css("paddingTop",c),l.css({position:"absolute",top:d-c,width:"100%"})):(!a.hasClass(i.stickyClass)||a.hasClass(i.stickyClassOld))&&(i.onStick(a),a.addClass(i.stickyClass).removeClass(i.stickyClassOld).css("paddingTop",c),l.css({position:"absolute",top:0,width:"100%"}))}},destroy:function(){var e=this;e.scroller.off("scroll.sticky"),e.container.removeData("sticky")}}}(jQuery),_wAMD.define("legacy/jquery.stickysectionheaders",function(){}),_wAMD.define("legacy/weebly_element_list",["jquery","underscore","mustache","editor/app","legacy/weebly_page_manager","legacy/weebly_restrictions","legacy/classes/elements/FormElement","legacy/classes/areas/AdvancedFooterArea","legacy/weebly_view","components/views/ConfirmView","tpl!ui/element-list","tpl!ui/element-list-category","tpl!ui/element-list-element","tpl!ui/element-list-nav","legacy/jquery.weeblyscroll","legacy/jquery.stickysectionheaders"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p){function f(){var t=e(this).data("category");m(t),g(t,!0)}function m(t){e('#available-elements .nav li[data-category="'+t+'"]').addClass("current").siblings().removeClass("current")}function g(t,i){var n=e("#available-elements .scroll"),o=n.find(".content"),s=o.find('li[data-category="'+t+'"]'),r=s.offset().top-o.offset().top;i&&(M=!0),n.animate({scrollTop:r},function(){M=!1})}function v(){var e=t.findWhere(_,{category_id:"sidebar"});return!!e}function b(){e("#available-elements .scroll-outer").stickySectionHeaders({scrollSelector:".scroll",headlineSelector:"h3",onStick:function(e){if(!M){var t=e.data("category");m(t)}}})}function y(){var t=0,i=500;e("#w-editor-left").on("mouseenter",function(){isDraggingElement||(n.vent.trigger("editor:toolbar:show"),++t)}),e("#view-container").hover(function(){if(!isDraggingElement){var e=++t;setTimeout(function(){e==t&&n.vent.trigger("editor:toolbar:hide")},i)}},function(){++t}).on("mousedown",function(){n.vent.trigger("editor:toolbar:hide"),++t})}var w={};w.setElementsPageType=function(){r.isEditing?w.elementsPage("form"):a.isEditing?w.elementsPage("footer"):currentBlog.editingBlog?w.elementsPage("blog"):ENABLE_MOBILE_HOMEPAGE&&l.isMobileView&&currentPage==o.getCurrentHomepage().id?w.elementsPage("mobilehome"):l.isMobileView?Weebly.themeCache.get(window.currentStandardTheme,function(e){e.responsive||w.elementsPage("mobile")}):w.elementsPage("default")};var _,M;return w.elementsPage=function(e){var t=Weebly.elementCache[e]===_;_=Weebly.elementCache[e],w.updateElements(t)},w.updateElements=function(o){e("#available-elements .nav").html(i.render(p,{categories:t.where(_,{show_jump_link:!0})})).find("li").on("click",f),t.each(_,function(e){t.each(e.elements,function(e){e.title=e.override_title||e.display_name,e.isProElement=s.requiresUpgrade(e.element_id),e.proClass=e.isProElement?" pro-element":"",e.iconNumber=Weebly.elementIconOverrides[e.element_id]||e.element_id,e.nonEnglish="en"!=window._W.userLang?window._W.tl(e.title):!1})});var r=e("#available-elements .scroll"),a=o?r.scrollTop():0;e("#available-elements .content").html(i.render(u,{categories:_},{"ui/element-list-category":d,"ui/element-list-element":h})),w.updateElementCategoryHeights(),r.scrollTop(a),t.defer(function(){e("#available-elements .scroll").weeblyScroll("update").parent().stickySectionHeaders("update"),w.updateElementCategoryHeights(),"en"!=window._W.userLang&&(e("html").addClass("non-english"),e(".outside_top").popover({trigger:"hover",placement:"top"})),e("#available-elements").find(".outside_top .uninstall-platform-element").on("click",function(){var t=e(this).parent();n.showDialog(new c({message:_W.tl("Are you sure you want to uninstall this element from your site?"),callback:function(e){if(e){var i=t.find("form").data("platform-element-id"),n=t.find("form").data("platform-element-version");Weebly.Editor.RPC.PlatformElementInstallation.uninstallElement(userID,currentSite,i,n).done(function(){for(var e=Weebly.elementCache["default"],t=e[e.length-1],n=0;n<t.elements.length;n++){var o=t.elements[n];if(o.platform_element_id==i){t.elements.splice(n,1);break}}for(var s=Weebly.elementCache.blog,r=s[s.length-1],n=0;n<r.elements.length;n++){var o=r.elements[n];if(o.platform_element_id==i){r.elements.splice(n,1);break}}updateElements(!0)})}}}))}),e(document).keydown(function(t){t.altKey&&e("#available-elements").find(".outside_top .uninstall-platform-element").show()}).keyup(function(t){t.altKey||e("#available-elements").find(".outside_top .uninstall-platform-element").hide()})}),m(_[0].category_id),initSortables()},require("editor/app").vent.on("editor:elements:refresh",function(){updateElements(!0)}),w.updateElementCategoryHeights=function(){e("#available-elements .section:last").css("min-height",e("#available-elements .scroll-outer").height()),e("#available-elements .scroll").weeblyScroll("update")},w.outputElement=function(e){return i.render(h,e)},w.hideBlogSideBarCategory=function(){v()&&(_=t.filter(_,function(e){return"sidebar"!=e.category_id}),w.updateElements(!1))},w.showBlogSideBarCategory=function(){v()||w.elementsPage("blog")},e(function(){e("#available-elements .scroll").weeblyScroll(),b(),y()}),t.extend(window,w),w}),Position.includeScrollOffsets=!0,jQuery(document).on("click","#error",function(){new Effect.Fade("error")}).on("click","#tip11",function(){new Effect.Fade("tip11")}).on("click","#tip12",function(){new Effect.Fade("tip12")}).on("click","#tip13",function(){Pages.go("main")}).on("click","#help",function(){Pages.go("main")}).on("click","#warning",function(){new $("warning").hide()}).on("click","#wsite-title",function(e){Weebly.Restrictions.hasAccess("editable_site_title")&&(showEditBox("wsite-title"),e.preventDefault())}).on("submit",".product-old form",callPreventDefault),window.Behaviour={},window.Behaviour.apply=function(){jQuery("#secondlist .columnlist-blog").each(function(){this.style.height=0==this.childNodes.length?"400px":"auto"}),jQuery(".element img").each(function(){(isInitialImage(this)||isPageLayoutImage(this))&&(this.up("ul.imageGallery")?(this.stopObserving("click",initialGalleryImageClick),this.observe("click",initialGalleryImageClick),dndEnabled||(this.stopObserving("mouseover",initialGalleryImageMouseover),this.observe("mouseover",initialGalleryImageMouseover))):this.up("div.product")?(this.stopObserving("mouseover",initialImageMouseover),this.observe("mouseover",initialImageMouseover)):(this.stopObserving("click",initialImageClick),this.observe("click",initialImageClick)))}),jQuery(".element iframe").each(function(){isInitialVideo(this)&&(this.stopObserving("mouseover",initialVideoMouseover),this.observe("mouseover",initialVideoMouseover))}),jQuery(".formlist").each(function(){this.select(".show-element-options-image").invoke("remove")}),jQuery("#secondlist").each(function(){Weebly.Form.fieldInstructionsHandler(),prettyPrint()}),jQuery("#createLink").each(function(){new Draggable("createLink")}),jQuery("#icontent .weebly-content-area a, #weeblyfootertext a, #weeblyfooterattribution a").each(function(){jQuery(this).on("click",callPreventDefault),this.title=_W.tl("Links active once published")}),jQuery("#icontent .weebly-content-area .disable-link").each(function(){jQuery(this).on("click",callPreventDefault),this.title=""}),jQuery(".editable-text a").each(function(){this.title=""}),jQuery("#blogTable").find(".blog-link").not(".blog-post .blog-link").each(function(){var e=this;jQuery(this).on("click",function(t){goBlogPage(e.pathname),t.preventDefault()}),this.title=""}),jQuery("#secondlist .wsite-com-link").each(function(){var e=this;jQuery(this).on("click",function(t){goCommercePage(e.pathname),t.preventDefault()}),this.title=""}),jQuery(".product-old .product-title, .product-old .product-description").each(function(){var e=this;e.setAttribute("contentEditable","true"),e.addClassName("editable-text"),e.ondblclick=function(){showEditBox(e.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!0})}}),jQuery(".product-old .product-price").each(function(){var e=this;e.setAttribute("contentEditable","true"),e.addClassName("editable-text"),e.ondblclick=function(){showEditBox(e.id,null,{saveCallback:saveProductField,redrawOptions:!0,showOptions:!1})}})},_wAMD.define("legacy/weebly_mainstyle",["legacy/weebly_restrictions","legacy/weebly_form","legacy/weebly_editbox"],function(){}),_wAMD.define("tablet/api/page",["jquery","underscore","editor/app","tablet/util","tablet/api/element","tablet/api/external","editor/theme-background/utils","editor/theme-background/model/Image","legacy/weebly_design_options","config","legacy/weebly_social_sharing","legacy/weebly_events","editor/content/main","editor/build/themes/rendering","editor/build/themes/utils","editor/build/themes/main","legacy/classes/areas/AdvancedFooterArea","tpl!mobile/commerce-product-placeholder-image","legacy/weebly_main","legacy/weebly_utils","legacy/weebly_footer","legacy/weebly_element_list","legacy/weebly_mainstyle","legacy/weebly_header_image"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v){function b(){var e=Weebly.pageContext.elementsByID;t.each(e,function(e){var t;e.product_data&&(t=e.product_data.image_order?e.product_data.image_order[0]:null,o.assignProductImageAttributes(e.id,e.product_data.product_images,t))})}function y(){var t="http://"+ASSETS_BASE+"/images/util/",i=e('.wsite-com-category-subcategory-image.wsite-imageaspectratio-image[src=""]');i.attr("src",t+"blank-category-w320.png");var n=[],o=e('.wsite-product-image-image.wsite-imageaspectratio-image[src=""]'),s=e('.wsite-com-category-product-featured-image.wsite-imageaspectratio-image[src=""]'),r=e('.wsite-com-category-product-image[src=""]');n.push(o),n.push(s),n.push(r),n.each(function(i){e(i).attr("src",t+"blank-product-w320.png")}),e("a.wsite-product-image").each(function(){""===e(this).html().trim()&&e(this).html(v)});var a='<a title="Links active once published">$0.00</a>';e(".wsite-product-price").each(function(){""===e(this).text().trim()&&e(this).html(a)})}function w(n,o,s){var r=n.site_element_data||n.site_areas;if(r){var a=Weebly.siteContext;Weebly.siteContext=null,Weebly.siteContext=new Weebly.AreaContext(r),Weebly.siteContext._oldContext=a,delete n.site_element_data,delete n.site_areas}window.currentPagePublished=n.isPagePublished?!0:!1;var l=Weebly.pageContext;Weebly.pageContext=null,Weebly.pageContext=new Weebly.AreaContext(n),Weebly.pageContext.pageID=window.currentPage,Weebly.pageContext._oldContext=l,Weebly.BlogEditor.clearDraftList(),Weebly.currentHeader=n.header_image,i.execute("setCurrentBackgrounds",n.backgrounds),n.pages&&(h.updatePageData(n.pages),Weebly.PageManager.pages[window.currentPage]||window.showPageChooser("Choose a page to edit:","This page was deleted by another editor.",{load_page_locks:!0})),Weebly.view.isMobileView?window.currentStandardTheme=n.theme:f.setCurrentTheme(n.theme,!1),n.post_locked&&window.showWarning({title:"Post is Being Edited",message:'<div style="text-align:left">'+n.post_locked.email+" is currently editing this post. Please choose a different post to edit.</div>"+'<a href="#" onclick="window.goUpdateList(\''+window.currentPage+"', 1); window.hideWarning();\" >Return to blog page</a>"},{closeFunction:function(){window.goUpdateList(window.currentPage,1),window.hideWarning()}}),window.updateFooterAttribution();var d="blog"==n.kind;if(window.currentPageTypeOverride=n.page_layout?n.page_layout:null,window.navFlyoutMenu&&window.navFlyoutMenu.hideSubmenus(),d?(1!=k&&window.elementsPage("blog"),window.currentBlog.editingBlog=1,k=1):(1==k&&window.elementsPage("default"),window.currentBlog.editingBlog=0,k=0),Weebly.view.isMobileView&&g.isEditing&&(i.vent.trigger("forceThemeRerender"),i.vent.once("themeRendered",function(){e("#w-mobile-phone-screen > .scroll").scrollTop(e("#w-mobile-phone-screen > .scroll > .scroll-inner").height()),e("#icontent").scrollTop(e("#icontent").height())})),p.renderPage(function(){Weebly.Commerce&&Weebly.COMMERCE_ENABLED&&!c.chromeless&&(Weebly.Commerce.Editor.Product.Page.onUpdateElementList(),Weebly.Commerce.Editor.Category.Page.onUpdateElementList()),window.Behaviour.apply(),window.setElementsPageType(),i.vent.trigger("pageRendered"),b()},o,s,n),window.resetScrollTop&&(window.resetScrollTop=null,e("#scroll_container").scrollTop=0),d){if("comments"==window.currentBlog.skipToComments&&e("#comments")){var m=window.currentBlog.skipToCommentId&&e("#"+window.currentBlog.skipToCommentId)?e("#"+window.currentBlog.skipToCommentId):e("#comments"),v=m.offset();e("#scroll_container").scrollTop=v.top-150}window.currentBlog.showPostSettings&&(e("#blogPostSettings").slideToggle(),window.currentBlog.showPostSettings=0)}if(window.externalLibariesLoaded||window.loadExternalLibraries(),window.userEvents&&!window.hasDoneUserEvent("x-pages")&&window.hasDoneUserEvent("x-elements")&&window.hasDoneUserEvent("x-show-pages")&&window.showEvent("x-pages"),n.newElementIsSlideshow&&window.skipNewSlideshowDialog===!1){var y=e("#"+n.newElementListID).find("li.inside").eq(n.newElementOrder),w=y.find("div.element")[0].id;Weebly.SlideshowAdmin.reportNewID(w)}d&&u.init(),i.vent.trigger("editorListUpdated",n,o,s),window.obtainedPage=window.currentPage,i.vent.trigger("editor:middle",n),n.new_elements&&t.each(n.new_elements,function(t,i){if(t.platform_element&&t.autopop){var n=e("#inside_"+i).find(".element");Weebly.Elements.selectElement(n[0])}})}function _(){var t=e(".wsite-com-category-subcategory"),i=e("#wsite-com-product-list .wsite-com-category-product-featured"),n=e("#wsite-com-category-product-group-pagelist a"),o=[],s=[],r=[],a={};if(i.each(function(t,i){e(i).data("id");var n=e(i).find(".wsite-com-link"),s=n.offset();o.push({left:s.left,top:s.top,width:n.outerWidth(),height:n.outerHeight(),product_id:e(i).data("id"),link:n.attr("href")})}),t.each(function(t,i){var n=e(i).data("id"),o=e(i).find(".wsite-com-category-subcategory-link"),r=o.offset();s.push({left:r.left,top:r.top,width:o.outerWidth(),height:o.outerHeight(),category_id:n,link:o.attr("href")})}),n.length>2){var l=n.toArray();l.shift(),l.pop(),l.each(function(t){var i=e(t),n=i.data("page"),o=i.data("category"),s=i.text(),a=i.hasClass("wsite-selected"),l=i.offset();r.push({page:n,category_id:o,label:s,active:a,left:l.left,top:l.top,width:i.outerWidth(),height:i.outerHeight()})})}return a.products=o,a.categories=s,a.pagination=r,a}function M(){return e("#nav-trigger").length>0}function C(){var t={},i=e("#nav-trigger"),n=i.offset(),o={left:n.left,top:n.top,width:i.outerWidth(),height:i.outerHeight()};return t.button=o,t}var x={};x.setPageHierarchy=function(e){setTimeout(function(){Weebly.initialRight=e,Weebly.PageManager.init(),p.renderTheme(!0,null,p.currentThemeData)},0)},x.renderPage=function(e,t){setTimeout(function(){try{x.renderPageSync(e,t,p.currentThemeData,p.currentThemeData.css)}catch(i){console.log(i.stack),s.renderPageFailed(i)}},0)},x.renderPageSync=function(e,t,i,n){if(i||(i=m.getCurrentThemeData()),window.currentPage=e,w(t,i,n),t.areas){for(var o=0;o<t.areas.length;o++){var s=t.areas[o];s&&s.template&&s.elements&&0===s.elements.length&&x.setAreaTemplate(s.template)}y()}};var k=null;return x.getDimensions=function(){for(var i,n={},o=Weebly.siteContext.getAreas(),s=Weebly.pageContext.getAreas().concat(o),a=[],c=0;c<s.length;c++){var u=s[c];if(!u.data||!u.data.hidden){var d=e(u.el||"#"+u.elID);if(0!==d.length){i=d.offset();var h=t.invoke(u.element?[u.element]:u.elements,"getDimensions"),p=null,f=null,m=null;"logo"===u.type&&d.has("img").length&&(m=d.find(".wsite-logo img"),p=window.detectImageAlign(m[0]),f={offset:m.offset(),height:m.height(),innerHeight:m.innerHeight(),width:m.width(),innerWidth:m.innerWidth()}),a.push({name:u.name,type:u.type,top:i.top,left:i.left,height:d.outerHeight(!1)||d.children().outerHeight(!1),width:d.outerWidth(!1)||d.children().outerWidth(!1),position:f,align:p,elements:h})}}}n.areas=a;var g=e(window.getCurrentHeaderElement());g&&g.length&&(i=g.offset()||null,n.header={height:g.outerHeight(),width:g.outerWidth(),top:i.top,left:i.left});var v=r.getBackgroundElement("");v&&(i=v.offset()||null,n.background_image={height:v.outerHeight(),width:v.outerWidth(),top:i.top,left:i.left});var b=e(l.DESIGN_OPTIONS_SELECTORS.navMenu);if(b.length){var y=b.closest("ul");i=y.offset(),n.nav_menu={height:y.outerHeight(),width:y.outerWidth(),top:i.top,left:i.left},n.nav_menu.height<=10&&(n.nav_menu.height=y.children().children().height())}return n.commerce=_(),M()&&(n.menu=C()),n},x.resizeHeaderImage=function(){},x.resizePlaceholder=function(e,t){n.resizePlaceholder(e,t)},x.setHeaderImage=function(t){var i=window.getCurrentHeaderElement();t&&(Weebly.currentHeader={url:t},e(i).css("background-image","url("+t+")"))},x.setBackgroundImage=function(e){var t=r.getBackgroundElement(""),n=null,o=null;t&&e&&e.url&&(n={"":{image:{url:e.url},position:"fill"}},i.execute("setCurrentBackgrounds",n),o=i.request("editor:background:getAll"),r.applyBackgrounds(o))},x.setAreaTemplate=function(t){e(".wsite-not-footer .weebly-content-area").first().html(t)},x.hideNav=function(){if(window.navFlyoutMenu){if(window.navFlyoutMenu.mouseoverItems){for(var e=window.navFlyoutMenu.mouseoverItems.length-1;e>=0;e--)window.navFlyoutMenu.mouseoverItems[e].trigger("mouseout");window.navFlyoutMenu.mouseoverItems=[]}window.navFlyoutMenu.contract()}},x}),_wAMD.define("editor/build/utils",["jquery","underscore","editor/app","legacy/weebly_events","legacy/classes/ElementSpotlight","legacy/weebly_page_manager","./themes/main","./themes/utils","tablet/api/page","legacy/weebly_view","legacy/weebly_editbox","legacy/weebly_utils","legacy/weebly_utils_ajax","legacy/weebly_element_utils","legacy/weebly_main"],function(e,t,i,n,o,s,r,a,l,c,u){function d(e){var n=!1,o={};e=e.replace(/<!--%%(PAGELOCKED|PAGELOCKDATA)%%:(.*?)-->/,function(e,t,i){try{o=JSON.parse(i)}catch(s){return""}return"PAGELOCKED"==t&&(n=!0),""}),e=e.replace(/<!--%%PAGES%%:(.*?)-->/,function(e,t){try{h.updatePageData(JSON.parse(t))}catch(i){}return""}),e=e.replace(/<!-- %%ALREADY_PUBLISHED%%:(.*?) -->/,function(e,t){return t&&i.vent.trigger("blog:already_published",t),""}),e.match(/^Authentication error/)&&Weebly.Permissions.isContributor&&window.hasAllowedPages()&&!n&&window.reloadAllowedPages();var r="store"===t.result(s.pages[window.currentPage],"kind")&&!Weebly.Permissions.store_edit;if(e.match(/^Authentication error/)&&window.hasAllowedPages()||n||r){var a=window._W.tl("Choose a Page to Edit"),l="";n?(a=window._W.tl("This Page is Currently Being Edited"),l=o[window.currentPage].email+window._W.tl(" is currently editing this page. Please choose a different page to edit.")):window.externalLibariesLoaded&&(a=window._W.tl("You Don't Have Access to Edit this Page")),window.showPageChooser(a,l,{page_locked:n,page_locks:o})}}var h={};return h.removeEmptyColumns=function(){var t=e(".weebly-area-active.wsite-com-long-description"),i=o.getCurrent(),n="";return i&&(n=window.getElementParentString(i.container.find("li.inside")[0])),window.pushLoading(),Weebly.Editor.RPC.Elements.removeEmptyColumns(window.currentPage,r.getAreaSummary(window.currentPage.replace(/\/.*/,"")),window.currentBlog.postId,t.length?t[0].id:n,window.currentBlog.editingBlog?1:0).always(window.popLoading)},h.renderPage=function(i,n){Weebly.Elements.unselectElement();var o=e("#blogTable");return(window.currentBlog.postId>0||o.length&&o.hasClass("editing"))&&(window.currentBlog.categories=Weebly.BlogEditor.getCategoriesValue(),window.currentBlog.title=Weebly.BlogEditor.getTitleValue(),window.currentBlog.date=Weebly.BlogEditor.getDateValue(),window.currentBlog.comments=Weebly.BlogEditor.getCommentsValue(),window.currentBlog.permalink=Weebly.BlogEditor.getPermalinkValue(),window.currentBlog.shares=Weebly.BlogEditor.getSharesValue()),Weebly.BlogEditor.isEditing&&Weebly.BlogEditor.triggerSaveEvent(),window.pushLoading(),Weebly.Editor.RPC.Render.page(r.getAreaSummary(i.replace(/\/.*/,"")),i,window.currentBlog.postId,window.currentBlog.categories,window.currentBlog.title,window.currentBlog.permalink,window.currentBlog.comments,window.currentBlog.date,Weebly.view.isMobileView||Weebly.mobile.isMobileEditor()?1:0).done(function(e,o){h.parseMiddleData(e)&&(e.icontentPageLink=o.getResponseHeader("Weebly-Page-Link"),n&&t.extend(e,n),h.renderPageWithData(i,e))}).fail(function(e,t){200===t.status?h.parseMiddleData(e):window.errFunc(t)}).always(window.popLoading)},h.renderPageWithData=function(e,n,o){window.currentPage=e,o&&o.theme_id&&a.setCurrentTheme(o.theme_id,c.isMobileView),o||(c.isMobileView?Weebly.mobileThemeCache.get(currentMobileTheme,function(e){o=e},!0):Weebly.themeCache.get(currentTheme,function(e){o=e},!0)),Weebly.siteContext||(Weebly.siteContext=new Weebly.AreaContext(Weebly.siteContextData)),t.isUndefined(n.result)||t.isNull(n.result)||n.result||window.showDeniedAction(n.error),i.ThemeBackground.clearInlineControls(),window.fireTrackingEvent("UseTheme",currentTheme),window.currentBox&&u.hideEditBox(window.currentBox),l.renderPageSync(e,n,o)},h.parseMiddleData=function(e){if(t.isObject(e)){if(t.isEmpty(e))return d(e),!1}else try{e=JSON.parse(e)}catch(i){return d(e),!1}return e},h.saveElements=function(t,i){i&&(window.updateListAjaxParams=i),t?window.singleUpdateList():window.updateList();var o=e.Deferred();return n.addListener("updateListSuccess",{func:function(e){o.resolve(e)},once:!0}),o.promise()},h.setProperty=function(e,t){return window.setContentFieldProperty(Weebly.Elements.ucfid,e,t)},h.serializeContentArea=function(t){var i=[],n={elements:i,newElementOrder:null};return e(t).find(".inside, .outside_top").each(function(t){var o=e(this);if(!o.hasClass("inside-inactive")){var s=o.find("form");if(s.length){s=s[0],o=o[0];var r=s.idfield;if(r){var a=e(o).parents(".inside");if(a.length>0){var l=a.find("form").data("platform-element-id");if(l)return}var c={};c.platform_element_id=e(s).data("platform-element-id"),c.platform_element_version=e(s).data("platform-element-version"),c.new_element=s.idfield.value.match("def:")?!0:!1;var u;c.new_element?(u=s.idfield.value.split("|"),c.element_id=u[0].replace(/[^\d]/g,""),u[1]&&(c.properties=u[1].evalJSON())):(u=s.idfield.value.evalJSON(),c.page_element_id=u.id,c.element_id=u.eid);var d=window.getElementParentString(o);d&&(c.parent=d),c.new_element&&(n.newElementListID=e(o).closest(".weebly-content-area")[0].id,n.newElementIsSlideshow="31574711"==c.element_id||"30837966"==c.element_id,n.newElementOrder=t),window.userEvents&&(!window.hasDoneUserEvent("x-pages")&&window.hasDoneUserEvent("x-elements")&&c.new_element?(window.userEvents["x-elements-added"]=window.userEvents["x-elements-added"]?window.userEvents["x-elements-added"]+1:1,window.userEvents["x-show-pages"]=!0):!window.hasDoneUserEvent("addElement")&&c.new_element&&(window.userEvents.addElement=2,window.fireTrackingEvent("AddElement",c.element_id))),i[t]=c}}}}),n},window.serializeContentArea=h.serializeContentArea,h}),_wAMD.define("editor/build/droppable",["jquery","underscore","editor/app","legacy/weebly_form","legacy/classes/ElementSpotlight","legacy/classes/elements/FormElement","./utils","./elements/utils","./ui/utils","legacy/weebly_element_utils","legacy/weebly_utils","legacy/weebly_area_utils"],function(e,t,i,n,o,s,r,a,l){function c(){_.topLevelDroppables.length=0}function u(e,t){return t.depth-e.depth}function d(){return{element:this,depth:e(this).parents().length}}function h(){M.length=0}function p(){h();var t=e(_.topLevelDroppables);w=l.getScrollContainer();var i=w.scrollLeft(),n=w.scrollTop(),o=t.filter(":not(:has(*))").add(".empty-element-message, .empty-message",t),s=t.find("li.inside, .wsite-multicol-col").add(o);return s=s.not(s.find(".weebly-spotlighted").find("li.inside, .wsite-multicol-col")),s=s.filter(function(t,i){return!e(i).closest(".platform-element-child").length}),s.each(function(){var t=e(this),s=t.offset(),r=s.left+i,a=s.top+n,l=t.outerWidth(),c=t.outerHeight();return t.is(o)?(M.push({el:this,position:_.POSITION_TOP,x1:r,y1:a,x2:r+l,y2:a+c,_useElement:!0}),void 0):((t.is(".wsite-multicol-col")||(M.push({el:this,position:_.POSITION_TOP,x1:r,y1:a,x2:r+l,y2:a,_useElement:!1},{el:this,position:_.POSITION_BOTTOM,x1:r,y1:a+c,x2:r+l,y2:a+c,_useElement:!1}),!t.is(".wsite-multicol-li")&&1!==t.parent(".columnlist").children().length))&&(Weebly.view.isMobileView||M.push({el:this,position:_.POSITION_RIGHT,x1:r+l,y1:a,x2:r+l,y2:a+c,_useElement:!1},{el:this,position:_.POSITION_LEFT,x1:r,y1:a,x2:r,y2:a+c,_useElement:!1})),void 0)}),M}function f(){var t=this.value,i=e(this).children("form"),n=i.children('[value^="def"]'),o=i.data("platform-element-id"),s=i.data("platform-element-version");return!t&&n.length&&(t=n[0].value),t?{element_id:t.replace(/[^\d]/g,""),platform_element_id:o,platform_element_version:s}:{page_element_id:this.id.replace(/[^\d]/g,""),platform_element_id:o,platform_element_version:s}}function m(){return[e(this).children("li").map(f).get()]}function g(e){r.renderPage(window.currentPage,e)}function v(e,t,n){var o=a.moveElementObject(e,t,n),s=e.attr("id").match(/[\d]+/);return i.vent.trigger("editor:image:reinit",e.find(".element")),window.pushLoading(),Weebly.Editor.RPC.Elements.reorder(s[0],C+(_.getElementsInDroppable(e).index(e)+1),o.parentString,o.areaInstance.name||"",!o.areaInstance.context.pageID,window.currentPage).done(b).always(window.popLoading)}function b(){window.resizeAllColumns(),window.repositionElements()}function y(t,i,o,s){if(n.isNewFormElement()&&n.isOverInputLimit())return r.saveElements(!0,null);var a,l="";i instanceof e?a=i:(l=i,a=e("#inside_"+l).closest("ul"));var c,u=window.getAreaInstanceForElement(a.closest("ul.weebly-content-area").parent()[0]),d=window.getElementParentString(a.children()[0]);return c=!e(".wsite-com-long-description").length||u&&u.name?u&&u.context.pageID?"0":"1":"1",s?(window.pushLoading(),Weebly.Editor.RPC.Elements.saveColumn(window.currentPage,o,d,t,c,l,u&&u.name||"").always(window.popLoading)):r.saveElements(!0,{pos:"saveColumn",pageid:window.currentPage,content_area:u&&u.name||"",is_site_wide:c,parent:d,order:o,columns:t,page_element_id:l,token:Weebly.RequestToken})}var w,_={topLevelDroppables:[],POSITION_TOP:0,POSITION_RIGHT:1,POSITION_BOTTOM:2,POSITION_LEFT:3},M=[],C=0;return _.buildTopLevelDroppables=function(){var t,i=o.getCurrent();if(i){var n=_.getElementsInDroppable(i.container);n.length&&(C=n.index(i.container.closest("li.inside"))+1),t=i.container.find("ul").filter(".weebly-content-area, .formlist").eq(0).get()}else"blog"===Weebly.pageContext.kind?(C=0,t=window.currentBlog.postId&&"0"!=window.currentBlog.postId?e("#secondlist-blog").eq(0).get():e(".columnlist-blog,.weebly-area:not(.weebly-spotlighted, #secondlistParent) .weebly-content-area").get()):(C=0,t=e(".weebly-area:not(.weebly-spotlighted) .weebly-content-area").get());return c(),_.topLevelDroppables.push.apply(_.topLevelDroppables,t),h(),_.topLevelDroppables},_.buildColumnDroppables=function(){var i,n=[];i=s.isEditing?e(_.topLevelDroppables).find(".columnlist"):e(_.topLevelDroppables).find(".columnlist:not(.formlist .columnlist)");var o=i.map(d).get().sort(u);return n.push.apply(n,t.pluck(o,"element")),n},_.isWithinDroppable=function(t){for(var i=0;i<_.topLevelDroppables.length;i++)if(e.contains(_.topLevelDroppables[i],t))return!0;return!1},_.getTopLevelDroppable=function(t){for(var i=0;i<_.topLevelDroppables.length;i++)if(e.contains(_.topLevelDroppables[i],t))return _.topLevelDroppables[i];return null},_.getElementsInDroppable=function(t){return t instanceof e&&(t=t[0]),e(_.getTopLevelDroppable(t)).find("li.inside")},_.getEdge=function(i,n){var o=null;return M.length||p().length?(i=e(i),t.each(M,function(e){return n===e.position&&i.is(e.el)?(o=e,!1):void 0
}),o):o},_.findClosestDroppableEdge=function(e,i,n){var o=null;return M.length||p().length?(e+=w.scrollLeft(),i+=w.scrollTop(),(!t.isNumber(n)||t.isNaN(n))&&(n=2),t.each(M,function(s){if(s._useElement===!0&&e>=s.x1&&e<=s.x2&&i>=s.y1&&i<=s.y2){switch(o=t.clone(s),s.position){case _.POSITION_LEFT:o.x2=o.x1;break;case _.POSITION_TOP:o.y2=o.y1;break;case _.POSITION_RIGHT:o.x1=o.x2;break;case _.POSITION_BOTTOM:o.y1=o.y2}return!1}s._d=null,s.y1===s.y2&&e>=s.x1&&e<=s.x2?s._d=Math.abs(i-s.y1)+.01*Math.abs(e-(s.x1+s.x2)/2):s.x1===s.x2&&i>=s.y1&&i<=s.y2&&(s._d=Math.abs(e-s.x1)/n+.01*Math.abs(i-(s.y1+s.y2)/2)),null!==s._d&&(!o||s._d<o._d)&&(o=s)}),o):o},_.getColumnData=function(t,i,n){var o,s,r,a;if(t.is(".wsite-multicol-col")){var l=i.remove().map(f).get(),c=t.closest("li");o=c.find(".wsite-multicol-tr").eq(0).children("td").children("ul").map(m).get(),o.splice(t.index()+(n===_.POSITION_RIGHT?1:0),0,l),a=f.call(t.closest("li")[0]).page_element_id,s=_.getElementsInDroppable(c[0]).index(c)+1,r=e("#inside_"+a).closest("ul")}else{o=[t.map(f).get()],o.splice(n===_.POSITION_RIGHT?1:0,0,i.map(f).get()),r=t.closest("ul");var u=_.getElementsInDroppable(t[0]);s=u.index(t)+1}return{columns:o,order:C+s,parent:window.getElementParentString(r.children()[0]),page_element_id:a,list:r}},_.makeOrMoveElement=function(t,n){i.vent.trigger("editor:element:dropped");var o,s,a,l,c=e(n.el),u=n.position,d=!0,h=!0,p=null;if(t.find('[value^="def"]').length?p=t:(s=window.getElementParentString(t[0]),a=window.getAreaInstanceForElement(t.closest("ul.weebly-content-area").parent()[0]),l=t.closest("ul")),u===_.POSITION_LEFT||u===_.POSITION_RIGHT){t.hide();var f=_.getColumnData(c,t,u);t.remove(),p&&(c.after(p.hide()),d=!1),o=y(f.columns,f.page_element_id||f.list,f.order,d)}else(u===_.POSITION_TOP||u===_.POSITION_BOTTOM)&&(c.is("ul")?c[u===_.POSITION_BOTTOM?"append":"prepend"](t):c[u===_.POSITION_BOTTOM?"after":"before"](t),i.vent.trigger("editor:elements:changed"),null===p?1===window.currentBlog.editingBlog||t.find(".element-box").length>1||t.find("iframe").length||"store"==Weebly.pageContext.kind?(o=r.saveElements(),h=!1,d=!1):(o=v(t,s,a),h=!1):(p.hide(),o=r.saveElements(!0),h=!1,d=!1));return l&&l.is(":not(:has(*))")&&(o=d?e.when(o,r.removeEmptyColumns()):o.then(r.removeEmptyColumns),h=!0),h&&(o=d?e.when(o,r.renderPage(window.currentPage)):o.then(g)),o},i.vent.on("editor:elements:changed",h),t.extend(window,_),_}),_wAMD.define("editor/build/ui/marker",["jquery","underscore","../droppable","./utils"],function(e,t,i,n){function o(t,i,o,s){var r=n.getScrollContainer(),l=e("#sortableMarker");l.length||(l=e(a.createMarkerElement()),r.prepend(l));var c=r.offset();l.css({top:i-c.top+"px",left:t-c.left+"px",width:o?o+"px":"",height:s?s+"px":""})}function s(e,t){if(0!==this.length){var i="padding-"+e,n=this.prop("style")[i];n=n?parseInt(n,10):0,this.css(i,n+t+"px")}}function r(t,n){if(t){var o=e(t.el);if(t.position===i.POSITION_LEFT||t.position===i.POSITION_RIGHT){var r,a;o.is(".wsite-multicol-col")?(t.position===i.POSITION_LEFT?(a=o,r=o.prev()):(r=o,a=o.next()),s.call(r,"right",n),s.call(a,"left",n)):s.call(o,t.position===i.POSITION_LEFT?"left":"right",n)}}}var a={},l=null;return a.removeMarker=function(){r(l,-15),l=null,e("#sortableMarker").remove()},a.createMarkerFromEdge=function(t){l&&a.removeMarker();var n=e(t.el),s=n.is(".wsite-multicol-col:first-child"),c=n.is(".wsite-multicol-col:last-child"),u=t.position===i.POSITION_LEFT,d=t.position===i.POSITION_RIGHT,h=0;if((s||c)&&(u||d)){var p=parseInt(n.closest(".wsite-multicol-table-wrap").css("margin-left"),10);s&&u?h=-p:c&&d&&(h=p)}o(t.x1+h,t.y1,t.x2-t.x1,t.y2-t.y1),r(t,15),l=t},a.createMarkerElement=function(){return e("<div>").attr("id","sortableMarker").addClass("sortableMarker").get(0)},t.extend(window,a),a}),_wAMD.define("editor/build/spotlights",["jquery","underscore","legacy/classes/Spotlight","./ui/utils","./droppable"],function(e,t,i,n,o){var s,r,a={};return a.showContentAreaSpotlights=function(e){var l=Weebly.view.isMobileView;if(s=i.getCurrent())s.setAnts(!0);else{a.hideContentAreaSpotlights();var c={canvasElement:l?"#icontent":"#icontent_container",canvasHeight:n.getScrollContainer()[0].scrollHeight,elements:o.topLevelDroppables,ants:!0,roundedCorners:!0,paddingHeight:l?0:10,paddingWidth:l?0:10,opacity:.65,zIndex:9};e=e||{},e=t.extend(c,e),r=new i(e),r.show()}},a.updateContentAreaSpotlights=function(){r&&r.reposition()},a.hideContentAreaSpotlights=function(){r&&r.destroy(),s&&s.setAnts(!1)},t.extend(window,a),a}),_wAMD.define("tpl!elements/multicolumn",[],function(){return'<div class="wsite-multicol-table-wrap"{{#margin}} style="margin:{{margin}};"{{/margin}}>\n	<table class="wsite-multicol-table">\n		<tbody class="wsite-multicol-tbody">\n			<tr class="wsite-multicol-tr">\n			{{#columns}}\n				{{>elements/multicolumn-column}}\n			{{/columns}}\n			</tr>\n		</tbody>\n	</table>\n</div>'}),_wAMD.define("tpl!elements/multicolumn-column",[],function(){return'<td class="wsite-multicol-col" {{#in_editor}}id="{{id}}" {{/in_editor}}style="width:{{width}}; padding:{{padding}};">\n{{#elementsHTML}}\n	{{#in_editor}}<ul class="columnlist" id="{{id}}-ul">{{/in_editor}}\n		{{{elementsHTML}}}\n	{{#in_editor}}</ul>{{/in_editor}}\n{{/elementsHTML}}\n</td>'}),_wAMD.define("editor/build/images/managers",["underscore"],function(e){var t={},i={};return t.set=function(e,t){i[e]=t},t.get=function(e){return i[e]},t.each=function(t){e.each(i,t)},t.clear=function(){e.each(i,function(e,t){delete i[t]})},t}),_wAMD.define("editor/build/images/controls",["jquery","underscore","../utils","./resizing","./managers","./tooltip","legacy/weebly_header_image","legacy/weebly_utils","legacy/weebly_element_utils"],function(e,t,i,n,o,s){function r(e){return e=a(e),e=e.replace(/_orig(\.[^\.]*)$/,"$1"),e.replace(/\.([^\.]+)$/,"_orig.$1")}function a(e){return e.replace(/\?[^\?]+$/,"")}var l={},c=!0,u={};return l.isControlsEnabled=function(){return c},l.init=function(i,o,r,a){function d(){o.css({"max-width":"100%",width:"auto",height:"",visibility:""}),window.popLoading()}function h(e,t){c&&!t&&f.show(e)}function p(e){e||f.hide()}u[i[0].id]=function(){s.hide(),Weebly.Elements.unselectElement();var n=a.getData();if(!n){var r=l.img2sprite(o[0]),c=window.getContentFieldProperty(i[0].id,"<!ATTRIBUTION!>");if(c){var u=c.property_result;if(u){var h=JSON.parse(u);t.isArray(h)&&(h=h[0]),h&&(r.creator=h.author,r.pageUrl=h.url)}}n={sprites:[r],background:{}}}a.onStart();var p=o.css("width"),f=o.css("max-width");window.startImagePerfect(o[0],{mode:"element",data:n,onUpdateStart:a.onUpdateStart,onUpdate:a.onUpdate,onUpdateStop:a.onUpdateStop,onCancel:a.onCancel,onBeforeSave:a.onBeforeSave,onSave:function(t){t?(t=e.trim(t),window.pushLoading(),o.removeAttr("width"),o.one("load",d),o.one("error",window.popLoading),o[0].src=t,window.setContentFieldProperty(i[0].id,"<!SRC!>",t),window.setContentFieldProperty(i[0].id,"<!WIDTH!>","auto"),window.setContentFieldProperty(i[0].id,"<!MAXWIDTH!>","100%")):o.css({"max-width":f,width:p,height:"",visibility:""}),a.onAfterSave()}})};var f=n.init(i,o,function(){return r()&&c});return{show:h,hide:p,destroy:f.destroy}},l.show=function(e,t){var i=o.get(e.id);i&&i.showControls(t)},l.hide=function(e,t){var i=o.get(e.id);i&&i.hideControls(t)},l.hideAll=function(e){o.each(function(t){t.hideControls&&t.hideControls(e)})},l.disable=function(e){c=!1,l.hideAll(e)},l.enable=function(){c=!0},l.startImagePerfect=function(e){u[e.id]()},l.img2sprite=function(e){var t={type:"image",cssX:"50%",cssY:"50%",width:e.width,height:e.height},i=e.getAttribute("src"),n=r(i);return n!==a(i)?(t.url=n,t.smallUrl=i):t.url=i,t},window.img2sprite=l.img2sprite,l}),_wAMD.define("legacy/classes/elements/MultiColumnElement",["jquery","underscore","mustache","editor/app","config","tpl!elements/multicolumn","tpl!elements/multicolumn-column","legacy/classes/Element","editor/build/images/controls","legacy/weebly_events","editor/build/images/resizing","legacy/weebly_element_utils","legacy/weebly_element_controls","legacy/weebly_area_utils"],function(e,t,i,n,o,s,r,a,l,c,u){function d(){var t=e(this);return parseInt(t.css("left"),10)+t.offsetParent().offset().left}var h=window.Class.create(a,{cachedColumnElements:[],initialize:function($super,t,i){$super(t,i),this.columns=e.map(this.columns,function(t){return t=[i.loadElements(t)],e.each(t[0],function(t){var i=window.getAreaInstanceForElement(e(t).closest(".weebly-area")[0]);if(i&&i.elements){var n=i.elements.indexOf(t);-1!==n&&i.elements.splice(n,1)}}),t});var n,s,r,a=this.getContentField();if(a&&(n=a.getProperty("<!DATA!>"),s=a.getProperty("<!LEFTWIDTH!>"),r=a.getProperty("<!RIGHTWIDTH!>")),n&&n.property_result)try{t=JSON.parse(n.property_result)}catch(l){t={}}else t={};var c=this.isLegacy=s&&r;if(t.widths||(c&&s&&r?(this.doLegacyPadding=!0,t.widths=[parseFloat(s.property_result)/100,parseFloat(r.property_result)/100]):t.widths=[.5,.5]),!c&&!o.chromeless&&a){var u=a.getProperty("<!SPACING!>");t.spacing&&(u.property_result=t.spacing,delete t.spacing,a.saveProperties())}this.context=i,this.data=t,this.normalizeWidths()},getDimensions:function($super){var e=this.getColumns();return t.defaults({columns:t.map(this.columns,function(i,n){var o=e.eq(n),s=o.offset();return s=s||{},{top:s.top,left:s.left,height:o.outerHeight(!1),width:o.outerWidth(!1),elements:t.invoke(i,"getDimensions")}})},$super())},"<!COLUMNS!>":function(e,t){var n={in_editor:!0,columns:[],margin:"0 -"+this.getSpacing()};if(this.data)for(var o=0;o<this.data.widths.length;o++)n.columns.push(this.getColumnData(o,t));return i.render(s,n,{"elements/multicolumn-column":r})},getSpacing:function(e,t){var i,e=this.isLegacy,t=this.getContentField();return!e&&t?(i=t.getProperty("<!SPACING!>"),i=i?i.property_result:"5px"):i="5px",i},getColumnData:function(e,t){var i,n=this.getContentField();n&&(i=n.ucfid+"-col"+e,this.isLegacy&&(0===e?i=n.ucfid+"-lhs":1===e&&(i=n.ucfid+"-rhs")));var o="";return t&&this.cachedColumnElements[e]||(o=a.renderElementsHTML(this.columns[e]||[])),{id:i,width:100*this.data.widths[e]+"%",padding:"0 "+this.getSpacing(),elementsHTML:o}},beforeRender:function($super,e){$super(e),this.cacheColumnElements(!0)},cacheColumnElements:function(e){if(this.cachedColumnElements.length=0,this.li){var t=this.getColumns().children();e&&t.remove(),this.cachedColumnElements.push.apply(this.cachedColumnElements,t.get())}},afterRender:function($super,t,i){if($super(t,i),i){var n=this.getColumns();e.each(this.cachedColumnElements,function(e,t){n.eq(e).append(t)})}if(t=e(t),!i){t.addClass(this.constructor.CLASS_PREFIX+"-li");var o=this.constructor.HOVER_CLASS;t.on({mouseenter:function(){window.isDraggingElement||this.constructor.isResizing||e(this).addClass(o).parents("."+o).removeClass(o)},mouseleave:function(){window.isDraggingElement||this.constructor.isResizing||e(this).removeClass(o)}})}this.doLegacyPadding&&t.find("."+this.constructor.CLASS_PREFIX).eq(0).css("width","98.8%"),this.renderDividers(),this.updateViewElements(),c.addListener("viewChange",{func:this.updateViewElements,bind:this}),this.constructor.allElements=this.constructor.allElements.not("#"+t.attr("id")).add(t)},updateWidths:function(t){e.isArray(t)&&(this.data.widths=t);for(var i=this.getColumns(),n=0;n<this.data.widths.length;n++)i.eq(n).css("width",100*this.data.widths[n]+"%");this.updateTinyColumns(),this.positionDividers()},addColumn:function(n,o,s){this.data.widths.splice(n,0,o);var a={in_editor:!0},l=e("#inside_"+s.id),c=!1;l.length>0?(0===this.cachedColumnElements.length&&this.cacheColumnElements(),this.cachedColumnElements.splice(n,0,!0),a.elementsHTML=l[0].outerHTML,l.remove(),c=!0,this.columns.splice(n,0,[s])):this.columns.splice(n,0,[this.context.loadElement(s)]);var u,d,h=i.render(r,t.extend(this.getColumnData(n,c),a)),p=this.getColumns();n>=p.length?(u=p.eq(p.length-1),u.after(h),d=u.next()):(u=p.eq(n),u.before(h),d=u.prev()),c?this.cachedColumnElements[n]=d.children():(this.cachedColumnElements.splice(n,0,d.children()),this.columns[n][0].afterRender&&this.columns[n][0].afterRender());var f=1-o;return t.each(this.data.widths,function(e,t,i){t!==n&&(i[t]*=f)}),this.renderDividers(),this.updateWidths(),this.data.widths},removeColumn:function(e){var i=this.data.widths.splice(e,1);i=i[0],this.columns.splice(e,1),this.cachedColumnElements.splice(e,1);var n=this.getColumns();n.eq(Math.min(e,n.length-1)).remove();var o=1-i;return t.each(this.data.widths,function(e,t,i){i[t]/=o}),this.renderDividers(),this.updateWidths(),this.data.widths},removeEmptyColumns:function(){var t=this.getColumns(),i=t.filter(function(){var t=e(this);return!t.children().length||!t.children("ul").children().length}),n=t.not(i),o=window.getAreaInstanceForElement(e(this.li).closest(".weebly-area")[0]);if(1===n.length){e(this.li).before(n.children().children());var s=t.index(n[0]);o.replaceElement(this,this.columns[s]),n=e()}if(0===n.length)return o.context.deleteElement(this.id),!1;if(0===i.length)return null;var r=this;return i.each(function(){r.removeColumn(t.index(this))}),!0},addChild:function(t,i,n){var o=e(this.li),s=o.find("#"+n),r=s.find("li.inside").eq(0);if(!r.length)return!1;if(0>i)return!1;var a=s.siblings().addBack().index(s),l=this.context.loadElement(t);l.li||(l.li=e(l.renderHTML())[0],l.afterRender(l.li)),this.columns[a].splice(i,0,l),s=s.children("ul"),r=s.children().eq(i),r.length?r.before(l.li):s.append(l.li);var c=window.getAreaInstanceForElement(e(l.li).closest(".weebly-area")[0]);if(c&&c.elements){var u=c.elements.indexOf(l);-1!==u&&c.elements.splice(u,1)}return!0},updateViewElements:function(){var t=e(this.li),i=require("config");Weebly.view.isMobileView||i.chromeless?t.find("."+this.constructor.DIVIDER_CLASS).css("display","none"):t.find("."+this.constructor.DIVIDER_CLASS).css("display","")},reposition:function($super){$super(),this.positionDividers(),this.updateTinyColumns()},updateTinyColumns:function(){var t=this.getColumns(),i=this.constructor.TINY_COLUMN_WIDTH,n=this.constructor.TINY_COLUMN_CLASS;t.each(function(){var t=e(this);t.outerWidth()<i?t.addClass(n):t.removeClass(n)})},renderDividers:function(){if(window.elementControlsEnabled){var i=this,o=this.getColumns(),s=e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0);s.find("."+this.constructor.DIVIDER_CLASS).remove(),this.dividers=[],o.each(function(r){if(r){var a,c=e(this),h=e("<div/>",{"class":i.constructor.DIVIDER_CLASS}).on({mousedown:function(p){function f(e){a=!0,Weebly.Elements.unselectElement();var n=Math.max(Math.min(e.pageX,k),x)-M,s=C+n;if(!e.ctrlKey&&!e.shiftKey){if(n=Math.round((_+n)/P)*P-_,x>C+n||C+n>k)return;if(S){var l=t.find(S,function(e){return Math.abs(e-s)<10});l&&(n=l-C)}}var d=(v+n)/(v+y)*(b+w),p=(y-n)/(v+y)*(b+w);(i.data.widths[r-1]!=d||i.data.widths[r]!=p)&&(i.data.widths[r-1]=d,i.data.widths[r]=p,o.eq(r-1).css("width",100*d+"%"),c.css("width",100*p+"%"),h.css("left",_+n+"px"),i.updateTinyColumns(),u.unsetDimensions(o.eq(r-1).add(o.eq(r))))}function m(){R.fadeOut(400,function(){e(this).remove()}),a&&n.vent.trigger("editor:elements:changed"),h.removeClass("dragging"),T.length&&T.removeClass(i.constructor.GUIDE_CLASS),i.constructor.isResizing=!1,l.enable(),e(document).off(z),i.saveData(),i.killLegacyPadding(),window.repositionElements()}a=!1,i.constructor.isResizing=!0,l.disable();var g=s.offset(),v=o.eq(r-1).outerWidth(),b=i.data.widths[r-1],y=c.outerWidth(),w=i.data.widths[r],_=parseInt(h.css("left"),10),M=p.pageX,C=d.call(this),x=g.left+(r>1?parseInt(i.dividers[r-2].css("left"),10):0),k=g.left+(r<i.dividers.length?parseInt(i.dividers[r].css("left"),10):s.outerWidth());x+=o.eq(r-1).find("."+i.constructor.LIST_CLASS).eq(0).find("> li.inside:not(.wsite-spacer-li)").length?50:5,k-=c.find("."+i.constructor.LIST_CLASS).eq(0).find("> li.inside:not(.wsite-spacer-li)").length?50:5,e(this).addClass("dragging");var S,T=e(),A=e(this).closest("."+i.constructor.CLASS_PREFIX+"-li"),D=A.prev(),E=A.next();D.hasClass("."+i.constructor.CLASS_PREFIX+"-li")&&(T=D.find("."+i.constructor.CLASS_PREFIX).eq(0).children("."+i.constructor.DIVIDER_CLASS).addClass(i.constructor.GUIDE_CLASS)),E.hasClass("."+i.constructor.CLASS_PREFIX+"-li")&&(T=T.add(E.find("."+i.constructor.CLASS_PREFIX).eq(0).children("."+i.constructor.DIVIDER_CLASS).addClass(i.constructor.GUIDE_CLASS))),T.length&&(S=T.map(d).get());var P=Math.round(e(this).closest(".weebly-area, ul."+i.constructor.LIST_CLASS).width()/12),R=e("<div>",{html:window._W.tl("Hold Shift to disable snapping"),"class":"wsite-multicol-tooltip"}).hide().appendTo("#icontent").fadeIn(),z={mousemove:f,mouseup:m};return e(document).on(z),!1},click:function(){a||Weebly.Elements.selectElement(this.up(".element"))}}).appendTo(s);i.dividers.push(h)}})}},positionDividers:function(){if(window.elementControlsEnabled){var t=this,i=e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0).offset();this.getColumns().each(function(n){if(n){var o=t.dividers[n-1],s=Math.round(e(this).offset().left-i.left);o.css("left",s+"px")}})}},normalizeWidths:function(){var e,t=this.data.widths,i=t.length,n=0;for(e=0;i>e;e++)"number"!=typeof t[e]&&(t[e]=1/i);for(e=0;i>e;e++)n+=t[e];for(e=0;i>e;e++)t[e]/=n;this.data.widths=t},getColumns:function(){return e(this.li).find("."+this.constructor.COLUMN_WRAPPER_CLASS).eq(0).children("."+this.constructor.COLUMN_CLASS)},killLegacyPadding:function(){this.doLegacyPadding&&(delete this.doLegacyPadding,e(this.li).find("."+this.constructor.CLASS_PREFIX).eq(0).css("width",""))},saveData:function(){var e=this.getContentField();e.getProperty("<!DATA!>").property_result=JSON.stringify(this.data),e.saveProperties()},unrender:function($super){this.constructor.allElements=this.constructor.allElements.not(this.li),$super()}});return h.TINY_COLUMN_WIDTH=100,h.CLASS_PREFIX="wsite-multicol",h.TINY_COLUMN_CLASS=h.CLASS_PREFIX+"-col-tiny",h.DIVIDER_CLASS=h.CLASS_PREFIX+"-divider",h.HOVER_CLASS=h.CLASS_PREFIX+"-li-hover",h.COLUMN_CLASS=h.CLASS_PREFIX+"-col",h.COLUMN_WRAPPER_CLASS=h.CLASS_PREFIX+"-tr",h.GUIDE_CLASS=h.CLASS_PREFIX+"-guide",h.LIST_CLASS="columnlist",h.allElements=e(),h.resizeColumns=function(t){if(e.isNumeric(t)?t=this:"string"==typeof t&&"#"!==t[0]&&(t="#"+t),t=e(t),t.length&&t[0].id.match(/lhs-list/)){var i=e("#"+t[0].id.replace(/lhs/,"rhs"));if(i.length){t.css("height","auto"),i.css("height","auto");var n=t.height(),o=i.height();100>n&&100>o?(t.css("height","100px"),i.css("height","100px")):n>o?i.css("height",n-2+"px"):o>n&&t.css("height",o-2+"px"),i.closest(".column").nextUntil(".splitpane-divider").last().next().css("height",Math.max(100,n,o)+"px")}}},h.resizeAllColumns=function(){this.allElements.each(this.resizeColumns)},h.setMultiColumnHeights=function(){var t="."+this.COLUMN_CLASS;this.allElements.find(t+" ul."+this.LIST_CLASS).css("min-height",function(){return e(this).closest(t).height()-2+"px"})},h.clearMultiColumnHeights=function(){this.allElements.find("."+this.COLUMN_CLASS+" ul."+this.LIST_CLASS).css("min-height","")},window.resizeColumns=e.proxy(h.resizeColumns,h),window.resizeAllColumns=e.proxy(h.resizeAllColumns,h),window.setMultiColumnHeights=e.proxy(h.setMultiColumnHeights,h),window.clearMultiColumnHeights=e.proxy(h.clearMultiColumnHeights,h),window.MultiColumnElement=h,a.register(function(e){return"columns"in e},h),e(document).on("load","#icontent .columnlist .element img",function(){var t=this.up("#icontent .columnlist");t&&(t.id.match(/rhs-list/)&&(t=e(t.id.replace(/rhs-list/,"lhs-list"))),h.resizeColumns(t))}),h}),function(e){function t(t,o){var r=t.displayname;r=r.replace(/<[^>]*>/," "),g.find(".title").empty().append("<span class='icon w-icon-"+t.elementid+"'></span>").append(e("<span class='text' />").text(_W.tl(r))).append(" ");var c=p(t,o);isImageElement(t.elementid)&&"61719152"!=t.elementid?(c.primary.unshift("edit"),/^{\"sprites\":/.test(Weebly.Elements.getPropertyByReference("<!DATA!>").property_result)||c.subactions.unshift("lightbox")):"59396708"==t.elementid?c.primary.unshift("buttonstyle"):"35527740"==t.elementid?c.primary.unshift("socialbadges"):"5699726"==t.elementid&&c.primary.unshift("productbutton");var d=c.subactions,h=c.subgroups,f=g.find(".primary .content").empty(),m=g.find(".secondary .content").empty();c.primary.length&&f.append(u(t,c.primary)),c.secondary.length&&m.html(u(t,c.secondary));var v;if((d.length||h.length)&&(v=e("<ul/>").appendTo(m)),e.each(d,function(t,i){v.append(e("<li class='action'/>").html(s(i)))}),v&&v.find(".link-item").parent().on("click",function(){var e=Weebly.Elements.getPropertyByReference("<!LINK!>");if(e&&e.ucfpid){var t=e.property_result||"",i="",n=t.match(/href=['"](.*?)['"]/);n&&(i=n[1]);var o=parseLinkString(i);t.match("_blank")&&(o.newWindow=!0),Weebly.Linker.open({remove:!0,existing:o,ucfid:Weebly.Elements.ucfid,onChoose:function(t,i){setContentFieldProperty(Weebly.Elements.ucfid,e.ucfpid,"<a"+(t?" href='"+t+"'":"")+(i?" target='_blank'":"")+">"),Weebly.Elements.continueOnChange(),Behaviour.apply()}})}}),v&&v.find(".buttonlink-item").parent().on("click",function(){var e=Weebly.Elements.getPropertyByReference("<!LINK!>"),t=e?e.property_result:"",i=Weebly.Elements.getPropertyByReference("<!TARGET!>"),n=i?i.property_result:"";"javascript:;"==t&&(t="");var o=parseLinkString(t||"");n&&(o.newWindow=!0),Weebly.Linker.open({ucfid:Weebly.Elements.ucfid,existing:o,remove:!0,onChoose:function(t,n){setContentFieldProperty(Weebly.Elements.ucfid,e.ucfpid,t||"javascript:;"),setContentFieldProperty(Weebly.Elements.ucfid,i.ucfpid,n?'target="_blank"':""),Weebly.Elements.continueOnChange()}})}),v&&v.find(".require-switch").each(function(t,i){var n=e(i).find("input[type=checkbox]"),o=e(i).parent().find("input[type=hidden]");o.attr("id");var s=o.data("cfpid"),r=Weebly.Elements.uproperty;r.properties[s],n.prop("checked","form-required"==o.val()).toggleClass("checked","form-required"==o.val()).on("change",function(){o.val(this.checked?"form-required":"form-not-required"),Weebly.Elements.continueOnChange()})}),f&&f.find(".edit-image-button").on("click",function(){require("editor/build/images/controls").startImagePerfect(Weebly.Elements.currentElement)}),f){var b=f.find(".button-style-dropdown");b.length&&(n(b,e(Weebly.Elements.currentElement).find(".wsite-button")),b.on("click","td",function(){var t,i,n=e(this).find(".wsite-button");t=n.hasClass("wsite-button-small")?"small":"large",i=n.hasClass("wsite-button-normal")?"normal":"highlight",setContentFieldProperty(Weebly.Elements.ucfid,"<!SIZE!>",t),setContentFieldProperty(Weebly.Elements.ucfid,"<!COLOR!>",i),Weebly.Elements.continueOnChange()}));var y=f.find(".social-badges-dropdown");if(y.length){var w=getElementObject(Weebly.Elements.currentElement.up("li.inside")),_=y.find(".dropdown-menu")[0];w._renderBadgeContainer(_)}}if(v){var M=Weebly.Elements.getPropertyByReference("<!LINK!>"),C=v.find(".lightbox-switch input[type=checkbox]");M&&M.ucfpid&&C.prop("checked",M.property_result.match(/weebly-image-full/)?!0:!1).toggleClass("checked",M.property_result.match(/weebly-image-full/)?!0:!1),C.on("change",function(){if(M&&M.ucfpid){var e;e=this.checked?"http://weebly-image-full/"+Weebly.Elements.ucfid:"",setContentFieldProperty(Weebly.Elements.ucfid,M.ucfpid,"<a"+(e?" href='"+e+"'":"")+">"),Weebly.Elements.continueOnChange()}})}var x=g.find("> *");e.each(h,function(n,o){var n=o.name,s=o.title,r=o.elements;v.append(e("<li class='subgroup'/>").text(_W.tl(s)).append("<span class='icon icon-chevron-right' />").on("click",function(){l(n)}));var a=e("<div class='subgroup' data-name='"+n+"' style='display:none'>"+"<div class='back'>"+"<div class='inner'>"+"<span class='element-icon w-icon-"+t.elementid+"'></span>"+"<span class='back-icon icon-chevron-left'></span>"+"</div>"+"</div>"+"<div class='content-outer'>"+"<div class='title'>"+htmlEscape(_W.tl(s))+"</div>"+"<div class='content'>"+i(n,t,r)+"</div>"+"</div>"+"</div>");x.append(a);var c=a.find(".confirmation-subgroup");c.length&&renderConfirmationSubgroup(r,c)}),g.find(".back").on("click",function(){a()}),g.find(".alignment-switcher").each(function(){function t(e){i.find(".inner > ."+e).addClass("selected").siblings().removeClass("selected")}var i=e(this),n=i.next(),o=n.attr("id");t(n.val()),e(this).on("click",".inner > *",function(){var i=e(this).data("align");t(i),setContentFieldProperty(Weebly.Elements.ucfid,o,i),Weebly.Elements.continueOnChange()})})}function i(e,t,i){return"confirmation"==e?"<div class='confirmation-subgroup'></div>":u(t,i,e)}function n(t,i){t.find(".wsite-button").each(function(){o(e(this),i)})}function o(t,i){var n=t.clone();i.parent().append(n);var o=t.find(".wsite-button-inner"),s=n.find(".wsite-button-inner");e.each(b,function(e,i){t.css(i,n.css(i)),o.css(i,s.css(i))}),n.remove()}function s(e){if("string"==typeof e){if("lightbox"==e){var t="element-options-lightbox-switch";return"Lightbox <div class='toggle-switch lightbox-switch'><input type='checkbox' id='"+t+"'>"+"<label for='"+t+"'>"+"<div class='background-container'>"+"<div class='background-slider'>"+"<span class='label-on'>"+_W.tl("ON")+"</span>"+"<span class='label-off'>"+_W.tl("OFF")+"</span>"+"</div>"+"</div>"+"<span class='blob'><span class='blob-inner'></span></span>"+"</label>"+"</div>"}}else{if("%%REQUIRED%%"==e.property){var i=Weebly.Elements.uproperty,n=e.cfpid,o=i.properties[n],t=o.ucfpid+"-switch";return _W.tl("Required")+"<div class='toggle-switch require-switch'>"+"<input type='checkbox' id='"+t+"'>"+"<label for='"+t+"'>"+"<div class='background-container'>"+"<div class='background-slider'>"+"<span class='label-on'>"+_W.tl("YES")+"</span>"+"<span class='label-off'>"+_W.tl("NO")+"</span>"+"</div>"+"</div>"+"<span class='blob'><span class='blob-inner'></span></span>"+"</label>"+"</div>"+"<input"+" type='hidden'"+" id='"+o.ucfpid+"'"+" data-cfpid='"+n+"'"+" value='"+o.property_result+"'"+"/>"}if("<!LINK!>"==e.referenceProperty){var s="59396708"==Weebly.Elements.elementDef.elementid;return"<span class='"+(s?"buttonlink-item":"link-item")+"'>"+e.title+"</span>"+"<span class='icon icon-chevron-right' />"}}return e.title}function r(e,t){if("string"==typeof t){if("edit"==t)return"<button class='edit-image-button btn btn-large btn-block btn-info'>"+_W.tl("Edit Image")+"</button>";if("buttonstyle"==t)return"<div class='dropdown button-style-dropdown'><a class='btn btn-control dropdown-toggle' data-toggle='dropdown'>"+_W.tl("Button Style")+"<span class='caret'></span>"+"</a>"+"<div class='dropdown-menu'>"+"<table>"+"<tr>"+"<td>"+"<span class='wsite-button wsite-button-small wsite-button-normal'><span class='wsite-button-inner'>Small</span></span>"+"</td>"+"<td>"+"<span class='wsite-button wsite-button-small wsite-button-highlight'><span class='wsite-button-inner'>Small</span></span>"+"</td>"+"</tr>"+"<tr>"+"<td>"+"<span class='wsite-button wsite-button-large wsite-button-normal'><span class='wsite-button-inner'>Large</span></span>"+"</td>"+"<td>"+"<span class='wsite-button wsite-button-large wsite-button-highlight'><span class='wsite-button-inner'>Large</span></span>"+"</td>"+"</tr>"+"</table>"+"</div>"+"</div>";if("socialbadges"==t)return"<div class='dropdown social-badges-dropdown'><a class='btn btn-control dropdown-toggle' data-toggle='dropdown'>"+_W.tl("Add / Edit Icons")+"<span class='caret'></span>"+"</a>"+"<div class='dropdown-menu'></div>"+"</div>";if("productbutton"==t&&Weebly.Permissions.store_edit&&Weebly.Permissions.store_settings){var i=Weebly.Elements.getPropertyByReference("<!PRODUCTID!>").property_result;return"<button id='product-element-edit-button' type='button' class='btn btn-info' onClick=\"editorApp.vent.triggerCascade('store:product:edit', { site_product_id:'"+i+"' });\""+">"+_W.tl("Edit Product")+"</button>"}return""}if("left/center/right"==t.result){var n=Weebly.Elements.uproperty,o=t.cfpid,s=n.properties[o];return"<div class='switcher dark-switcher alignment-switcher'><div class='inner'><span data-align='left' class='left'><span class='icon w-icon-align-left'></span></span><span data-align='center' class='center'><span class='icon w-icon-align-center'></span></span><span data-align='right' class='right'><span class='icon w-icon-align-right'></span></span></div></div><input type='hidden' id='"+s.ucfpid+"'"+" data-cfpid='"+o+"'"+" value='"+s.property_result+"'"+"/>"}if("%%THUMBCAPTIONTYPE%%"==t.property){var n=Weebly.Elements.uproperty,o=t.cfpid,s=n.properties[o];return"<div><label>"+_W.tl("Display")+":</label>"+"</div>"+"<div class='captionEditorSelectHolder'>"+"<select id='"+s.ucfpid+"ThumbDisplay' class='captionEditorSelect' style='width: auto;' onChange='Weebly.Elements.onChange(\""+s.ucfpid+'", "'+o+"\");'>"+"<option value='none'"+("none"==s.property_result?" selected":"")+">"+_W.tl("Lightbox Only")+"</option>"+"<option value=''"+("none"!=s.property_result?" selected":"")+">"+_W.tl("Lightbox & Thumbnails")+"</option>"+"</select></div>"+"<div class='thumbNailOptionsHolder thumbnailCaptionsOuter'"+("none"==s.property_result?" style='display: none;'":"")+">"+"<label>"+_W.tl("Thumbnail Captions:")+"</label>"+"</div>"+"<div class='captionEditorSelectHolder thumbnailCaptionsHolder thumbNailOptionsHolder'"+("none"==s.property_result?" style='display: none;'":"")+">"+"<select id='"+s.ucfpid+"ThumbOptions' class='captionEditorSelect' style='width: auto;' onChange='Weebly.Elements.onChange(\""+s.ucfpid+'", "'+o+"\");'>"+"<option value='partial'"+("partial"==s.property_result?" selected":"")+">"+_W.tl("Partial Overlay")+"</option>"+"<option value='full'"+("full"==s.property_result?" selected":"")+">"+_W.tl("Full Overlay")+"</option>"+"</select>"+"</div>"+"<input"+" type='hidden'"+" id='"+s.ucfpid+"'"+" data-cfpid='"+o+"'"+" value='"+s.property_result+"'"+"/>"}if("%%THUMBCAPTIONHOVER%%"==t.property){var n=Weebly.Elements.uproperty,o=t.cfpid,s=n.properties[o];return"<div id='galleryCaptionsCheckboxHolder' class='thumbNailOptionsHolder' style=''><input type='checkbox' id='"+s.ucfpid+"Check' class='editorCheckbox' onChange='Weebly.Elements.onChange(\""+s.ucfpid+'", "'+o+"\");' "+("1"==s.property_result?"checked":"")+"/>"+"<label for='"+s.ucfpid+"Check' id='editorDisplayHoverCheckboxLabel' class='editorCheckboxLabel w-icon-check-mark'>"+_W.tl("Display on hover")+"</label>"+"</div>"+"<span class='.w-icon-twitter-feed'></span>"+"<input"+" type='hidden'"+" id='"+s.ucfpid+"'"+" data-cfpid='"+o+"'"+" value='"+s.property_result+"'"+"/>"}if("%%SHOWIMAGE%%"==t.property||"%%SHOWPRICE%%"==t.property||"%%SHOWDESCRIPTION%%"==t.property){var n=Weebly.Elements.uproperty,o=t.cfpid,s=n.properties[o];return"<div id='' class='productElementHolder'><input type='checkbox' id='"+s.ucfpid+"' class='editorCheckbox' onChange='Weebly.Elements.onChange(\""+s.ucfpid+'", "'+o+"\");' "+("1"==s.property_result?"checked":"")+"/>"+"<label for='"+s.ucfpid+"' id='editorDisplayHoverCheckboxLabel' class='editorCheckboxLabel w-icon-check-mark'>"+t.title+"</label>"+"</div>"}if("6368298"==t.cfpid){for(var n=Weebly.Elements.uproperty,o=t.cfpid,s=n.properties[o],r=editorApp.commerce.storefrontSettings,a="buynow"==r.get("store_mode"),l=s.ucfpid||"cfpid-"+o,c="<label>"+t.title+"</label>"+"<div class='input-wrap'><select id='"+l+"' onChange='Weebly.Elements.onChange(\""+s.ucfpid+'", "'+o+"\");'>",u=t.options.split("/"),d=t.result.split("/"),h=0;h<u.length;h++){var p="";d[h]==s.property_result.replace(/'/g,'"')&&(p=" selected");var f=_W.tl("View Details");"add"==d[h]&&(f=a?_W.tl("Buy Now"):_W.tl("Add to Cart")),c+="<option value='"+d[h]+"'"+p+">"+f+"</option>"}return c+="</select></div>"}if("<!VIDEODOWNLOADABLE!>"==t.referenceProperty){var n=Weebly.Elements.uproperty,o=t.cfpid,s=n.properties[o];return"<div id='' class='productElementHolder'><input type='checkbox' id='"+s.ucfpid+"' class='editorCheckbox' onChange='Weebly.Elements.onChange(\""+s.ucfpid+'", "'+o+"\");' "+("1"==s.property_result?"checked":"")+"/>"+"<label for='"+s.ucfpid+"' class='editorCheckboxLabel w-icon-check-mark'>"+t.title+"</label>"+"</div>"}var m=Weebly.Elements.generateProperty(t,t.cfpid,Weebly.Elements.uproperty);return m}function a(){var e=g.find(".current-panel"),t=g.find(".main"),i=g.find("> *");
g.css("overflow","hidden"),i.css("left",-y),t.addClass("current-panel").css("display","table").css("left",0),e.removeClass("current-panel").css("left",y),setTimeout(function(){i.animate({left:0,avoidCSSTransitions:!!window.Components},500,function(){e.hide(),g.css("overflow",""),dndEnabled&&(Weebly.Elements.skipMenuBar=!0),Weebly.Elements.positionFlash()})},0)}function l(e){var t=g.find(".main"),i=g.find('.subgroup[data-name="'+e+'"]'),n=g.find("> *");g.css("overflow","hidden"),n.css("left",0),i.addClass("current-panel").css("display","table").css("left",y),t.removeClass("current-panel").css("left",0),setTimeout(function(){n.animate({left:-y,avoidCSSTransitions:!!window.Components},500,function(){t.hide(),g.css("overflow",""),dndEnabled&&(Weebly.Elements.skipMenuBar=!0),Weebly.Elements.positionFlash()})},0)}function c(i,n){var o=!g;v=e("#scroll_container"),g=e("#menuBarDiv").addClass("w-ui w-dialog element-options").appendTo(v),o&&(new Draggable(g[0],{starteffect:Prototype.emptyFunction,endeffect:Prototype.emptyFunction,nativeMousedown:!0,onEnd:function(){Weebly.Elements.positionFlash()}}),g.on("mouseenter",function(){currentBox&&e("#"+currentBox).length&&(editBoxRedrawOptions=!0,hideEditBox(currentBox),editBoxRedrawOptions=!1),editBoxSelectingText=!1}),g.on("mousedown","input[type=text]",function(){optionsBoxSelectingText=!0}),g.on("mouseup",function(){optionsBoxSelectingText=!1})),g.html("<div class='menuBarDiv-inner' style='position:absolute;top:0;left:0'><div class='main current-panel'><div class='primary'><div class='inner'><div class='title'></div><div class='content'></div></div></div><div class='secondary'><div class='content'></div></div></div></div>"),t(i,n),h()}function u(t,i,n){var o="";o+=1!=i.length||"%%FIELD_INSTRUCTIONS%%"!=i[0].property&&"%%CAPTION%%"!=i[0].property?t.elementid==f&&"caption"==n?"<div class='many-fields-gallery-caption'>":2==i.length?"<div class='two-fields'>":"<div class='many-fields'>":"<div class='one-field'>";var s,a;if(t.elementid==f&&"caption"==n){for(var l=i.length-1;l>=0;l--)"%%THUMBCAPTIONTYPE%%"==i[l].property?s=i.splice(l,1)[0]:"%%THUMBCAPTIONHOVER%%"==i[l].property&&(a=i.splice(l,1)[0]);s&&a?(s=r(t,s),a=r(t,a),/\bstyle=['"]display:\s*none\b/.test(s)&&(a=a.replace("style='","style='display: none;")),o+="<div class='field'>"+s+a+"<div style='clear:both'></div>"+"</div>"):(s&&i.push(s),a&&i.push(a))}return e.each(i,function(e,i){(!Weebly.view.isMobileView||d(i))&&(o+="<div class='field'>"+r(t,i)+"<div style='clear:both'></div>"+"</div>")}),o+="</div>"}function d(e){if("string"==typeof e){if("edit"==e)return!1}else if("left/center/right"==e.result)return!1;return!0}function h(t,i){if(t&&(v=t),i&&(g=i),Weebly.Elements.currentElement&&v){var n,o=e(Weebly.Elements.currentElement),s=o.closest("li.inside");n=s.find(".element").length>1?o:s;var r=v.offset();r.top-=v.scrollTop(),r.left-=v.scrollLeft();var a=e("#scroll_container"),l=a.offset(),c=l.left,u=c+a.outerWidth(),d=l.top,h=d+a.outerHeight(),p=g.outerWidth(),f=g.outerHeight(),m=n.offset(),b=n.outerWidth(),y=n.outerHeight(),w=m.top-f-12,_=m.left+b/2-p/2;d>w&&(w=m.top+y-1,w+f>h&&(w=h-f-6));var M=s.offset(),C=M.left,x=s.outerWidth(),k=C+x;x>=p&&(_+p>k&&(_=k-p),C>_&&(_=C)),c>_&&(_=c+2),_+p>u&&(_=u-p-2),g.css({top:w-r.top,left:_-r.left})}}function p(t,i){var n="5699726"==t.elementid&&Weebly.CommerceProduct.getLegacyMode();i=e.grep(i,function(e){return"%%LINK%%"==e.property?!0:"<!ALIGN!>"==e.referenceProperty?!0:"%%CAPTION%%"==e.property?!0:"%%THUMBCAPTIONTYPE%%"==e.property||"%%THUMBCAPTIONHOVER%%"==e.property?!0:"82192359"==e.cfpid?!1:n||"%%LEGACYDISPLAY%%"!=e.property&&"%%LEGACYALIGN%%"!=e.property?!n||"%%MARGINTOP%%"!=e.property&&"%%MARGINBOTTOM%%"!=e.property?1!=e.hidden:!1:!1});var o=[],s=[],r=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[],m=[],g=[],v=[],b=[],y=[],w=[],_=[],M=[];if(e.each(i,function(e,t){t.property.match(/\bsrc\b/i)?o.push(t):"%%PLACEHOLDER%%"==t.property?o.unshift(t):"%%ZOOM%%"==t.property?o.push(t):"%%ADDRESS%%"==t.property?o.push(t):"%%EMAIL_COMMENTS_TO%%"==t.property?o.push(t):"%%FORM_NAME%%"==t.property?o.push(t):"%%AUDIOFILE%%"==t.property?o.push(t):"%%VIDEOFILE%%"==t.property?o.push(t):"%%VIDEOURL%%"==t.property?o.push(t):"<!VIDEODOWNLOADABLE!>"==t.referenceProperty?o.push(t):"%%IMAGESRC%%"==t.property?o.push(t):"%%DISPLAYSTYLE%%"==t.property?o.push(t):"%%LABEL%%"==t.property||"%%inputOptions%%"==t.options?o.push(t):"%%COLUMNS%%"==t.property||"%%fileUploadGallery%%"==t.options?o.push(t):"%%manageSlideshow%%"==t.options||"%%TRANSITION%%"==t.property?o.push(t):"left/center/right"==t.result&&"%%LEGACYALIGN%%"!=t.property?o.push(t):"%%LEGACYDISPLAY%%"==t.property?o.push(t):"%%fileUploadFlash%%"==t.options?o.push(t):"%%editPollDaddy%%"==t.options?o.push(t):s.push(t)}),!o.length&&s.length&&o.push(s.shift()),s.length>3||"59396708"==t.elementid)for(;s.length;){var C=s.shift(),x=C.property;x.match(/margin/i)||x.match(/^%%PADDING/)?p.push(C):x.match(/caption/i)?m.push(C):x.match(/%%link%%/i)?r.push(C):"%%FIELD_INSTRUCTIONS%%"==x?c.push(C):"%%REQUIRED%%"==x?r.push(C):"%%WIDTH%%"==x?d.push(C):"%%HEIGHT%%"==x?d.push(C):"%%ALIGN%%"==x||"%%LEGACYALIGN%%"==x?h.push(C):"%%BUTTON_ALIGN%%"==x?v.push(C):"%%BUTTON_TEXT%%"==x?v.push(C):x.match(/^%%CONFIRMATION/)?u.push(C):"%%AUDIOTITLE%%"==x||"%%ARTIST%%"==x?b.push(C):"%%NAV%%"==x||"%%NAVLOCATION%%"==x?a.push(C):"%%SPEED%%"==x?l.push(C):"%%BUTTONTYPE%%"==x||"%%BUTTONSIZE%%"==x?M.push(C):"<!LAT!>"==C.referenceProperty||"<!LONG!>"==C.referenceProperty?y.push(C):"42844424"==t.elementid?w.push(C):_.push(C)}var k=[];return M.length&&k.push({name:"button",title:_W.tl("Button"),elements:M}),a.length&&k.push({name:"navigation",title:_W.tl("Navigation"),elements:a}),l.length&&k.push({name:"speed",title:_W.tl("Speed"),elements:l}),c.length&&k.push({name:"instructions",title:_W.tl("Instructions"),elements:c}),u.length&&k.push({name:"confirmation",title:_W.tl("Confirmation"),elements:u}),d.length&&k.push({name:"dimensions",title:_W.tl("Width & Height"),elements:d}),h.length&&k.push({name:"position",title:_W.tl("Position"),elements:h}),p.length&&k.push({name:"spacing",title:_W.tl("Spacing"),elements:p}),m.length&&k.push({name:"caption",title:t.elementid==f?_W.tl("Captions"):_W.tl("Caption"),elements:m}),g.length&&k.push({name:"border",title:_W.tl("Border"),elements:g}),v.length&&k.push({name:"submitbutton",title:_W.tl("Submit Button"),elements:v}),b.length&&k.push({name:"trackinfo",title:_W.tl("Track Info"),elements:b}),y.length&&k.push({name:"advancedlocation",title:_W.tl("Advanced Location"),elements:y}),w.length&&k.push({name:"advanceddisplay",title:_W.tl("Advanced Display"),elements:w}),_.length&&k.push({name:"advanced",title:_W.tl("Advanced"),elements:_}),{primary:o,secondary:s,subactions:r,subgroups:k}}window.renderElementOptions=c,window.positionElementOptions=h;var f="18362204",m=!1;window.hideElementOptions=function(){g&&g.is(":visible")&&(g.hide(),m=!0)},window.showElementOptions=function(){m&&(g.show(),m=!1)};var g,v,b=["border-style","border-width","border-color","background-color","background-image","background-position","background-repeat","color","margin","padding","border-radius","text-decoration","font-family","font-size","font-weight","text-shadow","box-shadow","height","line-height"],y=460;e(function(){e("#scroll_container").on("scroll",function(){Weebly.Elements.positionFlash()})})}(Weebly.jQuery),_wAMD.define("legacy/weebly_element_options",["legacy/weebly_elements","legacy/weebly_linker"],function(){}),_wAMD.define("editor/build/element_dragging",["jquery","underscore","editor/app","./droppable","./ui/marker","./ui/utils","./spotlights","legacy/classes/elements/MultiColumnElement","./images/controls","legacy/classes/Element","legacy/weebly_elements","legacy/weebly_editbox","legacy/weebly_utils","legacy/weebly_element_utils","legacy/weebly_element_options","jquery-ui/draggable"],function(e,t,i,n,o,s,r,a,l,c,u,d){function h(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!1,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),this.parentNode.dispatchEvent(t)}}function p(t){e("ul.weebly-content-area object").off("mouseup").on("mouseup",h),t=e(t),t.touchit().find(".w-handle").touchit(),t.children().draggable({addClasses:!1,scroll:!1,helper:y,handle:".w-handle",start:W.startDrag,drag:k,stop:W.stopDrag,revert:!0,revertDuration:50})}function f(){var t=e(this);return D=t.clone().appendTo("body"),t.css("visibility","hidden"),D}function m(){var t=e("scroll_container"),i=t.scrollTop,o=t.clientHeight,s=t.scrollHeight;n.topLevelDroppables.each(function(e){"secondlist"==e.id||"secondlist-blog"==e.id||e.hasClassName("wsite-com-long-description")||(e.style.minHeight="70px")}),t.scrollTop=i+o>s-30?t.scrollHeight-(s-(i+o)):i}function g(){Weebly.view.isMobileView||n.topLevelDroppables.each(function(e){e.style.minHeight=""})}function v(n,o){u.unselectElement(),window.currentBox&&d.hideEditBox(window.currentBox);var h=o.helper.find('input[name="idfield"]').attr("value").replace(/[^\d]/g,"");V=c.load({eid:h,li:e("<div/>").attr("id",h)[0],isNew:!0,content_fields:{0:["0",{0:["0","","",""]}]}}),window.disableFlyouts=!0,E=o.originalPosition.top,P=o.originalPosition.left,a.setMultiColumnHeights(),B=s.getScrollContainer(),z=B[0].scrollWidth-B.innerWidth(),O=B[0].scrollHeight-B.innerHeight(),B.addClass("no-hovering"),m(),l.disable(),window.repositionElements(),M(),r.showContentAreaSpotlights(),o.helper.addClass("dragging");var p=e("body");p.hasClass("editor-collapsed")&&(p.removeClass("editor-revealed"),t.delay(function(){i.vent.trigger("editor:elements:changed")},500)),window.isDraggingElement=!0,V&&V.startDrag&&V.startDrag(n,{helper:e(".weebly-area-active")})}function b(t,i){return l.enable(),o.removeMarker(),_(),B.removeClass("no-hovering"),B=null,g(),r.hideContentAreaSpotlights(),a.clearMultiColumnHeights(),e(this).css("visibility",""),i.helper.removeClass("dragging"),window.isDraggingElement=!1,D=null,window.disableFlyouts=!1,V&&V.stopDrag&&V.stopDrag(t,i),V=null,!i.noDrop&&L?(n.makeOrMoveElement(i.helper,L),!1):void 0}function y(){return D=this,this}function w(e){(e.x||e.y)&&(H=setInterval(function(){B.scrollLeft(Math.min(z,B.scrollLeft()+e.x)).scrollTop(Math.min(O,B.scrollTop()+e.y))},10))}function _(){clearInterval(H),H=null}function M(){for(var t,i=!1,o=0;o<n.topLevelDroppables.length;o++)if(t=e(n.topLevelDroppables[o]),C(t,B)){i=!0;break}if(!i&&n.topLevelDroppables.length){t=e(n.topLevelDroppables[0]);var s=x(t,B);B.animate({scrollTop:s},800,"easeOutExpo")}}function C(e,t){var i=e.offset().top,n=e.outerHeight(),o=t.offset().top,s=t.outerHeight(),r=Math.max(i,o),a=Math.min(i+n,o+s);return a-r>=100}function x(e,t){var i=e.offset().top,n=t.offset().top,o=i-n+t.scrollTop(),s=o-25;return Math.min(s,O)}function k(e,t){W.handleDrag.call(this,e,t,S,T)}function S(e,t,i){W.smokeOutIframe(i.helper[0])}function T(e,t){t.originalPosition.left===P&&t.originalPosition.top===E&&o.createMarkerFromEdge(R)}function A(){var t=document.createEvent("MouseEvents"),i=-5e4;t.initMouseEvent("mousemove",!0,!1,window,1,i,i,i,i,!1,!1,!1,!1,0,null),document.dispatchEvent(t);var n=e(":data(ui-draggable)").filter(function(){var t=e(this);return e(".ui-draggable-dragging").is(t.add((t.data("ui-draggable")||{}).helper))}),o=n.draggable("option","revertDuration"),s=n.draggable("option","revert");n.draggable("option",{revert:!0,revertDuration:0}).trigger("mouseup").draggable("option",{revert:s,revertDuration:o})}var D,E,P,R,z,O,F,W={isDraggingElement:!1,smokeOutIframe:function(e){for(var t=e.getElementsByTagName("iframe"),i=0;i<t.length;i++)t[i].id&&window.tryStealMouse(t[i].id)}},I=[],N=0,L=null,B=null,H=null,q=50,V=null,j=e.fn.scrollParent;return e.fn.scrollParent=function(){return this.is(D)?s.getScrollContainer():j.apply(this,arguments)},W.destroyCurrentSortables=function(t){var i=e("#available-elements");i.addClass("disabled").find(".disabled-overlay-text").text(t||""),window.isDraggingElement&&A(),e(n.topLevelDroppables).removeClass("weebly-area-active"),e(I).children(":data(ui-draggable)").draggable("destroy"),i.find(".section ul li:data(ui-draggable)").draggable("destroy"),I.length=0},W.initSortables=function(){if(Weebly.pageContext){W.destroyCurrentSortables(),e("#available-elements").removeClass("disabled").find(".section ul").touchit().find("li").draggable({addClasses:!1,scroll:!1,helper:f,start:v,drag:W.handleDrag,stop:b,revert:!0}),Weebly.view.isMobileView&&Weebly.mobile.resizeScreen(),n.buildTopLevelDroppables();var i=n.buildColumnDroppables(),o=n.topLevelDroppables.concat(i);I=I.concat(o),F=e(n.topLevelDroppables).addClass("weebly-area-active").find("li.inside"),window.repositionElements(),t.each(o,p)}},W.handleDrag=function(i,s,r,a){var l=B.scrollLeft(),c=B.scrollTop(),u=B.offset(),d=u.top,h=u.left,p=h+B.outerWidth(),f=d+B.outerHeight();_();var m={x:0,y:0};i.pageX<h+q&&z>=l&&(m.x=i.pageX-h-q),i.pageY<d+q&&O>=c&&(m.y=i.pageY-d-q),i.pageX>p-q&&z>l&&(m.x=i.pageX-p+q),i.pageY>f-q&&O>c&&(m.y=i.pageY-f+q),w(m);var g=null,v=null,b=null;if(i.pageX>h&&i.pageY>d&&i.pageX<p&&i.pageY<f&&(F.each(function(){var t=e(this),n=t.offset();return i.pageX>n.left&&i.pageY>n.top&&i.pageX<n.left+t.outerWidth()&&i.pageY<n.top+t.outerHeight()?(g=Number.MAX_VALUE,v=.9*(t.outerWidth()/t.outerHeight()),!1):void 0}),b=n.findClosestDroppableEdge(i.pageX,i.pageY,v)),b&&s.helper.hasClass("inside"))if(s.helper.is(b.el)||s.helper.has(b.el).length)b=null;else if(s.helper.closest(".wsite-multicol-col").length>0){var y=s.helper.siblings();b.position!==n.POSITION_LEFT&&b.position!==n.POSITION_RIGHT||1!==y.length||!y.eq(0).is(b.el)||(b=null)}var M;b&&(M=e(b.el),(s.helper.find('input[value="def:16151740"]').length>0||s.helper.add(M).find("> form > input[value*=\"'16151740'\"]").length>0)&&(b.position===n.POSITION_LEFT||b.position===n.POSITION_RIGHT||M.parents(".wsite-multicol-li").length>0)&&(b=null));var C=t.clone(s.originalPosition);s.originalPosition.top=s.originalPosition.left=Number.MAX_VALUE;var x=V||s.elementObject||window.getElementObject(s.helper[0]);if(x&&x.onDrag&&(b=x.onDrag(i,s,b)),!b)return L=null,s.originalPosition.left===Number.MAX_VALUE&&s.originalPosition.top===Number.MAX_VALUE&&(s.originalPosition.left=P,s.originalPosition.top=E),o.removeMarker(),t.isFunction(a)&&a.call(this,i,s),void 0;if(b!==L){L=b,o.createMarkerFromEdge(b);var k=l+s.helper.outerWidth()/2,S=c+s.helper.outerHeight()/2;if("absolute"===s.helper.css("position")){var T=s.helper.offsetParent().offset();k+=T.left,S+=T.top}else k+=s.offset.left-s.position.left,S+=s.offset.top-s.position.top;s.originalPosition.left=(b.x1+b.x2)/2-k,s.originalPosition.top=(b.y1+b.y2)/2-S,t.isFunction(r)&&r.call(this,b,i,s)}else s.originalPosition.left=C.left,s.originalPosition.top=C.top},W.startDrag=function(e,t){u.saveProperties(),window.currentBox&&d.hideEditBox(window.currentBox),window.hideElementOptions&&window.hideElementOptions(),a.setMultiColumnHeights(),E=t.originalPosition.top,P=t.originalPosition.left,R=n.getEdge(this,n.POSITION_TOP),B=s.getScrollContainer(),z=B[0].scrollWidth-B.innerWidth(),O=B[0].scrollHeight-B.innerHeight(),B.addClass("no-hovering"),t.helper.addClass("inside-dragging"),m(),l.disable(),window.repositionElements(),r.showContentAreaSpotlights(),window.isDraggingElement=!0;var i=t.elementObject||window.getElementObject(t.helper[0]);i&&i.startDrag&&i.startDrag(e,t)},W.stopDrag=function(e,t){l.enable(),o.removeMarker(),t.helper.removeClass("inside-changed inside-dragging"),window.showElementOptions&&(window.showElementOptions(),window.positionElementOptions()),_(),B.removeClass("no-hovering"),B=null,g(),a.clearMultiColumnHeights(),window.repositionElements(),r.hideContentAreaSpotlights(),window.isDraggingElement=!1;var i=t.elementObject||window.getElementObject(t.helper[0]);i&&i.stopDrag&&i.stopDrag(e,t,L),!t.noDrop&&L&&Date.now()>N+500&&(t.helper.css({top:"",left:""}),n.makeOrMoveElement(t.helper,L),N=Date.now())},t.extend(window,W),W}),_wAMD.define("tpl!editor/dialogs/upload-element",[],function(){return'<div class="btn btn-info btn-com upload-btn w-upload-target">{{#tl}}Upload Element{{/tl}}</div><br/>\n<div class="error" style="display:none; max-height: 280px; overflow-y: auto;">{{#tl}}There was an error when uploading the element.{{/tl}}</div>\n<div class="success" style="display:none">\n	<h2>{{#tl}}Success{{/tl}}</h2>\n	<p class="success-msg">{{#tl}}Your element is now uploaded.{{/tl}}</p>\n</div>'}),_wAMD.define("editor/build/elements/UploadElementDialog",["jquery","backbone-all","mustache","editor/app","components/uploader-view/UploaderView","tpl!editor/dialogs/upload-element"],function(e,t,i,n,o,s){var r=o.prototype,a=o.extend({template:i.compile(s),dialog:{dialogClass:"upload-element-dialog",title:_W.tl("Upload an Element"),size:"500x500",cancelX:!0,buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-cancel btn-com"},{text:_W.tl("Okay"),className:"btn-okay btn-com btn-info"}]}]},ui:{cancelBtn:".btn-cancel",okayBtn:".btn-okay",error:".error",success:".success"},triggers:{"click @ui.cancelBtn":"dialog:close","click @ui.okayBtn":"dialog:close"},initialize:function(e){var t=this;e.uploadOptions={type:"zip",multipleFiles:!1,url:"/weebly/incl/elements/element_upload.php"},r.initialize.apply(t,arguments)},onShow:function(){var e=this;e.ui.okayBtn.hide()},onUploadLoadstart:function(){var e=this;e.ui.error.hide()},addElementsToSidebar:function(e){var t=Weebly.elementCache["default"],i=Weebly.elementCache.blog,o=_.findWhere(t,{category_id:"platform"}),s=_.findWhere(i,{category_id:"platform"});o||(o={category_id:"platform",category_name:_W.tl("Third Party"),show_jump_link:!1,elements:[]},t.push(o)),s||(s={category_id:"platform",category_name:_W.tl("Third Party"),show_jump_link:!1,elements:[]},i.push(s));for(var r=0;r<e.length;r++){var a=e[r],l={display_name:a.name,element_id:"75699656",platform_element_id:a.platform_element_id,platform_element_version:a.version,icon_url:a.web_path+"/"+a.icon};o.elements.push(l),s.elements.push(l)}n.vent.trigger("editor:elements:refresh")},buildErrorHTML:function(e,t){var i=this,t=t||"<h2> Oops! There is an error: </h2>";for(var n in e)if(e[n]instanceof Array){t+="<li> <p>"+n+"</p>",t+="<ul>";for(var o=0;o<e[n].length;o++)"string"==typeof e[n][o]?t+="<li>"+e[n][o]+"</li>":t=i.buildErrorHTML(e[n][o],t);t+="</ul></li>"}else"string"==typeof e[n]?t+="<li>"+e[n]+"</li>":e[n]instanceof Object&&(t+="<p>"+n+": </p> <ul>",t=i.buildErrorHTML(e[n],t),t+="</ul>");return t},displayErrors:function(e){var t=this;t.ui.error.html(t.buildErrorHTML(e)),t.ui.error.show()},onUploadSuccess:function(e){var t=this;e.success?(t.addElementsToSidebar(e.data),t.trigger("dialog:close")):(t.ui.success.hide(),t.displayErrors(e.data))}});return a}),_wAMD.define("tpl!toast",[],function(){return'<span class="toast-message-text">{{message}}</span>\n<span class="toast-message-divider">|</span>\n<a href="#" class="toast-action">{{event.message}}</a>\n\n\n'}),_wAMD.define("util/toast",["editor/app","backbone-all","mustache","tpl!toast"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({className:"toast-message toast-footer",template:i.compile(n),events:{"click .toast-action":"eventTriggered"},timeout:5e3,initialize:function(t){var i=this;("undefined"==typeof t.timeout||t.timeout!==!1)&&setTimeout(function(){i.closeToast()},i.timeout),this.listenTo(e.vent,{"editor:element:props:show":this.closeToast,"editor:element:dropped":this.closeToast})},closeToast:function(){this.close()},eventTriggered:function(){var e=this,t=this.model.get("event").event;_W.Editor.RPC.PageLayouts.removeLayout(_W.pageContext.pageID,e.options.areaName).done(function(){updateList(),console.log("do something with this event: "+t),this.closeToast()}.bind(this))}});return o});var myColorPicker,maxFileSize;if(jQuery.fn.placeholder=function(){"placeholder"in document.createElement("input")||(this.on("focus","input[placeholder]",function(){jQuery(this).removeClass("placeholder"),this.value===this.getAttribute("placeholder")&&(this.value="")}).on("blur","input[placeholder]",function(){""===this.value&&(this.value=this.getAttribute("placeholder"),jQuery(this).addClass("placeholder"))}),this.find("input[placeholder]").each(function(e,t){this.className+=" placeholder",this.value=t.getAttribute("placeholder")}))},function(e,t){t(function(){t("#view-container").on("click",".toggle-switch input[type=checkbox]",function(){t(this).toggleClass("checked",this.checked)}),t("#w-design-main .area-toggles > .section-inner").on("click",".toggle-switch input[type=checkbox]",function(){t(this).toggleClass("checked",this.checked)})})}(Weebly,Weebly.jQuery),_wAMD.define("legacy/weebly_initmain",["legacy/classes/PublishWindow/PublishWindow","legacy/weebly_site_settings","legacy/weebly_dialog","legacy/weebly_page_manager","legacy/weebly_color_chooser","legacy/weebly_restrictions","legacy/weebly_init_dnd","legacy/weebly_editbox","legacy/weebly_sliding_panel"],function(){}),_wAMD.define("editor/build/module",["jquery","underscore","editor/app","legacy/weebly_events","./utils","./element_dragging","editor/blog-editor","legacy/weebly_slideshow_admin","legacy/classes/ElementSpotlight","legacy/weebly_elements","legacy/weebly_mobile","legacy/weebly_dialog","legacy/weebly_form","legacy/weebly_view","legacy/weebly_restrictions","legacy/weebly_editbox","legacy/weebly_timing_test","./themes/main","./elements/UploadElementDialog","util/toast","backbone-all","legacy/weebly_pages","legacy/weebly_utils_ajax","legacy/weebly_utils","legacy/weebly_main","legacy/weebly_initmain"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v,b,y,w){function _(){o.removeEmptyColumns(),o.renderPage(window.currentPage)}function M(){i.vent.trigger("editor:elements:changed")}function C(){s.initSortables()}var x=i.module("build",{startWithParent:!1}),k=e(window),S=t.debounce(function(){i.vent.trigger("editor:elements:changed")},500);return x.on("start",function(e){window.initMain(e),n.addListener("editorPageElementDeleted",_),i.vent.on("editorListUpdated",M),n.addListener("pageRendered",C),k.on("resize",S)}),x.on("stop",function(){n.removeListener("editorPageElementDeleted",_),i.vent.off("editorListUpdated",M),n.removeListener("pageRendered",C),k.off("resize",S)}),i.vent.on("editor:elements:upload:show",function(){i.showDialog(new b({}))}),i.vent.on("editor:message:toast:show",function(){i.message.show(new y({model:new w.Model({message:"Layout successfully added",event:{message:"Undo",event:"some:event"},areaName:""}),timeout:!1}))}),x.updateList=function(t,s,d){function h(){x.updateList(t)}function f(){i.vent.trigger("editor:saving");var e=(new Date).getTime(),t=new window.Ajax.Request(window.ajax,{bgRequest:d,parameters:E,onSuccess:function(e){b(e)&&i.vent.trigger("editor:saved"),n.fireEvent("updateListSuccess",{newPost:s,newElementOrder:w,newElementIsSlideshow:k,newElementListID:C})},onFailure:window.errFunc,onException:window.exceptionFunc});_&&(t.times.jsStart=_,t.times.requestStart=e,t.times.name=M)}function b(e){e.request&&e.request.times&&(e.request.times.requestComplete=(new Date).getTime()-e.request.times.requestStart);var t=o.parseMiddleData(e.responseText);return t?(t.newPost=s,t.newElementOrder=w,t.newElementIsSlideshow=k,t.newElementListID=C,e.getHeader&&(t.icontentPageLink=e.getHeader("Weebly-Page-Link")),o.renderPageWithData(window.currentPage,t),window.popLoading(),e&&e.request&&e.request.times&&e.request.times.jsStart&&(e.request.times.jsComplete=(new Date).getTime()-e.request.times.jsStart,g.send(e.request.times.name,e.request.times.requestComplete,e.request.times.jsComplete)),!0):!1}if(window.destroyCurrentSortables(),"undefined"==typeof s&&(s=0),window.currentBox&&m.hideEditBox(window.currentBox),t&&window.currentPage&&t!=window.currentPage){var y=l.getCurrent();y&&y.close()}if(c.unselectElement(),t&&Weebly.initialMiddle)return Weebly.initialMiddle.icontentPageLink="wsite-page-index",b({responseText:Weebly.initialMiddle}),delete Weebly.initialMiddle,void 0;if(t)return o.renderPage(t),void 0;var w,_=(new Date).getTime(),M="add_element",C=null,k=!1,S={};Weebly.pageContext.getAreas().each(function(t){if(t.el&&e("#"+t.elID).length&&"content"==t.type){var i=o.serializeContentArea(t.el);S[t.name]=i.elements,null!==i.newElementOrder&&(w=i.newElementOrder,k=i.newElementIsSlideshow,C=i.newElementListID)}});var T={};Weebly.siteContext.getAreas().each(function(t){if(t.el&&e("#"+t.elID).length&&("content"==t.type||"footer"==t.type)){var i=o.serializeContentArea(t.el);T[t.name]=i.elements,null!==i.newElementOrder&&(w=i.newElementOrder,k=i.newElementIsSlideshow,C=i.newElementListID)}}),t=window.currentPage;var A=e("#blogTable");(window.currentBlog.postId>0||A.length&&A.hasClass("editing"))&&(window.currentBlog.categories=r.getCategoriesValue(),window.currentBlog.title=r.getTitleValue(),window.currentBlog.permalink=r.getPermalinkValue(),window.currentBlog.comments=r.getCommentsValue(),window.currentBlog.date=r.getDateValue(),window.currentBlog.shares=r.getSharesValue());var D=e(".wsite-com-long-description")[0],E=window.updateListAjaxParams||{pos:"middle",blogPost:window.currentBlog.postId,newPost:s,categories:window.currentBlog.categories,title:window.currentBlog.title,permalink:window.currentBlog.permalink,comments:window.currentBlog.comments,date:window.currentBlog.date,shares:window.currentBlog.shares,cookie:document.cookie,token:Weebly.RequestToken,is_mobile:p.isMobileView||u.isMobileEditor()?1:0,pageid:t,area_summary:JSON.stringify(v.getAreaSummary(t.replace(/\/.*/,""))),page_content_areas:JSON.stringify(S),site_content_areas:JSON.stringify(T),com_parent:D?D.id:""};if("saveColumn"===E.pos&&void 0!==E.order){w=E.order;e:for(var P=0;P<E.columns.length;P++)for(var R=0;R<E.columns[P].length;R++){if(void 0!==E.columns[P][R].element_id)break e;w++}}return window.updateListAjaxParams&&(E=e.param(E)),window.updateListAjaxParams=null,k&&window.skipNewSlideshowDialog===!1?(a.dropped(f,h),void 0):(f(),void 0)},x.singleUpdateList=function(){if(Weebly.Restrictions.is_trial&&("without_credit_card"===Weebly.freeTrialTest||"with_credit_card"===Weebly.freeTrialTest),window.allowProElementsTrial&&!f.hasNewElementAccess()){if(Weebly.Permissions.isContributor){var t=new d(e("#contributor-upgrade-warning")[0],{modal:!0,onClose:function(){e("#icontent .outside_top").remove(),e("#contributor-upgrade-warning .close").off("click")}});return e("#contributor-upgrade-warning .close").on("click",function(){return t.close(),!1}),t.open(),void 0}return Weebly.Reseller&&"enterprise"===Weebly.Reseller.resellerType?(i.vent.trigger("billing:upgrade:window"),void 0):(window.Pages.go("upgradeWarning"),void 0)}if(h.isNewFormElement()&&h.isOverInputLimit()){if(Weebly.Permissions.isContributor){var n=new d(e("#contributor-form-warning")[0],{modal:!0,onClose:function(){e("#icontent .outside_top").remove(),e("#contributor-form-warning .close").off("click")}});return e("#contributor-form-warning .close").on("click",function(){return n.close(),!1}),n.open(),void 0}return e("#form-element-warning-message").html("A standard Weebly account allows for 5 fields in a form. If you want to add this field, please <a style=\"color:#0054CD; text-decoration:none; font-weight:bold;\" href=\"#\" onclick=\"editorApp.vent.trigger('billing:upgrade:window', {restrictionID: 'unlimited_form_inputs', restrictionType: 'feature', refer: 'form_inputs'}); return false;\">upgrade</a> to the Weebly Pro service, which allows unlimited fields."),e("#icontent .outside_top").remove(),window.Pages.go("formElementWarning"),void 0}x.updateList()},x.goUpdateList=function(e,t){return t?(window.Pages.go("updateList",e),void 0):(setTimeout(function(){x.goUpdateList(e,1)},500),void 0)},window.updateList=x.updateList,window.singleUpdateList=x.singleUpdateList,window.goUpdateList=x.goUpdateList,x}),_wAMD.define("util/backbone-validators",["backbone-all","util/general-utils"],function(e,t){_.extend(e.Validation.validators,{"in":function(){return e.Validation.validators.oneOf.apply(this,arguments)},email:function(e,i,n){return t.isValidEmail(e)?void 0:this.format(_W.tl("{0} is not a valid E-mail address","Value"),this.formatLabel(i,n))},maxlength:e.Validation.validators.maxLength,minlength:e.Validation.validators.minLength}),_.extend(e.Validation.messages,{required:_W.tl("{0} is required","Value"),acceptance:_W.tl("{0} must be accepted","Value"),min:_W.tl("{0} must be greater than or equal to {1}","Value, Min"),max:_W.tl("{0} must be less than or equal to {1}","Value, Max"),range:_W.tl("{0} must be between {1} and {2}","Value, Min, Max"),length:_W.tl("{0} must be {1} characters","Value, Length"),minLength:_W.tl("{0} must be at least {1} characters","Value, Min"),maxLength:_W.tl("{0} must be at most {1} characters","Value, Max"),rangeLength:_W.tl("{0} must be between {1} and {2} characters","Value, min, max"),oneOf:_W.tl("{0} must be one of: {1}","Value, type"),equalTo:_W.tl("{0} must be the same as {1}","Value, Comparator"),digits:_W.tl("{0} must only contain digits","Value"),number:_W.tl("{0} must be a number","Value"),"int":_W.tl("{0} must be a whole number","Value"),email:_W.tl("{0} must be a valid email","Value"),url:_W.tl("{0} must be a valid url","Value"),domain:_W.tl("{0} must be a valid domain","Value"),inlinePattern:_W.tl("{0} is invalid","Value")})}),_wAMD.define("membership/util/backbone-populate-from-csv",["jquery","membership/editor/collection/Member"],function(e,t){t.prototype.populateFromCSV=function(t){var i=new FileReader,n=e.Deferred(),o=t[0].files[0];i.collection=this;var s="text/csv"==o.type||-1!==o.name.indexOf(".csv",o.name.length-4);return s||n.rejectWith({error:_W.tl("Invalid file type")}),i.onload=function(t){var o=this;e.parse(t.target.result,{step:function(e){for(var t={},i=Object.keys(e.results.rows[0]),n=0,s=i.length;s>n;n++){var r=i[n];t[r.toLowerCase()]=e.results.rows[0][r]}o.collection.add(t)}}),n.resolve(i.collection)},i.readAsText(o),n.promise()}}),function(e,t,i){function n(e){return e.match(/\D+$/)}function o(e,t,i,n){if("d"!=i&&d(e)){var o=v.exec(t),s="auto"===e.css(i)?0:e.css(i),r="string"==typeof s?u(s):s,a=("string"==typeof t?u(t):t,n===!0?0:r),l=e.is(":hidden"),c=e.translation();if("left"==i&&(a=parseInt(r,10)+c.x),"right"==i&&(a=parseInt(r,10)+c.x),"top"==i&&(a=parseInt(r,10)+c.y),"bottom"==i&&(a=parseInt(r,10)+c.y),o||"show"!=t?o||"hide"!=t||(a=0):(a=1,l&&e.css({display:"block",opacity:0})),o){var h=parseFloat(o[2]);return o[1]&&(h=("-="===o[1]?-1:1)*h+parseInt(a,10)),h}return a}}function s(e,t,i){return(i===!0||P===!0&&i!==!1)&&E?"translate3d("+e+"px, "+t+"px, 0)":"translate("+e+"px,"+t+"px)"}function r(t,i,n,o,s,r,l,d){var h=t.data(_),p=h&&!c(h)?h:e.extend(!0,{},y),m=s,g=e.inArray(i,f)>-1;if(g){var v=p.meta,b=u(t.css(i))||0,w=i+"_o";m=s-b,v[i]=m,v[w]="auto"==t.css(i)?0+m:b+m||0,p.meta=v,l&&0===m&&(m=0-v[w],v[i]=m,v[w]=0)}return t.data(_,a(t,p,i,n,o,m,r,l,d))}function a(e,t,i,n,o,r,a,l,c){var u=!1,d=a===!0&&l===!0;t=t||{},t.original||(t.original={},u=!0),t.properties=t.properties||{},t.secondary=t.secondary||{};for(var h=t.meta,p=t.original,f=t.properties,g=t.secondary,v=m.length-1;v>=0;v--){var b=m[v]+"transition-property",y=m[v]+"transition-duration",w=m[v]+"transition-timing-function";i=d?m[v]+"transform":i,u&&(p[b]=e.css(b)||"",p[y]=e.css(y)||"",p[w]=e.css(w)||""),g[i]=d?s(h.left,h.top,c):r,f[b]=(f[b]?f[b]+",":"")+i,f[y]=(f[y]?f[y]+",":"")+n+"ms",f[w]=(f[w]?f[w]+",":"")+o}return t}function l(e){for(var t in e)if(!("width"!=t&&"height"!=t||"show"!=e[t]&&"hide"!=e[t]&&"toggle"!=e[t]))return!0;return!1}function c(e){for(var t in e)return!1;return!0}function u(e){return parseFloat(e.replace(n(e),""))}function d(e){var t=!0;return e.each(function(e,i){return t=t&&i.ownerDocument}),t}function h(t,i,n){if(!d(n))return!1;var o=e.inArray(t,p)>-1;return"width"!=t&&"height"!=t&&"opacity"!=t||parseFloat(i)!==parseFloat(n.css(t))||(o=!1),o}var p=["top","right","bottom","left","opacity","height","width"],f=["top","right","bottom","left"],m=["-webkit-","-moz-","-o-",""],g=["avoidTransforms","useTranslate3d","leaveTransforms"],v=/^([+-]=)?([\d+-.]+)(.*)$/,b=/([A-Z])/g,y={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},w="px",_="jQe",M="cubic-bezier(",C=")",x=null,k=!1,S=document.body||document.documentElement,T=S.style,A="webkitTransitionEnd oTransitionEnd transitionend",D=void 0!==T.WebkitTransition||void 0!==T.MozTransition||void 0!==T.OTransition||void 0!==T.transition,E="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,P=E;
e.expr&&e.expr.filters&&(x=e.expr.filters.animated,e.expr.filters.animated=function(t){return e(t).data("events")&&e(t).data("events")[A]?!0:x.call(this,t)}),e.extend({toggle3DByDefault:function(){return P=!P},toggleDisabledByDefault:function(){return k=!k}}),e.fn.translation=function(){if(!this[0])return null;var e=this[0],t=window.getComputedStyle(e,null),i={x:0,y:0};if(t)for(var n=m.length-1;n>=0;n--){var o=t.getPropertyValue(m[n]+"transform");if(o&&/matrix/i.test(o)){var s=o.replace(/^matrix\(/i,"").split(/, |\)$/g);i={x:parseInt(s[4],10),y:parseInt(s[5],10)};break}}return i},e.fn.animate=function(i,n,s,a){i=i||{};var u=!("undefined"!=typeof i.bottom||"undefined"!=typeof i.right),d=e.speed(n,s,a),p=this,v=0,b=function(){v--,0===v&&"function"==typeof d.complete&&d.complete.apply(p,arguments)},y="undefined"!=typeof i.avoidCSSTransitions?i.avoidCSSTransitions:k;return y===!0||!D||c(i)||l(i)||d.duration<=0||e.fn.animate.defaults.avoidTransforms===!0&&i.avoidTransforms!==!1?t.apply(this,arguments):this[d.queue===!0?"queue":"each"](function(){var n=e(this),s=e.extend({},d),a=function(t){var o=n.data(_)||{original:{}},s={};if(2==t.eventPhase){if(i.leaveTransforms!==!0){for(var r=m.length-1;r>=0;r--)s[m[r]+"transform"]="";if(u&&"undefined"!=typeof o.meta)for(var a,l=0;a=f[l];++l)s[a]=o.meta[a+"_o"]+w,e(this).css(a,s[a])}n.unbind(A).css(o.original).css(s).data(_,null),"hide"===i.opacity&&n.css({display:"none",opacity:""}),b.call(this)}},l={bounce:M+"0.0, 0.35, .5, 1.3"+C,linear:"linear",swing:"ease-in-out",easeInQuad:M+"0.550, 0.085, 0.680, 0.530"+C,easeInCubic:M+"0.550, 0.055, 0.675, 0.190"+C,easeInQuart:M+"0.895, 0.030, 0.685, 0.220"+C,easeInQuint:M+"0.755, 0.050, 0.855, 0.060"+C,easeInSine:M+"0.470, 0.000, 0.745, 0.715"+C,easeInExpo:M+"0.950, 0.050, 0.795, 0.035"+C,easeInCirc:M+"0.600, 0.040, 0.980, 0.335"+C,easeInBack:M+"0.600, -0.280, 0.735, 0.045"+C,easeOutQuad:M+"0.250, 0.460, 0.450, 0.940"+C,easeOutCubic:M+"0.215, 0.610, 0.355, 1.000"+C,easeOutQuart:M+"0.165, 0.840, 0.440, 1.000"+C,easeOutQuint:M+"0.230, 1.000, 0.320, 1.000"+C,easeOutSine:M+"0.390, 0.575, 0.565, 1.000"+C,easeOutExpo:M+"0.190, 1.000, 0.220, 1.000"+C,easeOutCirc:M+"0.075, 0.820, 0.165, 1.000"+C,easeOutBack:M+"0.175, 0.885, 0.320, 1.275"+C,easeInOutQuad:M+"0.455, 0.030, 0.515, 0.955"+C,easeInOutCubic:M+"0.645, 0.045, 0.355, 1.000"+C,easeInOutQuart:M+"0.770, 0.000, 0.175, 1.000"+C,easeInOutQuint:M+"0.860, 0.000, 0.070, 1.000"+C,easeInOutSine:M+"0.445, 0.050, 0.550, 0.950"+C,easeInOutExpo:M+"1.000, 0.000, 0.000, 1.000"+C,easeInOutCirc:M+"0.785, 0.135, 0.150, 0.860"+C,easeInOutBack:M+"0.680, -0.550, 0.265, 1.550"+C},p={},y=l[s.easing||"swing"]?l[s.easing||"swing"]:s.easing||"swing";for(var x in i)if(-1===e.inArray(x,g)){var k=e.inArray(x,f)>-1,S=o(n,i[x],x,k&&i.avoidTransforms!==!0);i.avoidTransforms!==!0&&h(x,S,n)?r(n,x,s.duration,y,k&&i.avoidTransforms===!0?S+w:S,k&&i.avoidTransforms!==!0,u,i.useTranslate3d):p[x]=i[x]}n.unbind(A);var T=n.data(_);if(!T||c(T)||c(T.secondary))s.queue=!1;else{v++,n.css(T.properties);var D=T.secondary;setTimeout(function(){n.bind(A,a).css(D)})}return c(p)||(v++,t.apply(n,[p,{duration:s.duration,easing:e.easing[s.easing]?s.easing:e.easing.swing?"swing":"linear",complete:b,queue:s.queue}])),!0})},e.fn.animate.defaults={},e.fn.stop=function(t,n,o){return D?(t&&this.queue([]),this.each(function(){var s=e(this),r=s.data(_);if(r&&!c(r)){var a,l={};if(n){if(l=r.secondary,!o&&void 0!==typeof r.meta.left_o||void 0!==typeof r.meta.top_o)for(l.left=void 0!==typeof r.meta.left_o?r.meta.left_o:"auto",l.top=void 0!==typeof r.meta.top_o?r.meta.top_o:"auto",a=m.length-1;a>=0;a--)l[m[a]+"transform"]=""}else if(!c(r.secondary)){var u=window.getComputedStyle(s[0],null);if(u)for(var d in r.secondary)if(r.secondary.hasOwnProperty(d)&&(d=d.replace(b,"-$1").toLowerCase(),l[d]=u.getPropertyValue(d),!o&&/matrix/i.test(l[d]))){var h=l[d].replace(/^matrix\(/i,"").split(/, |\)$/g);for(l.left=parseFloat(h[4])+parseFloat(s.css("left"))+w||"auto",l.top=parseFloat(h[5])+parseFloat(s.css("top"))+w||"auto",a=m.length-1;a>=0;a--)l[m[a]+"transform"]=""}}s.unbind(A),s.css(r.original).css(l).data(_,null)}else i.apply(s,[t,n])}),this):i.apply(this,[t,n])},RegExp(" AppleWebKit/").test(navigator.userAgent)&&RegExp(" Mobile/").test(navigator.userAgent)||e.toggleDisabledByDefault()}(jQuery,jQuery.fn.animate,jQuery.fn.stop),_wAMD.define("legacy/jquery.animate",function(){}),_wAMD.define("jquery-ui/effect-highlight",["jquery","./effect"],function(e){!function(e){e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===s&&(r.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&n.hide(),e.effects.restore(n,o),i()}})}}(e)}),_wAMD.define("jquery-ui/effect-fade",["jquery","./effect"],function(e){!function(e){e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(e)}),function(e){e.fn.up=function(e){return this.eq(0).parent().closest(e||"*")},e.fn.down=function(e){return e?this.eq(0).find(e||"*").eq(0):this.eq(0).children(":first")};var t=1;e.fn.identify=function(){var i=this.attr("id");if(!i&&this.length){do i="anonymous_element_"+t++;while(e("#"+i).length);this.attr("id",i)}return i},e.fn.placeholder=function(){if(!("placeholder"in document.createElement("input"))){var t,i;this.each(function(n,o){i=o.getAttribute("placeholder"),i&&"input"===o.nodeName.toLowerCase()&&(t=e(o).on({focus:function(){o.value===i&&(e(o).removeClass("wsite-placeholder"),o.value="")},blur:function(){o.value.length||(o.value=i,o.className+=" wsite-placeholder")}}),o.className+=" wsite-placeholder",o.value=i)})}},e.extend({isValidSelector:function(t){try{e(t)}catch(i){return!1}return!0}}),document.observe||(document.observe=function(t,i){"dom:loaded"==t&&e(document).ready(i)})}(Weebly.jQuery),Weebly.evalJSON=function(json){var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.test(json)&&(json=json.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));try{return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+json)},_wAMD.define("legacy/jquery_utils",function(){}),function(e){function t(e,t,i){var n=t.emptyText||e.attr("title"),o=t.emptyClass||"",i=void 0===i?e.is(":focus"):i;i?(e.removeClass(o),e.val()===n&&e.val("")):e.val()?e.removeClass(o):e.addClass(o).val(n)}e.fn.inputHint=function(i){var n=this;return i=i||{},this.each(function(){var o=e(this);if("update"===i)t(o,o.data("inputHint:options"));else if("value"===i){var s=o.data("inputHint:options"),r=s.emptyText||o.attr("title"),a=o.val();n=a===r?"":a}else o.data("inputHint:options",i).on("focus",function(){t(o,i,!0)}).on("blur",function(){t(o,i,!1)})}),n}}(jQuery),_wAMD.define("legacy/jquery.hint",function(){}),function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),o=0,s=0,r=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(o=i.wheelDelta/120),i.detail&&(o=-i.detail/3),r=o,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(r=0,s=-1*o),void 0!==i.wheelDeltaY&&(r=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(s=-1*i.wheelDeltaX/120),n.unshift(t,o,s,r),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),_wAMD.define("legacy/jquery.mousewheel",function(){}),function(){function e(t){var i,n,o;return this.length?(i=this[0],i.ownerDocument?o=i.ownerDocument:(o=i,i=o.documentElement),null==t?o.cancelFullScreen||o.webkitCancelFullScreen||o.mozCancelFullScreen?(t=!!o.fullScreen||!!o.webkitIsFullScreen||!!o.mozFullScreen,t?o.fullScreenElement||o.webkitCurrentFullScreenElement||o.mozFullScreenElement||t:t):null:t?(n=i.requestFullScreen||i.webkitRequestFullScreen||i.mozRequestFullScreen,n&&(Element.ALLOW_KEYBOARD_INPUT?(n.call(i,Element.ALLOW_KEYBOARD_INPUT),e.call(this)||n.call(i)):n.call(i)),this):(n=o.cancelFullScreen||o.webkitCancelFullScreen||o.mozCancelFullScreen,n&&n.call(o),this)):this}function t(){return e.call(this,!e.call(this))}function i(){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))}function n(){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))}function o(){var e,t,o;e=document,e.webkitCancelFullScreen?(t="webkitfullscreenchange",o="webkitfullscreenerror"):e.mozCancelFullScreen?(t="mozfullscreenchange",o="mozfullscreenerror"):(t="fullscreenchange",o="fullscreenerror"),jQuery(document).bind(t,i),jQuery(document).bind(o,n)}jQuery.fn.fullScreen=e,jQuery.fn.toggleFullScreen=t,o()}(),_wAMD.define("legacy/jquery.fullscreen",function(){}),function(e,t){function i(){if(!n.READY){n.event.determineEventTypes();for(var e in n.gestures)n.gestures.hasOwnProperty(e)&&n.detection.register(n.gestures[e]);n.event.onTouch(n.DOCUMENT,n.EVENT_MOVE,n.detection.detect),n.event.onTouch(n.DOCUMENT,n.EVENT_END,n.detection.detect),n.READY=!0}}var n=function(e,t){return new n.Instance(e,t||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in e,n.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,n.NO_MOUSEEVENTS=n.HAS_TOUCHEVENTS&&navigator.userAgent.match(n.MOBILE_REGEX),n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.POINTER_MOUSE="mouse",n.POINTER_TOUCH="touch",n.POINTER_PEN="pen",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.DOCUMENT=document,n.plugins={},n.READY=!1,n.Instance=function(e,t){var o=this;return i(),this.element=e,this.enabled=!0,this.options=n.utils.extend(n.utils.extend({},n.defaults),t||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),n.event.onTouch(e,n.EVENT_START,function(e){o.enabled&&n.detection.startDetect(o,e)}),this},n.Instance.prototype={on:function(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)this.element.addEventListener(i[n],t,!1);return this},off:function(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)this.element.removeEventListener(i[n],t,!1);return this},trigger:function(e,t){var i=n.DOCUMENT.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t;var o=this.element;return n.utils.hasParent(t.target,o)&&(o=t.target),o.dispatchEvent(i),this},enable:function(e){return this.enabled=e,this}};var o=null,s=!1,r=!1;n.event={bindDom:function(e,t,i){for(var n=t.split(" "),o=0;o<n.length;o++)e.addEventListener(n[o],i,!1)},onTouch:function(e,t,i){var a=this;this.bindDom(e,n.EVENT_TYPES[t],function(l){var c=l.type.toLowerCase();if(!c.match(/mouse/)||!r){(c.match(/touch/)||c.match(/pointerdown/)||c.match(/mouse/)&&1===l.which)&&(s=!0),c.match(/touch|pointer/)&&(r=!0);var u=0;s&&(n.HAS_POINTEREVENTS&&t!=n.EVENT_END?u=n.PointerEvent.updatePointer(t,l):c.match(/touch/)?u=l.touches.length:r||(u=c.match(/up/)?0:1),u>0&&t==n.EVENT_END?t=n.EVENT_MOVE:u||(t=n.EVENT_END),u||null===o?o=l:l=o,i.call(n.detection,a.collectEventData(e,t,l)),n.HAS_POINTEREVENTS&&t==n.EVENT_END&&(u=n.PointerEvent.updatePointer(t,l))),u||(o=null,s=!1,r=!1,n.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=n.HAS_POINTEREVENTS?n.PointerEvent.getEvents():n.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],n.EVENT_TYPES[n.EVENT_START]=e[0],n.EVENT_TYPES[n.EVENT_MOVE]=e[1],n.EVENT_TYPES[n.EVENT_END]=e[2]},getTouchList:function(e){return n.HAS_POINTEREVENTS?n.PointerEvent.getTouchList():e.touches?e.touches:[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]},collectEventData:function(e,t,i){var o=this.getTouchList(i,t),s=n.POINTER_TOUCH;return(i.type.match(/mouse/)||n.PointerEvent.matchType(n.POINTER_MOUSE,i))&&(s=n.POINTER_MOUSE),{center:n.utils.getCenter(o),timeStamp:(new Date).getTime(),target:i.target,touches:o,eventType:t,pointerType:s,srcEvent:i,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return n.detection.stopDetect()}}}},n.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(i){t.push(e.pointers[i])}),t},updatePointer:function(e,t){return e==n.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var i={};return i[n.POINTER_MOUSE]=t.pointerType==t.MSPOINTER_TYPE_MOUSE||t.pointerType==n.POINTER_MOUSE,i[n.POINTER_TOUCH]=t.pointerType==t.MSPOINTER_TYPE_TOUCH||t.pointerType==n.POINTER_TOUCH,i[n.POINTER_PEN]=t.pointerType==t.MSPOINTER_TYPE_PEN||t.pointerType==n.POINTER_PEN,i[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},n.utils={extend:function(e,i,n){for(var o in i)e[o]!==t&&n||(e[o]=i[o]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],i=[],n=0,o=e.length;o>n;n++)t.push(e[n].pageX),i.push(e[n].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2}},getVelocity:function(e,t,i){return{x:Math.abs(t/e)||0,y:Math.abs(i/e)||0}},getAngle:function(e,t){var i=t.pageY-e.pageY,n=t.pageX-e.pageX;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(e,t){var i=Math.abs(e.pageX-t.pageX),o=Math.abs(e.pageY-t.pageY);return i>=o?e.pageX-t.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:e.pageY-t.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(e,t){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==n.DIRECTION_UP||e==n.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){var i,n=["webkit","khtml","moz","ms","o",""];if(t&&e.style){for(var o=0;o<n.length;o++)for(var s in t)t.hasOwnProperty(s)&&(i=s,n[o]&&(i=n[o]+i.substring(0,1).toUpperCase()+i.substring(1)),e.style[i]=t[s]);"none"==t.userSelect&&(e.onselectstart=function(){return!1})}}},n.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:n.utils.extend({},t),lastEvent:!1,name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);for(var t=this.current.inst.options,i=0,o=this.gestures.length;o>i;i++){var s=this.gestures[i];if(!this.stopped&&t[s.name]!==!1&&s.handler.call(s,e,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=e),e.eventType==n.EVENT_END&&!e.touches.length-1&&this.stopDetect(),e}},stopDetect:function(){this.previous=n.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(e){var t=this.current.startEvent;if(t&&(e.touches.length!=t.touches.length||e.touches===t.touches)){t.touches=[];for(var i=0,o=e.touches.length;o>i;i++)t.touches.push(n.utils.extend({},e.touches[i]))}var s=e.timeStamp-t.timeStamp,r=e.center.pageX-t.center.pageX,a=e.center.pageY-t.center.pageY,l=n.utils.getVelocity(s,r,a);return n.utils.extend(e,{deltaTime:s,deltaX:r,deltaY:a,velocityX:l.x,velocityY:l.y,distance:n.utils.getDistance(t.center,e.center),angle:n.utils.getAngle(t.center,e.center),direction:n.utils.getDirection(t.center,e.center),scale:n.utils.getScale(t.touches,e.touches),rotation:n.utils.getRotation(t.touches,e.touches),startEvent:t}),e},register:function(e){var i=e.defaults||{};return i[e.name]===t&&(i[e.name]=!0),n.utils.extend(n.defaults,i,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},n.gestures=n.gestures||{},n.gestures.Hold={name:"hold",events:["hold"],index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(e,t){switch(e.eventType){case n.EVENT_START:clearTimeout(this.timer),n.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==n.detection.current.name&&t.trigger("hold",e)},t.options.hold_timeout);break;case n.EVENT_MOVE:e.distance>t.options.hold_threshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Tap={name:"tap",events:["tap","doubletap"],index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(e,t){if(e.eventType==n.EVENT_END){var i=n.detection.previous,o=!1;if(e.deltaTime>t.options.tap_max_touchtime||e.distance>t.options.tap_max_distance)return;i&&"tap"==i.name&&e.timeStamp-i.lastEvent.timeStamp<t.options.doubletap_interval&&e.distance<t.options.doubletap_distance&&(t.trigger("doubletap",e),o=!0),(!o||t.options.tap_always)&&(n.detection.current.name="tap",t.trigger(n.detection.current.name,e))}}},n.gestures.Swipe={name:"swipe",events:["swipe","swipeleft","swiperight","swipeup","swipedown"],index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(e,t){if(e.eventType==n.EVENT_END){if(t.options.swipe_max_touches>0&&e.touches.length>t.options.swipe_max_touches)return;(e.velocityX>t.options.swipe_velocity||e.velocityY>t.options.swipe_velocity)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},n.gestures.Drag={name:"drag",events:["drag","dragleft","dragright","dragup","dragdown"],index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,t){if(n.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),this.triggered=!1,void 0;if(!(t.options.drag_max_touches>0&&e.touches.length>t.options.drag_max_touches))switch(e.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:if(e.distance<t.options.drag_min_distance&&n.detection.current.name!=this.name)return;if(n.detection.current.name!=this.name&&(n.detection.current.name=this.name,t.options.correct_for_drag_min_distance)){var i=Math.abs(t.options.drag_min_distance/e.distance);n.detection.current.startEvent.center.pageX+=e.deltaX*i,n.detection.current.startEvent.center.pageY+=e.deltaY*i,e=n.detection.extendEventData(e)}(n.detection.current.lastEvent.drag_locked_to_axis||t.options.drag_lock_to_axis&&t.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var o=n.detection.current.lastEvent.direction;e.drag_locked_to_axis&&o!==e.direction&&(e.direction=n.utils.isVertical(o)?e.deltaY<0?n.DIRECTION_UP:n.DIRECTION_DOWN:e.deltaX<0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),t.trigger(this.name+e.direction,e),(t.options.drag_block_vertical&&n.utils.isVertical(e.direction)||t.options.drag_block_horizontal&&!n.utils.isVertical(e.direction))&&e.preventDefault();break;case n.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},n.gestures.Transform={name:"transform",events:["transform","pinch","pinchin","pinchout","rotate"],index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,t){if(n.detection.current.name!=this.name&&this.triggered)return t.trigger(this.name+"end",e),this.triggered=!1,void 0;if(!(e.touches.length<2))switch(t.options.transform_always_block&&e.preventDefault(),e.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:var i=Math.abs(1-e.scale),o=Math.abs(e.rotation);if(i<t.options.transform_min_scale&&o<t.options.transform_min_rotation)return;n.detection.current.name=this.name,this.triggered||(t.trigger(this.name+"start",e),this.triggered=!0),t.trigger(this.name,e),o>t.options.transform_min_rotation&&t.trigger("rotate",e),i>t.options.transform_min_scale&&(t.trigger("pinch",e),t.trigger("pinch"+(e.scale<1?"in":"out"),e));break;case n.EVENT_END:this.triggered&&t.trigger(this.name+"end",e),this.triggered=!1}}},n.gestures.Touch={name:"touch",events:["touch"],index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,t){return t.options.prevent_mouseevents&&e.pointerType==n.POINTER_MOUSE?(e.stopDetect(),void 0):(t.options.prevent_default&&e.preventDefault(),e.eventType==n.EVENT_START&&t.trigger(this.name,e),void 0)}},n.gestures.Release={name:"release",events:["release"],index:1/0,handler:function(e,t){e.eventType==n.EVENT_END&&t.trigger(this.name,e)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=n:(e.Hammer=n,"function"==typeof e.define&&e.define.amd&&e.define("hammer",[],function(){return n}))}(this),function(e,t){e!==t&&(Hammer.event.bindDom=function(i,n,o){e(i).on(n,function(e){var i=e.originalEvent||e;i.pageX===t&&(i.pageX=e.pageX,i.pageY=e.pageY),i.target||(i.target=e.target),i.which===t&&(i.which=i.button),i.preventDefault||(i.preventDefault=e.preventDefault),i.stopPropagation||(i.stopPropagation=e.stopPropagation),o.call(this,i)})},Hammer.Instance.prototype.on=function(t,i){return e(this.element).on(t,i)},Hammer.Instance.prototype.off=function(t,i){return e(this.element).off(t,i)},Hammer.Instance.prototype.trigger=function(t,i){var n=e(this.element);return n.has(i.target).length&&(n=e(i.target)),n.trigger({type:t,gesture:i})},e.fn.hammer=function(t){return this.each(function(){var i=e(this),n=i.data("hammer");n?n&&t&&Hammer.utils.extend(n.options,t):i.data("hammer",new Hammer(this,t||{}))})})}(window.jQuery||window.Zepto),function(e,t){e!==t&&e.each(Hammer.gestures,function(t,i){var n=i.name,o=i.events;e.each(o||[n],function(t,i){e.event.special[i]={setup:function(t){var i=e(this),n=i.data("hammer");n?n&&t&&Hammer.utils.extend(n.options,t):i.data("hammer",new Hammer(this,t))}}})})}(window.jQuery||window.Zepto),_wAMD.define("legacy/jquery.hammer",function(){}),function(e){e.fn.touchit=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("Method "+i+" does not exist on touchit"),void 0):t.init.apply(this,arguments)};var t={init:function(t){return this.data("touchit",e.extend({doubleTapTimeout:500,doubleTapWaiting:!1,preTouchStart:!1,onTouchStart:function(){},onTouchMove:function(){},onTouchEnd:function(){},onDoubleTap:function(){},onPinch:function(){}},t)),this.each(function(){function t(e){var t="ongesturestart"in e;t&&(e.addEventListener("gesturechange",i,!1),e.addEventListener("gestureend",n,!1));var s="ontouchstart"in e;s&&(e.addEventListener("touchstart",o,!1),e.addEventListener("touchmove",o,!0),e.addEventListener("touchend",o,!0),e.addEventListener("touchcancel",o,!0))}function i(t){var i=e(this);s=!0,i.data("touchit").onPinch.call(this,t.scale),i.data("touchit").preTouchStart=!0,t.preventDefault()}function n(e){s=!1,e.preventDefault()}function o(t){if(1!=s){var i=e(this),n=t.changedTouches,o=n[0],r="";switch(t.type){case"touchstart":r="mousedown",i.data("touchit").onTouchStart.call(this,o.screenX,o.screenY),i.data("touchit").preTouchStart=!0;break;case"touchmove":r="mousemove",i.data("touchit").onTouchMove.call(this,o.screenX,o.screenY),i.data("touchit").preTouchStart=!1,t.preventDefault();break;case"touchend":r="mouseup",i.data("touchit").onTouchEnd.call(this,o.screenX,o.screenY),1==i.data("touchit").doubleTapWaiting&&1==i.data("touchit").preTouchStart?i.data("touchit").onDoubleTap.call(this,o.screenX,o.screenY):(i.data("touchit").doubleTapWaiting=!0,i.data("touchit").onTouchEnd.call(this,o.screenX,o.screenY),window.setTimeout(function(){i.data("touchit").doubleTapWaiting=!1},i.data("touchit").doubleTapTimeout)),i.data("touchit").preTouchStart=!1;break;default:return}var a=document.createEvent("MouseEvent");a.initMouseEvent(r,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(a)}}t(this);var s=!1})},destroy:function(){return this.each(function(){var t=e(this),i=t.data("touchit");i&&t.removeData("touchit")})}}}(jQuery),_wAMD.define("legacy/jquery.touchit",function(){}),"undefined"==typeof Effect)throw"accordion.js requires including script.aculo.us' effects.js library!";var accordion=Class.create();accordion.prototype={showAccordion:null,currentAccordion:null,duration:null,effects:[],animating:!1,initialize:function(e,t){if(!$(e))throw e+" doesn't exist!";this.options=Object.extend({resizeSpeed:8,classNames:{toggle:"accordion_toggle",toggleActive:"accordion_toggle_active",content:"accordion_content"},defaultSize:{height:null,width:null},direction:"vertical",onEvent:"click"},t||{}),this.duration=.15*(11-this.options.resizeSpeed);var i=$$("#"+e+" ."+this.options.classNames.toggle);i.each(function(e){if(Event.observe(e,this.options.onEvent,this.activate.bind(this,e),!1),"click"==this.options.onEvent&&(e.onclick=function(){return!1}),"horizontal"==this.options.direction)var t=$({width:"0px",display:"none"});else var t=$({height:"0px",display:"none"});this.currentAccordion=$(e.next(0)).setStyle(t)}.bind(this))},activate:function(e){return this.animating?!1:(this.effects=[],this.currentAccordion=$(e.next(0)),this.currentAccordion.setStyle({display:"block"}),this.currentAccordion.previous(0).addClassName(this.options.classNames.toggleActive),this.scaling="horizontal"==this.options.direction?$({scaleX:!0,scaleY:!1}):$({scaleX:!1,scaleY:!0}),this.currentAccordion==this.showAccordion?this.deactivate():this._handleAccordion(),void 0)},deactivate:function(){var e=$({duration:this.duration,scaleContent:!1,scaleX:this.scaling.scaleX,scaleY:this.scaling.scaleY,transition:Effect.Transitions.sinoidal,queue:{position:"end",scope:"accordionAnimation"},scaleMode:{originalHeight:this.options.defaultSize.height?this.options.defaultSize.height:this.currentAccordion.scrollHeight,originalWidth:this.options.defaultSize.width?this.options.defaultSize.width:this.currentAccordion.scrollWidth},afterFinish:function(){this.showAccordion.setStyle({height:"auto",display:"none"}),this.showAccordion=null,this.animating=!1}.bind(this)});this.showAccordion.previous(0).removeClassName(this.options.classNames.toggleActive),new Effect.Scale(this.showAccordion,0,e)},_handleAccordion:function(){var e=$({sync:!0,scaleFrom:0,scaleContent:!1,scaleX:this.scaling.scaleX,scaleY:this.scaling.scaleY,transition:Effect.Transitions.sinoidal,scaleMode:{originalHeight:this.options.defaultSize.height?this.options.defaultSize.height:this.currentAccordion.scrollHeight,originalWidth:this.options.defaultSize.width?this.options.defaultSize.width:this.currentAccordion.scrollWidth}});this.effects.push(new Effect.Scale(this.currentAccordion,100,e)),this.showAccordion&&(this.showAccordion.previous(0).removeClassName(this.options.classNames.toggleActive),e=$({sync:!0,scaleContent:!1,scaleX:this.scaling.scaleX,scaleY:this.scaling.scaleY,transition:Effect.Transitions.sinoidal}),this.effects.push(new Effect.Scale(this.showAccordion,0,e))),new Effect.Parallel(this.effects,{duration:this.duration,queue:{position:"end",scope:"accordionAnimation"},beforeStart:function(){this.animating=!0}.bind(this),afterFinish:function(){this.showAccordion&&this.showAccordion.setStyle({display:"none"}),$(this.currentAccordion).setStyle({height:"auto"}),this.showAccordion=this.currentAccordion,this.animating=!1}.bind(this)})}},_wAMD.define("legacy/accordion",function(){}),function(){var e,t,i,n=function(e,t){return function(){return e.apply(t,arguments)}};i=this,e=function(){function e(e,t){null==t&&(t={}),this.options=t,this.set_default_values(),this.form_field=e,this.is_multiple=this.form_field.multiple,this.is_rtl=this.form_field.hasClassName("chzn-rtl"),this.default_text_default=this.form_field.multiple?_W.tl("Select Some Options"):_W.tl("Select an Option"),this.set_up_html(),this.register_observers(),this.form_field.addClassName("chzn-done")}return e.prototype.set_default_values=function(){return this.click_test_action=n(function(e){return this.test_active_click(e)},this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.choices=0,this.results_none_found=this.options.no_results_text||"No results match",this.single_temp=new Template('<a href="javascript:void(0)" class="chzn-single"><span>#{default}</span><div><b></b></div></a><div class="chzn-drop" style="display:none;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.multi_temp=new Template('<ul class="chzn-choices"><li class="search-field"><input type="text" value="#{default}" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="display:none;"><ul class="chzn-results"></ul></div>'),this.choice_temp=new Template('<li class="search-choice" id="#{id}"><span>#{choice}</span><a href="javascript:void(0)" class="search-choice-close" rel="#{position}"></a></li>'),this.no_results_temp=new Template('<li class="no-results">'+this.results_none_found+' "<span>#{terms}</span>"</li>')},e.prototype.set_up_html=function(){var e,i,n,o,s;return this.container_id=this.form_field.identify().replace(/(:|\.)/g,"_")+"_chzn",this.f_width=this.form_field.getStyle("width")?parseInt(this.form_field.getStyle("width"),10):this.form_field.getWidth(),i={id:this.container_id,"class":"chzn-container "+(this.is_rtl?"chzn-rtl":""),style:this.f_width?"width: "+this.f_width+"px":""},this.default_text=this.form_field.readAttribute("data-placeholder")?this.form_field.readAttribute("data-placeholder"):this.default_text_default,this.keep_title=!!this.form_field.readAttribute("data-keeptitle"),e=this.is_multiple?new Element("div",i).update(this.multi_temp.evaluate({"default":this.default_text})):new Element("div",i).update(this.single_temp.evaluate({"default":this.default_text})),this.form_field.hide().insert({after:e}),this.container=$(this.container_id),this.container.addClassName("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.down("div.chzn-drop"),n=this.container.getHeight(),o=this.f_width-t(this.dropdown),this.dropdown.setStyle({width:o+"px",top:n+"px"}),this.search_field=this.container.down("input"),this.search_results=this.container.down("ul.chzn-results"),this.search_field_scale(),this.search_no_results=this.container.down("li.no-results"),this.is_multiple?(this.search_choices=this.container.down("ul.chzn-choices"),this.search_container=this.container.down("li.search-field")):(this.search_container=this.container.down("div.chzn-search"),this.selected_item=this.container.down(".chzn-single"),s=o-t(this.search_container)-t(this.search_field),this.search_field.setStyle({width:s+"px"})),this.results_build(),this.set_tab_index()},e.prototype.register_observers=function(){return this.container.observe("mousedown",n(function(e){return this.container_mousedown(e)
},this)),this.container.observe("mouseenter",n(function(e){return this.mouse_enter(e)},this)),this.container.observe("mouseleave",n(function(e){return this.mouse_leave(e)},this)),this.search_results.observe("mouseup",n(function(e){return this.search_results_mouseup(e)},this)),this.search_results.observe("mouseover",n(function(e){return this.search_results_mouseover(e)},this)),this.search_results.observe("mouseout",n(function(e){return this.search_results_mouseout(e)},this)),this.form_field.observe("liszt:updated",n(function(e){return this.results_update_field(e)},this)),this.search_field.observe("blur",n(function(e){return this.input_blur(e)},this)),this.search_field.observe("keyup",n(function(e){return this.keyup_checker(e)},this)),this.search_field.observe("keydown",n(function(e){return this.keydown_checker(e)},this)),this.is_multiple?(this.search_choices.observe("click",n(function(e){return this.choices_click(e)},this)),this.search_field.observe("focus",n(function(e){return this.input_focus(e)},this))):this.selected_item.observe("focus",n(function(e){return this.activate_field(e)},this))},e.prototype.container_mousedown=function(e){return e&&"mousedown"===e.type&&e.stop(),this.pending_destroy_click?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!e||e.target!==this.selected_item&&!e.target.up("a.chzn-single")||this.results_toggle():(this.is_multiple&&this.search_field.clear(),document.observe("click",this.click_test_action),this.results_show()),this.activate_field())},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){return this.active_field?void 0:setTimeout(this.container_mousedown.bind(this),50)},e.prototype.input_blur=function(){return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(this.blur_test.bind(this),100))},e.prototype.blur_test=function(){return!this.active_field&&this.container.hasClassName("chzn-container-active")?this.close_field():void 0},e.prototype.close_field=function(){return document.stopObserving("click",this.click_test_action),this.is_multiple||(this.selected_item.tabIndex=this.search_field.tabIndex,this.search_field.tabIndex=-1),this.active_field=!1,this.results_hide(),this.container.removeClassName("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),"function"==typeof this.options.onClose&&this.options.onClose(this.container),this.search_field_scale()},e.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.tabIndex=this.selected_item.tabIndex,this.selected_item.tabIndex=-1),this.container.addClassName("chzn-container-active"),this.active_field=!0,this.search_field.value=this.search_field.value,"function"==typeof this.options.onActivate&&this.options.onActivate(this.container),this.search_field.focus()},e.prototype.test_active_click=function(e){return e.target.up("#"+this.container_id)?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){var e,t,n,o,s,r;for(n=new Date,this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.select("li.search-choice").invoke("remove"),this.choices=0):this.is_multiple||this.keep_title||this.selected_item.down("span").update(this.default_text),e="",r=this.results_data,o=0,s=r.length;s>o;o++)t=r[o],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):!t.selected||this.is_multiple||this.keep_title||this.selected_item.down("span").update(t.html));return this.show_search_field_default(),this.search_field_scale(),this.search_results.update(e),this.parsing=!1},e.prototype.result_add_group=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+e.label.escapeHTML()+"</li>")},e.prototype.result_add_option=function(e){var t;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),'<li id="'+e.dom_id+'" class="'+t.join(" ")+'">'+e.html+"</li>")},e.prototype.results_update_field=function(){return this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.result_do_highlight=function(e){var t,i,n,o,s;return this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClassName("highlighted"),n=parseInt(this.search_results.getStyle("maxHeight"),10),s=this.search_results.scrollTop,o=n+s,i=this.result_highlight.positionedOffset().top,t=i+this.result_highlight.getHeight(),t>=o?this.search_results.scrollTop=t-n>0?t-n:0:s>i?this.search_results.scrollTop=i:void 0},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClassName("highlighted"),this.result_highlight=null},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_show=function(){var e;return this.is_multiple||(this.selected_item.addClassName("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)),e=this.is_multiple?this.container.getHeight():this.container.getHeight()-1,this.dropdown.setStyle({top:e+"px",display:"block"}),this.results_showing=!0,this.search_field.focus(),this.search_field.value=this.search_field.value,this.winnow_results()},e.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClassName("chzn-single-with-drop"),this.result_clear_highlight(),this.dropdown.setStyle({display:"none"}),this.results_showing=!1},e.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.is_multiple?this.search_field.tabIndex=e:(this.selected_item.tabIndex=e,this.search_field.tabIndex=-1)):void 0},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.value=this.default_text,this.search_field.addClassName("default")):(this.search_field.value="",this.search_field.removeClassName("default"))},e.prototype.search_results_mouseup=function(e){var t;return t=e.target.hasClassName("active-result")?e.target:e.target.up(".active-result"),t?(this.result_highlight=t,this.result_select(e)):void 0},e.prototype.search_results_mouseover=function(e){var t;return t=e.target.hasClassName("active-result")?e.target:e.target.up(".active-result"),t?this.result_do_highlight(t):void 0},e.prototype.search_results_mouseout=function(e){return e.target.hasClassName("active-result")||e.target.up(".active-result")?this.result_clear_highlight():void 0},e.prototype.choices_click=function(e){return e.preventDefault(),!this.active_field||e.target.hasClassName("search-choice")||e.target.up(".search-choice")||this.results_showing?void 0:this.results_show()},e.prototype.choice_build=function(e){var t,i;return t=this.container_id+"_c_"+e.array_index,this.choices+=1,this.search_container.insert({before:this.choice_temp.evaluate({id:t,choice:e.html,position:e.array_index})}),i=$(t).down("a"),i.observe("click",n(function(e){return this.choice_destroy_link_click(e)},this))},e.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),this.pending_destroy_click=!0,this.choice_destroy(e.target)},e.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.value.length<1&&this.results_hide(),this.result_deselect(e.readAttribute("rel")),e.up("li").remove()},e.prototype.result_select=function(e){var t,i,n;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),t.addClassName("result-selected"),this.is_multiple?this.result_deactivate(t):this.result_single_selected=t,n=t.id.substr(t.id.lastIndexOf("_")+1),i=this.results_data[n],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):this.keep_title||this.selected_item.down("span").update(i.html),e.metaKey&&this.is_multiple||this.results_hide(),this.search_field.value="","function"==typeof Event.simulate&&this.form_field.simulate("change"),this.search_field_scale()):void 0},e.prototype.result_activate=function(e){return e.addClassName("active-result").show()},e.prototype.result_deactivate=function(e){return e.removeClassName("active-result").hide()},e.prototype.result_deselect=function(e){var t,i;return i=this.results_data[e],i.selected=!1,this.form_field.options[i.options_index].selected=!1,t=$(this.container_id+"_o_"+e),t.removeClassName("result-selected").addClassName("active-result").show(),this.result_clear_highlight(),this.winnow_results(),"function"==typeof Event.simulate&&this.form_field.simulate("change"),this.search_field_scale()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g;for(l=new Date,this.no_results_clear(),r=0,a=this.search_field.value===this.default_text?"":this.search_field.value.strip().escapeHTML(),o=new RegExp("^"+a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),d=new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),g=this.results_data,h=0,f=g.length;f>h;h++)if(t=g[h],!t.disabled&&!t.empty)if(t.group)$(t.dom_id).hide();else if(!this.is_multiple||!t.selected){if(e=!1,s=t.dom_id,o.test(t.html))e=!0,r+=1;else if((t.html.indexOf(" ")>=0||0===t.html.indexOf("["))&&(n=t.html.replace(/\[|\]/g,"").split(" "),n.length))for(p=0,m=n.length;m>p;p++)i=n[p],o.test(i)&&(e=!0,r+=1);e?(a.length?(c=t.html.search(d),u=t.html.substr(0,c+a.length)+"</em>"+t.html.substr(c+a.length),u=u.substr(0,c)+"<em>"+u.substr(c)):u=t.html,$(s).innerHTML!==u&&$(s).update(u),this.result_activate($(s)),null!=t.group_array_index&&$(this.results_data[t.group_array_index].dom_id).show()):($(s)===this.result_highlight&&this.result_clear_highlight(),this.result_deactivate($(s)))}return 1>r&&a.length?this.no_results(a):this.winnow_results_set_highlight()},e.prototype.winnow_results_clear=function(){var e,t,i,n,o;for(this.search_field.clear(),t=this.search_results.select("li"),o=[],i=0,n=t.length;n>i;i++)e=t[i],o.push(e.hasClassName("group-result")?e.show():this.is_multiple&&e.hasClassName("result-selected")?void 0:this.result_activate(e));return o},e.prototype.winnow_results_set_highlight=function(){var e;return this.result_highlight||(this.is_multiple||(e=this.search_results.down(".result-selected")),null==e&&(e=this.search_results.down(".active-result")),null==e)?void 0:this.result_do_highlight(e)},e.prototype.no_results=function(e){return this.search_results.insert(this.no_results_temp.evaluate({terms:e}))},e.prototype.no_results_clear=function(){var e,t;for(e=null,t=[];e=this.search_results.down(".no-results");)t.push(e.remove());return t},e.prototype.keydown_arrow=function(){var e,t,i;return e=this.search_results.select("li.active-result"),e.length&&(this.result_highlight?this.results_showing&&(i=this.result_highlight.nextSiblings(),t=i.intersect(e),t.length&&this.result_do_highlight(t.first())):this.result_do_highlight(e.first()),!this.results_showing)?this.results_show():void 0},e.prototype.keyup_arrow=function(){var e,t,i;return this.results_showing||this.is_multiple?this.result_highlight?(i=this.result_highlight.previousSiblings(),e=this.search_results.select("li.active-result"),t=i.intersect(e),t.length?this.result_do_highlight(t.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},e.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.down("a")),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClassName("search-choice-focus"))},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClassName("search-choice-focus"),this.pending_backstroke=null},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:if(this.results_showing)return this.results_hide();break;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:return this.backstroke_length=this.search_field.value.length;case 9:return this.mouse_on_container=!1;case 13:return e.preventDefault();case 38:return e.preventDefault(),this.keyup_arrow();case 40:return this.keydown_arrow()}},e.prototype.search_field_scale=function(){var e,t,i,n,o,s,r,a,l;if(this.is_multiple){for(i=0,r=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],a=0,l=s.length;l>a;a++)n=s[a],o+=n+":"+this.search_field.getStyle(n)+";";return t=new Element("div",{style:o}).update(this.search_field.value.escapeHTML()),document.body.appendChild(t),r=Element.measure(t,"width")+25,t.remove(),r>this.f_width-10&&(r=this.f_width-10),this.search_field.setStyle({width:r+"px"}),e=this.container.getHeight(),this.dropdown.setStyle({top:e+"px"})}},e}(),i.Chosen=e,Prototype.Browser.IE&&/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(Prototype.BrowserFeatures.Version=new Number(RegExp.$1)),t=function(e){var t,i;return t=new Element.Layout(e),i=t.get("border-left")+t.get("border-right")+t.get("padding-left")+t.get("padding-right")},i.get_side_border_padding=t}.call(this),function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,n,o,s,r;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,r=[],n=0,o=s.length;o>n;n++)i=s[n],r.push(this.add_option(i,t,e.disabled));return r},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),e.select_to_array=function(t){var i,n,o,s,r;for(n=new e,r=t.childNodes,o=0,s=r.length;s>o;o++)i=r[o],n.add_node(i);return n.parsed},this.SelectParser=e,document.observe("dom:loaded",function(){var e,t,i,n,o;if(!Prototype.Browser.IE||6!==Prototype.BrowserFeatures.Version){for(t=$$(".chzn-select"),o=[],i=0,n=t.length;n>i;i++)e=t[i],o.push(new Chosen(e));return o}})}.call(this),_wAMD.define("legacy/chosen/chosen.proto",function(){}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("tooltiphide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),o=n.data("modal"),s=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);o||n.data("modal",o=new t(this,s)),"string"==typeof i?o[i]():s.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),o=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},o.data(),i.data());t.preventDefault(),o.modal(s).one("hide",function(){i.focus()})})}(window.jQuery),!function(e){function t(){e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=n&&e(n),i&&i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",o=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var n,o,s=e(this);if(!s.is(".disabled, :disabled")){if(n=i(s),o=n.hasClass("open"),t(),!o){n.toggleClass("open"),n.trigger("bootstrapDropdownOpen");var r=n.find(".scroll");if(r.length){r.weeblyScroll&&r.weeblyScroll("destroy");var a=n.find(".dropdown-menu");a.height("");var l,c,u=a.offset().top;s.closest("#w-design-themes").length?(l=e("#w-design-themes .content"),c=l.offset().top):(l=e(window),c=0);var d=l.height();u+a.outerHeight()>c+d&&(a.height(c+d-u-20),r.weeblyScroll&&r.weeblyScroll())}}return s.focus(),!1}},keydown:function(t){var o,s,r,a,l;if(/(38|40|27)/.test(t.keyCode)&&(o=e(this),t.preventDefault(),t.stopPropagation(),!o.is(".disabled, :disabled"))){if(r=i(o),a=r.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&r.find(n).focus(),o.click();s=e("[role=menu] li:not(.divider):visible a",r),s.length&&(l=s.index(s.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<s.length-1&&l++,~l||(l=0),s.eq(l).focus())}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new o(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form, .disabled, :disabled, .w-scrollbar-handle, .social-toolbar",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,o.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(e){function t(t,i){var n,o=e.proxy(this.process,this),s=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=s.on("scroll.scroll-spy.data-api",o),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),o=/^#\w/.test(n)&&e(n);return o&&o.length&&[[o.position().top+(!e.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(t>=n)return r!=(e=s.last()[0])&&this.activate(e);for(e=o.length;e--;)r!=s[e]&&t>=o[e]&&(!o[e+1]||t<=o[e+1])&&this.activate(s[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),o=n.data("scrollspy"),s="object"==typeof i&&i;o||n.data("scrollspy",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,o=this.element,s=o.closest("ul:not(.dropdown-menu)"),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(t=s.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),o.trigger(n),n.isDefaultPrevented()||(i=e(r),this.activate(o.parent("li"),s),this.activate(i,i.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var s=i.find("> .active"),r=n&&e.support.transition&&s.hasClass("fade");r?s.one(e.support.transition.end,o):o(),s.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),o=n.data("tab");o||n.data("tab",o=new t(this)),"string"==typeof i&&o[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var o,s,r,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseenter":"focus",s="hover"==a?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,n=e.fn[this.type].defaults,o={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(o[e]=t)},this),i=e(t.currentTarget)[this.type](o).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var t,i,n,o,s,r,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.className&&t.addClass(this.options.className),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,o=t[0].offsetHeight,s){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-o,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-o/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-o/2,left:i.left+i.width}}this.applyPlacement(r,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,o,s,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),i=r[0].offsetWidth,n=r[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,s=!0),"bottom"==t||"top"==t?(o=0,e.left<0&&(o=-2*e.left,e.left=0,r.offset(e),i=r[0].offsetWidth,n=r[0].offsetHeight),this.replaceArrow(o-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),s&&r.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("tooltiphide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),o=n.data("tooltip"),s="object"==typeof i&&i;o||n.data("tooltip",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),o=n.data("popover"),s="object"==typeof i&&i;o||n.data("popover",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),o=this.$element.offset(),s=this.options.offset,r=s.bottom,a=s.top,l="affix affix-top affix-bottom";"object"!=typeof s&&(r=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof r&&(r=s.bottom()),t=null!=this.unpin&&n+this.unpin<=o.top?!1:null!=r&&o.top+this.$element.height()>=i-r?"bottom":null!=a&&a>=n?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?o.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),o=n.data("affix"),s="object"==typeof i&&i;
o||n.data("affix",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){n.trigger("closed").remove()}var n,o=e(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),n=e(s),t&&t.preventDefault(),n.length||(n=o.hasClass("alert")?o:o.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,i):i())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),o=n.data("alert");o||n.data("alert",o=new i(this)),"string"==typeof t&&o[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),o=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[o]()),i[o](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),o=n.data("button"),s="object"==typeof i&&i;o||n.data("button",o=new t(this,s)),"toggle"==i?o.toggle():i&&o.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,o;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(o=n.data("collapse"),o&&o.transitioning)return;n.collapse("hide"),o||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var o=this,s=function(){"show"==i.type&&o.reset(),o.transitioning=0,o.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),o=n.data("collapse"),s=e.extend({},e.fn.collapse.defaults,n.data(),"object"==typeof i&&i);o||n.data("collapse",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),o=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=e(o).data("collapse")?"toggle":n.data();n[e(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(o).collapse(s)})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),n=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,i){var n,o=this.$element.find(".item.active"),s=i||o[t](),r=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,r&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:s[0],direction:a}),!s.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;s.addClass(t),s[0].offsetWidth,o.addClass(a),s.addClass(a),this.$element.one(e.support.transition.end,function(){s.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each(function(){var n=e(this),o=n.data("carousel"),s=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),r="string"==typeof i?i:s.slide;o||n.data("carousel",o=new t(this,s)),"number"==typeof i?o.to(i):r?o[r]():s.interval&&o.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,n,o=e(this),s=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},s.data(),o.data());s.carousel(r),(n=o.attr("data-slide-to"))&&s.data("carousel").pause().to(n).cycle(),t.preventDefault()})}(window.jQuery),_wAMD.define("public_legacy/bootstrap",function(){}),function(e){e.fn.featureSlideshow=function(i,n){return this.each(function(){var o=e(this),s=o.data("featureSlideshow"),r="object"==typeof i&&i;s||o.data("featureSlideshow",s=new t(this,r)),"string"==typeof i&&s[i](n)})},e.fn.featureSlideshow.defaults={onClose:!1,outerClass:"feature-slideshow-dialog"};var t=function(t,i){i=e.extend({},e.fn.featureSlideshow.defaults,i);var n=this,o=e(".slide",t),s=e(t),r=new Weebly.Dialog(t,{modal:!0,noScrollbars:!0,blackoutOpacity:.75,outerClass:i.outerClass,zIndex:1005,showClose:i.showClose,onClose:i.onClose});1==s.find(".nav a").length&&s.find(".nav a").hide(),s.find(".nav a").click(function(){return n.go(e(this).closest("li").index()),!1}),s.find(".next").click(function(){return n.next(),!1}),s.find(".close").click(function(){return n.close(),!1}),Element.observe(window,"resize",function(){r.positionDialog()}),e(window).load(function(){r.positionDialog()}),n.prev=function(){n.go(o.filter(":visible").index()-1)},n.next=function(){n.go(o.filter(":visible").index()+1)},n.go=function(i){i=i%o.length||0,o.hide().eq(i).show(),e(".nav li",t).removeClass("current").eq(i).addClass("current"),r.positionDialog()},n.open=function(){r.open(),n.go(0)},n.close=function(){r.close()}}}(jQuery),_wAMD.define("public_legacy/jquery.featureSlideshow",function(){});var active_container="elements";!function(e){function t(){function t(){o.fullScreen()?n.addClass("undo"):n.removeClass("undo")}var n=e("#other-actions-dropdown .fullscreen"),o=e(document);i()||null===o.fullScreen()?n.parent().remove():(n.on("click",function(){o.toggleFullScreen()}),t(),o.on("fullscreenchange",function(){t()}))}function i(){return/Mac OS X/.test(navigator.userAgent)}function n(){var t=e("#w-editor-top .plan-dropdown-toggle"),i=e("#plan-dropdown-content"),n="nhd"!=source&&"edstudent"!=source&&!isClientSite,o=Weebly.Restrictions.hasBusiness(),s=n,r=Weebly.Restrictions.is_trial||n&&!o,a=Weebly.Reseller&&Weebly.Reseller.isResellerUser;i.length||(i=e("<ul id='plan-dropdown-content' class='dropdown-content' />").insertAfter(t));var l="";if(s)if(Weebly.Restrictions.is_trial){var c=Weebly.Restrictions.days_left,l=1==c?_W.tl("%s day left in trial"):_W.tl("%s days left in trial");l=l.replace("%s",c)}else l=Weebly.Restrictions.levelToName(Weebly.Restrictions.level),1===Weebly.Restrictions.settings.showUpgradeText&&l!==_W.tl("Business")&&(l=_W.tl("Upgrade"));if(a&&""!=Weebly.Reseller.resellerName?t.find(".text").text(Weebly.Reseller.resellerName):t.find(".text").text(l),Weebly.Restrictions.is_trial){var u=Weebly.Restrictions.levelToName(Weebly.Restrictions.level);("without_credit_card"===Weebly.freeTrialTest||"with_credit_card"===Weebly.freeTrialTest)&&(e("#w-design-main-footer .w-trial-countdown").text(l).show(),t.find(".text").text(u+" "+_W.tl("Trial")))}i.empty(),r&&(i.append(e("<li/>").append(e("<a>").text(_W.tl("Upgrade your site!")).prepend('<span class="icon w-icon-star"></span>').on("click",function(){editorApp.vent.trigger("billing:upgrade:window",{siteID:currentSite,refer:"editor_top_bar"})}))),a||i.append(e("<li/>").append(e("<a>").text(_W.tl("Compare Plans")).prepend('<span class="icon w-icon-compare"></span>').on("click",function(){editorApp.vent.trigger("billing:upgrade:window",{siteID:currentSite,refer:"editor_top_bar",forceComparison:!0})})))),r?(t.find(".icon").show(),t.find(".icon").parent("a").removeAttr("disabled")):(t.find(".icon").hide(),t.find(".icon").parent("a").attr("disabled","disabled"))}window.activeTab=function(t){e("#w-editor-top .tabs .selected").removeClass("selected"),e("#"+t).addClass("selected")},window.getCurrentSelectedTab=function(){return e("#w-editor-top .tabs .selected")},window.activeContainer=function(t){t!=active_container&&(active_container=t,("elements"==t||"themes"==t)&&editorApp.vent.trigger("editor:toolbar:show")),e("#commerce_editor_tabbar_container, #elements_container, #pages_container, #themes_container, #contributors").hide(),e("#"+t+"_container").show(),Weebly.SlidingPanel.isOpening||Weebly.SlidingPanel.hideAllPanels(),"elements"==t?(e("#available-elements").show(),jQuery("#available-elements .scroll").scrollTop(0)):e("#available-elements").hide(),"themes"==t?e("#w-design").show():e("#w-design").hide(),"headerEditor"!=t&&e("#headerEditor_container").hide()},window.initPlanDropdown=n,e(function(){e("#publish-button").on("click",function(){return isClientSite&&0==settingQuickExport?loadClientPreview():editorApp.billing.canPublish(function(){Pages.go("exportSite")}),!1}),e("#question-dropdown").on("click","#site-planner-link",function(){Weebly.SlidingPanel.toggle("plan-container")}),e("#question-dropdown").on("click","#phone-support-link",function(){var t=require("editor/dialogs/PhoneSupport");editorApp.showDialog(new t({phoneNumber:e(this).text().trim()}))}),e(".device-switcher").on("click",".desktop",function(){Weebly.view.isMobileView&&Pages.go("webView")}).on("click",".mobile",function(){Weebly.view.isMobileView||Pages.go("mobileView")}),e("#other-actions-dropdown").on("click",".sites",function(){window.location.href="/weebly/exitEditor.php"}).on("click",".stats",function(){window.location.href="/weebly/exitEditor.php?r=stats"}).on("click",".domains",function(){window.location.href="/weebly/exitEditor.php?r=domains"}).on("click",".exit",function(){window.location.href="/weebly/exitEditor.php"}),t(),n(),e("#w-editor-top").find(".tooltip-content").each(function(){var t=e(this),i=t.prev("a"),n=new Weebly.HoverToolbar({targetElement:i[0]});e(n.getInnerElement()).addClass("w-ui").append(t)}),e("#w-maintenance-close").on("click",function(){e("#w-editor-maintenance-message").fadeOut()}),e("#w-editor-top").find(".dropdown-content").each(function(){function t(){s.attr("disabled")||(s.closest("li").addClass("selected"),r.show(),n=!0)}function i(){s.closest("li").removeClass("selected"),r.hide(),n=!1}var n=!1,o=e(this),s=o.prev("a").on("click",function(){n?i():t()}),r=new Weebly.HoverToolbar({hoverElement:s[0],targetElement:s.find("span.icon")[0]||s[0]});r.setAutoShow(!1),r.setAutoHide(!1),e(r.getInnerElement()).addClass("w-ui").append(o),e(document).on("click",function(t){e(t.target).closest(s).length||i()})})})}(Weebly.jQuery),_wAMD.define("legacy/weebly_top_bar",["editor/app","legacy/weebly_utils","legacy/weebly_sliding_panel","legacy/weebly_dialog","legacy/weebly_restrictions","legacy/classes/HoverToolbar"],function(){}),Effect.Transitions.Elastic=function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*2*Math.PI/2)+1},Effect.Transitions.SwingFromTo=function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},Effect.Transitions.SwingFrom=function(e){var t=1.70158;return e*e*((t+1)*e-t)},Effect.Transitions.SwingTo=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},Effect.Transitions.Bounce=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},_wAMD.define("legacy/transitions",function(){}),function(){var e={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|mouse(?:down|up|over|move|out))$/},t={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0};Event.simulate=function(i,n){var o,s=Object.extend(t,arguments[2]||{}),r=null;i=$(i);for(var a in e)if(e[a].test(n)){r=a;break}if(!r)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(o=document.createEvent(r),"HTMLEvents"==r?o.initEvent(n,s.bubbles,s.cancelable):o.initMouseEvent(n,s.bubbles,s.cancelable,document.defaultView,s.button,s.pointerX,s.pointerY,s.pointerX,s.pointerY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,i),i.dispatchEvent(o)):(s.clientX=s.pointerX,s.clientY=s.pointerY,o=Object.extend(document.createEventObject(),s),i.fireEvent("on"+n,o)),i},Element.addMethods({simulate:Event.simulate})}(),_wAMD.define("legacy/event.simulate",function(){}),function(){function e(e){O=e||!1,t(currentTheme,currentThemeColor,null)}function t(e,t){currentTheme=e,t&&(currentThemeColor=t),require("editor/app").vent.trigger("themeEditor")}function i(){var e=document.viewport.getDimensions();y=e.width,w=e.height-$("te-head").offsetHeight,$("te-main").style.height=w+"px",void 0===M&&(M=Math.min(225,Math.round(.5*y))),void 0===x&&(x=Math.round(.5*w)),_=y-$("te-divider").offsetWidth,P||(_-=M,$("te-sidebar").style.width=M+"px"),$("te-content").style.width=_+"px",z||(C=w-$("te-code-subhead").offsetHeight,N||(k=$("te-bottom-bar").offsetHeight,R?C-=k:(C-=x,$("te-bottom-content").style.height=x-k+"px")),$("te-code-editor").style.height=C+"px")}function n(){S&&S()}function o(){N?E.showPreview():(r(),D.removeClassName("te-bottom-tab-pressed"),A.addClassName("te-bottom-tab-pressed"),$("te-documentation-iframe").hide(),$("te-preview-iframe").show()),F=!1,u()}function s(){N?E.showDocumentation():(r(),A.removeClassName("te-bottom-tab-pressed"),D.addClassName("te-bottom-tab-pressed"),$("te-preview-iframe").hide(),$("te-documentation-iframe").show(),I||($("te-documentation-iframe").src="http://themedocs.weebly.com/",I=!0)),F=!0}function r(){R&&($("te-maximize-button").hide(),$("te-minimize-button").show(),$("te-bottom-content").show(),R=!1,i(),m.refresh(),F?s():(o(),u()),$("te-bottom-grip").removeClassName("te-bottom-grip-collapsed"))}function a(e,t){F||R||z&&!N?W=!0:t?c(e):l(e)}function l(e){n();var t=N?E:window;d();var i=t.previewLoaded;t.previewLoaded=function(){h(),t.previewLoaded=i};var o;o=N?E.getPreviewForm():$("te-preview-form"),o.themeID.value=b,o.userID.value=userID,o.siteID.value=currentSite,o.pageID.value=e||p()||currentPage,o.pageType.value=T||"",o.template.value=T?g[T]:"",o.css.value=v,o.isMobile.value=O,o.cookie.value=document.cookie,o.submit(),W=!1}function c(e){n(),d(),new Ajax.Request("/editor/apps/preview.php",{parameters:{themeID:b,userID:userID,siteID:currentSite,pageID:e||p()||currentPage,css:v,only_css:1,cookie:document.cookie},onSuccess:function(e){var t=e.responseText.evalJSON(),i=t.css,n=t.fonts,o=N?E.getPreviewIframe():$("te-preview-iframe"),s=o.contentWindow,r=s.jQuery("head"),a=s.document.createElement("style");a.setAttribute("id","preview-css"),a.setAttribute("type","text/css"),a.styleSheet?a.styleSheet.cssText=i:a.appendChild(s.document.createTextNode(i)),s.jQuery("#preview-css").remove(),r.append(a),n&&(r.find("link.preview-font").remove(),r.append(n)),h()}}),W=!1}function u(){W&&a()}function d(){N?E.showLoading():$("te-preview-loading").show()}function h(){N&&E.hideLoading(),$("te-preview-loading").hide()}function p(){var e=N?E.getPreviewIframe():$("te-preview-iframe");return e.contentWindow?e.contentWindow.PAGE_ID:void 0}function f(){if(N){var e=p();E.close(),N=!1,F?s():(o(),l(e)),$("te-bottom").show(),i(),m.refresh()}}window.advancedEditing=e,window.editCustomTheme=t,window.themeEditorPopin=f,window.themeEditorShowPreview=o,window.themeEditorShowDocumentation=s,window.themeEditorState={};var m,g,v,b,y,w,_,M,C,x,k,S,T,A,D,E,P=!1,R=!1,z=!1,O=!1,F=!1,W=!1,I=!1,N=!1;!function(){function e(e){p=e,f||(f=!0,t()),n();var i=o()[0];i.addClassName("multiple-choice-box-selected"),i.select("input")[0].checked=!0,l.value="",d="tall-header",c.open()}function t(){c=new Weebly.Dialog("page-type-chooser1",{modal:!0,zIndex:999999}),$$("#page-type-chooser1 div.multiple-choice-box").each(function(e){e.observe("click",i)}),l=$("other-page-type-input"),$("page-type-chooser1-submit").observe("click",function(){if("other"==d){var e=l.value.strip();e=e.replace(/[\s_-]+/g,"-"),e=e.toLowerCase(),e&&p(e)!==!1&&c.close()}else"splash"==d?p(d)!==!1&&c.close():(c.close(),$("page-type-chooser2-title").innerHTML="Add a "+("landing"==d?"Landing":"Standard")+" page",s(),u.open())}),u=new Weebly.Dialog("page-type-chooser2",{modal:!0,zIndex:999999}),$("page-type-chooser-back").observe("click",function(){u.close(),c.open()}),$("page-type-chooser2-submit").observe("click",function(){p(d,h)!==!1&&u.close()})}function i(){d=this.readAttribute("data-type"),n(),this.addClassName("multiple-choice-box-selected"),this.select("input")[0].checked=!0,"other"==d&&l.focus()}function n(){o().each(function(e){e.removeClassName("multiple-choice-box-selected")})}function o(){return $$("#page-type-chooser1 div.multiple-choice-box")}function s(){for(var e="no-header"==d?3:4,t=$("pt-square-container-inner").update(),i=1;e>=i;i++){var n=new Element("div",{"data-icon":i,"class":"pt-square pt-square-"+d+i}).update("<div></div>");n.observe("click",r),t.insert(n)}h=1,$(t.firstChild).addClassName("pt-square-selected")}function r(){h=parseInt(this.readAttribute("data-icon")),a(),this.addClassName("pt-square-selected")}function a(){$("pt-square-container-inner").childElements().each(function(e){e.removeClassName("pt-square-selected")})}var l,c,u,d,h,p,f=!1;return e}()}(),_wAMD.define("legacy/weebly_theme_editor",["legacy/weebly_dialog","editor/dialogs/UploadVirusError","editor/build/themes/rendering","editor/build/themes/utils"],function(){});var NestedSortable={create:function(e,t){function i(){x=[],e.select(t.itemSelector||"li").each(function(e){x.push(new Draggable(e,{scroll:_,handle:t.handleSelector?e.select(t.handleSelector)[0]:e,constraint:t.constraint,onStart:function(i,n){a=e.cloneNode(!0),a.style.position="absolute",a.setOpacity(M),e.insert({before:a});var s=e.cumulativeOffset();l=n.clientX-s.left,c=n.clientY-s.top,_&&(u=_.scrollTop),o(e,a),d=p,h=f,t.onStart&&t.onStart.call(e)},onDrag:function(i,n){if(n){var s=n.clientX-l,r=n.clientY-c;_&&(r+=_.scrollTop-u);for(var d=0;d<m.length&&r<m[d][0];)d++;if(d>0){var h=$(e.parentNode);m[d-1][1].insert({before:a}),m[d-1][1].insert({before:e}),0==h.childElements().length&&h.remove(),o(e,a),t.onPop&&t.onPop.call(e)}else{for(d=0;d<g.length&&r>=g[d][0];)d++;if(d>0){var h=$(e.parentNode);d<g.length?(g[d][1].insert({before:a}),g[d][1].insert({before:e})):(g[g.length-1][1].insert({after:e}),g[g.length-1][1].insert({after:a})),0==h.childElements().length&&h.remove(),o(e,a),t.onPop&&t.onPop.call(e)}}if(y){for(d=0;d<v.length&&s<v[d][0];)d++;if(d>0){var h=$(e.parentNode);v[d-1][1].parentNode.insert({after:e}),v[d-1][1].parentNode.insert({after:a}),0==h.childElements().length&&h.remove(),o(e,a),t.onPop&&t.onPop.call(e)}}if(w&&s>b){var p=e.previous();p==a&&(p=p.previous());var f=p.down("UL");f||(f=$(document.createElement("UL")),p.insert(f)),f.insert(a),f.insert(e),o(e,a),t.onPop&&t.onPop.call(e)}}},onEnd:function(){a.remove(),e.style.top="",e.style.left="",n(),!t.onChange||p==d&&f==h||t.onChange(),t.onEnd&&t.onEnd.call(e)}}))})}function n(){for(var e=0;e<x.length;e++)x[e].destroy();i()}function o(t,i){var n=t.previous();n==i&&(n=n.previous());var o=t.next();y=!o&&t.parentNode!=e,w=C&&n,w&&(i=$(i),b=i.cumulativeOffset().left+10),m=[];for(var a=s(i);a&&a!=e;)"LI"==a.nodeName&&a!=i&&m.push([a.cumulativeOffset().top+10,a]),a=s(a);g=[],a=r(t,!0);for(var l=r(e,!0);a&&a!=l;)"LI"==a.nodeName&&a!=i&&g.push([a.cumulativeOffset().top-10,a]),a=r(a);if(v=[],y)for(a=$(t.parentNode);a&&a!=e;)"UL"==a.nodeName&&v.push([a.cumulativeOffset().left-0,a]),a=$(a.parentNode);p=t.parentNode,f=n}function s(e){for(;;){if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else if(e.parentNode&&(e=e.parentNode,!e))return null;if(1==e.nodeType)return $(e)}}function r(e,t){for(;;){if(!t&&e.firstChild)e=e.firstChild;else if(e.nextSibling)e=e.nextSibling;else{do if(e=e.parentNode,!e)return null;while(!e.nextSibling);e=e.nextSibling}if(1==e.nodeType)return $(e);t=!1}}e=$(e),t=t||{};var a,l,c,u,d,h,p,f,m,g,v,b,y,w,_=t.scroll?$(t.scroll):null,M="undefined"==typeof t.placeholderOpacity?.5:t.placeholderOpacity,C="undefined"==typeof t.allowIndent?!0:t.allowIndent,x=[];return i(),this.refresh=n,this}};_wAMD.define("legacy/nested_sortable",function(){}),function(e){"undefined"==typeof e.fn.spinner&&e.fn.extend({spinner:function(t){function i(){t.incrementElement||t.decrementElement?(d=e(t.incrementElement),h=e(t.decrementElement)):(c=e('<div class="'+t.className+'" />').addClass(t.theme),u=e('<div class="'+t.className+'-controls" />'),d=e('<a class="'+t.className+'-up" />'),h=e('<a class="'+t.className+'-down" />'),u.append(d,h),l.wrap(c).addClass(t.className+"-input").parent().append(u).css({height:t.height||"auto"})),l.on({keypress:function(e){var t=e.keyCode||e.which;return t>47&&58>t||8===t||9===t||37===t||39===t||e.metaKey?!0:!1},keydown:function(t){var i=e(t.currentTarget);38===t.which?o(i):40===t.which&&s(i)},blur:function(e){var t=e.currentTarget;t.getAttribute("data-max")&&parseInt(t.value)>parseInt(t.getAttribute("data-max"))?t.value=t.getAttribute("data-max"):""===t.value&&(t.value=1)},change:function(t){var i=e(t.currentTarget);a(i)&&r()}}),d.on({click:function(){clearInterval(p),o(l)},mousedown:function(t){e(t.currentTarget).addClass("wsite-active"),p=setInterval(function(){o(l)},250),t.preventDefault()},mouseup:function(e){n(e.currentTarget)},mouseout:function(e){n(e.currentTarget)}}),h.on({click:function(){clearInterval(p),s(l)},mousedown:function(t){e(t.currentTarget).addClass("wsite-active"),p=setInterval(function(){s(l)},250),t.preventDefault()},mouseup:function(e){n(e.currentTarget)},mouseout:function(e){n(e.currentTarget)}})}function n(t){e(t).removeClass("wsite-active"),clearInterval(p)}function o(e){if(!e.is(":disabled")){var i=parseInt(e.val());isNaN(i)&&t.defaultVal&&(i=t.defaultVal);var n=i+t.interval;e.val(Math.min(n,parseInt(e.attr("data-max"))||t.max)).focus(),r()}}function s(e){if(!e.is(":disabled")){var i=parseInt(e.val());isNaN(i)&&t.defaultVal&&(i=t.defaultVal);var n=i-t.interval;e.val(Math.max(n,parseInt(e.data("data-min"))||t.min)).focus(),r()}}function r(){t.onChange&&t.onChange.call(l[0])}function a(e){if(e.is(":disabled"))return!1;var i=parseInt(e.val());return isNaN(i)?(i=void 0!=t.defaultVal?t.defaultVal:t.min,e.val(i)):i<parseInt(e.attr("data-min")||t.min)?e.val(t.min):i>parseInt(e.attr("data-max")||t.max)&&e.val(t.max),!0}var l,c,u,d,h,p,f={className:"wsite-spinner",height:void 0,min:1,max:1/0,theme:"light",interval:1};return t=e.extend(f,t),this.each(function(t,n){l=e(n),"INPUT"===n.nodeName&&i()}),this}})}(Weebly.jQuery),_wAMD.define("util/ui/Spinner",function(){});var themeFavoriteActiveMessage=_W.tl("Remove from favorites"),themeFavoriteInactiveMessage=_W.tl("Add to favorites");window.initThemeFavoriting=function(e,t,i,n){n=n||"theme-favorite-active",t.observe("click",function(o){function s(){var s;r.hasClassName(n)?(s=0,t.removeClassName(n),t.title=themeFavoriteInactiveMessage):(s=1,t.addClassName(n),t.title=themeFavoriteActiveMessage),i&&i.blur(),o.stop(),new Ajax.Request("/theme_browser/user_ajax.php",{parameters:{favorite:s,theme:Object.isFunction(e)?e():e}})}var r=this,a=(parent||top).Weebly;a&&a.ensureAccount?a.ensureAccount(s,"You must have a Weebly account to favorite."):s(),o.stop()}),t.title=t.hasClassName(n)?themeFavoriteActiveMessage:themeFavoriteInactiveMessage};var confirmThemeContainer,confirmThemeIframe,confirmThemeCallback;window.confirmTheme=function(e,t){confirmThemeCallback=t,confirmThemeContainer||(confirmThemeContainer=new Element("div",{id:"theme-submission-preview"}).insert(new Element("div",{id:"theme-submission-preview-inner"}).insert("<h2>"+_W.tl("Is this the theme you want to submit to Weebly?")+"</h2>").insert(new Element("button",{"class":"ok"}).observe("click",confirmConfirmTheme).update("Yes, Continue...")).insert(" ").insert(new Element("button",{"class":"cancel"}).observe("click",closeConfirmTheme).update("Cancel"))).insert(confirmThemeIframe=new Element("iframe",{style:"background:#fff",frameBorder:0})).hide(),$(document.body).insert(confirmThemeContainer)),confirmThemeContainer.show(),positionConfirmTheme(),confirmThemeContainer.hide().show();var i=e.match(/^custom_([^_]+)+_(\d+)$/);confirmThemeIframe.src="/theme_browser/preview.php?"+(window.userID?"&user_id="+userID:"")+(window.currentSite?"&site_id="+currentSite:"")+(i?"&custom_theme_id="+i[2]+"&custom_theme_user_id=self":"&theme_id="+e),Element.observe(window,"resize",positionConfirmTheme)},_wAMD.define("legacy/weebly_theme_browser_common",function(){}),function(e,t){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function o(){var t=e(h),i=e(p);l&&(p.length?l.reject(u,t,i):l.resolve(u)),e.isFunction(n)&&n.call(a,u,t,i)}function s(e){r(e.target,"error"===e.type)}function r(t,n){t.src===i||-1!==e.inArray(t,d)||(d.push(t),n?p.push(t):h.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),c&&l.notifyWith(e(t),[n,u,e(h),e(p)]),u.length===d.length&&(setTimeout(o),u.unbind(".imagesLoaded",s)))}var a=this,l=e.isFunction(e.Deferred)?e.Deferred():0,c=e.isFunction(l.notify),u=a.find("img").add(a.filter("img")),d=[],h=[],p=[];return e.isPlainObject(n)&&e.each(n,function(e,t){"callback"===e?n=t:l&&l[e](t)}),u.length?u.bind("load.imagesLoaded error.imagesLoaded",s).each(function(n,o){var s=o.src,a=e.data(o,"imagesLoaded");a&&a.src===s?r(o,a.isBroken):o.complete&&o.naturalWidth!==t?r(o,0===o.naturalWidth||0===o.naturalHeight):(o.readyState||o.complete)&&(o.src=i,o.src=s)}):o(),l?l.promise(a):a}}(jQuery),_wAMD.define("vendor/jquery.imagesloaded.min",["jquery"],function(){}),_wAMD.define("editor/build/elements/combineUtils",["jquery","../utils","legacy/weebly_utils","legacy/weebly_element_utils","legacy/weebly_area_utils"],function(e,t){var i=function(e,t){this.searchElements=e,this.cssClasses="inside-hover-highlight",t&&(this.cssClasses+=" ",this.cssClasses+=t)};return i.prototype.testPoint=function(t,i){var n=this,o=this.found;this.found=null;var s=5;return this.searchElements.each(function(){var o=e(this),r=o.offset();return o.hasClass("platform-element-child")?!1:t>=r.left+s&&t<=r.left+o.width()-s&&i>=r.top+s&&i<=r.top+o.height()-s?(n.found=o,!1):void 0}),o&&o!==this.found&&o.removeClass(this.cssClasses),this.found&&this.found.addClass(this.cssClasses),this.found},i.prototype.callMethod=function(i,n){this.found.removeClass(this.cssClasses);var o,s=this.found.closest("ul.weebly-content-area"),r=window.getAreaInstanceForElement(s.parent()[0]),a=window.getElementParentString(n);o=!e(".wsite-com-long-description").length||r&&r.name?r&&r.context.pageID?!1:!0:!0,n.hide();var l=e(n).find(".element");l.length&&(window.xhrUploading=l[0].id),window.pushLoading(),Weebly.Editor.RPC.Elements[i](window.currentPage,o,r&&r.name||"",n.id.replace(/[^\d]/g,""),a,this.found[0].id.replace(/[^\d]/g,""),window.getElementParentString(this.found[0])).always(this.constructor.afterRPC),null!==a.match(/-col/)&&t.removeEmptyColumns(),t.renderPage(window.currentPage)},i.afterRPC=function(){window.popLoading(),window.xhrUploading=null},i}),_wAMD.define("editor/build/elements/TextElement",["jquery","./combineUtils","../images/utils","legacy/classes/elements/LegacyElement"],function(e,t,i,n){var o="[value*=\":'",s="'\"]",r=o+i.STANDALONE_IMAGE_ELEMENTS.join(s+","+o)+s,a=window.Class.create(n,{startDrag:function(e,i){this.combiner=new t(i.helper.closest("ul.weebly-content-area").find(r).closest("li"),"wsite-text-combine")},onDrag:function(e,t,i){if(this.combiner&&this.combiner.testPoint(e.pageX,e.pageY)){var n=this.combiner.found.offset();return t.originalPosition.left=n.left,t.originalPosition.top=n.top,"absolute"===t.helper.css("position")?(n=t.helper.offsetParent().offset(),t.originalPosition.left-=n.left,t.originalPosition.top-=n.top):(t.originalPosition.left-=t.offset.left-t.position.left,t.originalPosition.top-=t.offset.top-t.position.top),null}return i},stopDrag:function(e,t){this.combiner&&this.combiner.found&&(t.noDrop=!0,this.isNew===!0?this.combiner.callMethod("replaceWithImageText",this.li):this.combiner.callMethod("combineTextImage",this.li))},afterRender:function($super,t,i){$super(t,i),e(t).addClass("wsite-text")}});a.element_ids=["44785763","4884809","39750678"];for(var l=0;l<a.element_ids.length;l++)Weebly.Element.register(a.element_ids[l],a);return a}),_wAMD.define("editor/build/elements/ImageElement",["jquery","./combineUtils","../images/utils","./TextElement","legacy/classes/elements/LegacyElement"],function(e,t,i,n,o){for(var s="[value*=\":'",r="'\"]",a=s+n.element_ids.join(r+","+s)+r,l=window.Class.create(o,{startDrag:function(e,i){this.combiner=new t(i.helper.closest("ul.weebly-content-area").find(a).closest("li"),"wsite-image-combine")},onDrag:function(e,t,i){if(this.combiner&&this.combiner.testPoint(e.pageX,e.pageY)){var n=this.combiner.found.offset();
t.originalPosition.left=n.left,t.originalPosition.top=n.top;var o=t.helper.find("#weebly_image_extras_helper");o.length||(o=t.helper),"absolute"===o.css("position")?(n=o.offsetParent().offset(),t.originalPosition.left-=n.left,t.originalPosition.top-=n.top):(t.originalPosition.left-=t.offset.left-t.position.left,t.originalPosition.top-=t.offset.top-t.position.top);var s=this.getPropertyResult("<!ALIGN!>");return"right"===s?(this.combiner.found.addClass("wsite-image-combine-right"),t.originalPosition.left+=this.combiner.found.outerWidth()-o.outerWidth()):this.combiner.found.removeClass("wsite-image-combine-right"),null}return i},stopDrag:function(e,t){this.combiner&&this.combiner.found&&(t.noDrop=!0,this.isNew===!0?this.combiner.callMethod("replaceWithImageText",this.li):this.imageText===!0?this.combiner.callMethod("moveImageTextImage",this.li):this.combiner.callMethod("combineImageText",this.li))},afterRender:function($super,t,i){$super(t,i),e(t).addClass("wsite-image")}}),c=0;c<i.STANDALONE_IMAGE_ELEMENTS.length;c++)Weebly.Element.register(i.STANDALONE_IMAGE_ELEMENTS[c],l);return l}),_wAMD.define("editor/build/images/dragging",["jquery","underscore","../utils","../droppable","../ui/marker","../element_dragging","./tooltip","./controls","../elements/ImageElement","./utils","legacy/weebly_main","legacy/weebly_element_options","legacy/weebly_element_utils","legacy/weebly_area_utils","legacy/weebly_utils","jquery-ui/draggable"],function(e,t,i,n,o,s,r,a,l,c){function u(){e(this).closest("li.inside").addClass("wsite-image-move").end().closest("a").removeAttr("title").on("click",!1)}function d(){window.popLoading(),window.xhrUploading=null}var h={},p=1e3,f=.3;return h.init=function(h,m,g,v,b,y,w){function _(e,t,i,n){var o,s=(e.left-i)/(n-M);o=g?.33>s?"left":.66>s?"center":"right":.5>s?"left":"right",I!=o&&v(t.helper,t.helper,o,N),I=o}if(!(h.closest(".platform-element-child").length>0)){var M,C,x,k,S,T,A,D,E,P,R,z,O,F,W,I,N,L,B,H,q=!1;return m.draggable({addClasses:!1,revert:!0,revertDuration:200,create:u,helper:function(){var e=h.find("img").clone().attr("id","weebly_image_extras_helper").css({"z-index":p,margin:0,width:"auto","max-width":""}),t=window.getElementObject(h.closest("li.inside")[0]);return H=g?t:new l({eid:"0",li:t.li,imageText:!0,content_fields:[{ucfid:"0",cfid:"0",properties:[{cfpid:"0",ucfpid:"0",property_result:t.getPropertyResult("<!ALIGN!>"),initial_value_set:"",reference_property:"<!ALIGN!>"}]}]}),h.parent().prepend(e),e},start:function(t,i){var n=e(this);r.disable(),a.disable();var o=h.closest(".element-box"),s=o.offset();M=n.width(),C=n.height(),x=h.outerHeight(),z=t.pageX,O=t.pageY,F=I=y(),W=N=w?w():0,D=s.left,E=s.top,P=o.outerWidth(),R=o.outerHeight();var l=n.offset();T=z-l.left,A=O-l.top;var c=h.offsetParent().offset();k=c.left,S=c.top,L=g?null:h.next(),h.css("opacity",f).addClass("weebly-image-dragging"),Weebly.Elements.unselectElement(),Weebly.Elements.setCurrentElement(h[0]),a.hide(h[0],!0),window.hideElementOptions(),H&&H.startDrag(t,i)},drag:function(e,i){i.noDrop=!0;var n=i.helper.offset(),r=10,a=window.getElementObject(h.closest("li.inside")[0]);if(a.eid!==c.CURRENT_PARAGRAPH_IMAGE_ELEMENT&&-1===c.STANDALONE_IMAGE_ELEMENTS.indexOf(a.eid)||!(n.left<D-r||n.top<E-r||n.left+M>D+P+r||n.top+C>E+R+r)){B=null,o.removeMarker(),i.helper.addClass("inside-hover"),h.css("visibility",""),i.helper.css("opacity",1);var l;g?l=0:(l=W+e.pageY-O,l=Math.min(l,L.outerHeight()-x),l=Math.max(l,0)),_(n,i,D,P),N!==l&&(N=l,v(i.helper,i.helper,I,N)),q&&(s.stopDrag(e,i),q=!1)}else{q||(q=!0,i.helper.removeClass("inside-hover"),s.startDrag(e,i)),h.css("visibility","hidden"),i.helper.css("opacity",f),H&&H.combiner&&H.combiner.found&&(B=null,o.removeMarker(),_(n,i,H.combiner.found.offset().left,H.combiner.found.outerWidth()));var u=t.clone(i);g?u.helper=i.helper.closest("li.inside"):H.getContentField().getProperty("<!ALIGN!>").property_result=a.getPropertyResult("<!ALIGN!>"),u.elementObject=H,s.handleDrag(e,u,function(e){B=e,g&&(i.originalPosition.left+=(u.helper.outerWidth()-i.helper.outerWidth())/2,i.originalPosition.top+=(u.helper.outerHeight()-i.helper.outerHeight())/2)},function(){B=null})}B||H&&H.combiner&&H.combiner.found||(n=h.find("img").offset(),i.originalPosition.top=n.top,i.originalPosition.left=n.left,n=i.helper.parent().offset(),i.originalPosition.top-=n.top,i.originalPosition.left-=n.left)},stop:function(t,l){r.enable(),o.removeMarker();var c,u,p;if(l.noDrop=!0,q&&(s.stopDrag(t,l),q=!1),h.removeClass("weebly-image-dragging").css({opacity:1,visibility:""}),a.enable(),(I!==F||N!==W)&&(window.showElementOptions(),window.positionElementOptions(),b(I,N)),B&&g)n.makeOrMoveElement(e(H.li),B);else if(B){h.hide();var f,m=e(B.el);B.position===n.POSITION_LEFT||B.position===n.POSITION_RIGHT?(f=n.getColumnData(m,e("#available-elements").find('input[value="def:30621876"]').closest("li"),B.position),delete f.list):f={order:n.getElementsInDroppable(B.el).index(B.el)+(B.position===n.POSITION_BOTTOM?2:1),parent:window.getElementParentString(B.el)},c=m.closest("ul.weebly-content-area"),u=window.getAreaInstanceForElement(c.parent()[0]);var v=h.closest(".inside")[0];p=!e(".wsite-com-long-description").length||u&&u.name?u&&u.context.pageID?!1:!0:!0,window.xhrUploading=h[0].id,window.pushLoading(),Weebly.Editor.RPC.Elements.splitImageText(window.currentPage,p,u&&u.name||"",v.id.replace(/[^\d]/g,""),window.getElementParentString(v),f).always(d),i.renderPage(window.currentPage)}else H&&H.combiner&&H.combiner.found&&H.stopDrag(t,l)}}).parent()[0].title="",function(){m.draggable("destroy")}}},h}),_wAMD.define("editor/build/image_extras",["jquery","underscore","editor/app","./utils","./images/resizing","./images/controls","./images/dragging","./images/tooltip","./images/managers","./images/utils","legacy/weebly_main","legacy/weebly_element_utils","legacy/weebly_footer"],function(e,t,i,n,o,s,r,a,l,c){function u(){if(this.idfield){var t=(this.idfield.value||"").match(w);if(t){t=t[1];var i,n;-1!==c.STANDALONE_IMAGE_ELEMENTS.indexOf(t)?(i="div.element",n=d):-1!==c.PARAGRAPH_IMAGE_ELEMENTS.indexOf(t)?(i="span.element",n=h):-1!==c.SIMPLE_IMAGE_ELEMENTS.indexOf(t)&&(i="div.element, span.element",n=p);var o=e(this).parent().find(i);o.length&&!l.get(o[0].id)&&l.set(o[0].id,n(o))}}}function d(e){function t(t){p!==t&&(p=t,m(t,e))}function i(){var t=window.getContentFieldProperty(e[0].id,"<!DATA!>"),i=t?t.property_result:"";return i?JSON.parse(i):void 0}function o(){f(),v.destroy()}var a=e.children().eq(0);a.hasClass("hover-toolbar")&&(a=a.next());var l,c,u,d,h=e.find("img").eq(0),p=a.css("text-align"),f=r.init(e,h,!0,function(e,i,n){t(n)},function(){n.setProperty("<!ALIGN!>",p),Weebly.Elements.saveProperties()},function(){return p}),v=s.init(e,h,function(){return!i()},{getData:i,onStart:function(){l=p},onUpdateStart:function(){var t=e.parent();c=t.offset().left,u=t.width()},onUpdate:function(e,i,n,o){e-=c;var s=u-n;s/3>e?t("left"):2*s/3>e?t("center"):t("right"),h.css({width:n+"px",height:o+"px","max-width":""}),h.parent(".ui-wrapper").css({width:n+2*parseInt(h.css("padding"),10)+2*parseInt(h.css("border-width"),10)+"px",height:o+2*parseInt(h.css("padding"),10)+2*parseInt(h.css("border-width"),10)+"px"})},onUpdateStop:function(e,t,i,n,o){var s=h.offset();s.top+=(parseInt(h.css("border-top-width"),10)||0)+(parseInt(h.css("padding-top"),10)||0),s.top-=133,s.left+=(parseInt(h.css("border-left-width"),10)||0)+(parseInt(h.css("padding-left"),10)||0),o(s.left-e,s.top-t)},onCancel:function(){t(l)},onBeforeSave:function(t,i){d=i;var n;n=i?"":JSON.stringify(t);var o=g(t),s=JSON.stringify(o),r={align:p},a=e[0].id;if(window.setContentFieldProperty(a,"<!ALIGN!>",p),!i){window.setContentFieldProperty(a,"<!BORDER!>","border-width:0"),r.border="border-width:0";var l=window.getContentFieldProperty(a,"<!LINK!>");l&&l.property_result.match("weebly-image-full")&&(window.setContentFieldProperty(a,l.ucfpid,"<a>"),r.remove_link=1,h.closest("a")[0].href="")}return Weebly.Elements.unselectElement(),window.setContentFieldProperty(a,"<!DATA!>",n),window.setContentFieldProperty(a,"<!ATTRIBUTION!>",s),window.setContentFieldAttribution(a,o),window.updateFooterAttribution(),r.attribution=s,r},onAfterSave:function(){d||h.css({"border-style":"none",padding:0})}});return{type:"standalone",showControls:v.show,hideControls:v.hide,destroy:o}}function h(t){function a(e){if(e=Math.round(e),p!==e){p=e;var o,s;b>=e?(o=e,s=0):(o=b,s=e-b),n.setProperty("<!TOP!>",e),t.css("margin-top",o+"px"),m.css("height",s+"px"),i.vent.trigger("editor:elements:changed")}}function l(e){f!==e&&(f=e,m.css("float",e),t.css({"float":e,clear:e}),n.setProperty("<!ALIGN!>",f))}function c(){var e=window.getContentFieldProperty(t[0].id,"<!DATA!>"),i=e?e.property_result:"";return i?JSON.parse(i):void 0}function u(){x(),k.destroy()}var d,h=t.find("img").eq(0),p=0,f=t.css("float"),m=t.prev();t.addClass("no-hovering-element"),m&&m.hasClass("imgPusher")?p=(parseInt(m.css("height"),10)||0)+(parseInt(t.css("margin-top"),10)||0):(m=t.find("span.imgPusher").eq(0),m?(a(parseInt(m.css("top"),10)||0),m.css("top",""),m.remove()):m=e("<span/>").css("float",f),m.css("float",f),t.css("clear",f).before(m));var v,y,w,_,M,C,x=r.init(t,h,!1,function(e,t,i,n){a(n),l(i)},function(){Weebly.Elements.saveProperties()},function(){return f},function(){return p}),k=s.init(t,h,function(){return!c()},{getData:c,onStart:function(){v=p,y=f},onUpdateStart:function(e,i){w=i,_=p;var n=t.parent();M=n.offset().left+n.width()/2,d=t.next()},onUpdate:function(e,i,n,s){a(Math.max(Math.min(_+i-w,d.height()-t.height()),0)),e+n/2>M?l("right"):l("left"),h.css({width:n+"px",height:s+"px"}),h.parent(".ui-wrapper").css({width:n+2*parseInt(h.css("padding"),10)+2*parseInt(h.css("border-width"),10)+"px",height:s+2*parseInt(h.css("padding"),10)+2*parseInt(h.css("border-width"),10)+"px"}),o.updateElementWidth(h)},onUpdateStop:function(e,t,i,n,o){var s=h.offset();s.top+=(parseInt(h.css("border-top-width"),10)||0)+(parseInt(h.css("padding-top"),10)||0),s.top-=133,s.left+=(parseInt(h.css("border-left-width"),10)||0)+(parseInt(h.css("padding-left"),10)||0),o(s.left-e,s.top-t)},onCancel:function(){a(v),l(y)},onBeforeSave:function(e,i){C=i;var n;n=i?"":JSON.stringify(e);var o=g(e),s=JSON.stringify(o),r={top:p,align:f},a=t[0].id;if(window.setContentFieldProperty(a,"<!TOP!>",p),window.setContentFieldProperty(a,"<!ALIGN!>",f),!i){window.setContentFieldProperty(a,"<!BORDER!>","border-width:0"),r.border="border-width:0";var l=window.getContentFieldProperty(a,"<!LINK!>");l&&l.property_result.match("weebly-image-full")&&(window.setContentFieldProperty(a,l.ucfpid,"<a>"),r.remove_link=1,h.closest("a")[0].href="")}return Weebly.Elements.unselectElement(),window.setContentFieldProperty(a,"<!DATA!>",n),window.setContentFieldProperty(a,"<!ATTRIBUTION!>",s),window.setContentFieldAttribution(a,o),window.updateFooterAttribution(),r.attribution=s,r},onAfterSave:function(){C||h.css({"border-style":"none",padding:0})}});return{type:"paragraph",showControls:k.show,hideControls:k.hide,destroy:u}}function p(e){var t=o.init(e,e.find("img").eq(0),f);return{type:"simple",showControls:function(e,i){i||t.show(e)},hideControls:function(e){e||t.hide()},destroy:t.destroy}}function f(){return!0}function m(e,t){var i=t.children().eq(0);i.hasClass("hover-toolbar")&&(i=i.next()),i.css("text-align",e),n.setProperty("<!ALIGN!>",e)}function g(e){for(var t=[],i=0;i<e.sprites.length;i++){var n=e.sprites[i],o=n.pageUrl,s=n.creator;o&&s&&t.push({url:o,author:s})}return t}var v={ImageExtras:{showControls:s.show,hideControls:s.hide,disableControls:s.disable,enableControls:s.enable,initTooltip:a.init,enableTooltips:a.enable,disableTooltips:a.disable,hideTooltips:a.hide}},b=20,y=c.STANDALONE_IMAGE_ELEMENTS.concat(c.PARAGRAPH_IMAGE_ELEMENTS,c.SIMPLE_IMAGE_ELEMENTS),w="eid\\s*:\\s*['\"]("+y.join("|")+")['\"]";return v.ImageExtras.init=function(){a.hide(),s.hideAll(),l.clear(),e("form").each(u)},v.isImageElement=function(e){return e+="",-1!==c.STANDALONE_IMAGE_ELEMENTS.indexOf(e)||-1!==c.PARAGRAPH_IMAGE_ELEMENTS.indexOf(e)||-1!==c.SIMPLE_IMAGE_ELEMENTS.indexOf(e)},v.isStandaloneImageElement=function(e){return e+="",-1!==c.STANDALONE_IMAGE_ELEMENTS.indexOf(e)},v.ImageExtras.reinit=function(t){t=e(t);var i=t[0].id,n=l.get(i);if(n){n.destroy();var o=n.type;"standalone"===o?l.set(i,d(t)):"paragraph"===o?l.set(i,h(t)):"simple"===o&&l.set(i,p(t));var s=t.find("img").eq(0);s.off("click",window.initialImageClick),s.on("click",window.initialImageClick)}},i.vent.on("editor:image:reinit",function(e){v.ImageExtras.reinit(e)}),t.extend(window,v),v}),document.observe("dom:loaded",function(){function e(e){N=e||{},r(),$("image-chooser-wrap").show(),$("swf-uploader").innerHTML=N.multipleFiles?_W.tl("Upload photos from your computer"):_W.tl("Upload a photo from your computer"),s(),J.select("computer"),R(),z()}function t(){i(),hideFlashContainer(),$("image-chooser-wrap").hide()}function i(){L&&(L(),L=null)}function n(e,i,n){var o=n||N;o.onChoose&&o.onChoose(e,i),o===N&&t()}function o(e){U=!0,Y=!0,$("image-chooser-tab-purchases").show(),N.onChoose&&N.onChoose(e),t()}function s(){var e=.8*getInnerHeight();e=Math.max(e,400),e=Math.min(e,650),$("image-chooser").style.height=e+"px";var t=$("image-chooser-container");600>e?t.addClassName("no-image"):t.removeClassName("no-image")}function r(){var e=N.disableStockMedia;e||!anyStockMediaPurchases?$("image-chooser-tab-purchases").hide():$("image-chooser-tab-purchases").show(),e||K?$("image-chooser-search-tab-paid").hide():$("image-chooser-search-tab-paid").show(),e||Q?$("image-chooser-search-tab-free").hide():$("image-chooser-search-tab-free").show(),e||K&&Q?($("image-chooser-tab-search").hide(),$("image-chooser-tab-favorites").hide()):($("image-chooser-tab-search").show(),$("image-chooser-tab-favorites").show())}function a(){var e=tt.value;e&&(it=e,$("image-chooser-search-intro").addClassName("image-chooser-search-intro-loading"),(K?u:c)(it,1,function(){Z=!1,K?(ot=!1,dt.select("free")):(nt=!1,dt.select("paid")),$("image-chooser-search-intro").hide(),$("image-chooser-search-real").show(),ct.value=it}))}function l(){var e=ct.value;e&&(it=e,nt=!0,ot=!0,dt.unselect(),K?dt.select("free"):dt.select("paid"))}function c(e,t,i){t=t||1,at.innerHTML="",at.addClassName("image-chooser-loading"),A(e,t,function(n,o){if(e==it){if(at.removeClassName("image-chooser-loading"),n.length){var s="";s+="<div class='image-chooser-results'>",s+="<table><tr>";for(var r=0;r<n.length;r++)r&&0==r%V&&(s+="</tr><tr>"),s+="<td>",s+="<div class='image-chooser-result-wrap1'>",s+="<span class='image-chooser-result-wrap2'>",s+="<span class='image-chooser-result-cover'></span>",s+="<img src='"+n[r].preview+"' />",s+="</span>",s+="</div>",s+="</td>";for(;r%V;)s+="<td>&nbsp;</td>",r++;s+="</tr></table>",s+="</div>",at.innerHTML=s,at.select("img").each(function(e,t){v(e,n[t],!0,!0,!!n[t].purchase_id)})}else at.innerHTML="<div class='image-chooser-no-results'>"+_W.tl("No photos found for this search. <a>Explore free photos &raquo;</a>")+"</div>",at.select("a")[0].observe("click",function(){dt.select("free")});f(t,o),i&&i()}})}function u(e,t,i){t=t||1,lt.innerHTML="",lt.addClassName("image-chooser-loading"),C(e,t,function(n,o){if(e==it){if(lt.removeClassName("image-chooser-loading"),n.length){var s="";s+="<div class='image-chooser-results'>",s+="<table><tr>";for(var r=0;r<n.length;r++)r&&0==r%V&&(s+="</tr><tr>"),s+="<td>",s+="<div class='image-chooser-result-wrap1'>",s+="<span class='image-chooser-result-wrap2'>",s+="<span class='image-chooser-result-cover'></span>",s+="<img src='"+x(n[r],"m")+"' />",s+="</span>",s+="</div>",s+="</td>";for(;r%V;)s+="<td>&nbsp;</td>",r++;s+="</tr></table>",s+="</div>",lt.innerHTML=s,lt.select("img").each(function(e,t){v(e,n[t],!0,!1)})}else lt.innerHTML="<div class='image-chooser-no-results'>"+_W.tl("No photos found for this search. <a>Explore professional photos &raquo;</a>")+"</div>",lt.select("a")[0].observe("click",function(){dt.select("paid")});m(t,o),i&&i()}})}function d(e){G.innerHTML="",G.addClassName("image-chooser-loading"),D(function(t){if(G.removeClassName("image-chooser-loading"),t.length){var i="";i+="<div class='image-chooser-results'>",i+="<table><tr>";for(var n=0;n<t.length;n++)n&&0==n%V&&(i+="</tr><tr>"),i+="<td>",i+="<div class='image-chooser-result-wrap1'>",i+="<span class='image-chooser-result-wrap2'>",i+="<span class='image-chooser-result-cover'></span>",i+="<img src='"+t[n].preview+"' />",i+="</span>",i+="</div>",i+="</td>";for(;n%V;)i+="<td>&nbsp;</td>",n++;i+="</tr></table>",i+="</div>",G.innerHTML=i,G.select("img").each(function(e,i){v(e,t[i],!1,!0,!0)})}else;e&&e()})}function h(e){X.innerHTML="",X.addClassName("image-chooser-loading"),E(function(t){p(t),e&&e()})}function p(e){if(X.removeClassName("image-chooser-loading"),e.length){var t="";t+="<div class='image-chooser-results'>",t+="<table><tr>";for(var i=0;i<e.length;i++)i&&0==i%V&&(t+="</tr><tr>"),t+="<td>",t+="<div class='image-chooser-result-wrap1'>",t+="<span class='image-chooser-result-wrap2'>",t+="<span class='image-chooser-result-cover'></span>",t+="<img src='"+e[i].preview+"' />",t+="<span class='image-chooser-fav-close' title='"+_.escape(_W.tl("Remove from Favorites"))+"'></span>",t+="<span class='image-chooser-fav-money' title='"+_.escape(_W.tl("Buy this image for %d").replace(/%d/,H))+"' "+("Flickr"==e[i].vendor||e[i].purchase_id?"style='display:none'":"")+"></span>",t+="</span>",t+="</div>",t+="</td>";for(;i%V;)t+="<td>&nbsp;</td>",i++;t+="</tr></table>",t+="</div>",X.innerHTML=t,X.select("img").each(function(t,i){v(t,e[i],!1,"Flickr"!=e[i].vendor,!!e[i].purchase_id)}),X.select("span.image-chooser-fav-close").each(function(t,i){t.observe("click",function(){new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"unfavoriteimage",vendor:e[i].vendor,vendor_media_id:e[i].vendor_media_id,token:Weebly.RequestToken}}),e.splice(i,1),p(e)})}),X.select("span.image-chooser-fav-money").each(function(t,i){t.observe("click",function(){w(e[i],!1)})})}else X.innerHTML="<div class='image-chooser-no-results'>"+_W.tl("You haven't favorited any images yet.")+"</div>"}function f(e,t){g(e,t,$("image-chooser-paid-pagination"),c)}function m(e,t){g(e,t,$("image-chooser-free-pagination"),u)}function g(e,t,i,n){i.update(),e>1&&i.insert(new Element("a",{"class":"image-chooser-prev"}).update("Prev").observe("click",function(){n(it,e-1)})),t=Math.min(50,t);var o=Math.max(1,e-2),s=Math.min(t,o+4);o=Math.max(1,s-4);var r,a;2==o?(o--,r=!1):r=o>2,s==t-1?(s++,a=!1):a=t-1>s,r&&i.insert(new Element("a").update("1 ...").observe("click",function(){n(it,1)}));for(var l=o;s>=l;l++)!function(t){i.insert(new Element(t==e?"b":"a").update(t).observe("click",function(){n(it,t)}))}(l);a&&i.insert(new Element("a").update("... "+t).observe("click",function(){n(it,t)})),t>e&&i.insert(new Element("a",{"class":"image-chooser-next"}).update("Next").observe("click",function(){n(it,e+1)}))}function v(e,t,n,o,s){function r(){a.hide(),c=!1}var a,l=e.previous(),c=!1,u=0;t.id=t.id||t.vendor_media_id,l.observe("mousemove",function(l){if(!c&&(!B||+new Date>=+B+500)){if(c=!0,i(),a)a.show();else{a=new Element("div",{"class":"image-chooser-showcase"}).update("<table class='image-chooser-showcase-layout'><tr><td colspan='2' class='image-chooser-image-cell'><span class='image-chooser-showcase-inner'><span class='image-chooser-showcase-cover'></span><img src='"+(t.preview||x(t,"m"))+"' oncontextmenu='return false'>"+"</span>"+"</td>"+"</tr>"+"<tr>"+"<td>"+(n?"<a class='favorite-button gray-button-25'><span class='bi'>"+_W.tl("Add to Favorites")+"</span></a>":"")+(s&&!n?"<a class='download-link' href='/weebly/downloadStockMedia.php?vendor=GettyImages&vendor_media_id="+t.id+"'>download</a>":"")+"</td>"+"<td>"+(!o||s?"<a class='purchase-button blue-button-25'><span class='bi'>"+_W.tl("Select")+"</span></a>":"<a class='purchase-button green-button-25'><span class='bi'>Buy for "+H+"</span></a>")+"</td>"+"</tr>"+"</table>"+"<div class='image-chooser-showcase-bg'></div>").observe("mouseover",function(){u++}).observe("mouseout",function(){u=0,setTimeout(function(){u||r()},0)}).observe("mousemove",function(e){e.stopPropagation()}).observe("DOMMouseScroll",b).observe("mousewheel",b),$("image-chooser-content").insert(a),n&&a.select("a.favorite-button")[0].observe("click",function(){this.addClassName("favorite-button-disabled"),this.down().update(_W.tl("Added to Favorites")),o?P("GettyImages",t.id,t.preview):P("Flickr",t.id,x(t,"m")),y()}),a.select("a.purchase-button")[0].observe("click",function(){o?w(t,s):M(t)});var d=a.select("span.image-chooser-showcase-cover")[0];d.style.cursor="pointer",d.observe("click",function(){o?w(t,s):M(t)})}L=r;var h=I(e),p=I($("image-chooser-content")),f=e.up(".image-chooser-results").up(),m=I(f),g=m.top-p.top,v=g+f.offsetHeight-a.offsetHeight;a.style.top=Math.min(v,Math.max(g,h.top-p.top+e.offsetHeight/2-a.offsetHeight/2+20))+"px",a.style.left=h.left-p.left+e.offsetWidth/2-a.offsetWidth/2+"px"}l.stopPropagation()})}function b(e){var t;X.offsetWidth?t=X:lt.offsetWidth?t=lt:G.offsetWidth?t=G:X.offsetWidth?t=X:at.offsetWidth&&(t=at),t&&(t.scrollTop+=-50*Event.wheel(e)),i(),B=new Date}function y(){var e=new Element("div",{"class":"image-chooser-tooltip"}).update("<div class='image-chooser-tooltip-arrow'></div><div class='image-chooser-tooltip-content'>Added to Favorites</div>");$(document.body).insert(e);var t=$("image-chooser-tab-favorites"),i=t.cumulativeOffset(),n=i.top+t.offsetHeight,o=i.left+t.offsetWidth/2-e.offsetWidth/2+6;e.style.top=getInnerHeight()+"px",e.style.left=o+"px",new Effect.Move(e,{x:o,y:n,mode:"absolute",transition:Effect.Transitions.Bounce}),setTimeout(function(){e.fade({afterFinish:function(){e.remove()}})},2e3)}function w(e,t){var i;t||(i=showUpdateBillingScreen("","","","stockmedia","","","vendor=GettyImages&vendor_media_id="+(e.id||e.vendor_media_id)+(N.ucfid?"&ucfid="+N.ucfid:"")+(N.ucfpid?"&ucfpid="+N.ucfpid:"")+(N.width?"&width="+N.width:"")+(N.height?"&height="+N.height:"")+(N.area_page_id?"&area_page_id="+N.area_page_id:"")+(N.area_type?"&area_type="+N.area_type:"")+(N.area_name?"&area_name="+N.area_name:"")+"&preview="+encodeURIComponent(e.preview))),new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"getstockimage",id:e.id||e.vendor_media_id,preview:e.preview,ucfid:N.ucfid||"",ucfpid:N.ucfpid||"",width:N.width||"",height:N.height||"",area_page_id:N.area_page_id||"",area_type:N.area_type||"",area_name:N.area_name||"",type:N.type||"",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){var t=e.responseText.evalJSON();t&&(i&&i.close(),n(t))}})}function M(e){startWait(),t(),S(e,{width:700,height:500},function(t){k(e,function(i){var o=T(e,i),s=i.username;new Ajax.Request("/weebly/getElements.php",{bgProcess:!0,parameters:{pos:"downloadimage",url:t,attribution_url:o,attribution_author:s,ucfid:N.ucfid||"",ucfpid:N.ucfpid||"",width:N.width||"",height:N.height||"",area_page_id:N.area_page_id||"",area_type:N.area_type||"",area_name:N.area_name||"",type:N.type||"",height:N.height,token:Weebly.RequestToken},onSuccess:function(e){var t=e.responseText.strip();t=t&&jQuery.parseJSON(t),t&&"%%ERROR%%"!==t?(t.attributionUrl=o,t.attributionAuthor=s,n(t)):alert(_W.tl("There was a problem downloading the file.")),endWait()}})})})}function C(e,t,i){new Ajax.JSONRequest("https://api.flickr.com/services/rest/",{callbackParamName:"jsoncallback",parameters:{api_key:q,format:"json",method:"flickr.photos.search",tags:e,sort:"relevance",extras:"original_secret,original_format",license:"4,6,5",per_page:80,page:t||1},onSuccess:function(e){var t=e.responseJSON.photos;i(t.photo,t.pages)}})}function x(e,t){if("o"==t){if(e.originalsecret&&e.originalformat)return"http://farm"+e.farm+".static.flickr.com/"+e.server+"/"+e.id+"_"+e.originalsecret+"_o."+e.originalformat;t=""}return"http://farm"+e.farm+".static.flickr.com/"+e.server+"/"+e.id+"_"+e.secret+(t?"_"+t:"")+".jpg"}function k(e,t){e.owner?new Ajax.JSONRequest("https://api.flickr.com/services/rest/",{callbackParamName:"jsoncallback",parameters:{api_key:q,format:"json",method:"flickr.people.getInfo",user_id:e.owner},onSuccess:function(i){var n=i.responseJSON.person;t({id:e.owner,username:n.username?n.username._content:"",realname:n.realname?n.realname._content:""})}}):new Ajax.JSONRequest("https://api.flickr.com/services/rest/",{callbackParamName:"jsoncallback",parameters:{api_key:q,format:"json",method:"flickr.photos.getInfo",photo_id:e.id||e.vendor_media_id},onSuccess:function(e){var i=e.responseJSON.photo.owner;t({id:i.nsid,username:i.username,realname:i.realname})}})}function S(e,t,i){new Ajax.JSONRequest("https://api.flickr.com/services/rest/",{callbackParamName:"jsoncallback",parameters:{api_key:q,format:"json",method:"flickr.photos.getSizes",photo_id:e.id||e.vendor_media_id},onSuccess:function(e){for(var n,o=e.responseJSON.sizes.size,s=0;s<o.length&&(n=o[s],!(parseInt(o[s].width)>=t.width&&parseInt(o[s].height)>=t.height));s++);i(n.source)}})}function T(e,t){return"http://www.flickr.com/photos/"+t.id+"/"+e.id}function A(e,t,i){new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"searchstockimages",q:e,count:j,offset:(t-1)*j,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(e){var t=e.responseText.evalJSON();i(t.photos,Math.ceil(t.total/j))},bgRequest:!0})}function D(e){new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"purchasedstockimages",cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(t){var i=t.responseText.evalJSON();e(i)},bgRequest:!0})}function E(e){new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"getfavoriteimages",token:Weebly.RequestToken},onSuccess:function(t){e(t.responseText.evalJSON())},bgRequest:!0})}function P(e,t,i){Y=!0,new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"favoriteimage",vendor:e,vendor_media_id:t,preview:i,token:Weebly.RequestToken}})}function R(){if(!isFlashInstalled()&&!Modernizr.touch){var e=jQuery("#swf-uploader");e.data("init")||e.on("click",function(){showFlashWarning(_W.tl("Adobe Flash Player is required in order to upload files."))}).data("init",!0)}var t=N;setupFileUploader({el:$("swf-uploader"),zIndex:9999,type:N.type,size:N.width,ucfid:N.ucfid,ucfpid:N.ucfpid,successCallback:function(e,i,n){O(e,i,n,t)},areaPageID:N.area_page_id,areaType:N.area_type,areaName:N.area_name,height:N.height,multipleFiles:N.multipleFiles})}function z(){if(dndEnabled){document.getElementById("image-chooser-container");var e=N;Weebly.DragAndDrop.setParameters({ucfid:N.ucfid||"",ucfpid:N.ucfpid||"",type:N.type||"",successCallback:function(t,i,n){O(t,i,n,e)},areaName:N.area_name||"",areaPageID:N.area_page_id||"",areaType:N.area_type||"",height:N.height||"",size:N.width||"",multipleFiles:N.multipleFiles})}}function O(e,t,i,o){t=t.strip(),t&&(t="{"==t.charAt(0)?jQuery.parseJSON(t):{url:t}),n(t,i,o)}function F(){var e=pt.value;e.match(/\.(jpeg|jpg|gif|png)$/i)?new Ajax.Request("/weebly/getElements.php",{parameters:{pos:"downloadimage",url:e,ucfid:N.ucfid,ucfpid:N.ucfpid,width:N.width||"",height:N.height||"",area_page_id:N.area_page_id||"",area_type:N.area_type||"",area_name:N.area_name||"",height:N.height||"",type:N.type||"",token:Weebly.RequestToken},onSuccess:function(e){var i=e.responseText.strip();i=i&&jQuery.parseJSON(i),i&&"%%ERROR%%"!==i?(n(i),t(),pt.value=""):alert(_W.tl("There was a problem downloading the file."))}}):alert("File must be a JPEG, GIF, or PNG.")}function W(e,t){function i(e){jQuery("#"+e).hide(),jQuery("#"+e).css("visibility","hidden")}function n(e){jQuery("#"+e).show(),jQuery("#"+e).css("visibility","visible")}function o(e){if(e!=s){if(e&&(n(l+e),$(c+e).addClassName(u)),s){for(var t=h[s]||[],o=0;o<t.length;o++)t[o]();i(l+s),$(c+s).removeClassName(u)}if(e){t=d[e]||[];for(var o=0;o<t.length;o++)t[o]()}s=e}}t=t||{};var s,r=this,a=t.prefix||"",l=t.contentPrefix||a,c=t.tabPrefix||a+"tab-",u=t.selectedClass||a+"tab-selected",d={},h={};r.select=o,r.unselect=function(){o()},e.each(function(e){$(l+e).hide(),$(c+e).observe("click",function(){o(e)})}),r.observeSelect=function(e,t){var i=d[e]||[];i.push(t),d[e]=i},r.observeUnselect=function(e,t){var i=h[e]||[];i.push(t),h[e]=i}}function I(e){if(e.getBoundingClientRect&&"BODY"!=e.nodeName&&"HTML"!=e.nodeName){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,o=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,r=window.pageYOffset||n.scrollTop||i.scrollTop,a=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=t.top+r-o,c=t.left+a-s,u=[c,l];return u.left=c,u.top=l,u}return $(e).cumulativeOffset()}window.chooseImage=e,window.stopChoosingImage=t,window.stockMediaPurchased=o;var N,L,B,H="$5",q="b8be8e2e0748545e1a9e5da446f4b9fc",V=4,j=60,U=!0,Y=!0,G=$("image-chooser-purchases"),X=$("image-chooser-favorites"),J=new W(["computer","search","purchases","favorites","url"],{prefix:"image-chooser-"}),K=window.disableStockImageSearch||!1,Q=window.disableFlickrSearch||!1;$("image-chooser-close").observe("click",function(){t()}),J.observeSelect("computer",function(){R(),z()}),J.observeSelect("search",function(){Z?tt.focus():ct.focus()}),J.observeSelect("url",function(){pt.focus()}),J.observeSelect("purchases",function(){U&&(U=!1,d())}),J.observeSelect("favorites",function(){Y&&(Y=!1,h())}),Element.observe(window,"resize",function(){s()});var Z=!0,et=$$("#image-chooser-search-intro form")[0],tt=et.select("input")[0];et.observe("submit",function(e){a(),e.stop()}),et.select("a")[0].observe("click",function(){a()}),$("image-chooser-search-real").hide();var it,nt=!0,ot=!0,st=0,rt=0,at=$("image-chooser-search-paid").down(),lt=$("image-chooser-search-free").down(),ct=$$("#image-chooser-search-box input")[0],ut=$$("#image-chooser-search-box form")[0],dt=new W(["free","paid"],{prefix:"image-chooser-search-"});dt.observeSelect("paid",function(){nt?(nt=!1,c(it)):at.scrollTop=st}),dt.observeUnselect("paid",function(){st=at.scrollTop}),dt.observeSelect("free",function(){ot?(ot=!1,u(it)):lt.scrollTop=rt}),dt.observeUnselect("free",function(){rt=lt.scrollTop}),ut.observe("submit",function(e){l(),e.stop()}),ut.select("a")[0].observe("click",function(){l()}),$(document.body).observe("mousemove",function(){i()});var ht=$$("#image-chooser-url form")[0],pt=ht.select("input.text")[0],ft=ht.select("a")[0];ht.observe("submit",function(e){F(),e.stop()}),ft.observe("click",function(){F()}),Object.extend(Event,{wheel:function(e){var t=0;return e||(e=window.event),e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail/3),Math.round(t)}})}),_wAMD.define("legacy/weebly_image_chooser",["legacy/weebly_init_dnd"],function(){}),_wAMD.define("legacy/weebly_he_dialog",function(){}),_wAMD.define("legacy/weebly_element_set",function(){}),Weebly=Weebly||{},Weebly.mobile_navigation=function(e){var t,i,n,o,s,r="SLIDE_RIGHT",a="SLIDE_DOWN",l="SLIDE_STATIC",c=60,u=!1,d=!1,h=!1,p=null,f=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?!0:!1,s="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,h=!1,m=0,g=l,v=function(e,t,i,n){i||(i=500),e.css({webkitTransitionDuration:i+"ms",webkitTransitionProperty:t,webkitTransitionTimingFunction:"linear"});var o=function(){e.off("webkitTransitionEnd",o),e.css({webkitTransitionDuration:"",webkitTransitionProperty:"",webkitTransitionTimingFunction:""}),n()};e.on("webkitTransitionEnd",o)},b=function(e,t,i,n,o){n||(n=500),s?(e.css({webkitTransitionDuration:"0ms"}),e.css(t),setTimeout(function(){v(e,"all",n,o);var t={};for(property in i)i.hasOwnProperty(property)&&(t[property]=i[property]);e.css(t)},0)):(i.avoidCSSTransitions=!0,e.animate(i,{duration:n,complete:o}))},y=function(){var i,n,l,p,v=t.outerHeight();if(!d){u=!u,d=!0,u&&o.addClass("menu-open");var w=function(){d=!1,u||o.removeClass("menu-open")};if(g===a)u?(i=-v-10,n=0):(i=0,n=-v-10),l={"-webkit-transform":"translate3d( 0px, "+i+"px, 0)"},p={"-webkit-transform":"translate3d( 0px, "+n+"px, 0)"},s||(l={top:m+i+"px"},p={top:m+n+"px"}),b(t,l,p,300,w);else if(g===r){var _=e("#wsite-page-wrapper");w=function(){if(d=!1,u?_.one("click",x):(o.removeClass("menu-open"),t.hide(),o.css("overflow-x","visible"),e("#wsite-viewport").css({overflow:"visible",height:""}),_.css({background:"none",height:""}),_.css({height:""})),C(),!u){var i=Weebly.mobile?e("#w-fixed-bg"):e(".wsite-background");
i.show()}};var x=function(e){u&&(y(),e.stopImmediatePropagation(),e.preventDefault(),_.off("click",x))},k=0;if(u){i="0%",n="80%";var S=Weebly.mobile?e("#w-fixed-bg"):e(".wsite-background");0===S.length&&(S=o);var T=f?c:0,A=e("#w-mobile-phone-screen");A=A.length>0?A:e(window),_.css({"background-color":S.css("background-color")||"white","background-image":S.css("background-image"),"background-position":S.css("background-position"),"background-size":S.css("background-size"),"background-repeat":S.css("background-repeat"),"background-clip":S.css("background-clip"),height:Math.max(S.height(),A.height()+T)+"px"}),S.css("background-image").length>0&&s&&h&&(k=260),S!==o&&S.hide(),o.css({"overflow-x":"hidden"}),setTimeout(function(){t.show()},k)}else i="80%",n="0%";l={"-webkit-transform":"translate3d("+i+", 0px, 0)"},p={"-webkit-transform":"translate3d("+n+", 0px, 0)"},s||(l={left:i},p={left:n}),setTimeout(function(){b(_,l,p,300,w)},k)}M()}},w=function(t,i,o){var r=e(".wsite-animation-wrap",n),a=o?1:-1;if(!d){d=!0;var l=Math.max(i.outerHeight(),t.outerHeight());n.css({height:l+"px"}),C();var c=n.width(),u=-a*c+"px",h={"-webkit-transform":"translate3d( 0, 0px, 0)"},p={"-webkit-transform":"translate3d("+u+", 0px, 0)"};s?i.css({"-webkit-transform":"translate3d("+a*c+"px, 0px, 0)"}):(i.css({left:a*c+"px"}),h={left:0},p={left:u}),i.show();var f=function(){t.hide();var e=i.outerHeight();n.css({height:e+"px"}),r.css(h),i.css(h),d=!1,C()};b(r,h,p,300,f)}},_=function(t,i){t.on("touchstart",i,function(){e(this).addClass("active")}),t.on("touchend",i,function(){e(this).removeClass("active")})},M=function(){var i=e("#w-mobile-phone-screen"),n=f?c:0;if(i=i.length>0?i:e(window),g==r&&u){t.height("auto");var o=Math.max(i.height()+n,t.outerHeight());e("#wsite-viewport").css({height:o+"px"}),e("#wsite-viewport").css({overflow:"visible"}),setTimeout(function(){e("#wsite-viewport").css({overflow:"hidden"})},150),t.height()<o&&t.css("height",o+"px"),e("#wsite-page-wrapper").css("height",o+"px")}if(!Weebly.mobile){var s=i.height()+n;e(".wsite-background").css({height:s+"px"})}},C=function(){var t=f?e("#w-mobile-phone-screen").height()+c:e("#w-mobile-phone-screen").height(),i=e(".wsite-mobile-footer");x(),M(),i.css({top:"0px"});var n=i.position();n&&(t-=n.top,t-=i.outerHeight(!0),t>0&&i.css({position:"relative",top:t+"px"}))},x=function(){if(n){var e=n.find(".wsite-menu-slide:visible").outerHeight();if(e>0&&n.css({height:e+"px"}),g===a){var i,o=t.outerHeight();i=u?0:-o-10,s?t.css({"-webkit-transform":"translate3d( 0px, "+i+"px, 0)","-webkit-backface-visibility":"hidden"}):t.css({top:m+i+"px"})}}},k=function(){o=e("body"),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(o.removeClass("no-touch"),o.addClass("touch"),h=!0)},S=function(){var e=o.css("background-attachment").indexOf("fixed")>-1||o.css("position").indexOf("fixed")>-1;if(!Weebly.mobile&&e){o.prepend('<div class="wsite-background"></div>');var t=o.find(".wsite-background");t.css({"background-color":o.css("background-color")||"rgba(0,0,0,0)","background-image":o.css("background-image"),"background-position":o.css("background-position"),"background-size":o.css("background-size"),"background-repeat":o.css("background-repeat"),"background-clip":o.css("background-clip"),position:"fixed",top:o.css("top"),left:o.css("left"),height:"100%",width:"100%"}),o.css("background","none")}},T=function(){var r,a,l=e(".wsite-menu-wrap");i=e(".wsite-menu-button"),r=e(".wsite-menu-default"),r.wrap('<div class="wsite-mobile-menu" />'),n=r.up(".wsite-mobile-menu"),t=r.up(".wsite-menu-wrapper"),t=t.length>0?t:n,u=!1,d=!1,Weebly.mobile||i.on("click",y);var c={position:"absolute",top:"0",left:"0",width:"100%"};r.addClass("wsite-menu-slide").css(c),l.addClass("wsite-menu-slide").css(c),r.css({left:"0"}),s&&r.css({"-webkit-transform":"translate3d( 0, 0px, 0)"}),n.append('<div class="wsite-animation-wrap"></div>'),a=e(".wsite-animation-wrap",n),a.css({position:"relative"}),s&&a.css({"-webkit-backface-visibility":"hidden"}),a.append(r),l.each(function(){var t=e(this),i=t.prev(),n=t.children("ul"),o=t.parents(".wsite-menu-slide"),r=e('<li class="wsite-menu-back-item"><a><span class="wsite-menu-mobile-arrow"></span><span class="wsite-menu-back">Back</span></a></li>');r.on("click",function(){w(t,o,!1)});var l=i.clone(),c=e('<li class="wsite-menu-master-item"></li>').html(l);n.prepend(c),n.prepend(r),i.removeAttr("href").removeAttr("onclick"),i.append('<span class="wsite-menu-mobile-arrow"></span>'),i.on("click",function(){w(o,t,!0)}),t.css({left:"0"}),s&&t.css({"-webkit-transform":"translate3d( 0, 0px, 0)"}),a.append(t)}),n.css({display:"block"}),t.css({display:"block"}),x(),o.hasClass("wsite-menu-dropdown")?D():o.hasClass("wsite-menu-slideright")&&A(),h&&(_(e(".wsite-home-link")),_(i),_(n,"a"))},A=function(){g=r;var i=o.contents();o.prepend('<div id="wsite-viewport" ><div id="wsite-page-wrapper" /></div>');for(var n=e("#wsite-page-wrapper"),a=0;a<i.length;a++){var l=i[a];"header"==e(l).attr("id")&&n[0].appendChild(l)}n.css({position:"relative",background:"none","z-index":"3",left:"0",top:"0"}),s&&n.css({"-webkit-backface-visibility":"hidden","-webkit-transform":"translateZ(0)","-webkit-transform":"translate3d( 0, 0, 0)"}),n.height(),t.css({top:"0",left:"0","min-height":"100%",width:"80%",position:"absolute"}),t.hide(),o.find("#wsite-viewport").css({height:"",width:"100%"}).append(t)},D=function(){g=a,t.css({position:"absolute",width:"100%","z-index":6});var e=t.position();m=e?e.top:0;var i=-t.outerHeight()-10;s?t.css({"-webkit-transform":"translate3d( 0px, "+i+"px, 0)","-webkit-backface-visibility":"hidden"}):t.css({top:m+i+"px"})},E=function(){var t=e(".wmap-container");t.find("iframe").css({height:p+"px"}),p=null},P=function(){u&&y(null)},R=function(){return u},z=function(){o=e("#icontent"),o=o.length>0?o:e("body"),o.hasClass("wsite-render3d")||(s=!1),T(),whenThemeCSSLoaded(S)};return Weebly.mobile||e(window).on("message",function(e){e.origin&&-1!==e.origin.indexOf("weebly.com")&&(p=e.data,document.loaded&&E())}),e(function(){Weebly.EDITOR!==!0&&(k(),z(),window.FastClick&&(FastClick.attach(e(".wsite-menu-button")[0]),FastClick.attach(e(".wsite-mobile-menu")[0])),null!==p&&E(),e(window).on("resize",C),C(),window.scroll(0,1),e(window).load(C))}),Weebly.mobile&&(C=Weebly.mobile.resizeScreen),{init:z,closeMenu:P,resizeScreen:C,resizeMenu:x,menuTap:y,isMenuOpen:R}}(Weebly.jQuery),_wAMD.define("legacy/mobile_navigation",["editor/build/themes/rendering","legacy/weebly_mobile"],function(){}),function(e){function t(){n&&n.close()}var i,n,o,s;e.chooseColor=function(e){i=e||{},n||(o=new Element("div",{"class":"heColorChooser"}),s=new Weebly.ColorChooser(o,{closeOnClick:!1,onUpdate:function(e){i.onUpdate&&i.onUpdate(e),i.resultElement&&(i.resultElement.style.backgroundColor=e),t()}}),s.draw(),n=new HeDialog(o,{buttons:{close:"Close"},onClose:function(){n.close()}})),n.open(i.clickElement)},e.stopChoosingColor=t}(window),_wAMD.define("imageperfect/color_chooser",function(){}),function(e){e.GradientChooser=function(e,t){function i(e,t,i){var r=new Element("li").update("<a><span class='heColorBox' style='background-color:"+e+"'></span>"+(t?"<span class='heColorRemove'>remove</span>":"")+"</a>");t&&r.select("span.heColorRemove")[0].observe("click",function(e){r.remove(),s.refresh(),s.first(),n(),e.stop()}),o.insert(r),i||(s.setSelected(r),s.refresh(),n())}function n(){if(t.onUpdate){var e=[];o.select("span.heColorBox").each(function(t){var i=t.style.backgroundColor;i.match("rgb")&&(i=Weebly.ColorChooser.prototype.rgbToHex(i)),e.push(i)}),t.onUpdate(e,u)}}e=$(e),t=t||{};var o,s,r,a,l,c,u;this.draw=function(){e.addClassName("heGradientChooser").insert("<div class='heGradientColors'><ul class='heGradientColorsList'></ul><button class='heGradientAdd'>add color</button></div><div class='heGradientColorChooser heColorChooser'></div><div class='heGradientAngle'>Direction:<table class='heDirections heGradientAngles'><tr><td class='heNW heAngle45'></td><td class='heN heAngle90'></td><td class='heNE heAngle135'></td></tr><tr><td class='heW heAngle0'></td><th class='heC'></th><td class='heE heAngle180'></td></tr><tr><td class='heSW heAngle315'></td><td class='heS heAngle270'></td><td class='heSE heAngle225'></td></tr></table></div><div style='clear:both'></div>"),o=e.select("ul.heGradientColorsList")[0],s=new ElementSet(o,{onUpdate:function(e){var t=e.select("span.heColorBox")[0];t&&c.updateValue(t.style.backgroundColor)}}),l=e.select("button.heGradientAdd")[0],l.observe("click",function(){i("#ff0000",!0)}),r=e.select("table.heGradientAngles")[0],a=new ElementSet(r,{itemSelector:"td",selectedClass:"hePressed",onUpdate:function(e){var t=e.className.match(/heAngle(\d+)/);t&&(u=parseInt(t[1]),a&&n())}}),c=new Weebly.ColorChooser(e.select("div.heGradientColorChooser")[0],{closeOnClick:!1,onUpdate:function(e){s.getSelected().select("span.heColorBox")[0].style.backgroundColor=e,c&&n()}}),c.draw()},this.setColors=function(e){o.update(),e.each(function(e,t){i(e,t>=2,!0)}),s.refresh(),s.first(),c.updateValue(e[0],!0)},this.setAngle=function(e){u=e,a.setSelected(r.select("td.heAngle"+e)[0])}}}(window),_wAMD.define("imageperfect/gradient_chooser",function(){}),_wAMD.define("imageperfect/pattern_chooser",function(){}),function(e,t){function i(){r&&r.close()}function n(){p||(p=new Weebly.ColorChooser(h,{closeOnClick:!1,onUpdate:function(e){w=e,b.onColorUpdate&&b.onColorUpdate(w),T&&i()}}),p.draw(),h.insert({top:"<div class='weebly-color-chooser-transparent'<div><span></span> transparent</div><div style='clear:both'></div></div>"}),h.select("div.weebly-color-chooser-transparent span")[0].observe("click",function(){w="",b.onColorUpdate&&b.onColorUpdate(w),T&&i()}));var e=h.select("div.weebly-color-chooser-transparent")[0];b.allowTransparent?e.show():e.hide(),T=!1,p.updateValue(w),T=!0,l.setSelected(c),h.show(),f.hide(),g.hide()}function o(){"gradient"!==y&&(y="gradient",_===t&&(_=x),M===t&&(M=k),b.onGradientUpdate&&b.onGradientUpdate(_,M)),m||(m=new GradientChooser(f,{onUpdate:function(e,t){_=e,M=t,b.onGradientUpdate&&b.onGradientUpdate(e,t)}}),m.draw()),m.setAngle(M),m.setColors(_),l.setSelected(u),h.hide(),f.show(),g.hide()}function s(){"pattern"!==y&&(y="pattern",C===t&&(C=S),b.onPatternUpdate&&b.onPatternUpdate(C)),v||(v=new PatternChooser(g,{onUpdate:function(e){C=e,b.onPatternUpdate&&b.onPatternUpdate(C)}}),v.draw()),v.setImage(C),l.setSelected(d),h.hide(),f.hide(),g.show()}var r,a,l,c,u,d,h,p,f,m,g,v,b,y,w,_,M,C,x=["#33CCFF","#3366FF"],k=90,S="/weebly/header_editor/images/patterns/8.jpg",T=!0;e.chooseFill=function(e){if(b=e||{},!r){var p=new Element("div",{"class":"heTabs"}),m=new Element("ul");m.insert(c=new Element("li").update("<a><span>Solid</span></a>")),m.insert(u=new Element("li").update("<a><span>Gradient</span></a>")),m.insert(d=new Element("li").update("<a><span>Pattern</span></a>")),l=new ElementSet(m,{onUpdate:function(e){e==c?n():e==u?o():e==d&&s()}}),p.insert(m),a=new Element("div"),a.insert(p),a.insert(h=new Element("div",{"class":"heColorChooser heDialogContent"})),a.insert(f=new Element("div",{"class":"heDialogContent"})),a.insert(g=new Element("div",{"class":"heDialogContent"})),r=new HeDialog(a,{className:"heFillDialog",buttons:{ok:"OK",cancel:"Cancel"},onOk:function(){i()},onCancel:function(){i(),b.onCancel&&b.onCancel()}})}y=b.fill,w=b.color,_=b.gradientColors,M=b.gradientAngle,C=b.pattern,"color"==y||y===t?n():"gradient"==y?o():"pattern"==y&&s(),r.open(b.clickElement)},e.stopChoosingFill=i}(window),_wAMD.define("imageperfect/fill_chooser",function(){});var isIE=-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,isWin=-1!=navigator.appVersion.toLowerCase().indexOf("win")?!0:!1,isOpera=-1!=navigator.userAgent.indexOf("Opera")?!0:!1;_wAMD.define("imageperfect/flash_utils",function(){});var mejs=mejs||{};mejs.version="2.9.5",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t,i,n=0,o="",s="",r=document.getElementsByTagName("script"),a=r.length,l=e.length;a>n;n++){for(i=r[n].src,t=0;l>t;t++)if(s=e[t],i.indexOf(s)>-1){o=i.substring(0,i.indexOf(s));break}if(""!==o)break}return o},secondsToTimeCode:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var o=Math.floor(e/3600)%24,s=Math.floor(e/60)%60,r=Math.floor(e%60),a=Math.floor((e%1*n).toFixed(3)),l=(t||o>0?(10>o?"0"+o:o)+":":"")+(10>s?"0"+s:s)+":"+(10>r?"0"+r:r)+(i?":"+(10>a?"0"+a:a):"");return l},timeCodeToSeconds:function(e,t,i,n){"undefined"==typeof i?i=!1:"undefined"==typeof n&&(n=25);var o=e.split(":"),s=parseInt(o[0],10),r=parseInt(o[1],10),a=parseInt(o[2],10),l=0,c=0;return i&&(l=parseInt(o[3])/n),c=3600*s+60*r+a+l},convertSMPTEtoSeconds:function(e){if("string"!=typeof e)return!1;e=e.replace(",",".");var t=0,i=-1!=e.indexOf(".")?e.split(".")[1].length:0,n=1;e=e.split(":").reverse();for(var o=0;o<e.length;o++)n=1,o>0&&(n=Math.pow(60,o)),t+=Number(e[o])*n;return Number(t.toFixed(i))},removeSwf:function(e){var t=document.getElementById(e);t&&"OBJECT"==t.nodeName&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){4==t.readyState?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}},mejs.PluginDetector={hasPluginVersion:function(e,t){var i=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,i[0]>t[0]||i[0]==t[0]&&i[1]>t[1]||i[0]==t[0]&&i[1]==t[1]&&i[2]>=t[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,i,n,o){this.plugins[e]=this.detectPlugin(t,i,n,o)},detectPlugin:function(e,t,i,n){var o,s,r,a=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[e]){if(o=this.nav.plugins[e].description,o&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[t]||this.nav.mimeTypes[t].enabledPlugin))for(a=o.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),s=0;s<a.length;s++)a[s]=parseInt(a[s].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{r=new ActiveXObject(i),r&&(a=n(r))}catch(l){}return a}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],i=e.GetVariable("$version");return i&&(i=i.split(" ")[1].split(","),t=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],i=function(e,t,i,n){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[i]+=n;t[i]-=n};return i(e,t,0,1),i(e,t,1,1),i(e,t,2,1e4),i(e,t,2,1e3),i(e,t,2,100),i(e,t,2,10),i(e,t,2,1),i(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e,t,i=this,n=document,o=mejs.PluginDetector.nav,s=mejs.PluginDetector.ua.toLowerCase(),r=["source","track","audio","video"];i.isiPad=null!==s.match(/ipad/i),i.isiPhone=null!==s.match(/iphone/i),i.isiOS=i.isiPhone||i.isiPad,i.isAndroid=null!==s.match(/android/i),i.isBustedAndroid=null!==s.match(/android 2\.[12]/),i.isIE=-1!=o.appName.toLowerCase().indexOf("microsoft"),i.isChrome=null!==s.match(/chrome/gi),i.isFirefox=null!==s.match(/firefox/gi),i.isWebkit=null!==s.match(/webkit/gi),i.isGecko=null!==s.match(/gecko/gi)&&!i.isWebkit,i.isOpera=null!==s.match(/opera/gi),i.hasTouch="ontouchstart"in window;for(e=0;e<r.length;e++)t=document.createElement(r[e]);i.supportsMediaTag="undefined"!=typeof t.canPlayType||i.isBustedAndroid,i.hasSemiNativeFullScreen="undefined"!=typeof t.webkitEnterFullscreen,i.hasWebkitNativeFullScreen="undefined"!=typeof t.webkitRequestFullScreen,i.hasMozNativeFullScreen="undefined"!=typeof t.mozRequestFullScreen,i.hasTrueNativeFullScreen=i.hasWebkitNativeFullScreen||i.hasMozNativeFullScreen,i.nativeFullScreenEnabled=i.hasTrueNativeFullScreen,i.hasMozNativeFullScreen&&(i.nativeFullScreenEnabled=t.mozFullScreenEnabled),this.isChrome&&(i.hasSemiNativeFullScreen=!1),i.hasTrueNativeFullScreen&&(i.fullScreenEventName=i.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",i.isFullScreen=function(){return t.mozRequestFullScreen?n.mozFullScreen:t.webkitRequestFullScreen?n.webkitIsFullScreen:void 0},i.requestFullScreen=function(e){i.hasWebkitNativeFullScreen?e.webkitRequestFullScreen():i.hasMozNativeFullScreen&&e.mozRequestFullScreen()},i.cancelFullScreen=function(){i.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():i.hasMozNativeFullScreen&&document.mozCancelFullScreen()}),i.hasSemiNativeFullScreen&&s.match(/mac os x 10_5/i)&&(i.hasNativeFullScreen=!1,i.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if("string"==typeof e)this.src=e;else{var i,n;for(i=0;i<e.length;i++)n=e[i],this.canPlayType(n.type)&&(this.src=n.src)}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,i){this.id=e,this.pluginType=t,this.src=i,this.events={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,i,n,o=mejs.plugins[this.pluginType];for(t=0;t<o.length;t++)if(n=o[t],mejs.PluginDetector.hasPluginVersion(this.pluginType,n.version))for(i=0;i<n.types.length;i++)if(e==n.types[i])return!0;return!1},positionFullscreenButton:function(e,t,i){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(e,t,i)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if("string"==typeof e)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,i;for(t=0;t<e.length;t++)i=e[t],this.canPlayType(i.type)&&(this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(i.src)),this.src=mejs.Utility.absolutizeUrl(e))}},setCurrentTime:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*e):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){null!=this.pluginApi&&("youtube"==this.pluginType?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var n=this.events[e];if(!n)return!0;if(!t)return this.events[e]=[],!0;for(i=0;i<n.length;i++)if(n[i]===t)return this.events[e].splice(i,1),!0;return!1},dispatchEvent:function(e){var t,i,n=this.events[e];if(n)for(i=Array.prototype.slice.call(arguments,1),t=0;t<n.length;t++)n[t].apply(null,i)},attributes:{},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,i){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=i},initPlugin:function(e){var t=this.pluginMediaElements[e],i=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}null!=t.pluginApi&&t.success&&t.success(t,i)}},fireEvent:function(e,t,i){var n,o,s,r=this.pluginMediaElements[e];r.ended=!1,r.paused=!0,n={type:t,target:r};for(o in i)r[o]=i[o],n[o]=i[o];s=i.bufferedTime||0,n.target.buffered=n.buffered={start:function(){return 0},end:function(){return s},length:1},r.dispatchEvent(n.type,n)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var i,n,o=mejs.MediaElementDefaults,s="string"==typeof e?document.getElementById(e):e,r=s.tagName.toLowerCase(),a="audio"===r||"video"===r,l=a?s.getAttribute("src"):s.getAttribute("href"),c=s.getAttribute("poster"),u=s.getAttribute("autoplay"),d=s.getAttribute("preload"),h=s.getAttribute("controls");for(n in t)o[n]=t[n];return l="undefined"==typeof l||null===l||""==l?null:l,c="undefined"==typeof c||null===c?"":c,d="undefined"==typeof d||null===d||"false"===d?"none":d,u=!("undefined"==typeof u||null===u||"false"===u),h=!("undefined"==typeof h||null===h||"false"===h),i=this.determinePlayback(s,o,mejs.MediaFeatures.supportsMediaTag,a,l),i.url=null!==i.url?mejs.Utility.absolutizeUrl(i.url):"","native"==i.method?(mejs.MediaFeatures.isBustedAndroid&&(s.src=i.url,s.addEventListener("click",function(){s.play()},!1)),this.updateNative(i,o,u,d)):""!==i.method?this.createPlugin(i,o,c,u,d,h):(this.createErrorMessage(i,o,c),this)},determinePlayback:function(e,t,i,n,o){var s,r,a,l,c,u,d,h,p,f,m=[],g={method:"",url:"",htmlMediaElement:e,isVideo:"audio"!=e.tagName.toLowerCase()};if("undefined"!=typeof t.type&&""!==t.type)if("string"==typeof t.type)m.push({type:t.type,url:o});else for(s=0;s<t.type.length;s++)m.push({type:t.type[s],url:o});else if(null!==o)u=this.formatType(o,e.getAttribute("type")),m.push({type:u,url:o});else for(s=0;s<e.childNodes.length;s++)c=e.childNodes[s],1==c.nodeType&&"source"==c.tagName.toLowerCase()&&(o=c.getAttribute("src"),u=this.formatType(o,c.getAttribute("type")),m.push({type:u,url:o}));if(!n&&m.length>0&&null!==m[0].url&&this.getTypeFromFile(m[0].url).indexOf("audio")>-1&&(g.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return null!==e.match(/video\/(mp4|m4v)/gi)?"maybe":""}),i&&("auto"===t.mode||"auto_plugin"===t.mode||"native"===t.mode)){for(n||(f=document.createElement(g.isVideo?"video":"audio"),e.parentNode.insertBefore(f,e),e.style.display="none",g.htmlMediaElement=e=f),s=0;s<m.length;s++)if(""!==e.canPlayType(m[s].type).replace(/no/,"")||""!==e.canPlayType(m[s].type.replace(/mp3/,"mpeg")).replace(/no/,"")){g.method="native",g.url=m[s].url;break}if("native"===g.method&&(null!==g.url&&(e.src=g.url),"auto_plugin"!==t.mode))return g}if("auto"===t.mode||"auto_plugin"===t.mode||"shim"===t.mode)for(s=0;s<m.length;s++)for(u=m[s].type,r=0;r<t.plugins.length;r++)for(d=t.plugins[r],h=mejs.plugins[d],a=0;a<h.length;a++)if(p=h[a],null==p.version||mejs.PluginDetector.hasPluginVersion(d,p.version))for(l=0;l<p.types.length;l++)if(u==p.types[l])return g.method=d,g.url=m[s].url,g;return"auto_plugin"===t.mode&&"native"===g.method?g:(""===g.method&&m.length>0&&(g.url=m[0].url),g)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){var t=e.substring(e.lastIndexOf(".")+1);return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video":"audio")+"/"+this.getTypeFromExtension(t)},getTypeFromExtension:function(e){switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},createErrorMessage:function(e,t,i){var n=e.htmlMediaElement,o=document.createElement("div");o.className="me-cannotplay";try{o.style.width=n.width+"px",o.style.height=n.height+"px"}catch(s){}o.innerHTML=""!==i?'<a href="'+e.url+'"><img src="'+i+'" width="100%" height="100%" /></a>':'<a href="'+e.url+'"><span>'+_W.tl("Download File")+"</span></a>",n.parentNode.insertBefore(o,n),n.style.display="none",t.error(n)},createPlugin:function(e,t,i,n,o,s){var r,a,l,c=e.htmlMediaElement,u=1,d=1,h="me_"+e.method+"_"+mejs.meIndex++,p=new mejs.PluginMediaElement(h,e.method,e.url),f=document.createElement("div");p.tagName=c.tagName;for(var m=0;m<c.attributes.length;m++){var g=c.attributes[m];1==g.specified&&p.setAttribute(g.name,g.value)}for(a=c.parentNode;null!==a&&"body"!=a.tagName.toLowerCase();){if("p"==a.parentNode.tagName.toLowerCase()){a.parentNode.parentNode.insertBefore(a,a.parentNode);break}a=a.parentNode}switch(e.isVideo?(u=t.videoWidth>0?t.videoWidth:null!==c.getAttribute("width")?c.getAttribute("width"):t.defaultVideoWidth,d=t.videoHeight>0?t.videoHeight:null!==c.getAttribute("height")?c.getAttribute("height"):t.defaultVideoHeight,u=mejs.Utility.encodeUrl(u),d=mejs.Utility.encodeUrl(d)):t.enablePluginDebug&&(u=320,d=240),p.success=t.success,mejs.MediaPluginBridge.registerPluginElement(h,p,c),f.className="me-plugin",f.id=h+"_container",e.isVideo?c.parentNode.insertBefore(f,c):document.body.insertBefore(f,document.body.childNodes[0]),l=["id="+h,"isvideo="+(e.isVideo?"true":"false"),"autoplay="+(n?"true":"false"),"preload="+o,"width="+u,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+d],null!==e.url&&("flash"==e.method?l.push("file="+mejs.Utility.encodeUrl(e.url)):l.push("file="+e.url)),t.enablePluginDebug&&l.push("debug=true"),t.enablePluginSmoothing&&l.push("smoothing=true"),s&&l.push("controls=true"),t.pluginVars&&(l=l.concat(t.pluginVars)),e.method){case"silverlight":f.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+h+'" name="'+h+'" width="'+u+'" height="'+d+'">'+'<param name="initParams" value="'+l.join(",")+'" />'+'<param name="windowless" value="true" />'+'<param name="background" value="black" />'+'<param name="minRuntimeVersion" value="3.0.0.0" />'+'<param name="autoUpgrade" value="true" />'+'<param name="source" value="'+t.pluginPath+t.silverlightName+'" />'+"</object>";break;case"flash":mejs.MediaFeatures.isIE?(r=document.createElement("div"),f.appendChild(r),r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+h+'" width="'+u+'" height="'+d+'">'+'<param name="movie" value="'+t.pluginPath+t.flashName+"?x="+new Date+'" />'+'<param name="flashvars" value="'+l.join("&amp;")+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#000000" />'+'<param name="wmode" value="transparent" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullScreen" value="true" />'+"</object>"):f.innerHTML='<embed id="'+h+'" name="'+h+'" '+'play="true" '+'loop="false" '+'quality="high" '+'bgcolor="#000000" '+'wmode="transparent" '+'allowScriptAccess="always" '+'allowFullScreen="true" '+'type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" '+'src="'+t.pluginPath+t.flashName+'" '+'flashvars="'+l.join("&")+'" '+'width="'+u+'" '+'height="'+d+'"></embed>';break;case"youtube":var v=e.url.substr(e.url.lastIndexOf("=")+1);youtubeSettings={container:f,containerId:f.id,pluginMediaElement:p,pluginId:h,videoId:v,height:d,width:u},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":p.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),f.innerHTML='<object width="'+u+'" height="'+d+'">'+'<param name="allowfullscreen" value="true" />'+'<param name="allowscriptaccess" value="always" />'+'<param name="flashvars" value="api=1" />'+'<param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id='+p.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" />'+'<embed src="//vimeo.com/moogaloop.swf?api=1&amp;clip_id='+p.vimeoid+'&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00adef&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="'+u+'" height="'+d+'"></embed>'+"</object>"}return c.style.display="none",c.removeAttribute("autoplay"),p},updateNative:function(e,t){var i,n=e.htmlMediaElement;for(i in mejs.HtmlMediaElement)n[i]=mejs.HtmlMediaElement[i];return t.success(n,n),n}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="http://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,i=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=i,mejs.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(i,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,i,t)}}})},createEvent:function(e,t,i){var n={type:i,target:t};if(e&&e.getDuration){t.currentTime=n.currentTime=e.getCurrentTime(),t.duration=n.duration=e.getDuration(),n.paused=t.paused,n.ended=t.ended,n.muted=e.isMuted(),n.volume=e.getVolume()/100,n.bytesTotal=e.getVideoBytesTotal(),n.bufferedBytes=e.getVideoBytesLoaded();
var o=n.bufferedBytes/n.bytesTotal*n.duration;n.target.buffered=n.buffered={start:function(){return 0},end:function(){return o},length:1}}t.dispatchEvent(n.type,n)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,i="http://www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'">'+'<param name="movie" value="'+i+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullScreen" value="true" />'+"</object>"):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+i+'" '+'width="'+e.width+'" height="'+e.height+'" style="visibility: visible; ">'+'<param name="allowScriptAccess" value="always">'+'<param name="wmode" value="transparent">'+"</object>"},flashReady:function(e){var t=this.flashPlayers[e],i=document.getElementById(e),n=t.pluginMediaElement;n.pluginApi=n.pluginElement=i,mejs.MediaPluginBridge.initPlugin(e),i.cueVideoById(t.videoId);var o=t.containerId+"_callback";window[o]=function(e){mejs.YouTubeApi.handleStateChange(e,i,n)},i.addEventListener("onStateChange",o),setInterval(function(){mejs.YouTubeApi.createEvent(i,n,"timeupdate")},250)},handleStateChange:function(e,t,i){switch(e){case-1:i.paused=!0,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"loadedmetadata");break;case 0:i.paused=!1,i.ended=!0,mejs.YouTubeApi.createEvent(t,i,"ended");break;case 1:i.paused=!1,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"play"),mejs.YouTubeApi.createEvent(t,i,"playing");break;case 2:i.paused=!0,i.ended=!1,mejs.YouTubeApi.createEvent(t,i,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,i,"progress");break;case 5:}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof ender&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return.05*e.duration},defaultSeekForwardInterval:function(e){return.05*e.duration},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){var i=Math.min(t.volume+.1,1);t.setVolume(i)}},{keys:[40],action:function(e,t){var i=Math.max(t.volume-.1,0);t.setVolume(i)}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(i)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var i=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(i)}}},{keys:[70],action:function(e){"undefined"!=typeof e.enterFullScreen&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players=[],mejs.MediaElementPlayer=function(t,i){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(t,i);var n=this;return n.$media=n.$node=e(t),n.node=n.media=n.$media[0],"undefined"!=typeof n.node.player?n.node.player:(n.node.player=n,"undefined"==typeof i&&(i=n.$node.data("mejsoptions")),n.options=e.extend({},mejs.MepDefaults,i),mejs.players.push(n),n.init(),n)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,i=mejs.MediaFeatures,n=e.extend(!0,{},t.options,{success:function(e,i){t.meReady(e,i)},error:function(e){t.handleError(e)}}),o=t.media.tagName.toLowerCase();if(t.isDynamic="audio"!==o&&"video"!==o,t.isVideo=t.isDynamic?t.options.isVideo:"audio"!==o&&t.options.isVideo,i.isiPad&&t.options.iPadUseNativeControls||i.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),i.isiPad&&null!==t.media.getAttribute("autoplay")&&(t.media.load(),t.media.play());else if(i.isAndroid&&t.AndroidUseNativeControls);else{if(t.$media.removeAttr("controls"),t.id="mep_"+mejs.mepIndex++,t.container=e('<div id="'+t.id+'" class="mejs-container">'+'<div class="mejs-inner">'+'<div class="mejs-mediaelement"></div>'+'<div class="mejs-layers"></div>'+'<div class="mejs-controls"></div>'+'<div class="mejs-clear"></div>'+"</div>"+"</div>").addClass(t.$media[0].className).insertBefore(t.$media),t.container.addClass((i.isAndroid?"mejs-android ":"")+(i.isiOS?"mejs-ios ":"")+(i.isiPad?"mejs-ipad ":"")+(i.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),i.isiOS){var s=t.$media.clone();t.container.find(".mejs-mediaelement").append(s),t.$media.remove(),t.$node=t.$media=s,t.node=t.media=s[0]}else t.container.find(".mejs-mediaelement").append(t.$media);t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers");var r=t.isVideo?"video":"audio",a=r.substring(0,1).toUpperCase()+r.substring(1);t.width=t.options[r+"Width"]>0||t.options[r+"Width"].toString().indexOf("%")>-1?t.options[r+"Width"]:""!==t.media.style.width&&null!==t.media.style.width?t.media.style.width:null!==t.media.getAttribute("width")?t.$media.attr("width"):t.options["default"+a+"Width"],t.height=t.options[r+"Height"]>0||t.options[r+"Height"].toString().indexOf("%")>-1?t.options[r+"Height"]:""!==t.media.style.height&&null!==t.media.style.height?t.media.style.height:null!==t.$media[0].getAttribute("height")?t.$media.attr("height"):t.options["default"+a+"Height"],t.setPlayerSize(t.width,t.height),n.pluginWidth=t.height,n.pluginHeight=t.width}mejs.MediaElement(t.$media[0],n)},showControls:function(e){var t=this;e="undefined"==typeof e||e,t.controlsAreVisible||(e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0),t.setControlsSize())},hideControls:function(t){var i=this;t="undefined"==typeof t||t,i.controlsAreVisible&&(t?(i.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1}),i.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(i.controls.css("visibility","hidden").css("display","block"),i.container.find(".mejs-control").css("visibility","hidden").css("display","block"),i.controlsAreVisible=!1))},controlsTimer:null,startControlsTimer:function(e){var t=this;e="undefined"!=typeof e?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(){var e=this;null!==e.controlsTimer&&(clearTimeout(e.controlsTimer),delete e.controlsTimer,e.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var e=this;e.killControlsTimer(),e.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var e=this;e.showControls(!1),e.controlsEnabled=!0},meReady:function(t,i){var n,o,s=this,r=mejs.MediaFeatures,a=i.getAttribute("autoplay"),l=!("undefined"==typeof a||null===a||"false"===a);if(!s.created){if(s.created=!0,s.media=t,s.domNode=i,!(r.isAndroid&&s.options.AndroidUseNativeControls||r.isiPad&&s.options.iPadUseNativeControls||r.isiPhone&&s.options.iPhoneUseNativeControls)){s.buildposter(s,s.controls,s.layers,s.media),s.buildkeyboard(s,s.controls,s.layers,s.media),s.buildoverlays(s,s.controls,s.layers,s.media),s.findTracks();for(n in s.options.features)if(o=s.options.features[n],s["build"+o])try{s["build"+o](s,s.controls,s.layers,s.media)}catch(c){}if(s.container.trigger("controlsready"),s.setPlayerSize(s.width,s.height),s.setControlsSize(),s.isVideo){if(mejs.MediaFeatures.hasTouch)s.$media.bind("touchstart",function(){s.controlsAreVisible?s.hideControls(!1):s.controlsEnabled&&s.showControls(!1)});else{var u="native"==s.media.pluginType?s.$media:e(s.media.pluginElement);u.click(function(){t.paused?t.play():t.pause()}),s.container.bind("mouseenter mouseover",function(){s.controlsEnabled&&(s.options.alwaysShowControls||(s.killControlsTimer("enter"),s.showControls(),s.startControlsTimer(2500)))}).bind("mousemove",function(){s.controlsEnabled&&(s.controlsAreVisible||s.showControls(),s.options.alwaysShowControls||s.startControlsTimer(2500))}).bind("mouseleave",function(){s.controlsEnabled&&(s.media.paused||s.options.alwaysShowControls||s.startControlsTimer(1e3))})}l&&!s.options.alwaysShowControls&&s.hideControls(),s.options.enableAutosize&&s.media.addEventListener("loadedmetadata",function(e){s.options.videoHeight<=0&&null===s.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(s.setPlayerSize(e.target.videoWidth,e.target.videoHeight),s.setControlsSize(),s.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)}t.addEventListener("play",function(){for(var e=0,t=mejs.players.length;t>e;e++){var i=mejs.players[e];i.id==s.id||!s.options.pauseOtherPlayers||i.paused||i.ended||i.pause(),i.hasFocus=!1}s.hasFocus=!0},!1),s.media.addEventListener("ended",function(){try{s.media.setCurrentTime(0)}catch(e){}s.media.pause(),s.setProgressRail&&s.setProgressRail(),s.setCurrentRail&&s.setCurrentRail(),s.options.loop?s.media.play():!s.options.alwaysShowControls&&s.controlsEnabled&&s.showControls()},!1),s.media.addEventListener("loadedmetadata",function(){s.updateDuration&&s.updateDuration(),s.updateCurrent&&s.updateCurrent(),s.isFullScreen||(s.setPlayerSize(s.width,s.height),s.setControlsSize())},!1),setTimeout(function(){s.setPlayerSize(s.width,s.height),s.setControlsSize()},50),e(window).resize(function(){s.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||s.setPlayerSize(s.width,s.height),s.setControlsSize()}),"youtube"==s.media.pluginType&&s.container.find(".mejs-overlay-play").hide()}l&&"native"==t.pluginType&&(t.load(),t.play()),s.options.success&&("string"==typeof s.options.success?window[s.options.success](s.media,s.domNode,s):s.options.success(s.media,s.domNode,s))}},handleError:function(e){var t=this;t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(t,i){var n=this;if("undefined"!=typeof t&&(n.width=t),"undefined"!=typeof i&&(n.height=i),n.height.toString().indexOf("%")>0||"100%"===n.$node.css("max-width")){var o=n.media.videoWidth&&n.media.videoWidth>0?n.media.videoWidth:n.options.defaultVideoWidth,s=n.media.videoHeight&&n.media.videoHeight>0?n.media.videoHeight:n.options.defaultVideoHeight,r=n.container.parent().width(),a=parseInt(r*s/o,10);"body"===n.container.parent()[0].tagName.toLowerCase()&&(r=e(window).width(),a=e(window).height()),0!=a&&(n.container.width(r).height(a),n.$media.width("100%").height("100%"),n.container.find("object, embed, iframe").width("100%").height("100%"),n.isVideo&&n.media.setVideoSize&&n.media.setVideoSize(r,a),n.layers.children(".mejs-layer").width("100%").height("100%"))}else n.container.width(n.width).height(n.height),n.layers.children(".mejs-layer").width(n.width).height(n.height)},setControlsSize:function(){var t=this,i=0,n=0,o=t.controls.find(".mejs-time-rail"),s=t.controls.find(".mejs-time-total"),r=(t.controls.find(".mejs-time-current"),t.controls.find(".mejs-time-loaded"),o.siblings());t.options&&!t.options.autosizeProgress&&(n=parseInt(o.css("width"))),0!==n&&n||(r.each(function(){"absolute"!=e(this).css("position")&&(i+=e(this).outerWidth(!0))}),n=t.controls.width()-i-(o.outerWidth(!0)-o.width())-1),o.width(n),s.width(n-(s.outerWidth(!0)-s.width())),t.setProgressRail&&t.setProgressRail(),t.setCurrentRail&&t.setCurrentRail()},buildposter:function(t,i,n,o){var s=this,r=e('<div class="mejs-poster mejs-layer"></div>').appendTo(n),a=t.$media.attr("poster");""!==t.options.poster&&(a=t.options.poster),""!==a&&null!=a?s.setPoster(a):r.hide(),o.addEventListener("play",function(){r.hide()},!1)},setPoster:function(t){var i=this,n=i.container.find(".mejs-poster"),o=n.find("img");0==o.length&&(o=e('<img width="100%" height="100%" />').appendTo(n)),o.attr("src",t)},buildoverlays:function(t,i,n,o){if(t.isVideo){var s=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(n),r=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(n),a=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(n).click(function(){o.paused?o.play():o.pause()});o.addEventListener("play",function(){a.hide(),s.hide(),i.find(".mejs-time-buffering").hide(),r.hide()},!1),o.addEventListener("playing",function(){a.hide(),s.hide(),i.find(".mejs-time-buffering").hide(),r.hide()},!1),o.addEventListener("seeking",function(){s.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("seeked",function(){s.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||a.show()},!1),o.addEventListener("waiting",function(){s.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("loadeddata",function(){s.show(),i.find(".mejs-time-buffering").show()},!1),o.addEventListener("canplay",function(){s.hide(),i.find(".mejs-time-buffering").hide()},!1),o.addEventListener("error",function(){s.hide(),i.find(".mejs-time-buffering").hide(),r.show(),r.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(t,i,n,o){e(document).keydown(function(e){if(t.hasFocus&&t.options.enableKeyboard)for(var i=0,n=t.options.keyActions.length;n>i;i++)for(var s=t.options.keyActions[i],r=0,a=s.keys.length;a>r;r++)if(e.keyCode==s.keys[r])return e.preventDefault(),s.action(t,o,e.keyCode),!1;return!0}),e(document).click(function(i){0==e(i.target).closest(".mejs-container").length&&(t.hasFocus=!1)})},findTracks:function(){var t=this,i=t.$media.find("track");t.tracks=[],i.each(function(i,n){n=e(n),t.tracks.push({srclang:n.attr("srclang").toLowerCase(),src:n.attr("src"),kind:n.attr("kind"),label:n.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var e=this;"flash"===e.media.pluginType?e.media.remove():"native"===e.media.pluginType&&e.$media.prop("controls",!0),e.isDynamic||e.$node.insertBefore(e.container),e.container.remove()}},"undefined"!=typeof jQuery&&(jQuery.fn.mediaelementplayer=function(e){return this.each(function(){new mejs.MediaElementPlayer(this,e)})}),e(document).ready(function(){e(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playpauseText:"Play/Pause"}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,i,n,o){var s=this,r=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+s.id+'" title="'+s.options.playpauseText+'"></button>'+"</div>").appendTo(i).click(function(e){return e.preventDefault(),o.paused?o.play():o.pause(),!1});o.addEventListener("play",function(){r.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("playing",function(){r.removeClass("mejs-play").addClass("mejs-pause")},!1),o.addEventListener("pause",function(){r.removeClass("mejs-pause").addClass("mejs-play")},!1),o.addEventListener("paused",function(){r.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,i,n,o){var s=this;e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+s.id+'" title="'+s.options.stopText+'"></button>'+"</div>").appendTo(i).click(function(){o.paused||o.pause(),o.currentTime>0&&(o.setCurrentTime(0),i.find(".mejs-time-current").width("0px"),i.find(".mejs-time-handle").css("left","0px"),i.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),i.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),n.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,i,n,o){e('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(i),i.find(".mejs-time-buffering").hide();var s=this,r=i.find(".mejs-time-total"),a=i.find(".mejs-time-loaded"),l=i.find(".mejs-time-current"),c=i.find(".mejs-time-handle"),u=i.find(".mejs-time-float"),d=i.find(".mejs-time-float-current"),h=function(e){var t=e.pageX,i=r.offset(),n=r.outerWidth(),s=0,a=0,l=t-i.left;t>i.left&&t<=n+i.left&&o.duration&&(s=(t-i.left)/n,a=.02>=s?0:s*o.duration,p&&o.setCurrentTime(a),mejs.MediaFeatures.hasTouch||(u.css("left",l),d.html(mejs.Utility.secondsToTimeCode(a)),u.show()))},p=!1,f=!1;r.bind("mousedown",function(t){return 1===t.which?(p=!0,h(t),e(document).bind("mousemove.dur",function(e){h(e)}).bind("mouseup.dur",function(){p=!1,u.hide(),e(document).unbind(".dur")}),!1):void 0}).bind("mouseenter",function(){f=!0,e(document).bind("mousemove.dur",function(e){h(e)}),mejs.MediaFeatures.hasTouch||u.show()}).bind("mouseleave",function(){f=!1,p||(e(document).unbind(".dur"),u.hide())}),o.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),o.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),s.loaded=a,s.total=r,s.current=l,s.handle=c},setProgressRail:function(e){var t=this,i=void 0!=e?e.target:t.media,n=null;i&&i.buffered&&i.buffered.length>0&&i.buffered.end&&i.duration?n=i.buffered.end(0)/i.duration:i&&void 0!=i.bytesTotal&&i.bytesTotal>0&&void 0!=i.bufferedBytes?n=i.bufferedBytes/i.bytesTotal:e&&e.lengthComputable&&0!=e.total&&(n=e.loaded/e.total),null!==n&&(n=Math.min(1,Math.max(0,n)),t.loaded&&t.total&&t.loaded.width(t.total.width()*n))},setCurrentRail:function(){var e=this;if(void 0!=e.media.currentTime&&e.media.duration&&e.total&&e.handle){var t=e.total.width()*e.media.currentTime/e.media.duration,i=t-e.handle.outerWidth(!0)/2;e.current.width(t),e.handle.css("left",i)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:" <span> | </span> "}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,i,n,o){var s=this;e('<div class="mejs-time"><span class="mejs-currenttime">'+(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span>"+"</div>").appendTo(i),s.currenttime=s.controls.find(".mejs-currenttime"),o.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,i,n,o){var s=this;i.children().last().find(".mejs-currenttime").length>0?e(s.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(s.options.duration>0?mejs.Utility.secondsToTimeCode(s.options.duration,s.options.alwaysShowHours||s.media.duration>3600,s.options.showTimecodeFrameCount,s.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(i.find(".mejs-time")):(i.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(s.options.duration>0?mejs.Utility.secondsToTimeCode(s.options.duration,s.options.alwaysShowHours||s.media.duration>3600,s.options.showTimecodeFrameCount,s.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>"+"</div>").appendTo(i)),s.durationD=s.controls.find(".mejs-duration"),o.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){var e=this;e.currenttime&&e.currenttime.html(mejs.Utility.secondsToTimeCode(e.media.currentTime,e.options.alwaysShowHours||e.media.duration>3600,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))},updateDuration:function(){var e=this;e.media.duration&&e.durationD&&e.durationD.html(mejs.Utility.secondsToTimeCode(e.media.duration,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:"Mute Toggle",hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,i,n,o){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var s=this,r=s.isVideo?s.options.videoVolume:s.options.audioVolume,a="horizontal"==r?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'"></button>'+"</div>"+'<div class="mejs-horizontal-volume-slider">'+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+"</div>").appendTo(i):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'"></button>'+'<div class="mejs-volume-slider">'+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+"</div>"+"</div>").appendTo(i),l=s.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),c=s.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),u=s.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),d=s.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),h=function(e,t){if(!l.is(":visible")&&"undefined"!=typeof t)return l.show(),h(e,!0),l.hide(),void 0;if(e=Math.max(0,e),e=Math.min(e,1),0==e?a.removeClass("mejs-mute").addClass("mejs-unmute"):a.removeClass("mejs-unmute").addClass("mejs-mute"),"vertical"==r){var i=c.height(),n=c.position(),o=i-i*e;d.css("top",n.top+o-d.height()/2),u.height(i-o),u.css("top",n.top+o)}else{var s=c.width(),n=c.position(),p=s*e;d.css("left",n.left+p-d.width()/2),u.width(p)}},p=function(e){var t=null,i=c.offset();if("vertical"==r){var n=c.height(),s=(parseInt(c.css("top").replace(/px/,""),10),e.pageY-i.top);if(t=(n-s)/n,0==i.top||0==i.left)return}else{var a=c.width(),l=e.pageX-i.left;t=l/a}t=Math.max(0,t),t=Math.min(t,1),h(t),0==t?o.setMuted(!0):o.setMuted(!1),o.setVolume(t)},f=!1,m=!1;a.hover(function(){l.show(),m=!0},function(){m=!1,f||"vertical"!=r||l.hide()}),l.bind("mouseover",function(){m=!0}).bind("mousedown",function(t){return p(t),e(document).bind("mousemove.vol",function(e){p(e)}).bind("mouseup.vol",function(){f=!1,e(document).unbind(".vol"),m||"vertical"!=r||l.hide()}),f=!0,!1}),a.find("button").click(function(){o.setMuted(!o.muted)}),o.addEventListener("volumechange",function(){f||(o.muted?(h(0),a.removeClass("mejs-mute").addClass("mejs-unmute")):(h(o.volume),a.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),s.container.is(":visible")&&(h(t.options.startVolume),"native"===o.pluginType&&o.setVolume(t.options.startVolume))}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:"Fullscreen"}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,docStyleOverflow:null,isInIframe:!1,buildfullscreen:function(t,i,n,o){if(t.isVideo){if(t.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen){var s=null;s=mejs.MediaFeatures.hasMozNativeFullScreen?e(document):t.container,s.bind(mejs.MediaFeatures.fullScreenEventName,function(){mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen())})}var r=this,a=(t.container,e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+r.id+'" title="'+r.options.fullscreenText+'"></button>'+"</div>").appendTo(i));if("native"===r.media.pluginType||!r.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)a.click(function(){var e=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen;e?t.exitFullScreen():t.enterFullScreen()});else{var l=null,c=function(){var e,t=document.createElement("x"),i=document.documentElement,n=window.getComputedStyle;return"pointerEvents"in t.style?(t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t),e=n&&"auto"===n(t,"").pointerEvents,i.removeChild(t),!!e):!1}();if(c&&!mejs.MediaFeatures.isOpera){var u=!1,d=function(){u&&(h.hide(),p.hide(),f.hide(),a.css("pointer-events",""),r.controls.css("pointer-events",""),u=!1)},h=e('<div class="mejs-fullscreen-hover" />').appendTo(r.container).mouseover(d),p=e('<div class="mejs-fullscreen-hover"  />').appendTo(r.container).mouseover(d),f=e('<div class="mejs-fullscreen-hover"  />').appendTo(r.container).mouseover(d),m=function(){var e={position:"absolute",top:0,left:0};h.css(e),p.css(e),f.css(e),h.width(r.container.width()).height(r.container.height()-r.controls.height());var t=a.offset().left-r.container.offset().left;fullScreenBtnWidth=a.outerWidth(!0),p.width(t).height(r.controls.height()).css({top:r.container.height()-r.controls.height()}),f.width(r.container.width()-t-fullScreenBtnWidth).height(r.controls.height()).css({top:r.container.height()-r.controls.height(),left:t+fullScreenBtnWidth})};e(document).resize(function(){m()}),a.mouseover(function(){if(!r.isFullScreen){var e=a.offset(),i=t.container.offset();o.positionFullscreenButton(e.left-i.left,e.top-i.top,!1),a.css("pointer-events","none"),r.controls.css("pointer-events","none"),h.show(),f.show(),p.show(),m(),u=!0}}),o.addEventListener("fullscreenchange",function(){d()})}else a.mouseover(function(){null!==l&&(clearTimeout(l),delete l);var e=a.offset(),i=t.container.offset();o.positionFullscreenButton(e.left-i.left,e.top-i.top,!0)}).mouseout(function(){null!==l&&(clearTimeout(l),delete l),l=setTimeout(function(){o.hideFullscreenButton()},1500)})}t.fullscreenBtn=a,e(document).bind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||r.isFullScreen)&&27==e.keyCode&&t.exitFullScreen()})}},enterFullScreen:function(){var t=this;if("native"===t.media.pluginType||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){if(docStyleOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",normalHeight=t.container.height(),normalWidth=t.container.width(),"native"===t.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function n(){t.isNativeFullScreen&&(e(window).width()!==screen.width?t.exitFullScreen():setTimeout(n,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return t.media.webkitEnterFullscreen(),void 0;if(t.isInIframe){var i=t.options.newWindowCallback(this);if(""!==i){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return t.pause(),window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"),void 0;setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.pluginType?t.$media.width("100%").height("100%"):(t.container.find("object, embed, iframe").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0}},exitFullScreen:function(){var e=this;return"native"!==e.media.pluginType&&mejs.MediaFeatures.isFirefox?(e.media.setFullscreen(!1),void 0):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||e.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),document.documentElement.style.overflow=docStyleOverflow,e.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),"native"===e.pluginType?e.$media.width(normalWidth).height(normalHeight):(e.container.find("object embed").width(normalWidth).height(normalHeight),e.media.setVideoSize(normalWidth,normalHeight)),e.layers.children("div").width(normalWidth).height(normalHeight),e.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),e.setControlsSize(),e.isFullScreen=!1,void 0)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"Captions/Subtitles"}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(t,i,n,o){if(t.isVideo&&0!=t.tracks.length){var s,r=this;for(t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(n).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position"><span class="mejs-captions-text"></span></div></div>').prependTo(n).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+r.id+'" title="'+r.options.tracksText+'"></button>'+'<div class="mejs-captions-selector">'+"<ul>"+"<li>"+'<input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" />'+'<label for="'+t.id+'_captions_none">None</label>'+"</li>"+"</ul>"+"</div>"+"</div>").appendTo(i).hover(function(){e(this).find(".mejs-captions-selector").css("visibility","visible")},function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")}).delegate("input[type=radio]","click",function(){if(lang=this.value,"none"==lang)t.selectedTrack=null;else for(s=0;s<t.tracks.length;s++)if(t.tracks[s].srclang==lang){t.selectedTrack=t.tracks[s],t.captions.attr("lang",t.selectedTrack.srclang),t.displayCaptions();break}}),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("mouseenter",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("mouseleave",function(){o.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")
}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1,s=0;s<t.tracks.length;s++)"subtitles"==t.tracks[s].kind&&t.addTrackButton(t.tracks[s].srclang,t.tracks[s].label);t.loadNextTrack(),o.addEventListener("timeupdate",function(){t.displayCaptions()},!1),o.addEventListener("loadedmetadata",function(){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.css("visibility","visible"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!o.paused&&t.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),null!==t.node.getAttribute("autoplay")&&t.chapters.css("visibility","hidden")}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):e.isLoadingTrack=!1},loadTrack:function(t){var i=this,n=i.tracks[t],o=function(){n.isLoaded=!0,i.enableTrackButton(n.srclang,n.label),i.loadNextTrack()};e.ajax({url:n.src,dataType:"text",success:function(e){n.entries="string"==typeof e&&/<tt\s+xml/gi.exec(e)?mejs.TrackFormatParser.dfxp.parse(e):mejs.TrackFormatParser.webvvt.parse(e),o(),"chapters"==n.kind&&i.media.duration>0&&i.drawChapters(n)},error:function(){i.loadNextTrack()}})},enableTrackButton:function(t,i){var n=this;""===i&&(i=mejs.language.codes[t]||t),n.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(i),n.options.startLanguage==t&&e("#"+n.id+"_captions_"+t).click(),n.adjustLanguageBox()},addTrackButton:function(t,i){var n=this;""===i&&(i=mejs.language.codes[t]||t),n.captionsButton.find("ul").append(e('<li><input type="radio" name="'+n.id+'_captions" id="'+n.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" />'+'<label for="'+n.id+"_captions_"+t+'">'+i+" (loading)"+"</label>"+"</li>")),n.adjustLanguageBox(),n.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},displayCaptions:function(){if("undefined"!=typeof this.tracks){var e,t=this,i=t.selectedTrack;if(null!=i&&i.isLoaded){for(e=0;e<i.entries.times.length;e++)if(t.media.currentTime>=i.entries.times[e].start&&t.media.currentTime<=i.entries.times[e].stop)return t.captionsText.html(i.entries.text[e]),t.captions.show().height(0),void 0;t.captions.hide()}else t.captions.hide()}},displayChapters:function(){var e,t=this;for(e=0;e<t.tracks.length;e++)if("chapters"==t.tracks[e].kind&&t.tracks[e].isLoaded){t.drawChapters(t.tracks[e]),t.hasChapters=!0;break}},drawChapters:function(t){var i,n,o=this,s=0,r=0;for(o.chapters.empty(),i=0;i<t.entries.times.length;i++)n=t.entries.times[i].stop-t.entries.times[i].start,s=Math.floor(100*(n/o.media.duration)),(s+r>100||i==t.entries.times.length-1&&100>s+r)&&(s=100-r),o.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[i].start+'" style="left: '+r.toString()+"%;width: "+s.toString()+'%;">'+'<div class="mejs-chapter-block'+(i==t.entries.times.length-1?" mejs-chapter-block-last":"")+'">'+'<span class="ch-title">'+t.entries.text[i]+"</span>"+'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[i].stop)+"</span>"+"</div>"+"</div>")),r+=s;o.chapters.find("div.mejs-chapter").click(function(){o.media.setCurrentTime(parseFloat(e(this).attr("rel"))),o.media.paused&&o.media.play()}),o.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){for(var i,n,o=0,s=mejs.TrackFormatParser.split2(t,/\r?\n/),r={text:[],times:[]};o<s.length;o++)if(this.pattern_identifier.exec(s[o])&&(o++,i=this.pattern_timecode.exec(s[o]),i&&o<s.length)){for(o++,n=s[o],o++;""!==s[o]&&o<s.length;)n=n+"\n"+s[o],o++;n=e.trim(n).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),r.text.push(n),r.times.push({start:0==mejs.Utility.convertSMPTEtoSeconds(i[1])?.2:mejs.Utility.convertSMPTEtoSeconds(i[1]),stop:mejs.Utility.convertSMPTEtoSeconds(i[3]),settings:i[5]})}return r}},dfxp:{parse:function(t){t=e(t).filter("tt");var i,n,o=0,s=t.children("div").eq(0),r=s.find("p"),a=t.find("#"+s.attr("style")),l={text:[],times:[]};if(a.length){var c=a.removeAttr("id").get(0).attributes;if(c.length)for(i={},o=0;o<c.length;o++)i[c[o].name.split(":")[1]]=c[o].value}for(o=0;o<r.length;o++){var u,d={start:null,stop:null,style:null};if(r.eq(o).attr("begin")&&(d.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(o).attr("begin"))),!d.start&&r.eq(o-1).attr("end")&&(d.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(o-1).attr("end"))),r.eq(o).attr("end")&&(d.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(o).attr("end"))),!d.stop&&r.eq(o+1).attr("begin")&&(d.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(o+1).attr("begin"))),i){u="";for(var h in i)u+=h+":"+i[h]+";"}u&&(d.style=u),0==d.start&&(d.start=.2),l.times.push(d),n=e.trim(r.eq(o).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),l.text.push(n),0==l.times.start&&(l.times.start=2)}return l}},split2:function(e,t){return e.split(t)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(e,t){var i,n=[],o="";for(i=0;i<e.length;i++)o+=e.substring(i,i+1),t.test(o)&&(n.push(o.replace(t,"")),o="");return n.push(o),n})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return"undefined"==typeof e.enterFullScreen?null:e.isFullScreen?"Turn off Fullscreen":"Go Fullscreen"},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?"Unmute":"Mute"},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(){return"Download Video"},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){return t.isContextMenuEnabled?(e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1):void 0}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;null!=e&&(clearTimeout(e),delete e,e=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,i){for(var n=this,o="",s=n.options.contextMenuItems,r=0,a=s.length;a>r;r++)if(s[r].isSeparator)o+='<div class="mejs-contextmenu-separator"></div>';else{var l=s[r].render(n);null!=l&&(o+='<div class="mejs-contextmenu-item" data-itemindex="'+r+'" id="element-'+1e6*Math.random()+'">'+l+"</div>")}n.contextMenu.empty().append(e(o)).css({top:i,left:t}).show(),n.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),i=parseInt(t.data("itemindex"),10),o=n.options.contextMenuItems[i];"undefined"!=typeof o.show&&o.show(t,n),t.click(function(){"undefined"!=typeof o.click&&o.click(n),n.contextMenu.hide()})}),setTimeout(function(){n.killControlsTimer("rev3")},100)}})}(mejs.$),_wAMD.define("legacy/mediaelement/mediaelement-and-player",function(){}),function(e,t){var i=[],n=function(e){var t=e.width();return t=t&&400>t?235>t?235:t:400},o=function(){t.each(i,function(){var e=t(this.container).parents(".wsite-html5audio"),i=n(e.parent());this.setPlayerSize(i,this.height),this.setControlsSize()})},s=function(o){function s(e,i){var n=t("#"+i.id).find("button");e.addEventListener("play",function(){n.blur()},!1),e.addEventListener("pause",function(){n.blur()},!1)}var r=t(".wsite-html5audio audio",o),a=!1;i=[],r.each(function(){var o,r=t(this),l=r.parents(".wsite-html5audio"),c=r.attr("data-track"),u=r.attr("data-artist"),d=r.attr("data-autostart");r.attr("preload","none"),d="yes"===d?!0:!1,d&&!a?a=!0:d=!1,o=n(l.parent());var h={audioWidth:o,enableKeyboard:!1,mode:"auto_plugin",pluginPath:"//cdn1.editmysite.com/editor/libraries/mediaelement/",success:function(t,i,n){e.mobile_navigation&&e.mobile_navigation.resizeScreen&&e.mobile_navigation.resizeScreen(),s(t,n)}},p=r.attr("src");("undefined"==typeof p||null===p||""==p||"/"==p.charAt(p.length-1))&&(h.type="audio/mp3"),d&&(h.success=function(e,t,i){i&&i.play&&("native"===e.pluginType&&i.load(),s(e,i),i.play())});var f=new mejs.MediaElementPlayer(r,h);i.push(f);var m=l.find(".mejs-container");if(m.length>0){var g=c&&c.length>0,v=u&&u.length>0,b='<div class="wsite-mejs-track">';g&&v?b+='<span class="wsite-mejs-title">'+c+"</span>"+'<span class="wsite-mejs-track-sep"> - </span>'+'<span class="wsite-mejs-artist">'+u+"</span>"+"</div>":g?b+='<span class="wsite-mejs-title">'+c+"</span>"+"</div>":v?b+='<span class="wsite-mejs-artist">'+u+"</span>"+"</div>":b="",m.append(b)}})};t(function(){return e.EDITOR?(editorApp.vent.on("themeRendered",o),void 0):(s(),o(),t(window).load(o),void 0)}),e.MediaElement={},e.MediaElement.init=s}(Weebly,Weebly.jQuery),_wAMD.define("legacy/mediaelement/media_element_renderer",["legacy/weebly_events","editor/app"],function(e){return function(){var t;return t||e.Weebly.MediaElement}}(this)),function(e){var t=_W.tl("Where do you want to share?"),i=_W.tl("Authorizing..."),n=_W.tl("There was a problem. Please try again."),o=_W.tl("Please authorize the Weebly app to share."),s=_W.tl("You don't have any Facebook pages."),r=_W.tl("Learn more at Facebook"),a=function(n){if(n=e.extend({onChoose:function(){},onClose:function(){},dialog:null},n),n.dialog)var o=null,s=e("#publishing-status").find(".fb-connect-dialog"),r=n.dialog;else var o=e("#fb-connect-dialog-title"),s=e("#fb-connect-dialog-content").html(e("#fb-connect-dialog-drawer").html()),r=new Weebly.Dialog(e("#fb-connect-dialog")[0],{modal:!0,onClose:n.onClose});var a=s.find(".fb-share-choice"),l=a.filter(".fb-share-choice-profile"),c=a.filter(".fb-share-choice-page"),u=a.filter(".fb-share-choice-pagelist"),d=a.find(".fb-share-choice-button"),h=s.find(".fb-share-error"),p=s.find(".fb-share-notice"),f={},m={button:function(t){return e(d["profile"===t?0:1])},reset:function(){d.removeClass("choosing").each(function(t,i){var i=e(i);i.text(i.data("text"))})},disable:function(e){this.reset();var t=this.button(e);t.addClass("choosing").data("text",t.text()).text(i)}},g={error:function(e,t,i){this.reset(),h.text(e).show(),this.link(h,t,i)},notice:function(e,t,i){this.reset(),p.text(e).show(),this.link(p,t,i)},reset:function(){h.add(p).hide().text("")},link:function(e,t,i){t&&i&&(e.append(" ").append('<a href="'+i+'" target="_blank">'+t+"</a>"),e.addClass("with-link"))}};return e.extend(f,{init:function(){this.locked=!1,this.buttons=m,this.message=g,this.bind()},reset:function(){this.unlock(),this.hidepage(),this.buttons.reset(),this.message.reset()},open:function(){r.open(),o&&o.text(t)},close:function(){r.close()},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},choose:function(e){this.locked||(this.reset(),this.lock(),this.buttons.disable(e),n.onChoose(this,e))},pickpage:function(t){this.unlock();var i=e.Deferred();if(t){var n=u.find(".fb-share-pagelist-pages"),o=n.html(t).children();1==o.length?i.resolve(e(o[0]).data("page-id")):(o.click(function(){i.resolve(e(this).data("page-id"))}),c.hide(),u.show())}return i.promise()},hidepage:function(){u.hide(),c.show()},bind:function(){l.click(function(){f.choose("profile")}),c.click(function(){f.choose("page")})}}),f.init(),n.dialog||f.open(),f},l=function(){var t=e.Deferred();return new Ajax.Request(ajax,{bgRequest:!0,parameters:{pos:"get_facebook_pages",cookie:document.cookie,with_html:"1",token:Weebly.RequestToken},onSuccess:function(i){i&&i.responseJSON&&e.isArray(i.responseJSON.pages)?i.responseJSON.pages.length?t.resolve(i.responseJSON.html,i.responseJSON.pages):t.reject("nopages"):t.reject("failure")},onFailure:function(){t.reject("failure")},onException:function(){t.reject("exception")}}),t.promise()},c=function(t){params={"with-pages":t?"1":"0"};var i=e.Deferred();return new Weebly.BrowserWindow.FacebookAuth({params:params,onSuccess:function(){i.resolve()},onFailure:function(e){var t="external"==e.group&&"user_denied"==e.error;i.reject(t?"refused":"failure")},onCancel:function(){i.reject("cancel")}}),i.promise()},u=function(t){var i=e.Deferred();return new Ajax.Request(ajax,{bgRequest:!0,parameters:{pos:"link_site_with_facebook",cookie:document.cookie,fbPageId:t,token:Weebly.RequestToken},onSuccess:function(e){return e&&e.responseJSON&&e.responseJSON.status?"success"!=e.responseJSON.status?(i.reject(e.responseJSON.reason),void 0):(i.resolve(e.responseJSON.profile),void 0):(i.reject("failure"),void 0)},onFailure:function(){i.reject("failure")},onException:function(){i.reject("exception")}}),i.promise()},d=function(t){var i=function(t,i){return"page"==i?c(!0).pipe(l).pipe(e.proxy(t.pickpage,t)):c()},d=e.Deferred();return new a({dialog:t,onClose:function(){d.resolve("close")},onChoose:function(e,a){i(e,a).pipe(u).done(function(i){d.resolve("success",i),t||e.close()}).fail(function(t){switch(e.reset(),t){case"cancel":case"refused":e.message.error(o);break;case"nopages":var i="http://facebook.com/help/?page=203955942973503";e.message.notice(s,r,i);break;default:e.message.error(n)}})}}),d.promise()},h=function(e,t){var i=function(){return t.onStart(),d().done(function(e,i){"success"==e?t.onSuccess(i):"close"==e&&t.onClose()}).fail(t.onFailure),!1};t.autoLaunch?i():e.click(i)},p=function(e,t,i){var n=t.find(".titled-box-body"),o=t.find("#exportText"),s=o.parents(".weebly-dialog"),r=t.find(".publish-share-fb-connect"),a=o.position().left,l=o.position().top,c=s.position().top,u=n.height(),h=null,p=n.css("overflow"),f=300,m=function(){o.animate({left:a,top:l},function(){r.hide()}),n.animate({height:u},function(){n.css("overflow",p)}),s.animate({top:c}),n.removeClass("showing-connect")},g=function(){o.css("left",a),o.css("top",l),n.css("height","auto"),n.css("overflow",p),n.removeClass("showing-connect"),s.animate({top:c}),o.css({position:"static"})};s.animate({top:c-(f-u)/2}),n.animate({height:f},function(){n.css("overflow","hidden")}),n.addClass("showing-connect"),o.css({position:"absolute",top:o.position().top,left:a}).animate({left:-o.width()}),i.backButton&&i.backButton.click(function(){i.onClose(),m()}),i.pubWindow&&(Weebly.PublishWindow.win.events.addListener("close",g),h=Weebly.PublishWindow.win),i.onStart(),d(h).done(function(e,t){"success"==e&&(m(),i.onSuccess(t))}).fail(i.onFailure)},f=function(){return e.Deferred(function(e){new Ajax.Request(ajax,{bgRequest:!0,parameters:{pos:"unlink_site_with_facebook",cookie:document.cookie,token:Weebly.RequestToken}}),e.resolve()}).promise()};e.fn.fbConnect=function(t){var i=e(this);t=e.extend({autoLaunch:!1,dialog:null,backButton:null,pubWindow:!1,onSuccess:function(){},onStart:function(){},onFailure:function(){},onClose:function(){}},t),t.dialog?p(i,t.dialog,t):h(i,t)},e.fn.fbDisconnect=function(t){e(this).click(function(){return f().done(t),!1})}}(Weebly.jQuery),_wAMD.define("legacy/weebly_facebook_connect",["legacy/weebly_dialog","legacy/classes/BrowserWindow/FacebookAuth","legacy/classes/PublishWindow/PublishWindow"],function(){}),function(e){var t=Class.create(e.Element,{processHTML:function($super,e){var t=require("config"),i=null,n=null,o=[];return e=$super(e),o=jQuery.parseHTML(e),o&&jQuery(o).filter(".element").length&&(i=jQuery(e).find(".wsite-button-inner"),i.length&&(n=i.text(),n&&(e=i.html(n).closest(".element")[0].outerHTML))),e=e.replace(/<a /gi,"<span "),e=e.replace(/<\/a>/gi,"</span>"),t.chromeless&&e.replace(/javascript:;/gi,""),e},afterRender:function($super,e,t){$super(e,t);var i=this,n=e.down(".wsite-button-inner");makeElementContentEditable(n,{richTextControls:!1,saveCallback:function(e,t){t=t||_W.tl("Button Text"),i.setPropertyResult("<!TEXT!>",t),i.save(),i.rerender()}}),n&&(n.style.cursor="text")},getPropertyResult:function(e){var t=this.getContentField().getProperty(e);return t?t.property_result:void 0},setPropertyResult:function(e,t){var i=this.getContentField().getProperty(e);i&&(i.property_result=t)},save:function(){this.getContentField().saveProperties()}});e.Element.register("59396708",t)}(Weebly),_wAMD.define("legacy/classes/elements/ButtonElement",["legacy/classes/Element","legacy/classes/HoverToolbar","legacy/weebly_linker"],function(){}),_wAMD.define("legacy/classes/elements/SocialElement",["config","legacy/classes/Element","legacy/classes/HoverToolbar"],function(e){function t(e,t){var i=Sortable.sequence(e);t.id.match(/_(\d+)$/)[1];var n,o,s=[],r=[],a=[],l=[];return e.childElements().each(function(e){e.hasClassName("social-badge-item")&&(e===t?(n=e.id.match(/_(\d+)$/)[1],o=e.getAttribute("data-social")):e.visible()?(s.push(e.id.match(/_(\d+)$/)[1]),a.push(e.getAttribute("data-social"))):(r.push(e.id.match(/_(\d+)$/)[1]),l.push(e.getAttribute("data-social"))))}),s.push(n),i=s.concat(r),a.push(o),a=a.concat(l),Sortable.setSequence(e,i),e.insert({bottom:e.childElements()[0]}),a}function i(e,t){var i,o,r,l,c="",u="",d=n(t),h=1;return c+='<ul class="social-badge">',d.each(function(n){a(n)&&(i=t.badges[n],o=s(),r=i.active&&i.url,l=i.url===!0||!i.url,c+='<li id="'+e+"_"+h++ +'" class="social-badge-item social-'+n+'" data-social="'+n+'" style="'+(r?"":"display:none;")+'">'+'<div class="social-badge-item-inner">'+'<span class="social-handle"></span>'+'<label class="social-label">'+'<span class="social-textinput '+(l?"social-textinput-empty":"")+'">'+'<span class="social-textinput-hint">'+availableBadges[n].hint+"</span>"+'<input type="text" name="'+n+'" id="'+o+'" /> '+"</span>"+"</label>"+'<span class="social-delete"></span>'+"</div>"+"</li>",u+='<li class="social-dropdown-item social-'+n+'" data-social="'+n+'">'+availableBadges[n].display+"</li>")}),c+='<li class="social-add"><div class="social-add-inner"><a class="social-add-button" href="#">'+_W.tl("Add more")+"</a>"+'<ul class="social-add-list">'+u+"</ul>"+"</div>"+"</li>",c+="</ul>"}function n(e){var t=(e.badge_order||[]).slice(0);return t.concat(Object.keys(e.badges)).uniq()}function o(e){e=e||{};for(var t,i=0;i<d.length;i++)t=e[d[i]]||{},e[d[i]]={url:t.url||!0,active:!0};return e}function s(){return"social-"+p++}function r(e){for(var t in availableBadges)e[t]?"object"!=typeof e[t]&&(e[t]=e[t]===!0?{url:!0,active:!0}:{url:e[t].length?e[t].replace(/^\w+:\/\//,""):void 0,active:e[t].length?!0:!1}):e[t]={url:void 0,active:!1};return e}function a(e){return"undefined"!=typeof currentThemeData.tmpSocialIconFont&&1==currentThemeData.tmpSocialIconFont?!0:-1!==l().indexOf(e)}function l(){return currentThemeData.social.length?currentThemeData.social:c}window.availableBadges={facebook:{display:"Facebook",hint:_W.tl("facebook.com/example")},twitter:{display:"Twitter",hint:_W.tl("twitter.com/example")},linkedin:{display:"Linkedin",hint:_W.tl("linkedin.com/in/example")},mail:{display:"Mail",hint:_W.tl("example@example.com")},flickr:{display:"Flickr",hint:_W.tl("flickr.com/photos/example")},pinterest:{display:"Pinterest",hint:_W.tl("pinterest.com/example")},plus:{display:"Google+",hint:_W.tl("plus.google.com/example")},rss:{display:"RSS",hint:_W.tl("example.com/feed.rss")},vimeo:{display:"Vimeo",hint:_W.tl("vimeo.com/example")},yahoo:{display:"Yahoo!",hint:_W.tl("yahoo.com/example")},youtube:{display:"YouTube",hint:_W.tl("youtube.com/user/example")}};var c=["facebook","twitter","linkedin","mail","flickr","pinterest","plus","rss","vimeo","yahoo","youtube"];if("undefined"!=typeof socialIconFont&&1==socialIconFont){var u={dribbble:{display:"dribbble",hint:_W.tl("dribbble.com/example")},instagram:{display:"Instagram",hint:_W.tl("instagram.com/example")}};window.availableBadges=jQuery.extend(window.availableBadges,u),c.push("dribbble","instagram")}var d=["facebook","twitter","linkedin","mail"],h=Class.create(Weebly.Element,{initialize:function($super,e,t){$super(e,t),this.formatSocialData()},formatSocialData:function(){var e=this.getDataProperty();e=e?e.evalJSON():{},e.badges&&$H(e.badges).keys().length||(e.badges=o()),e.badges=r(e.badges),this.skipGetProperty=!1,this.data=e},"<!BADGES!>":function(){var t,i,o,s,l,c,u,d,h="",p=[],f=!1;if(this.data&&this.skipGetProperty||this.formatSocialData(),t=this.data,i=this.data.badges||r(t.badges),o=n(t),e.chromeless&&(f=this.showPlaceholder()),f)h='<a><span class="icon icon-social"></span>'+_W.tl("Add Social Icons")+"</a>";else{for(var m=0;m<o.length;m++)l=o[m],s=i[l],c="",s.active&&s.url&&a(l)?void 0===u?(u=m,c="first-child"):d=m:c="hidden",p.push('<a class="'+c+" wsite-social-item wsite-social-"+l+'" href="#" data-social="'+l+'" onclick="return false">'+'<span class="wsite-social-item-inner"></span>'+"</a>");d&&(p[d]=p[d].slice(0,10)+"last-child "+p[d].slice(11)),h=p.join("")}return h},getDataProperty:function(){var e=this.getContentField();return e.getProperty("<!DATA!>")?e.getProperty("<!DATA!>").property_result:void 0},showPlaceholder:function(){var e=!1,t=this.getDataProperty();if(!t)return e=!0;t=t.evalJSON(),e=!0;for(var i in t.badges)t.badges[i].active&&(e=!1);return e},afterRender:function($super,t,i){$super(t,i);var n,o,s,r=this,l=r.li.up().className.match(/weebly-single-area/),c=r.li.down("span.wsite-social"),u=r.li.down(".element"),d=!1;if(c&&u){n=c.childElements(),e.chromeless&&(d=this.showPlaceholder()),!l||e.chromeless||(i&&r.toolbar||r.renderToolbar(),r.toolbar.setTargetElement(t.down(".wsite-social"))),d?r.li.down(".element").addClassName("tablet-placeholder"):r.li.down(".element").removeClassName("tablet-placeholder");for(var h=0;h<n.length;h++)o=n[h].getAttribute("data-social"),s=this.data.badges[o],s&&s.active&&s.url&&a(o)?n[h].removeClassName("hidden"):n[h].addClassName("hidden")}},renderToolbar:function(){var e=this,t=e.toolbar=new Weebly.HoverToolbar({hoverElement:e.li,alignElement:e.li,parent:"scroll_container",beforeShow:e.handleToolbarShow.bind(e),afterHide:e.handleToolbarHide.bind(e),overflow:{alwaysVisible:!0,color:"#fff"}}),i=t.getInnerElement();e._renderBadgeContainer(i,function(){t.setAutoHide(!1)}),t.getElement().observe("mousedown",function(e){e.stopPropagation()}),e.bodyMousedown=function(){"none"!=t.getElement().style.display&&(t.setAutoHide(!0),t.hide(),e.recordTextInputs(),e.save())},$(document.body).observe("mousedown",e.bodyMousedown)},_renderBadgeContainer:function(e,t){var n=this,o=n.data,s=o.badges;n.badgeContainer=e,n.skipGetProperty=!0,e.innerHTML=i(n.id,o),e.addClassName("social-toolbar"),e.addClassName("w-ui"),e.down("a.social-add-button").observe("click",n.handleDropdownShow.bind(n)),e.down("ul.social-add-list").observe("click",n.handleAddBadge.bind(n)),e.down("li.social-add").observe("mouseleave",n.handleDropdownLeave.bind(n)),e.select("li.social-badge-item").each(function(e){var i=e.down("input[type=text]"),o=i.up(),r=i.name,a=s[r];e.down(".social-delete").observe("click",n.handleRemoveBadge.bind(n)),i.observe("focus",function(){t&&t()}).observe("keyup",function(){this.value?(o.removeClassName("social-textinput-empty"),s[r].url=s[r].url||!0,e.hasClassName("social-item-active")||(e.addClassName("social-item-active"),s[r].active=!0),n.rerender()):(o.addClassName("social-textinput-empty"),e.removeClassName("social-item-active"),n.rerender())}),a.active?(e.addClassName("social-item-active"),i.value=a.url===!0?"":a.url):e.removeClassName("social-item-active")}),Sortable.create(e.down("ul"),{handle:"social-handle",only:"social-badge-item",endeffect:function(){o.badge_order=e.select("input[type=text]").map(function(e){return e.name}),n.rerender(),n.save()}}),n.recordTextInputs=function(){e.select("li.social-badge-item").each(function(e){var t=e.down("input[type=text]");t.value.length&&(o.badges[t.name].url=t.value.strip())});var t=n.getContentField(),i=t.getProperty("<!DATA!>");setContentFieldProperty(t.ucfid,i.ucfpid,Object.toJSON(o))}},handleRemoveBadge:function(e){var t=$(e.target).up("li.social-badge-item");t.removeClassName("social-item-active");var i=this;this.data.badges[t.getAttribute("data-social")].active=!1,this.save(),t.hide(),i.skipGetProperty=!0,t.next("li.social-add").show();var n=!0;for(var o in this.data.badges)if(this.data.badges[o].active===!0){n=!1;break}n?(this.disableSocialBadges(),this.rerender()):(this.rerender(),this.toolbar&&(this.toolbar.hide(),this.toolbar.show()))},disableSocialBadges:function(){var e=getAreaInstanceForElement(this.li.up(".weebly-area"));e&&"social"===e.type&&!e.name&&(e.hide(),updateDesignElements(),Weebly.mobile.updateAreaOptions(),this.destroyToolbar(),this.data.badges=o(this.data.badges),this.save(),Weebly.view.isMobileView||showTip(_W.tl('Social icons hidden. To turn it back on, navigate to "Design Options."'),$("weebly_tab_themes"),"y","social",void 0,300))},handleAddBadge:function(e){var i,n,o=this,s=$(e.target).up("ul.social-badge"),r=s.childElements(),a=e.target.getAttribute("data-social"),l=!0;r.each(function(e){e.getAttribute("data-social")===a&&(o.data.badge_order=t(s,e),e.show().down("input").focus(),i=e.down("span.social-textinput").down("input"),n=o.data.badges[a].url=o.data.badges[a].url||!0,i.value=n!==!0&&n?n:"",0===i.value.length?e.down("span.social-textinput").addClassName("social-textinput-empty"):e.addClassName("social-item-active"),o.data.badges[a].active=!0,o.skipGetProperty=!0,o.rerender()),e.visible()||(l=!1)}),l&&s.down("li.social-add").hide(),s.down("li.social-add").select(".active").invoke("removeClassName","active"),o.toolbar&&(o.toolbar.hide(),o.toolbar.show())},handleDropdownShow:function(e){e.preventDefault();var t=$(e.target),i=t.hasClassName("active"),n=[];if(t.up(".social-badge").childElements().each(function(e){e.className.match(/social-badge-item/)&&e.visible()&&n.push(e.getAttribute("data-social"))}),t.next().childElements().each(function(e){-1===n.indexOf(e.getAttribute("data-social"))?$(e).show():$(e).hide()}),t.toggleClassName("active",i).up().toggleClassName("active",i),!i){var o=Math.max($(document.body).getHeight(),document.viewport.getHeight()),s=t.nextSibling,r=safeCumulativeOffset(s).top+s.getHeight();r>o&&s.up(".social-toolbar").addClassName("dropdown-overflow")}},handleDropdownLeave:function(e){var t=$(e.target).up("li.social-add");t&&(t.select(".active").invoke("removeClassName","active"),t.up(".social-toolbar").removeClassName("dropdown-overflow"))},handleToolbarShow:function(){var e=this,t=0;if(Weebly.Permissions&&!Weebly.Permissions.allow_design&&Weebly.siteContext.getArea("social")&&Weebly.siteContext.getArea("social").element.id===this.id)return e.toolbar.destroy(),void 0;for(var i in e.data.badges)e.data.badges[i].active&&a(i)&&(t+=1);t===l().length&&e.toolbar.getElement().down(".social-add").hide()},handleToolbarHide:function(){var e=this,t=!1,i=e.badgeContainer,n=i.down("ul.social-badge").childElements();i.select(".active").invoke("removeClassName","active");var o,s=!1;n.each(function(i){o=$(i),i.className.match(/social-badge-item/)&&o.visible()&&(""===o.down("input").value&&e.data.badges[i.getAttribute("data-social")].url!==!0?(i.hide(),e.data.badges[i.getAttribute("data-social")]={url:void 0,active:!1},n.find(function(e){return e.className.match(/social-add/)}).show(),t=!0):s=!0)}),s||this.disableSocialBadges(),e.skipGetProperty=!0,t&&e.rerender()},reposition:function($super){$super(),this.toolbar&&this.toolbar.position()},save:function(){var e=this.getContentField();e.getProperty("<!DATA!>").property_result=Object.toJSON(this.data),e.saveProperties()},unrender:function($super){$super(),this.destroyToolbar()},destroyToolbar:function(){this.toolbar&&($(document.body).stopObserving("mousedown",this.bodyMousedown),this.toolbar.destroy(),delete this.toolbar)}}),p=1;Weebly.SocialElement=h,Weebly.Element.register("35527740",h)}),function(e,t){var i,n=!1,o=Class.create(e.Element,{mediaElement:null,afterRender:function($super,e,o){$super(e,o);var s=t(this.li),r=this.findWidth(s),a=this.getPropertyResult("<!TRACKTITLE!>"),l=this.getPropertyResult("<!ARTIST!>"),c=s.find("audio");c.attr("preload","none");var u=this.getPropertyResult("<!AUTOSTART!>");u="yes"===u?!0:!1,this.id==i&&u===!1&&(n=!1),!n&&u?(n=!0,i=this.id):u=!1,u&&c.attr("autoplay","autoplay");var d={audioWidth:r,enableKeyboard:!1,isVideo:!1,pluginPath:"/weebly/libraries/mediaelement/",mode:"auto_plugin",success:this.blurControls},h=c.attr("src");("undefined"==typeof h||null===h||""==h)&&(d.type="audio/mp3");for(var p=mejs.players.length,f=0;p>f;f++){var m=mejs.players[f];if(m.id===this.id){m.paused||m.ended||m.pause(),m.remove(),mejs.players.splice(f,1);break}}this.mediaElement=new mejs.MediaElementPlayer(c,d),this.mediaElement.id=this.id,this.mediaElement.autostart=u;var g=s.find(".mejs-container");if(g.length>0){var v=a&&a.length>0,b=l&&l.length>0,y='<div class="wsite-mejs-track">';v&&b?y+='<span class="wsite-mejs-title">'+a+"</span>"+'<span class="wsite-mejs-track-sep"> - </span>'+'<span class="wsite-mejs-artist">'+l+"</span>"+"</div>":v?y+='<span class="wsite-mejs-title">'+a+"</span>"+"</div>":b?y+='<span class="wsite-mejs-artist">'+l+"</span>"+"</div>":y="",g.append(y)}},blurControls:function(e,i){var n=t(i).closest(".mejs-container").find("button");e.addEventListener("play",function(){n.blur()},!1),e.addEventListener("pause",function(){n.blur()},!1)},getPropertyResult:function(e){var t=this.getContentField().getProperty(e);return t?t.property_result:void 0},reposition:function($super){$super(),this.setWidth()},findWidth:function(e){var t=e.innerWidth();return t=t&&400>t?235>t?235:t:400},setWidth:function(){var e=t(this.li),i=this.findWidth(e);this.mediaElement.setPlayerSize(i,this.mediaElement.height),this.mediaElement.setControlsSize()}});e.Element.register("67748238",o),t(function(){var t=function(e){var t=!1;"updateList"==e&&(t=!0);for(var i=0,o=mejs.players.length;o>i;i++){var s=mejs.players[i];s.paused||s.ended||s.pause(),s.hasFocus=!1,t&&s.remove()}t&&(mejs.players=[],n=!1)};e.Events.addListener("navPageChange",t)})}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/elements/AudioElement",["legacy/classes/Element","legacy/weebly_events"],function(){}),function(e){var t=Class.create(e.Element,{afterRender:function($super,t,i){$super(t,i),this.setMapType(),e.Events.addListener("viewChange",{bind:this,func:this.setMapType})},setMapType:function(){if(jQuery){var t=jQuery(this.li),i=t.find("iframe"),n=i.attr("src"),o=require("config");if(n){if(n.indexOf("&touch=")>=0){var s=e.view.isMobileView||o.chromeless?"1":"0";n=n.replace(/&touch=[01]/,"&touch="+s)}else n=e.view.isMobileView||o.chromeless?n+"&touch=1":n+"&touch=0";i.attr("src",n)}}}});e.Element.register("42844424",t)
}(Weebly),_wAMD.define("legacy/classes/elements/MapElement",["legacy/classes/Element","legacy/weebly_events"],function(){}),function(e,t){var i=Class.create(e.Element,{afterRender:function($super,e,i){$super(e,i),t(e).find("form").on("submit",this.handleSubmit.bind(this)).find("span.wsite-search-element-submit").on("click",this.handleSubmit.bind(this)).find("input").placeholder()},handleSubmit:function(e){var t=Element.down(e.target,"input.wsite-search-element-input");hideTip("tipsearch-info",1),showTip(_W.tl("Search will work on the published site"),t,"y","search-info",1,225),e.preventDefault()}});e.Element.register("90122486",i)}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/elements/SearchElement",["legacy/classes/Element"],function(){}),_wAMD.define("legacy/classes/elements/PlatformElement",["jquery","underscore","legacy/classes/Element"],function(e,t,i){var n=window.Class.create(i,{initialize:function($super,e,t){$super(e,t);var i=this;i.context=t},afterRender:function($super,i,n){$super(i,n);var o=this;e(i).find(".platform-element-child-placeholder").each(function(i,n){var s=e(n),r=s.data("field-name"),a=s.data("field-type"),l=s.data("default"),c=r+":"+a,u=o.children[c];if(u){var d=o.context.loadElement(u);d.li=e(d.renderHTML())[0],e(d.li).addClass("platform-element-child"),e(d.li).attr("data-field-name",r),e(d.li).attr("data-field-type",a),s.replaceWith(d.li),d.afterRender(d.li),"44785763"==u.eid&&l&&t.each(d.content_fields,function(t){"93182214"==t.cfid&&(""==t.contentFieldContent||t.contentFieldContent.match(_W.tl("Click here to edit.")))&&e(d.li).find(".editable-text").text(l)})}}),window.inEditor&&window.inEditor()&&e(i).find("iframe").length>0&&e(i).find(".platform-element-contents").prepend("<div class='platform-element-overlay'> </div>")}});return window.PlatformElement=n,i.register("75699656",n),n}),_wAMD.define("tpl!elements/spacer",[],function(){return'<span class="wsite-spacer-label">{{label}}</span>'}),_wAMD.define("editor/build/elements/SpacerElement",["jquery","underscore","mustache","config","tpl!elements/spacer","legacy/classes/Element","jquery-ui/resizable"],function(e,t,i,n,o,s){function r(){Weebly.Elements.selectElement(this),window.isDraggingElement=!0}function a(e,t){window.isDraggingElement=!1;var i=this.getContentField();i.getProperty("<!HEIGHT!>").property_result=t.size.height+"px",i.saveProperties()}var l=window.Class.create(s,{afterRender:function($super,s,l){$super(s,l);var c=e(s),u=c.find(".element-box").addClass("w-handle").find(".element");u.append(i.render(o,{label:window._W.tl("Spacer")})),n.chromeless||u.data("ui-resizable")||(c.addClass("wsite-spacer-li"),u.resizable({handles:"s",start:r,stop:t.bind(a,this)}),u.find(".ui-resizable-handle").css("z-index",""))},unrender:function($super){var t=e(this.li).find(".element");t.data("ui-resizable")&&t.resizable("destroy"),$super()}});return s.register("27280689",l),l}),_wAMD.define("editor/build/elements/ImageTextElement",["jquery","../images/utils","../utils","legacy/classes/elements/LegacyElement","legacy/weebly_utils","legacy/weebly_element_controls"],function(e,t,i,n){function o(){e(this).closest(".element").addClass("inside-delete-hover")}function s(){e(this).closest(".element").removeClass("inside-delete-hover")}function r(){Weebly.askDelete.call(this,a,window._W.tl("Delete image?"))}function a(t,n){n();var o,s=t.closest("ul.weebly-content-area"),r=window.getAreaInstanceForElement(s.parent()[0]),a=window.getElementParentString(t[0]);o=!e(".wsite-com-long-description").length||r&&r.name?r&&r.context.pageID?!1:!0:!0;var c=t.find(".element");c.length&&(window.xhrUploading=c[0].id),window.pushLoading(),Weebly.Editor.RPC.Elements.removeImageTextImage(window.currentPage,o,r&&r.name||"",t[0].id.replace(/[^\d]/g,""),a).always(l),null!==a.match(/-col/)&&i.removeEmptyColumns(),i.renderPage(currentPage)}function l(){window.popLoading(),window.xhrUploading=null}var c=window.Class.create(n,{afterRender:function($super,t,i){$super(t,i);var n=e(t);if(i){var r=n.find("img");r.data("ui-resizable")&&(r=r.closest(".ui-wrapper")),n.find(".element").eq(0).css("width",r.outerWidth(!0)+"px")}e("<div>",{"class":"w-delete-outer",html:'<div class="w-delete" title="'+window._W.tl("Delete Image")+'"></div>',on:{mouseover:o,mouseout:s},appendTo:n.find(".imgPusher").closest(".element")})}});return e(document).on("click",".element > .w-delete-outer",r),Weebly.Element.register(t.CURRENT_PARAGRAPH_IMAGE_ELEMENT,c),c}),_wAMD.define("tpl!elements/customhtml",[],function(){return'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n	<head>\n		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n		\n		<link rel=\'stylesheet\' href=\'{{{ sites_css_url }}}\' type=\'text/css\' />\n\n		{{ #theme_css_url }}\n		<link rel=\'stylesheet\' href=\'{{{ theme_css_url }}}\' type=\'text/css\' title="wsite-theme-css" />\n		{{ /theme_css_url }}\n\n		{{ #theme_css }}\n		<style rel=\'stylesheet\' type=\'text/css\' title="wsite-theme-css" >{{{ theme_css }}}</style>\n		{{ /theme_css }}\n\n		<script type=\'text/javascript\' src=\'{{{ jquery_url }}}\'></script>\n	</head>\n	<body style=\'margin: 0; padding: 0; background: transparent; min-height:10px; _height:10px\' class="wsite-theme-{{ theme }}" onclick="parent.clickHandler(event, \'{{ ucfid }}\');">\n		<div id="icontent">\n			<div id="secondlist">\n				<div class="paragraph" id="customhtml-content" style="text-align:{{ align }};">\n					{{{ content }}}\n				</div>\n			</div>\n		</div>\n	</body>\n</html>\n'}),_wAMD.define("editor/build/elements/CustomHTMLElement",["jquery","underscore","mustache","config","legacy/classes/elements/LegacyElement","tpl!elements/customhtml","tablet/api/external"],function(e,t,i,n,o,s,r){var a=window.Class.create(o,{afterRender:function($super,o,a){if(!a){var l=this.getContentField(),c=l.getProperty("<!HTML!>").property_result;c=c.replace(/<script[^>]*www.clickbook.net[^>]*cb_mode1\.js[^>]*>\s*<\/script>/i,"");var u=e(o).find("iframe"),d=u[0].contentWindow||u[0],h=u.contents()[0],p=e("#wsite-theme-"+window.currentTheme+"-file");if(p.length)var f=p.attr("href");else f="";if(n.chromeless)var m=p.html();var g=e('script[src*="jquery"]').eq(0).attr("src"),v=e('link[href*="sites.css"]').eq(0).attr("href");d.ucfid=l.ucfid;var b=null;d.resizeFrame=function(){if(this.jQuery){var e=this.jQuery("body").outerHeight();e>0&&b!==e&&this.parent.resizeCustomHtml&&(b=e,this.parent.resizeCustomHtml(this.ucfid),r.forceDocumentSizeChange())}},d.setContent=function(e){h.open(),h.write(i.render(s,{theme:window.currentTheme,align:l.getProperty("<!ALIGN!>").property_result,content:e,jquery_url:g,sites_css_url:v,theme_css_url:f,theme_css:m,ucfid:l.ucfid})),h.close()},d.updateAlign=function(e){this.jQuery&&e&&this.jQuery("#customhtml-content").css({"text-align":e})},setInterval(t.bind(d.resizeFrame,d),500),d.setContent(c)}}});return Weebly.Element.register("92495494",a),a}),function(e){function t(){function t(t){var i=window.getElementObject(t),n=!1;return i?i.context&&i.context!==o&&(n=!0,delete i.context.elementsByID[i.id]):i=e.Element.load(t,o),o.elementsByID[i.id]=i,hashEach(i.content_fields,function(e,t){n&&delete i.context.contentFieldsByID[t.ucfid],o.contentFieldsByID[t.ucfid]=t}),n&&(i.context=o),i}function i(e){return e.map(function(e){return t(e,o)})}function n(e){var t=window.getElementObject(e);hashEach(t.content_fields,function(e,t){delete o.contentFieldsByID[t.ucfid]}),delete o.elementsByID[t.id];var i=jQuery("#inside_"+t.id);return jQuery(i).remove(),t.unrender(),t}var o=this;o.elementsByID={},o.contentFieldsByID={},o.loadElement=t,o.loadElements=i,o.deleteElement=n}e.ElementContext=t}(Weebly),_wAMD.define("legacy/classes/ElementContext",["legacy/classes/Element","legacy/classes/elements/LegacyElement","legacy/classes/elements/FormElement","legacy/classes/elements/ButtonElement","legacy/classes/elements/MultiColumnElement","legacy/classes/elements/SocialElement","legacy/classes/elements/AudioElement","legacy/classes/elements/MapElement","legacy/classes/elements/SearchElement","editor/build/elements/SpacerElement","editor/build/elements/ImageElement","editor/build/elements/TextElement","legacy/classes/elements/CommerceProduct","editor/build/elements/CustomHTMLElement"],function(e){return function(){var t;return t||e.Weebly.ElementContext}}(this)),function(e){function t(t){t=t.replace(/wSlideshow\.render\((\{.*?\})\)/g,function(t,i){var n=i;return n=n.replace(/images:\}$/,"images:[]}"),n=n.evalJSON(),e.Slideshow.generateHTML(n.elementID,n),setTimeout(function(){whenThemeCSSLoaded(function(){e.Slideshow.init(n.elementID)})},0),""});var i=require("config");return i.chromeless&&(t=t.replace(/(['"\(])\s*(\/uploads|weebly\/)/gi,"$1http://"+configSiteName+"$2"),t=t.replace(/(['"'\(])\s*\/\//gi,"$1http://")),t}var i=Class.create(e.Area,{initialize:function($super,t,i){$super(t,i),this.elID="secondlistParent",this.template=t.template,t.main_elements&&(this.main=new e.ElementArea({elements:t.main_elements},i)),t.sidebar_elements&&(this.sidebar=new e.ElementArea({elements:t.sidebar_elements},i))},getHTML:function(){return"<div id='"+this.elID+"'"+" class='weebly-area wsite-not-footer'"+">"+this.getInnerHTML()+"</div>"},getInnerHTML:function(){return"<ul id='secondlist' class='weebly-content-area'>"+t(this.template)+"</ul>"},afterRender:function($super){$super();var t=e.jQuery;currentPage.replace(/^(\d+).*/,"$1");var i,n=this.main;n?(n.elID=t(".blog-content").children('[id$="-blog"]').attr("id"),n.el=$(n.elID),n.listElID="secondlist-blog",n.beforeRender(),n.el.innerHTML="<div>"+n.getInnerHTML()+"</div>",n.afterRender(),$("secondlist-blog").removeClassName("weebly-content-area").setStyle({margin:0,padding:0,width:"100%","min-height":"400px",position:"relative"})):(i=t(this.el),e.MediaElement.init(i));var o=this.sidebar;o&&(o.elID=$$(".blog-sidebar .column-blog")[0].id,o.el=$(o.elID),o.beforeRender(),o.el.innerHTML='<div class="blog-sidebar-separator">'+o.getInnerHTML()+"</div>",o.afterRender(),$(o.el).down().down().removeClassName("weebly-content-area").addClassName("columnlist-blog").setStyle({margin:0,padding:0}));var s=require("config");s.chromeless&&t("#blog-navigation, #blog-navigation-placeholder").hide()}});e.BlogArea=i,e.Area.register(function(e){return e.is_blog===!0},i)}(Weebly),_wAMD.define("legacy/classes/areas/BlogArea",["legacy/classes/Area","legacy/classes/areas/ElementArea","legacy/mediaelement/media_element_renderer","legacy/slideshow-jq"],function(e){return function(){var t;return t||e.Weebly.BlogArea}}(this)),function(e){var t=Class.create(e.Area,{tagName:"span",getInnerHTML:function(){var e=this.attrs,t=this.data,i=t.url;if(i){var n="<img src='/weebly/uploads/"+t.url+"'"+" style='"+(e["max-width"]?"max-width:"+e["max-width"]+"px;":"")+(e["max-height"]?"max-height:"+e["max-height"]+"px;":"")+"'"+"/>";return t.link&&(n="<a href='"+t.link+"' onclick='return false'>"+n+"</a>"),n}return"<table class='weebly-image-area-placeholder' style='width:"+(e["max-width"]||e["max-height"]||100)+"px;"+"height:"+(e["max-height"]||e["max-width"]||100)+"px;"+"'"+">"+"<tbody>"+"<tr><td><img src='/weebly/images/image_placeholder.png' /></td></tr>"+"</tbody>"+"</table>"},afterRender:function($super){$super();var e=this,t=e.data,i=e.attrs,n=e.el.down();"TABLE"==n.tagName?(n.observe("click",function(){ImageExtras.hideTooltips(),chooseImage({onChoose:function(i){var n=i.url;t.url=n,delete t.data,e.rerender()},type:"area",area_page_id:e.context.pageID||"",area_type:e.type,area_name:e.name,width:i["max-width"]||"",height:i["max-height"]||""})}),ImageExtras.initTooltip(n,"Click to add image")):e.renderToolbar()},renderToolbar:function(){function t(){r["max-width"]&&(d.style.maxWidth=r["max-width"]+"px"),r["max-height"]&&(d.style.maxHeight=r["max-height"]+"px")}var i=this,n=i.toolbar=new e.HoverToolbar({targetElement:i.el,parent:"scroll_container"}),o=n.getInnerElement(),s=i.data,r=i.attrs;o.addClassName("image-area-toolbar"),o.innerHTML="<span class='hover-toolbar-edit'>Edit</span><span class='hover-toolbar-link "+(s.link?"hover-toolbar-link-pressed":"")+"'></span>"+"<span class='hover-toolbar-remove'></span>";var a,l=o.down(".hover-toolbar-link").observe("click",function(){n.hide(),ImageExtras.hideTooltips(),e.Linker.open({remove:!0,existing:parseLinkString(s.link),onChoose:function(e){e?s.link=e:delete s.link,i.save(),i.rerender()}})}),c=o.down(".hover-toolbar-remove").observe("click",function(){ImageExtras.hideTooltips(),i.data={},i.save(),i.rerender()}),u=i.el,d=u.down("img"),h=o.down(".hover-toolbar-edit").observe("click",function(){n.hide(),ImageExtras.hideTooltips(),d.style.maxWidth="",d.style.maxHeight="",startImagePerfect(d,{mode:"area",data:s.data||{sprites:[img2sprite(d)],background:{}},area:{page_id:i.context.pageID||"",type:i.type,name:i.name},onUpdate:function(e,t,i,n){d.style.width=i+"px",d.style.height=n+"px"},onUpdateStop:function(e,t,i,n,o){var s=safeCumulativeOffset(d);s.top+=parseInt(d.getStyle("border-top-width")||0)+parseInt(d.getStyle("padding-top")||0),s.top-=133,s.left+=parseInt(d.getStyle("border-left-width")||0)+parseInt(d.getStyle("padding-left")||0),o(s.left-e,s.top-t)},onBeforeSave:function(e){a=e},onSave:function(e){e?(e=e.strip(),s.data=a,s.url=e,pushLoading(),d.onload=function(){d.style.width="",d.style.height="",d.style.visibility="",t(),d.onload="",d.onerror="",popLoading()},d.onerror=popLoading,d.src="/weebly/uploads/"+e):t()},onCancel:function(){t()}})});ImageExtras.initTooltip(l,_W.tl("Link image")),ImageExtras.initTooltip(h,_W.tl("Edit image")),ImageExtras.initTooltip(c,_W.tl("Delete image"))},unrender:function($super){$super(),this.toolbar&&(this.toolbar.destroy(),delete this.toolbar)}});e.ImageArea=t,e.Area.register("image",t)}(Weebly),_wAMD.define("legacy/classes/areas/ImageArea",["legacy/classes/Area","legacy/classes/HoverToolbar","legacy/weebly_linker"],function(e){return function(){var t;return t||e.Weebly.ImageArea}}(this)),_wAMD.define("tpl!platform/theme/core/shared/areas/logo",[],function(){return'<span class="wsite-logo">\n{{# max_height }}<table style="height:{{ max_height }}px"><tr><td>{{/ max_height }}\n{{# is_image }}\n	<a href="{{ link }}">\n		<img src="{{ image_url }}"{{# image_css }} style="{{ image_css }}"{{/ image_css }} />\n	</a>\n{{/ is_image }}\n{{^ is_image }}\n	{{^ is_hidden_text }}<a href="{{ link }}">{{/ is_hidden_text }}\n	{{# is_hidden_text }}<span class="wsite-title-placeholder">&nbsp;</span><span style="display:none">{{/ is_hidden_text }}\n	{{{ text }}}\n	{{# is_hidden_text }}</span>{{/ is_hidden_text }}\n	{{^ is_hidden_text }}</a>{{/ is_hidden_text }}\n{{/ is_image }}\n{{# max_height }}</td></tr></table>{{/ max_height }}\n</span>'}),_wAMD.define("legacy/classes/areas/LogoArea",["jquery","underscore","config","editor/build/themes/rendering","editor/build/themes/partialsRenderer","tpl!platform/theme/core/shared/areas/logo","legacy/classes/Area","legacy/weebly_page_manager","legacy/weebly_events","legacy/classes/HoverToolbar"],function(e,t,i,n,o,s){var r=Class.create(Weebly.Area,{tagName:"span",getInnerHTML:function(){var i,r,a,l,c=this.attrs,u=this.data,d=n.currentThemeData.logo_margin_top,h=n.currentThemeData.logo_margin_left,p=n.currentThemeData.logo_margin_right,f=!t.isUndefined(d)||!t.isUndefined(h)||!t.isUndefined(p),m=u.isImage&&u.url,g=!1;m?(l=u.url,l.match("://")||(l="/weebly/uploads/"+l),i="cursor:pointer;",d&&(i+="margin-top:"+d+"px;"),h&&(i+="margin-left:"+h+"px;"),p&&(i+="margin-right:"+p+"px;"),r=c["max-width"]?c["max-width"]:n.currentThemeData.logo_max_width?n.currentThemeData.logo_max_width:!1,a=c["max-height"]?c["max-height"]-(d||0):n.currentThemeData.logo_max_height?n.currentThemeData.logo_max_height:!1,r!==!1&&(i+="max-width:"+r+"px;"),a!==!1&&(i+="max-height:"+a+"px;"),f&&(a=!1)):(g=this.name?u.hideTitle||!1:hideTitle,g=g||!currentSiteTitle.replace(/<br[^>]*>/gi,"").strip());var v=e(o.render("shared/areas/logo",s,{is_image:m,max_height:a,image_url:l,image_css:i,is_hidden_text:g,text:currentSiteTitle})),b=v.find("a").removeAttr("href").eq(0);if(m){v.find("img").eq(0).attr("onload","refreshNavCondense()");var y=Weebly.PageManager.getCurrentHomepage();b.attr("onclick","goUpdateList('"+y.id+"',1);return false")}else b.html(e("<span>",{html:b.html(),"class":"editable-text",attr:{contenteditable:"true",id:"wsite-title"}}));return v=v[0].outerHTML},afterRender:function($super){$super();var e=this.data,t=e.isImage&&e.url;!t&&Weebly.view.isMobileView?this.el.setStyle({display:"inline"}):this.el.setStyle({display:"inline-block"}),i.chromeless||this.renderToolbar(),Weebly.Events.fireEvent("logoRendered",this.data.isImage)},renderToolbar:function(){var e=this,t=e.toolbar=new Weebly.HoverToolbar({targetElement:e.el,parent:"scroll_container",align:"left"}),i=t.getInnerElement(),o=this.data,s=this.attrs;i.addClassName("logo-toolbar"),i.innerHTML="<span class='hover-toolbar-logooff'>"+_W.tl("Off")+"</span>"+"<span class='hover-toolbar-logotext'>"+_W.tl("Text")+"</span>"+"<span class='hover-toolbar-logoimage'>"+_W.tl("Logo")+"</span>"+(o.isImage&&o.url?"<span class='hover-toolbar-edit'>"+_W.tl("Edit")+"</span>"+"<span class='hover-toolbar-remove'></span>":"");var r=i.down(".hover-toolbar-logooff").observe("click",function(){o.isImage=!1;var t={};e.name?o.hideTitle=!0:(hideTitle=!0,t.hide_title=!0),e.save(t),e.rerender(),refreshNavCondense()}),a=i.down(".hover-toolbar-logotext").observe("click",function(){var t={};e.name?o.hideTitle=!1:(hideTitle=!1,t.show_title=!0),currentSiteTitle.replace(/<br[^>]*>/gi,"").strip()||(currentSiteTitle="Site Title"),o.isImage=!1,e.save(t),e.rerender(),refreshNavCondense()}),l=i.down(".hover-toolbar-logoimage").observe("click",function(){o.url?(o.isImage=!0,e.save(),e.rerender(),refreshNavCondense()):(t.hide(),chooseImage({type:"area",area_type:"logo",area_name:e.name||"logo",disableStockMedia:!0,width:s["max-width"]||400,height:s["max-height"]||100,onChoose:function(t){var i=t.url;i&&i.length<200&&(delete o.data,o.isImage=!0,o.url=i,e.rerender())}}))});if(o.isImage)l.addClassName("hover-toolbar-logoimage-pressed");else{var c=e.name?o.hideTitle||!1:hideTitle;c||!currentSiteTitle.replace(/<br[^>]*>/gi,"").strip()?r.addClassName("hover-toolbar-logooff-pressed"):a.addClassName("hover-toolbar-logotext-pressed")}var u=i.down(".hover-toolbar-edit"),d=i.down(".hover-toolbar-remove");u&&e.initEditButton(u),d&&d.observe("click",function(){showConfirm({title:_W.tl("Remove Logo"),message:_W.tl("Are you sure you want to remove your logo?"),okText:_W.tl("Yes, remove"),onConfirm:function(){ImageExtras.hideTooltips(),delete o.url,o.isImage=!1;var t={theme_id:currentTheme,remove_logo_margins:!0,logo_max_width:"",logo_max_height:"",show_title:!0};e.name?o.hideTitle=!1:(hideTitle=!1,t.show_title=!0),delete n.currentThemeData.logo_margin_top,delete n.currentThemeData.logo_margin_left,delete n.currentThemeData.logo_margin_right,delete n.currentThemeData.logo_max_width,delete n.currentThemeData.logo_max_height,e.save(t),e.rerender(),refreshNavCondense()}})})},initEditButton:function(e){function t(){w.style.marginTop=r,w.style.marginLeft=a,w.style.marginRight=l,w.style.maxWidth=c,w.style.maxHeight=u,w.style.width=d,y&&(y.down("td").style.verticalAlign=""),refreshNavCondense()}function i(){var e=Weebly.headerEditor.getElementInnerRect(b,!0),t=Weebly.headerEditor.getElementInnerRect(w,!0),i={minY:e.y-t.y};"left"==s?(i.minX=e.x-t.x,v["max-width"]&&(i.maxX=i.minX+parseInt(v["max-width"]))):"right"==s?(i.maxX=e.x+e.width-t.x,v["max-width"]&&(i.minX=i.maxX-parseInt(v["max-width"]))):"center"==s&&v["max-width"]&&(i.minX=Math.floor(e.x-t.x+e.width/2-v["max-width"]/2),i.maxX=i.minX+parseInt(v["max-width"])),v["max-height"]&&(i.maxY=i.minY+parseInt(v["max-height"])),Weebly.headerEditor.updateConstraints(i)}var o,s,r,a,l,c,u,d,h,p,f,m=this,g=m.data,v=m.attrs,b=m.el,y=b.down("table"),w=b.down("img");e.observe("click",function(){m.toolbar.hide(),s=detectImageAlign(w),r=w.style.marginTop,a=w.style.marginLeft,l=w.style.marginRight,c=w.style.maxWidth,u=w.style.maxHeight,d=w.style.width,m.attrs["max-width"]||(w.style.maxWidth=""),m.attrs["max-height"]||(w.style.maxHeight=""),startImagePerfect(w,{mode:"area",data:g.data||{sprites:[img2sprite(w)],background:{}},area:{page_id:m.context.pageID||"",type:m.type,name:m.name},onUpdateStop:function(e,t,n,o){var r=Weebly.headerEditor.getElementInnerRect(b,!0),a=Math.round(e-r.x),l=Math.round(r.x+r.width-(e+n));h=Math.round(t-r.y),"left"==s?(p=a,f=0):"right"==s?(p=0,f=l):"center"==s&&(a>l?(p=a-l,f=0):(p=0,f=l-a)),y&&y.down("td").setAttribute("style","vertical-align:top !important"),w.style.width=Math.round(n)+"px",w.style.height=Math.round(o)+"px",w.style.marginTop=h+"px",w.style.marginLeft=p+"px",w.style.marginRight=f+"px",refreshNavCondense(),i()},onBeforeSave:function(e){o=e},onSave:function(e){if(e){e=e.strip(),g.data=o,g.url=e;var i={theme_id:currentTheme};void 0!==h&&(i.logo_margin_top=h,n.currentThemeData.logo_margin_top=h),void 0!==p&&(i.logo_margin_left=p,n.currentThemeData.logo_margin_left=p),void 0!==f&&(i.logo_margin_right=f,n.currentThemeData.logo_margin_right=f),i.logo_max_width="",n.currentThemeData.logo_max_width="",i.logo_max_height="",n.currentThemeData.logo_max_height="",m.save(i),m.rerender()}else t()},onCancel:function(){t()}}),i()})},unrender:function($super){$super(),this.toolbar&&(this.toolbar.destroy(),delete this.toolbar)}});return Weebly.LogoArea=r,Weebly.Area.register("logo",r),r}),_wAMD.define("legacy/classes/areas/SearchArea",["config","legacy/classes/Area","legacy/classes/HoverToolbar"],function(e){function t(e,t){t.select(".hover-toolbar-option-pressed").invoke("removeClassName","hover-toolbar-option-pressed"),e.addClassName("hover-toolbar-option-pressed")}var i=Class.create(Weebly.Area,{getHTML:function(){var e=Weebly.Restrictions.hasAccess("show_settings_site_search");return e?"<span id='"+this.elID+"'"+" class='weebly-area wsite-search'"+">"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return"<input type='text' class='wsite-search-input' autocomplete='off' placeholder='"+_W.tl("Search")+"' />"+"<span class='wsite-search-button'>"+"<span class='wsite-search-button-inner'></span>"+"</span>"},afterRender:function($super){$super(),this.el.down(".wsite-search-input").observe("keypress",this.handleSubmit.bind(this)),this.el.down(".wsite-search-button").observe("click",this.handleSubmit.bind(this)),this.toolbar&&this.toolbar.destroy(),e.chromeless||(jQuery(this.el).find("input").placeholder(),this.renderToolbar())},renderToolbar:function(){var e=this,t=new Weebly.HoverToolbar({targetElement:e.el,afterHide:e.handleAfterHide.bind(e)}),i=t.getInnerElement();i.addClassName("search-toolbar"),i.innerHTML='<span class="toolbar-show hover-toolbar-option hover-toolbar-option-left hover-toolbar-option-pressed">'+_W.tl("Show")+"</span>"+'<span class="toolbar-hide hover-toolbar-option hover-toolbar-option-right">'+_W.tl("Hide")+"</span>",i.down(".toolbar-hide").observe("click",e.handleHideToolbar.bind(this)),e.showButton=i.down(".toolbar-show").observe("click",e.handleShowToolbar.bind(this)),this.toolbar=t},handleAfterHide:function(){t(this.showButton,this.toolbar.getInnerElement()),!this.el||this.el.visible()||Weebly.view.isMobileView||showTip(_W.tl('Search box hidden. To turn it back on, navigate to "Design Options."'),$("weebly_tab_themes"),"y","search",void 0,300)},handleSubmit:function(e){("keypress"!==e.type||13===e.which)&&(this.toolbar&&this.toolbar.hide(),hideTip("tipsearch-info",1),showTip(_W.tl("Search will work on the published site"),e.target.parentNode,"y","search-info",1,225))},handleShowToolbar:function(e){e.target.className.match(/hover-toolbar-option-pressed/)||(Weebly.view.isMobileView?(this.el.show(),this.data.mobileHidden=!1,Weebly.mobile.updateAreaOptions()):(this.el.show(),this.data.hidden=!1,updateDesignElements()),this.save()),t(e.target,this.toolbar.getInnerElement())},handleHideToolbar:function(e){e.target.className.match(/hover-toolbar-option-pressed/)||(Weebly.view.isMobileView?(this.el.hide(),this.data.mobileHidden=!0,Weebly.mobile.updateAreaOptions()):(this.el.hide(),this.data.hidden=!0,updateDesignElements()),this.save()),t(e.target,this.toolbar.getInnerElement())}});Weebly.SearchArea=i,Weebly.Area.register("search",i)}),_wAMD.define("tpl!platform/theme/core/shared/areas/text",[],function(){return'<span class="wsite-text{{#phone}} wsite-phone{{/phone}}{{#headline}} wsite-headline{{/headline}}{{#headline_paragraph}} wsite-headline-paragraph{{/headline_paragraph}}"{{#is_preview}} title="{{#esc_attr}}{{#tl}}You can edit this text after you save your theme.{{/tl}}{{/esc_attr}}"{{/is_preview}}>\n	{{{text}}}{{^text}}{{#is_preview}}{{{preview_text}}}{{/is_preview}}{{/text}}\n</span>'}),function(e){var t=require("config"),i=require("editor/build/themes/partialsRenderer"),n=require("tpl!platform/theme/core/shared/areas/text"),o=Class.create(e.Area,{tagName:"span",getInnerHTML:function(){var e=this.data.text||"";return e=e.strip(),e=e||t.areaDefaultPlaceholderText[this.name]||t.defaultPlaceholderText,i.render("shared/areas/text",n,{phone:"phone"==this.name,headline:"headline"==this.name,headline_paragraph:"headline-paragraph"==this.name,text:e})},afterRender:function($super){$super();var e=this,i=e.el.down();i.id="wsite-"+e.name,i.style.minHeight="1em",i.style.paddingRight="1px",makeElementContentEditable(i,{richTextControls:"phone"!=e.name&&"mobilephone"!=e.name&&!t.chromeless,emptyText:t.areaDefaultPlaceholderText[e.name]||t.defaultPlaceholderText,saveCallback:function(t,n){e.data.text=n,e.save();var o=jQuery(i).closest("table");o.hide(),setTimeout(function(){o.css("display","")},0)},startedEditingCallback:function(){require("tablet/api/external").startedEditingAreaText(e.type,e.name)}})}});e.TextArea=o,e.Area.register("text",o)}(Weebly),_wAMD.define("legacy/classes/areas/TextArea",["legacy/classes/Area","tablet/api/external","editor/build/themes/partialsRenderer","tpl!platform/theme/core/shared/areas/text"],function(e){return function(){var t;return t||e.Weebly.TextArea}}(this)),function(e){var t=Class.create(e.Area,{elID:"wsite-title",getHTML:function(){return"<div id='"+this.elID+"'"+" class='editable-text'"+" contenteditable='true'"+">"+this.getInnerHTML()+"</div>"},getInnerHTML:function(){return currentSiteTitle},afterRender:function($super){$super(),this.el.style.visibility=hideTitle?"hidden":""}});e.TitleArea=t,e.Area.register("title",t)}(Weebly),_wAMD.define("legacy/classes/areas/TitleArea",["legacy/classes/Area"],function(e){return function(){var t;return t||e.Weebly.TitleArea}}(this)),function(e){var t='<div class="wsite-footer-separator"></div>',i='<div class="wsite-footer-version">Version: <span class="wsite-footer-version-text">Mobile <span class="wsite-footer-vertical">|</span> <a class="wsite-version-web" href="#">Web</a></span></div>',n=Class.create(e.Area,{getHTML:function($super){var n=$super();return e.view.isMobileView?(n+='<div class="wsite-mobile-footer">',n+=e.Reseller&&e.Reseller.isResellerUser?i:'<span id="weeblyfootertext"></span>'+t+i,n+="</div>"):n+='<span id="weeblyfootertext"></span>',n}});e.Area.register(function(t){return("content"==t.type&&"footer"==t.name||"footer"==t.type)&&!(ENABLE_ADVANCED_FOOTER&&e.Restrictions.hasAccess("edit_footer"))},n)}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/areas/SimpleFooterArea",["legacy/classes/Area","legacy/weebly_restrictions"],function(){}),function(e){var t=Class.create(e.Area,{initialize:function($super,t,i){$super(t,i),this.elID="secondlistParent",this.template=t.template;var n=t.long_description_elements;n&&(this.descriptionArea=new e.ElementArea({elements:n},i))},getInnerHTML:function(){var e="<ul id='secondlist'>";return e+=this.template,e+="</ul>"},afterRender:function(){var e=this.descriptionArea;if(e){var t=$$(".wsite-com-long-description")[0];if(t){t.wrap("div");var i=t.up();i.id=t.id+"-up",i.addClassName("weebly-area").addClassName("wsite-not-footer"),e.elID=i.id,e.el=i,e.listElID=t.id,e.rerender(),$(t.id).className=t.className,$(t.id).style.position="relative",$(t.id).addClassName("weebly-content-area")}}}});e.ProductArea=t,e.Area.register(function(e){return"long_description_elements"in e},t)}(Weebly),_wAMD.define("legacy/classes/areas/ProductArea",["legacy/classes/Area","legacy/classes/areas/ElementArea"],function(e){return function(){var t;return t||e.Weebly.ProductArea}}(this)),function(e){var t=Class.create(e.Area,{initialize:function($super,e,t){$super(e,t),this.element=t.loadElement(e.element)},getInnerHTML:function(){return"<ul class='weebly-single-area'>"+this.element.renderHTML(!1)+"</ul>"},beforeRender:function($super){$super(),this.context.elementsByID[this.element.id].beforeRender()},afterRender:function($super){$super();var e=this.el.down("li.inside"),t=e.id.replace("inside_","");this.context.elementsByID[t].afterRender(e)}});e.SingleElementArea=t,e.Area.register(["social","button"],t)}(Weebly),_wAMD.define("legacy/classes/areas/SingleElementArea",["legacy/classes/Area"],function(e){return function(){var t;return t||e.Weebly.SingleElementArea}}(this)),function(e,t){var i=Class.create(e.Area,{getHTML:function(){return e.view.isMobileView?"<span id='"+this.elID+"'"+" class='weebly-area wsite-homepage'"+">"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return"<a class='wsite-home-link'><span class='wsite-home-link-inner disable-user-select'></span></a>"},afterRender:function($super){$super(),t(this.el).find(".wsite-home-link").on("click",function(t){var i=e.PageManager.getCurrentHomepage();i&&goUpdateList(i.id,1),t.preventDefault()})}});e.HomeButtonArea=i,e.Area.register("homebutton",i)}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/areas/HomeButtonArea",["legacy/classes/Area","legacy/weebly_page_manager"],function(e){return function(){var t;return t||e.Weebly.HomeButtonArea}}(this)),function(e,t){var i=Class.create(e.Area,{getHTML:function(){return e.view.isMobileView?"<span id='"+this.elID+"'"+" class='weebly-area wsite-menubutton'"+">"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return'<a class="wsite-menu-button"><span class="wsite-menu-button-text disable-user-select">Menu</span><div class="wsite-menu-button-bars"><span class="wsite-menu-button-bar"></span><span class="wsite-menu-button-bar"></span><span class="wsite-menu-button-bar"></span></div></a>'},afterRender:function($super){$super(),t(this.el).find(".wsite-menu-button").on("click",e.mobile_navigation.menuTap)}});e.MenuButtonArea=i,e.Area.register("menubutton",i)}(Weebly,Weebly.jQuery),_wAMD.define("legacy/classes/areas/MenuButtonArea",["legacy/classes/Area"],function(e){return function(){var t;return t||e.Weebly.MenuButtonArea}}(this)),_wAMD.define("legacy/classes/areas/HeaderButtonArea",["jquery","legacy/classes/Area"],function(e){var t=Class.create(Weebly.Area,{getHTML:function(){return Weebly.view.isMobileView?"<span id='"+this.elID+"' class='wsite-area wsite-buttonheader' >"+this.getInnerHTML()+"</span>":"<span id='"+this.elID+"'></span>"},getInnerHTML:function(){return"<a class='wsite-cart-link' href='#'><span class='wsite-cart-link-inner disable-user-select'></span></a>"},afterRender:function($super){$super(),e(this.el).find(".wsite-cart-link").on("click",function(){return!1});var t=Weebly.Commerce&&Weebly.Commerce.hasCart===!0;t&&void 0!==window.initCommerceModels||e(this.el).hide()}});Weebly.HeaderButtonArea=t,Weebly.Area.register("headerbutton",t)}),function(e){function t(t){function n(){return p}function o(e,t){return i(p,e,t)}function s(e){for(var t=0;t<p.length;t++)if(p[t].el===e)return p[t]}function r(){p.each(function(e){e.beforeRender()})}function a(t,i,n){var s=o(t,i);if(s||"title"!=t||(s=new e.TitleArea({type:t,name:i}),p.push(s)),s)return s.attrs=n,s.getHTML();var r=e.Area.getNewElID();return fetchNeededArea(!this.pageID,t,i,function(t){var i=e.Area.load(t,h);
i&&(p.push(i),i.attrs=n,i.elID=r,i.el=i.getHTML(),$(r).replace(i.el))}),"<span id='"+r+"'></span>"}function l(){p.each(function(e){var t=$(e.elID);t&&(e.el=t,e.afterRender())})}function c(){p.each(function(e){e.el&&e.reposition()}),hashEach(this.elementsByID,function(e,t){t.li&&t.reposition()}),editorApp.vent.trigger("editor:elements:changed")}function u(){p.each(function(e){e.el&&e.unrender()}),hashEach(this.elementsByID,function(e,t){t.li&&t.unrender()}),editorApp.vent.trigger("editor:elements:changed")}function d(e){p.each(function(t){var n=i(e,t.type,t.name);if(n){var o=n.el;if(o&&o.parentNode){t.attrs=n.attrs;var s=new Element("div");s.innerHTML=t.getHTML(),t.el=s.down(),o.replace(t.el),t.afterRender()}}}),editorApp.vent.trigger("editor:elements:changed")}var h=this,p=[];e.ElementContext.call(h),h.getAreas=n,h.getArea=o,h.getAreaForElement=s,h.beforeRender=r,h.getAreaHTML=a,h.afterRender=l,h.reposition=c,h.unrender=u,h.renderAreas=d,$H(t).each(function(t){"areas"==t.key?t.value.each(function(t){var i=e.Area.load(t,h);i&&p.push(i)}):h[t.key]=t.value})}function i(e,t,i){i=i||"";for(var n=0;n<e.length;n++)if(e[n].type==t&&e[n].name==i)return e[n]}e.AreaContext=t}(Weebly),_wAMD.define("legacy/classes/AreaContext",["editor/app","legacy/classes/ElementContext","legacy/classes/Area","legacy/classes/areas/BlogArea","legacy/classes/areas/ElementArea","legacy/classes/areas/ImageArea","legacy/classes/areas/LogoArea","legacy/classes/areas/SearchArea","legacy/classes/areas/TextArea","legacy/classes/areas/TitleArea","legacy/classes/areas/SimpleFooterArea","legacy/classes/areas/AdvancedFooterArea","legacy/classes/areas/ProductArea","legacy/classes/areas/SingleElementArea","legacy/classes/areas/HomeButtonArea","legacy/classes/areas/MenuButtonArea","legacy/classes/areas/HeaderButtonArea"],function(e){return function(){var t;return t||e.Weebly.AreaContext}}(this));var YAHOO=window.YAHOO||function(){return{util:{}}}();if(YAHOO.util.Color=new function(){this.hsv2rgb=function(e,t,i){var n,o,s;if(0==t)n=255*i,o=255*i,s=255*i;else{var r=6*e;6==r&&(r=0);var a=Math.floor(r),l=i*(1-t),c=i*(1-t*(r-a)),u=i*(1-t*(1-(r-a)));0==a?(var_r=i,var_g=u,var_b=l):1==a?(var_r=c,var_g=i,var_b=l):2==a?(var_r=l,var_g=i,var_b=u):3==a?(var_r=l,var_g=c,var_b=i):4==a?(var_r=u,var_g=l,var_b=i):(var_r=i,var_g=l,var_b=c),n=255*var_r,o=255*var_g,s=255*var_b}return[Math.round(n),Math.round(o),Math.round(s)]},this.rgb2hsv=function(e,t,i){var e=e/255,t=t/255,i=i/255,n=Math.min(e,t,i),o=Math.max(e,t,i);deltaMax=o-n;var s,r,a,l=o,c=0,u=0;return 0==deltaMax?(u=0,c=0):(c=deltaMax/o,s=((o-e)/6+deltaMax/2)/deltaMax,r=((o-t)/6+deltaMax/2)/deltaMax,a=((o-i)/6+deltaMax/2)/deltaMax,e==o?u=a-r:t==o?u=1/3+s-a:i==o&&(u=2/3+r-s),0>u&&(u+=1),u>1&&(u-=1)),[u,c,l]},this.rgb2hex=function(e,t,i){return this.toHex(e)+this.toHex(t)+this.toHex(i)},this.hexchars="0123456789ABCDEF",this.toHex=function(e){return e=e||0,e=parseInt(e,10),isNaN(e)&&(e=0),e=Math.round(Math.min(Math.max(0,e),255)),this.hexchars.charAt((e-e%16)/16)+this.hexchars.charAt(e%16)},this.toDec=function(e){return this.hexchars.indexOf(e.toUpperCase())},this.hex2rgb=function(e){var t=[];return t[0]=16*this.toDec(e.substr(0,1))+this.toDec(e.substr(1,1)),t[1]=16*this.toDec(e.substr(2,1))+this.toDec(e.substr(3,1)),t[2]=16*this.toDec(e.substr(4,1))+this.toDec(e.substr(5,1)),t},this.isValidRGB=function(e){return!e[0]&&0!=e[0]||isNaN(e[0])||e[0]<0||e[0]>255?!1:!e[1]&&0!=e[1]||isNaN(e[1])||e[1]<0||e[1]>255?!1:!e[2]&&0!=e[2]||isNaN(e[2])||e[2]<0||e[2]>255?!1:!0}},_wAMD.define("legacy/yahoo.color",function(){}),!Control)var Control={};Control.colorPickers=[],Control.ColorPicker=Class.create(),Control.ColorPicker.activeColorPicker,Control.ColorPicker.CONTROL,Control.ColorPicker.prototype={initialize:function(e,t){var i=this;if(Control.colorPickers.push(i),this.field=$(e),this.fieldName=this.field.name||this.field.id,this.options=Object.extend({IMAGE_BASE:"img/"},t||{}),this.swatch=$(this.options.swatch)||this.field,this.rgb={},this.hsv={},this.isOpen=!1,!Control.ColorPicker.CONTROL){if(Control.ColorPicker.CONTROL={},!$("colorpicker")){var n=Builder.node("div",{id:"colorpicker",className:"colorpicker"});n.innerHTML='<div id="colorpicker-div">'+(/MSIE ((6)|(5\.5))/gi.test(navigator.userAgent)&&/windows/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?'<img id="colorpicker-bg" src="'+this.options.IMAGE_BASE+'blank.gif" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\''+this.options.IMAGE_BASE+"pickerbg.png', sizingMethod='scale')\" alt=\"\">":'<img id="colorpicker-bg" src="'+this.options.IMAGE_BASE+'pickerbg.png" alt="">')+'<div id="colorpicker-bg-overlay" style="z-index: 1002;"></div>'+'<div id="colorpicker-selector"><img src="'+this.options.IMAGE_BASE+'select.gif" width="11" height="11" alt="" /></div></div>'+'<div id="colorpicker-hue-container"><img src="'+this.options.IMAGE_BASE+'hue.png" id="colorpicker-hue-bg-img"><div id="colorpicker-hue-slider"><div id="colorpicker-hue-thumb"><img src="'+this.options.IMAGE_BASE+'hline.png"></div></div></div>'+'<div id="colorpicker-footer"><span id="colorpicker-value">#<input type="text" onclick="this.select()" id="colorpicker-value-input" name="colorpicker-value" value=""></input></span><button id="colorpicker-okbutton">OK</button></div>',$("colorChooserDiv").appendChild(n)}Control.ColorPicker.CONTROL={popUp:$("colorpicker"),pickerArea:$("colorpicker-div"),selector:$("colorpicker-selector"),okButton:$("colorpicker-okbutton"),value:$("colorpicker-value"),input:$("colorpicker-value-input"),picker:new Draggable($("colorpicker-selector"),{snap:function(e,t){return[Math.min(Math.max(e,0),Control.ColorPicker.activeColorPicker.control.pickerArea.offsetWidth),Math.min(Math.max(t,0),Control.ColorPicker.activeColorPicker.control.pickerArea.offsetHeight)]},zindex:1009,change:function(e){var t=e.currentDelta();Control.ColorPicker.activeColorPicker.update(t[0],t[1])}}),hueSlider:new Control.Slider("colorpicker-hue-thumb","colorpicker-hue-slider",{axis:"vertical",onChange:function(e){Control.ColorPicker.activeColorPicker.updateHue(e)}})},Element.hide($("colorpicker"))}this.control=Control.ColorPicker.CONTROL,this.toggleOnClickListener=this.toggle.bindAsEventListener(this),this.updateOnChangeListener=this.updateFromFieldValue.bindAsEventListener(this),this.closeOnClickOkListener=this.toggle.bindAsEventListener(this),this.updateOnClickPickerListener=this.updateSelector.bindAsEventListener(this),Event.observe(this.swatch,"click",this.toggleOnClickListener),Event.observe(this.field,"change",this.updateOnChangeListener),Event.observe(this.control.input,"change",this.updateOnChangeListener),this.updateSwatch()},toggle:function(e){this[this.isOpen?"close":"open"](e),Event.stop(e)},open:function(e){if(Control.ColorPicker.activeColorPicker=this,this.isOpen=!0,Element.show(this.control.popUp),this.options.getPopUpPosition)var t=this.options.getPopUpPosition.bind(this)(e);else{var t=Position.cumulativeOffset(this.swatch||this.field);t[1]=t[1]+(this.swatch||this.field).offsetHeight+15}this.control.popUp.style.left=t[0]+"px",this.control.popUp.style.top=t[1]+"px",this.initial=1,this.updateFromFieldValue(),Event.observe(this.control.okButton,"click",this.closeOnClickOkListener),Event.observe(this.control.pickerArea,"mousedown",this.updateOnClickPickerListener),this.options.onOpen&&this.options.onOpen.bind(this)(e)},close:function(){Control.ColorPicker.activeColorPicker==this&&(Control.ColorPicker.activeColorPicker=null),this.isOpen=!1,Element.hide(this.control.popUp),Event.stopObserving(this.control.okButton,"click",this.closeOnClickOkListener),Event.stopObserving(this.control.pickerArea,"mousedown",this.updateOnClickPickerListener),this.options.onClose&&this.options.onClose.bind(this)()},updateHue:function(e){var t=(this.control.pickerArea.offsetHeight-100*e)/this.control.pickerArea.offsetHeight;1==t&&(t=0);var i=YAHOO.util.Color.hsv2rgb(t,1,1);YAHOO.util.Color.isValidRGB(i)&&(this.control.pickerArea.style.backgroundColor="rgb("+i[0]+", "+i[1]+", "+i[2]+")",this.update())},updateFromFieldValue:function(e){if(this.isOpen){var t=e&&Event.findElement(e,"input")||this.field,i=YAHOO.util.Color.hex2rgb(t.value);if(YAHOO.util.Color.isValidRGB(i)){var n=YAHOO.util.Color.rgb2hsv(i[0],i[1],i[2]);this.control.selector.style.left=Math.round(n[1]*this.control.pickerArea.offsetWidth)+"px",this.control.selector.style.top=Math.round((1-n[2])*this.control.pickerArea.offsetWidth)+"px",this.control.hueSlider.setValue(1-n[0])}}},updateSelector:function(e){var t=Event.pointerX(e),i=Event.pointerY(e),n=Position.cumulativeOffset($("colorpicker-bg"));this.control.selector.style.left=t-n[0]-6+"px",this.control.selector.style.top=i-n[1]-6+"px",this.update(t-n[0],i-n[1]),this.control.picker.initDrag(e)},updateSwatch:function(){var e=YAHOO.util.Color.hex2rgb(this.field.value);if(YAHOO.util.Color.isValidRGB(e)){this.swatch.style.backgroundColor="rgb("+e[0]+", "+e[1]+", "+e[2]+")";var t=YAHOO.util.Color.rgb2hsv(e[0],e[1],e[2]);this.swatch.style.color=t[2]>.65?"#000000":"#FFFFFF"}},update:function(e,t){if(this.initial)return this.initial=null,this.control.input.value=this.field.value,void 0;e||(e=this.control.picker.currentDelta()[0]),t||(t=this.control.picker.currentDelta()[1]);var i=(this.control.pickerArea.offsetHeight-100*this.control.hueSlider.value)/this.control.pickerArea.offsetHeight;1==i&&(i=0),this.hsv={hue:1-this.control.hueSlider.value,saturation:e/this.control.pickerArea.offsetWidth,brightness:(this.control.pickerArea.offsetHeight-t)/this.control.pickerArea.offsetHeight};var n=YAHOO.util.Color.hsv2rgb(this.hsv.hue,this.hsv.saturation,this.hsv.brightness);this.rgb={red:n[0],green:n[1],blue:n[2]},this.field.value=YAHOO.util.Color.rgb2hex(n[0],n[1],n[2]),this.control.input.value=this.field.value,this.updateSwatch(),this.options.onUpdate&&this.options.onUpdate.bind(this)(this.field.value)}},_wAMD.define("legacy/colorpicker",["legacy/weebly_linker"],function(){}),_wAMD.define("legacy/weebly_feedback",function(){});var signupAction="";_wAMD.define("legacy/weebly_signup",function(){}),function(e){function t(t,n){function o(e){u=e,d.find(".switcher > .inner > ."+(e?"move":"copy")).addClass("selected").siblings().removeClass("selected"),l()}function s(){d.css("display","block"),setTimeout(function(){a(),d.addClass("active")},100),e(document).on("mouseup.move-copy",r).on("mouseup.move-copy",".w-move-outer",function(e){e.stopPropagation()})}function r(){d.removeClass("active"),setTimeout(function(){d.removeAttr("style"),d.css("display","none")},200),e(document).off("mouseup.move-copy")}function a(){var e=h.offset(),t=n.offset(),i=10,o=16;d.css({top:t.top+n.outerHeight()-e.top+i,left:t.left+n.outerWidth()/2-e.left-o})}function l(){d.find(".content").scrollTop(0);var t=d.find(".content ul");t.empty(),u||t.append(e("<li/>").data("page-id",currentPage).append(e("<em/>").text(_W.tl("( This page )")))),c(Weebly.PageManager.topLevelPages,t,0)}function c(t,n,o){for(var s=0;s<t.length;s++){var r=t[s];if("member-login"==r.kind||"member-logout"==r.kind)break;var a="";r.blog&&(a="move-copy-blog"),r.id==currentPage&&(a="move-copy-same-page"),(!r.blog&&r.id!=currentPage||0!=r.children.length)&&(e("<li class='"+a+"'>"+i("<span class='indent'/>",o)+"</li>").data("page-id",r.id).append(e("<span/>").html(r.title)).appendTo(n),c(r.children,n,o+1))}}this.show=s,this.hide=r,this.position=a;var u,d=e("<div class='w-dialog element-move-copy' style='display:none'><div class='element-move-copy-arrow'></div><div class='header'><div class='switcher'><div class='inner'><div class='move'>Move</div><div class='copy'>Copy</div></div></div></div><div class='content'><ul></ul></div></div>"),h=n.offsetParent();h.append(d),o(!0),d.find(".switcher > .inner > *").on("click",function(){o(e(this).hasClass("move"))}),d.find(".content ul").on("click","li",function(){if(e(this).hasClass("move-copy-blog")||e(this).hasClass("move-copy-same-page"))return!1;var t=e(this).data("page-id"),i=jQuery(Weebly.Elements.currentElement).closest("li.inside").attr("id").replace(/\D/g,""),n="";"object"==typeof currentBlog&&currentBlog.postId&&"0"!=currentBlog.postId&&(n=currentBlog.postId),new Ajax.Request(ajax,{parameters:{pos:"moveelement",pageElementID:i,pageID:t,postID:n,copyElement:u?0:1,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerMovePageElement,onFailure:errFunc}),r()})}function i(e,t){return new Array(t+1).join(e)}window.openElementMoveCopy=function(e,i){var n=i.data("move-copy-popover");n||(n=new t(e,i),i.data("move-copy-popover",n)),n.show()}}(Weebly.jQuery),_wAMD.define("legacy/weebly_element_movecopy",["legacy/weebly_page_manager","legacy/weebly_elements"],function(){}),function(e){window.renderConfirmationSubgroup=function(t,i){function n(e){o(e),i.find('.panel[data-type="'+e+'"]').show().siblings(".panel").hide(),"text"==e?setContentFieldProperty(Weebly.Elements.ucfid,u.ucfpid,"<a>"):"link"==e&&setContentFieldProperty(Weebly.Elements.ucfid,u.ucfpid,p)}function o(e){h.find('[data-type="'+e+'"]').addClass("selected").siblings().removeClass("selected")}function s(){var t=p=e("#"+u.ucfpid).val(),n=t.match(/href=['"]([^'"]*)['"]/),o=n&&n[1];if(o){var s,r=parseLinkString(o);if(r.pageID){var a=Weebly.PageManager.pages[r.pageID];s=a?a.title:""}else if(r.url)s=r.url;else if(r.store){var l=r.store.match(/store\/.*\/(.*?)(\.html|$)/),c=l?l[1].replace(/[_\-]/g," "):"";s=c}else s="";i.find(".link-panel .unpopulated-subpanel").hide(),i.find(".link-panel .populated-subpanel").show(),i.find(".link-panel .populated-subpanel .url").text(s)}else i.find(".link-panel .populated-subpanel").hide(),i.find(".link-panel .unpopulated-subpanel").show()}var r,a,l,c,u,d;for(d=0;d<t.length;d++)"%%CONFIRMATION_TEXT%%"==t[d].property?a=t[d]:"%%CONFIRMATION_PAGE%%"==t[d].property&&(c=t[d]);r=Weebly.Elements.uproperty,l=r.properties[a.cfpid],u=r.properties[c.cfpid];var h=e("<div class='confirmation-type-switcher switcher'><div class='inner'><div data-type='text'>"+_W.tl("Text")+"</div>"+"<div data-type='link'>"+_W.tl("Link")+"</div>"+"</div>"+"</div>");i.closest(".subgroup").find(".title").before(h).after("<div style='clear:both'/>"),i.html("<div data-type='text' class='panel text-panel'><textarea id='"+l.ucfpid+"'"+" onKeyUp=\"Weebly.Elements.onTextChange('"+l.ucfpid+"', undefined, true)\""+">"+l.property_result+"</textarea>"+"</div>"+"<div data-type='link' class='panel link-panel'>"+"<div class='subpanel unpopulated-subpanel'>"+"<div class='pod'>"+"<a class='btn btn-control'>"+_W.tl("Set Confirmation Link")+"</a>"+"</div>"+"</div>"+"<div class='subpanel populated-subpanel'>"+"<label>Go to link:</label>"+"<div class='pod'>"+"<span class='remove-icon icon-x'>X</span>"+"<a class='btn btn-control'>Change</a>"+"<span class='url'></span>"+"<div style='clear:both'></div>"+"</div>"+"</div>"+'<input type="hidden" id="'+u.ucfpid+'" value="'+u.property_result+'"/>'+"</div>"),h.find("[data-type]").on("click",function(){n(e(this).data("type"))});var p=e("#"+u.ucfpid).val();u.property_result&&"<a>"!=u.property_result?n("link"):n("text"),i.find(".link-panel .unpopulated-subpanel .btn, .link-panel .populated-subpanel .btn").on("click",function(){showCreateLink({ucfpid:u.ucfpid,isConfLink:!0,useExisting:!0,onChoose:function(){s()}})}),i.find(".link-panel .remove-icon").on("click",function(){e("#"+u.ucfpid).val("<a>"),s(),Weebly.Elements.onChange()}),s()}}(Weebly.jQuery),_wAMD.define("legacy/weebly_form_options",["legacy/weebly_elements","legacy/weebly_page_manager"],function(){}),document.observe("dom:loaded",function(){$("adsense_terms-cancel")&&$("adsense_terms-cancel").observe("click",close_adsense_dialog),$("adsense_terms-close")&&$("adsense_terms-close").observe("click",close_adsense_confirmation_dialog),"1"==getParameterByName("ac")&&open_adsense_confirmation_dialog()}),_wAMD.define("legacy/weebly_adsense",["legacy/weebly_dialog"],function(){});var Calendar=Class.create();Calendar.VERSION="1.1",Calendar.DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),Calendar.SHORT_DAY_NAMES=new Array("S","M","T","W","T","F","S","S"),Calendar.MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Calendar.SHORT_MONTH_NAMES=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Calendar.NAV_PREVIOUS_YEAR=-2,Calendar.NAV_PREVIOUS_MONTH=-1,Calendar.NAV_TODAY=0,Calendar.NAV_NEXT_MONTH=1,Calendar.NAV_NEXT_YEAR=2,Calendar._checkCalendar=function(e){if(!window._popupCalendar)return!1;if(!Element.descendantOf(Event.element(e),window._popupCalendar.container))return window._popupCalendar.callCloseHandler(),Event.stop(e)},Calendar.handleMouseDownEvent=function(e){Event.observe(document,"mouseup",Calendar.handleMouseUpEvent),Event.stop(e)},Calendar.handleMouseUpEvent=function(e){function t(e){var t=r.getDate(),i=r.getMonthDays(e);t>i&&r.setDate(i),r.setMonth(e)}var i=Event.element(e),n=i.calendar,o=!1;if(!n)return!1;if("undefined"==typeof i.navAction){n.currentDateElement&&(Element.removeClassName(n.currentDateElement,"selected"),Element.addClassName(i,"selected"),n.shouldClose=n.currentDateElement==i,n.shouldClose||(n.currentDateElement=i)),n.date.setDateOnly(i.date),o=!0,n.shouldClose=!i.hasClassName("otherDay");var s=!n.shouldClose;s&&n.update(n.date)}else{var r=new Date(n.date);i.navAction==Calendar.NAV_TODAY&&r.setDateOnly(new Date);var a=r.getFullYear(),l=r.getMonth();switch(i.navAction){case Calendar.NAV_PREVIOUS_YEAR:a>n.minYear&&r.setFullYear(a-1);break;case Calendar.NAV_PREVIOUS_MONTH:l>0?t(l-1):a-->n.minYear&&(r.setFullYear(a),t(11));break;case Calendar.NAV_TODAY:break;case Calendar.NAV_NEXT_MONTH:11>l?t(l+1):a<n.maxYear&&(r.setFullYear(a+1),t(0));break;case Calendar.NAV_NEXT_YEAR:a<n.maxYear&&r.setFullYear(a+1)}r.equalsTo(n.date)?0==i.navAction&&(o=n.shouldClose=!0):(n.setDate(r),o=!0)}return o&&e&&n.callSelectHandler(),n.shouldClose&&e&&n.callCloseHandler(),Event.stopObserving(document,"mouseup",Calendar.handleMouseUpEvent),Event.stop(e)},Calendar.defaultSelectHandler=function(e){return e.dateField?("DIV"==e.dateField.tagName?Element.update(e.dateField,e.date.print(e.dateFormat)):"INPUT"==e.dateField.tagName&&(e.dateField.value=e.date.print(e.dateFormat)),"function"==typeof e.dateField.onchange&&e.dateField.onchange(),e.shouldClose&&e.callCloseHandler(),void 0):!1},Calendar.defaultCloseHandler=function(e){e.hide()},Calendar.setup=function(e){function t(t,i){e[t]||(e[t]=i)}if(t("dateField",null),t("triggerElement",null),t("parentElement",null),t("selectHandler",null),t("closeHandler",null),e.parentElement){var i=new Calendar(e.parentElement);return i.setSelectHandler(e.selectHandler||Calendar.defaultSelectHandler),e.dateFormat&&i.setDateFormat(e.dateFormat),e.dateField&&(i.setDateField(e.dateField),i.parseDate(i.dateField.innerHTML||i.dateField.value)),i.show(),i}var n=$(e.triggerElement||e.dateField);n.onclick=function(){var t=new Calendar;return t.setSelectHandler(e.selectHandler||Calendar.defaultSelectHandler),t.setCloseHandler(e.closeHandler||Calendar.defaultCloseHandler),e.dateFormat&&t.setDateFormat(e.dateFormat),e.dateField&&(t.setDateField(e.dateField),t.parseDate(t.dateField.innerHTML||t.dateField.value)),e.dateField&&Date.parseDate(t.dateField.value||t.dateField.innerHTML,t.dateFormat),t.showAtElement(n),t}},Calendar.prototype={container:null,selectHandler:null,closeHandler:null,minYear:1990,maxYear:3e3,dateFormat:"%m/%d/%Y",date:new Date,currentDateElement:null,shouldClose:!1,isPopup:!0,dateField:null,initialize:function(e){e?this.create($(e)):this.create()},update:function(e){var t=this,i=new Date,n=i.getFullYear(),o=i.getMonth(),s=i.getDate(),r=e.getMonth(),a=e.getDate();e.getFullYear()<this.minYear?e.setFullYear(this.minYear):e.getFullYear()>this.maxYear&&e.setFullYear(this.maxYear),this.date=new Date(e),e.setDate(1),e.setDate(-e.getDay()+1),Element.getElementsBySelector(this.container,"tbody tr").each(function(i){var l=!1;i.immediateDescendants().each(function(i){var c=e.getDate(),u=e.getDay(),d=e.getMonth()==r;i.className="",i.date=new Date(e),i.update(c),d?l=!0:i.addClassName("otherDay"),d&&c==a&&(i.addClassName("selected"),t.currentDateElement=i),e.getFullYear()==n&&e.getMonth()==o&&c==s&&i.addClassName("today"),-1!=[0,6].indexOf(u)&&i.addClassName("weekend"),e.setDate(c+1)}),l?i.show():i.hide()}),this.container.getElementsBySelector("td.title")[0].update(Calendar.MONTH_NAMES[r]+" "+this.date.getFullYear())},create:function(e){e?this.isPopup=!1:(e=document.getElementsByTagName("body")[0],this.isPopup=!0);var t=new Element("table"),i=new Element("thead");t.appendChild(i);var n=new Element("tr"),o=new Element("td",{colSpan:7,className:"title"});n.appendChild(o),i.appendChild(n),n=new Element("tr"),this._drawButtonCell(n,"&#x00ab;",1,Calendar.NAV_PREVIOUS_YEAR),this._drawButtonCell(n,"&#x2039;",1,Calendar.NAV_PREVIOUS_MONTH),this._drawButtonCell(n,"Today",3,Calendar.NAV_TODAY),this._drawButtonCell(n,"&#x203a;",1,Calendar.NAV_NEXT_MONTH),this._drawButtonCell(n,"&#x00bb;",1,Calendar.NAV_NEXT_YEAR),i.appendChild(n),n=new Element("tr");for(var s=0;7>s;++s)o=new Element("th").update(Calendar.SHORT_DAY_NAMES[s]),(0==s||6==s)&&o.addClassName("weekend"),n.appendChild(o);i.appendChild(n);var r=t.appendChild(new Element("tbody"));for(s=6;s>0;--s){n=r.appendChild(new Element("tr",{className:"days"}));for(var a=7;a>0;--a)o=n.appendChild(new Element("td")),o.calendar=this}this.container=new Element("div",{className:"calendar"}),this.isPopup&&(this.container.setStyle({position:"absolute",display:"none"}),this.container.addClassName("popup")),this.container.appendChild(t),this.update(this.date),Event.observe(this.container,"mousedown",Calendar.handleMouseDownEvent),e.appendChild(this.container)},_drawButtonCell:function(e,t,i,n){var o=new Element("td");return i>1&&(o.colSpan=i),o.className="button",o.calendar=this,o.navAction=n,o.innerHTML=t,o.unselectable="on",e.appendChild(o),o},callSelectHandler:function(){this.selectHandler&&this.selectHandler(this,this.date.print(this.dateFormat))},callCloseHandler:function(){this.closeHandler&&this.closeHandler(this)},show:function(){this.container.show(),this.isPopup&&(window._popupCalendar=this,Event.observe(document,"mousedown",Calendar._checkCalendar))},showAt:function(e,t){this.container.setStyle({left:e+"px",top:t+"px"}),this.show()},showAtElement:function(e){var t=e.viewportOffset();this.showAt(t[0],t[1])},hide:function(){this.isPopup&&Event.stopObserving(document,"mousedown",Calendar._checkCalendar),this.container.parentNode.removeChild(this.container)},parseDate:function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},setSelectHandler:function(e){this.selectHandler=e},setCloseHandler:function(e){this.closeHandler=e},setDate:function(e){e.equalsTo(this.date)||this.update(e)},setDateFormat:function(e){this.dateFormat=e},setDateField:function(e){this.dateField=$(e)},setRange:function(e,t){this.minYear=e,this.maxYear=t}},window._popupCalendar=null,Date.DAYS_IN_MONTH=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date.parseDate=function(e,t){var i=new Date,n=0,o=-1,s=0,r=e.split(/\W+/),a=t.match(/%./g),l=0,c=0,u=0,d=0;for(l=0;l<r.length;++l)if(r[l])switch(a[l]){case"%d":case"%e":s=parseInt(r[l],10);break;case"%m":o=parseInt(r[l],10)-1;break;case"%Y":case"%y":n=parseInt(r[l],10),100>n&&(n+=n>29?1900:2e3);break;case"%b":case"%B":for(c=0;12>c;++c)if(Calendar.MONTH_NAMES[c].substr(0,r[l].length).toLowerCase()==r[l].toLowerCase()){o=c;break}break;case"%H":case"%I":case"%k":case"%l":u=parseInt(r[l],10);break;case"%P":case"%p":/pm/i.test(r[l])&&12>u?u+=12:/am/i.test(r[l])&&u>=12&&(u-=12);break;case"%M":d=parseInt(r[l],10)}if(isNaN(n)&&(n=i.getFullYear()),isNaN(o)&&(o=i.getMonth()),isNaN(s)&&(s=i.getDate()),isNaN(u)&&(u=i.getHours()),isNaN(d)&&(d=i.getMinutes()),0!=n&&-1!=o&&0!=s)return new Date(n,o,s,u,d,0);for(n=0,o=-1,s=0,l=0;l<r.length;++l)if(-1!=r[l].search(/[a-zA-Z]+/)){var h=-1;for(c=0;12>c;++c)if(Calendar.MONTH_NAMES[c].substr(0,r[l].length).toLowerCase()==r[l].toLowerCase()){h=c;break}-1!=h&&(-1!=o&&(s=o+1),o=h)}else parseInt(r[l],10)<=12&&-1==o?o=r[l]-1:parseInt(r[l],10)>31&&0==n?(n=parseInt(r[l],10),100>n&&(n+=n>29?1900:2e3)):0==s&&(s=r[l]);return 0==n&&(n=i.getFullYear()),-1!=o&&0!=s?new Date(n,o,s,u,d,0):i},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return"undefined"==typeof e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date.DAYS_IN_MONTH[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=new Date(this.getFullYear(),0,0,0,0,0),i=e-t;return Math.floor(i/Date.DAY)},Date.prototype.getWeekNumber=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),t=e.getDay();e.setDate(e.getDate()-(t+6)%7+3);var i=e.valueOf();return e.setMonth(0),e.setDate(4),Math.round((i-e.valueOf())/6048e5)+1},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),i=this.getDate(),n=this.getFullYear(),o=this.getWeekNumber(),s=this.getDay(),r={},a=this.getHours(),l=a>=12,c=l?a-12:a,u=this.getDayOfYear();0==c&&(c=12);var d=this.getMinutes(),h=this.getSeconds();return r["%a"]=Calendar.SHORT_DAY_NAMES[s],r["%A"]=Calendar.DAY_NAMES[s],r["%b"]=Calendar.SHORT_MONTH_NAMES[t],r["%B"]=Calendar.MONTH_NAMES[t],r["%C"]=1+Math.floor(n/100),r["%d"]=10>i?"0"+i:i,r["%e"]=i,r["%H"]=10>a?"0"+a:a,r["%I"]=10>c?"0"+c:c,r["%j"]=100>u?10>u?"00"+u:"0"+u:u,r["%k"]=a,r["%l"]=c,r["%m"]=9>t?"0"+(1+t):1+t,r["%M"]=10>d?"0"+d:d,r["%n"]="\n",r["%p"]=l?"PM":"AM",r["%P"]=l?"pm":"am",r["%s"]=Math.floor(this.getTime()/1e3),r["%S"]=10>h?"0"+h:h,r["%t"]="	",r["%U"]=r["%W"]=r["%V"]=10>o?"0"+o:o,r["%u"]=s+1,r["%w"]=s,r["%y"]=(""+n).substr(2,2),r["%Y"]=n,r["%%"]="%",e.gsub(/%./,function(e){return r[e]||e})},Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear,Date.prototype.setFullYear=function(){var e=new Date(this);e.__msh_oldSetFullYear.apply(e,arguments),e.getMonth()!=this.getMonth()&&this.setDate(28),this.__msh_oldSetFullYear.apply(this,arguments)},_wAMD.define("legacy/calendarview",function(){}),Ajax.JSONRequest=Class.create(Ajax.Base,function(){var e=0,t=document.getElementsByTagName("head")[0];return{initialize:function($super,e,t){$super(t),this.options.url=e,this.options.callbackParamName=this.options.callbackParamName||"callback",this.options.timeout=this.options.timeout||10,this.options.invokeImmediately=Object.isUndefined(this.options.invokeImmediately)?!0:this.options.invokeImmediately,this.options.invokeImmediately&&this.request()},_cleanup:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.transport&&Object.isElement(this.transport)&&this.transport.remove()},request:function(){var i=new Ajax.JSONResponse(this),n=this.options.callbackParamName,o="_prototypeJSONPCallback_"+e++,s=function(){Object.isFunction(this.options.onComplete)&&this.options.onComplete.call(this,i)}.bind(this);this.options.parameters[n]=o;var r=this.options.url+((this.options.url.include("?")?"&":"?")+Object.toQueryString(this.options.parameters));window[o]=function(e){this._cleanup(),window[o]=void 0,Object.isFunction(this.options.onSuccess)&&(i.status=200,i.statusText="OK",i.setResponseContent(e),this.options.onSuccess.call(this,i)),s()}.bind(this),this.transport=new Element("script",{type:"text/javascript",src:r}),Object.isFunction(this.options.onCreate)&&this.options.onCreate.call(this,i),t.appendChild(this.transport),this.timeout=setTimeout(function(){this._cleanup(),window[o]=Prototype.emptyFunction,Object.isFunction(this.options.onFailure)&&(i.status=504,i.statusText="Gateway Timeout",this.options.onFailure.call(this,i)),s()}.bind(this),1e3*this.options.timeout)},toString:function(){return"[object Ajax.JSONRequest]"}}}()),Ajax.JSONResponse=Class.create({initialize:function(e){this.request=e},request:void 0,status:0,statusText:"",responseJSON:void 0,responseText:void 0,setResponseContent:function(e){this.responseJSON=e,this.responseText=Object.toJSON(e)},getTransport:function(){return this.request?this.request.transport:void 0},toString:function(){return"[object Ajax.JSONResponse]"}}),_wAMD.define("legacy/jsonp",function(){});var domainChoiceSelected,domainPurchaseRefer="",domainNextStep,domainNextBlog,isDomainChooserOpen=!1,isDomainChooserOnboarding=!1;"undefined"==typeof domainChoiceContinue&&(domainChoiceContinue=function(){if($("domainChoiceError").display="none","domainSubdomain"==domainChoiceSelected)new Ajax.Request(ajax,{parameters:{pos:"savedomain",type:"subdomain",domain:$("weeblyDomain").value,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerSaveSubdomain,onFailure:errFunc});else if("domainNewDomain"==domainChoiceSelected)if($("finalDomainName").innerHTML){if(Weebly.Permissions&&!Weebly.Permissions.allow_purchases)return alert("Only the site owner is able to purchase a domain name for this site"),!1;var e="domain",t="domain="+$("finalDomainName").innerHTML;"1"==Weebly.bundlePlanTest&&(Weebly.Restrictions.level?e="domain":(e="premium",t+="&fromDomain=1",t+="&comparison=1")),showPurchaseScreen({refer:domainPurchaseRefer,type:e,extraArgs:t})}else $("domainChoiceError").innerHTML="Please select an available domain.",$("domainChoiceError").style.display="block";else if("domainExistingDomain"==domainChoiceSelected){var i=$("weeblyExistingDomain").value.trim();i.match(/[a-zA-Z\-0-9]+[\.]+/)?i.match(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/)?$("existingDomainInvalid").show():isDomainChooserOnboarding?(Weebly.Location&&(Weebly.Location.custom_domain=i,Weebly.Location.purchased_domain=!1),domainChoiceFinish()):Weebly.Restrictions&&!Weebly.Restrictions.hasAccess("existing_domain")&&-1==Weebly.Location.all_purchased_domains.indexOf("www."+i.toLowerCase().replace(/^www\./,""))?editorApp.vent.trigger("billing:upgrade:window",{restrictionID:"existing_domain",restrictionType:"feature"}):new Ajax.Request(ajax,{parameters:{pos:"savedomain",continue_not_configured:"0",type:"domain",domain:i,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:handlerSaveExistingDomain,onFailure:errFunc}):$("existingDomainInvalid").show()}}),"undefined"==typeof handlerSaveExistingDomain&&(handlerSaveExistingDomain=function(e){if(e.responseText.indexOf("the following problems")>0)$("domainChoiceError").innerHTML=e.responseText,$("domainChoiceError").style.display="block";else if(e.responseText.indexOf("%%accessdenied%%")>-1)$("domainChoiceError").innerHTML=_W.tl("Please upgrade to use an existing domain name."),$("domainChoiceError").style.display="block";else if(e.responseText.indexOf("%%notconfigured%%")>-1)if(isDomainChooserOnboarding)domainExistingExceptionContinue();else{e.responseText=e.responseText.replace(/%%notconfigured%%/,"");var t=e.responseText.split("|");$("domainExistingInfo").innerHTML="<a href='http://"+t[1]+".weebly.com/' target='_blank'>http://"+t[1]+".weebly.com</a>",Weebly.Restrictions&&Weebly.Restrictions.isClientSite?($("client-registrar-email").value=existingClientDomainEmailText.replace("%%DOMAIN_NAME%%",$("weeblyExistingDomain").value),$("domainChoiceTitle").update("Setup a Client Domain"),$("clientDomainExistingException").style.display="block",$("chooseDomainDiv").style.display="none"):($("registrar-email").value=existingDomainEmailText.replace("%%DOMAIN_NAME%%",$("weeblyExistingDomain").value),$("domainChoiceTitle").update(_W.tl("Setup a Domain You Already Own")),$("domainExistingException").style.display="block",$("chooseDomainDiv").style.display="none"),domainNextStep=domainNextStep?domainNextStep:"displaySiteSettings"
}else if(Weebly.Location.custom_domain=$("weeblyExistingDomain").value,Weebly.Location.purchased_domain=!1,domainChoiceFinish(),"function"==typeof window.ga){var i=_W.domainMenuLocation?"?location="+_W.domainMenuLocation:"";window.ga("send","pageview",{page:"/choose-domain-success"+i,title:"Choose Domain Success"}),_W.domainMenuLocation=null}}),"undefined"==typeof showDomainInstructions&&(showDomainInstructions=function(e){_W.domainMenuLocation="repeat-use",Pages.go("domainMenu"),$("weeblyExistingDomain").value=e,$("registrar-email").value=existingDomainEmailText.replace("%%DOMAIN_NAME%%",$("weeblyExistingDomain").value),$("domainExistingException").style.display="block",$("chooseDomainDiv").style.display="none",domainDialog.positionDialog()}),"undefined"==typeof domainExistingExceptionContinue&&(domainExistingExceptionContinue=function(){var e=$("weeblyExistingDomain").value;return new Ajax.Request(ajax,{parameters:{pos:"savedomain",continue_not_configured:"1",type:"domain",domain:e,cookie:document.cookie,token:Weebly.RequestToken},onSuccess:function(){showTrackingFrame("connected_external_domain"),Weebly.Location.custom_domain=e,Weebly.Location.purchased_domain=!1,domainChoiceFinish()},onFailure:errFunc}),!1});var isUserTyping=0;_wAMD.define("legacy/weebly_domain_utils",["legacy/weebly_restrictions","legacy/weebly_dialog"],function(){});var isIE=navigator.userAgent.toLowerCase().indexOf("msie")>-1,isMoz=document.implementation&&document.implementation.createDocument,isSafari=-1!=navigator.userAgent.toLowerCase().indexOf("safari")&&-1!=navigator.userAgent.toLowerCase().indexOf("mac")?!0:!1;_wAMD.define("public_legacy/rounded_corners",function(){}),_wAMD.define("util/platform/elements/PlatformElement",["backbone"],function(e){var t=e.View.prototype,i=e.View.extend({initialize:function(){t.initialize.apply(this,arguments)},render:function(){if(window.inEditor&&window.inEditor()){var e=require("editor/build/utils");e.renderPage(window.currentPage)}},remove:function(){t.remove.apply(this,arguments)},setElement:function(){t.setElement.apply(this,arguments)},delegateEvents:function(){t.delegateEvents.apply(this,arguments)},undelegateEvents:function(){t.undelegateEvents.apply(this,arguments)}});return i}),_wAMD.define("util/platform/elements/PlatformElementSettings",["jquery","backbone"],function(e,t){var i=t.Model.extend({save:function(t,i,n){var o=this,s=this.attributes;if(null==t||"object"==typeof t?(s=t,n=i):(s={})[t]=i,s&&!this.set(s,n))return!1;if(window.inEditor&&window.inEditor())return _W.Editor.RPC.PlatformElementInstance.updateSettings(o.page_element_id,o.toJSON());var r=new e.Deferred;return r.resolve({success:!1,message:"You cannot update settings outside of the editor."}),r.promise()}});return i}),_wAMD.define("editor/core",["jquery","editor/build/module","mustache","underscore","backbone","backbone-validation","util/backbone-validators","membership/util/backbone-populate-from-csv","vendor/jsonrpc","legacy/jquery.animate","jquery-ui/effect","jquery-ui/effect-highlight","jquery-ui/effect-fade","util/effect-slide-custom","jquery-ui/draggable","jquery-ui/position","legacy/jquery_utils","legacy/jquery.hint","legacy/jquery.mousewheel","legacy/jquery.fullscreen","legacy/jquery.stickysectionheaders","legacy/jquery.weeblyscroll","legacy/jquery.hammer","legacy/jquery.touchit","legacy/weebly_utils","legacy/weebly_utils_ajax","legacy/weebly_pages","legacy/weebly_linker","legacy/weebly_cache","legacy/weebly_restrictions","legacy/weebly_dropdowns","legacy/weebly_dialog","legacy/splitpane","legacy/accordion","legacy/chosen/chosen.proto","vendor/spectrum","public_legacy/bootstrap","public_legacy/jquery.featureSlideshow","editor/content/main","legacy/weebly_main","legacy/weebly_top_bar","legacy/weebly_element_list","editor/build/element_dragging","legacy/weebly_element_controls","legacy/transitions","legacy/event.simulate","legacy/weebly_mainstyle","legacy/weebly_footer","legacy/weebly_theme_editor","legacy/nested_sortable","legacy/weebly_sliding_panel","legacy/weebly_site_settings","util/ui/Spinner","util/ui/wSelectbox","util/ui/wInput","legacy/weebly_theme_browser_common","legacy/weebly_design_tab","legacy/weebly_design_options","legacy/weebly_hellos","legacy/weebly_progress_bar","legacy/weebly_uploader_ajax","legacy/weebly_uploader_ajax_progress","legacy/weebly_init_dnd","vendor/jquery.imagesloaded.min","themes/model/Filter","themes/model/Theme","themes/collection/Themes","themes/view/ThemeList","themes/view/ThemeOption","themes/view/AbstractFilter","themes/view/ChooserFilter","themes/view/ChooserThemeOption","themes/view/Chooser","themes/view/PreviewTheme","legacy/weebly_page_manager","legacy/flyout_menus_jq","legacy/weebly_form","legacy/weebly_uploader_plain","legacy/slideshow-jq","legacy/weebly_slideshow_admin","editor/build/image_extras","legacy/weebly_image_chooser","legacy/weebly_he_dialog","legacy/weebly_element_set","legacy/weebly_social_sharing","legacy/weebly_tooltip","legacy/weebly_event_tooltip","legacy/rgbcolor","legacy/weebly_view","legacy/weebly_mobile","legacy/mobile_navigation","legacy/weebly_header_image","imageperfect/color_chooser","imageperfect/gradient_chooser","imageperfect/pattern_chooser","imageperfect/fill_chooser","imageperfect/flash_utils","imageperfect/he","legacy/mediaelement/mediaelement-and-player","legacy/mediaelement/media_element_renderer","legacy/weebly_facebook_connect","legacy/classes/Spotlight","legacy/classes/ElementSpotlight","legacy/classes/Util/Object","legacy/classes/Font","legacy/classes/GenericLoader","legacy/classes/HoverToolbar","legacy/classes/Element","legacy/classes/elements/LegacyElement","legacy/classes/elements/FormElement","legacy/classes/elements/ButtonElement","legacy/classes/elements/MultiColumnElement","legacy/classes/elements/SocialElement","legacy/classes/elements/AudioElement","legacy/classes/elements/MapElement","legacy/classes/elements/SearchElement","legacy/classes/elements/PlatformElement","editor/build/elements/SpacerElement","editor/build/elements/ImageElement","editor/build/elements/TextElement","editor/build/elements/ImageTextElement","editor/build/elements/CustomHTMLElement","legacy/prettify/prettify","legacy/rangy-1.2.3/rangy-core","legacy/rangy-1.2.3/rangy-selectionsaverestore","legacy/weebly_element_utils","legacy/classes/ElementContext","legacy/classes/AreaContext","legacy/classes/Area","legacy/classes/areas/BlogArea","legacy/classes/areas/ElementArea","legacy/classes/areas/ImageArea","legacy/classes/areas/LogoArea","legacy/classes/areas/SearchArea","legacy/classes/areas/TextArea","legacy/classes/areas/TitleArea","legacy/classes/areas/SimpleFooterArea","legacy/classes/areas/AdvancedFooterArea","legacy/classes/areas/ProductArea","legacy/classes/areas/SingleElementArea","legacy/classes/areas/HomeButtonArea","legacy/classes/areas/MenuButtonArea","legacy/classes/areas/HeaderButtonArea","legacy/weebly_area_utils","legacy/weebly_editbox","legacy/yahoo.color","legacy/colorpicker","legacy/weebly_feedback","legacy/weebly_signup","legacy/weebly_elements","legacy/weebly_element_options","legacy/weebly_element_movecopy","legacy/weebly_form_options","legacy/weebly_image_gallery","legacy/weebly_adsense","legacy/calendarview","legacy/jsonp","legacy/weebly_events","legacy/weebly_uploads","legacy/swfupload/swfupload","legacy/weebly_domain_utils","public_legacy/rounded_corners","util/platform/elements/PlatformElement","util/platform/elements/PlatformElementSettings"],function(e,t){return{init:function(){t.start(Weebly.initMainData),delete Weebly.initMainData}}}),_wAMD.define("tpl!editor/site-settings/nav/item",[],function(){return'<div class="link">\n	<i class="{{icon_class}} {{nav_class}}" data-toggle="tooltip" title="{{name}}"></i>\n	<span class="menu-name">{{name}}</span>\n</div>\n<div class="children"{{#children}} style="display: block;"{{/children}}>{{! region }}</div>\n'}),_wAMD.define("editor/settings/nav/ItemView",["backbone-all","editor/app","tpl!editor/site-settings/nav/item"],function(e,t,i){var n=e.Marionette.Layout.extend({tagName:"li",getTemplate:function(){return Mustache.compile(i)},regions:{childrenRegion:".children"},modelEvents:{"change:name":"render"},events:{click:"onClick"},onClick:function(){var e=this.model,i=t.vent,n=e.get("eventPrefix");"settings:store"===n?i.trigger(n,"settings:general"):i.trigger(n)}});return n}),_wAMD.define("tpl!editor/site-settings/blog/nav/item",[],function(){return'<div class="link{{#selected}} selected{{/selected}}">\n	<span class="menu-name">{{{title}}}</span>\n</div>'}),_wAMD.define("editor/settings/blog/NavList/ItemView",["jquery","backbone-all","editor/app","tpl!editor/site-settings/blog/nav/item"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({tagName:"li",template:Mustache.compile(n),templateHelpers:function(){var e=this;return{selected:e.model.selected}},events:{click:"click"},click:function(e){var t=this;e.stopPropagation(),i.vent.trigger("settings:blog",t.model.get("blog_id")),t.trigger("select")}});return o}),_wAMD.define("editor/settings/blog/NavList/ListView",["underscore","backbone-all","./ItemView"],function(e,t,i){var n=t.Marionette.CollectionView.extend({tagName:"ul",itemView:i,onItemviewSelect:function(){this.render()}});return n}),_wAMD.define("editor/settings/nav/BlogItemView",["jquery","editor/app","./ItemView","../blog/NavList/ListView"],function(e,t,i,n){var o=i.extend({events:function(){var e=i.prototype.events;return e.mouseover="onMouseover",e.mouseleave="onMouseleave",e},initialize:function(){},updateSelectedChild:function(e){var t=this,i=t.model.get("children");if(i&&(i.each(function(t){t.selected=t.get("blog_id")==e}),!t.childrenRegion.$el)){var n=t.getListView();t.childrenRegion.show(n)}},onClick:function(){var e,i=this,n=i.model,o=t.vent,s=n.get("children");s?(s.some(function(t){return t.selected?(i.render(),e=t.get("blog_id"),!0):void 0}),e||(e=s.first().get("blog_id"))):e=i.model.get("preselectedBlogId"),o.trigger(n.get("eventPrefix"),e),i.childrenRegion.$el&&i.childrenRegion.$el.slideUp(0).slideDown({duration:200})},isCollapsed:function(){return e("#site-settings-container").hasClass("narrow")&&this.model.get("children")},onMouseover:function(){var e=this;e.isCollapsed()&&e.showFlyoutMenu()},onMouseleave:function(){var e=this;e.isCollapsed()&&e.closeFlyoutMenu()},showFlyoutMenu:function(){var e,t,i=this;i.hoverListView||(i.$el.addClass("hover").find('i[class^="w-icon-"]').tooltip("disable"),i.hoverListView=i.getListView({className:"w-ui w-ui-light site-settings-flyout"}),t=i.$el.offset(),e=i.$el.outerWidth(),i.hoverListView.render().$el.appendTo(document.body).on("mouseout",i.closeFlyoutMenu.bind(i)).css({top:t.top,left:t.left+e}))},closeFlyoutMenu:function(){var e=this;e.hoverListView.$el.is(":hover")||(e.hoverListView.close(),e.hoverListView=null,e.$el.removeClass("hover").find('i[class^="w-icon-"]').tooltip("enable"))},getListView:function(e){var t=this.model,i=t.get("children");return e=e||{},e=_.extend({},e,{collection:i}),new n(e)}});return o}),_wAMD.define("tpl!editor/site-settings/nav/list",[],function(){return'<a class="close-x" href="#" onclick="return false;"></a>\n<ul class="site-settings-nav-items"></ul>'}),_wAMD.define("editor/settings/nav/ListView",["backbone-all","mustache","jquery","underscore","editor/app","editor/settings/model/SiteSettings","./ItemView","./BlogItemView","legacy/weebly_sliding_panel","tpl!editor/site-settings/nav/list"],function(e,t,i,n,o,s,r,a,l,c){function u(e){var t={};return i.each(e,function(e,i){t[i.page_id]=i}),t.length=e.length,t=d(Weebly.PageManager.topLevelPages,t).blogs,delete t.length,n.sortBy(t,"blog_page_order")}function d(e,t,o){return o=o||0,0==n.keys(e).length||o>=t.length?{blogs:t,blogCount:o}:(i.each(e,function(e,i){return o>=t.length?!1:("blog"==i.kind&&(t[i.id].blog_page_order=o,o++),i.children.length>0&&o<t.length&&(result=d(i.children,t,o),t=result.blogs,o=result.blogCount),void 0)}),{blogs:t,blogCount:o})}var h=e.Marionette.CompositeView.extend({getTemplate:function(){return t.compile(c)},itemViewContainer:".site-settings-nav-items",getItemView:function(e){return"settings:blog"===e.get("eventPrefix")?a:r},events:{"click .close-x":"closePanel","click .site-settings-nav-items > li":"closeChildren"},initialize:function(){var t=this;SettingsNavCollection=e.Collection.extend({comparator:"sortOrder"}),i.when(this.setCollection(),this.getBlogInfo()).done(function(){t.lastBlog&&t.children.some(function(e){return"settings:blog"==e.model.get("eventPrefix")?(t.highlightSelectedNavItem(e),e.updateSelectedChild(t.lastBlog),!0):void 0})}),t.listenTo(o.vent,{all:function(e,i){0==e.search("settings")&&(t.lastBlog="settings:blog"==e&&i?i:void 0,t.children.each(function(i){0===e.search(i.model.get("eventPrefix"))&&t.highlightSelectedNavItem(i)}))},"settings:blog":function(e){t.children.some(function(t){return"settings:blog"==t.model.get("eventPrefix")?(t.updateSelectedChild(e),!0):void 0})},"settings:nav:close":this.closeChildren})},highlightSelectedNavItem:function(e){this.$(".selected").not(e.$el.find(".selected")).removeClass("selected"),e.$el.addClass("selected")},getBlogInfo:function(){var t=this;return o.blog.RPC.getBlogs().done(function(i){if(Weebly.Permissions.restrict_pages&&(i=n.filter(i,function(e){return n.contains(Weebly.Permissions.allowed_pages,e.page_id)})),i&&i.length||Weebly.Permissions.allow_add_blog)var o=t.collection.add({name:_W.tl("Blog"),icon_class:"w-icon-blog-settings-icon",enabled:!0,eventPrefix:"settings:blog",sortOrder:5,nav_class:"nav-blog"});if(i&&i.length)if(i.length>1){var s=new e.Collection(u(i));o.set({name:_W.tl("Blogs"),children:s})}else o.set("preselectedBlogId",i[0].blog_id)})},setCollection:function(){var e=this;if(e.collection=new SettingsNavCollection([{name:_W.tl("General"),icon_class:"w-icon-cog",enabled:!0,eventPrefix:"settings:general",sortOrder:1,nav_class:"nav-general"},{name:_W.tl("SEO"),icon_class:"w-icon-stats",enabled:!0,eventPrefix:"settings:seo",sortOrder:2,nav_class:"nav-seo"}]),"edstudent"==source||"nhd"==source||"reseller"==source||isClientSite||e.collection.add({name:_W.tl("Editors"),icon_class:"w-icon-edit",enabled:!0,eventPrefix:"settings:contributor:list",sortOrder:3,nav_class:"nav-editors"}),"edstudent"==source||"nhd"==source||"ed"==source||isClientSite&&!Weebly.Permissions.membership_edit||e.collection.add({name:_W.tl("Members"),icon_class:"w-icon-admin",enabled:!0,eventPrefix:"settings:membership",sortOrder:6,nav_class:"nav-members"}),!Weebly.COMMERCE_ENABLED||!Weebly.Permissions.store_edit){var t=s.findOrCreate();return t.fetch().done(function(){"none"!=t.get("merchant")&&e.collection.add({name:_W.tl("E-Commerce"),icon_class:"w-icon-shopping-cart",enabled:!0,eventPrefix:"settings:commerce",sortOrder:4,nav_class:"nav-commerce"})})}e.collection.add({name:_W.tl("Store"),icon_class:"w-icon-shopping-cart",enabled:!0,eventPrefix:"settings:store",sortOrder:7,nav_class:"nav-store"})},closePanel:function(){l.hide("site-settings-container")},closeChildren:function(){var e=this.$el.find(".children:visible");e.each(function(e,t){i(t).parent().hasClass("selected")||i(t).slideUp({duration:200})})}});return h}),_wAMD.define("tpl!editor/site-settings/main",[],function(){return'<div id="site-settings-container" class="w-ui w-ui-light w-sliding-panel" style="display:none;">\n	<div id="site-settings-categories" class="sliding-panel-menu">\n		<div class="site-settings-nav sliding-panel-menu-inner">{{! navRegion }}</div>\n	</div>\n	<div id="site-settings-body" class="sliding-panel-body">\n		<div class="site-settings-main scaffold-com sliding-panel-body-inner">{{! mainRegion }}</div>\n	</div>\n</div>'}),_wAMD.define("editor/settings/SettingsView",["backbone-all","mustache","./nav/ListView","tpl!editor/site-settings/main"],function(e,t,i,n){var o=e.Marionette.Layout.extend({template:t.compile(n),el:"#site-settings-tab-container",regions:{navRegion:".site-settings-nav",mainRegion:".site-settings-main"},initialize:function(){Weebly.SlidingPanel.register("site-settings-container",{tab_id:"weebly_tab_settings"})},onRender:function(){this.navRegion.show(new i)}});return o}),_wAMD.define("tpl!editor/site-settings/general/ssl/change-domain-warning",[],function(){return"<p>{{#tl}}Your site currently has SSL security enabled. As part of the Business plan, we provided you 1 free SSL certificate.{{/tl}}</p>\n\n<p>{{#tl}}If you change your domain, SSL security will be temporarily disabled until you purchase a new SSL certificate for $10.{{/tl}}</p>"}),_wAMD.define("editor/settings/general/ssl/ChangeDomainWarningView",["jquery","backbone-all","mustache","editor/app","tpl!editor/site-settings/general/ssl/change-domain-warning"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),dialog:{width:660,title:_W.tl("Change Domain"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Continue"),className:"btn-com btn-info"}]}],dialogClass:"settings-dialog"},events:{"click .btn-cancel":"cancel","click .btn-info":"proceed"},cancel:function(){this.trigger("dialog:close")},proceed:function(){this.trigger("proceed"),this.trigger("dialog:close")}});return s}),_wAMD.define("tpl!editor/site-settings/general/address",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Site Address{{/tl}}</h2>\n</div>\n\n{{#display_address}}\n	<label class="label">\n		<a href="{{protocol}}{{display_address}}" target="_blank">\n			{{display_address}}\n		</a>\n	</label>\n{{/display_address}}\n\n{{^display_address}}\n	{{#tl}}Click <a class="change" href="#">here</a> to set site address{{/tl}}\n{{/display_address}}\n\n<button class="change btn-com btn-section">{{#tl}}Change{{/tl}}</button>\n'}),_wAMD.define("editor/settings/general/AddressView",["backbone-all","mustache","editor/app","./ssl/ChangeDomainWarningView","tpl!editor/site-settings/general/address"],function(e,t,i,n,o){var s=e.Marionette.ItemView.extend({template:t.compile(o),ui:{change:".change"},modelEvents:{"change:protocol":"render","change:display_address":"render"},events:{"click @ui.change":"change"},change:function(e){function t(){_W.domainMenuLocation="repeat-use",Pages.go("domainMenu","displaySiteSettings")}if(e.preventDefault(),this.warnOnChange()){var o=new n;this.listenTo(o,"proceed",t),i.showDialog(o)}else t()},warnOnChange:function(){{this.model}}});return s}),_wAMD.define("tpl!editor/site-settings/general/title",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Site Title{{/tl}}</h2>\n</div>\n\n<div>\n	<input name="title" class="large" type="text" value="{{decoded_title}}">\n	<button class="save btn-com btn-section">\n    <span class="icon w-icon-check-mark"></span>\n    <span class="text">{{#tl}}Save{{/tl}}</span>\n  </button>\n</div>\n\n<div>\n	<input type="checkbox" id="site-setting-show-title" name="show_title"{{#show_title}} checked{{/show_title}}>\n	<label for="site-setting-show-title">{{#tl}}Show title on the top of your pages{{/tl}}</label>\n</div>\n'}),_wAMD.define("editor/settings/general/TitleView",["jquery","backbone-all","mustache","editor/app","util/general-utils","tpl!editor/site-settings/general/title","util/ui/wInput"],function(e,t,i,n,o,s){var r=t.Marionette.ItemView.extend({template:i.compile(s),ui:{save:".save",title:"input[name=title]",showTitle:"input[name=show_title]"},events:{"click @ui.save":"save","change @ui.showTitle":"toggleTitle","focus @ui.title":"buttonReset"},templateHelpers:function(){return{decoded_title:function(){return o.htmlDecode(this.title)}}},onRender:function(){this.ui.showTitle.wCheckbox(),this.ui.save.wLoadButton({endText:_W.tl("Updated")})},buttonReset:function(){this.ui.save.wLoadButton("reset")},save:function(){var t=this,i=t.ui.save,n=t.ui.title.val();i.wLoadButton("startWait"),t.model.save({title:n}).done(function(){currentSiteTitle=n,e("#wsite-title").text(n),i.wLoadButton("endWait")})},toggleTitle:function(){var e=this,t=e.ui.showTitle.prop("checked");e.model.save({show_title:t}).done(function(){hideTitle=!t,updateList()})}});return r}),_wAMD.define("tpl!editor/site-settings/general/ssl",[],function(){return'{{#business_plan_enabled}}\n{{#ssl_allowed}}\n\n	<div class="sub-title-bar sub-title-separator inner-subtitle">\n		<h2>{{#tl}}SSL{{/tl}}</h2>\n	</div>\n\n	{{#ssl_available}}\n\n		{{^ssl_display_publish_warning}}\n			{{#ssl_enablable}}\n				<span class="error-text">{{#tl}}Not Enabled{{/tl}}</span>\n				<button class="enable btn-com btn-section">{{#tl}}Enable{{/tl}}</button>\n			{{/ssl_enablable}}\n\n			{{#ssl_pending}}\n				<i class="w-icon-cog"></i>\n				{{#tl}}SSL certificate is being configured. Check back later.{{/tl}}\n			{{/ssl_pending}}\n\n			{{#ssl_review}}\n				<i class="w-icon-cog"></i>\n				{{#tl}}SSL certificate is pending manual review. Check back in 24 - 48 hours.{{/tl}}\n				<button class="enable btn-com btn-section">{{#tl}}Retry{{/tl}}</button>\n			{{/ssl_review}}\n\n			{{#ssl_failed}}\n				<i class="w-icon-delete"></i>\n				{{#tl}}SSL configuration failed. Please contact  <a href="https://weebly.zendesk.com/hc/en-us/requests/new" target="_blank">support</a> or try re-configuring.{{/tl}}\n				<button class="enable btn-com btn-section">{{#tl}}Retry{{/tl}}</button>\n			{{/ssl_failed}}\n\n			{{#ssl_enabled}}\n				<span class="success-text">{{#tl}}Enabled{{/tl}}</span>\n				<button class="disable btn-com btn-section">{{#tl}}Disable{{/tl}}</button>\n\n				{{#is_using_commerce}}\n					{{^is_externally_hosted}}\n						<div class="ssl-enabled-type site-settings-subtitle">\n							<br>\n							<label class="label">\n								<input type="radio" name="ssl-type" value="checkout" {{#checked.type}}checkout{{/checked.type}}>\n								{{#tl}}Checkout Only (Recommended){{/tl}}\n							</label><br>\n							<label class="label">\n								<input type="radio" name="ssl-type" value="site" {{#checked.type}}site{{/checked.type}}>\n								{{#tl}}Entire Site{{/tl}}\n							</label>\n                        </div>\n					{{/is_externally_hosted}}\n				{{/is_using_commerce}}\n			{{/ssl_enabled}}\n		{{/ssl_display_publish_warning}}\n\n		{{#ssl_display_publish_warning}}\n			<span class="error-text">{{#tl}}You must publish your website before an SSL certificate can be issued for your domain.{{/tl}}</span>\n		{{/ssl_display_publish_warning}}\n\n	{{/ssl_available}}\n\n	{{^ssl_available}}\n		<i class="w-icon-delete"></i>\n		{{#tl}}Off{{/tl}}\n		<button class="upgrade btn-com btn-section">{{#tl}}Upgrade{{/tl}}</button>\n	{{/ssl_available}}\n\n{{/ssl_allowed}}\n{{/business_plan_enabled}}'}),_wAMD.define("editor/settings/general/SSLView",["backbone-all","mustache","editor/app","tpl!editor/site-settings/general/ssl","util/ui/wInput"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),ui:{enable:".enable",disable:".disable",upgrade:".upgrade",typeToggle:"input[name=ssl-type]"},modelEvents:{change:"render"},events:{"click @ui.enable":"enable","click @ui.disable":"disable","click @ui.upgrade":"upgrade","change @ui.typeToggle":"typeToggle"},templateHelpers:function(){return{checked:{type:function(){return function(e,t){return this.ssl_type==t(e)?"checked":""}}}}},onRender:function(){this.ui.typeToggle.wRadio()},enable:function(){var e=this.model,t=i.settings.ssl.enable();t.done(function(){(!e.get("is_using_commerce")||e.get("is_externally_hosted"))&&e.save({ssl_type:"site"});var t=setInterval(function(){Weebly.Editor.RPC.SiteSettings.isCertificatePending().done(function(i){i||(clearInterval(t),e.fetch())})},3e4)}),t.fail(function(e){e&&alert(e)}),t.always(function(){})},disable:function(){var e=i.settings.ssl.disableSSl();e.fail(function(e){alert(e)}),e.always(function(){})},upgrade:function(){i.vent.trigger("billing:upgrade:window",{restrictionID:"site_ssl",restrictionType:"feature",refer:"displaySiteSettings"})},typeToggle:function(){var e=this.ui.typeToggle.filter(":checked").val();this.model.save({ssl_type:e})}});return o}),_wAMD.define("tpl!editor/site-settings/general/mobile",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Mobile{{/tl}}</h2>\n</div>\n\n<label>\n	<input\n		type="checkbox"\n		name="enable"\n		class="{{#enable_mobile}}checked{{/enable_mobile}}"\n		{{#enable_mobile}}checked{{/enable_mobile}}\n	>\n	{{#tl}}Display the mobile-optimized version of this website when someone visits from a mobile device.{{/tl}}\n</label>'}),_wAMD.define("editor/settings/general/MobileView",["backbone-all","mustache","tpl!editor/site-settings/general/mobile","util/ui/wInput"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),ui:{enable:"input[name=enable]"},events:{"change @ui.enable":"toggle"},onRender:function(){this.ui.enable.wCheckbox()},toggle:function(){var e=this,t=e.ui.enable.prop("checked");e.ui.enable.toggleClass("checked",t),e.model.save({enable_mobile:t});var i=new Weebly.Dialog("republish-reminder-dialog",{modal:!0});i.open()}});return n}),_wAMD.define("tpl!editor/site-settings/general/favicon",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Favicon{{/tl}}</h2>\n</div>\n\n<img class="favicon" src="{{favicon_source}}" />\n\n{{#hasAccess}}\n	{{#custom_favicon}}\n		<button class="remove btn-com btn-section">{{#tl}}Remove{{/tl}}</button>\n	{{/custom_favicon}}\n{{/hasAccess}}\n\n<div class="upload btn-com btn-section" {{^hasAccess}}style="display: none;"{{/hasAccess}}>{{#tl}}Upload{{/tl}}</div>\n\n{{^hasAccess}}\n	<button class="upgrade btn-com btn-section">{{#tl}}Upgrade{{/tl}}</button>\n{{/hasAccess}}\n'}),_wAMD.define("editor/settings/general/FaviconView",["mustache","components/uploader-view/UploaderView","editor/app","tpl!editor/site-settings/general/favicon"],function(e,t,i,n){var o=t.prototype,s=t.extend({template:e.compile(n),ui:{favicon:".favicon",upgrade:".upgrade",upload:".upload",remove:".remove"},events:{"click @ui.upgrade":"upgrade","click @ui.remove":"removeFavicon"},templateHelpers:{hasAccess:function(){return Weebly.Restrictions.hasAccess("editable_favicon")}},initialize:function(e){e.uploadOptions={target:".upload",type:"image",multipleFiles:!1,params:{type:"favicon",cookies:document.cookie.match(/WeeblySession=[^;]+(;|$)/)[0]}},o.initialize.apply(this,arguments)},onUploadSuccess:function(e){var t=this;if(e.success){var i=e.path+"?"+Math.floor(10000000001*Math.random());t.ui.favicon.attr("src",i),t.model.fetch().done(function(){t.render()})}else alert(e.message)},upgrade:function(){i.vent.trigger("billing:upgrade:window",{restrictionID:"editable_favicon",restrictionType:"feature",refer:"displaySiteSettings"})},removeFavicon:function(){var e=this;Weebly.Editor.RPC.SiteSettings.removeFavicon().done(function(){e.model.fetch().done(function(){e.render()})})}});return s}),_wAMD.define("tpl!editor/site-settings/general/password",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Site Password{{/tl}}</h2>\n	<h3>{{#tl}}Password protect your site{{/tl}}</h3>\n</div>\n\n<input class="password large" type="text" value="{{password}}">\n<button class="save btn-com btn-section">\n  <span class="icon w-icon-check-mark"></span>\n  <span class="text"> {{#tl}}Save{{/tl}}</span>\n</button><br>\n\n{{#tl}}Choose which pages to protect in the "Pages" tab.{{/tl}}\n'}),_wAMD.define("editor/settings/general/PasswordView",["backbone-all","mustache","editor/app","tpl!editor/site-settings/general/password"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),ui:{password:".password",save:".save"},events:{"click @ui.save":"save","focus @ui.password":"buttonReset"},onRender:function(){this.ui.save.wLoadButton({endText:_W.tl("Updated")})},buttonReset:function(){this.ui.save.wLoadButton("reset")},save:function(){if(Weebly.Restrictions.hasAccess("editable_site_password")){var e=this,t=e.ui.password.val(),n=e.ui.save;n.wLoadButton("startWait"),e.model.save({password:t}).done(function(){Weebly.PageManager.sitePasswordChanged(sitePassword,t),sitePassword=t,n.wLoadButton("endWait")})}else i.vent.trigger("billing:upgrade:window",{restrictionID:"editable_site_password",restrictionType:"feature",refer:"displaySiteSettings"})}});return o}),_wAMD.define("tpl!editor/site-settings/general/navigation",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Navigation{{/tl}}</h2>\n</div>\n\n<div>\n	<input type="checkbox" id="site-setting-group-under-more" name="group_under_more"{{#group_under_more}} checked{{/group_under_more}}>\n	<label for="site-setting-group-under-more">{{#tl}}Group excess pages under "More..."{{/tl}}</label>\n</div>'}),_wAMD.define("editor/settings/general/NavigationView",["backbone-all","mustache","tpl!editor/site-settings/general/navigation"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),ui:{groupUnderMore:"input[name=group_under_more]"},events:{"change @ui.groupUnderMore":"groupUnderMore"},onRender:function(){this.ui.groupUnderMore.wCheckbox()},groupUnderMore:function(){var e=this,t=e.ui.groupUnderMore.prop("checked");e.model.save({group_under_more:t}).done(function(){DISABLE_NAV_MORE=!t,renderTheme()})}});return n}),_wAMD.define("tpl!editor/site-settings/general/social-sharing",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Facebook Sharing{{/tl}}</h2>\n</div>\n\n{{^facebook.connected}}\n	<div class="disconnected">\n		<span class="error-text">{{#tl}}Not Connected{{/tl}}</span>\n		<button class="connect btn-com btn-section">{{#tl}}Setup Facebook Share{{/tl}}</button>\n	</div>\n{{/facebook.connected}}\n\n{{#facebook.connected}}\n	<div class="connected">\n		<img src="{{facebook.picture}}" />\n		<span class="success-text">{{#tl}}Connected with{{/tl}}</span>\n		<span class="nickname">{{facebook.nickname}}</span>\n		<button class="disconnect btn-com btn-section">{{#tl}}Disconnect{{/tl}}</button>\n	</div>\n{{/facebook.connected}}'}),_wAMD.define("editor/settings/general/SocialSharingView",["backbone-all","mustache","tpl!editor/site-settings/general/social-sharing"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),ui:{connect:".connect",disconnect:".disconnect"},onRender:function(){var e=this;e.ui.connect.fbConnect({onSuccess:function(){e.refresh()}}),e.ui.disconnect.fbDisconnect(function(){e.refresh()})},refresh:function(){var e=this;e.model.fetch().done(function(){e.render()})}});return n}),_wAMD.define("tpl!editor/site-settings/general/unpublish",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Un-publish{{/tl}}</h2>\n</div>\n\n{{^published}}\n	<p>{{#tl}}The site is not currently published.{{/tl}}</p>\n{{/published}}\n\n{{#published}}\n	<p>{{#tl}}Last published on {{last_publish_date}}{{/tl}}</p>\n	<button class="unpublish btn-com btn-danger btn-section">{{#tl}}Un-publish Site{{/tl}}</button>\n{{/published}}'}),_wAMD.define("editor/settings/general/UnpublishView",["backbone-all","mustache","tpl!editor/site-settings/general/unpublish"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),ui:{unpublish:".unpublish"},modelEvents:{"change publish":"render"},events:{"click @ui.unpublish":"unpublish"},unpublish:function(){var e=this;showConfirm({title:_W.tl("Unpublish Site"),message:_W.tl("Are you sure you want to un-publish this site?"),okText:_W.tl("Yes, un-publish"),onConfirm:function(){Weebly.Editor.RPC.SiteSettings.unpublish().done(function(t){t.success?e.model.fetch().done(function(){e.render()}):console.log(t.message||_W.tl("Something went wrong."))})}})}});return n}),_wAMD.define("tpl!editor/site-settings/general/platform_api",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Platform API Token{{/tl}}</h2>\n</div>\n\n{{#api_key}}\n	<p>{{#tl}}Token: {{api_key}}{{/tl}}</p>\n	<p>{{#tl}}Site Id: {{site_id}}{{/tl}}</p>\n{{/api_key}}\n{{^api_key}}\n	<p>{{#tl}}There is currently no api token generated.{{/tl}}</p>\n{{/api_key}}\n<button class="generate btn-com btn-section">{{#tl}}Generate Token{{/tl}}</button>'
}),_wAMD.define("editor/settings/general/PlatformAPIView",["backbone-all","mustache","tpl!editor/site-settings/general/platform_api"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),initialize:function(e){this.api_key=e.api_key},templateHelpers:function(){var e=this;return{site_id:currentSite,api_key:e.api_key}},ui:{generate:".generate"},events:{"click @ui.generate":"generate"},generate:function(){var e=this;_W.Editor.RPC.PlatformSettings.createAPIToken(userID).done(function(t){e.api_key=t.data,e.render()})}});return n}),_wAMD.define("tpl!editor/site-settings/general/archive",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Archive{{/tl}}</h2>\n</div>\n\n{{#archive_in_progress}}\n	<p>{{#tl}}We\'re creating your zip archive now. We\'ll send you an email with a download link as soon as your archive is ready. If for some reason you don\'t receive this email, check back here in a bit and you\'ll find a link to download the file waiting for you.{{/tl}}</p>\n{{/archive_in_progress}}\n\n{{^archive_in_progress}}\n	{{#canArchive}}\n		<p>{{#tl}}Create a .zip archive of your site.{{/tl}}</p>\n		<input type="email" class="large" name="archive_email" value="{{archive_email}}" placeholder="{{#esc_attr}}{{#tl}}email{{/tl}}{{/esc_attr}}">\n		<button class="send btn-com btn-section">{{#tl}}Email Archive{{/tl}}</button>\n	{{/canArchive}}\n	{{^canArchive}}\n		<p>{{#tl}}Your site must be published in order to archive it.{{/tl}}</p>\n	{{/canArchive}}\n{{/archive_in_progress}}\n\n{{#hasExports}}\n	<p>{{#tl}}Recent Exports{{/tl}}</p>\n	<ul class="recent-exports">\n		{{#exports}}\n			<li><a href=\'{{link}}\'>{{date}} UTC</a></li>\n		{{/exports}}\n	</ul>\n{{/hasExports}}\n'}),_wAMD.define("editor/settings/general/ArchiveView",["backbone-all","mustache","tpl!editor/site-settings/general/archive"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),ui:{email:"input[name=archive_email]",send:".send"},events:{"click @ui.send":"send"},templateHelpers:{hasExports:function(){return!!this.exports.length},canArchive:function(){return this.published}},send:function(){var e=this,t=e.ui.email.val();Weebly.Editor.RPC.SiteSettings.archive(t).done(function(t){t.success?e.model.fetch().done(function(){e.render()}):console.log(t.message)})}});return n}),_wAMD.define("tpl!editor/site-settings/general/datetime",[],function(){return'{{#options}}\n<div class="datetime-settings-wrapper">\n    <div class="sub-title-bar sub-title-separator inner-subtitle">\n        <h2>{{#tl}}Site Formatting{{/tl}}</h2>\n        <h3>{{#tl}}Set site language & the date/time format{{/tl}}</h3>\n    </div>\n\n    <div class="dd-option-list">\n        <div class="dd-option-container settings-date-format">\n            <div class="dd-option-label">{{#tl}}Date format:{{/tl}}</div>\n            <div class="dd-option">\n                <select name="date_format" class="date-format" data-type="date">\n                    {{#dateFormat}}\n                    <option value="{{value}}" {{#current}}selected{{/current}}>\n                        {{text}}\n                    </option>\n                    {{/dateFormat}}\n                </select>\n            </div>\n        </div>\n        <div class="dd-option-container settings-time-format">\n            <div class="dd-option-label">{{#tl}}Time format:{{/tl}}</div>\n            <div class="dd-option">\n                <select name="time_format" class="time-format">\n                    {{#timeFormat}}\n                    <option value="{{value}}" {{#current}}selected{{/current}}>\n                        {{text}}\n                    </option>\n                    {{/timeFormat}}\n                </select>\n            </div>\n        </div>\n        <div class="dd-option-container settings-time-zone">\n            <div class="dd-option-label">{{#tl}}Time zone:{{/tl}}</div>\n            <div class="dd-option">\n                <select name="time_zone" class="time-zone">\n                    {{#timezones}}\n                    <option\n                            value="{{value}}"\n                            {{#current}}selected{{/current}}\n                            >\n                        {{text}}\n                    </option>\n                    {{/timezones}}\n                </select>\n            </div>\n        </div>\n        <div class="dd-option-container blog-settings-time-zone">\n            <div class="dd-option-label">{{#tl}}Site Language:{{/tl}}</div>\n            <div class="dd-option">\n                <select name="locale" class="locale">\n                    {{#siteLocales}}\n                    <option\n                            value="{{value}}"\n                            {{#current}}selected{{/current}}\n                            >\n                        {{text}}\n                    </option>\n                    {{/siteLocales}}\n                </select>\n            </div>\n        </div>\n		{{#isResellerSite}}\n		<div class="dd-option-container blog-settings-time-zone">\n			<div class="dd-option-label">{{#tl}}Editor Language:{{/tl}}</div>\n			<div class="dd-option">\n				<select name="editor_lang" class="editor_lang">\n					{{#editorLocales}}\n					<option\n							value="{{value}}"\n							{{#current}}selected{{/current}}\n							>\n						{{text}}\n					</option>\n					{{/editorLocales}}\n				</select>\n			</div>\n		</div>\n		{{/isResellerSite}}\n    </div>\n</div>\n{{/options}}'}),_wAMD.define("json!definitions/timezones.json",function(){return[{value:"America/Los_Angeles",name:"Pacific Time (US & Canada) (UTC-08:00)"},{value:"Pacific/Midway",name:"Midway Island (UTC-11:00)"},{value:"Pacific/Samoa",name:"Samoa (UTC-11:00)"},{value:"Pacific/Honolulu",name:"Hawaii (UTC-10:00)"},{value:"US/Alaska",name:"Alaska (UTC-09:00)"},{value:"America/Tijuana",name:"Tijuana (UTC-08:00)"},{value:"US/Arizona",name:"Arizona (UTC-07:00)"},{value:"America/Chihuahua",name:"Chihuahua (UTC-07:00)"},{value:"America/Chihuahua",name:"La Paz (UTC-07:00)"},{value:"America/Mazatlan",name:"Mazatlan (UTC-07:00)"},{value:"US/Mountain",name:"Mountain Time (US & Canada) (UTC-07:00)"},{value:"America/Managua",name:"Central America (UTC-06:00)"},{value:"US/Central",name:"Central Time (US & Canada) (UTC-06:00)"},{value:"America/Mexico_City",name:"Guadalajara (UTC-06:00)"},{value:"America/Mexico_City",name:"Mexico City (UTC-06:00)"},{value:"America/Monterrey",name:"Monterrey (UTC-06:00)"},{value:"Canada/Saskatchewan",name:"Saskatchewan (UTC-06:00)"},{value:"America/Bogota",name:"Bogota (UTC-05:00)"},{value:"US/Eastern",name:"Eastern Time (US & Canada) (UTC-05:00)"},{value:"US/East-Indiana",name:"Indiana (East) (UTC-05:00)"},{value:"America/Lima",name:"Lima (UTC-05:00)"},{value:"America/Bogota",name:"Quito (UTC-05:00)"},{value:"Canada/Atlantic",name:"Atlantic Time (Canada) (UTC-04:00)"},{value:"America/Caracas",name:"Caracas (UTC-04:30)"},{value:"America/La_Paz",name:"La Paz (UTC-04:00)"},{value:"America/Santiago",name:"Santiago (UTC-04:00)"},{value:"Canada/Newfoundland",name:"Newfoundland (UTC-03:30)"},{value:"America/Sao_Paulo",name:"Brasilia (UTC-03:00)"},{value:"America/Argentina/Buenos_Aires",name:"Buenos Aires (UTC-03:00)"},{value:"America/Argentina/Buenos_Aires",name:"Georgetown (UTC-03:00)"},{value:"America/Godthab",name:"Greenland (UTC-03:00)"},{value:"America/Noronha",name:"Mid-Atlantic (UTC-02:00)"},{value:"Atlantic/Azores",name:"Azores (UTC-01:00)"},{value:"Atlantic/Cape_Verde",name:"Cape Verde Is. (UTC-01:00)"},{value:"Africa/Casablanca",name:"Casablanca (UTC+00:00)"},{value:"Europe/London",name:"Edinburgh (UTC+00:00)"},{value:"Etc/Greenwich",name:"Greenwich Mean Time : Dublin (UTC+00:00)"},{value:"Europe/Lisbon",name:"Lisbon (UTC+00:00)"},{value:"Europe/London",name:"London (UTC+00:00)"},{value:"Africa/Monrovia",name:"Monrovia (UTC+00:00)"},{value:"UTC",name:"UTC (UTC+00:00)"},{value:"Europe/Amsterdam",name:"Amsterdam (UTC+01:00)"},{value:"Europe/Belgrade",name:"Belgrade (UTC+01:00)"},{value:"Europe/Berlin",name:"Berlin (UTC+01:00)"},{value:"Europe/Berlin",name:"Bern (UTC+01:00)"},{value:"Europe/Bratislava",name:"Bratislava (UTC+01:00)"},{value:"Europe/Brussels",name:"Brussels (UTC+01:00)"},{value:"Europe/Budapest",name:"Budapest (UTC+01:00)"},{value:"Europe/Copenhagen",name:"Copenhagen (UTC+01:00)"},{value:"Europe/Ljubljana",name:"Ljubljana (UTC+01:00)"},{value:"Europe/Madrid",name:"Madrid (UTC+01:00)"},{value:"Europe/Paris",name:"Paris (UTC+01:00)"},{value:"Europe/Prague",name:"Prague (UTC+01:00)"},{value:"Europe/Rome",name:"Rome (UTC+01:00)"},{value:"Europe/Sarajevo",name:"Sarajevo (UTC+01:00)"},{value:"Europe/Skopje",name:"Skopje (UTC+01:00)"},{value:"Europe/Stockholm",name:"Stockholm (UTC+01:00)"},{value:"Europe/Vienna",name:"Vienna (UTC+01:00)"},{value:"Europe/Warsaw",name:"Warsaw (UTC+01:00)"},{value:"Africa/Lagos",name:"West Central Africa (UTC+01:00)"},{value:"Europe/Zagreb",name:"Zagreb (UTC+01:00)"},{value:"Europe/Athens",name:"Athens (UTC+02:00)"},{value:"Europe/Bucharest",name:"Bucharest (UTC+02:00)"},{value:"Africa/Cairo",name:"Cairo (UTC+02:00)"},{value:"Africa/Harare",name:"Harare (UTC+02:00)"},{value:"Europe/Helsinki",name:"Helsinki (UTC+02:00)"},{value:"Europe/Istanbul",name:"Istanbul (UTC+02:00)"},{value:"Asia/Jerusalem",name:"Jerusalem (UTC+02:00)"},{value:"Europe/Helsinki",name:"Kyiv (UTC+02:00)"},{value:"Africa/Johannesburg",name:"Pretoria (UTC+02:00)"},{value:"Europe/Riga",name:"Riga (UTC+02:00)"},{value:"Europe/Sofia",name:"Sofia (UTC+02:00)"},{value:"Europe/Tallinn",name:"Tallinn (UTC+02:00)"},{value:"Europe/Vilnius",name:"Vilnius (UTC+02:00)"},{value:"Asia/Baghdad",name:"Baghdad (UTC+03:00)"},{value:"Asia/Kuwait",name:"Kuwait (UTC+03:00)"},{value:"Europe/Minsk",name:"Minsk (UTC+03:00)"},{value:"Africa/Nairobi",name:"Nairobi (UTC+03:00)"},{value:"Asia/Riyadh",name:"Riyadh (UTC+03:00)"},{value:"Europe/Volgograd",name:"Volgograd (UTC+03:00)"},{value:"Asia/Tehran",name:"Tehran (UTC+03:30)"},{value:"Asia/Muscat",name:"Abu Dhabi (UTC+04:00)"},{value:"Asia/Baku",name:"Baku (UTC+04:00)"},{value:"Europe/Moscow",name:"Moscow (UTC+04:00)"},{value:"Asia/Muscat",name:"Muscat (UTC+04:00)"},{value:"Europe/Moscow",name:"St. Petersburg (UTC+04:00)"},{value:"Asia/Tbilisi",name:"Tbilisi (UTC+04:00)"},{value:"Asia/Yerevan",name:"Yerevan (UTC+04:00)"},{value:"Asia/Kabul",name:"Kabul (UTC+04:30)"},{value:"Asia/Karachi",name:"Islamabad (UTC+05:00)"},{value:"Asia/Karachi",name:"Karachi (UTC+05:00)"},{value:"Asia/Tashkent",name:"Tashkent (UTC+05:00)"},{value:"Asia/Calcutta",name:"Chennai (UTC+05:30)"},{value:"Asia/Kolkata",name:"Kolkata (UTC+05:30)"},{value:"Asia/Calcutta",name:"Mumbai (UTC+05:30)"},{value:"Asia/Calcutta",name:"New Delhi (UTC+05:30)"},{value:"Asia/Calcutta",name:"Sri Jayawardenepura (UTC+05:30)"},{value:"Asia/Katmandu",name:"Kathmandu (UTC+05:45)"},{value:"Asia/Almaty",name:"Almaty (UTC+06:00)"},{value:"Asia/Dhaka",name:"Astana (UTC+06:00)"},{value:"Asia/Dhaka",name:"Dhaka (UTC+06:00)"},{value:"Asia/Yekaterinburg",name:"Ekaterinburg (UTC+06:00)"},{value:"Asia/Rangoon",name:"Rangoon (UTC+06:30)"},{value:"Asia/Bangkok",name:"Bangkok (UTC+07:00)"},{value:"Asia/Bangkok",name:"Hanoi (UTC+07:00)"},{value:"Asia/Jakarta",name:"Jakarta (UTC+07:00)"},{value:"Asia/Novosibirsk",name:"Novosibirsk (UTC+07:00)"},{value:"Asia/Hong_Kong",name:"Beijing (UTC+08:00)"},{value:"Asia/Chongqing",name:"Chongqing (UTC+08:00)"},{value:"Asia/Hong_Kong",name:"Hong Kong (UTC+08:00)"},{value:"Asia/Krasnoyarsk",name:"Krasnoyarsk (UTC+08:00)"},{value:"Asia/Kuala_Lumpur",name:"Kuala Lumpur (UTC+08:00)"},{value:"Australia/Perth",name:"Perth (UTC+08:00)"},{value:"Asia/Singapore",name:"Singapore (UTC+08:00)"},{value:"Asia/Taipei",name:"Taipei (UTC+08:00)"},{value:"Asia/Ulan_Bator",name:"Ulaan Bataar (UTC+08:00)"},{value:"Asia/Urumqi",name:"Urumqi (UTC+08:00)"},{value:"Asia/Irkutsk",name:"Irkutsk (UTC+09:00)"},{value:"Asia/Tokyo",name:"Osaka (UTC+09:00)"},{value:"Asia/Tokyo",name:"Sapporo (UTC+09:00)"},{value:"Asia/Seoul",name:"Seoul (UTC+09:00)"},{value:"Asia/Tokyo",name:"Tokyo (UTC+09:00)"},{value:"Australia/Adelaide",name:"Adelaide (UTC+09:30)"},{value:"Australia/Darwin",name:"Darwin (UTC+09:30)"},{value:"Australia/Brisbane",name:"Brisbane (UTC+10:00)"},{value:"Australia/Canberra",name:"Canberra (UTC+10:00)"},{value:"Pacific/Guam",name:"Guam (UTC+10:00)"},{value:"Australia/Hobart",name:"Hobart (UTC+10:00)"},{value:"Australia/Melbourne",name:"Melbourne (UTC+10:00)"},{value:"Pacific/Port_Moresby",name:"Port Moresby (UTC+10:00)"},{value:"Australia/Sydney",name:"Sydney (UTC+10:00)"},{value:"Asia/Yakutsk",name:"Yakutsk (UTC+10:00)"},{value:"Asia/Vladivostok",name:"Vladivostok (UTC+11:00)"},{value:"Pacific/Auckland",name:"Auckland (UTC+12:00)"},{value:"Pacific/Fiji",name:"Fiji (UTC+12:00)"},{value:"Pacific/Kwajalein",name:"International Date Line West (UTC+12:00)"},{value:"Asia/Kamchatka",name:"Kamchatka (UTC+12:00)"},{value:"Asia/Magadan",name:"Magadan (UTC+12:00)"},{value:"Pacific/Fiji",name:"Marshall Is. (UTC+12:00)"},{value:"Asia/Magadan",name:"New Caledonia (UTC+12:00)"},{value:"Asia/Magadan",name:"Solomon Is. (UTC+12:00)"},{value:"Pacific/Auckland",name:"Wellington (UTC+12:00)"},{value:"Pacific/Tongatapu",name:"Nuku'alofa (UTC+13:00)"}]}),_wAMD.define("json!definitions/languages.json",function(){return{de:{name:"Deutsch",label:"German",image:"germany",twitter:"de"},da:{name:"dansk",label:"Danish",image:"denmark",twitter:"da"},en:{name:"English",label:"English",image:"english",twitter:"en"},es:{name:"Español",label:"Spanish",image:"spain",twitter:"es"},fr:{name:"Français",label:"French",image:"france",twitter:"fr"},it:{name:"Italiano",label:"Italian",image:"italy",twitter:"it"},ja:{name:"日本語",label:"Japanese",image:"japan",twitter:"ja"},nl:{name:"Nederlands",label:"Dutch",image:"netherlands",twitter:"nl"},no:{name:"norsk",label:"Norwegian",image:"norway",twitter:"no"},pl:{name:"Polski",label:"Polish",image:"polish",twitter:"pl"},pt:{name:"Português",label:"Portuguese",image:"portugal",twitter:"pt"},ru:{name:"Pусский",label:"Russian",image:"russia",twitter:"ru"},sv:{name:"svenska",label:"Swedish",image:"sweden",twitter:"sv"},tr:{name:"Türkçe",label:"Turkish",image:"turkey",twitter:"tr"},zh:{name:"中文",label:"Chinese (simplified)",image:"china",twitter:"zh-cn"}}}),_wAMD.define("editor/settings/general/SiteFormattingView",["jquery","backbone-all","mustache","tpl!editor/site-settings/general/datetime","json!definitions/timezones.json","json!definitions/languages.json"],function(e,t,i,n,o,s){var r=t.Marionette.ItemView.extend({template:i.compile(n),events:{"change @ui.selects":"save","change .editor_lang":"changeLanguage"},ui:{selects:"select"},save:function(t){var i=e(t.target).val(),n=e(t.target).attr("name");if("editor_lang"!==n){var o={};o[n]=i,this.model.save(o).done(function(){var e=require("editor/build/utils");e.renderPage(window.currentPage)})}},changeLanguage:function(t){var i=e(t.target).val();return Weebly.Editor.RPC.SiteSettings.setLanguage(i).then(function(){location.reload()}),!1},templateHelpers:function(){var e={can:{editPages:Weebly.Permissions.allow_pages}};if(!this.loading){var t=this.model,i=t.get("date_format"),n=t.get("time_format"),r=t.get("time_zone"),a=t.get("is_reseller_site"),l=function(e){return _.sortBy(_.map(s,function(t,i){return{value:i,text:t.label,current:function(){return null===e&&"en"==i?!0:i===e}}}),"text")};_.extend(e,{options:{isResellerSite:a,dateFormat:[{value:"n/j/Y",text:"MM/DD/YYYY",current:"n/j/Y"===i},{value:"j/n/Y",text:"DD/MM/YYYY",current:"j/n/Y"===i}],timeFormat:[{value:"12",text:_W.tl("12 hour"),current:"12"===n},{value:"24",text:_W.tl("24 hour"),current:"24"===n}],timezones:_.map(o,function(e){return{value:e.value,text:e.name,current:function(){return null==r&&"America/Los_Angeles"==e.value?!0:e.value==r}}}),siteLocales:l(t.get("language")),editorLocales:l(Weebly.userLang)}})}return e},onRender:function(){this.ui.selects.wSelectbox({theme:"com",addSearchbar:!0})}});return r}),_wAMD.define("tpl!editor/site-settings/general/layout",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}General{{/tl}}</h1>\n</div>\n\n{{! regions }}\n<div class="setting-address section"></div>\n<div class="setting-title section"></div>\n<div class="setting-ssl section"></div>\n<div class="setting-mobile section"></div>\n<div class="setting-favicon section"></div>\n<div class="setting-password section"></div>\n<div class="setting-navigation section"></div>\n<div class="setting-social-sharing section"></div>\n<div class="setting-archive section"></div>\n<div class="setting-platform-api section"></div>\n<div class="setting-datetime section"></div>\n<div class="setting-unpublish section"></div>'}),_wAMD.define("editor/settings/general/GeneralSettingsView",["backbone-all","mustache","editor/settings/model/SiteSettings","./AddressView","./TitleView","./SSLView","./MobileView","./FaviconView","./PasswordView","./NavigationView","./SocialSharingView","./UnpublishView","./PlatformAPIView","./ArchiveView","./SiteFormattingView","tpl!editor/site-settings/general/layout"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m){var g=e.Marionette.Layout.extend({template:t.compile(m),className:"sliding-panel-main-region",regions:{address:".setting-address",title:".setting-title",ssl:".setting-ssl",mobile:".setting-mobile",favicon:".setting-favicon",password:".setting-password",navigation:".setting-navigation",socialSharing:".setting-social-sharing",unpublish:".setting-unpublish",archive:".setting-archive",platform_api:".setting-platform-api",datetime:".setting-datetime"},onRender:function(){var e=this;siteSettings=i.findOrCreate(),startWait(),siteSettings.fetch().done(function(){var t={model:siteSettings},i=isClientSite&&isClient;e.check("editable_site_address")&&e.address.show(new n(t)),e.check("editable_site_title")&&e.title.show(new o(t)),!e.check("site_ssl")||isClientSite&&!isMaster||e.ssl.show(new s(t)),t.model.get("allow_mobile")!==!1&&e.mobile.show(new r(t)),e.check("editable_favicon")&&e.favicon.show(new a(t)),e.check("editable_site_password")&&("nhd"!==source||"nhd"===source&&t.model.get("password"))&&e.password.show(new l(t)),e.check("social_sharing")&&!isClientSite&&"reseller"!=source&&e.socialSharing.show(new u(t)),i||(e.unpublish.show(new d(t)),e.archive.show(new p(t))),Weebly.HERMES_ENABLED&&_W.Editor.RPC.PlatformSettings.getAPIToken(userID).done(function(t){e.platform_api.show(new h({api_key:t.data}))}),e.datetime.show(new f(t)),e.navigation.show(new c(t)),editorApp.vent.trigger("settings:nav:close")}).always(function(){endWait()})},check:function(e){var t=Weebly.Restrictions;return t.hasAccess(e)||t.featureEnabled(e)}});return g}),_wAMD.define("tpl!editor/site-settings/seo/redirects/item",[],function(){return'<td style="width:100%">{{old_url}}</td>\n<td>{{page_title}}</td>\n<td></td>\n<td><span class="remove delete w-icon-delete"></span></td>'}),_wAMD.define("tpl!editor/site-settings/seo/redirects/edit",[],function(){return'<td class="input" style="width:100%">\n	<input type="text" name="old_url" value="{{old_url}}" placeholder="{{#esc_attr}}#{{#tl}}/example.html{{/tl}}{{/esc_attr}}">\n</td>\n\n<td class="input">\n	<select name="page" class="control">\n		{{#pages}}\n			<option value="{{page_id}}" {{#current}}selected{{/current}}>\n				{{title}}\n			</option>\n		{{/pages}}\n	</select>\n</td>\n\n<td class="input">\n	<button class="cancel btn-com">{{#tl}}Cancel{{/tl}}</button>\n	<button class="save btn-com btn-success">{{#tl}}Save{{/tl}}</button>\n</td>\n\n<td></td>'}),_wAMD.define("editor/settings/seo/RedirectItemView",["jquery","underscore","backbone-all","mustache","tpl!editor/site-settings/seo/redirects/item","tpl!editor/site-settings/seo/redirects/edit","util/ui/wSelectbox/Dropdown"],function(e,t,i,n,o,s){var r={item:n.compile(o),edit:n.compile(s)},a=i.Marionette.ItemView.extend({tagName:"tr",className:"section selectable",template:r.item,ui:{pageSelect:"select[name=page]",oldUrl:"input[name=old_url]"},events:{click:"edit","click .save":"save","click .cancel":"cancel","click .delete":"delete","change @ui.oldUrl":"formatUrl"},templateHelpers:function(){var e=this.model;return{page_title:function(){var e=Weebly.PageManager.pages[this.target_id];return e?e.title:""},pages:function(){return t.map(Weebly.PageManager.pages,function(i,n){return t.extend({},i,{page_id:n,current:n==e.get("target_id")})},this)}}},onRender:function(){this.ui.pageSelect.wSelectbox({theme:"com"}),this.model.get("isAdd")&&this.edit()},formatUrl:function(){var t=this.ui.oldUrl.val();t=e.trim(t).replace(/^http(s?):\/\//,"").replace(/^.*?\//,"/").replace(/^([^/])/,"/$1"),this.ui.oldUrl.val(t),t.match(/^[!#$&-;=?-\[\]_a-z~%]+$/)||alert(_W.tl("%s is not a valid url").replace(/%s/,t)),"/index.html"==t&&alert(_W.tl("You cannot redirect index.html"))},edit:function(){var e=this;e.editing||(e.editing=!0,e.$el.removeClass("selectable"),e.template=r.edit,e.render(),e.ui.oldUrl.focus())},save:function(e){var t=this;this.model.set("isAdd",!1),t.model.set({old_url:t.ui.oldUrl.val(),target_id:t.ui.pageSelect.val()}),t.reset(e)},cancel:function(e){this.model.get("isAdd")?this.model.destroy():this.reset(e)},reset:function(e){var t=this;e.stopPropagation(),t.editing=!1,t.$el.addClass("selectable"),t.template=r.item,t.render()},"delete":function(e){e.stopPropagation(),confirm(_W.tl("Are you sure?"))&&this.model.destroy()}});return a}),_wAMD.define("tpl!editor/site-settings/seo/redirects",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}301 Redirects{{/tl}}</h2>\n</div>\n\n<table class="entity-list">\n	<colgroup>\n		<col><col><col>\n		<col width="50">\n	</colgroup>\n	<thead>\n		<tr>\n			<th>{{#tl}}Old URL{{/tl}}</th>\n			<th>{{#tl}}Destination Page{{/tl}}</th>\n			<th>{{! cancel/save }}</th>\n			<th>{{! delete }}</th>\n		</tr>\n	</thead>\n	<tfoot>\n		<tr class="selectable">\n			<th colspan="4" class="add">\n				<span class="w-icon-add"></span>\n				{{#tl}}Add Redirect{{/tl}}\n			</th>\n		</tr>\n	</tfoot>\n	<tbody></tbody>\n</table>'}),_wAMD.define("editor/settings/seo/RedirectsView",["jquery","backbone-all","mustache","./RedirectItemView","tpl!editor/site-settings/seo/redirects"],function(e,t,i,n,o){var s=t.Marionette.CompositeView.extend({template:i.compile(o),itemView:n,itemViewContainer:"tbody",events:{"click .add":"add"},initialize:function(){var e=this;e.collection=new t.Collection,Weebly.Editor.RPC.SiteSettings.getRedirects().done(function(t){e.collection.reset(t)})},add:function(){this.collection.add({old_url:"",target_id:!1,isAdd:!0})}});return s}),_wAMD.define("tpl!editor/site-settings/seo/layout",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}SEO{{/tl}}</h1>\n</div>\n\n<div class="seo-form-inputs">\n	<div class="section row">\n		<span class="char-count"><span class="count"></span> {{#tl}}characters left{{/tl}}</span>\n		<label class="label">{{#tl}}Site Description{{/tl}}</label>\n		<input type="text" name="meta_description" value="{{#esc_attr}}{{meta_description}}{{/esc_attr}}" maxlength="250" class="count-characters">\n	</div>\n\n	<div class="section row">\n		<span class="char-count"><span class="count"></span> {{#tl}}characters left{{/tl}}</span>\n		<label class="label">{{#tl}}Meta Keywords{{/tl}}</label>\n		<input type="text" name="meta_keywords" value="{{#esc_attr}}{{meta_keywords}}{{/esc_attr}}" maxlength="255" class="count-characters">\n		<div class="footnote">{{#tl}}Separate each keyword with a comma.{{/tl}}</div>\n	</div>\n\n	<div class="section row">\n		<label class="label">{{#tl}}Footer Code{{/tl}}</label>\n		<textarea name="footer_code">{{footer_code}}</textarea>\n		<div class="footnote">{{#tl}}ex. <a href="http://www.google.com/analytics/" target="_blank">Google Analytics</a> tracking code{{/tl}}</div>\n	</div>\n\n	<div class="section row">\n		<label class="label">{{#tl}}Header Code{{/tl}}</label>\n		<textarea name="header_code">{{header_code}}</textarea>\n		<div class="footnote">{{#tl}}ex. <a href="http://www.google.com/webmasters/" target="_blank">Google Webmaster Tools</a> verification meta tag{{/tl}}</div>\n	</div>\n\n	<div class="row section toggle-option">\n		<label class="label" for="site-setting-seo-hide-from-search">\n			{{#tl}}Hide site from search engines{{/tl}}\n		</label>\n\n		<div class="toggle-switch inline-toggle-switch control light">\n			<input\n				type="checkbox"\n				name="hide_from_search"\n				id="site-setting-seo-hide-from-search"\n				class="toggle-field {{#hide_from_search}}checked{{/hide_from_search}}"\n				{{#hide_from_search}}checked{{/hide_from_search}}\n			>\n\n			<label for="site-setting-seo-hide-from-search">\n				<div class="background-container">\n					<div class="background-slider">\n						<span class="label-on">{{#tl}}ON{{/tl}}</span>\n						<span class="label-off">{{#tl}}OFF{{/tl}}</span>\n					</div>\n				</div>\n				<span class="blob">\n					<span class="blob-inner"></span>\n				</span>\n			</label>\n		</div>\n	</div>\n</div>\n\n<div class="setting-redirects">{{! region }}</div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>\n'}),_wAMD.define("editor/settings/seo/SEOSettingsView",["jquery","backbone-all","mustache","editor/settings/model/SiteSettings","./RedirectsView","tpl!editor/site-settings/seo/layout"],function(e,t,i,n,o,s){var r=t.Marionette.Layout.extend({template:i.compile(s),className:"sliding-panel-main-region",regions:{redirects:".setting-redirects"},ui:{meta_description:"input[name=meta_description]",meta_keywords:"input[name=meta_keywords]",footer_code:"textarea[name=footer_code]",header_code:"textarea[name=header_code]",hide_from_search:"input[name=hide_from_search]",save:".save",inputs:"input, textarea",count_characters:".count-characters"},events:{"click @ui.save":"save","change  @ui.hide_from_search":"updateHideFromSearch","keyup @ui.inputs":"buttonReset","focus @ui.count_characters":"showCharacterCount","keyup @ui.count_characters":"updateCharacterCount"},initialize:function(){var e=this;e.model=n.findOrCreate(),e.model.fetch().done(function(){e.render()})},onRender:function(){var e=this;e.redirects.show(new o({model:e.model})),e.ui.save.wLoadButton({endText:_W.tl("Updated")})},updateHideFromSearch:function(){var e=this.ui.hide_from_search;e.toggleClass("checked",e.prop("checked")),this.buttonReset()},showCharacterCount:function(t){this.updateCharacterCount(t),e(t.currentTarget).parent().find(".char-count").show()},updateCharacterCount:function(t){e(t.currentTarget).parent().find(".count").html(this.getCharacterTotal(t))},getCharacterTotal:function(e){return e.currentTarget.getAttribute("maxlength")-e.currentTarget.value.length},buttonReset:function(){this.ui.save.wLoadButton("reset")},save:function(){var t=this,i=t.ui;i.save.wLoadButton("startWait");var n=t.model.save({meta_description:i.meta_description.val(),meta_keywords:i.meta_keywords.val(),footer_code:i.footer_code.val(),header_code:i.header_code.val(),hide_from_search:i.hide_from_search.prop("checked")}),o=t.redirects.currentView.collection,s=o.map(function(e){return{url:e.get("old_url"),page_id:e.get("target_id")}}),r=Weebly.Editor.RPC.SiteSettings.saveRedirects(s);e.when(n,r).done(function(){i.save.wLoadButton("endWait")})}});return r}),_wAMD.define("tpl!editor/site-settings/commerce/layout",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}E-Commerce{{/tl}}</h1>\n</div>\n\n<div class="sub-title-bar sub-title-separator inner-subtitle">\n	<h2>{{#tl}}Merchant Account{{/tl}}</h2>\n</div>\n{{#isPaypal}}\n	<label class="label">PayPal</label>\n	<button class="remove-merchant btn-com btn-section btn-danger">{{#tl}}Remove{{/tl}}</button>\n{{/isPaypal}}\n{{^isPaypal}}\n	<label class="label">{{#tl}}None{{/tl}}</label>\n	<button class="add-paypal btn-com btn-section">{{#tl}}Use PayPal{{/tl}}</button>\n{{/isPaypal}}\n\n{{#isPaypal}}\n	<div class="sub-title-bar sub-title-separator inner-subtitle">\n		<h2>{{#tl}}PayPal Email{{/tl}}</h2>\n	</div>\n	<div>\n		<input name="title" class="merchant_email large" type="text" value="{{merchant_email}}">\n	</div>\n\n	<div class="sub-title-bar sub-title-separator inner-subtitle">\n		<h2>{{#tl}}Currency{{/tl}}</h2>\n	</div>\n	<div>\n		<label class="label current-currency">{{currency_name}} ({{{currency_symbol}}})</label>\n		<span class="dropdown hang-left" style="float: right;">\n			<a class="btn dropdown-toggle" data-toggle="dropdown">Change <span class="caret"></span></a>\n			<ul class="dropdown-menu">\n				{{#currencyArray}}\n					<li><a href="#" class="currency-select" data-code="{{#esc_attr}}{{code}}{{/esc_attr}}">{{name}} ({{{symbol}}})</a></li>\n				{{/currencyArray}}\n			</ul>\n		</span>\n	</div>\n{{/isPaypal}}\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>'}),_wAMD.define("editor/settings/commerce/CommerceSettingsView",["underscore","jquery","backbone-all","mustache","editor/settings/model/SiteSettings","tpl!editor/site-settings/commerce/layout","util/ui/wLoadButton"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),className:"sliding-panel-main-region",ui:{addPaypal:".add-paypal",removeMerchant:".remove-merchant",merchantEmail:".merchant_email",currencySelect:".currency-select",currentCurrency:".current-currency",save:".save"},modelEvents:{change:"resetSave"},events:{"click @ui.addPaypal":"addPaypal","click @ui.removeMerchant":"removeMerchant","change @ui.merchantEmail":"changeMerchantEmail","click @ui.currencySelect":"selectCurrency","click @ui.save":"save","keyup input":"resetSave"},templateHelpers:function(){var t=this;return{isPaypal:function(){return"paypal"==this.merchant},currencyArray:function(){return e.map(this.currencies,function(e,t){return e.code=t,e})},currency_name:function(){var e=t.getCurrency();return e?e.name:!1},currency_symbol:function(){var e=t.getCurrency();return e?e.symbol:!1}}},initialize:function(){var e=this;e.model=o.findOrCreate(),siteSettings.fetch().done(function(){e.render()})},onRender:function(){this.ui.save.wLoadButton({endText:_W.tl("Saved")})},addPaypal:function(){this.model.set("merchant","paypal"),this.render()},removeMerchant:function(){this.model.set("merchant",!1),this.render()},changeMerchantEmail:function(){this.model.set("merchant_email",this.ui.merchantEmail.val())},getCurrency:function(){var e=this.model,t=e.get("currency_code"),i=e.get("currencies");return t?i[t]:!1},selectCurrency:function(e){var i=t(e.target),n=i.data("code");n&&this.model.set("currency_code",n),this.render()},resetSave:function(){this.ui.save.wLoadButton("reset")},save:function(){var e=this;e.ui.save.wLoadButton("startWait"),e.model.save().done(function(){e.ui.save.wLoadButton("endWait")})}});return r}),_wAMD.define("editor/settings/model/Contributor",["jquery","backbone-all"],function(e,t){var i=t.RelationalModel.extend({_class:"Settings.Model.Editor",defaults:{role:"admin"},sync:function(e,t,i){var n;switch(i=i||{},e){case"create":t.set({owner_id:userID,site_id:currentSite});case"update":case"patch":var o=i.attrs||t.toJSON(i),s="create"==e?"create":"update";n=Weebly.Editor.RPC.Contributor[s](o),n.done(function(e){e.success?(t.set(e.updated),i.success&&i.success()):i.error&&i.error()});break;case"read":n=Weebly.Editor.RPC.Contributor.read(t.pick("contributor_user_id","contributor_pc_id")),n.done(function(e){t.set(e)});break;case"delete":n=Weebly.Editor.RPC.Contributor.destroy({id:t.id,user_id:userID,site_id:currentSite});break;default:console.warn(e+" not defined for this model",t)}return n}},{vent:_.extend({},t.Events),createMultiple:function(t){t=t||{},t._class&&(t=t.toJSON()),t.owner_id=userID,t.site_id=currentSite;
var n=e.Deferred(),o=Weebly.Editor.RPC.Contributor.createMultiple(t);return o.done(function(t){if(t.success){var o=[];e.each(t.models,function(e,t){o.push(new i(t))}),i.vent.trigger("create",o),n.resolve(o)}else n.reject(t.errors)}),o.fail(function(){n.reject()}),n.promise()}});return i}),_wAMD.define("editor/settings/collection/Contributor",["backbone-all","../model/Contributor"],function(e,t){var i=e.Collection.extend({model:t,sync:function(e,t,i){var n;switch(i=i||{},e){case"read":n=Weebly.Editor.RPC.Contributor.read({site_id:currentSite}),n.done(function(e){i.success&&i.success(e)}),n.fail(function(){i.error&&i.error()});break;default:console.warn(e+" not defined for this collection",t)}return n}});return i}),_wAMD.define("tpl!editor/settings/contributor/list/item",[],function(){return'<td class="editor-email">{{email}}</td>\n\n<td>{{display_role}}</td>\n\n<td>\n	{{#last_login}}\n		{{#fmt.shortDate}}{{last_login}}{{/fmt.shortDate}}\n		{{#fmt.time}}{{last_login}}{{/fmt.time}}\n	{{/last_login}}\n	{{^last_login}}\n		{{#tl}}Never - <a href="{{invite}}" target="_blank">Invitation</a{{/tl}}\n	{{/last_login}}\n</td>\n\n<td class="options">\n	<span class="menu w-icon-cog">{{>ui/hover-toolbar}}</span>\n</td>\n'}),_wAMD.define("editor/settings/contributor/list/ContributorListItemView",["backbone-all","mustache","editor/app","tpl!editor/settings/contributor/list/item","tpl!ui/hover-toolbar"],function(e,t,i,n,o){t.compilePartial("ui/hover-toolbar",o);var s=e.Marionette.ItemView.extend({template:t.compile(n),tagName:"tr",className:"selectable",ui:{menu:".hover-toolbar"},modelEvents:{change:"render"},events:{"click td":"editContributor","click .edit":"editContributor","click .delete":"deleteContributor","click .menu":"toggleMenu",mouseleave:"hideMenu","click a":"linkClicked"},templateHelpers:{hoverToolbarActions:[{name:"edit",icon:"w-icon-edit",title:_W.tl("Edit Editor")},{name:"delete",icon:"w-icon-delete",title:_W.tl("Delete Editor")}],invite:function(){return"http://"+configSiteName+"/editor/contributors.php?user="+userID+"&pc="+this.invitation_id}},toggleMenu:function(e){e.stopPropagation(),this.ui.menu.toggle()},hideMenu:function(){this.ui.menu.hide()},editContributor:function(){i.vent.trigger("settings:contributor:edit",this.model)},deleteContributor:function(e){confirm("Are you sure?")&&(e.stopPropagation(),this.model.destroy())},linkClicked:function(e){e.stopPropagation()}});return s}),_wAMD.define("tpl!editor/settings/contributor/list/empty",[],function(){return'<td colspan="4">\n	{{#searchText}}\n		{{#tl}}No editors found.{{/tl}}\n	{{/searchText}}\n	{{^searchText}}\n		{{#tl}}You currently don\'t have any editors.{{/tl}}\n	{{/searchText}}\n</td>'}),_wAMD.define("editor/settings/contributor/list/ContributorEmptyListView",["backbone-all","mustache","tpl!editor/settings/contributor/list/empty"],function(e,t,i){var n=e.Marionette.CompositeView.extend({template:t.compile(i),tagName:"tr",templateHelpers:function(){var e=this;return{searchText:function(){return e.options.searchText}}},initialize:function(e){this.options=e}});return n}),_wAMD.define("tpl!editor/settings/contributor/list/list",[],function(){return'<table class="entity-list">\n	<thead>\n		<tr>\n			<th>{{#tl}}Email{{/tl}}</th>\n			<th>{{#tl}}Role{{/tl}}</th>\n			<th>{{#tl}}Last Login{{/tl}}</th>\n			<th class="options"></th>\n		</tr>\n	</thead>\n	<tbody>{{! list container }}</tbody>\n</table>'}),_wAMD.define("editor/settings/contributor/list/ContributorListTableView",["backbone-all","mustache","./ContributorListItemView","./ContributorEmptyListView","commerce/editor/store/general/list/ListLoadingView","tpl!editor/settings/contributor/list/list"],function(e,t,i,n,o,s){var r=e.Marionette.CompositeView.extend({template:t.compile(s),itemView:i,itemViewContainer:"tbody",emptyView:o,initialize:function(e){var t=this;t.searchText=e.searchText;var i=t.collection.fetch();i.done(function(e){t.emptyView=n,e.total||t.render()}),i.fail(function(e){console.log(e)})},itemViewOptions:function(){return{searchText:this.searchText,colspan:5}}});return r}),_wAMD.define("tpl!editor/settings/contributor/list/layout",[],function(){return'<div class="title-bar">\n	<div class="buttons">\n		<button class="add btn-com btn-info btn-large btn-icon-left">\n			<span class="w-icon-plus"></span>\n			{{#tl}}Add Editor{{/tl}}\n		</button>\n	</div>\n\n	<h1>{{#tl}}Editors{{/tl}}</h1>\n</div>\n\n<div class="list"></div>'}),_wAMD.define("editor/settings/contributor/list/ContributorListView",["backbone-all","mustache","editor/app","editor/settings/model/Contributor","editor/settings/collection/Contributor","./ContributorListTableView","tpl!editor/settings/contributor/list/layout"],function(e,t,i,n,o,s,r){var a=e.Marionette.Layout.extend({template:t.compile(r),ui:{search:"input[name=search]",add:".add"},regions:{listRegion:".list",paginationRegion:".pagination"},events:{"click @ui.add":"add","keyup @ui.search":"search"},initialize:function(){this.listenTo(n.vent,"create",this.close)},onRender:function(){var e=new o([],{searchText:this.searchText});this.listRegion.show(new s({collection:e}))},add:function(){i.vent.trigger("settings:contributor:add")},search:function(){var e=this,t=event.which||event.keyCode,i=13==t?0:250;clearTimeout(e.searchTimeout),e.searchTimeout=setTimeout(function(){e.searchText=e.ui.search.val()||null,e.onRender()},i)}});return a}),_wAMD.define("tpl!editor/settings/contributor/detail/layout",[],function(){return'<div class="title-bar">\n	<button class="back btn-com btn-back">{{#tl}}Back{{/tl}}</button>\n\n	<h1>\n		{{#isNew}}{{#tl}}Add Editor{{/tl}}{{/isNew}}\n		{{^isNew}}{{#tl}}Edit Editor{{/tl}}{{/isNew}}\n	</h1>\n</div>\n\n<div class="generic-errors"></div>\n\n<div class="row section">\n	<label class="label" for="settings_editor_email">{{#tl}}Email{{/tl}}</label>\n	{{#isNew}}\n		<span class="note">{{#tl}}(separate multiple emails with commas){{/tl}}</span><br>\n		<input id="settings_editor_email" type="text" name="email" value="{{email}}">\n	{{/isNew}}\n	{{^isNew}}\n		<div>{{email}}</div>\n	{{/isNew}}\n</div>\n\n{{#isNew}}\n	<div class="row section">\n		<label class="label" for="settings_editor_invitation_message">{{#tl}}Include a message with the email invitation{{/tl}}</label><br>\n		<textarea id="settings_editor_invitation_message" name="message">{{message}}</textarea>\n	</div>\n{{/isNew}}\n\n<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}Permissions{{/tl}}</h2>\n	<h3>{{#tl}}Control what this user can edit{{/tl}}</h3>\n</div>\n\n<form class="roles"> {{! wRadio requires a form }}\n\n	<table cellspacing="0">\n		<tr>\n			<td>\n				<label class="box first">\n					<div class="select">\n						<input type="radio" name="role" value="admin" data-required-feature="allow_admin_contributors"{{#is.admin}} checked{{/is.admin}}>\n					</div>\n					<div class="description">\n						<div class="title">\n							{{#tl}}Admin{{/tl}}\n						</div>\n						{{#tl}}View and edit all pages and settings{{/tl}}\n					</div>\n				</label>\n			</td>\n\n			<td>\n				<label class="box">\n					<div class="select">\n						<input type="radio" name="role" value="author" data-required-feature="allow_author_contributors"{{#is.author}} checked{{/is.author}}>\n					</div>\n					<div class="description">\n						<div class="title">\n							{{#tl}}Author{{/tl}}\n							<span class="plan">{{#tl}}pro{{/tl}}</span>\n						</div>\n						{{#tl}}View and edit selected pages and settings{{/tl}}\n					</div>\n				</label>\n			</td>\n\n			<td>\n				<label class="box">\n					<div class="select">\n						<input type="radio" name="role" value="dashboard" data-required-feature="allow_dashboard_contributors"{{#is.dashboard}} checked{{/is.dashboard}}>\n					</div>\n					<div class="description">\n						<div class="title">\n							{{#tl}}Dashboard Only{{/tl}}\n							<span class="plan">{{#tl}}pro{{/tl}}</span>\n						</div>\n						{{#tl}}View and manage stats, forms, and comments{{/tl}}\n					</div>\n				</label>\n			</td>\n		</tr>\n	</table>\n\n</form>\n\n{{#can.restrictPages}}\n	<div>\n		<label>\n			<input type="checkbox" name="restrict_pages"{{#restrict_pages}} checked{{/restrict_pages}}>\n			{{#tl}}Restrict editor\'s access to specific pages{{/tl}}\n		</label>\n	</div>\n\n	{{#restrict_pages}}\n		<div class="allowed-pages">\n			<label class="label">{{#tl}}Pages this Person Can Edit{{/tl}}</label>\n			<div class="allowed-pages-chooser">\n				<div class="search">\n					<span class="input-labeled input-search">\n						<input type="text" name="page_filter" placeholder="Type a page name">\n					</span>\n				</div>\n\n				<div class="list">\n					<ul>\n						{{#pages}}\n							<li\n								{{#hasAccess}}class="selected"{{/hasAccess}}\n								data-title="{{#esc_attr}}{{title}}{{/esc_attr}}"\n							>\n								<label>\n									{{^isCommerce}}\n										<input\n											type="checkbox"\n											data-page-id="{{page_id}}"\n											{{#hasAccess}}checked{{/hasAccess}}\n										>\n									{{/isCommerce}}\n\n									{{#isCommerce}}\n										<span class="w-icon-no-edit no-edit help" data-content="Authors can not edit store pages."></span>\n									{{/isCommerce}}\n\n\n									{{{spacer}}}{{title}}\n								</label>\n							</li>\n						{{/pages}}\n					</ul>\n				</div>\n			</div>\n		</div>\n	{{/restrict_pages}}\n{{/can.restrictPages}}\n\n{{#can.restrictPublish}}\n	<label>\n		<input type="checkbox" name="allow_publish"{{#allow_publish}} checked{{/allow_publish}}>\n		{{#tl}}Allow user to publish changes to live site{{/tl}}\n	</label>\n{{/can.restrictPublish}}\n\n{{#can.setDashboardAccess}}\n	<div class="dashboard-access">\n		<label class="label">{{#tl}}Dashboard Access{{/tl}}</label>\n		<ul>\n			<li>\n				<label>\n					<input type="checkbox" name="allow_stats" {{#allow_stats}} checked{{/allow_stats}}>\n					{{#tl}}Allow user to view site stats{{/tl}}\n				</label>\n			</li>\n\n			<li>\n				<label>\n					<input type="checkbox" name="allow_form_entries"{{#allow_form_entries}} checked{{/allow_form_entries}}>\n					{{#tl}}Allow user to manage form entries{{/tl}}\n				</label>\n			</li>\n\n			<li>\n				<label>\n					<input type="checkbox" name="allow_blog_comments"{{#allow_blog_comments}} checked{{/allow_blog_comments}}>\n					{{#tl}}Allow user to manage blog comments (this only applies to the default commenting system){{/tl}}\n				</label>\n			</li>\n		</ul>\n	</div>\n{{/can.setDashboardAccess}}\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	{{^isNew}}\n		<button class="delete btn-com btn-danger">\n			{{#tl}}Delete Editor{{/tl}}\n		</button>\n	{{/isNew}}\n\n	<div class="main-actions">\n		<button class="cancel btn-com">{{#tl}}Cancel{{/tl}}</button>\n		<button class="save btn-com btn-success">{{#tl}}Save Editor{{/tl}}</button>\n	</div>\n</div>\n'}),_wAMD.define("editor/settings/contributor/detail/ContributorDetailView",["underscore","jquery","backbone-all","mustache","editor/app","editor/settings/model/Contributor","tpl!editor/settings/contributor/detail/layout"],function(e,t,i,n,o,s,r){var a=i.Marionette.ItemView.extend({template:n.compile(r),className:"scaffold-com",ui:{checkboxes:"input[type=checkbox]",email:"input[name=email]",message:"textarea[name=message]",roles:"input[name=role]",pageFilter:"input[name=page_filter]",allowedPagesContainers:".allowed-pages li",allowedPages:".allowed-pages .list input[type=checkbox]",restrictPages:"input[name=restrict_pages]",allowPublish:"input[name=allow_publish]",dashboardPermissions:".dashboard-access input",genericErrors:".generic-errors",save:".save","delete":".delete",cancel:".cancel",back:".back"},modelEvents:{"change:role":"render","change:restrict_pages":"render"},events:{"change @ui.email":"change","change @ui.message":"change","change @ui.roles":"change","keyup @ui.pageFilter":"filterPages","change @ui.allowedPages":"toggleAllowedPage","change @ui.restrictPages":"change","change @ui.allowPublish":"change","change @ui.dashboardPermissions":"change","click @ui.save":"save","click @ui.delete":"delete","click @ui.cancel":"back","click @ui.back":"back"},templateHelpers:function(){var t=this;return{isNew:function(){return t.model.isNew()},is:{admin:function(){return"admin"==this.role},author:function(){return"author"==this.role},dashboard:function(){return"dashboard"==this.role}},can:{restrictPages:function(){return"author"==this.role},restrictPublish:function(){return"author"==this.role},setDashboardAccess:function(){return"dashboard"==this.role}},pages:function(){function t(o,s){for(var r,a=0;a<o.length&&(r=o[a],"member-login"!=r.kind&&"member-logout"!=r.kind);a++)n.push({title:r.title,page_id:r.id,isCommerce:"store"==r.kind,hasAccess:-1!=e.indexOf(i.allowed_pages,r.id),spacer:str_repeat("&mdash;",s)}),t(r.children,s+1)}var i=this,n=[];return t(Weebly.PageManager.topLevelPages,0),n}}},initialize:function(){this.model||(this.model=new s)},onRender:function(){this.ui.roles.wRadio(),this.ui.checkboxes.wCheckbox(),this.ui.save.wLoadButton(),this.$el.find(".help").popover({trigger:"hover",placement:"top",container:"body"})},change:function(e){var i,n=t(e.target),s=n.attr("name"),r=n.is(":checkbox")?n.prop("checked"):n.val();switch(s){case"role":switch(r){case"admin":i="allow_admin_contributors";break;case"author":i="allow_author_contributors";break;case"dashboard":i="allow_dashboard_contributors"}if(i&&!Weebly.Restrictions.hasAccess(i))return n.wRadio("uncheck"),o.vent.trigger("billing:upgrade:window",{restrictionID:i,restrictionType:"feature",refer:"displaySiteSettings"}),void 0}this.model.set(s,r)},filterPages:function(e){var i=this;e.which||e.keyCode,clearTimeout(i.pageFilterTimeout),i.pageFilterTimeout=setTimeout(function(){var e=i.ui.pageFilter.val().toLowerCase();e?i.ui.allowedPagesContainers.each(function(i,n){var o=t(n),s=o.data("title").toLowerCase(),r=!!s.match(e);o.toggle(r)}):i.ui.allowedPagesContainers.show()})},toggleAllowedPage:function(e){var i=this.ui.allowedPages.filter(":checked").map(function(){return t(this).data("page-id")}).toArray();t(e.target).closest("li").toggleClass("selected"),this.model.set("allowed_pages",i)},clearErrors:function(){this.$(".form-error").remove(),this.$("input.error").removeClass("error")},displayErrors:function(i){var o=this;e.each(i,function(e,i){var s=t('<div class="form-error">'),r=n.render("<ul>{{#errors}}<li>{{.}}</li>{{/errors}}</ul>",{errors:e});switch(s.html(r),i){case"role":o.ui.genericErrors.append(s);break;default:o.$("[name="+i+"]").addClass("error").before(s)}})},"delete":function(){confirm("Are you sure?")&&(this.model.destroy(),this.back())},back:function(){o.settings.vent.trigger("settings:contributor:list")},save:function(){var e,t=this;t.clearErrors(),"admin"==t.model.get("role")&&t.model.set("restrict_pages",!1),t.model.isNew()?(e=s.createMultiple(t.model),e.done(function(){t.back()}),e.fail(function(e){t.displayErrors(e)})):e=t.model.save().done(function(e){e.success?t.back():t.displayErrors(e.errors)}),t.ui.save.wLoadButton("startWait"),e.always(function(){t.ui.save.wLoadButton("endWait")})}});return a}),_wAMD.define("editor/settings/contributor/ContributorSettingsView",["editor/app","components/views/ListDetailView","./list/ContributorListView","./detail/ContributorDetailView"],function(e,t,i,n){var o=t.prototype,s=t.extend({listDetailOptions:{ListView:i,DetailView:n,eventModelName:"contributor"},initialize:function(){var t=this;o.initialize.apply(t,arguments),t.listenTo(e.settings.vent,{"settings:contributor:list":t.list,"settings:contributor:edit":t.edit,"settings:contributor:add":t.add})}});return s}),_wAMD.define("tpl!membership/editor/settings/member/list/item",[],function(){return'<td class="email">{{email}}</td>\n\n<td class="name">{{name}}</td>\n\n<td class="group">{{groupDescriptor}}</td>\n\n<td class="last-login">{{{last_login}}}</td>\n\n<td class="options">\n	{{#approved}}\n		<span class="menu w-icon-cog">{{>ui/hover-toolbar}}</span>\n	{{/approved}}\n	{{^approved}}\n		<div class="approval-options">\n			<a class="approval-option left btn-com btn-icon" data-approved="false" href="">\n				<span class="w-icon-delete"></span>\n			</a>\n			<a class="approval-option right btn-com btn-icon" data-approved="true" href="">\n				<span class="w-icon-check-mark"></span>\n			</a>\n		</div>\n	{{/approved}}\n</td>\n\n\n'}),_wAMD.define("membership/editor/settings/member/list/MemberListItemView",["jquery","backbone-all","mustache","editor/app","moment","tpl!membership/editor/settings/member/list/item","tpl!ui/hover-toolbar"],function(e,t,i,n,o,s,r){i.compilePartial("ui/hover-toolbar",r);var a=t.Marionette.ItemView.extend({template:i.compile(s),className:"selectable",tagName:"tr",ui:{menu:".hover-toolbar"},events:{"click td":"editMember","click .edit":"editMember","click .delete":"deleteMember","click .menu":"toggleMenu",mouseleave:"hideMenu","click .invite-link":"showInviteLink","click .approval-option":"updateApproval"},modelEvents:{change:"render"},templateHelpers:function(){var e=this;return{hoverToolbarActions:function(){var e=[];return e.push({name:"edit",icon:"w-icon-edit",title:_W.tl("Edit Member")}),e.push({name:"delete",icon:"w-icon-delete",title:_W.tl("Delete Member")}),e},last_login:function(){if(e.model.get("approved")){if(e.model.get("password_set"))return"Approved";var t=e.model.get("last_login"),i=_W.tl("Invited")+" &mdash; "+'<a href="#" class="invite-link">'+_W.tl("Invite Link")+"</a>";return t?o.unix(t).format("MMM D, YYYY"):i}return"Registered"}}},editMember:function(e){e&&e.stopPropagation(),n.vent.trigger("settings:membership:member:edit",this.model)},deleteMember:function(e){var t=this;e&&e.stopPropagation(),n.vent.trigger("settings:membership:confirm",{message:_W.tl("Are you sure you'd like to delete member %s?").replace("%s",t.model.get("email")),callback:function(e){e&&(t.model.destroy(),n.vent.trigger("settings:membership:member:delete"))}})},updateApproval:function(t){t.preventDefault(),t.stopPropagation();var i=this;e(t.currentTarget).data("approved")?_W.Membership.RPC.Member.approveMember(i.model.get("site_member_id")).done(function(){i.model.set("approved",!0),i.render()}):n.vent.trigger("settings:membership:confirm",{message:_W.tl("Are you sure you'd like to deny member %s?").replace("%s",i.model.get("email")),callback:function(e){e&&(i.model.destroy(),n.vent.trigger("settings:membership:member:delete"))}})},toggleMenu:function(e){e.stopPropagation(),this.ui.menu.toggle()},hideMenu:function(){this.ui.menu.hide()},showInviteLink:function(e){var t=this;e&&(e.preventDefault(),e.stopPropagation()),n.vent.trigger("settings:membership:member:inviteLink",{model:t.model,show_publish_modal:!1})}});return a}),_wAMD.define("tpl!membership/editor/settings/member/list/empty",[],function(){return'<td colspan="5">\n	{{#searchText}}\n		{{#tl}}No members found.{{/tl}}\n	{{/searchText}}\n	{{^searchText}}\n		{{#tl}}You currently don\'t have any members.{{/tl}}\n	{{/searchText}}\n</td>\n'}),_wAMD.define("membership/editor/settings/member/list/MemberListEmptyView",["backbone-all","mustache","editor/app","tpl!membership/editor/settings/member/list/empty"],function(e,t,i,n){var o=e.Marionette.CompositeView.extend({className:"member-list-empty",template:t.compile(n),tagName:"tr",templateHelpers:function(){var e=this;return{searchText:function(){return e.options.searchText}}},initialize:function(e){this.options=e}});return o}),_wAMD.define("tpl!membership/editor/settings/member/list/list",[],function(){return'<table class="entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th class="email">{{#tl}}Email{{/tl}}</th>\n			<th class="name">{{#tl}}Name{{/tl}}</th>\n			<th class="group">{{#tl}}Group{{/tl}}</th>\n			<th class="last-login">{{#tl}}Last&nbsp;Action{{/tl}}</th>\n			<th class="options"></th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>'}),_wAMD.define("membership/editor/settings/member/list/MemberListTableView",["jquery","backbone-all","mustache","membership/editor/collection/Group","commerce/editor/store/general/list/ListLoadingView","membership/editor/settings/member/list/MemberListItemView","membership/editor/settings/member/list/MemberListEmptyView","tpl!membership/editor/settings/member/list/list"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CompositeView.extend({className:"membership-members-list",template:i.compile(a),itemView:s,itemViewContainer:"tbody",emptyView:o.extend({colspan:5}),initialize:function(t){var i=this;i.searchText=t.searchText;var o=new n;e.when(o.fetch(),i.collection.fetch(t)).done(function(){i.emptyView=r,_.each(i.collection.models,function(e){var t="",i=e.get("group_ids").length;if(i>1)t=_W.tl("%i groups").replace("%i",i);else if(1==i){var n=o.findWhere({site_group_id:e.get("group_ids")[0]});t=n.get("name")}e.set("groupDescriptor",t)}),i.collection.total||i.render()})},itemViewOptions:function(){return{searchText:this.searchText}}});return l}),_wAMD.define("tpl!membership/editor/settings/add_members",[],function(){return'<div class="getting-started-wrap">\n	<i class="icon w-icon-person-li"></i>\n	<p class="title">{{#tl}}You don\'t have any members yet{{/tl}}</p>\n</div>'}),_wAMD.define("membership/editor/settings/AddMembersView",["backbone-all","mustache","editor/app","commerce/editor/store/BusinessWarningView","tpl!membership/editor/settings/add_members"],function(e,t,i,n,o){var s=e.Marionette.ItemView.extend({template:t.compile(o),ui:{addMember:".add-member"},events:{"click @ui.addMember":"addMember"},addMember:function(e){e.preventDefault(),e.stopPropagation(),Weebly.Restrictions.hasAccess("membership_settings")?i.vent.trigger("settings:membership:member:add"):i.vent.trigger("billing:upgrade:window",{restrictionID:"membership_settings",restrictionType:"feature",refer:"membershipGettingStarted"})}});return s}),_wAMD.define("tpl!membership/editor/settings/member/list/layout",[],function(){return'<div class="sub-title-bar membership-sub-title">\n	<button class="btn-com btn-icon-left add-member">\n		<span class="w-icon-plus"></span>\n		{{#tl}}Add Member{{/tl}}\n	</button>\n	<h2>{{#tl}}Members{{/tl}}</h2>\n	<span class="w-icon-question" data-placement="right" data-content="{{#esc_attr}}{{#tl}}Members are people who have permission to view private pages.{{/tl}}{{/esc_attr}}"></span>\n</div>\n\n<div class="add-members-region">\n</div>\n\n<div class="list-search-box">\n	<span class="input-labeled input-search">\n		<input type="text" name="searchText" class="search" placeholder="{{#esc_attr}}{{#tl}}Search{{/tl}}{{/esc_attr}}">\n	</span>\n</div>\n<div class="member-filter-options" style="display:none">\n	<a class="filter-option active" data-approved="all">\n		{{#tl}}All{{/tl}}\n	</a>|\n	<a class="filter-option" data-approved="true">\n		{{#tl}}Approved{{/tl}}\n	</a>|\n	<a class="filter-option" data-approved="false">\n		{{#tl}}Pending{{/tl}}\n	</a>\n</div>\n\n<div class="list"></div>\n<div class="pagination"></div>\n'}),_wAMD.define("membership/editor/settings/member/list/MemberListView",["jquery","underscore","backbone-all","mustache","editor/app","membership/editor/collection/Member","./MemberListTableView","commerce/editor/store/general/pagination/PaginationView","membership/editor/settings/AddMembersView","components/views/LoadingView","tpl!membership/editor/settings/member/list/layout"],function(e,t,i,n,o,s,r,a,l,c,u){var d=i.Marionette.Layout.extend({template:n.compile(u),ui:{addMemberBtn:".add-member",search:"input[name=searchText]",searchBox:".list-search-box",filterOptions:".member-filter-options"},regions:{listRegion:".list",paginationRegion:".pagination",addMembersRegion:".add-members-region"},events:{"keyup @ui.search":"search","click .filter-option":"filterByApproved","click @ui.addMemberBtn":"addMember"},templateHelpers:function(){var e=this;return{hasMembers:e.collection&&e.collection.length>0}},initialize:function(){var e=this;e.collection=new s,o.vent.on({"settings:membership:member:delete":function(){0==e.collection.length&&(e.collection.state.currentPage>1&&(e.collection.state.currentPage=e.collection.state.currentPage-1),e.render())}})},addMember:function(e){e&&e.stopPropagation();var t=this,i=parseInt(Weebly.Restrictions.accessValue("membership_member_limit"));!Weebly.Restrictions.hasAccess("membership_settings")||t.memberCount>=i&&!Weebly.Restrictions.isUnlimited("membership_member_limit")?o.vent.trigger("billing:upgrade:window",{restrictionID:"membership_settings",restrictionType:"feature",refer:"membershipGeneralView"}):o.vent.trigger("settings:membership:member:add")},onRender:function(){var e=this;e.filtering=!1,e.paginationRegion.show(new c),e.addMembersRegion.show(new c),e.listRegion.show(new c),e.collection.fetch().done(function(){e.collection.length>0?(e.ui.searchBox.show(),e.ui.filterOptions.show(),e.addMembersRegion.close(),e.renderLists()):(e.ui.searchBox.hide(),e.ui.filterOptions.hide(),e.listRegion.close(),e.addMembersRegion.show(new l))}),e.collection.on("remove sync",function(){Weebly.memberCount=e.collection.state.totalRecords,o.vent.trigger("settings:membership:memberCount:change")}),o.vent.on({"settings:membership:member:delete":function(){0==e.collection.length&&(e.listRegion.close(),e.ui.searchBox.hide(),e.ui.filterOptions.hide(),e.addMembersRegion.show(new l))}})},filterByApproved:function(i){var n=this,o=e(i.currentTarget),s=o.data("approved");if(n.$el.find(".active").removeClass("active"),o.addClass("active"),"all"==s)n.filtering=!1,n.filterCollection("");else{n.filtering=!0;var r=t.findWhere(n.collection.fetchOptions.filter,{property:"approved"});r?r.value=s:r={property:"approved",value:s},n.collection.fetchOptions.filter.push(r),n.collection.fetch().done(function(){n.renderLists(n.collection)})}},filterCollection:function(e){var t=this;t.collection=new s([],{searchText:e}),t.renderLists(t.collection,e)},renderLists:function(e,t){var i=this,t=t||null;i.collection.length>5?i.paginationRegion.show(new a({collection:i.collection})):i.paginationRegion.close(),i.collection.length>0&&(i.ui.searchBox.show(),i.ui.filterOptions.show()),i.listRegion.show(new r({collection:i.collection,searchText:t}))},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.filterCollection(t.ui.search.val())},n)}});return d}),_wAMD.define("tpl!membership/editor/settings/group/list/item",[],function(){return'<td class="name">{{name}}</td>\n\n<td class="members">{{memberCount}}</td>\n\n<td class="options">\n	<span class="menu w-icon-cog">{{>ui/hover-toolbar}}</span>\n</td>\n'}),_wAMD.define("membership/editor/settings/group/list/GroupListItemView",["jquery","backbone-all","mustache","editor/app","tpl!membership/editor/settings/group/list/item","tpl!ui/hover-toolbar"],function(e,t,i,n,o,s){i.compilePartial("ui/hover-toolbar",s);var r=t.Marionette.ItemView.extend({template:i.compile(o),className:"selectable",tagName:"tr",ui:{menu:".hover-toolbar"},modelEvents:{change:"render"},events:{"click td":"editGroup","click .edit":"editGroup","click .delete":"deleteGroup","click .menu":"toggleMenu",mouseleave:"hideMenu"},templateHelpers:function(){var e=this;return{hoverToolbarActions:function(){var e=[];return e.push({name:"edit",icon:"w-icon-edit",title:_W.tl("Edit Group")}),e.push({name:"delete",icon:"w-icon-delete",title:_W.tl("Delete Group")}),e},memberCount:e.model.get("member_ids").length}},editGroup:function(e){e&&e.stopPropagation(),n.vent.trigger("settings:membership:group:edit",this.model)},deleteGroup:function(e){var t=this;e&&e.stopPropagation(),n.vent.trigger("settings:membership:confirm",{message:_W.tl("Are you sure you'd like to delete group %s?").replace("%s",t.model.get("name").replace(/[<>]/g,"")),callback:function(e){e&&(t.model.destroy(),n.vent.trigger("settings:membership:group:delete"))}})},toggleMenu:function(e){e.stopPropagation(),this.ui.menu.toggle()},hideMenu:function(){this.ui.menu.hide()}});return r}),_wAMD.define("tpl!membership/editor/settings/group/list/empty",[],function(){return'<td colspan="3">\n	{{#tl}}You currently don\'t have any groups.{{/tl}}\n</td>\n'}),_wAMD.define("membership/editor/settings/group/list/GroupListEmptyView",["backbone-all","mustache","editor/app","tpl!membership/editor/settings/group/list/empty"],function(e,t,i,n){var o=e.Marionette.CompositeView.extend({className:"group-list-empty",template:t.compile(n),tagName:"tr",initialize:function(e){this.options=e}});return o}),_wAMD.define("tpl!membership/editor/settings/group/list/list",[],function(){return'<table class="entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th class="name">{{#tl}}Name{{/tl}}</th>\n			<th class="members">{{#tl}}Members{{/tl}}</th>\n			<th class="options"></th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>'}),_wAMD.define("membership/editor/settings/group/list/GroupListTableView",["backbone-all","mustache","commerce/editor/store/general/list/ListLoadingView","membership/editor/settings/group/list/GroupListItemView","membership/editor/settings/group/list/GroupListEmptyView","tpl!membership/editor/settings/group/list/list"],function(e,t,i,n,o,s){var r=e.Marionette.CompositeView.extend({className:"membership-group-list",template:t.compile(s),itemView:n,itemViewContainer:"tbody",emptyView:i.extend({colspan:3}),initialize:function(e){var t=this;t.collection.fetch(e).done(function(e){t.emptyView=o,e.total||t.render()})}});return r}),_wAMD.define("tpl!membership/editor/settings/add_groups",[],function(){return'<div class="getting-started-wrap">\n	<i class="icon w-icon-group-empty"></i>\n	<p class="title">{{#tl}}You don\'t have any groups yet{{/tl}}</p>\n</div>'}),_wAMD.define("membership/editor/settings/AddGroupsView",["backbone-all","mustache","editor/app","tpl!membership/editor/settings/add_groups"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),ui:{addGroup:".add-group"},events:{"click @ui.addGroup":"addGroup"},addGroup:function(e){e.preventDefault(),e.stopPropagation(),i.vent.trigger("settings:membership:group:add")}});return o}),_wAMD.define("tpl!membership/editor/settings/group/list/layout",[],function(){return'<div class="sub-title-bar membership-sub-title">\n	<button class="btn-com btn-icon-left add-group">\n		<span class="w-icon-plus"></span>\n		{{#tl}}Add Group{{/tl}}\n	</button>\n	<h2>{{#tl}}Groups{{/tl}}</h2>\n	<span class="w-icon-question" data-placement="right" data-content="{{#esc_attr}}{{#tl}}Create groups to help manage site members. Set page access and other group preferences that will automatically apply to all the individual members you added to the group.{{/tl}}{{/esc_attr}}"></span>\n</div>\n\n<div class="add-groups-region">\n	<div class="list-search-box">\n		<span class="input-labeled input-search">\n			<input type="text" name="searchText" class="search" placeholder="{{#esc_attr}}{{#tl}}Search{{/tl}}{{/esc_attr}}">\n		</span>\n	</div>\n</div>\n\n<div class="list"></div>\n<div class="pagination"></div>'}),_wAMD.define("membership/editor/settings/group/list/GroupListView",["backbone-all","mustache","editor/app","membership/editor/collection/Group","./GroupListTableView","commerce/editor/store/general/pagination/PaginationView","membership/editor/settings/AddGroupsView","components/views/LoadingView","tpl!membership/editor/settings/group/list/layout"],function(e,t,i,n,o,s,r,a,l){var c=e.Marionette.Layout.extend({template:t.compile(l),ui:{search:"input[name=searchText]"},regions:{listRegion:".list",paginationRegion:".pagination",addGroupsRegion:".add-groups-region"},events:{"keyup @ui.search":"search"},initialize:function(){var e=this;e.paginationRegion.show(new a),e.addGroupsRegion.show(new a),e.listRegion.show(new a),e.collection=new n,i.vent.on({"settings:membership:group:delete":function(){0==e.collection.length&&e.render()}})},onRender:function(){var e=this;e.collection.fetch().done(function(){e.collection.length>0?(e.addGroupsRegion.close(),e.renderLists(e.collection)):(e.listRegion.close(),e.addGroupsRegion.show(new r))}),e.collection.on("remove sync",function(){Weebly.groupCount=e.collection.state.totalRecords,i.vent.trigger("settings:membership:groupCount:change")})
},filterCollection:function(e){var t=new n([],{searchText:e});this.renderLists(t,e)},renderLists:function(e,t){var t=t||null;e.length>5?this.paginationRegion.show(new s({collection:e})):this.paginationRegion.close(),this.listRegion.show(new o({collection:e,searchText:t}))},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.filterCollection(t.ui.search.val())},n)}});return c}),_wAMD.define("tpl!membership/editor/settings/options",[],function(){return'<div class="sub-title-bar membership-sub-title">\n	<h2>{{#tl}}Login{{/tl}} | {{#tl}}Register{{/tl}}</h2>\n</div>\n<div class="registration-options">\n	<p> \n		<input id="show_navbar_link"\n			   type="checkbox"\n			   {{#membership_show_navbar}} checked="checked" {{/membership_show_navbar}}\n		/> \n		{{#tl}}Show "Log In{{/tl}}{{#membership_allow_registration}} | {{#tl}}Register{{/tl}}{{/membership_allow_registration}}{{#tl}}" in site menu{{/tl}}\n	</p>\n	<p> \n		<input id="allow_registration"\n			   type="checkbox"\n			   {{#membership_allow_registration}} checked="checked" {{/membership_allow_registration}}\n			   {{^can_enable_registration}}disabled{{/can_enable_registration}}\n		/> \n		{{#tl}}Allow people to register with your site{{/tl}}\n	</p>\n\n	{{#membership_allow_registration}}\n		<p>\n			<input id="approval_required" type="checkbox" {{#membership_approval_required}} checked="checked" {{/membership_approval_required}}/> \n			{{#tl}}Require approval{{/tl}}\n		</p>\n		<p class="default-group">\n			{{#tl}}Default Group for New Members{{/tl}}<br>\n			<select id="default_group">\n				{{#groups}}\n					<option value="{{site_group_id}}" {{#selected}} selected="selected" {{/selected}}>{{name}}</option>\n				{{/groups}}\n			</select>\n		</p>\n	{{/membership_allow_registration}}\n</div>'}),_wAMD.define("membership/editor/settings/MembershipSiteOptionsView",["jquery","backbone-all","mustache","editor/app","util/ui/wInput","tpl!membership/editor/settings/options"],function(e,t,i,n,o,s){var r=t.Marionette.Layout.extend({template:i.compile(s),ui:{allowRegistration:"#allow_registration",approvalRequired:"#approval_required",default_group:"#default_group",showNavbar:"#show_navbar_link"},events:{"change @ui.allowRegistration":"handleRegistrationChange","change @ui.approvalRequired":"handleApprovalChange","change @ui.default_group":"handleDefaultChange","change @ui.showNavbar":"handleNavbarChange"},templateHelpers:function(){var e=this,t=e.collection.map(function(t){return{site_group_id:t.get("site_group_id"),name:t.get("name"),selected:t.get("site_group_id")===e.model.get("membership_default_group_id")}});return t.unshift({site_group_id:"-1",name:"None",selected:"-1"==e.model.get("membership_default_group_id")}),{groups:t,membership_allow_registration:"0"==e.model.get("membership_allow_registration")?!1:!0,membership_approval_required:"0"==e.model.get("membership_approval_required")?!1:!0,can_enable_registration:Weebly.Restrictions.hasAccess("membership_member_registration"),membership_show_navbar:!parseInt(e.model.get("membership_hide_navbar_link"))}},initialize:function(){var e=this;e.listenTo(n.vent,{"settings:membership:group:delete":function(){e.render()},"plan:upgraded":function(){var t=e.ui.allowRegistration.siblings(".w-checkbox-container");t.data("popover")&&t.popover("destroy"),e.render()}})},onRender:function(){var e=this;e.ui.showNavbar.wCheckbox(),e.ui.allowRegistration.wCheckbox(),e.ui.approvalRequired.wCheckbox(),e.ui.default_group.wSelectbox({theme:"com"}),e.ui.allowRegistration.siblings(".w-checkbox-container.disabled").popover({trigger:"hover",container:"body",placement:"top",content:_W.tl("This feature is part of the business plan.")})},saveSettings:function(){var e=this;_W.Membership.RPC.Member.setMembershipSiteSettings(e.model.attributes)},handleRegistrationChange:function(t){var i=this;Weebly.Restrictions.hasBusiness()?(i.model.set("membership_allow_registration",t.target.checked?"1":"0"),Weebly.allowMemberRegistration=t.target.checked,n.vent.trigger("settings:membership:registration:change"),i.saveSettings(),i.render()):(e(t.currentTarget).prop("checked",!1),e(t.currentTarget).siblings(".checked").removeClass("checked"),n.vent.trigger("billing:upgrade:window",{restrictionID:"membership_member_registration",restrictionType:"feature",refer:"membershipGeneralView"}))},handleApprovalChange:function(e){var t=this;t.model.set("membership_approval_required",e.target.checked?"1":"0"),t.saveSettings()},handleNavbarChange:function(e){var t=this,i=e.target.checked?"0":"1";t.model.set("membership_hide_navbar_link",i),t.saveSettings(),Weebly.showMemberLoginLink=!parseInt(i,10),n.vent.trigger("settings:membership:registration:change")},handleDefaultChange:function(e){var t=this;t.model.set("membership_default_group_id",e.currentTarget.value),t.saveSettings()}});return r}),_wAMD.define("tpl!membership/editor/settings/layout",[],function(){return'<div class="title-bar">\n	<div class="buttons">\n		<button class="btn-com btn-icon-left import-members-button">\n			<span class="w-icon-upload"></span>\n			{{#tl}}Add From CSV{{/tl}}\n		</button>\n	</div>\n\n	<h1>{{#tl}}Members{{/tl}}</h1>\n</div>\n\n{{! General Site Wide Options Settings }}\n<div class="membership-site-options-region"></div>\n\n{{! Members list and search }}\n<div class="members-region"></div>\n\n{{! Groups list }}\n<div class="groups-region"></div>'}),_wAMD.define("membership/editor/settings/MembershipGeneralView",["backbone-all","mustache","editor/app","./member/list/MemberListView","./group/list/GroupListView","membership/editor/collection/Member","membership/editor/collection/Group","components/layouts/LayoutWithDialogs","commerce/editor/store/BusinessWarningView","membership/editor/settings/MembershipSiteOptionsView","components/views/LoadingView","tpl!membership/editor/settings/layout"],function(e,t,i,n,o,s,r,a,l,c,u,d){var h=e.Marionette.Layout.extend({className:"membership-general-view",template:t.compile(d),initialize:function(){var e=this;e.listenTo(i.vent,{"settings:membership:general:render":function(){e.render()}})},regions:{membersRegion:".members-region",groupsRegion:".groups-region",settingsRegion:".membership-site-options-region"},ui:{addMemberBtn:".add-member",importMembersBtn:".import-members-button"},events:{"click .add-group":"addGroup","click @ui.importMembersBtn":"importMembers"},onRender:function(){var t=this;a.prototype.onRender.call(this),this.settingsRegion.show(new u),this.membersRegion.show(new u),this.groupsRegion.show(new u),_W.Membership.RPC.Member.getMembershipSiteSettings().done(function(i){var n=new r([],{state:{pageSize:1e4}});n.fetch().done(function(){t.settingsRegion.show(new c({model:new e.Model(i),collection:n}))})}),s.count().then(function(e){t.memberCount=e,t.renderLists();var i=parseInt(Weebly.Restrictions.accessValue("membership_member_limit"));if(e>=i&&!Weebly.Restrictions.isUnlimited("membership_member_limit")){var n="";n=Weebly.Restrictions.hasAccess("membership_settings")?_W.tl("Business plan is required to have more than %i members").replace("%i",i):_W.tl("You must upgrade to Pro or Business to add members to your site.");var o={content:n,width:100,trigger:"hover",placement:"bottom"};t.ui.addMemberBtn.popover(o),t.ui.importMembersBtn.popover(o)}})},renderLists:function(){this.membersRegion.show(new n),this.groupsRegion.show(new o),this.$el.find(".w-icon-question").popover({trigger:"hover",width:100})},importMembers:function(e){e&&e.stopPropagation();var t=this,n=parseInt(Weebly.Restrictions.accessValue("membership_member_limit"));!Weebly.Restrictions.hasAccess("membership_settings")||t.memberCount>=n&&!Weebly.Restrictions.isUnlimited("membership_member_limit")?i.vent.trigger("billing:upgrade:window",{restrictionID:"membership_settings",restrictionType:"feature",refer:"membershipGeneralView"}):i.vent.trigger("settings:membership:import")},addGroup:function(e){e&&e.stopPropagation(),Weebly.Restrictions.hasAccess("membership_settings")?i.vent.trigger("settings:membership:group:add"):i.vent.trigger("billing:upgrade:window",{restrictionID:"membership_settings",restrictionType:"feature",refer:"membershipGeneralView"})}});return h}),_wAMD.define("tpl!membership/editor/settings/components/page-selector",[],function(){return'<ul class="page-list">\n</ul>'}),_wAMD.define("tpl!membership/editor/settings/components/page-selector-item",[],function(){return'<span class="page-name">{{#parentId}}&ndash;{{#grandparentId}}&ndash;{{/grandparentId}} {{/parentId}}{{{title}}}</span>\n<div class="page-type-control">\n	{{#membersOnly}}\n		{{#accessViaGroup}}\n			<input type="checkbox" data-id="{{page_id}}" class="page-allowed" disabled checked>\n		{{/accessViaGroup}}\n		{{^accessViaGroup}}\n			<input type="checkbox" data-id="{{page_id}}" class="page-allowed" {{#memberOrGroupAllowed}}checked{{/memberOrGroupAllowed}}>\n		{{/accessViaGroup}}\n	{{/membersOnly}}\n</div>\n'}),_wAMD.define("membership/editor/settings/components/page/PageSelectorItemView",["jquery","backbone-all","mustache","editor/app","tpl!membership/editor/settings/components/page-selector-item","util/ui/wInput"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({className:"page",tagName:"li",template:i.compile(o),events:{"click .page-allowed":"updateAllowed"},ui:{membershipCheckbox:".page-allowed",pageIcon:".page-icon",disabledCheckbox:".w-checkbox-container.checked.disabled"},updateAllowed:function(e){var t=this,i=t.model.get("page_id"),n=t.options.selector.pageIds.indexOf(i);e?t.options.selector.pageIds.push(i):t.options.selector.pageIds.splice(n,1)},initialize:function(e){var t=this;t.reverseModel=e.reverseModel,t.membership_required=t.model.get("membership_required")},onRender:function(){var e=this;e.ui.membershipCheckbox.wCheckbox().on("change",function(t){e.updateAllowed(t.target.checked)}),e.ui.pageIcon.popover({trigger:"hover",placement:"top"}),e.$el.find(".w-checkbox-container.checked.disabled").popover({trigger:"hover",placement:"top",content:_W.tl("Has access to this page through their groups."),container:"body"})},templateHelpers:function(){var e=this;return{shouldShowPage:function(){return e.options.shouldShowPage(e.model)},membersOnly:function(){return e.membership_required},memberOrGroupAllowed:function(){var t=e.options.selector.pageIds;return-1!==t.indexOf(this.page_id)},accessViaGroup:function(){var t=e.reverseModel.get("group_page_ids")||[];return-1!==t.indexOf(this.page_id)},parentId:function(){return e.model.get("parent_id")},grandparentId:function(){return e.model.get("grandparent_id")}}}});return s}),_wAMD.define("membership/editor/settings/components/page/PageSelectorView",["jquery","underscore","backbone-all","mustache","editor/app","components/views/LoadingView","tpl!membership/editor/settings/components/page-selector","membership/editor/collection/Page","./PageSelectorItemView"],function(e,t,i,n,o,s,r,a,l){var c=i.Marionette.CompositeView.extend({className:"page-selector",template:n.compile(r),ui:{allowedCheckboxes:".page-allowed"},itemView:l,itemViewContainer:".page-list",itemViewOptions:function(){var e=this;return{reverseModel:e.model,selector:e.options.selector}},emptyView:s,templateHelpers:function(){var e=this;return{pages:function(){return e.options.pages.toJSON()}}},initialize:function(){var e=this;e.allPageIds=e.getFlattenedPageIds(),e.collection=new a([],{comparator:function(i){return t.indexOf(e.allPageIds,i.get("page_id"))},mode:"client"}),e.collection.fetch().done(function(){e.emptyView=i.Marionette.ItemView.extend({template:n.compile(_W.tl('You don\'t have any members-only pages yet. Create one using the "Visibility" option in the "Pages" tab.')),tagName:"li"}),e.collection.setPageSize(e.collection.state.totalRecords),e.generateVisibilityMap(),e.collection.reset(e.collection.filter(function(t){return!!e.visibilityMap[t.get("page_id")]})),e.render()})},onRender:function(){var e=this;0==e.collection.length&&e.$el.find(".page-list").css("border-top","none")},getFlattenedPageIds:function(e){var i=this,n=e||Weebly.PageManager.topLevelPages,o=[];return t.each(n,function(e){if("member-login"!=e.kind&&"member-logout"!=e.kind&&(o.push(e.id),e.children.length)){var t=i.getFlattenedPageIds(e.children);o=o.concat(t)}}),o},generateVisibilityMap:function(){var e=this;e.visibilityMap={},e.collection.each(function(t){if(t.get("membership_required")){e.visibilityMap[t.get("page_id")]=!0;for(var i=t;i.get("parent_id");){var n=e.collection.findWhere({page_id:i.get("parent_id")});n?(e.visibilityMap[n.get("page_id")]=!0,i=n):i=null}}})}});return c}),_wAMD.define("tpl!membership/editor/settings/components/page-selector-dialog",[],function(){return'<div class="page-selector-region">\n</div>'}),_wAMD.define("membership/editor/settings/components/page/PageSelectorDialog",["backbone-all","mustache","editor/app","./PageSelectorView","tpl!membership/editor/settings/components/page-selector-dialog"],function(e,t,i,n,o){var s=e.Marionette.Layout.extend({template:t.compile(o),dialog:{title:_W.tl("Select Pages"),buttons:[{group:"pull-right",buttons:[{text:"Cancel",className:"btn btn-com btn-cancel"},{text:"Okay",className:"btn btn-com btn-success btn-submit"}]}],dialogClass:"select-pages-dialog scroll-overflow-dialog",cancelX:!1,size:"500x500"},triggers:{"click .btn-cancel":"dialog:close"},regions:{pageSelectorRegion:".page-selector-region"},events:{"click .btn-submit":"savePages"},initialize:function(){var e=this;e.selector={pageIds:[].concat(e.model.get("page_ids"))||[]}},onRender:function(){var e=this;e.pageSelectorRegion.show(new n({model:e.model,selector:e.selector}))},savePages:function(){var e=this;e.model.set("page_ids",e.selector.pageIds),e.trigger("dialog:close")}});return s}),_wAMD.define("tpl!membership/editor/settings/components/page/related/list/item",[],function(){return'<td class="title">\n	{{title}}\n</td>\n<td class="options">\n	<i class="w-icon-delete menu delete"></i>\n</td>'}),_wAMD.define("membership/editor/settings/components/page/related/list/PageRelatedItemView",["backbone-all","mustache","editor/app","tpl!membership/editor/settings/components/page/related/list/item"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),tagName:"tr",className:"page-related-item selectable",events:{"click .delete":"removePage"},removePage:function(e){e&&e.stopPropagation(),i.vent.trigger("settings:membership:page:removePageRelated",this.model)}});return o}),_wAMD.define("tpl!membership/editor/settings/components/page/related/list/list",[],function(){return'<table class="entity-list entity-list-headless entity-list-related page-related-list" cellspacing="0">\n	<tbody></tbody>\n</table>'}),_wAMD.define("membership/editor/settings/components/page/related/list/PageRelatedListView",["backbone-all","mustache","editor/app","membership/editor/collection/Page","./PageRelatedItemView","commerce/editor/store/general/list/ListLoadingView","tpl!membership/editor/settings/components/page/related/list/list"],function(e,t,i,n,o,s,r){var a=e.Marionette.CompositeView.extend({template:t.compile(r),itemView:o,itemViewContainer:"tbody",emptyView:s.extend({colspan:2}),initialize:function(){var t=this;t.collection=new n([],{mode:"client",state:{pageSize:999}}),t.model.get("pages").done(function(i){t.collection.reset(i.models);var n=_W.tl("Does not have access to any pages.");t.options.emptyText&&(n=t.options.emptyText),t.emptyView=e.Marionette.ItemView.extend({template:'<td colspan="2">'+n+"</td>",tagName:"tr"}),t.listenTo(i,"add",function(e){t.collection.add(e)}),t.listenTo(i,"remove",function(e){t.collection.remove(e)})})}});return a}),_wAMD.define("tpl!components/searchable-select/list/item",[],function(){return'{{#displayProperties}}\n	<td class="{{name}}">{{value}}</td>\n{{/displayProperties}}\n<td class="in-relation">\n	<input type="checkbox" class="in-related-input" data-related-id="{{relatedId}}" {{#inRelated}}checked{{/inRelated}}>\n</td>'}),_wAMD.define("components/searchable-select/list/SearchableSelectItemView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!components/searchable-select/list/item","util/ui/wInput"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),tagName:"tr",className:"selectable",ui:{inRelatedInput:".in-related-input"},events:{"click td":"onClick"},templateHelpers:function(){var e=this,i=e.options.selector.relationIdProp,n=e.model.get(i),o=e.options.selector.relatedIdsProp,s={inRelated:function(){return e.options.isRelatedModelMarkedToAdd(n)?!0:e.options.isRelatedModelMarkedToRemove(n)?!1:(e.options.selector.relationIdsProp,t.contains(e.options.relatedModel.get(o),n))},relationId:e.model.get(i),displayProperties:function(){for(var t=[],i=e.options.selector.displayProperties,n=0;n<i.length;n++)t.push({name:i[n],value:e.model.get(i[n])});return t}};return s},onRender:function(){var e=this,t=e.options.selector.relationIdProp;e.ui.inRelatedInput.wCheckbox().on("change",function(i){i.target.checked?o.vent.trigger(e.options.selector.addTrigger,e.model.get(t)):o.vent.trigger(e.options.selector.removeTrigger,e.model.get(t))})},onClick:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this;t.ui.inRelatedInput.wCheckbox("toggleCheck")}});return r}),_wAMD.define("tpl!components/searchable-select/list/empty",[],function(){return'<td colspan="{{colspan}}">{{emptyText}}</td>'}),_wAMD.define("components/searchable-select/list/SearchableSelectEmptyView",["backbone-all","mustache","tpl!components/searchable-select/list/empty"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),templateHelpers:function(){var e=this;return{colspan:e.options.selector.displayProperties.length+1,emptyText:e.options.selector.text.empty}},tagName:"tr"});return n}),_wAMD.define("tpl!components/searchable-select/list/list",[],function(){return'<table class="select-related-list entity-list">\n	<tbody></tbody>\n</table>'}),_wAMD.define("components/searchable-select/list/SearchableSelectListView",["jquery","underscore","backbone-all","mustache","editor/app","./SearchableSelectItemView","./SearchableSelectEmptyView","commerce/editor/store/general/list/ListLoadingView","tpl!components/searchable-select/list/list","waypoints"],function(e,t,i,n,o,s,r,a,l){var c=i.Marionette.CompositeView.extend({template:n.compile(l),itemView:s,itemViewContainer:"tbody",itemViewOptions:function(){var e=this;return{relatedModel:e.model,selector:e.options.selector,isRelatedModelMarkedToAdd:e.options.isRelatedModelMarkedToAdd,isRelatedModelMarkedToRemove:e.options.isRelatedModelMarkedToRemove}},emptyView:a.extend({colSpan:2}),initialize:function(){var e=this;e.collection=e.options.allRelatedModels,e.collection.fetch().done(function(){e.emptyView=r,!e.isClosed&&e.collection.isEmpty()&&e.render()})}});return c}),_wAMD.define("tpl!components/searchable-select/layout",[],function(){return'<span class="input-labeled input-search" style="display:none;">\n	<input type="text" name="searchText" class="search select-related-search" placeholder="{{searchPlaceholder}}">\n</span>\n\n<div class="select-related-selector" style="display:none;">\n	<span class="select-label">{{#tl}}Select:{{/tl}}</span>\n	<a href="#" class="all-link">{{#tl}}All{{/tl}}</a>\n	<span class="separator">|</span>\n	<a href="#" class="none-link">{{#tl}}None{{/tl}}</a>\n</div>\n\n<div class="select-related-select-region"></div>\n\n<div class="select-related-pagination-region"></div>'}),_wAMD.define("components/searchable-select/SearchableSelectDialog",["jquery","underscore","backbone-all","mustache","editor/app","./list/SearchableSelectListView","commerce/editor/store/general/pagination/PaginationView","tpl!components/searchable-select/layout","util/ui/wLoadButton"],function(e,t,i,n,o,s,r,a){var l=i.Marionette.Layout.extend({template:n.compile(a),ui:{search:"input[name=searchText]",cancelBtn:".btn-cancel",saveBtn:".btn-save",inputSearch:".input-search",selector:".select-related-selector"},events:{"keyup @ui.search":"search","click .all-link":"selectAll","click .none-link":"selectNone","click .btn-cancel":"cancel"},regions:{selectRegion:".select-related-select-region",paginationRegion:".select-related-pagination-region"},dialog:{dialogClass:"searchable-select-edit-dialog",title:"",size:"600x500",buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-cancel btn-com"},{text:_W.tl("Select"),className:"btn-save btn-com"}]}]},initialize:function(i){var n=this;n.options=i,n.options.selector=e.extend({fullCollection:!1,relationIdProp:!1,relatedIdsProp:!1,addTrigger:!1,removeTrigger:!1,displayProperties:!1,text:{}},n.options.selector),n.toAdd=[],n.toRemove=[],o.vent.on(n.options.selector.addTrigger,function(e){-1==n.toAdd.indexOf(e)&&n.toAdd.push(e),n.toRemove=t.without(n.toRemove,e)}),o.vent.on(n.options.selector.removeTrigger,function(e){-1==n.toRemove.indexOf(e)&&n.toRemove.push(e),n.toAdd=t.without(n.toAdd,e)})},templateHelpers:function(){var e=this;return{searchPlaceholder:e.options.selector.text.searchPlaceholder}},onRender:function(){var e=this;e.ui.cancelBtn.hide(),e.allRelatedModels=new e.options.selector.fullCollection([],{state:{pageSize:6},searchText:e.searchText}),e.ui.saveBtn.wLoadButton(),e.selectRegion.show(new s({model:e.model,allRelatedModels:e.allRelatedModels,selector:e.options.selector,isRelatedModelMarkedToAdd:function(t){return-1!=e.toAdd.indexOf(t)},isRelatedModelMarkedToRemove:function(t){return-1!=e.toRemove.indexOf(t)}})),e.paginationRegion.show(new r({collection:e.allRelatedModels,pageSize:6}))},onShow:function(){var e=this;e.allRelatedModels.on("sync",function(){e.allRelatedModels.state.totalRecords>0?(e.ui.inputSearch.show(),e.ui.selector.show(),e.ui.cancelBtn.show()):e.$el.find(".select-related-list").addClass("empty")})},search:function(e){var t=this,i=e.which||e.keyCode,n=13==i?0:250;clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.searchText=t.ui.search.val()||null,t.onRender()},n)},selectAll:function(t){var i=this;t&&t.preventDefault(),i.$el.find(".select-related-list .in-related-input").each(function(t,i){e(i).prop("checked")||e(i).click()})},selectNone:function(t){var i=this;t&&t.preventDefault(),i.$el.find(".select-related-list .in-related-input").each(function(t,i){e(i).prop("checked")&&e(i).click()})},cancel:function(){this.trigger("dialog:close")}});return l}),_wAMD.define("membership/editor/settings/member/detail/groups/select/MemberGroupEditListView",["jquery","underscore","backbone-all","mustache","editor/app","membership/editor/model/Group","membership/editor/collection/Group","components/searchable-select/SearchableSelectDialog"],function(e,t,i,n,o,s,r,a){var l=a.extend({dialog:{dialogClass:"member-groups-edit-dialog",title:_W.tl("Select Groups"),size:"600x500",buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-cancel btn-com"},{text:_W.tl("Okay"),className:"btn-save btn-com"}]}]},events:function(){var t=a.prototype.events;return e.extend(t,{"click @ui.saveBtn":"save"})},initialize:function(e){e.selector={fullCollection:r,relationIdProp:"site_group_id",relatedIdsProp:"group_ids",addTrigger:"membership:member:groups:select:add",removeTrigger:"membership:member:groups:select:remove",displayProperties:["name"],text:{searchPlaceholder:_W.tl("Search"),empty:_W.tl("You don't have any groups yet.")}},a.prototype.initialize.apply(this,arguments)},save:function(){var e=this;e.ui.saveBtn.wLoadButton("startWait");var i=e.options.selector.relatedIdsProp,n=e.model.get(i)||[],o=n.concat(e.toAdd);o=t.difference(o,e.toRemove),o=t.uniq(o),e.model.set(i,o),e.ui.saveBtn.wLoadButton("endWait"),e.trigger("dialog:close")}});return l}),_wAMD.define("tpl!membership/editor/settings/member/detail/groups/list/item",[],function(){return'<td colspan="2" class="name">{{name}}</td>\n<td class="options">\n	<span class="w-icon-delete delete menu"></span>\n</td>'}),_wAMD.define("membership/editor/settings/member/detail/groups/list/MemberGroupsListItemView",["backbone-all","mustache","editor/app","tpl!membership/editor/settings/member/detail/groups/list/item"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),tagName:"tr",className:"selectable",events:{"click td":"editGroup","click .delete":"removeMemberFromGroup"},editGroup:function(){i.vent.trigger("settings:membership:group:edit",this.model,this.options.member)},removeMemberFromGroup:function(e){e&&e.stopPropagation(),i.vent.trigger("settings:membership:group:removeFromMembersGroups",this.model)}});return o}),_wAMD.define("tpl!membership/editor/settings/member/detail/groups/list/empty",[],function(){return"{{#tl}}This member is not in any groups.{{/tl}}"}),_wAMD.define("membership/editor/settings/member/detail/groups/list/MemberGroupsListEmptyView",["backbone-all","mustache","tpl!membership/editor/settings/member/detail/groups/list/empty"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),tagName:"tr"});return n}),_wAMD.define("tpl!membership/editor/settings/member/detail/groups/list/list",[],function(){return'<table class="entity-list entity-list-headless entity-list-related member-groups-list" cellspacing="0">\n	<tbody></tbody>\n</table>'}),_wAMD.define("membership/editor/settings/member/detail/groups/list/MemberGroupsListView",["jquery","backbone-all","editor/app","membership/editor/collection/Group","commerce/editor/store/general/list/ListLoadingView","./MemberGroupsListItemView","./MemberGroupsListEmptyView","tpl!membership/editor/settings/member/detail/groups/list/list"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CompositeView.extend({itemView:s,template:Mustache.compile(a),itemViewContainer:"tbody",itemViewOptions:function(){var e=this;return{member:e.model}},emptyView:o.extend({colspan:2}),initialize:function(){var e=this;i.vent.on({"settings:membership:group:removeFromMembersGroups":function(t){e.collection.remove(t)}}),e.collection=new n,e.model.get("groups").done(function(t){e.collection.reset(t.models),e.emptyView=r,e.listenTo(t,"add",function(t){e.collection.add(t)}),e.listenTo(t,"remove",function(t){e.collection.remove(t)})})}});return l}),_wAMD.define("tpl!membership/editor/settings/member/detail/layout",[],function(){return'<div class="title-bar">\n	<button class="back btn-com btn-back">{{#tl}}Back{{/tl}}</button>\n\n	<h1>\n		{{#isNew}}\n			{{#tl}}Add Member{{/tl}}\n		{{/isNew}}\n		{{^isNew}}\n			{{#tl}}Edit Member{{/tl}}\n		{{/isNew}}\n	</h1>\n</div>\n\n<div class="row">\n	<label for="member-email" class="field-label">{{#tl}}Email{{/tl}}</label></span>\n	<br/>\n	<input id="member-email" type="text" name="email" value="{{email}}">\n	<br/>\n	<span class="error email-error"></span>\n</div>\n\n<div class="row">\n	<label for="member-name" class="field-label">{{#tl}}Name{{/tl}}</label><span class="optional-text">{{#tl}}(optional){{/tl}}</span>\n	<br/>\n	<input id="member-name" type="text" name="name" value="{{name}}">\n</div>\n\n{{#isNew}}\n<div class="member-invite-block" style="display:none">\n	<div class="row">\n		<input type="checkbox" name="member-invitation-input" id="member-invitation-input">\n		<label for="member-invitation-input" class="field-label">\n			<b>{{#tl}}Email member an invitation to log in{{/tl}}</b>\n		</label>\n	</div>\n	<div class="row member-invitation-message-row">\n		<label class="member-invitation-message-label" for="member-invitation-message">\n			{{#tl}}Include a message with the email invitation{{/tl}} <span class="optional-text">{{#tl}}(optional){{/tl}}</span>\n		</label>\n		<div id="member-invitation-message" class="textarea-input" name="invitation-message" placeholder=""></div>\n	</div>\n</div>\n{{/isNew}}\n\n<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}Pages{{/tl}}</h2>\n	<button class="btn-com btn-icon-left member-select-pages">\n		<span class="w-icon-plus"></span>\n		{{#tl}}Select Pages{{/tl}}\n	</button>\n</div>\n{{#hasPages}}<h3>{{#tl}}Pages this user can view{{/tl}}</h3>{{/hasPages}}\n<div class="member-pages-list"></div>\n\n<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}Groups{{/tl}}</h2>\n	<button class="btn-com btn-icon-left member-select-groups">\n		<span class="w-icon-plus"></span>\n		{{#tl}}Select Groups{{/tl}}\n	</button>\n</div>\n\n<div class="member-groups-list"></div>\n\n<div class="footer">\n	<div class="footer-spacer"></div>\n	<div class="footer-bar">\n		{{#isNew}}\n			<div class="main-actions">\n				<button class="btn-com cancel-member-edit">{{#tl}}Cancel{{/tl}}</button>\n				<button class="btn-com btn-success save-member">{{#tl}}Add Member{{/tl}}</button>\n			</div>\n		{{/isNew}}\n		{{^isNew}}\n			{{#approved}}\n				<div class="left-btns">\n					<button class="btn-com delete-member">\n						{{#tl}}Delete Member{{/tl}}\n					</button>\n					<button class="btn-com reset-password">\n						{{#tl}}Reset Password{{/tl}}\n					</button>\n				</div>\n				<div class="main-actions">\n					<button class="btn-com cancel-member-edit">{{#tl}}Cancel{{/tl}}</button>\n					<button class="btn-com btn-success save-member">{{#tl}}Save{{/tl}}</button>\n				</div>\n			{{/approved}}\n			{{^approved}}\n				<div class="main-actions">\n					<button class="btn-com deny-member">{{#tl}}Deny{{/tl}}</button>\n					<button class="btn-com btn-success approve-member">{{#tl}}Approve{{/tl}}</button>\n				</div>\n			{{/approved}}\n		{{/isNew}}\n	</div>\n</div>\n'}),_wAMD.define("membership/editor/settings/member/detail/MemberView",["jquery","underscore","backbone-all","mustache","editor/app","editor/utils","components/layouts/LayoutWithDialogs","membership/editor/model/Member","membership/editor/settings/components/page/PageSelectorDialog","membership/editor/settings/components/page/related/list/PageRelatedListView","membership/editor/settings/member/detail/groups/select/MemberGroupEditListView","membership/editor/settings/member/detail/groups/list/MemberGroupsListView","commerce/editor/store/BusinessWarningView","components/views/AlertView","components/views/ConfirmView","tpl!membership/editor/settings/member/detail/layout","util/ui/wLoadButton"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m){var g=r.extend({template:n.compile(m),ui:{emailInvite:"#member-invitation-input",emailInviteMsgRow:".member-invitation-message-row",emailInviteMsg:"#member-invitation-message",emailInviteBlock:".member-invite-block",pageRedirect:".member-redirect",emailInput:"#member-email",nameInput:"#member-name",welcomeMessage:"#member-invitation-message",selectPagesBtn:".member-select-pages",selectGroupsBtn:".member-select-groups",saveBtn:".save-member",emailError:".email-error",denyBtn:".deny-member",approveBtn:".approve-member"},regions:{memberPagesRegion:".member-pages-list",memberGroupsRegion:".member-groups-list"},templateHelpers:function(){var e=this;return{isNew:e.isNew,pages:e.pages,hasPages:e.model.get("page_ids")&&e.model.get("page_ids").length>0,hasGroups:e.model.get("group_ids")&&e.model.get("group_ids").length>0}},events:{"click .btn-back":"cancel","click .cancel-member-edit":"cancel","click .save-member":"saveMember","click .delete-member":"deleteMember","click .reset-password":"resetPassword","click @ui.saveBtn":"saveMember","click @ui.denyBtn":"denyMember","click @ui.approveBtn":"approveMember","click .delete-member":"deleteMember","change @ui.emailInvite":"toggleEmailInvite","click @ui.selectPagesBtn":"showSelectPages","click @ui.selectGroupsBtn":"showSelectGroups"},initialize:function(){var e=this;e.isNew=!e.model,e.isNew&&(e.model=new a,e.model.set("page_ids",[])),e.listenTo(o.vent,{"settings:membership:member:inviteLinkClose":function(){o.vent.trigger("settings:membership:general:show")}}),o.vent.on({"settings:membership:group:removeFromMembersGroups":function(i){var n=e.model.get("group_ids");n=t.without(n,i.get("site_group_id")),e.model.set("group_ids",n)},"settings:membership:page:removePageRelated":function(i){var n=e.model.get("page_ids");n=t.without(n,i.get("page_id")),e.model.set("page_ids",n)}}),e.recordInitialProperties()},recordInitialProperties:function(){var e=this;
e.initialName=e.model.get("name"),e.initialEmail=e.model.get("email"),e.initialGroupIds=e.model.get("group_ids")},hasUnsavedChanges:function(){var e=this;return(e.initialName||"")!=e.ui.nameInput.val()||e.initialEmail!=e.ui.emailInput.val()||t.difference(e.initialGroupIds,e.model.get("group_ids")).length>0?!0:!1},onRender:function(){var e=this;r.prototype.onRender.call(this),Weebly.Restrictions.hasAccess("membership_settings")||this.dialogRegion.show(new h({model:new i.Model({warning:_W.tl("You must upgrade to Pro or Business to add members to your site."),feature:"membership_settings",cancel:function(){o.vent.trigger("settings:membership:general:show")}})})),e.memberPagesRegion.show(new c({model:e.model,emptyText:_W.tl("The member does not have access to any pages.")})),e.memberGroupsRegion.show(new d({model:e.model}))},onShow:function(){var e=this;e.ui.emailInviteMsg.richText({bold:!0,italic:!0,underline:!0,increaseFont:!1,decreaseFont:!1,orderedList:!0,unorderedList:!0,leftAlign:!1,centerAlign:!1,rightAlign:!1,link:!1,removeFormat:!1}),setTimeout(function(){e.ui.emailInput.focus()},500),_W.Membership.RPC.Member.getMembershipSiteSettings().done(function(t){t.site_published?e.ui.emailInvite.prop("checked",!0):e.ui.emailInvite.prop("disabled",!0),e.ui.emailInvite.wCheckbox(),t.site_published||(e.$el.find(".member-invite-block .w-checkbox-container").popover({trigger:"hover",container:"body",placement:"top",content:_W.tl("You must publish your site before you can send email invitations to new members.")}),e.ui.emailInviteMsgRow.hide()),e.ui.emailInviteBlock.show()})},denyMember:function(){this.model.destroy(),o.vent.trigger("settings:membership:general:show")},approveMember:function(){var e=this;_W.Membership.RPC.Member.approveMember(e.model.get("site_member_id")).done(function(){e.model.set("approved",!0),e.render()})},saveMember:function(){var e=this,t=e.model;return e.ui.emailInput.val()?(e.ui.saveBtn.wLoadButton("startWait"),e.ui.emailError.hide(),t.save({email:e.ui.emailInput.val().trim(),name:e.ui.nameInput.val(),approved:!0,welcomeMessage:e.ui.welcomeMessage.html(),sendWelcomeMessage:e.ui.emailInvite.is(":checked")}).done(function(){e.ui.saveBtn.wLoadButton("endWait"),e.isNew&&!e.ui.emailInvite.is(":checked")?o.vent.trigger("settings:membership:member:inviteLink",{model:t,show_publish_modal:!0}):(o.vent.trigger("settings:membership:general:show"),o.vent.trigger("settings:membership:members:added",t))}).fail(function(t){if(e.ui.saveBtn.wLoadButton("endWait"),-1!=t.indexOf("Member count limit reached")){var n=parseInt(Weebly.Restrictions.accessValue("membership_member_limit")),s=_W.tl("You must upgrade to the Business Package to add more than %i members to your site.").replace("%i",n);e.dialogRegion.show(new h({model:new i.Model({warning:s,feature:"membership_settings",cancel:function(){o.vent.trigger("settings:membership:general:show")}})}))}else-1!=t.indexOf("Duplicate entry")?e.ui.emailError.text(_W.tl("There is already a member with that email.")):-1!=t.indexOf("Email is not a valid email address")?e.ui.emailError.text(_W.tl("The email address is invalid. Please check it for errors.")):e.ui.emailError.text(_W.tl("There was an error saving the member.")),e.ui.emailError.show()}),void 0):(e.ui.emailError.text(_W.tl("Email is required.")),e.ui.emailError.show(),void 0)},deleteMember:function(e){var t=this;e&&e.stopPropagation(),o.vent.trigger("settings:membership:confirm",{message:_W.tl("Are you sure you'd like to delete member %s?").replace("%s",t.model.get("email")),callback:function(e){e&&(t.model.destroy(),o.vent.trigger("settings:membership:general:show"))}})},resetPassword:function(){var e=this,t=e.ui.nameInput.val()||_W.tl("this user"),i=e.ui.emailInput.val()||_W.tl("their email");o.vent.trigger("settings:membership:confirm",{message:_W.tl("Are you sure you want to reset %s's password? A reset link will be sent to %e.").replace("%s",t).replace("%e",i),callback:function(t){t&&Weebly.Membership.RPC.Member.resetMemberPassword({email:e.ui.emailInput.val()},function(){e.dialogRegion.show(new p({message:_W.tl("A password reset link has been sent to %s").replace("%s",i),title:_W.tl("Reset Password")}))})}})},toggleEmailInvite:function(){this.ui.emailInviteMsgRow.toggle(this.ui.emailInvite.is(":checked")&&!this.ui.emailInvite.is(":disabled"))},showSelectPages:function(){var e=this;o.showDialog(new l({model:e.model}))},showSelectGroups:function(){var e=this;o.showDialog(new u({model:e.model}))},cancel:function(e){e&&e.stopPropagation();var t=this,i=function(){t.options.fromGroup?o.vent.trigger("settings:membership:group:edit",t.options.fromGroup,null,"right"):o.vent.trigger("settings:membership:general:show")};t.hasUnsavedChanges()?this.dialogRegion.show(new f({message:_W.tl("Are you sure you want to leave? You will lose any unsaved changes."),callback:function(e){e&&i()}})):i()}});return g}),_wAMD.define("membership/editor/settings/group/detail/members/select/GroupMembersEditListView",["jquery","underscore","backbone-all","mustache","editor/app","membership/editor/model/Member","membership/editor/collection/Member","components/searchable-select/SearchableSelectDialog"],function(e,t,i,n,o,s,r,a){var l=a.extend({dialog:{dialogClass:"group-members-edit-dialog",title:_W.tl("Select Members"),size:"600x500",buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-cancel btn-com"},{text:_W.tl("Okay"),className:"btn-save btn-com"}]},{group:"control-buttons pull-left",buttons:[{text:_W.tl("Add all members"),className:"btn-add-all btn-com"}]}]},events:function(){var t=a.prototype.events;return e.extend(t,{"click @ui.saveBtn":"save","click .btn-add-all":"addAllMembers"})},initialize:function(e){e.selector={fullCollection:r,relationIdProp:"site_member_id",relatedIdsProp:"member_ids",addTrigger:"membership:group:members:select:add",removeTrigger:"membership:group:members:select:remove",displayProperties:["name","email"],text:{searchPlaceholder:_W.tl("Search"),empty:_W.tl("You don't have any members yet.")}},a.prototype.initialize.apply(this,arguments)},onShow:function(){var e=this;o.vent.on("searchableSelect:collection:empty",function(){e.$el.find(".btn-add-all").hide()})},addAllMembers:function(){var e=this;e.ui.saveBtn.wLoadButton("startWait");var i=e.options.selector.relatedIdsProp,n=e.model.get(i)||[],o=new r,s=t.findWhere(o.fetchOptions.filter,{property:"owner_id"}).value,a=t.findWhere(o.fetchOptions.filter,{property:"site_id"}).value;Weebly.Membership.RPC.Member.listAllMembers(s,a).done(function(t){o.add(t.data);var s=n.concat(o.pluck("site_member_id"));e.model.set(i,s),e.ui.saveBtn.wLoadButton("endWait"),e.trigger("dialog:close")})},save:function(){var e=this;e.ui.saveBtn.wLoadButton("startWait");var i=e.options.selector.relatedIdsProp,n=e.model.get(i)||[],o=n.concat(e.toAdd);o=t.difference(o,e.toRemove),o=t.uniq(o),e.model.set(i,o),e.ui.saveBtn.wLoadButton("endWait"),e.trigger("dialog:close")}});return l}),_wAMD.define("tpl!membership/editor/settings/group/detail/members/list/item",[],function(){return'<td class="email">{{email}}</td>\n\n<td class="name">{{name}}</td>\n\n<td class="options">\n	<span class="menu delete w-icon-delete"></span>\n</td>\n'}),_wAMD.define("membership/editor/settings/group/detail/members/list/GroupMembersListItemView",["backbone-all","mustache","editor/app","tpl!membership/editor/settings/group/detail/members/list/item"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({template:t.compile(n),tagName:"tr",className:"selectable",events:{"click td":"editMember","click .delete":"removeMemberFromGroup"},modelEvents:{change:"render"},onRender:function(){},editMember:function(){var e=this;i.vent.trigger("settings:membership:member:edit",e.model,e.options.fromGroup)},removeMemberFromGroup:function(e){e&&e.stopPropagation(),i.vent.trigger("settings:membership:member:removeFromGroup",this.model)}});return o}),_wAMD.define("tpl!membership/editor/settings/group/detail/members/list/empty",[],function(){return'<td colspan="3">{{#tl}}No members in group{{/tl}}</td>'}),_wAMD.define("membership/editor/settings/group/detail/members/list/GroupMembersListEmptyView",["backbone-all","mustache","tpl!membership/editor/settings/group/detail/members/list/empty"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i)});return n}),_wAMD.define("tpl!membership/editor/settings/group/detail/members/list/list",[],function(){return'<table class="entity-list" cellspacing="0">\n	<thead>\n		<tr>\n			<th class="email">{{#tl}}Email{{/tl}}</th>\n			<th class="name">{{#tl}}Name{{/tl}}</th>\n			<th class="options"></th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n</table>'}),_wAMD.define("membership/editor/settings/group/detail/members/list/GroupMembersListTableView",["jquery","backbone-all","editor/app","commerce/editor/store/general/list/ListLoadingView","membership/editor/collection/Member","./GroupMembersListItemView","./GroupMembersListEmptyView","tpl!membership/editor/settings/group/detail/members/list/list"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CompositeView.extend({className:"membership-group-members-list",template:Mustache.compile(a),itemView:s,itemViewContainer:"tbody",itemViewOptions:function(){var e=this;return{group:e.model}},emptyView:n.extend({colspan:3}),initialize:function(){var e=this;i.vent.on({"settings:membership:member:removeFromGroup":function(t){e.collection.remove(t)}}),e.collection=new o,e.model.get("members").done(function(t){e.collection.reset(t.models),e.emptyView=r,e.listenTo(t,"add",function(t){e.collection.add(t)}),e.listenTo(t,"remove",function(t){e.collection.remove(t)})})}});return l}),_wAMD.define("tpl!membership/editor/settings/group/detail/layout",[],function(){return'<div class="title-bar">\n	<button class="back btn-com btn-back">{{#tl}}Back{{/tl}}</button>\n\n	<h1>\n		{{#isNew}}\n			{{#tl}}Add Group{{/tl}}\n		{{/isNew}}\n		{{^isNew}}\n			{{#tl}}Edit Group{{/tl}}\n		{{/isNew}}\n	</h1>\n</div>\n\n<div class="row">\n	<label for="group-name" class="field-label">{{#tl}}Name{{/tl}}</label>\n	<br/>\n	<input id="group-name" type="text" name="name" value="{{name}}">\n	<br/>\n	<span class="error name-error"></span>\n</div>\n\n<div class="sub-title-bar sub-title-separator">\n	<h2>{{#tl}}Pages{{/tl}}</h2>\n	<button class="btn-com btn-icon-left group-select-pages">\n		<span class="w-icon-add"></span>\n		{{#tl}}Select Pages{{/tl}}\n	</button>\n</div>\n\n<h3>{{#tl}}Pages this Group Can View{{/tl}}</h3>\n<div class="group-pages-list"></div>\n\n<div class="sub-title-bar">\n	<h2>{{#tl}}Members in Group{{/tl}}</h2>\n	<button class="btn-com btn-icon-left group-select-members">\n		<span class="w-icon-add"></span>\n		{{#tl}}Select Members{{/tl}}\n	</button>\n</div>\n<div class="group-members-list"></div>\n\n<div class="footer">\n	<div class="footer-spacer"></div>\n	<div class="footer-bar">\n		<div class="main-actions">\n			<button class="btn-com cancel-group-edit">{{#tl}}Cancel{{/tl}}</button>\n			<button class="btn-com btn-success save-group">\n				<span class="text">\n					{{#isNew}}\n						{{#tl}}Add Group{{/tl}}\n					{{/isNew}}\n					{{^isNew}}\n						{{#tl}}Save{{/tl}}\n					{{/isNew}}\n				</span>\n			</button>\n		</div>\n	</div>\n</div>'}),_wAMD.define("membership/editor/settings/group/detail/GroupView",["backbone-all","mustache","underscore","editor/app","components/layouts/LayoutWithDialogs","membership/editor/model/Group","membership/editor/settings/components/page/PageSelectorDialog","membership/editor/settings/components/page/related/list/PageRelatedListView","membership/editor/settings/group/detail/members/select/GroupMembersEditListView","membership/editor/settings/group/detail/members/list/GroupMembersListTableView","commerce/editor/store/BusinessWarningView","components/views/ConfirmView","tpl!membership/editor/settings/group/detail/layout","util/ui/wLoadButton","util/ui/wSelectbox"],function(e,t,i,n,o,s,r,a,l,c,u,d,h){var p=o.extend({template:t.compile(h),ui:{nameInput:"#group-name",nameError:".name-error",cancelBtn:".cancel-group-edit",saveBtn:".save-group",selectPagesBtn:".group-select-pages",selectMembersBtn:".group-select-members"},regions:{groupPagesRegion:".group-pages-list",groupMembersRegion:".group-members-list"},templateHelpers:function(){var e=this;return{isNew:e.isNew}},events:{"click .btn-back":"cancel","click @ui.selectPagesBtn":"showSelectPages","click @ui.selectMembersBtn":"showSelectMembers","click @ui.cancelBtn":"cancel","click @ui.saveBtn":"saveGroup"},initialize:function(){var e=this;e.isNew=!e.model,e.isNew&&(e.model=new s,e.model.set("page_ids",[])),n.vent.on({"settings:membership:member:removeFromGroup":function(t){var n=e.model.get("member_ids");n=i.without(n,t.get("site_member_id")),e.model.set("member_ids",n)},"settings:membership:page:removePageRelated":function(t){var n=e.model.get("page_ids");n=i.without(n,t.get("page_id")),e.model.set("page_ids",n)}}),e.recordInitialProperties()},recordInitialProperties:function(){var e=this;e.initialName=e.model.get("name"),e.initialMemberIds=e.model.get("member_ids")},hasUnsavedChanges:function(){var e=this;return e.initialName!=e.ui.nameInput.val()||i.difference(e.initialMemberIds,e.model.get("member_ids")).length>0?!0:!1},onRender:function(){var t=this;o.prototype.onRender.call(this),Weebly.Restrictions.hasAccess("membership_settings")||this.dialogRegion.show(new u({model:new e.Model({warning:_W.tl("You must upgrade to Pro or Business to add groups to your site."),feature:"membership_settings",cancel:function(){n.vent.trigger("settings:membership:general:show")}})})),t.groupPagesRegion.show(new a({model:t.model,emptyText:_W.tl("The group does not have access to any pages.")})),t.groupMembersRegion.show(new c({model:t.model})),t.ui.saveBtn.wLoadButton()},onShow:function(){var e=this;setTimeout(function(){e.ui.nameInput.focus()},500)},showSelectPages:function(){var e=this;n.showDialog(new r({model:e.model}))},showSelectMembers:function(){var e=this;n.showDialog(new l({model:e.model}))},cancel:function(e){e&&e.stopPropagation();var t=this,i=function(){t.options.fromMember?n.vent.trigger("settings:membership:member:edit",t.options.fromMember,null,"right"):n.vent.trigger("settings:membership:general:show")};t.hasUnsavedChanges()?this.dialogRegion.show(new d({message:_W.tl("Are you sure you want to leave? You will lose any unsaved changes."),callback:function(e){e&&i()}})):i()},saveGroup:function(){var e=this,t=e.model||new s;return e.ui.nameInput.val()?(e.ui.saveBtn.wLoadButton("startWait"),e.ui.nameError.hide(),t.save({name:e.ui.nameInput.val()}).done(function(){e.ui.saveBtn.wLoadButton("endWait"),n.vent.trigger("settings:membership:general:show")}).fail(function(t){e.ui.saveBtn.wLoadButton("endWait"),-1!=t.indexOf("Duplicate entry")?e.ui.nameError.text(_W.tl("There is already a group with that name.")):-1!=t.indexOf("Blank name is invalid")?e.ui.nameError.text(_W.tl("Name cannot be blank.")):e.ui.nameError.text(_W.tl("There was an error saving the group.")),e.ui.nameError.show()}),void 0):(e.ui.nameError.text(_W.tl("Name cannot be blank.")),e.ui.nameError.show(),void 0)}});return p}),_wAMD.define("tpl!membership/editor/settings/import/instructions-csv",[],function(){return'{{#tl}}<a href="/csv/samplemembers.csv" target="_blank" download>Download</a> the sample CSV{{/tl}}\n\n<div class="file-upload">\n	<button id="uploadBtn" class="btn-com btn-icon-left">\n		<i class="w-icon-increase"></i>\n		{{#tl}}Upload CSV{{/tl}}\n	</button>\n	<div class="file-indicator">{{#tl}}No file selected{{/tl}}</div>\n	<i class="file-delete w-icon-delete"></i>\n	<input id="memberCsvInput" type="file" style="display:none"/>\n</div>\n<div id="errorText"></div>\n\n<div class="email-checkbox">\n	<input type="checkbox" name="send_email" id="site-setting-send-email">\n	<label class="label" for="product-track-inventory-input">\n		{{#tl}}Email members an invitation to log in{{/tl}}\n	</label>\n</div>\n\n<div class="email-message richtext-area">\n	<label class="richtext">{{#tl}}Include a message with the email invitation (optional){{/tl}}</label>\n	<div id="membership-import-email-message" name="email_message" class="textarea-input" placeholder=""></div>\n</div>\n\n<div class="no-email-message">\n	{{#tl}}You will need to email the invite links to each member yourself.{{/tl}}\n</div>'}),function(e){function t(e){return"function"==typeof e}function i(e,t){function i(i){var n=c+i.target.result;if(c="",n.length>=t.chunkSize){var s=n.lastIndexOf("\n");0>s&&(s=n.lastIndexOf("\r")),s>-1&&(c=n.substring(s+1),n=n.substring(0,s))}var a=u.parse(n);return l>=e.size?o(i):(a.errors.abort||r(),void 0)}function o(i){"function"==typeof t.onComplete&&t.onComplete(void 0,e,t.inputElem,i)}function s(){"function"==typeof t.onFileError&&t.onFileError(d.error,e,t.inputElem)}function r(){l<e.size&&(d.readAsText(e.slice(l,Math.min(l+t.chunkSize,e.size)),t.config.encoding),l+=t.chunkSize)}if(t||(t={}),t.chunkSize||(t.chunkSize=5242880),t.config.step){var a=t.config.step;t.config.step=function(i){return a(i,e,t.inputElem)}}var l=0,c="",u=new n(t.config),d=new FileReader;d.onload=i,d.onerror=s,this.stream=function(e,i){t.onComplete=e,t.onFileError=i,r()}}function n(e){function t(e){return"object"!=typeof e&&(e={}),("string"!=typeof e.delimiter||1!=e.delimiter.length)&&(e.delimiter=S.delimiter),('"'==e.delimiter||"\n"==e.delimiter)&&(e.delimiter=S.delimiter),"boolean"!=typeof e.header&&(e.header=S.header),"boolean"!=typeof e.dynamicTyping&&(e.dynamicTyping=S.dynamicTyping),"number"!=typeof e.preview&&(e.preview=S.preview),"function"!=typeof e.step&&(e.step=S.step),e}function i(e){for(var t,i,o,s=String.fromCharCode(30),r=String.fromCharCode(31),a=[",","	","|",";",s,r],l=0;l<a.length;l++){for(var c=a[l],u=0,d=0,h=new n({delimiter:c,header:!1,dynamicTyping:!1,preview:10}).parse(e),p=0;p<h.results.length;p++){var f=h.results[p].length;d+=f,"undefined"!=typeof o?f>1&&(u+=Math.abs(f-o),o=f):o=f}d/=h.results.length,("undefined"==typeof i||i>u)&&d>1.99&&(i=u,t=c)}return x.delimiter=t,!!t}function o(){var e=k.i>0&&l(k.i-1)||0==k.i,t=k.i<_.length-1&&l(k.i+1)||k.i==_.length-1,i=k.i<_.length-1&&'"'==_[k.i+1];k.inQuotes&&i?(k.fieldVal+='"',k.i++):e||t?k.inQuotes=!k.inQuotes:g("Quotes","UnexpectedQuotes","Unexpected quotes")}function s(){r()}function r(){k.fieldVal+=k.ch}function a(){k.ch==x.delimiter?c():"\r"==k.ch&&k.i<_.length-1&&"\n"==_[k.i+1]||"\n"==k.ch&&k.i<_.length-1&&"\r"==_[k.i+1]?(u(),k.i++):"\r"==k.ch||"\n"==k.ch?u():r()}function l(e){return _[e]==x.delimiter||"\n"==_[e]||"\r"==_[e]}function c(){if(x.header)if(1==k.lineNum&&1==w)k.parsed.fields.push(k.fieldVal);else{var e=k.parsed.rows[k.parsed.rows.length-1],t=k.parsed.fields[k.field];t?(x.dynamicTyping&&(k.fieldVal=p(k.fieldVal)),e[t]=k.fieldVal):("undefined"==typeof e.__parsed_extra&&(e.__parsed_extra=[]),e.__parsed_extra.push(k.fieldVal))}else x.dynamicTyping&&(k.fieldVal=p(k.fieldVal)),k.parsed[k.parsed.length-1].push(k.fieldVal);k.fieldVal="",k.field++}function u(){d(),h()&&(k.errors={},k.errors.length=0),x.header?k.lineNum>0&&(h()?k.parsed.rows=[{}]:k.parsed.rows.push({})):h()?k.parsed=[[]]:x.header||k.parsed.push([]),k.lineNum++,k.line="",k.field=0}function d(){if(!C){c();var e=f();if(!e&&x.header&&m(),h()&&(!x.header||x.header&&k.parsed.rows.length>0)){var t=x.step(v());t===!1&&(C=!0)}}}function h(){return"function"==typeof x.step}function p(e){var t=T.floats.test(e);return t?parseFloat(e):e}function f(){return T.empty.test(k.line)?(x.header?1==k.lineNum?(k.parsed.fields=[],k.lineNum--):k.parsed.rows.splice(k.parsed.rows.length-1,1):k.parsed.splice(k.parsed.length-1,1),!0):!1}function m(){if(!x.header)return!0;if(0==k.parsed.rows.length)return!0;var e=k.parsed.fields.length,t=0,i=k.parsed.rows[k.parsed.rows.length-1];for(var n in i)i.hasOwnProperty(n)&&t++;return e>t?g("FieldMismatch","TooFewFields","Too few fields: expected "+e+" fields but parsed "+t):t>e?g("FieldMismatch","TooManyFields","Too many fields: expected "+e+" fields but parsed "+t):!0}function g(e,t,i,n){var o=x.header?k.parsed.rows.length?k.parsed.rows.length-1:void 0:k.parsed.length-1,s=n||o;return"undefined"==typeof k.errors[s]&&(k.errors[s]=[]),k.errors[s].push({type:e,code:t,message:i,line:k.lineNum,row:o,index:k.i+M}),k.errors.length++,!1}function v(){return{results:k.parsed,errors:k.errors,meta:{delimiter:x.delimiter}}}function b(e){w++,w>1&&h()&&(M+=e.length),k=y(),_=e}function y(){var e;return e=x.header?{fields:h()?k.parsed.fields||[]:[],rows:h()&&w>1?[{}]:[]}:[[]],{i:0,lineNum:h()?k.lineNum:1,field:0,fieldVal:"",line:"",ch:"",inQuotes:!1,parsed:e,errors:{length:0}}}var w=0,_="",M=0,C=!1,x={},k=y(),S={delimiter:"",header:!0,dynamicTyping:!0,preview:0},T={floats:/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,empty:/^\s*$/};e=t(e),x={delimiter:e.delimiter,header:e.header,dynamicTyping:e.dynamicTyping,preview:e.preview,step:e.step},this.parse=function(e){if("string"!=typeof e)return v();for(b(e),x.delimiter||i(e)||(g("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to comma","config"),x.delimiter=","),k.i=0;k.i<_.length&&!(C||x.preview>0&&k.lineNum>x.preview);k.i++)k.ch=_[k.i],k.line+=k.ch,'"'==k.ch?o():k.inQuotes?s():a();return C?g("Abort","ParseAbort","Parsing was aborted by the user's step function","abort"):(d(),k.inQuotes&&g("Quotes","MissingQuotes","Unescaped or mismatched quotes")),v()},this.getOptions=function(){return{delimiter:x.delimiter,header:x.header,dynamicTyping:x.dynamicTyping,preview:x.preview,step:x.step}}}e.fn.parse=function(n){function o(o){var a,l=r;if(t(n.error)&&(a=function(){n.error(d.error,o.file,o.inputElem)}),t(n.complete)&&(l=function(e,t,i,o){n.complete(e,t,i,o),r()}),t(n.before)){var c=n.before(o.file,o.inputElem);if("object"==typeof c)o.instanceConfig=e.extend(o.instanceConfig,c);else{if("skip"===c)return r();if(c===!1)return s("AbortError",o.file,o.inputElem),void 0}}if(o.instanceConfig.step){var u=new i(o.file,{inputElem:o.inputElem,config:e.extend({},o.instanceConfig)});u.stream(l,a)}else{var d=new FileReader;d.onerror=a,d.onload=function(t){var i=t.target.result,n=e.parse(i,o.instanceConfig);l(n,o.file,o.inputElem,t)},d.readAsText(o.file,o.instanceConfig.encoding)}}function s(e,i,o){t(n.error)&&n.error({name:e},i,o)}function r(){l.splice(0,1),l.length>0&&o(l[0])}var a=n.config||{},l=[];return this.each(function(){var t="INPUT"==e(this).prop("tagName").toUpperCase()&&"file"==e(this).attr("type")&&window.FileReader;if(!t)return!0;var i=e.extend({},a);if(!this.files||0==this.files.length)return s("NoFileError",void 0,this),!0;for(var n=0;n<this.files.length;n++)l.push({file:this.files[n],inputElem:this,instanceConfig:i});l.length>0&&o(l[0])}),this},e.parse=function(e,t){var i=new n(t);return i.parse(e)}}(jQuery),_wAMD.define("vendor/jquery.parse",["jquery"],function(){}),_wAMD.define("membership/editor/settings/import/InstructionsView",["jquery","backbone-all","mustache","components/uploader-view/UploaderView","tpl!membership/editor/settings/import/instructions-csv","membership/editor/collection/Member","membership/editor/collection/Group","membership/util/backbone-populate-from-csv","vendor/jquery.parse"],function(e,t,i,n,o,s,r){var a=t.Marionette.Layout.extend({template:i.compile(o),dialog:{title:_W.tl("Add Members from a CSV"),width:"650",dialogClass:"member-import-instructions-dialog",buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Add Members"),className:"btn-com btn-success disabled"}]}]},ui:{cancel:".btn-cancel",addMembers:".btn-success",richTexts:"div.richtext-area div.textarea-input",emailCheckbox:"input[name=send_email]",emailMessageBox:".email-message",emailMessage:"#membership-import-email-message",fileInput:"#memberCsvInput",fileIndicator:".file-indicator",fileDelete:".file-delete",uploadBtn:"#uploadBtn",errorText:"#errorText",noEmailMessage:".no-email-message"},events:{"click @ui.cancel":"cancel","click @ui.addMembers":"proceed","click @ui.uploadBtn":"requestFile","click @ui.fileDelete":"handleClear","change @ui.fileInput":"handleFile","change @ui.emailCheckbox":"toggleEmail"},initialize:function(){var e=this;e.memberCollection=new s,e.countRetrieved=!1,s.count().done(function(t){e.existingMemberCount=t,e.countRetrieved=!0,e.fileSelected&&e.onFileSelect()})},requestFile:function(){var e=this;e.ui.fileInput.val(""),e.ui.fileInput.click()},onRender:function(){var e=this;e.ui.richTexts.richText(),_W.Membership.RPC.Member.getMembershipSiteSettings().done(function(t){t.site_published||e.ui.emailCheckbox.prop("disabled",!0),e.ui.emailCheckbox.wCheckbox(),t.site_published||e.$el.find(".email-checkbox .w-checkbox-container").popover({trigger:"hover",container:"body",placement:"top",content:_W.tl("You must publish your site before you can send email invitations to new members.")})})},onShow:function(){this.ui.uploadBtn.focus()},handleFile:function(){var e=this;e.hideErrors(),e.ui.fileIndicator.text(e.ui.fileInput[0].files[0].name),e.ui.fileDelete.css("display","inline"),e.memberCollection.populateFromCSV(e.ui.fileInput).done(function(){e.onFileSelect()}).fail(function(){e.displayError(this.error)})},handleClear:function(){var e=this;e.hideErrors(),e.ui.fileInput.val(""),e.ui.fileIndicator.text(_W.tl("No file selected")),e.ui.fileDelete.css("display","none"),e.valid=!1},toggleEmail:function(){var e=this,t=e.ui.emailCheckbox,i=t.prop("checked"),n=e.ui.emailMessageBox,o=e.ui.noEmailMessage;t.toggleClass("checked",i),i?o.slideUp(200,function(){n.fadeIn(200)}):n.slideUp(200,function(){o.fadeIn(200)})},onFileSelect:function(){var e,t=this,i=[];if(t.fileSelected=!0,t.countRetrieved){e=t.memberCollection.models.every(function(e){var t=e.toJSON().groups,i=new r;return t&&""!=t&&_.each(t.split(","),function(e){i.add({name:e})}),e.set("groups",i),_.every(e.attributes,function(t,i){return"groups"==i||e.constructor.prototype.defaults.hasOwnProperty(i)})},t),t.valid=e,e||i.push(_W.tl("Invalid CSV. Please verify that your file structure is the same as the sample file.")),t.memberCollection.length>500&&i.push(_W.tl("Please upload a CSV with fewer than 500 members."));var n=Weebly.Restrictions.isUnlimited("membership_member_limit"),o=Weebly.Restrictions.accessValue("membership_member_limit");if(!n&&t.memberCollection.length+t.existingMemberCount>o)return t.trigger("cancel"),editorApp.vent.trigger("settings:membership:import:upgrade"),void 0;t.ui.fileIndicator.addClass("selected"),0==i.length?t.ui.addMembers.removeClass("disabled").focus():(t.displayError(i.join("</br>")),t.ui.uploadBtn.focus())}},cancel:function(){this.trigger("cancel")},proceed:function(){var e=this;e.valid&&e.trigger("proceed",{members:e.memberCollection,email:e.ui.emailCheckbox.is(":checked"),emailMessage:e.ui.emailMessage.html()})},hideErrors:function(){var e=this;e.ui.errorText.hide().html(""),e.ui.addMembers.addClass("disabled"),e.ui.fileIndicator.removeClass("selected"),e.memberCollection.reset()},displayError:function(e){var t=this;t.ui.errorText.show().html(e)}});return a}),_wAMD.define("tpl!membership/editor/settings/import/review-row",[],function(){return'<td class="status">\n	{{#status}}\n		{{{status}}}\n	{{/status}}\n</td>\n<td class="email">\n	<div class="email-inner">\n		{{email}}\n	</div>\n</td>\n<td class="name{{#name-changed}} changed{{/name-changed}}">\n	<div class="name-inner">\n		{{name}}\n	</div>\n</td>\n<td class="groups{{#groups-changed}} changed{{/groups-changed}}">\n	{{#groups}}\n		{{{groups}}}\n	{{/groups}}\n	{{^groups}}\n		{{#tl}}No groups{{/tl}}\n	{{/groups}}\n</td>\n<td class="notification">\n{{#hasError}} \n	<div class="w-icon-question" data-content="{{#esc_attr}}{{#tl}}{{error}}{{/tl}}{{/esc_attr}}"></div>\n{{/hasError}}\n</td>'}),_wAMD.define("membership/editor/settings/import/ReviewRowView",["jquery","underscore","backbone-all","mustache","tpl!membership/editor/settings/import/review-row"],function(e,t,i,n,o){var s=i.Marionette.CompositeView.extend({tagName:"tr",className:function(){var e=[];return e.push(this.model.get("error")),e.push(this.model.get("status").toLowerCase()),e.join(" ")},template:n.compile(o),ui:{tooltips:"[data-content]"},templateHelpers:function(){var e=this,t=e.model;return{groups:function(){var e=t.toJSON().groups.toJSON();return e.length>1?_W.tl("%d groups").replace(/%d/,e.length):1==e.length?e[0].name:void 0},hasError:function(){return void 0!==t.get("error")},error:function(){return t.get("error")},"groups-changed":function(){return-1!=t.get("changed").indexOf("groups")},"name-changed":function(){return-1!=t.get("changed").indexOf("name")},email:function(){return t.get("email").toLowerCase()}}},onRender:function(){this.ui.tooltips.popover({trigger:"hover",placement:"top",container:".import-review"})}});return s}),_wAMD.define("tpl!membership/editor/settings/import/review-empty",[],function(){return'<td colspan="4">\n	{{#tl}}No entries found{{/tl}}\n</td>'}),_wAMD.define("membership/editor/settings/import/ReviewEmptyView",["backbone-all","mustache","tpl!membership/editor/settings/import/review-empty"],function(e,t,i){var n=e.Marionette.ItemView.extend({tagName:"tr",template:t.compile(i)});return n}),_wAMD.define("tpl!membership/editor/settings/import/review",[],function(){return'<div class="w-ui-topbar te-head">\n	<div class="w-logo-top">\n		{{^removeBranding}}\n			<div class="w-icon-li-w"></div>\n		{{/removeBranding}}\n		<div class="te-title">{{#tl}}Member Import{{/tl}}</div>\n	</div>\n	<div class="te-head-buttons">\n		<div class="te-cancel-button te-button btn-cancel">\n			<span class="bi">{{#tl}}Cancel{{/tl}}</span>\n		</div>\n		{{#showSave}}\n			<div class="te-save-button te-button btn-save">\n				<span class="bi">{{#tl}}Import{{/tl}}</span>\n			</div>\n		{{/showSave}}\n	</div>\n</div>\n<div class="member-list">\n	{{#status}}\n	<p class="status-box">\n		{{{status}}}\n	</p>\n	{{/status}}\n\n	<div class="grid-wrap">\n		<div class="grid">\n			<table class="product-list entity-list" cellspacing="0">\n				<thead>\n				<tr>\n					<th class="status">{{#tl}}Status{{/tl}}</th>\n					<th class="email">{{#tl}}Email{{/tl}}</th>\n					<th class="name">{{#tl}}Name{{/tl}}</th>\n					<th class="groups">{{#tl}}Groups{{/tl}}</th>\n					<th class="notifications"></th>\n				</tr>\n				</thead>\n				<tbody class="members-region">\n				</tbody>\n			</table>\n		</div>\n	</div>\n\n	<div class="loading-screen" style="display:none">\n		<div class="loading-screen-inner">\n			<h2>\n				{{#tl}}Your members are being imported...{{/tl}}\n			</h2>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("membership/editor/settings/import/ReviewView",["jquery","underscore","backbone-all","mustache","./ReviewRowView","./ReviewEmptyView","membership/editor/collection/Member","membership/editor/collection/Group","membership/editor/model/Group","tpl!membership/editor/settings/import/review"],function(e,t,i,n,o,s,r,a,l,c){var u=i.Marionette.CompositeView.extend({className:"import-review w-ui",template:n.compile(c),itemView:o,itemViewContainer:"tbody",emptyView:s,ui:{cancelBtn:".btn-cancel",saveBtn:".btn-save",reuploadLink:".reupload"},events:{"click @ui.cancelBtn":"cancel","click @ui.saveBtn":"proceed","click @ui.reuploadLink":"cancel"},initialize:function(e){var i=this,n=[],o=new a;o.fetch({force:!0}).done(function(s){o.add(s.data),e.errors=0,e.newMembers=new r,e.updatedMembers=new r,i.options=e;var l=new r,c=t.findWhere(l.fetchOptions.filter,{property:"owner_id"}).value,u=t.findWhere(l.fetchOptions.filter,{property:"site_id"}).value;l.rpc.listAllMembers(c,u).done(function(s){t.each(s.data,function(e){var t=l.add(e);t.set("group_ids",e.group_ids)});var r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;e.collection.models.each(function(i){var s=i.get("email").toLowerCase().trim(),c=l.findWhere({email:s}),u=[];if(""==s)i.set("status",_W.tl("Error")),i.set("error",_W.tl("Missing Email Address.")),e.errors++;else if(n.indexOf(s)>-1)i.set("status",_W.tl("Error")),i.set("error",_W.tl("Duplicate Email in CSV.")),e.errors++;
else if(r.test(s)){i.set("status",_W.tl("Unchanged")),n.push(s);var d=new a,h=[];t.each(i.toJSON().groups.toJSON(),function(e){var t=o.findWhere({name:e.name});t?(d.add(t),-1==h.indexOf(t.get("site_group_id"))&&h.push(t.get("site_group_id"))):(d.add({name:e.name}),h.push("new"),u.push("groups"))}),i.set("groups",d),i.set("group_ids",h),c?(c.get("name")!=i.get("name")&&(u.push("name"),c.set("name",i.get("name"))),-1==u.indexOf("groups")&&t.isEqual(t.sortBy(c.get("group_ids"),function(e){return 0|e}),t.sortBy(i.get("group_ids"),function(e){return 0|e}))||(u.push("groups"),c.set("groups",d)),u.length>0&&(i.set("status",_W.tl("Updated")),e.updatedMembers.add(c))):(i.set("status",_W.tl("New")),e.newMembers.add(i))}else i.set("status",_W.tl("Error")),i.set("error",_W.tl("Invalid Email Address.")),e.errors++;i.set("changed",u),i.set("approved",!0)}),i.render().$el.appendTo("body")})})},templateHelpers:function(){var e=this.options;return{status:function(){return e.errors>0?_W.tl('<span class="error">%1 errors were found in your CSV.</span> The entries with errors are highlighted in red below. Please correct these errors and then <a class="reupload">re-upload your CSV</a>.').replace(/%1/,e.errors):e.newMembers.length>1&&e.updatedMembers.length>1?_W.tl('%n% new members and %u% members with updated information are ready to be imported. The fields in bold indicate information that will be updated. Members marked "unchanged" will not be imported.').replace(/%n%/,e.new).replace(/%u%/,e.updatedMembers.length):1==e.newMembers.length&&e.updatedMembers.length>1?_W.tl('1 new member and %u% members with updated information are ready to be imported. The fields in bold indicate information that will be updated. Members marked "unchanged" will not be imported.').replace(/%u%/,e.updatedMembers.length):e.newMembers.length>1&&1==e.updatedMembers.length?_W.tl('%n% new members and 1 member with updated information are ready to be imported. The fields in bold indicate information that will be updated. Members marked "unchanged" will not be imported.').replace(/%n%/,e.newMembers.length):1==e.newMembers.length&&1==e.updatedMembers.length?_W.tl('1 new member and 1 member with updated information are ready to be imported. The fields in bold indicate information that will be updated. Members marked "unchanged" will not be imported.'):e.updatedMembers.length>1?_W.tl('%u% members with updated information are ready to be imported. The fields in bold indicate information that will be updated. Members marked "unchanged" will not be imported.').replace(/%u%/,e.updatedMembers.length):1==e.updatedMembers.length?_W.tl('1 member with updated information is ready to be imported. The fields in bold indicate information that will be updated. Members marked "unchanged" will not be imported.'):e.newMembers.length>1?_W.tl("%n% new members are ready to be imported.").replace(/%n%/,e.newMembers.length):1==e.newMembers.length?_W.tl("1 new member is ready to be imported."):_W.tl("No changes found.")},showSave:function(){return 0==e.errors&&(e.newMembers.length>0||e.updatedMembers.length>0)},removeBranding:_W.removeBranding}},cancel:function(){this.trigger("cancel")},proceed:function(){var e=this;e.trigger("proceed",e.options)}});return u}),_wAMD.define("tpl!membership/editor/settings/member/invite",[],function(){return'<p style="margin-top: 0px;">{{message}}</p>\n{{#setPasswordLink}}\n<input type="text" readonly="readonly" value="{{setPasswordLink}}" onClick="this.select();" style="width: 100%;"/>\n{{/setPasswordLink}}'}),_wAMD.define("membership/editor/settings/member/list/MemberInviteLinkView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!membership/editor/settings/member/invite"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),dialog:function(){var e=this,t={title:e.title,size:"600x250",buttons:[{group:"control-buttons pull-right",buttons:[{text:_W.tl("Done"),className:"btn-confirm btn-com btn-success"}]}]};return e.dialogClass&&(t.dialogClass=e.dialogClass),e.confirmClass&&(t.buttons[0].buttons[0].className=e.confirmClass+" btn-confirm"),t},templateHelpers:function(){var e=this;return{message:function(){return e.message},setPasswordLink:function(){return e.setPasswordLink}}},events:{"click .btn-confirm":"confirm"},initialize:function(e){var t=this;t.message=e.message,t.title=e.title,t.setPasswordLink=e.setPasswordLink,t.dialogClass=e.dialogClass,t.confirmClass=e.confirmClass},confirm:function(){this.trigger("dialog:close")}});return r}),_wAMD.define("membership/editor/settings/MembershipSettingsView",["jquery","backbone-all","editor/app","editor/utils","membership/editor/collection/Member","membership/editor/model/Member","membership/editor/collection/Group","./MembershipGeneralView","./member/detail/MemberView","./group/detail/GroupView","./import/InstructionsView","./import/ReviewView","components/regions/_slideRegion","components/regions/Dialog","components/views/ConfirmView","components/views/AlertView","membership/editor/settings/member/list/MemberInviteLinkView","commerce/editor/store/BusinessWarningView"],function(e,t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v){var b=t.Marionette.Layout.extend({template:function(){return'<div class="sliding-panel-main-region"><div class="membership-settings-main-region section"></div><div class="membership-confirm-region"></div></div>'},regions:{membershipRegion:{selector:".membership-settings-main-region",regionType:h},dialogRegion:p.extend({el:".membership-confirm-region"})},initialize:function(){var e=this;e.listenTo(i.vent,{"settings:membership:general:show":function(){e.showGeneralView()},"settings:membership:member:add":function(){var t=n.getSiteDomain();t?e.addMember():e.showSiteNotPublishedAlert()},"settings:membership:member:edit":function(t,i,n){e.editMember(t,i,n)},"settings:membership:group:add":function(){var t=n.getSiteDomain();t?e.addGroup():e.showSiteNotPublishedAlert()},"settings:membership:group:edit":function(t,i,n){e.editGroup(t,i,n)},"settings:membership:import":function(){var t=n.getSiteDomain();t?e.showInstructions():e.showSiteNotPublishedAlert()},"settings:membership:import:upgrade":function(){e.showUpgradeToBusiness()},"settings:membership:confirm":function(t){e.showConfirm(t)},"settings:membership:member:inviteLink":function(t){e.showInviteLink(t)},"settings:membership:members:added":function(i){o.count().then(function(n){var o=i instanceof t.Model?1:i.length;0==o-n&&e.showAlert({title:_W.tl("Site Publish Required"),message:_W.tl("In order for your new members to log in, you need to publish your site.  Please publish your site now.")})})}})},onRender:function(){this.showGeneralView()},showSiteNotPublishedAlert:function(){var e=new m({title:_W.tl("Site Not Published"),message:_W.tl("You must publish your site before you can add members or groups.")});this.dialogRegion.show(e)},showConfirm:function(e){var t=this;t.dialogRegion.show(new f({message:e.message,callback:e.callback}))},showAlert:function(e){var t=this,i=new m({title:e.title,message:e.message});t.dialogRegion.show(i)},showGeneralView:function(){var t=this;e("#site-settings-body").scrollTop(0),t.membershipRegion.show(new a,"right")},addMember:function(){var t=this;e("#site-settings-body").scrollTop(0),t.membershipRegion.show(new l,"left")},editMember:function(t,i,n){var o=this;e("#site-settings-body").scrollTop(0);var s=n?n:"left";o.membershipRegion.show(new l({model:t,fromGroup:i}),s)},addGroup:function(){var t=this;e("#site-settings-body").scrollTop(0),t.membershipRegion.show(new c,"left")},editGroup:function(t,i,n){var o=this;e("#site-settings-body").scrollTop(0);var s=n?n:"left";o.membershipRegion.show(new c({model:t,fromMember:i}),s)},showInstructions:function(){var e=this,t=(new u).on("cancel",function(){t.trigger("dialog:close")}).on("proceed",function(i){e.showReview(i,function(){t.trigger("dialog:close")})});i.showDialog(t)},showUpgradeToBusiness:function(){var e=parseInt(Weebly.Restrictions.accessValue("membership_member_limit")),n=_W.tl("You must upgrade to the Business Package to add more than %i members to your site.").replace("%i",e),o=new v({model:new t.Model({warning:n,feature:"membership_settings",cancel:function(){i.vent.trigger("settings:membership:general:show")}})});i.showDialog(o)},showReview:function(t,n){var s=new d({collection:t.members,sendWelcomeMessage:t.email,welcomeMessage:t.emailMessage}).on("cancel",function(){s.close()}).on("proceed",function(t){_W.Membership.RPC.Member.importCSV({"new":t.newMembers,updated:t.updatedMembers,sendWelcomeMessage:t.sendWelcomeMessage,welcomeMessage:t.welcomeMessage}).done(function(){var a=new r,l=new o;e.when(a.fetch({force:!0}),l.fetch({force:!0})).done(function(){i.isPageDirty=!0,i.vent.trigger("settings:membership:general:show"),i.vent.trigger("settings:membership:members:added",t.newMembers),n&&n(),s.close()})})})},showInviteLink:function(e){var t,o=this,s=e.model,r=e.show_publish_modal;_W.Membership.RPC.Member.getMembershipSiteSettings().done(function(e){if(e.site_published){var a=n.getSiteDomain(),l="http://"+a+"/apps/member/set_password?access_token="+s.get("access_token");t=_W.tl("Copy and Paste this link to your member so they can set their password.")}else t=_W.tl("You need to publish your site before you can invite members to join.");var c=new g({title:_W.tl("Invite Link"),message:t,setPasswordLink:l}).on("close",function(){i.vent.trigger("settings:membership:member:inviteLinkClose"),r&&i.vent.trigger("settings:membership:members:added",s)});o.dialogRegion.show(c)})}});return b}),_wAMD.define("tpl!editor/site-settings/blog/comments",[],function(){return'<div class="sub-title-bar sub-title-separator inner-subtitle comment-title">\n	<h2>{{#tl}}Comments{{/tl}}</h2>\n	<h3>{{#tl}}Control how people comment on your posts{{/tl}}</h3>\n</div>\n\n<div class="dd-option-list">\n	<div class="dd-option-container">\n		<div class="comment-option-label dd-option-label">{{#tl}}Commenting system:{{/tl}}</div>\n		<div class="dd-option">\n			<select class="commentSystem" name="commenting_system">\n				{{#commentSystem}}\n				<option value="{{value}}" {{#currentSystem}}selected{{/currentSystem}}>\n					{{text}}\n				</option>\n				{{/commentSystem}}\n			</select>\n		</div>   \n	</div>\n	<div class="advanced-comment-settings"></div>\n</div> \n'}),_wAMD.define("tpl!editor/site-settings/blog/default-comments",[],function(){return'{{#options}}\n<div class="dd-option-container blog-settings-comment-default">\n	<div class="comment-option-label dd-option-label">{{#tl}}Comment Default:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="allow_comments">\n			{{#commentDefault}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/commentDefault}}\n		</select>\n	</div>   \n</div>\n<div class="dd-option-container blog-settings-auto-close-comments">\n	<div class="comment-option-label dd-option-label">{{#tl}}Auto close comments:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="close_comments">\n			{{#autoCloseComments}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/autoCloseComments}}\n		</select>\n	</div>   \n</div>\n<div class="dd-option-container blog-settings-spam-protection">\n	<div class="comment-option-label dd-option-label">{{#tl}}Spam protection:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="comment_protection_mode">\n			{{#spamProtection}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/spamProtection}}\n		</select>\n	</div>   \n</div>\n<div class="dd-option-container blog-settings-spam-moderation">\n	<div class="comment-option-label dd-option-label">{{#tl}}Spam moderation:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="comment_moderation_mode">\n			{{#spamModeration}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/spamModeration}}\n		</select>\n	</div>   \n</div>\n<div class="dd-option-container notify-of-new-comments">\n	<div class="comment-option-label dd-option-label">{{#tl}}Notify me of new comments:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="email_blog_comments">\n			{{#commentNotifications}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/commentNotifications}}\n		</select>\n		<label class="dd-option-inline-label">at</label> \n		<input type="text" class="notification-email" name="notify_email" value="{{notifyAddress}}" placeholder="email@domain.com" />\n	</div>   \n</div>\n{{/options}}\n'}),_wAMD.define("editor/settings/blog/DefaultCommentsView",["jquery","backbone-all","mustache","tpl!editor/site-settings/blog/default-comments","util/ui/wSelectbox"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({template:i.compile(n),className:"weebly-comment-options",ui:{selects:"select"},initialize:function(e){this.model||(this.model=e.model)},onRender:function(){var e=this;e.ui.selects.wSelectbox({theme:"com"})},templateHelpers:function(){var e=this,t=e.model,i=t.get("settings"),n=i.allow_comments,o=i.close_comments,s=i.comment_protection_mode,r=i.comment_moderation_mode,a=i.email_comments,l=i.notify_email;return{options:{settings:t,commentDefault:[{text:_W.tl("Open"),value:"yes",current:"yes"==n},{text:_W.tl("Closed"),value:"no",current:"no"==n},{text:_W.tl("Require Approval"),value:"noanon",current:"noanon"==n}],autoCloseComments:[{text:_W.tl("Never"),value:"never",current:"never"==o},{text:_W.tl("After 30 Days"),value:"30",current:"30"==o},{text:_W.tl("After 60 Days"),value:"60",current:"60"==o},{text:_W.tl("After 90 Days"),value:"90",current:"90"==o}],spamProtection:[{text:_W.tl("Smart CAPTCHA"),value:"smart",current:"smart"==s},{text:_W.tl("Always show CAPTCHA"),value:"always",current:"always"==s},{text:_W.tl("Never show CAPTCHA"),value:"never",current:"never"==s}],spamModeration:[{text:_W.tl("Smart Moderation"),value:"smart",current:"smart"==r},{text:_W.tl("Never Moderate"),value:"never",current:"never"==r}],commentNotifications:[{text:_W.tl("Yes"),value:"yes",current:1==a},{text:_W.tl("No"),value:"no",current:0==a}],notifyAddress:function(){return l}}}}});return o}),_wAMD.define("tpl!editor/site-settings/blog/facebook-comments",[],function(){return'<div class="dd-option-container">\n	<div class="footnote">\n		{{#tl}}Facebook\'s commenting system does not currently allow for moderation.{{/tl}}\n	</div>\n</div>\n<div class="dd-option-container blog-settings-comment-default">\n	<div class="comment-option-label dd-option-label">{{#tl}}Comment visibility:{{/tl}}</div>\n	<div class="dd-option">\n		<select name="allow_comments">\n			{{#commentDefault}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/commentDefault}}\n		</select>\n	</div>\n</div>\n\n<div class="dd-option-container blog-settings-facebook-color-scheme">\n	<div class="comment-option-label dd-option-label">{{#tl}}Number of comments shown:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="num_facebook_comments_shown">\n			{{#numCommentsShown}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/numCommentsShown}}\n		</select>\n	</div>   \n</div>\n\n<div class="dd-option-container blog-settings-facebook-comment-order">\n	<div class="comment-option-label dd-option-label">{{#tl}}Order by:{{/tl}}</div>  \n	<div class="dd-option">\n		<select name="order_facebook_comments_by">\n			{{#orderBy}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/orderBy}}\n		</select>\n	</div>   \n</div>\n<div class="dd-option-container">\n	<div class="footnote">\n		{{#tl}}You need to republish your site for changes to the commenting system to take effect. All other Facebook commenting settings can be managed from a comment window.{{/tl}}\n	</div>\n</div>'}),_wAMD.define("editor/settings/blog/FacebookCommentsView",["jquery","backbone-all","mustache","tpl!editor/site-settings/blog/facebook-comments","util/ui/wSelectbox"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({template:i.compile(n),className:"facebook-comment-options",templateHelpers:function(){var e=this,t=e.model,i=t.get("settings").allow_comments,n=t.get("settings").num_facebook_comments_shown,o=t.get("settings").order_facebook_comments_by;return{commentDefault:[{text:_W.tl("Show"),value:"yes",current:"yes"==i},{text:_W.tl("Hide"),value:"no",current:"no"==i}],numCommentsShown:_.map(_.range(5,51,5),function(e){return{value:e,text:e,current:n==e}}),orderBy:[{text:"Social Relevance",value:"social",current:"social"==o},{text:"Newest First",value:"reverse_time",current:"reverse_time"==o},{text:"Oldest First",value:"time",current:"time"==o}]}},ui:{selects:"select",helpIcon:".help"},initialize:function(e){this.model||(this.model=e.model)},onRender:function(){var e=this;e.ui.selects.wSelectbox({theme:"com"}),e.ui.helpIcon.popover({trigger:"hover",placement:"right"})}});return o}),_wAMD.define("tpl!editor/site-settings/blog/disqus-comments",[],function(){return'<div class="dd-option-container blog-settings-comment-default">\n	<div class="comment-option-label dd-option-label">{{#tl}}Comment visibility:{{/tl}}</div>\n	<div class="dd-option">\n		<select name="allow_comments">\n			{{#commentDefault}}\n			<option value="{{value}}" {{#current}}selected{{/current}}>\n				{{text}}\n			</option>\n			{{/commentDefault}}\n		</select>\n	</div>   \n</div>\n<div class="dd-option-container blog-settings-disqus-shortname">\n	<div class="comment-option-label dd-option-label">{{#tl}}Disqus shortname:{{/tl}}\n		<span class="help w-icon-question" \n					data-key="settings:disqus_shortname"\n					data-content="{{#esc_attr}}{{#tl}}Your Disqus shortname is the unique identifier assigned to your blog/site (this may be different than your user name). You can find it in the admin page after making an account at disqus.com.{{/tl}}{{/esc_attr}}"\n		/>\n	</div>\n	<div class="dd-option">\n		<input name="disqus_shortname" type="text" value="{{settings.disqus_shortname}}"/>\n	</div>\n</div>\n<div class="dd-option-container">\n	<div class="footnote">\n		{{#tl}}You need to republish your site for changes to the commenting system to take effect. All other Disqus commenting settings can be managed from your Disqus account.{{/tl}}\n	</div>\n</div>\n'}),_wAMD.define("editor/settings/blog/DisqusCommentsView",["jquery","backbone-all","mustache","tpl!editor/site-settings/blog/disqus-comments","util/ui/wSelectbox"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({template:i.compile(n),className:"disqus-comment-options",templateHelpers:function(){var e=this.model,t=e.get("settings").allow_comments;return{commentDefault:[{text:_W.tl("Show"),value:"yes",current:"yes"==t},{text:_W.tl("Hide"),value:"no",current:"no"==t}],settings:e.get("settings")}},ui:{selects:"select",helpIcon:".help"},initialize:function(e){this.model||(this.model=e.model)},onRender:function(){var e=this;e.ui.selects.wSelectbox({theme:"com"}),e.ui.helpIcon.popover({trigger:"hover",placement:"right"})}});return o}),_wAMD.define("editor/settings/blog/CommentsView",["jquery","backbone-all","mustache","tpl!editor/site-settings/blog/comments","./DefaultCommentsView","./FacebookCommentsView","./DisqusCommentsView","util/ui/wSelectbox"],function(e,t,i,n,o,s,r){var a=t.Marionette.Layout.extend({template:i.compile(n),className:"commenting-system-options",ui:{selects:"select",commentingSystem:".commentSystem"},regions:{advancedSettings:".advanced-comment-settings"},templateHelpers:function(){var e=this;return{commentSystem:[{text:_W.tl("Default"),value:"default"},{text:"Disqus",value:"disqus"},{text:"Facebook",value:"facebook"}],currentSystem:function(){return this.value===e.model.get("settings").commenting_system}}},initialize:function(e){this.model||(this.model=e.model)},onRender:function(){var e=this;e.ui.selects.wSelectbox({theme:"com"}),e.showCommentOptions()},showCommentOptions:function(){var e=this,t=e.model,i=t.get("settings");allow_comments=i.allow_comments,commenting_system=i.commenting_system,options={model:t},"default"!=commenting_system&&"noanon"==allow_comments&&(i.allow_comments="yes",t.set("settings",i)),"disqus"===t.get("settings").commenting_system?e.advancedSettings.show(new r(options)):"facebook"===t.get("settings").commenting_system?e.advancedSettings.show(new s(options)):e.advancedSettings.show(new o(options))}});return a}),_wAMD.define("tpl!editor/site-settings/blog/customize-share-buttons",[],function(){return'<div>{{#tl}}Select which share buttons you want displayed with your blog posts.{{/tl}}</div>\n<ul class="customize-list"\n	>{{#settings.enable_social_customized}}<li class="customize-option"\n			><label\n				><input type="checkbox" {{#enabled}}checked="checked"{{/enabled}} data-label="{{label}}">{{label}}</label\n		></li\n	>{{/settings.enable_social_customized}}</ul>'}),_wAMD.define("editor/settings/blog/ShareButtonsView",["jquery","underscore","backbone-all","mustache","tpl!editor/site-settings/blog/customize-share-buttons","util/ui/wInput"],function(e,t,i,n,o){var s=i.Marionette.ItemView.extend({template:n.compile(o),ui:{checkboxes:"input[type=checkbox]"},dialog:{dialogClass:"customize-share-buttons",title:_W.tl("Customize Share Buttons"),width:"610px",buttons:[{text:_W.tl("Done"),className:"btn-com btn-success pull-right close-dialog"}]},events:{"change @ui.checkboxes":"toggleCheckbox"},triggers:{"click .close-dialog":"dialog:close"},onRender:function(){this.ui.checkboxes.wCheckbox()},toggleCheckbox:function(i){var n=this,o=e(i.target),s=o.data("label"),r=n.model.get("settings");t.find(r.enable_social_customized,function(e){return e.label==s?(e.enabled=o.is(":checked"),!0):!1}),n.model.set("settings",r)}});return s}),_wAMD.define("tpl!editor/site-settings/blog/layout",[],function(){return'<div class="blog-settings-view">\n{{#options}}\n	<div class="title-bar">\n		<div class="sub-title-bar sub-title-separator">\n			<h2>{{#tl}}Blog{{/tl}}</h2>\n			<h3>{{{blog}}}</h3>\n		</div>\n	</div>\n\n	<div class="blog-general-settings-wrapper">\n		<div class="sub-title-bar sub-title-separator inner-subtitle">\n			<h2>{{#tl}}General{{/tl}}</h2>\n			<h3>{{#tl}}The basic settings of your blog{{/tl}}</h3>\n		</div>\n		<div class="dd-option-list">\n			<div class="dd-option-container blog-settings-posts-per-page">\n				<div class="dd-option-label">{{#tl}}Posts per page:{{/tl}}</div>\n				<div class="dd-option">\n					<select class="posts-per-page" name="posts_per_page">\n						{{#posts_per_page}}\n							<option value="{{value}}" {{#current}}selected{{/current}}>\n								{{text}}\n							</option>\n						{{/posts_per_page}}\n					</select>\n				</div>\n			</div>\n			<div class="dd-option-container blog-settings-post-share-buttons">\n				<div class="dd-option-label">{{#tl}}Post share buttons:{{/tl}}</div>\n				<div class="toggle-switch inline-toggle-switch control light">\n					<input\n						type="checkbox"\n						name="enable_social"\n						id="blog-post-share-button"\n						class="toggle-field post-share-button{{#settings.enable_social}} checked{{/settings.enable_social}}"\n						{{#settings.enable_social}}checked{{/settings.enable_social}}\n					>\n					<label for="blog-post-share-button">\n						<div class="background-container">\n							<div class="background-slider">\n								<span class="label-on">{{#tl}}on{{/tl}}</span>\n								<span class="label-off">{{#tl}}off{{/tl}}</span>\n							</div>\n						</div>\n						<span class="blob">\n							<span class="blob-inner"></span>\n						</span>\n					</label>\n				</div>\n				<span> <a class="blog-setting-post-share-customize"> {{#tl}}Customize{{/tl}} </a> </span>\n			</div>\n			<div class="dd-option-container blog-settings-sidebar">\n				<div class="dd-option-label">\n					{{#tl}}Blog sidebar:{{/tl}}\n					<span class="help w-icon-question" \n						  data-key="settings:post-sidebar" \n						  data-content="{{#esc_attr}}{{#tl}}Themes may override this setting.{{/tl}}{{/esc_attr}}">\n					</span>\n\n				</div>\n				<div class="toggle-switch inline-toggle-switch control light">\n					<input\n						type="checkbox"\n						name="blog_sidebar"\n						id="blog-sidebar"\n						class="toggle-field blog-sidebar {{#settings.blog_sidebar}}checked{{/settings.blog_sidebar}}"\n						{{#settings.blog_sidebar}}checked{{/settings.blog_sidebar}}\n					>\n					<label for="blog-sidebar">\n						<div class="background-container">\n							<div class="background-slider">\n								<span class="label-on">{{#tl}}on{{/tl}}</span>\n								<span class="label-off">{{#tl}}off{{/tl}}</span>\n							</div>\n						</div>\n						<span class="blob">\n							<span class="blob-inner"></span>\n						</span>\n					</label>\n				</div>\n			</div>\n			<div class="dd-option-container blog-settings-post-header">\n				<div data-key="header" class="post-header-footer-option-label dd-option-label">{{#tl}}Post header code{{/tl}}\n					<span class="help w-icon-question" \n								data-key="settings:post-header" \n								data-content="{{#esc_attr}}{{#tl}}Add custom HTML here to display at the top of your post.{{/tl}}{{/esc_attr}}"\n					/>\n				</div>\n				<div class="header-input-wrapper" style="display:none">\n					<textarea name="post_header_code" class="header-input">{{settings.post_header_code}}</textarea>\n				</div>\n			</div>\n			<div class="dd-option-container blog-settings-post-footer">\n				<div data-key="footer" class="post-header-footer-option-label dd-option-label">{{#tl}}Post footer code{{/tl}}\n					<span class="help w-icon-question" \n								data-key="settings:post-footer" \n								data-content="{{#esc_attr}}{{#tl}}Add custom HTML here to display at the bottom of your post.{{/tl}}{{/esc_attr}}"\n					/>\n				</div>\n				<div class="footer-input-wrapper" style="display:none">\n					<textarea name="post_footer_code" class="footer-input">{{settings.post_footer_code}}</textarea>\n					<div class="footnote">\n						{{#tl}}ex. newsletter subscription options{{/tl}}\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="settings-blog-comments"></div>\n{{/options}}\n</div>\n\n<div class="footer-spacer"></div>\n<div class="footer-bar">\n	<div class="main-actions">\n		<button class="save btn-com btn-icon-left btn-success">\n			<span class="icon w-icon-check-mark"></span>\n			<span class="text">\n				{{#tl}}Save{{/tl}}\n			</span>\n		</button>\n	</div>\n</div>\n'}),_wAMD.define("tpl!editor/site-settings/blog/layout-empty",[],function(){return'<div class="title-bar">\n	<h1>{{#tl}}Blog{{/tl}}</h1>\n</div>\n\n{{#tl}}You don\'t currently have a blog on your site. When one is created, the settings for it will be here. {{/tl}}\n{{#can.editPages}}{{#tl}}Click <a href="#" class="open-pages-tab">here</a> to add a blog to your site or click "Add Page" then select "Blog Page" from the Pages Tab.{{/tl}}{{/can.editPages}}'}),_wAMD.define("tpl!widgets/loadingAnimation",[],function(){return'<div id="pleaseWait" class="w-ui">\n	<div class="please-wait-main">\n		<div class="loading-animation"></div>\n		<span class="loading-text">\n			{{#tl}}Loading{{/tl}}\n			<input id="loadingPercent" />\n		</span>\n	</div>\n</div>\n'}),_wAMD.define("editor/settings/blog/BlogSettingsView",["jquery","underscore","backbone-all","mustache","editor/app","./CommentsView","./ShareButtonsView","tpl!editor/site-settings/blog/layout","tpl!editor/site-settings/blog/layout-empty","tpl!widgets/loadingAnimation","util/ui/wSelectbox"],function(e,t,i,n,o,s,r,a,l,c){var u=i.Marionette.Layout.extend({template:n.compile(c),className:"sliding-panel-main-region",ui:{selects:"select",inputs:"select, textarea, input",formInputs:"textarea, input",blogSidebar:".blog-sidebar",postShareCustomize:".blog-setting-post-share-customize",toggleHeaderOrFooter:".post-header-footer-option-label",headerInputWrapper:".header-input-wrapper",footerInputWrapper:".footer-input-wrapper",saveButton:".save",helpIcon:".help",openPagesTab:".open-pages-tab"},events:{"change @ui.inputs":"change","change input[type=checkbox]":"updateToggle","keydown @ui.formInputs":"buttonReset","click @ui.toggleHeaderOrFooter":"toggleTextarea","click @ui.saveButton":"save","click @ui.postShareCustomize":"openShareButtonsView","click @ui.openPagesTab":"openPagesTab"},regions:{comments:".settings-blog-comments"},templateHelpers:function(){var e={can:{editPages:Weebly.Permissions.allow_pages}};if(!this.loading){var i=this.model,n=i.get("settings"),o=n.posts_per_page;t.extend(e,{options:{blog:i.get("title"),posts_per_page:t.map([1,2,3,4,5,6,7,8,9,10,15,20,25],function(e){return{value:e,text:e,current:o==e}})}})}return e},settingsAttrs:["allow_comments","posts_per_page","email_blog_comments","notify_email","close_comments","enable_social","date_format","time_format","post_footer_code","post_header_code","blog_sidebar","commenting_system","comment_protection_mode","comment_moderation_mode","disqus_shortname","num_facebook_comments_shown","order_facebook_comments_by"],initialize:function(e){var t=this;t.loading=!0,t.model||(t.model=new i.Model),e.blog_id?Weebly.Editor.RPC.Blog.getBlog(e.blog_id).done(function(e){t.loading=!1,t.model.set(e),t.template=n.compile(a),t.render()}):t.template=n.compile(l)},onRender:function(){var e=this;e.loading||(e.ui.selects.wSelectbox({theme:"com"}),e.ui.saveButton.wLoadButton({successIconClass:".w-icon-check-mark",endText:_W.tl("Updated")}),e.ui.helpIcon.popover({trigger:"hover",placement:"right"}),e.comments.show(new s({model:e.model})))},change:function(t){var i=this,n=i.model,o=n.get("settings"),r=e(t.target),a=r.attr("name"),l=n.get("settings").commenting_system,c=r.is(":checkbox")?r.prop("checked"):r.val();-1!=e.inArray(a,i.settingsAttrs)?o[a]=c:n.set(a,c),"commenting_system"==a&&l!=c&&i.comments.show(new s({model:n})),this.buttonReset()},save:function(){var e=this,t=e.model.toJSON();e.ui.saveButton.wLoadButton("startWait"),e.clearErrors(),Weebly.Editor.RPC.Blog.saveBlog(t.blog_id,t).done(function(t){t.success?(updateList(currentPage),o.vent.trigger("blog:settings:saved"),e.ui.saveButton.wLoadButton("endWait")):(e.displayErrors(t.errors),e.buttonReset())})},updateToggle:function(t){t.preventDefault();var i=e(t.target);i.toggleClass("checked",i.prop("checked"))},toggleTextarea:function(t){var i,n=this,o=e(t.target),s=e(o).data("key");i="header"===s||"settings:post-header"===s?n.ui.headerInputWrapper:n.ui.footerInputWrapper,i.slideToggle({duration:200,complete:function(){o.toggleClass("open"),i.children("textarea").focus()}})},openShareButtonsView:function(){o.showDialog(new r({model:this.model}))},openPagesTab:function(e){e&&e.preventDefault(),Pages.go("pagesMenu"),o.vent.trigger("settings:close")},buttonReset:function(){this.ui.saveButton.wLoadButton("reset")},displayErrors:function(i){var n=this;t.each(i,function(t,i){var o=e("<span>");o.addClass("dd-option-inline-label error-label"),o.text(t.join(", ")),n.$("[name="+i+"]").addClass("error").closest(".dd-option").append(o)})},clearErrors:function(){this.$(".error-label").remove(),this.$("input.error").removeClass("error")}});return u}),_wAMD.define("tpl!editor/site-settings/domain-ip-warning",[],function(){return"<div class=\"dialog-body\">\n	{{#isSSL}}\n		<p class=\"warning\">{{#tl}}In order to enable SSL on your website, you need to configure your domain to point to the following IP address: {{ip}}. Please follow the instructions or if you’ve already made these changes, please allow up to 48 hours for propagation.{{/tl}}</p>\n	{{/isSSL}}\n	{{^isSSL}}\n		<p>{{#tl}}To set up your domain with Weebly, your domain's DNS settings need to be updated.{{/tl}}</p>\n	{{/isSSL}}\n	<h2>{{#tl}}Option A: Email instructions to your domain registrar{{/tl}}</h2>\n	<p>{{#tl}}Send these instructions to your domain registrar (ex. GoDaddy, 1and1, Yahoo, etc.){{/tl}}</p>\n\n	<textarea>\n{{#tl}}Hello, I have purchased my domain {{domain}} from you.  I have built my website on Weebly.com.  I need you to point my domain to the following IP: {{ip}}{{/tl}}\n\n{{#tl}}This is done by changing my domain's A-Records. I am not requesting that you transfer my domain, redirect my domain, or change my name servers.  I want to remain with you as my domain registrar.  For more detailed information, please see http://kb.weebly.com/domain-registrar.html.{{/tl}}\n	</textarea>\n\n	<h2>{{#tl}}Option B: Make the DNS changes yourself{{/tl}}</h2>\n	<div class=\"option-b\">\n		<p>{{#tl}}We have specific instructions for <a href='https://weebly.zendesk.com/hc/en-us/articles/202916068-Use-a-Google-Domain-with-Your-Site' target='_blank'>Google</a>, <a href='https://weebly.zendesk.com/hc/en-us/articles/201103158-Setup-a-GoDaddy-Domain-with-Your-Site' target='_blank'>GoDaddy</a>, <a href='https://weebly.zendesk.com/hc/en-us/articles/201372783-Use-a-Yahoo-Domain-with-Your-Site' target='_blank'>Yahoo</a>, and <a href='https://weebly.zendesk.com/hc/en-us/articles/202147473-Use-a-Wordpress-Domain-with-Your-Site' target='_blank'>Wordpress</a>.{{/tl}}</p>\n		<p><b>{{#tl}}For all other registrars, follow these general instructions{{/tl}}</b></p>\n		<ol>\n			<li>{{#tl}}Log in to your domain's control panel{{/tl}}</li>\n			<li>{{#tl}}Locate the area to change your domain's DNS settings{{/tl}}</li>\n			<li>{{#tl}}Create 2 A-Records to point to Weebly's IP address{{/tl}}</li>\n		</ol>\n\n		<table class=\"domain-instructions-table\" cellpadding=\"0\" cellspacing=\"0\">\n			<tr style=\"height:21px; background:#eeeeee;\">\n				<th>{{#tl}}A-Record{{/tl}}</th>\n				<th>{{#tl}}Host{{/tl}}</th>\n				<th>{{#tl}}Points to{{/tl}}</th>\n			</tr>\n			<tr style=\"height:40px;\">\n				<td>#1</td>\n				<td>{{#tl}}The root of your domain (usually identified by a @ or * symbol){{/tl}}</td>\n				<td>{{ip}}</td>\n			</tr>\n			<tr style=\"height:40px;\">\n				<td>#2</td>\n				<td>www</td>\n				<td>{{ip}}</td>\n			</tr>\n		</table>\n\n		<p>{{#tl}}If you experience any problems, email your domain registrar the instructions from <b>Option A</b> above. Unfortunately, we have no control over your domain's settings and cannot provide assistance.{{/tl}}</p>\n	</div>\n\n	<p>{{#tl}}Once the DNS changes are made, it may take up to 48 hours (although usually less) for the changes to propagate through the Internet.{{/tl}}</p>\n</div>"
}),_wAMD.define("editor/settings/IpAddressWarningView",["jquery","backbone-all","mustache","editor/app","tpl!editor/site-settings/domain-ip-warning"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),dialog:{width:660,title:_W.tl("Update Domain Records"),buttons:[{group:"pull-right",buttons:[{text:"Close",className:"btn-com btn-cancel"}]}],dialogClass:"settings-ssl-ip-warning-dialog settings-dialog",cancelAll:!0},initialize:function(){this.model.get("domain")&&this.model.get("ip")||this.loadData()},loadData:function(){var e=this;Weebly.Editor.RPC.SiteSettings.getSiteIpData().done(function(t){t.ip&&t.domain&&(e.model.set({ip:t.ip,domain:t.domain}),e.render())})},events:{"change select[name=country]":"changeCountry","change input":"removeInputError","click .btn-cancel":"cancel","click .btn-save":"save"},cancel:function(){this.trigger("dialog:close")}});return s}),_wAMD.define("editor/settings/contributor/module",["backbone-all","editor/app","./ContributorSettingsView"],function(e,t,i){t.module("settings.contributor",function(n){var o={view:function(){t.settings.layout.mainRegion.show(new i)},list:function(){e.preventClose(function(){s.navigate("settings/contributor"),o.view(),t.settings.vent.trigger("settings:contributor:list")})},edit:function(i){i=i||{},e.preventClose(function(){t.settings.vent.trigger("settings:contributor:edit",i)})},add:function(i){e.preventClose(function(){s.navigate("settings/contributor/new"),t.settings.vent.trigger("settings:contributor:add",i)})}};n.on("start",function(){t.vent.on({"settings:contributor":function(){o.view()},"settings:contributor:list":function(){o.list()},"settings:contributor:add":function(e){o.add(e)},"settings:contributor:edit":function(e){o.edit(e)}})});var s=new e.Marionette.AppRouter({controller:o,appRoutes:{"settings/contributor":"list","settings/contributor/new":"add","settings/contributor/:id":"edit"}})})}),_wAMD.define("tpl!editor/site-settings/ssl/setup-ssl",[],function(){return'<div class="dialog-body">\n	{{#isClientSite}}\n		<p>{{#tl}}After setting up SSL, visitors to your store will checkout directly on your domain instead of {{defaultCheckoutUrl}}.{{/tl}}</p>\n	{{/isClientSite}}\n\n	{{^isClientSite}}\n		<p>{{#tl}}After setting up SSL, visitors to your store will checkout directly on your domain instead of {{defaultCheckoutUrl}}.{{/tl}}\n		{{^isResellerSite}}\n			{{#tl}}As part of the Business plan, we include <b>1 free SSL certificate</b>. If you ever change your domain, it will cost $10 to re-enable SSL.{{/tl}}</p>\n		{{/isResellerSite}}\n	{{/isClientSite}}\n	\n	<p>{{#tl}}Complete this form to enable SSL for {{domain}}{{/tl}}</p>\n	\n	<form>\n		<label>\n			{{#tl}}Organization Name{{/tl}}\n			<input type="text" name="org_name" />\n		</label>\n		<label>\n			{{#tl}}Country{{/tl}}\n			<select name="country">\n				{{#countries}}\n				<option value="{{cca2}}">{{name}}</option>\n				{{/countries}}\n			</select>\n		</label>\n		<label>\n			{{#tl}}State / Province{{/tl}}\n			{{#hasStates}}\n				<select name="state">\n					{{#states}}\n						<option value="{{name}}">{{name}}</option>\n					{{/states}}\n				</select>\n			{{/hasStates}}\n			{{^hasStates}}\n				<input type="text" name="state" value="{{state}}" />\n			{{/hasStates}}\n		</label>\n		<label>\n			{{#tl}}City{{/tl}}\n			<input type="text" name="city" />\n		</label>\n	</form>\n</div>'}),_wAMD.define("editor/settings/ssl/SetupSslView",["jquery","backbone-all","mustache","editor/app","tpl!editor/site-settings/ssl/setup-ssl","json!definitions/countries.json","json!definitions/states.json"],function(e,t,i,n,o,s,r){var a=t.Marionette.ItemView.extend({template:i.compile(o),ui:{save:".btn-save"},events:{"change select[name=country]":"changeCountry","change input":"removeInputError","click .btn-cancel":"cancel","click @ui.save":"save"},dialog:{width:660,title:_W.tl("Setup SSL Security"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Save"),className:"btn-com btn-save btn-success"}]}],dialogClass:"settings-setup-ssl-dialog settings-dialog",cancelAll:!0},templateHelpers:{countries:s,states:function(){return r[this.country]},hasStates:function(){return!!r[this.country]},defaultCheckoutUrl:function(){return Weebly.Restrictions.isClientSite?"checkout.editmysite.com":"checkout.weebly.com"},domain:function(){return Weebly.Location.custom_domain},isClientSite:function(){return Weebly.Restrictions.isClientSite}},initialize:function(i){this.enableDefer=i.enableDefer||e.Deferred(),this.model=new t.Model({country:"US",isResellerSite:!!i.isResellerSite})},onRender:function(){this.$("select[name=country]").val(this.model.get("country"))},changeCountry:function(){this.model.set("country",this.$("select[name=country]").val()),this.render()},removeInputError:function(t){e(t.target).removeClass("error")},cancel:function(){this.trigger("dialog:close")},save:function(){var i=this,o=!0,s={};if(i.$("input").removeClass("error"),e.each(i.$("form").serializeArray(),function(){s[this.name]=this.value,this.value||(i.$("input[name="+this.name+"]").addClass("error"),o=!1)}),o){var r=i.ui.save;r.wLoadButton(),r.wLoadButton("startWait");var a=Weebly.Editor.RPC.SiteSettings.enableSSL(s);a.done(function(e){if(r.wLoadButton("endWait"),e.success)i.enableDefer.resolve(),i.trigger("dialog:close");else if(e.showIpError)n.settings.showIpWarning(new t.Model({isSSL:!0}));else{var o=e.msg||_W.tl("Unable to setup ssl for this site");alert(o)}})}}});return a}),_wAMD.define("tpl!editor/site-settings/ssl/purchase-certificate",[],function(){return'<div class="error-text" id="billing-error"></div>\n{{^isClientSite}}\n	<p>{{#tl}}As part of the Business plan, we provided you 1 free SSL certificate which was already used.{{/tl}}</p>\n	<p>{{#tl}}To re-enable SSL security, please purchase a new SSL certificate for $10.{{/tl}}</p>\n{{/isClientSite}}\n\n{{#isClientSite}}\n	<p>{{#tl}}SSL certificates are included as part of the Business plan. {{/tl}}</p>\n	<p>{{#tl}}To enable SSL security, please purchase a new SSL certificate for $10. Your card will be charged $10 at this time. This $10 charge will be deducted from your next monthly invoice.{{/tl}}</p>\n{{/isClientSite}}\n<div class="footer">\n	{{#isLoading}}\n		\n	{{/isLoading}}\n	{{^isLoading}}\n		{{#hasProfile}}\n			{{#tl}}On card ending in {{ccLast4}}{{/tl}} {{^isClientSite}}<a class="change-card" href="#">{{#tl}}change{{/tl}}</a>{{/isClientSite}}\n		{{/hasProfile}}\n		<div class="pull-right total">{{#tl}}Total: $10{{/tl}}</div>\n	{{/isLoading}}\n</div>'}),_wAMD.define("editor/settings/ssl/PurchaseCertificateView",["jquery","backbone-all","mustache","editor/app","tpl!editor/site-settings/ssl/purchase-certificate"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:{isLoading:function(){return"loading"==this.status},hasProfile:function(){return!!this.profile.billing_profile_id},ccLast4:function(){return this.profile.last_4},isClientSite:function(){return Weebly.Restrictions.isClientSite}},ui:{errorMessage:"#billing-error"},dialog:{width:660,title:_W.tl("Purchase SSL Certificate"),buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"}],dialogClass:"settings-purchase-ssl-dialog settings-dialog",cancelAll:!0},initialize:function(i){var n=this;n.enableDefer=i.enableDefer||e.Deferred(),this.setupTransactionHandler(),this.model=new t.Model({status:"loading",profile:{}}),this.profile={},Weebly.Editor.RPC.SiteSettings.getBillingProfileForSslCredit().done(function(e){return e.error?(n.ui.errorMessage.html(e.error),void 0):(n.model.set({status:"loaded",profile:e}),n.updateButtons(),n.render(),void 0)})},onClose:function(){this.removeTransactionHandler()},setupTransactionHandler:function(){Weebly.Transactions||(Weebly.Transactions={}),Weebly.Transactions.successBillingUpdate=_.bind(this.handleBillingUpdate,this)},removeTransactionHandler:function(){delete Weebly.Transactions.successBillingUpdate},updateButtons:function(){var e=this.model.get("profile");this.dialog.buttons=e.billing_profile_id?[{group:"pull-right",buttons:[{text:_W.tl("Purchase"),className:"btn-com btn-save btn-success"}]}]:[{group:"pull-right",buttons:[{text:_W.tl("Add Billing Method"),className:"btn-com btn-add-billing btn-success"}]}]},events:{"click .btn-cancel":"cancel","click .btn-save":"purchase","click .change-card":"changeCard","click .btn-add-billing":"changeCard"},cancel:function(e){e.preventDefault(),this.trigger("dialog:close")},changeCard:function(e){e.preventDefault();var t=this.model.get("profile");showUpdateBillingScreen("ssl-credit",t.user_service_id,"editor","update",t.billing_profile_id)},purchase:function(t){t.preventDefault();var i=e(t.target),o=this;i.wLoadButton("startWait");var s=this.model.get("profile");Weebly.Editor.RPC.SiteSettings.purchaseSslCredit(s.billing_profile_id).done(function(e){if(i.wLoadButton("endWait"),e&&e.success){Weebly.Location.has_ssl_credit=!0,o.trigger("dialog:close");var t=n.settings.ssl.enable();t.done(function(){o.enableDefer.resolve()}),t.fail(function(e){alert(e)})}else{var s=e&&e.msg?e.msg:_W.tl("An error occurred processing this request.");alert(s)}})},handleBillingUpdate:function(e){if(e&&e.other_vars&&e.other_vars.updated_profile){var t=this.model.get("profile");t.billing_profile_id=e.other_vars.updated_profile.billing_profile_id,t.last_4=e.other_vars.updated_profile.cc_last4,this.model.set("profile",t),this.updateButtons(),this.render()}}});return s}),_wAMD.define("tpl!editor/site-settings/ssl/trial-ssl-warning",[],function(){return"<p>{{#tl}}Enabling SSL is not available during the free trial. Upgrade to the Business plan to access this feature. The Business plan includes a free SSL certificate.{{/tl}}</p>"}),_wAMD.define("editor/settings/ssl/TrialSslWarningView",["jquery","backbone-all","mustache","editor/app","tpl!editor/site-settings/ssl/trial-ssl-warning"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),dialog:{width:660,title:_W.tl("Upgrade Now"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Upgrade"),className:"btn-com btn-info"}]}],dialogClass:"settings-dialog"},events:{"click .btn-cancel":"cancel","click .btn-info":"upgrade"},cancel:function(e){e.preventDefault(),this.trigger("dialog:close")},upgrade:function(e){e.preventDefault(),n.vent.trigger("billing:upgrade:window",{refer:"trial-ssl",restrictionType:"feature",level:Weebly.Restrictions.businessLevel,siteID:currentSite}),this.trigger("dialog:close")}});return s}),_wAMD.define("tpl!editor/dialogs/trial-premium-feature-warning",[],function(){return"<p>{{#tl}}You will need to upgrade your trial plan to {{/tl}} \n{{#isProRestricted}}\n	{{#tl}}Pro{{/tl}}\n{{/isProRestricted}}\n{{^isProRestricted}}\n	{{#tl}}Business{{/tl}}\n{{/isProRestricted}}\n{{#tl}}in order to use this feature.{{/tl}}</p>"}),_wAMD.define("editor/dialogs/TrialPremiumFeatureWarning",["jquery","backbone-all","mustache","editor/app","tpl!editor/dialogs/trial-premium-feature-warning"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:function(){var e=this;return{isProRestricted:function(){return"Weebly.proSite12"==e.requiredUpgradeLevel}}},requiredUpgradeLevel:"Weebly.proSite12",dialog:{width:660,title:_W.tl("Premium Feature"),buttons:[{group:"pull-right",buttons:[{text:_W.tl("Cancel"),className:"btn-com btn-cancel"},{text:_W.tl("Try Pro"),className:"btn-com btn-info upgrade-current-trial-plan"}]}],dialogClass:"settings-dialog"},events:{"click .btn-cancel":"cancel","click .btn-info":"upgrade"},initialize:function(e){e&&e.restrictionID&&Weebly.Restrictions.requiredService(e.restrictionID)>10&&(this.requiredUpgradeLevel="Weebly.businessSite12")},onShow:function(){"Weebly.businessSite12"==this.requiredUpgradeLevel?e(".upgrade-current-trial-plan").text(_W.tl("Try Business")):"with_credit_card"===Weebly.freeTrialTest&&e(".upgrade-current-trial-plan").text(_W.tl("Upgrade Trial Plan"))},cancel:function(e){e.preventDefault(),this.trigger("dialog:close")},upgrade:function(e){e.preventDefault();var t=this;Weebly.Editor.RPC.Billing.changeFreeTrialService(t.requiredUpgradeLevel).done(function(){t.trigger("dialog:close"),location.reload(),startWait()})}});return s}),_wAMD.define("editor/settings/ssl/module",["jquery","editor/app","editor/settings/model/SiteSettings","./SetupSslView","./PurchaseCertificateView","./TrialSslWarningView","editor/dialogs/TrialPremiumFeatureWarning"],function(e,t,i,n,o,s){t.module("settings.ssl",function(r){r.enable=function(){var r=e.Deferred(),a=Weebly.Editor.RPC.SiteSettings,l=i.findOrCreate();return l.fetch().done(function(){var e=l.toJSON();!e.custom_domain||e.is_reseller_site&&e.is_externally_hosted?a.enableSSL({}).done(function(e){if(e.success)r.resolve();else{var t=e.msg||_W.tl("Unable to setup ssl for this site");r.reject(t)}}):e.ssl_cert_exists?a.reactivateCertificate().done(function(e){if(e.success)r.resolve();else if(e.showIpError)t.settings.showIpWarning(new Backbone.Model({isSSL:!0}));else{var i=e.msg||_W.tl("There was an error attempting to reactivate your certificate");r.reject(i)}}):e.ssl_has_credit||e.is_reseller_site?t.showDialog(new n({enableDefer:r,isResellerSite:e.is_reseller_site})):e.has_trial?(t.showDialog(new s),r.reject()):t.showDialog(new o({enableDefer:r})),r.done(function(){l.fetch()})}),r.promise()},r.disableSSl=function(){var t=e.Deferred(),n=Weebly.Editor.RPC.SiteSettings;n.disableSSL().done(function(e){e.success?t.resolve():t.reject(e.msg)});var o=i.findOrCreate();return o.fetch(),t.promise()}})}),_wAMD.define("editor/settings/module",["jquery","backbone-all","editor/app","legacy/weebly_sliding_panel","./model/SiteSettings","./SettingsView","./general/GeneralSettingsView","./seo/SEOSettingsView","./commerce/CommerceSettingsView","./contributor/ContributorSettingsView","membership/editor/settings/MembershipSettingsView","./blog/BlogSettingsView","./IpAddressWarningView","./contributor/module","./ssl/module"],function(e,t,i,n,o,s,r,a,l,c,u,d,h){i.module("settings",function(p){var f={open:function(){f.isOpen()||(p.layout.render(),n.resize(),n.toggle("site-settings-container"))},close:function(){f.isOpen()&&n.toggle("site-settings-container")},toggle:function(){f.isOpen()?f.close():f.open()},isOpen:function(){return n.isOpened("site-settings-container")},general:function(){p.layout.mainRegion.show(new r)},seo:function(){p.layout.mainRegion.show(new a)},commerce:function(){p.layout.mainRegion.show(new l)},contributor:function(){p.layout.mainRegion.show(new c)},membership:function(){p.layout.mainRegion.show(new u)},blog:function(e){p.layout.mainRegion.show(new d({blog_id:e}))},store:function(e){i.vent.triggerCascade.call(this,"store:setting:general:list",e)}};p.vent=new t.Wreqr.EventAggregator,new t.Marionette.AppRouter({controller:f,appRoutes:{settings:"open","settings/general":"general","settings/seo":"seo","settings/commerce":"commerce","settings/contributor":"contributor","settings/blog":"blog","settings/store":"store"}}),p.addInitializer(function(){p.layout=new s,e("#site-store-container").append(p.layout.el)}),p.on("start",function(){Weebly.Permissions.allow_settings&&(i.vent.on({settings:f.open,"settings:close":f.close,"settings:general":f.general,"settings:seo":f.seo,"settings:commerce":f.commerce,"settings:contributor":f.contributor,"settings:membership":f.membership,"settings:blog":f.blog,"settings:store":f.store}),e("#weebly_tab_settings span").click(function(){i.vent.triggerCascade("settings:general")}))}),p.on("start",function(){i.vent.on("user:upgrade",function(){p.refreshSettings()})}),p.refreshSettings=function(){var e=o.findOrCreate();e.fetch()},p.showIpWarning=function(e){i.showDialog(new h({model:e}))}})}),_wAMD.define("editor/billing/models/SitePlan",["jquery","backbone-all"],function(e,t){var i=t.Model.extend({initialize:function(e){e&&this.set(this.massageData(e))},massageData:function(e){return{auto_renew:!!parseInt(e.auto_renew),deleted:!!parseInt(e.deleted),deleted_date:parseInt(e.deleted)?new Date(e.deleted_date):null,description:e.description,is_trial:!!parseInt(e.is_trial),level:e.level,renews_on:new Date(e.renews_on),start_date:new Date(e.start_date),status:e.status,site_id:e.site_id,user_service_id:e.user_service_id}},fetch:function(){var e=this,t=Weebly.Editor.RPC.Billing.getSitePlanDetails();return t.then(function(t){e.set(e.massageData(t))}),t},isExpiredBusinessPlan:function(){var e=["overdue","suspended","locked"].indexOf(this.get("status"))>=0,t=15==this.get("level"),i=this.get("deleted");return e&&t&&!i},cancelService:function(){var e=this,t=Weebly.Editor.RPC.Billing.removeSiteService(this.get("user_service_id"));return t.then(function(t){t.success&&e.set({deleted:!0,deleted_date:new Date})}),t}});return i}),_wAMD.define("tpl!editor/billing/expired-business-plan",[],function(){return"Your Business plan has expired. Please pay now or deactivate the Business plan features.\n\nIf you deactivate the Business plan:\n\n<ul>\n\n	{{#showProductMessage}}\n		<li>You will only be able to publish {{productCount}}</li>\n	{{/showProductMessage}}\n	\n	{{#showCartMessage}}\n		<li>Your shopping cart will be deactivated (Reactivate by switching to Stripe)</li>\n	{{/showCartMessage}}\n\n	<li>Your shopping cart URL will revert to checkout.weebly.com</li>\n	<li>Inventory management will be deactivated</li>\n	<li>Digital good sales will be deactivated</li>\n	<li>Shipping and tax calculators will be deactivated</li>\n	<li>Coupons will be deactivated</li>\n</ul>"}),_wAMD.define("editor/billing/views/BusinessPlanExpiredView",["jquery","backbone-all","mustache","editor/app","tpl!editor/billing/expired-business-plan"],function(e,t,i,n,o){var s=t.Marionette.CompositeView.extend({template:i.compile(o),dialog:{title:"Business Plan Expired",closeOnEscape:!1,buttons:[{group:"pull-right",buttons:[{text:_W.tl("Deactivate Service"),className:"btn-com deactivate"},{text:_W.tl("Pay Now"),className:"btn-com pay-now"}]}],dialogClass:"expired-plan-modal"},templateHelpers:{showCartMessage:function(){var e=Weebly.Commerce.BackboneBootstrap.StorefrontSettings.gateway;return[void 0,null,"none","Stripe"].indexOf(e)<0},showProductMessage:function(){var e=Weebly.Restrictions.isUnlimited("com_product_limit");return!e},productCount:function(){var e=Weebly.Restrictions.accessValue("com_product_limit");return e+" "+(1==e?"product":"products")}},events:{"click .deactivate":"deactivateService","click .pay-now":"payNow"},deactivateService:function(){this.model.cancelService().done(function(){window.location.reload(!0)})},payNow:function(){n.vent.trigger("billing:upgrade:window",{refer:"business_expired",restrictionType:"expired_plan",level:this.model.get("level"),type:"business",site_id:this.model.get("site_id")})}});return s}),_wAMD.define("tpl!editor/billing/expired-business-plan-contributor",[],function(){return"Your Business Plan is expired.  Please contact the site owner to resolve this issue."}),_wAMD.define("editor/billing/views/BusinessPlanExpiredContributorView",["jquery","backbone-all","mustache","editor/app","tpl!editor/billing/expired-business-plan-contributor"],function(e,t,i,n,o){var s=t.Marionette.CompositeView.extend({template:i.compile(o),dialog:{title:"Business Plan Expired",closeOnEscape:!1,buttons:[{group:"pull-right",buttons:[{text:_W.tl("Close"),className:"btn-com close"}]}],dialogClass:"expired-plan-modal"},events:{"click .close":"closeDialog"},closeDialog:function(){this.trigger("dialog:close")}});return s}),_wAMD.define("tpl!editor/billing/interrupted-publish",[],function(){return"{{message}}"}),_wAMD.define("editor/billing/views/InterruptedPublishView",["jquery","backbone-all","mustache","editor/app","tpl!editor/billing/interrupted-publish"],function(e,t,i,n,o){var s=t.Marionette.CompositeView.extend({template:i.compile(o),dialog:{closeOnEscape:!1,buttons:[{group:"pull-right",buttons:[{text:_W.tl("Upgrade to Business"),className:"btn-com pay-now"},{text:_W.tl("Close"),className:"btn-com close"}]}],dialogClass:"expired-plan-modal"},templateHelpers:function(){var e=this;return{message:e.limiterMessage}},initialize:function(e){var t=this,i=parseInt(e.limiterCount),n=parseInt(e.limiterLimit),o=i-n;switch(e.limiterType){case"member":t.dialog.title=_W.tl("Member Limit Exceeded"),t.limiterMessage=1!=n&&1!=o?_W.tl("You can't publish. Your plan only allows %i members and your site currently has %j. You must remove %k members or upgrade to the Business Plan in order to publish your site."):1!=n&&1==o?_W.tl("You can't publish. Your plan only allows %i members and your site currently has %j. You must remove 1 member or upgrade to the Business Plan in order to publish your site."):1==n&&1!=o?_W.tl("You can't publish. Your plan only allows 1 member and your site currently has %j. You must remove %k members or upgrade to the Business Plan in order to publish your site."):_W.tl("You can't publish. Your plan only allows 1 member and your site currently has %j. You must remove 1 member or upgrade to the Business Plan in order to publish your site.");break;case"product":default:t.dialog.title=_W.tl("Product Limit Exceeded"),t.limiterMessage=1!=n&&1!=o?_W.tl("You can't publish. Your plan only allows %i products and your site currently has %j. You must delete %k products or upgrade to the Business Plan in order to publish your site."):1!=n&&1==o?_W.tl("You can't publish. Your plan only allows %i products and your site currently has %j. You must delete 1 product or upgrade to the Business Plan in order to publish your site."):1==n&&1!=o?_W.tl("You can't publish. Your plan only allows 1 product and your site currently has %j. You must delete %k products or upgrade to the Business Plan in order to publish your site."):_W.tl("You can't publish. Your plan only allows 1 product and your site currently has %j. You must delete 1 member or upgrade to the Business Plan in order to publish your site.")}t.limiterMessage=t.limiterMessage.replace("%i",n).replace("%j",i).replace("%k",o)},events:{"click .close":"closeDialog","click .pay-now":"promptUpgrade"},closeDialog:function(){this.trigger("dialog:close")},promptUpgrade:function(){showPremiumPurchaseScreen({refer:"business_expired",level:this.model.get("level"),type:"business",site_id:this.model.get("site_id")})}});return s}),_wAMD.define("editor/billing/module",["jquery","underscore","editor/app","editor/billing/models/SitePlan","editor/billing/views/BusinessPlanExpiredView","editor/billing/views/BusinessPlanExpiredContributorView","editor/billing/views/InterruptedPublishView","commerce/editor/collection/Product","membership/editor/collection/Member"],function(e,t,i,n,o,s,r,a,l){i.module("billing",function(e,t,i,c,u,d){t.on("start",function(){e.listenTo(t.vent,"billing:upgrade:window",e.showBillingWindow),e.listenTo(t.vent,"user:upgrade",e.refreshPlanDetails),e.planDetails=new n(Weebly.Editor.BackboneBootstrap.Billing.SitePlanDetails),e.planDetails.isExpiredBusinessPlan()&&e.showExpiredDialog()}),e.refreshPlanDetails=function(){return e.planDetails.fetch()},e.showExpiredDialog=function(){var i;i=Weebly.Permissions.isContributor?new s({model:e.planDetails}):new o({model:e.planDetails}),t.showDialog(i)},e.canPublish=function(i){var n=a.count(),o=l.count();u.when(n,o).done(function(n,o){var s=n[0],a=o[0],l=parseInt(Weebly.Restrictions.accessValue("com_product_limit")),c=Weebly.Restrictions.isUnlimited("com_product_limit"),u=parseInt(Weebly.Restrictions.accessValue("membership_member_limit")),d=Weebly.Restrictions.isUnlimited("membership_member_limit");!c&&s>l?t.showDialog(new r({model:e.planDetails,limiterCount:s,limiterLimit:l,limiterType:"product"})):!d&&a>u?t.showDialog(new r({model:e.planDetails,limiterCount:a,limiterLimit:u,limiterType:"member"})):i()})},e.showBillingWindow=function(e){if(e=this.populateOptions(e),"reseller"==window.source)this.resellerPaymentRedirect(e);else if(Weebly.Restrictions.is_trial&&"no"!==Weebly.freeTrialTest){if("editor_top_bar"==e.refer)return showPremiumPurchaseScreen({siteID:currentSite,refer:e.refer,forceComparison:e.comparison}),!1;alertPremiumFeature(e.restrictionID,e.refer)}else Weebly.Restrictions.isClientSite&&Weebly.Permissions.package_edit?t.designer.showPlanChooser(function(e){Weebly.Restrictions.level=e,t.vent.trigger("plan:upgraded"),t.vent.trigger("user:upgrade")},e.level):this.hasUpgradePermission()&&this.openWeeblyBillingWindow(e)},e.openWeeblyBillingWindow=function(e){var t=this,i="/weebly/apps/purchasePage.php?s="+encodeURIComponent(configSiteName);d.each(e,function(e,t){"extraArgs"!==t&&(i+=e?"&"+t+"="+encodeURIComponent(e):"")}),i+=e.extraArgs?"&"+e.extraArgs:"";var n=window.open(t.buildSecureUrl(i),"weebly_billingPage"+Math.floor(10000001*Math.random()),"width="+PURCHASE_WINDOW_WIDTH+","+"height="+PURCHASE_WINDOW_HEIGHT+","+"toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes,dependent=yes");if(t.monitorBillingWindow(n),"function"==typeof window.ga){var o=e.refer?"?referrer="+e.refer:"";window.ga("send","pageview",{page:"/purchase-plan"+o,title:"Purchase Plan"})}},e.resellerPaymentRedirect=function(e){var t,i,n,o,s="",r="",a=[],l=Weebly.Reseller,c=Weebly.Restrictions,u="premium"===e.type;if("enterprise"===l.resellerType)n=l.contacts.support.email,o=d.isEmpty(n)?_W.tl("We're sorry. Your plan must be upgraded to complete this action. Please contact your administrator."):_W.tl("We're sorry. Your plan must be upgraded to complete this action. Please contact your administrator at %s.").replace("%s",'<a href="mailto:'+n+'">'+n+"</a>"),showWarning({title:_W.tl("Upgrade Required"),message:o},{okButton:!0});else{u&&(e.level=c.getNextLevel(c.level)),t=d.filter(c.resellerPackages,function(t){return e.custom&&"element"===e.restrictionType?d.contains(t.elements,parseInt(e.restrictionID)):t.plan>=e.level}),a=d.sortBy(t,function(e){return e.retail_price}),r=d.reduce(a,function(e,t,i){var n=i+1<a.length?",":"";return e+t.reseller_package_id+n},""),e.level>0&&!e.custom&&(s=c.levelToName(e.level)),i=l.upgradeUrl+"&plan="+encodeURIComponent(s),i+=u?"&upgrade_type&upgrade_id":"&upgrade_type="+encodeURIComponent(e.restrictionType)+"&upgrade_id="+encodeURIComponent(e.restrictionID),i+="&plan_ids="+encodeURIComponent(r);var h=window.open("/editor/apps/upgradeCloudSite.php?redirect="+encodeURIComponent(i),"wbillingPage"+Math.floor(10000001*Math.random()),"width="+PURCHASE_WINDOW_WIDTH+","+"height="+PURCHASE_WINDOW_HEIGHT+","+"toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes,dependent=yes");this.monitorBillingWindow(h,function(){document.location.reload()})}},e.populateOptions=function(e){e=e||{};var t=null;return e.level||!e.restrictionID||e.custom||(e.level=Weebly.Restrictions.requiredService(e.restrictionID),e.level==Weebly.Restrictions.freeLevel&&Weebly.Restrictions.isUpgradable(e.restrictionID)&&(e.level=Weebly.Restrictions.isUpgradable(e.restrictionID))),e.level||e.type||(e.type="premium"),e.forceComparison&&(e.comparison=1,e.forceComparison=""),void 0===e.siteID&&window.location.href.match(/\/userHome\.php(\?|#|$)/)&&(e.siteID=0),e.closeCallback&&(startWait(),t=e.closeCallback),e},e.monitorBillingWindow=function(e,t){var t=t||function(){loadLastTransaction()};e&&e.closed?t():setTimeout(function(){monitorBillingWindow(e,t)},200)},e.buildSecureUrl=function(e){var t=window.secureBase;return t&&t.length&&(e="https://"+t+"/weebly/setSession.php"+"?WeeblySession="+sid+"&redirect="+encodeURIComponent(e)),e},e.hasUpgradePermission=function(){return Weebly.Permissions&&Weebly.Permissions.isContributor?(showWarning(_W.tl("Please contact your site administrator to access this feature.")),!1):!0}})}),_wAMD.define("tpl!publish-window/content",[],function(){return'<div id="publish-window-inner-content"></div>'}),_wAMD.define("tpl!publish-window/apps-upsell",[],function(){return'<div class="domains">\n	<div class="upsell-container">\n		<div class="header">\n			<div class="primary">\n				<h1>Add Email with <span class="google-logo"></span> Apps</h1>\n			</div>\n			<div class="secondary">\n				<h3>15 day free trial - <span class="billing-notice">$3.75/user/mo (10% off)</span> - 30 <span class="desc">aliases/user</span> included</h3>\n			</div>\n		</div>\n		\n		<div class="signup">\n			<div class="signup-wrap-outer">\n				<div class="signup-wrap-inner">\n		\n					<div class="new-email">\n						<div class="choose">Choose an Email</div>\n						<input type="text" class="email-name"></input>\n						@\n						<div class="domain-selector">	\n							{{domain}}\n							<input type="hidden" class="domain-name" value="{{domain}}"></input>\n						</div>\n					</div>\n\n					<div class="new-password">\n						<div class="choose">Choose a Password</div>\n						<input type="password" class="password"></input>\n					</div>\n		\n					<div class="start-trial">\n						<div class="choose"></div>\n						<div class="action">\n							<button class="btn-flat btn-flat-primary start-trial-button">Start Your 15 Day Free Trial </button>\n							<p>Your credit card will not be charged</p>\n						</div>\n					</div>\n		\n				</div>\n			</div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("editor/publish/AppsUpsellView",["jquery","backbone-all","mustache","editor/app","tpl!publish-window/apps-upsell"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),ui:{domainSelector:"#domain-name-dropdown",aliasPopover:".desc",nameField:".email-name",billingNotice:".billing-notice"},events:{"click .start-trial-button":"startTrial"},startTrial:function(e){e.preventDefault();var t=this.$el.find(".email-name").val(),i=this.$el.find(".password").val(),o=this;if(t&&i){var s=this.$el.find(".start-trial-button").wLoadButton();s.wLoadButton("startWait");var r={email:t,password:i};this.$el.find(".password").removeClass("required"),this.$el.find(".email-name").removeClass("required"),Weebly.Editor.RPC.GoogleApps.startTrial(o.model.get("domain"),r).done(function(e){e.success?(s.wLoadButton("endWait"),(e.domain.accounts.length||e.domain.firstUserError||e.domain.pendingSetup)&&n.vent.trigger("publish:apps:trial-started",_.extend(e,{domain:o.model.get("domain"),email:t+"@"+o.model.get("domain")}))):n.vent.trigger("publish:apps:error",e)}).fail(function(e){n.vent.trigger("publish:apps:error",{message:e})})}else t?i||(this.$el.find(".password").addClass("required").focus(),this.$el.find(".email-name").removeClass("required")):(this.$el.find(".email-name").addClass("required").focus(),this.$el.find(".password").removeClass("required"))},onShow:function(){var e=this.$el.closest("#publishing-status");e.addClass("apps-upsell"),e.find(".publish-share-unshared").text(_W.tl("Share")),this.ui.aliasPopover.popover({placement:"bottom",trigger:"hover",content:_W.tl("An email alias is an alternative email address that points to your primary email address. For example, if you create jess@company.com as an email alias for jessica@company.com, email for both of these addresses will be delivered to the same Gmail inbox.")}),this.ui.billingNotice.popover({placement:"bottom",trigger:"hover",content:_W.tl("Billed annually at $45/user. This price is discounted 10% from Google.")})}});return s}),_wAMD.define("tpl!publish-window/apps-confirmation",[],function(){return'<div class="trial-confirmation-modal upsell-container">\n	<div class="apps-confirmation">\n		<div class="header-area">\n			<h1>Success! Your New Email Account is Ready</h1>\n		</div>\n		\n		<div class="footer-area">\n			Your free trial of Google Apps was successfully set up! <br>\n			Login to your new email address, {{email}}, by visiting <br>\n			http://mail.google.com/a/{{domain}}.\n		</div>\n		<button class="btn-flat btn-flat-primary inbox-link">Log in now</button>\n	</div>	\n</div>'}),_wAMD.define("editor/publish/AppsConfirmationView",["jquery","backbone-all","mustache","editor/app","tpl!publish-window/apps-confirmation"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),templateHelpers:{userEmail:function(){return userEmail}},events:{"click .inbox-link":"openInbox"},onShow:function(){var e=this.$el.closest("#exportText");
e.find(".publish-dialog-title").hide(),e.find(".publish-share").hide(),e.find("#publish-window-footer").css("border","none"),e.find("#publish-dialog-content").css("border","none")},openInbox:function(e){e.preventDefault(),window.open("https://accounts.google.com/AddSession?Email="+this.model.get("email")+"&continue=https%3A%2F%2Fadmin.google.com%2F"+this.model.get("domain")+"%2FAcceptTermsOfService%3Fcontinue%3Dhttps%3A%2F%2Fmail.google.com%2Fmail%2Fu%2F1","_blank")}});return s}),_wAMD.define("tpl!publish-window/apps-error",[],function(){return'<div class="domains">\n	<div class="upsell-container">\n		<div class="header error">\n			<div class="primary">\n				<h1>Oops...</h1>\n			</div>\n			<div class="secondary">\n				{{#isCreateUserError}}\n					<h3>{{#tl}}There was an error attempting to create the new user.{{/tl}}</h3>\n				{{/isCreateUserError}}\n\n				{{#isUncontrollableAccountError}}\n					<h3>{{#tl}}A new Trial could not be started because this domain already has a Google Apps account. This means that either you (or someone else who previously owned your domain name) previously created a Google Apps account directly through Google and that account still exists. You\'ll need to get control of it and this guide shows you how.{{/tl}}</h3>\n					<a href="http://hc.weebly.com/hc/en-us/articles/202013443-Regain-Access-to-a-Google-Apps-Account" target="_blank">http://hc.weebly.com/hc/en-us/articles/202013443-Regain-Access-to-a-Google-Apps-Account</a>\n				{{/isUncontrollableAccountError}}\n\n				{{#isUncontrollableAccountReactivateError}}\n					<h3>{{#tl}}We are unable to reactivate the Google Apps account for this domain. It\'s been just long enough since you cancelled for Google to set your account to what they call an "Appsless" state. Read here to see how to fix this issue.{{/tl}}</h3>\n					<a href="http://hc.weebly.com/hc/en-us/articles/201982006-Google-Apps-is-Appsless" target="_blank">http://hc.weebly.com/hc/en-us/articles/201982006-Google-Apps-is-Appsless</a>\n				{{/isUncontrollableAccountReactivateError}}\n\n				{{#isIndiaError}}\n					<h3>{{#tl}}We are currently unable to create Google Apps accounts for customers in India.{{/tl}}</h3>\n				{{/isIndiaError}}\n\n				{{#isDefaultError}}\n					<h3>{{errorMessage}}</h3>\n				{{/isDefaultError}}\n			</div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("editor/publish/AppsErrorView",["jquery","backbone-all","mustache","editor/app","tpl!publish-window/apps-error"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({template:i.compile(o),initialize:function(e){this.response=e.response},templateHelpers:function(){var e=this;return{isARecordError:function(){return"a-record"==e.getErrorType()},isCreateUserError:function(){return"create-user"==e.getErrorType()},isUncontrollableAccountError:function(){return"uncontrollableAccount"==e.getErrorType()},isUncontrollableAccountReactivateError:function(){return"uncontrollableAccountReactivate"==e.getErrorType()},isIndiaError:function(){return"india-subscription"==e.getErrorType()},isDefaultError:function(){return"default"==e.getErrorType()},errorMessage:function(){return e.getErrorMessage()}}},getErrorMessage:function(){return this.response&&this.response.message?this.response.message:_W.tl("There was an error processing your request.")},getErrorType:function(){if(console.log(this.response),this.response&&this.response.errorType)return this.response.errorType;var e=this.getErrorMessage();switch(e){case"Domain is not connected to a Weebly site":return"a-record";case"Create user api failure":return"create-user";case"Failed creating subscription":return"IN"==Weebly.Editor.BackboneBootstrap.GoogleApps.ipCountry?"india-subscription":"default";default:return"default"}}});return s}),_wAMD.define("editor/publish/PublishWindowView",["jquery","backbone-all","mustache","editor/app","tpl!publish-window/content","./AppsUpsellView","./AppsConfirmationView","./AppsErrorView"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.Region.extend({show:function(){t.Marionette.Region.prototype.show.apply(this,arguments),Weebly.AllDialogs["publishing-status"]&&Weebly.AllDialogs["publishing-status"].positionDialog()}}),c=t.Marionette.Layout.extend({template:i.compile(o),el:"#publish-dialog-content",regions:{contentRegion:{selector:"#publish-window-inner-content",regionType:l}},initialize:function(){this.listenTo(n.vent,{"publish:apps:trial-started":function(e){this.contentRegion.show(new r({model:new t.Model(e)}))},"publish:apps:error":function(e){this.contentRegion.show(new a({response:e}))}})},onRender:function(){this.model.get("appsPromotion")&&this.contentRegion.show(new s({model:this.model}))}});return c}),_wAMD.define("editor/publish/module",["editor/app","./PublishWindowView"],function(e,t){e.module("publish",function(e,i,n,o,s){i.on("start",function(){e.listenTo(i.vent,"publish:success",e.publishSuccess)}),e.publishSuccess=function(){var i=s("#publish-dialog-content").data("publish")||{};e.layout=new t({model:new n.Model(i)}),e.layout.render()}})}),_wAMD.define("tpl!designer/plan-chooser/main",[],function(){return'<form id="designer-plan-form">\n	<div class="designer-plan-option" data-plan="{{proLevel}}">\n		<div class="designer-plan-price">\n			{{^paysByInvoice}}${{proPrice}}/<span class="designer-plan-term">{{#tl}}month{{/tl}}</span>{{/paysByInvoice}}\n		</div>\n		<input type="radio" name="plan" value="{{proLevel}}" {{#proSelected}}checked{{/proSelected}} /> \n		<span class="designer-plan-type">Pro</span>\n	</div>\n	<div class="designer-plan-option" data-plan="{{businessLevel}}">\n		<div class="designer-plan-price">\n			{{^paysByInvoice}}${{businessPrice}}/<span class="designer-plan-term">{{#tl}}month{{/tl}}</span>{{/paysByInvoice}}\n		</div>\n		<input type="radio" name="plan" value="{{businessLevel}}" {{#businessSelected}}checked{{/businessSelected}} /> \n		<span class="designer-plan-type">Business</span>\n	</div>\n</form>\n{{^paysByInvoice}}<a href="/designer_pricing.php" target="_blank">Compare Plans</a>{{/paysByInvoice}}\n{{#showDowngradeWarning}}\n	<div class="designer-downgrade-warning">\n		{{#tl}}<b>Warning:</b> downgrading your plan means you will no longer have access to business plan features and these features will be hidden from your clients. Business plan feature include:{{/tl}}\n		<ul class="feature-list">\n			<li>{{#tl}}SSL Security{{/tl}}</li>\n			<li>{{#tl}}Unlimited Products{{/tl}}</li>\n			<li>{{#tl}}No Transaction Fees{{/tl}}</li>\n			<li>{{#tl}}Integrated Shopping Cart on Your Domain{{/tl}}</li>\n			<li>{{#tl}}Digital Goods{{/tl}}</li>\n			<li>{{#tl}}Inventory Management{{/tl}}</li>\n			<li>{{#tl}}Shipping and Tax Calculators{{/tl}}</li>\n			<li>{{#tl}}Coupon Codes{{/tl}}</li>\n		</ul>\n	</div>\n{{/showDowngradeWarning}}\n<div class="designer-plan-description">\n	{{#paysByInvoice}}\n		{{#tl}}Selecting Business gives your site SSL security, unlimited members, and custom eCommerce features. Business fees will be reflected on your monthly invoice. Contact <a href="mailto:bd@weebly.com">bd@weebly.com</a> with questions.{{/tl}}\n	{{/paysByInvoice}}\n	{{^paysByInvoice}}\n		{{#showProrate}}{{#tl}}If you publish today a prorated amount of ${{proratePrice}} for this site will be added to your next bill scheduled to charge on {{nextBillingDate}}.{{/tl}}{{/showProrate}}\n	{{/paysByInvoice}}\n</div>\n<div class="designer-plan-footer">\n	<a href="#" class="btn btn-primary btn-large">{{#tl}}Choose{{/tl}}</a>\n</div>'}),_wAMD.define("designer/plan-chooser/ChooserView",["jquery","backbone-all","mustache","util/ui/wLoadButton","util/ui/wInput","moment","tpl!editor/loading","tpl!designer/plan-chooser/main"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.ItemView.extend({template:i.compile(r),proLevel:Weebly.Restrictions.proLevel,businessLevel:Weebly.Restrictions.businessLevel,initialize:function(e){var t=this;e=e||{},e.user_id||console.error("Missing user id"),e.site_id||console.error("Missing site id"),e.plan&&(t.plan=e.plan),t.userId=e.user_id,t.siteId=e.site_id,t.site={},t.loadData()},templateHelpers:function(){var e=this;return{proLevel:function(){return e.proLevel},businessLevel:function(){return e.businessLevel},proPrice:function(){return e.getProPrice()},businessPrice:function(){return e.getBusinessPrice()},proSelected:function(){return e.plan==e.proLevel},businessSelected:function(){return e.plan==e.businessLevel},planSelected:function(){return!!e.plan},showProrate:function(){return!e.site.isLive&&e.plan},proratePrice:function(){return e.getProratePrice()},nextBillingDate:function(){return s().add(1,"month").format("MMMM 01, YYYY")},showDowngradeWarning:function(){return"pro"==e.plan&&(!e.site.currentPlan||e.site.currentPlan==e.businessLevel)},paysByInvoice:function(){return"invoice"==e.paymentType}}},dialog:{width:697,title:_W.tl("Choose a Plan"),dialogClass:"designer-plan-chooser",cancelAll:!0},onRender:function(){this.$el.find("input[type=radio]").wRadio()},loadData:function(){var e=this;e.getRpc().Designer.loadPlanChooser(e.userId,e.siteId).done(function(t){e.prices=t.prices,e.site.isLive=t.isLive,e.site.currentPlan=t.currentPlan,e.paymentType=t.paymentType,!e.plan&&e.site.isLive&&t.currentPlan&&(e.plan=t.currentPlan),e.template=i.compile(a),e.render()}).fail(function(t){e.displayFailure(t,e)})},displayFailure:function(e,t){var i=t||this;i.template=function(){return e},i.render()},events:{"click .designer-plan-option":"setPlan","click .btn-primary":"changeSitePlan"},setPlan:function(t){var i=this;t.preventDefault();var n=e(t.currentTarget).data("plan");(n==i.proLevel||n==i.businessLevel)&&(i.plan=n),i.render()},changeSitePlan:function(e){var t=this,i=t.$el.find(".btn-primary"),n=t.getSaveFunction();return e.preventDefault(),i.wLoadButton(),t.plan?(i.wLoadButton("startWait"),n(t.userId,t.siteId,t.plan).done(function(){i.wLoadButton("endWait"),t.trigger("dialog:close"),t.options.afterChoice&&t.options.afterChoice(t.plan)}).fail(function(e){t.displayFailure(e,t)}),void 0):(alert(_W.tl("Please choose a plan")),!1)},getProratePrice:function(){var e=this,t=s().daysInMonth()-s().date()+1,i=e.plan==e.proLevel?e.getProPrice():e.getBusinessPrice(),n=t/s().daysInMonth()*i;return n.toFixed(2)},getProPrice:function(){var e=this;return e.prices[e.proLevel]||0},getBusinessPrice:function(){var e=this;return e.prices[e.businessLevel]||0},getSaveFunction:function(){var e=this;return e.options.saveFunc?e.options.saveFunc:e.getRpc().Designer.updateSitePackage},getRpc:function(){return Weebly&&Weebly.Editor&&Weebly.Editor.RPC?Weebly.Editor.RPC:Weebly&&Weebly.Userhome&&Weebly.Userhome.RPC?Weebly.Userhome.RPC:void 0}});return l}),_wAMD.define("editor/designer/module",["jquery","underscore","editor/app","designer/plan-chooser/ChooserView"],function(e,t,i,n){i.module("designer",function(e,t){e.showPlanChooser=function(e,i){var o={user_id:userID,site_id:currentSite};e&&(o.afterChoice=e),i&&(o.plan=i);var s=new n(o);t.showDialog(s,"classic")}})}),_wAMD.define("editor/theme-editor/model/Theme",["backbone-all","jquery"],function(e,t){var i=e.Model.extend({initialize:function(){this.set({user:"undefined"!=typeof userID?userID:"",site:"undefined"!=typeof currentSite?currentSite:"",theme:"undefined"!=typeof currentTheme?currentTheme:"",themeFilesToRevert:{},updatedThemeFiles:{},overridingPartials:{},partialsToDelete:[],assetsToDelete:[],foldersToDelete:[],isClientSite:isClientSite,codeState:{}})},sync:function(e,i,n){var o,s=this;switch(n=n||{},e){case"create":case"read":o=Weebly.Editor.RPC.Theme.getThemeFiles(currentTheme,Weebly.mobile.isMobileView,currentThemeColor),o.done(function(e){e.themeName=e.meta.customThemeTitle||e.meta.customThemeName||"MyTheme";var n=e.meta.disable_partials;n&&delete e.directory.partials,i.set(e),e.meta.customThemeID||Weebly.Editor.RPC.Theme.setupNewCustomTheme(Object.toJSON(e.directory.layouts),Object.toJSON(e.meta.icons),e.directory.assets["main_style.css"],currentTheme,Weebly.mobile.isMobileView).done(function(e){var e=JSON.parse(e);s.attributes.meta.customThemeID=e.custom_theme_id,s.attributes.meta.customThemeName=e.theme_name,s.attributes.meta.isNew=!0,s.attributes.meta.theme_path=s.attributes.meta.theme_path+e.custom_theme_id,n&&delete s.attributes.directory.partials,t("#te-export").attr("href","/weebly/exportThemeZip.php?id="+e.custom_theme_id)})});break;case"update":case"delete":default:console.warn(e+" not defined for this model",i)}return o}});return i}),_wAMD.define("tpl!editor/theme-editor/main",[],function(){return'<div id="theme-editor" class="w-ui theme-editor">\n	<div class="te-cover"></div>\n	<div id="te-head" class="te-head w-ui-topbar">\n		{{ ! theme-editor topbar }}\n	</div>\n\n	<div class="main">\n		<div id="te-sidebar" class="te-sidebar">\n			{{! sidebar template here }}\n		</div>\n		<div id="drag-vertical" class="drag-vertical">\n			<span class="drag-resize">\n			</span>\n		</div>\n		<div class="wrapper">\n			<div id="te-code" class="te-code">\n				{{! code editor template here }}\n			</div>\n\n			<div id="te-fileinfo">\n				{{! file info template here }}\n			</div>\n\n			<div id="te-preview" class="te-preview">\n				{{! preview theme template here }}\n			</div>\n		</div>\n	</div>\n</div>'}),_wAMD.define("tpl!editor/theme-editor/topbar",[],function(){return'<div class="w-logo-top">\n	<div class="w-logo {{#isClientSite}}alt{{/isClientSite}}">{{#tl}}Code Editor{{/tl}}</div>\n</div>\n<div class="te-code-colors">\n	<div class="color-box">\n		<span id="te-code-dark" class="te-code-dark"></span>\n	</div>\n	<div class="color-box">\n		<span id="te-code-light" class="te-code-light"></span>\n	</div>\n</div>\n<div class="te-code-search">\n	<a id="code-search"><span class="w-icon w-icon-magnify"></span></a>\n</div>\n<div class="te-docs">\n	<a id="te-docs" class="btn-docs" title="{{#esc_attr}}{{#tl}}Documentation{{/tl}}{{/esc_attr}}" href="#">{{#tl}}Docs{{/tl}}</a>\n</div>\n<div class="te-auto-refresh">\n	<input type="checkbox" id="toggle-auto-refresh" checked="true"/>\n	<label for="toggle-auto-refresh">{{#tl}}Auto Preview{{/tl}}</label>\n	<a class="te-manual-refresh" id="manual-refresh">{{#tl}}Refresh{{/tl}}</a>\n</div>\n<div class="te-code-title-edit">\n	<span id="te-code-title"></span>\n	<a id="te-code-rename"><span class="w-icon w-icon-edit"></span></a>\n	<a id="te-code-delete"><span class="w-icon w-icon-trash"></span></a>\n</div>\n\n<div class="buttons">\n	<a class="te-button btn-cancel">{{#tl}}Cancel{{/tl}}</a>\n	<a class="te-button btn-save">{{#tl}}Save{{/tl}}</a>\n</div>\n<div id="te-namer" class="w-ui">\n	<div id="te-namer-inner">\n		<label>{{#tl}}Name your theme{{/tl}}:</label>\n		<input id="te-namer-input" type="text" class="text" />\n		<span id="te-namer-save" class="btn btn-info">\n			<span class="bi">{{#tl}}Save{{/tl}}</span>\n		</span>\n	</div>\n</div>'}),_wAMD.define("tpl!editor/theme-editor/sidebar",[],function(){return'<div id="te-title-subhead" class="te-subhead">\n	<span id="te-theme-title" class="title">{{themeName}}</span>\n</div>\n<div id="te-file-browser" class="te-file-browser">\n\n</div>\n\n{{> editor/theme-editor/directory-settings}}\n\n<div id="te-export-theme-footer" class="w-ui">\n	<a id="te-export" class="btn-export-theme">\n		{{#tl}}Export Theme{{/tl}}\n		<span class="icon w-icon-upload-cloud"></span>\n	</a>\n</div>'}),_wAMD.define("tpl!editor/theme-editor/code",[],function(){return'<div class="inner te-code-editor-dark">\n</div>'}),_wAMD.define("tpl!editor/theme-editor/preview-controls",[],function(){return'	<div id="te-popout-button" class="btn-preview-control btn-popout" title="{{#esc_attr}}{{#tl}}Popout{{/tl}}{{/esc_attr}}"></div>\n	<div id="te-documentation-button" class="btn-preview-control btn-documentation" title="{{#esc_attr}}{{#tl}}Documentation{{/tl}}{{/esc_attr}}">{{#tl}}Docs{{/tl}}</div>\n	<div id="te-preview-button" class="btn-preview-control btn-preview" title="{{#esc_attr}}{{#tl}}Preview{{/tl}}{{/esc_attr}}">{{#tl}}Preview{{/tl}}</div>\n'}),_wAMD.define("tpl!editor/theme-editor/caution-dialog",[],function(){return'<div id="cautionDialogContent" class="orange-error weebly-text w-ui" style="display: block;">\n	<div class="orange-error-heading">\n		<div class="orange-error-title">{{#tl}}Warning{{/tl}}</div>\n	</div>\n	<div class="orange-error-text">{{#tl}}If you change a file name extension, it may become unusable.{{/tl}}\n		<div class="orange-error-buttons" style="margin-top:2em">\n			<button id="cautionDialogConfirm" style="padding:.5em 1em;cursor:pointer" class="btn btn-default">{{#tl}}OK{{/tl}}</button>\n			<button id="cautionDialogCancel" style="padding:.5em 1em;cursor:pointer" class="btn btn-primary">{{#tl}}Cancel{{/tl}}</button>\n		</div>\n	</div>\n</div>'}),_wAMD.define("tpl!editor/theme-editor/preview",[],function(){return'<div id="drag-horizontal" class="drag-horizontal">\n	<span class="drag-resize">\n	</span>\n</div>\n<div class="content" id="preview-content">\n	<div class="te-preview-loading"></div>\n	<iframe id="preview-iframe"></iframe>\n</div>\n\n<div class="preview-controls">\n	<button id="te-popout-button" class="btn-preview-control btn-popout" title="{{#esc_attr}}{{#tl}}Popout{{/tl}}{{/esc_attr}}"></button>\n</div>\n'}),_wAMD.define("tpl!editor/theme-editor/file-info",[],function(){return'<div class="te-subhead" id="te-fileinfo-subhead">\n	<span class="title">{{#tl}}File Info{{/tl}}</span>\n</div>\n<div id="te-fileinfo-content">\n\n	<table cellspacing="0" class="te-fileinfo-table">\n		<tr>\n			<th class="te-fileinfo-th">{{#tl}}Name{{/tl}}</th>\n			<td class="te-fileinfo-td">\n				<span id="te-file-name-text"></span>\n				<a id="te-file-rename" title="{{#esc_attr}}{{#tl}}Edit file name{{/tl}}{{/esc_attr}}">\n					<span class="w-icon w-icon-edit"></span>\n				</a>\n				<a id="te-file-delete" title="{{#esc_attr}}{{#tl}}Delete file{{/tl}}{{/esc_attr}}">\n					<span class="w-icon w-icon-trash"></span>\n				</a>\n			</td>\n			<td id="te-file-name-input" style=\'display: none;\'>\n				<input type=\'text\'>\n				<button id="te-save-file-name">Save</button>\n				<button id="te-cancel-edit-file">Cancel</button>\n			</td>\n		</tr>\n		<tr id="te-fileinfo-dimensions-row">\n			<th class="te-fileinfo-th">{{#tl}}Dimensions{{/tl}}</th>\n			<td class="te-fileinfo-td" id="te-fileinfo-dimensions"></td>\n		</tr>\n	</table>\n\n	<div id="te-fileinfo-image">\n		<label>{{#tl}}Image{{/tl}}</label>\n		<div id="te-fileinfo-image-tag"></div>\n	</div>\n\n</div>'}),_wAMD.define("tpl!editor/theme-editor/file-directory",[],function(){return'<span class="name">\n	<span class="toggle"></span>\n	<span class="node-name" data-name="{{nodeName}}" data-path="{{path}}">{{getTranslatedNodeName}}</span>\n	<span class="settings">\n		<span class="w-icon-add"></span>\n		<span class="w-icon-cog"></span>\n	</span>\n</span>\n<ul class=\'file-directory\' data-path="{{path}}"></ul>'}),_wAMD.define("tpl!editor/theme-editor/directory-settings",[],function(){return'<ul id="directory-settings" class="directory-settings" style="display: none;">\n	<li data-folder="true" class="te-file-upload">\n		<a href="#" data-action="upload">\n			<span class="layout-text">{{#tl}}Upload Header Type(s)&hellip;{{/tl}}</span>\n			<span class="file-text">{{#tl}}Upload File(s)&hellip;{{/tl}}</span>\n		</a>\n	</li>\n\n	<li data-folder="true" class="file">\n		<a href="#" data-action="newfile">\n			<span class="layout-text">{{#tl}}New Header Type{{/tl}}</span>\n			<span class="file-text">{{#tl}}New File{{/tl}}</span>\n		</a>\n	</li>\n	<li data-folder="true" class="folder"><a href="#" data-action="newfolder">{{#tl}}New Folder{{/tl}}</a></li>\n	<li data-folder="true" data-file="true" class="sidebar-rename"><a href="#" data-action="rename">{{#tl}}Rename{{/tl}}</a></li>\n	<li data-folder="true" data-file="true" class="sidebar-delete"><a href="#" data-action="delete">{{#tl}}Delete{{/tl}}</a></li>\n</ul>'}),_wAMD.define("tpl!editor/theme-editor/blank-layout",[],function(){return"<!DOCTYPE html>\n<html>\n<head>\n</head>\n<body>\n\n{title}\n\n{menu}\n\n{content}\n\n{footer}\n\n</body>\n</html>"}),_wAMD.define("editor/theme-editor/templates",["require","tpl!editor/theme-editor/main","tpl!editor/theme-editor/topbar","tpl!editor/theme-editor/sidebar","tpl!editor/theme-editor/code","tpl!editor/theme-editor/preview-controls","tpl!editor/theme-editor/caution-dialog","tpl!editor/theme-editor/preview","tpl!editor/theme-editor/file-info","tpl!editor/theme-editor/file-directory","tpl!editor/theme-editor/directory-settings","tpl!editor/theme-editor/blank-layout"],function(e){return{mainTemplate:e("tpl!editor/theme-editor/main"),topbar:e("tpl!editor/theme-editor/topbar"),sidebar:e("tpl!editor/theme-editor/sidebar"),codeEditor:e("tpl!editor/theme-editor/code"),previewControls:e("tpl!editor/theme-editor/preview-controls"),cautionDialog:e("tpl!editor/theme-editor/caution-dialog"),preview:e("tpl!editor/theme-editor/preview"),fileInfo:e("tpl!editor/theme-editor/file-info"),fileDirectory:e("tpl!editor/theme-editor/file-directory"),directorySettings:e("tpl!editor/theme-editor/directory-settings"),blankLayout:e("tpl!editor/theme-editor/blank-layout")}}),_wAMD.define("editor/theme-editor/view/TopbarView",["jquery","backbone-all","mustache","editor/app","editor/theme-editor/templates"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({className:"inner",template:i.compile(o.topbar),ui:{themeNamer:"#te-namer"},events:{"click #te-code-light":"setCodeEditorColor","click #te-code-dark":"setCodeEditorColor","click .btn-save":"saveCustomTheme","click .btn-cancel":"cancel","click #te-namer-save":"saveThemeName","click #code-search":"codeSearch","click #te-docs":"showDocumentation","click #toggle-auto-refresh":"toggleAutoRefresh","click #manual-refresh":"refreshPreview"},initialize:function(){this.model.set("autoRefresh",!0)},onRender:function(){this.ui.themeNamer.hide()},setCodeEditorColor:function(t){e(t.currentTarget).hasClass("te-code-light")?codeEditor.setOption("theme","default"):codeEditor.setOption("theme","monokai")},setAutoRefresh:function(t){this.model.set("autoRefresh",t),t?(n.vent.trigger("themeEditor:refreshPreview"),e(".te-manual-refresh").css("display","none")):e(".te-manual-refresh").css("display","inline-block")},toggleAutoRefresh:function(e){this.setAutoRefresh(e.currentTarget.checked)},refreshPreview:function(){n.vent.trigger("themeEditor:refreshPreview")},codeSearch:function(e){e.preventDefault(),codeEditor.execCommand("find")},cancel:function(){Weebly.Editor.RPC.Theme.revertAssetsOnCancel(this.model.get("meta").customThemeID,this.model.get("themeFilesToRevert")),n.vent.trigger("themeEditor:close")},saveCustomTheme:function(){var e=this.model.get("meta");e.isNew&&"WEEBLY__UNSAVED"==e.customThemeName?(this.ui.themeNamer.show(),this.saveAfterNamed=!0):this.saveThemeRequest()},saveThemeRequest:function(){var e=this,t=this.model.attributes;Weebly.Editor.RPC.Theme.saveCustomTheme(t.meta.customThemeID,Object.toJSON(t.directory.layouts),t.meta.icons,t.directory.assets["main_style.css"],t.meta.customThemeName,t.meta.isNew,currentTheme,Weebly.mobile.isMobileView,t.overridingPartials,t.partialsToDelete,t.updatedThemeFiles,t.assetsToDelete,t.foldersToDelete).done(function(i){var i=JSON.parse(i);e.model.attributes.meta.customThemeID=i.custom_theme_id,e.model.attributes.meta.customThemeName=i.theme_name;var o=e.makeCustomThemeName(i.theme_name,i.custom_theme_id);t.meta.isNew&&(t.meta.isNew=!1),Weebly.themeCache.clear(o),require("editor/build/themes/rendering").currentStyleNum=Math.floor(10000000001*Math.random()),window.changeTheme(o,currentThemeColor),n.vent.trigger("themeEditor:close")})},saveThemeName:function(){var t=(e("#te-namer-input").val()||"").strip();t&&(this.model.set("themeName",t),this.model.attributes.meta.customThemeName=t),this.saveAfterNamed&&t&&(this.saveThemeRequest(),this.ui.themeNamer.hide()),this.saveAfterNamed=!1},makeCustomThemeName:function(e,t){return"custom_"+e+"_"+t},showDocumentation:function(e){e.preventDefault(),window.open("/editor/codeEditorDocs.php","theme_doc_popout","status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,width=1100,height=750")}});return s}),_wAMD.define("util/base64",[],function(){return window.atob&&window.btoa?{decode:function(e){return window.atob(e)},encode:function(e){return window.btoa(e)}}:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,o,s,r,a,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),i=e.charCodeAt(c++),n=e.charCodeAt(c++),o=t>>2,s=(3&t)<<4|i>>4,r=(15&i)<<2|n>>6,a=63&n,isNaN(i)?r=a=64:isNaN(n)&&(a=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(r)+this._keyStr.charAt(a);return l},decode:function(e){var t,i,n,o,s,r,a,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),r=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),t=o<<2|s>>4,i=(15&s)<<4|r>>2,n=(3&r)<<6|a,l+=String.fromCharCode(t),64!=r&&(l+=String.fromCharCode(i)),64!=a&&(l+=String.fromCharCode(n));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(192|n>>6),t+=String.fromCharCode(128|63&n)):(t+=String.fromCharCode(224|n>>12),t+=String.fromCharCode(128|63&n>>6),t+=String.fromCharCode(128|63&n))}return t},_utf8_decode:function(e){for(var t="",i=0,n=c1=c2=0;i<e.length;)n=e.charCodeAt(i),128>n?(t+=String.fromCharCode(n),i++):n>191&&224>n?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return t}}}),_wAMD.define("editor/theme-editor/model/DirectoryNode",["jquery","backbone-all","underscore","util/base64"],function(e,t,i,n){var o=t.Model.extend({initialize:function(){var e=this.get("nodes");if(e)var e=this.constructNodes(e);else if(this.get("layouts")){this.topLevel=!0,this.set("path","");var e=this.constructNodes(null,!0)}e&&(this.nodes=new DirectoryNodeCollection(e),this.unset("nodes"))},constructNodes:function(e,t){var o,s,r,a=e?e:this.attributes,l=this,e=[],c=a.assets?Object.keys(a):Object.keys(a).sort(),u=c.indexOf("main_style.css");return u>-1&&c.splice(0,0,c.splice(u,1)[0]),i.each(c,function(i){Array.isArray(a[i])&&0==a[i].length&&(a[i]={}),"object"==typeof a[i]&&null!==a[i]&&i.indexOf(".tpl")<0?e.push({nodeName:i,nodes:a[i],topLevelFolder:t?!0:!1,folder:t?!1:!0,path:l.get("path")+i+"/",id:l.setNodeID(l.get("path")+i+"//"),type:a[i].type}):i&&"type"!==i&&(s=i.indexOf(".tpl")<0?!1:!0,o=i.indexOf(".html")<0?!1:!0,r=s?a[i].contents:a[i],!r||s||o||"main_style.css"===i||(r=n.decode(r)),"path"!==i&&e.push({nodeName:i,contents:r,type:s?a[i].type:null,file:!0,path:l.get("path")+i,id:l.setNodeID(l.get("path")+i)}))}),e},setNodeID:function(e){return this.createNodeID(e)},createNodeID:function(e){return e=e.replace(/\//g,":"),e.replace(/[^a-z0-9\-_:\.]|^[^a-z]+/gi,"")}});return o}),_wAMD.define("editor/theme-editor/collection/DirectoryNode",["backbone-all","../model/DirectoryNode"],function(e,t){return window.DirectoryNodeCollection=e.Collection.extend({model:t}),DirectoryNodeCollection}),_wAMD.define("tpl!editor/theme-editor/theme-editor-upload",[],function(){return'<div class="te-file-upload-placeholder"></div>'}),_wAMD.define("editor/theme-editor/view/ThemeEditorUploadView",["mustache","components/uploader-view/UploaderView","editor/app","../model/DirectoryNode","tpl!editor/theme-editor/theme-editor-upload"],function(e,t,i,n,o){var s=t.prototype,r=t.extend({template:e.compile(o),initialize:function(e){e.uploadOptions={forceSWFU:!1,target:".te-file-upload-placeholder",type:"all",multipleFiles:!0,url:"/weebly/themeFileUpload.php?customThemeID="+e.themeModel.get("meta").customThemeID+"&uploadPath="+encodeURIComponent(e.themeModel.get("uploadPath"))+"&cookies="+escape(document.cookie)},s.initialize.apply(this,arguments)},onUploadSuccess:function(e){var t="/assets/",n="";if("Success"===e.status)e.file.match(".html")&&(t="/layouts/"),e.upload_path&&(n=e.upload_path),i.vent.trigger("themeEditor:create",t+n+e.file,e.contents,!0);else if("Virus"===e.status){var o=require("editor/dialogs/UploadVirusError");i.showDialog(new o)}else"error"===e.status},onRender:function(){s.browser.xhr?s.onRender.apply(this,arguments):s.onShow.apply(this,arguments)}});return r}),_wAMD.define("editor/theme-editor/view/FileDirectoryView",["jquery","backbone-all","mustache","editor/app","editor/theme-editor/templates","../model/DirectoryNode","./ThemeEditorUploadView","util/base64","jquery-ui/draggable","jquery-ui/sortable"],function(e,t,i,n,o,s,r,a){var l=t.Marionette.CompositeView.extend({template:i.compile(o.fileDirectory),tagName:function(){return this.model.topLevel?"div":"li"},id:function(){return this.model.get("id")},className:function(){return this.model.get("topLevelFolder")?"sidebar-top-folder expanded":this.model.get("file")?"sidebar-file":this.model.get("folder")?"sidebar-folder collapsed":void 0},itemViewContainer:"ul",itemViewOptions:function(){return{themeModel:this.themeModel}},templateHelpers:function(){var e=this;return{getTranslatedNodeName:function(){switch(e.model.get("nodeName")){case"layouts":return _W.tl("Header Type");case"partials":return _W.tl("Partials");case"assets":return _W.tl("Assets");default:return e.model.get("nodeName")}}}},events:{"click li.sidebar-folder":"folderClick","click li.sidebar-file":"fileClick","click li.newItem":"rename","click li .settings":"showSettingsMenu","click [data-action=upload]":"uploadFile","click [data-action=newfile]":"createFile","click [data-action=newfolder]":"createFolder","click [data-action=rename]":"rename","click [data-action=delete]":"delete","blur .node-name":"modifyNodeName"},modelEvents:{change:"render"},initialize:function(e){this.collection=this.model.nodes,this.themeModel=e.themeModel},onRender:function(){var t=this.model.get("path");if(_.isUndefined(this.collection)&&this.$("ul:first").remove(),this.model.get("topLevelFolder")||this.model.get("folder")){var i="connected-"+this.model.get("path").split("/")[0];this.$(".file-directory").addClass(i),this.$(".file-directory").sortable({connectWith:"."+i,containment:"#te-sidebar",axis:"y",cancel:".unsortable",placeholder:"sortable-placeholder",receive:function(t,i){var o=e(t.target).first(".file-directory"),s=i.item,r=s.data("path"),a=o.data("path").slice(0,-1),l=r.split("/").slice(0,-1).join("/"),c=s.data("path").split("/")[0];n.vent.trigger("themeEditor:moveFile",s.data("fileName"),a,l,c)}})}if(this.model.get("file"))this.$el.data("contents",this.model.get("contents")).data("path",t).data("fileName",t.substr(t.lastIndexOf("/")+1)),1==Object.keys(this.themeModel.attributes.directory.layouts).length&&this.$el.addClass("no-delete"),"default"==this.model.get("type")&&this.$el.addClass("unsortable").find(".settings").remove(),"main_style.css"==this.$el.text().strip()&&this.$el.addClass("static").addClass("unsortable").attr("data-default",!0).find(".settings").remove();else{var o=this.model.get("path").split("/")[0];"partials"===o&&"default"==this.model.get("type")&&(this.$el.addClass("no-delete"),this.$el.addClass("no-rename")),this.model.get("topLevelFolder")&&(this.$el.addClass("no-rename"),this.$el.addClass("no-delete")),"layouts"===this.model.get("nodeName")&&(this.$el.addClass("no-folder"),this.$el.addClass("layouts"))}this.$el.data("path",this.model.get("path"))},openNode:function(t){this.removeSettingMenu(),e("#te-file-browser li").removeClass("active error"),t.parents("ul").slideDown().end().parents("li").removeClass("collapsed").addClass("expanded").end().addClass("active")},folderClick:function(t){t.stopPropagation(),"w-upload-input"!=t.target.className&&(e(t.currentTarget.children).children().hasClass("ui-draggable-dragging")||(this.openNode(e(t.currentTarget)),n.vent.trigger("themeEditor:toggleFolder",t)))},fileClick:function(t){t.stopPropagation(),this.openNode(e(t.currentTarget)),this.activateFile(e(t.currentTarget))
},activateFile:function(e){var t=e.data("contents");this.themeModel.set("activeFilePath",e.data("path")),null!==t?(n.vent.trigger("themeEditor:hideFileInfoView"),this.updateCodeMirror(e)):n.vent.trigger("themeEditor:showFileInfoView",e)},showSettingsMenu:function(t){t.stopPropagation();var i=e(t.currentTarget).closest("li"),n=e("#te-file-browser"),o=e("#directory-settings").clone(!0),s=i.data("path"),a=e("<div>",{id:"te-add-file-uploader-placeholder"});o.removeAttr("id"),o.find(".te-add-file-uploader").append(a),0===n.find("ul.directory-settings").length?(this.setupSettingsMenu(o,i,n),this.attachSettingsMenu(o,i),i.hasClass("file")&&this.activateFile(i)):i.children(".directory-settings").length>0?(this.removeSettingMenu(),this.themeModel.unset("uploadPath")):(this.removeSettingMenu(),this.themeModel.unset("uploadPath"),this.setupSettingsMenu(o,i,n),this.attachSettingsMenu(o,i),i.hasClass("file")&&this.activateFile(i)),this.themeModel.set("uploadPath",s);var l=new r({themeModel:this.themeModel,model:this.model});l.render(),this.$el.find("li.te-file-upload").append(l.el)},attachSettingsMenu:function(t,i){if(t.width(i.width()-2).show(),i.find("> .name").first().after(t),!this.settingsMenuIsOnScreen(t)){var n=this.getOverlap(t),o=e("#te-file-browser .inner"),s=e("#te-sidebar .w-scrollbar-v .w-scrollbar-inner .w-scrollbar-handle");o.animate({scrollTop:o.scrollTop()+n+15}),s.animate({scrollTop:o.scrollTop()+n+15})}},setupSettingsMenu:function(t,i){e("#te-file-browser li").removeClass("active error"),i.addClass("active"),i.is(".sidebar-top-folder, .sidebar-folder")&&t.find("li:not([data-folder])").remove(),i.is(".sidebar-file")&&t.find("li:not([data-file])").remove(),i.is(".no-rename")&&t.find("li.sidebar-rename").remove(),i.is(".no-delete")&&t.find("li.sidebar-delete").remove(),i.is(".no-folder")&&t.find("li.folder").remove(),i.is(".no-file")&&t.find("li.file").remove()},settingsMenuIsOnScreen:function(t){var i=t[0],n=i.getBoundingClientRect(),o=e("#te-export-theme-footer").outerHeight(),s=window.innerWidth||e(window).width(),r=window.innerHeight||e(window).height();return n.top>=0&&n.left>=0&&n.bottom<=r-o&&n.right<=s},getOverlap:function(t){var i=window.innerHeight||e(window).height(),n=e("#te-export-theme-footer").outerHeight(),o=t[0].getBoundingClientRect(),s=o.bottom-(i-n);return s>0?s:0},removeSettingMenu:function(){e("#te-file-browser ul.directory-settings").remove()},updateCodeMirror:function(e){var t=e.data("path"),i=t.substr(t.lastIndexOf("/")+1),n=this.themeModel.get("codeState");codeEditor.setValue(e.data("contents")),codeEditor.currentFile=i,codeEditor.currentFilePath=t,this.themeModel.set("activeFilePath",codeEditor.currentFilePath),this.themeModel.set("$activeNode",e);var o="htmlmixed";-1!=i.indexOf(".css")?o="css":-1!=i.indexOf(".js")&&(o="javascript"),codeEditor.setOption("mode",o),t in n&&(codeEditor.getScrollerElement().scrollTop=n[t])},uploadFile:function(e){e.preventDefault(),e.stopPropagation()},createFile:function(t){t.preventDefault(),t.stopPropagation();var i,s,r=this,l="untitled";this.model.get("nodeName").match("layouts")?(l+=".html",i=o.blankLayout,s="layouts"):this.model.get("path").match("partials")?(l+=".tpl",i="{{! blank partial }}",s="partials"):(i="// Place Contents Here",s="assets",this.themeModel.get("updatedThemeFiles")[r.model.get("path")+l]=i,i=a.encode("// Place Contents Here")),this.collection.where({nodeName:l}).length&&(l=this.incrementNodeName(l)),n.vent.trigger("themeEditor:create","/"+r.model.get("path")+l,i,!0),e('li[id="'+this.model.createNodeID(r.model.get("path")+l+'"]')).find(".settings").click().end().find('[data-action="rename"]').click()},createFolder:function(t){t.preventDefault(),t.stopPropagation();var i="untitled";this.collection.where({nodeName:i}).length&&(i=this.incrementNodeName(i));var o=this.model.get("path")+i+"/",s=this.model.createNodeID(o+"/");n.vent.trigger("themeEditor:create","/"+o,{},!0),e('li[id="'+s+'"]').find(".settings").click(),e('li[id="'+s+'"]').find('[data-action="rename"]').click()},"delete":function(e){e.preventDefault(),e.stopPropagation();var t=this.model.get("path").split("/");"layouts"==t.first()?n.vent.trigger("themeEditor:delete",t.last(),t.first(),null,!0):"partials"==t.first()?n.vent.trigger("themeEditor:delete",t.last(),"partials",this.model.get("path"),!0):"assets"==t.first()&&n.vent.trigger("themeEditor:delete",t.last(),t.first(),this.model.get("path"),!0)},rename:function(t){t&&(t.preventDefault(),t.stopPropagation());var i=this,o=this.$el;e("#te-file-browser li").removeClass("active"),this.removeSettingMenu(),o.addClass("active editing").on("keydown",".editable-text",function(e){i.modifyNodeName(e)}),n.vent.trigger("themeEditor:selectText",o.find(".node-name").first())},modifyNodeName:function(t){var s,r,a=t.keyCode||t.charCode,l=this,c=this.model.get("nodeName"),u=this.model.get("path"),d=this.model,h=new RegExp(d.get("nodeName"),"g");if(13==a||"focusout"===t.type){if(t.preventDefault(),s=t.currentTarget.innerText||t.currentTarget.textContent,s=n.request("themeEditor:cleanName",s),r=d.get("path").replace(h,s),d.get("folder")){if(this.model.collection.where({path:r}).length)return n.vent.trigger("themeEditor:selectText",this.$el.find(".node-name")),void 0;n.vent.trigger("themeEditor:update","/"+u,"/"+r,!0)}if(d.get("file")){var l=this,s=l.cleanNodeName(s),r=d.get("path").replace(h,s),p=function(){s===c?n.vent.trigger("themeEditor:rerenderSidebar",c):l.model.collection.where({path:r}).length?(n.vent.trigger("themeEditor:selectText",l.$el.find(".node-name")),l.$el.addClass("error")):n.vent.trigger("themeEditor:update","/"+u,"/"+r,!0)};if(this.fileIsChangingExtensionWithName(c,s)){if(e(body).find("#cautionDialogContent").length<=0){var f=i.render(o.cautionDialog);e(body).append(f)}this.dialog||(this.dialog=new Weebly.Dialog("cautionDialogContent",{inner_class:"weebly-dialog-inner-orange",blackoutID:"theme-editor-blackout",modal:1,showClose:!1,zIndex:9999,onClose:function(){e("#cautionDialogConfirm").off("click"),e("#cautionDialogCancel").off("click")}})),this.dialog.open(),e("#cautionDialogConfirm").one("click",function(){p(),l.dialog.close()}),e("#cautionDialogCancel").one("click",function(){n.vent.trigger("themeEditor:rerenderSidebar",c),l.dialog.close()})}else p()}}},fileIsChangingExtensionWithName:function(e,t){var i,n,o=e.indexOf("."),s=t.indexOf(".");return-1===o?!1:-1===s?!0:(n=t.slice(s,t.length),i=e.slice(o,e.length),n!==i?!0:!1)},cleanNodeName:function(e){return this.model.get("file")&&(this.model.get("path").match("layouts")?"html"!==e.split(".").last()&&(e=e.replace(".","")+".html"):this.model.get("path").match("partials")&&"tpl"!==e.split(".").last()&&(e=e.replace(".","")+".tpl")),e},incrementNodeName:function(e){var t,i=e.split(".").length>1?!0:!1,n=i?".":"",o="";return i?(e=e.split("."),o=e[1]):e=[e],t=e[0].match(/\d+$/),e[0]=e[0].split(/\d+$/)[0],e=t?e[0]+(parseInt(t[0],10)+1)+n+o:e[0]+1+n+o,this.collection.where({nodeName:e}).length&&(e=this.incrementNodeName(e)),e}}),c=t.Marionette.CollectionView.extend({className:"inner",itemView:l,itemViewOptions:function(){return{themeModel:this.model}},events:{"click .sidebar-top-folder":"folderClick"},folderClick:function(t){t.stopPropagation(),"w-upload-input"!=t.target.className&&(e(t.currentTarget.children).children().hasClass("ui-draggable-dragging")||(e("#te-file-browser").find("ul.directory-settings").remove().end().find("li").removeClass("active error"),e(t.currentTarget).addClass("active"),n.vent.trigger("themeEditor:toggleFolder",t)))}});return c}),_wAMD.define("editor/theme-editor/view/SidebarView",["jquery","backbone-all","mustache","editor/theme-editor/templates","editor/theme-editor/model/DirectoryNode","editor/theme-editor/collection/DirectoryNode","editor/theme-editor/view/FileDirectoryView","editor/app"],function(e,t,i,n,o,s,r,a){i.compilePartial("editor/theme-editor/directory-settings",n.directorySettings);var l=t.Marionette.ItemView.extend({className:"inner",template:i.compile(n.sidebar),ui:{themeName:".te-subhead .title",nav:"#te-file-browser"},events:{"dblclick .te-subhead .title":"rename","keydown @ui.themeName":"onRenameKeydown"},initialize:function(){this.listenTo(a.vent,{"themeEditor:nodeActivity":this.scrollUpdate})},onRender:function(){var t=this,i=new s(this.model.get("directory")),n=new r({collection:i,model:this.model});this.model.get("meta").customThemeID&&this.$el.find("#te-export").attr("href","/weebly/exportThemeZip.php?id="+this.model.get("meta").customThemeID),t.ui.nav.html(n.el),n.render(),this.$el.find(".inner").weeblyScroll();var o=this;e(window).on("resize.theme-editor-sidebar",function(){o.scrollUpdate()})},scrollUpdate:function(){this.$el.find(".inner").weeblyScroll("update")},rename:function(t){t.preventDefault(),t.stopPropagation();var i=this,n=e("#te-title-subhead"),o=e("#te-theme-title");n.addClass("editing"),o.addClass("editable-text").attr("contentEditable",!0).focus(),e(document).one("click",function(e){e.preventDefault(),o.hasClass("editable-text")&&i.saveThemeName(o,n)})},onRenameKeydown:function(t){var i=e("#te-title-subhead"),n=e("#te-theme-title"),o=t.keyCode||t.charCode;13==o&&(e(this).off(),t.preventDefault(),this.saveThemeName(n,i))},saveThemeName:function(e,t){var i=e.text();i=i.replace(/[^a-zA-Z0-9]/g,""),a.vent.trigger("themeEditor:renameTheme",i),e.removeClass("editable-text").attr("contentEditable",!1),t.removeClass("editing")},onClose:function(){e(window).off("resize.theme-editor-sidebar")}});return l}),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return _wAMD.define("codemirror/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){function e(i,n){if(!(this instanceof e))return new e(i,n);this.options=n=n?bs(n):{},bs(zr,n,!1),p(n);var o=n.value;"string"==typeof o&&(o=new na(o,n.mode)),this.doc=o;var s=this.display=new t(i,o);s.wrapper.CodeMirror=this,c(this),a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!ur&&xi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ds,keySeq:null},Zs&&11>er&&setTimeout(ys(Ci,this,!0),20),Ti(this),Ps(),Qt(this),this.curOp.forceUpdate=!0,Ro(this,o),n.autofocus&&!ur||Ts()==s.input?setTimeout(ys(Ki,this),20):Qi(this);for(var r in Or)Or.hasOwnProperty(r)&&Or[r](this,n[r],Fr);y(this);for(var l=0;l<Lr.length;++l)Lr[l](this);ei(this)}function t(e,t){var i=this,n=i.input=Cs("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");tr?n.style.width="1000px":n.setAttribute("wrap","off"),cr&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),i.inputDiv=Cs("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=Cs("div",[Cs("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=Cs("div",[Cs("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=Cs("div",null,"CodeMirror-scrollbar-filler"),i.gutterFiller=Cs("div",null,"CodeMirror-gutter-filler"),i.lineDiv=Cs("div",null,"CodeMirror-code"),i.selectionDiv=Cs("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Cs("div",null,"CodeMirror-cursors"),i.measure=Cs("div",null,"CodeMirror-measure"),i.lineMeasure=Cs("div",null,"CodeMirror-measure"),i.lineSpace=Cs("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Cs("div",[Cs("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Cs("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=Cs("div",null,null,"position: absolute; height: "+pa+"px; width: 1px;"),i.gutters=Cs("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Cs("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Cs("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Zs&&8>er&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),cr&&(n.style.width="0px"),tr||(i.scroller.draggable=!0),rr&&(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"),Zs&&8>er&&(i.scrollbarH.style.minHeight=i.scrollbarV.style.minWidth="18px"),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.view=[],i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new ds,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,_t(e,100),e.state.modeGen++,e.curOp&&pi(e)}function o(e){e.options.lineWrapping?(Da(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(Aa(e.display.wrapper,"CodeMirror-wrap"),h(e)),r(e),pi(e),Lt(e),setTimeout(function(){g(e)},100)}function s(e){var t=Jt(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/Kt(e.display)-3);return function(o){if(no(e.doc,o))return 0;var s=0;if(o.widgets)for(var r=0;r<o.widgets.length;r++)o.widgets[r].height&&(s+=o.widgets[r].height);return i?s+(Math.ceil(o.text.length/n)||1)*t:s+t}}function r(e){var t=e.doc,i=s(e);t.iter(function(e){var t=i(e);t!=e.height&&Wo(e,t)})}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Lt(e)}function l(e){c(e),pi(e),setTimeout(function(){b(e)},20)}function c(e){var t=e.display.gutters,i=e.options.gutters;xs(t);for(var n=0;n<i.length;++n){var o=i[n],s=t.appendChild(Cs("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function d(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=Jn(n);){var o=t.find(0,!0);n=o.from.line,i+=o.from.ch-o.to.ch}for(n=e;t=Kn(n);){var o=t.find(0,!0);i-=n.text.length-o.from.ch,n=o.to.line,i+=n.text.length-o.to.ch}return i}function h(e){var t=e.display,i=e.doc;t.maxLine=zo(i,i.first),t.maxLineLength=d(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=d(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function p(e){var t=ms(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function f(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<pa-3}function m(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:f(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+St(e.display))}}function g(e,t){t||(t=m(e));var i=e.display,n=zs(i.measure),o=t.docHeight+pa,s=t.scrollWidth>t.clientWidth;s&&t.scrollWidth<=t.clientWidth+1&&n>0&&!t.hScrollbarTakesSpace&&(s=!1);var r=o>t.clientHeight;if(r?(i.scrollbarV.style.display="block",i.scrollbarV.style.bottom=s?n+"px":"0",i.scrollbarV.firstChild.style.height=Math.max(0,o-t.clientHeight+(t.barHeight||i.scrollbarV.clientHeight))+"px"):(i.scrollbarV.style.display="",i.scrollbarV.firstChild.style.height="0"),s?(i.scrollbarH.style.display="block",i.scrollbarH.style.right=r?n+"px":"0",i.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||i.scrollbarH.clientWidth)+"px"):(i.scrollbarH.style.display="",i.scrollbarH.firstChild.style.width="0"),s&&r?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=i.scrollbarFiller.style.width=n+"px"):i.scrollbarFiller.style.display="",s&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n+"px",i.gutterFiller.style.width=i.gutters.offsetWidth+"px"):i.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===n){var a=dr&&!ar?"12px":"18px";i.scrollbarV.style.minWidth=i.scrollbarH.style.minHeight=a;var l=function(t){ns(t)!=i.scrollbarV&&ns(t)!=i.scrollbarH&&li(e,Pi)(t)};ca(i.scrollbarV,"mousedown",l),ca(i.scrollbarH,"mousedown",l)}e.state.checkedOverlayScrollbar=!0}}function v(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-kt(e));var o=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,s=No(t,n),r=No(t,o);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;if(s>a)return{from:a,to:No(t,Lo(zo(t,a))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=r)return{from:No(t,Lo(zo(t,l))-e.wrapper.clientHeight),to:l}}return{from:s,to:Math.max(r,s+1)}}function b(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=_(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,s=n+"px",r=0;r<i.length;r++)if(!i[r].hidden){e.options.fixedGutter&&i[r].gutter&&(i[r].gutter.style.left=s);var a=i[r].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=n+o+"px")}}function y(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=w(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var o=n.measure.appendChild(Cs("div",[Cs("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=o.firstChild.offsetWidth,r=o.offsetWidth-s;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(s,n.lineGutter.offsetWidth-r),n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",u(e),!0}return!1}function w(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function _(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function M(e,t,i){var n=e.display;this.viewport=t,this.visible=v(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=i,this.dims=E(e)}function C(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return mi(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&0==yi(e))return!1;y(e)&&(mi(e),t.dims=E(e));var o=n.first+n.size,s=Math.max(t.visible.from-e.options.viewportMargin,n.first),r=Math.min(o,t.visible.to+e.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(n.first,i.viewFrom)),i.viewTo>r&&i.viewTo-r<20&&(r=Math.min(o,i.viewTo)),vr&&(s=to(e.doc,s),r=io(e.doc,r));var a=s!=i.viewFrom||r!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;bi(e,s,r),i.viewOffset=Lo(zo(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=yi(e);if(!a&&0==l&&!t.force&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Ts();return l>4&&(i.lineDiv.style.display="none"),P(e,i.updateLineNumbers,t.dims),l>4&&(i.lineDiv.style.display=""),c&&Ts()!=c&&c.offsetHeight&&c.focus(),xs(i.cursorDiv),xs(i.selectionDiv),a&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,_t(e,400)),i.updateLineNumbers=null,!0}function x(e,t){for(var i=t.force,n=t.viewport,o=!0;;o=!1){if(o&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)i=!0;else if(i=!1,n&&null!=n.top&&(n={top:Math.min(e.doc.height+St(e.display)-pa-e.display.scroller.clientHeight,n.top)}),t.visible=v(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!C(e,t))break;A(e);var s=m(e);vt(e),S(e,s),g(e,s)}ss(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&ss(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function k(e,t){var i=new M(e,t);if(C(e,i)){A(e),x(e,i);var n=m(e);vt(e),S(e,n),g(e,n)}}function S(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-pa)+"px"}function T(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function A(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var o,s=t.view[n];if(!s.hidden){if(Zs&&8>er){var r=s.node.offsetTop+s.node.offsetHeight;o=r-i,i=r}else{var a=s.node.getBoundingClientRect();o=a.bottom-a.top}var l=s.line.height-o;if(2>o&&(o=Jt(t)),(l>.001||-.001>l)&&(Wo(s.line,o),D(s.line),s.rest))for(var c=0;c<s.rest.length;c++)D(s.rest[c])}}}function D(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function E(e){for(var t=e.display,i={},n={},o=t.gutters.clientLeft,s=t.gutters.firstChild,r=0;s;s=s.nextSibling,++r)i[e.options.gutters[r]]=s.offsetLeft+s.clientLeft+o,n[e.options.gutters[r]]=s.clientWidth;return{fixedPos:_(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function P(e,t,i){function n(t){var i=t.nextSibling;return tr&&dr&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var o=e.display,s=e.options.lineNumbers,r=o.lineDiv,a=r.firstChild,l=o.view,c=o.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node){for(;a!=d.node;)a=n(a);var h=s&&null!=t&&c>=t&&d.lineNumber;d.changes&&(ms(d.changes,"gutter")>-1&&(h=!1),R(e,d,c,i)),h&&(xs(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(w(e.options,c)))),a=d.node.nextSibling}else{var p=B(e,d,c,i);r.insertBefore(p,a)}c+=d.size}for(;a;)a=n(a)}function R(e,t,i,n){for(var o=0;o<t.changes.length;o++){var s=t.changes[o];"text"==s?W(e,t):"gutter"==s?N(e,t,i,n):"class"==s?I(t):"widget"==s&&L(t,n)}t.changes=null}function z(e){return e.node==e.text&&(e.node=Cs("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Zs&&8>er&&(e.node.style.zIndex=2)),e.node}function O(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=z(e);e.background=i.insertBefore(Cs("div",null,t),i.firstChild)}}function F(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):wo(e,t)}function W(e,t){var i=t.text.className,n=F(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,I(t)):i&&(t.text.className=i)}function I(e){O(e),e.line.wrapClass?z(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function N(e,t,i,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=z(t),r=t.gutter=s.insertBefore(Cs("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),t.text);if(t.line.gutterClass&&(r.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=r.appendChild(Cs("div",w(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=o.hasOwnProperty(l)&&o[l];c&&r.appendChild(Cs("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function L(e,t){e.alignable&&(e.alignable=null);for(var i,n=e.node.firstChild;n;n=i){var i=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}H(e,t)}function B(e,t,i,n){var o=F(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),I(t),N(e,t,i,n),H(t,n),t.node}function H(e,t){if(q(e.line,e,t,!0),e.rest)for(var i=0;i<e.rest.length;i++)q(e.rest[i],e,t,!1)}function q(e,t,i,n){if(e.widgets)for(var o=z(t),s=0,r=e.widgets;s<r.length;++s){var a=r[s],l=Cs("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),V(a,l,t,i),n&&a.above?o.insertBefore(l,t.gutter||t.text):o.appendChild(l),ss(a,"redraw")}}function V(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var o=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(o-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function j(e){return br(e.line,e.ch)}function $(e,t){return yr(e,t)<0?t:e}function U(e,t){return yr(e,t)<0?e:t}function Y(e,t){this.ranges=e,this.primIndex=t}function G(e,t){this.anchor=e,this.head=t}function X(e,t){var i=e[t];e.sort(function(e,t){return yr(e.from(),t.from())}),t=ms(e,i);for(var n=1;n<e.length;n++){var o=e[n],s=e[n-1];if(yr(s.to(),o.from())>=0){var r=U(s.from(),o.from()),a=$(s.to(),o.to()),l=s.empty()?o.from()==o.head:s.from()==s.head;t>=n&&--t,e.splice(--n,2,new G(l?a:r,l?r:a))}}return new Y(e,t)}function J(e,t){return new Y([new G(e,t||e)],0)}function K(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Q(e,t){if(t.line<e.first)return br(e.first,0);var i=e.first+e.size-1;return t.line>i?br(i,zo(e,i).text.length):Z(t,zo(e,t.line).text.length)}function Z(e,t){var i=e.ch;return null==i||i>t?br(e.line,t):0>i?br(e.line,0):e}function et(e,t){return t>=e.first&&t<e.first+e.size}function tt(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=Q(e,t[n]);return i}function it(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var o=t.anchor;if(n){var s=yr(i,o)<0;s!=yr(n,o)<0?(o=i,i=n):s!=yr(i,n)<0&&(i=n)}return new G(o,i)}return new G(n||i,i)}function nt(e,t,i,n){ct(e,new Y([it(e,e.sel.primary(),t,i)],0),n)}function ot(e,t,i){for(var n=[],o=0;o<e.sel.ranges.length;o++)n[o]=it(e,e.sel.ranges[o],t[o],null);var s=X(n,e.sel.primIndex);ct(e,s,i)}function st(e,t,i,n){var o=e.sel.ranges.slice(0);o[t]=i,ct(e,X(o,e.sel.primIndex),n)}function rt(e,t,i,n){ct(e,J(t,i),n)}function at(e,t){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new G(Q(e,t[i].anchor),Q(e,t[i].head))}};return da(e,"beforeSelectionChange",e,i),e.cm&&da(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?X(i.ranges,i.ranges.length-1):t}function lt(e,t,i){var n=e.history.done,o=fs(n);o&&o.ranges?(n[n.length-1]=t,ut(e,t,i)):ct(e,t,i)}function ct(e,t,i){ut(e,t,i),Yo(e,e.sel,e.cm?e.cm.curOp.id:0/0,i)}function ut(e,t,i){(cs(e,"beforeSelectionChange")||e.cm&&cs(e.cm,"beforeSelectionChange"))&&(t=at(e,t));var n=i&&i.bias||(yr(t.primary().head,e.sel.primary().head)<0?-1:1);dt(e,pt(e,t,n,!0)),i&&i.scroll===!1||!e.cm||yn(e.cm)}function dt(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ls(e.cm)),ss(e,"cursorActivity",e))}function ht(e){dt(e,pt(e,e.sel,null,!1),ma)}function pt(e,t,i,n){for(var o,s=0;s<t.ranges.length;s++){var r=t.ranges[s],a=ft(e,r.anchor,i,n),l=ft(e,r.head,i,n);(o||a!=r.anchor||l!=r.head)&&(o||(o=t.ranges.slice(0,s)),o[s]=new G(a,l))}return o?X(o,t.primIndex):t}function ft(e,t,i,n){var o=!1,s=t,r=i||1;e.cantEdit=!1;e:for(;;){var a=zo(e,s.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=s.ch:c.from<s.ch))&&(null==c.to||(u.inclusiveRight?c.to>=s.ch:c.to>s.ch))){if(n&&(da(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find(0>r?-1:1);if(0==yr(d,s)&&(d.ch+=r,d.ch<0?d=d.line>e.first?Q(e,br(d.line-1)):null:d.ch>a.text.length&&(d=d.line<e.first+e.size-1?br(d.line+1,0):null),!d)){if(o)return n?(e.cantEdit=!0,br(e.first,0)):ft(e,t,i,!0);o=!0,d=t,r=-r}s=d;continue e}}return s}}function mt(e){for(var t=e.display,i=e.doc,n={},o=n.cursors=document.createDocumentFragment(),s=n.selection=document.createDocumentFragment(),r=0;r<i.sel.ranges.length;r++){var a=i.sel.ranges[r],l=a.empty();(l||e.options.showCursorWhenSelecting)&&bt(e,a,o),l||yt(e,a,s)}if(e.options.moveInputWithCursor){var c=$t(e,i.sel.primary().head,"div"),u=t.wrapper.getBoundingClientRect(),d=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,c.top+d.top-u.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,c.left+d.left-u.left))}return n}function gt(e,t){ks(e.display.cursorDiv,t.cursors),ks(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function vt(e){gt(e,mt(e))}function bt(e,t,i){var n=$t(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),o=i.appendChild(Cs("div"," ","CodeMirror-cursor"));if(o.style.left=n.left+"px",o.style.top=n.top+"px",o.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var s=i.appendChild(Cs("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=n.other.left+"px",s.style.top=n.other.top+"px",s.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function yt(e,t,i){function n(e,t,i,n){0>t&&(t=0),t=Math.round(t),n=Math.round(n),a.appendChild(Cs("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?u-e:i)+"px; height: "+(n-t)+"px"))}function o(t,i,o){function s(i,n){return jt(e,br(t,i),"div",d,n)}var a,l,d=zo(r,t),h=d.text.length;return Is(Bo(d),i||0,null==o?h:o,function(e,t,r){var d,p,f,m=s(e,"left");if(e==t)d=m,p=f=m.left;else{if(d=s(t-1,"right"),"rtl"==r){var g=m;m=d,d=g}p=m.left,f=d.right}null==i&&0==e&&(p=c),d.top-m.top>3&&(n(p,m.top,null,m.bottom),p=c,m.bottom<d.top&&n(p,m.bottom,null,d.top)),null==o&&t==h&&(f=u),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),c+1>p&&(p=c),n(p,d.top,f-p,d.bottom)}),{start:a,end:l}}var s=e.display,r=e.doc,a=document.createDocumentFragment(),l=Tt(e.display),c=l.left,u=s.lineSpace.offsetWidth-l.right,d=t.from(),h=t.to();if(d.line==h.line)o(d.line,d.ch,h.ch);else{var p=zo(r,d.line),f=zo(r,h.line),m=Zn(p)==Zn(f),g=o(d.line,d.ch,m?p.text.length+1:null).end,v=o(h.line,m?0:null,h.ch).start;m&&(g.top<v.top-2?(n(g.right,g.top,null,g.bottom),n(c,v.top,v.left,v.bottom)):n(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&n(c,g.bottom,null,v.top)}i.appendChild(a)}function wt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function _t(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,ys(Mt,e))}function Mt(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,n=Hr(t.mode,xt(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(t.frontier>=e.display.viewFrom){var r=s.styles,a=go(e,s,n,!0);
s.styles=a.styles;var l=s.styleClasses,c=a.classes;c?s.styleClasses=c:l&&(s.styleClasses=null);for(var u=!r||r.length!=s.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),d=0;!u&&d<r.length;++d)u=r[d]!=s.styles[d];u&&o.push(t.frontier),s.stateAfter=Hr(t.mode,n)}else bo(e,s.text,n),s.stateAfter=0==t.frontier%5?Hr(t.mode,n):null;return++t.frontier,+new Date>i?(_t(e,e.options.workDelay),!0):void 0}),o.length&&ai(e,function(){for(var t=0;t<o.length;t++)fi(e,o[t],"text")})}}function Ct(e,t,i){for(var n,o,s=e.doc,r=i?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>r;--a){if(a<=s.first)return s.first;var l=zo(s,a-1);if(l.stateAfter&&(!i||a<=s.frontier))return a;var c=ba(l.text,null,e.options.tabSize);(null==o||n>c)&&(o=a-1,n=c)}return o}function xt(e,t,i){var n=e.doc,o=e.display;if(!n.mode.startState)return!0;var s=Ct(e,t,i),r=s>n.first&&zo(n,s-1).stateAfter;return r=r?Hr(n.mode,r):qr(n.mode),n.iter(s,t,function(i){bo(e,i.text,r);var a=s==t-1||0==s%5||s>=o.viewFrom&&s<o.viewTo;i.stateAfter=a?Hr(n.mode,r):null,++s}),i&&(n.frontier=s),r}function kt(e){return e.lineSpace.offsetTop}function St(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Tt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=ks(e.measure,Cs("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function At(e,t,i){var n=e.options.lineWrapping,o=n&&e.display.scroller.clientWidth;if(!t.measure.heights||n&&t.measure.width!=o){var s=t.measure.heights=[];if(n){t.measure.width=o;for(var r=t.text.firstChild.getClientRects(),a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-i.top)}}s.push(i.bottom-i.top)}}function Dt(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(Io(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Et(e,t){t=Zn(t);var i=Io(t),n=e.display.externalMeasured=new di(e.doc,t,i);n.lineN=i;var o=n.built=wo(e,n);return n.text=o.pre,ks(e.display.lineMeasure,o.pre),n}function Pt(e,t,i,n){return Ot(e,zt(e,t),i,n)}function Rt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[gi(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function zt(e,t){var i=Io(t),n=Rt(e,i);n&&!n.text?n=null:n&&n.changes&&R(e,n,i,E(e)),n||(n=Et(e,t));var o=Dt(n,t,i);return{line:t,view:n,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Ot(e,t,i,n,o){t.before&&(i=-1);var s,r=i+(n||"");return t.cache.hasOwnProperty(r)?s=t.cache[r]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(At(e,t.view,t.rect),t.hasHeights=!0),s=Ft(e,t,i,n),s.bogus||(t.cache[r]=s)),{left:s.left,right:s.right,top:o?s.rtop:s.top,bottom:o?s.rbottom:s.bottom}}function Ft(e,t,i,n){for(var o,s,r,a,l=t.map,c=0;c<l.length;c+=3){var u=l[c],d=l[c+1];if(u>i?(s=0,r=1,a="left"):d>i?(s=i-u,r=s+1):(c==l.length-3||i==d&&l[c+3]>i)&&(r=d-u,s=r-1,i>=d&&(a="right")),null!=s){if(o=l[c+2],u==d&&n==(o.insertLeft?"left":"right")&&(a=n),"left"==n&&0==s)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)o=l[(c-=3)+2],a="left";if("right"==n&&s==d-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)o=l[(c+=3)+2],a="right";break}}var h;if(3==o.nodeType){for(var c=0;4>c;c++){for(;s&&Ms(t.line.text.charAt(u+s));)--s;for(;d>u+r&&Ms(t.line.text.charAt(u+r));)++r;if(Zs&&9>er&&0==s&&r==d-u)h=o.parentNode.getBoundingClientRect();else if(Zs&&e.options.lineWrapping){var p=_a(o,s,r).getClientRects();h=p.length?p["right"==n?p.length-1:0]:Cr}else h=_a(o,s,r).getBoundingClientRect()||Cr;if(h.left||h.right||0==s)break;r=s,s-=1,a="right"}Zs&&11>er&&(h=Wt(e.display.measure,h))}else{s>0&&(a=n="right");var p;h=e.options.lineWrapping&&(p=o.getClientRects()).length>1?p["right"==n?p.length-1:0]:o.getBoundingClientRect()}if(Zs&&9>er&&!s&&(!h||!h.left&&!h.right)){var f=o.parentNode.getClientRects()[0];h=f?{left:f.left,right:f.left+Kt(e.display),top:f.top,bottom:f.bottom}:Cr}for(var m=h.top-t.rect.top,g=h.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,c=0;c<b.length-1&&!(v<b[c]);c++);var y=c?b[c-1]:0,w=b[c],_={left:("right"==a?h.right:h.left)-t.rect.left,right:("left"==a?h.left:h.right)-t.rect.left,top:y,bottom:w};return h.left||h.right||(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=m,_.rbottom=g),_}function Wt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ws(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}function It(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Nt(e){e.display.externalMeasure=null,xs(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)It(e.display.view[t])}function Lt(e){Nt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Bt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ht(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function qt(e,t,i,n){if(t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var s=ro(t.widgets[o]);i.top+=s,i.bottom+=s}if("line"==n)return i;n||(n="local");var r=Lo(t);if("local"==n?r+=kt(e.display):r-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();r+=a.top+("window"==n?0:Ht());var l=a.left+("window"==n?0:Bt());i.left+=l,i.right+=l}return i.top+=r,i.bottom+=r,i}function Vt(e,t,i){if("div"==i)return t;var n=t.left,o=t.top;if("page"==i)n-=Bt(),o-=Ht();else if("local"==i||!i){var s=e.display.sizer.getBoundingClientRect();n+=s.left,o+=s.top}var r=e.display.lineSpace.getBoundingClientRect();return{left:n-r.left,top:o-r.top}}function jt(e,t,i,n,o){return n||(n=zo(e.doc,t.line)),qt(e,n,Pt(e,n,t.ch,o),i)}function $t(e,t,i,n,o,s){function r(t,r){var a=Ot(e,o,t,r?"right":"left",s);return r?a.left=a.right:a.right=a.left,qt(e,n,a,i)}function a(e,t){var i=l[t],n=i.level%2;return e==Ns(i)&&t&&i.level<l[t-1].level?(i=l[--t],e=Ls(i)-(i.level%2?0:1),n=!0):e==Ls(i)&&t<l.length-1&&i.level<l[t+1].level&&(i=l[++t],e=Ns(i)-i.level%2,n=!1),n&&e==i.to&&e>i.from?r(e-1):r(e,n)}n=n||zo(e.doc,t.line),o||(o=zt(e,n));var l=Bo(n),c=t.ch;if(!l)return r(c);var u=Us(l,c),d=a(c,u);return null!=Ia&&(d.other=a(c,Ia)),d}function Ut(e,t){var i=0,t=Q(e.doc,t);e.options.lineWrapping||(i=Kt(e.display)*t.ch);var n=zo(e.doc,t.line),o=Lo(n)+kt(e.display);return{left:i,right:i,top:o,bottom:o+n.height}}function Yt(e,t,i,n){var o=br(e,t);return o.xRel=n,i&&(o.outside=!0),o}function Gt(e,t,i){var n=e.doc;if(i+=e.display.viewOffset,0>i)return Yt(n.first,0,!0,-1);var o=No(n,i),s=n.first+n.size-1;if(o>s)return Yt(n.first+n.size-1,zo(n,s).text.length,!0,1);0>t&&(t=0);for(var r=zo(n,o);;){var a=Xt(e,r,o,t,i),l=Kn(r),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;o=Io(r=c.to.line)}}function Xt(e,t,i,n,o){function s(n){var o=$t(e,br(i,n),"line",t,c);return a=!0,r>o.bottom?o.left-l:r<o.top?o.left+l:(a=!1,o.left)}var r=o-Lo(t),a=!1,l=2*e.display.wrapper.clientWidth,c=zt(e,t),u=Bo(t),d=t.text.length,h=Bs(t),p=Hs(t),f=s(h),m=a,g=s(p),v=a;if(n>g)return Yt(i,p,v,1);for(;;){if(u?p==h||p==Gs(t,h,1):1>=p-h){for(var b=f>n||g-n>=n-f?h:p,y=n-(b==h?f:g);Ms(t.text.charAt(b));)++b;var w=Yt(i,b,b==h?m:v,-1>y?-1:y>1?1:0);return w}var _=Math.ceil(d/2),M=h+_;if(u){M=h;for(var C=0;_>C;++C)M=Gs(t,M,1)}var x=s(M);x>n?(p=M,g=x,(v=a)&&(g+=1e3),d=_):(h=M,f=x,m=a,d-=_)}}function Jt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==wr){wr=Cs("pre");for(var t=0;49>t;++t)wr.appendChild(document.createTextNode("x")),wr.appendChild(Cs("br"));wr.appendChild(document.createTextNode("x"))}ks(e.measure,wr);var i=wr.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),xs(e.measure),i||1}function Kt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Cs("span","xxxxxxxxxx"),i=Cs("pre",[t]);ks(e.measure,i);var n=t.getBoundingClientRect(),o=(n.right-n.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function Qt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++kr},xr?xr.ops.push(e.curOp):e.curOp.ownsGroup=xr={ops:[e.curOp],delayedCallbacks:[]}}function Zt(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i]();for(var n=0;n<e.ops.length;n++){var o=e.ops[n];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++](o.cm)}}while(i<t.length)}function ei(e){var t=e.curOp,i=t.ownsGroup;if(i)try{Zt(i)}finally{xr=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;ti(i)}}function ti(e){for(var t=e.ops,i=0;i<t.length;i++)ii(t[i]);for(var i=0;i<t.length;i++)ni(t[i]);for(var i=0;i<t.length;i++)oi(t[i]);for(var i=0;i<t.length;i++)si(t[i]);for(var i=0;i<t.length;i++)ri(t[i])}function ii(e){var t=e.cm,i=t.display;e.updateMaxLine&&h(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new M(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function ni(e){e.updatedDisplay=e.mustUpdate&&C(e.cm,e.update)}function oi(e){var t=e.cm,i=t.display;e.updatedDisplay&&A(t),e.barMeasure=m(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pt(t,i.maxLine,i.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo+pa-i.scroller.clientWidth)),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=mt(t))}function si(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Bi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&gt(t,e.newSelectionNodes),e.updatedDisplay&&S(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&g(t,e.barMeasure),e.selectionChanged&&wt(t),t.state.focused&&e.updateInput&&Ci(t,e.typing)}function ri(e){var t=e.cm,i=t.display,n=t.doc;if(null!=e.adjustWidthTo&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&g(t),e.updatedDisplay&&x(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&(i.scroller.scrollTop!=e.scrollTop||e.forceScroll)){var o=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop));i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=o}if(null!=e.scrollLeft&&(i.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)){var s=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,e.scrollLeft));i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=s,b(t)}if(e.scrollToPos){var r=mn(t,Q(n,e.scrollToPos.from),Q(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&fn(t,r)}var a=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(a)for(var c=0;c<a.length;++c)a[c].lines.length||da(a[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&da(l[c],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&tr&&(t.options.lineWrapping&&T(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!f(t)&&g(t)),e.changeObjs&&da(t,"changes",t,e.changeObjs)}function ai(e,t){if(e.curOp)return t();Qt(e);try{return t()}finally{ei(e)}}function li(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Qt(e);try{return t.apply(e,arguments)}finally{ei(e)}}}function ci(e){return function(){if(this.curOp)return e.apply(this,arguments);Qt(this);try{return e.apply(this,arguments)}finally{ei(this)}}}function ui(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Qt(t);try{return e.apply(this,arguments)}finally{ei(t)}}}function di(e,t,i){this.line=t,this.rest=eo(t),this.size=this.rest?Io(fs(this.rest))-i+1:1,this.node=this.text=null,this.hidden=no(e,t)}function hi(e,t,i){for(var n,o=[],s=t;i>s;s=n){var r=new di(e.doc,zo(e.doc,s),s);n=s+r.size,o.push(r)}return o}function pi(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var o=e.display;if(n&&i<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)vr&&to(e.doc,t)<o.viewTo&&mi(e);else if(i<=o.viewFrom)vr&&io(e.doc,i+n)>o.viewFrom?mi(e):(o.viewFrom+=n,o.viewTo+=n);else if(t<=o.viewFrom&&i>=o.viewTo)mi(e);else if(t<=o.viewFrom){var s=vi(e,i,i+n,1);s?(o.view=o.view.slice(s.index),o.viewFrom=s.lineN,o.viewTo+=n):mi(e)}else if(i>=o.viewTo){var s=vi(e,t,t,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):mi(e)}else{var r=vi(e,t,t,-1),a=vi(e,i,i+n,1);r&&a?(o.view=o.view.slice(0,r.index).concat(hi(e,r.lineN,a.lineN)).concat(o.view.slice(a.index)),o.viewTo+=n):mi(e)}var l=o.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(o.externalMeasured=null))}function fi(e,t,i){e.curOp.viewChanged=!0;var n=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var s=n.view[gi(e,t)];if(null!=s.node){var r=s.changes||(s.changes=[]);-1==ms(r,i)&&r.push(i)}}}function mi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function gi(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var i=e.display.view,n=0;n<i.length;n++)if(t-=i[n].size,0>t)return n}function vi(e,t,i,n){var o,s=gi(e,t),r=e.display.view;if(!vr||i==e.doc.first+e.doc.size)return{index:s,lineN:i};for(var a=0,l=e.display.viewFrom;s>a;a++)l+=r[a].size;if(l!=t){if(n>0){if(s==r.length-1)return null;o=l+r[s].size-t,s++}else o=l-t;t+=o,i+=o}for(;to(e.doc,i)!=i;){if(s==(0>n?0:r.length-1))return null;i+=n*r[s-(0>n?1:0)].size,s+=n}return{index:s,lineN:i}}function bi(e,t,i){var n=e.display,o=n.view;0==o.length||t>=n.viewTo||i<=n.viewFrom?(n.view=hi(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=hi(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(gi(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(hi(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,gi(e,i)))),n.viewTo=i}function yi(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var o=t[n];o.hidden||o.node&&!o.changes||++i}return i}function wi(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Mi(e),e.state.focused&&wi(e)})}function _i(e){function t(){var n=Mi(e);n||i?(e.display.pollingFast=!1,wi(e)):(i=!0,e.display.poll.set(60,t))}var i=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Mi(e){var t=e.display.input,i=e.display.prevInput,n=e.doc;if(!e.state.focused||za(t)&&!i||Si(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var o=t.value;if(o==i&&!e.somethingSelected())return!1;if(Zs&&er>=9&&e.display.inputHasSelection===o||dr&&/[\uf700-\uf7ff]/.test(o))return Ci(e),!1;var s=!e.curOp;s&&Qt(e),e.display.shift=!1,8203!=o.charCodeAt(0)||n.sel!=e.display.selForContextMenu||i||(i="​");for(var r=0,a=Math.min(i.length,o.length);a>r&&i.charCodeAt(r)==o.charCodeAt(r);)++r;var l=o.slice(r),c=Ra(l),u=null;e.state.pasteIncoming&&n.sel.ranges.length>1&&(Sr&&Sr.join("\n")==l?u=0==n.sel.ranges.length%Sr.length&&gs(Sr,Ra):c.length==n.sel.ranges.length&&(u=gs(c,function(e){return[e]})));for(var d=n.sel.ranges.length-1;d>=0;d--){var h=n.sel.ranges[d],p=h.from(),f=h.to();r<i.length?p=br(p.line,p.ch-(i.length-r)):e.state.overwrite&&h.empty()&&!e.state.pasteIncoming&&(f=br(f.line,Math.min(zo(n,f.line).text.length,f.ch+fs(c).length)));var m=e.curOp.updateInput,g={from:p,to:f,text:u?u[d%u.length]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(an(e.doc,g),ss(e,"inputRead",e,g),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&h.head.ch<100&&(!d||n.sel.ranges[d-1].head.line!=h.head.line)){var v=e.getModeAt(h.head),b=Rr(g);if(v.electricChars){for(var y=0;y<v.electricChars.length;y++)if(l.indexOf(v.electricChars.charAt(y))>-1){_n(e,b.line,"smart");break}}else v.electricInput&&v.electricInput.test(zo(n,b.line).text.slice(0,b.ch))&&_n(e,b.line,"smart")}}return yn(e),e.curOp.updateInput=m,e.curOp.typing=!0,o.length>1e3||o.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=o,s&&ei(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Ci(e,t){var i,n,o=e.doc;if(e.somethingSelected()){e.display.prevInput="";var s=o.sel.primary();i=Oa&&(s.to().line-s.from().line>100||(n=e.getSelection()).length>1e3);var r=i?"-":n||e.getSelection();e.display.input.value=r,e.state.focused&&wa(e.display.input),Zs&&er>=9&&(e.display.inputHasSelection=r)}else t||(e.display.prevInput=e.display.input.value="",Zs&&er>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=i}function xi(e){"nocursor"==e.options.readOnly||ur&&Ts()==e.display.input||e.display.input.focus()}function ki(e){e.state.focused||(xi(e),Ki(e))}function Si(e){return e.options.readOnly||e.doc.cantEdit}function Ti(e){function t(){e.state.focused&&setTimeout(ys(xi,e),0)}function i(t){as(e,t)||la(t)}function n(t){if(e.somethingSelected())Sr=e.getSelections(),o.inaccurateSelection&&(o.prevInput="",o.inaccurateSelection=!1,o.input.value=Sr.join("\n"),wa(o.input));else{for(var i=[],n=[],s=0;s<e.doc.sel.ranges.length;s++){var r=e.doc.sel.ranges[s].head.line,a={anchor:br(r,0),head:br(r+1,0)};n.push(a),i.push(e.getRange(a.anchor,a.head))}"cut"==t.type?e.setSelections(n,null,ma):(o.prevInput="",o.input.value=i.join("\n"),wa(o.input)),Sr=i}"cut"==t.type&&(e.state.cutIncoming=!0)}var o=e.display;ca(o.scroller,"mousedown",li(e,Pi)),Zs&&11>er?ca(o.scroller,"dblclick",li(e,function(t){if(!as(e,t)){var i=Ei(e,t);if(i&&!Wi(e,t)&&!Di(e.display,t)){ra(t);var n=e.findWordAt(i);nt(e.doc,n.anchor,n.head)}}})):ca(o.scroller,"dblclick",function(t){as(e,t)||ra(t)}),ca(o.lineSpace,"selectstart",function(e){Di(o,e)||ra(e)}),mr||ca(o.scroller,"contextmenu",function(t){Zi(e,t)}),ca(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Li(e,o.scroller.scrollTop),Bi(e,o.scroller.scrollLeft,!0),da(e,"scroll",e))}),ca(o.scrollbarV,"scroll",function(){o.scroller.clientHeight&&Li(e,o.scrollbarV.scrollTop)}),ca(o.scrollbarH,"scroll",function(){o.scroller.clientHeight&&Bi(e,o.scrollbarH.scrollLeft)}),ca(o.scroller,"mousewheel",function(t){Hi(e,t)}),ca(o.scroller,"DOMMouseScroll",function(t){Hi(e,t)}),ca(o.scrollbarH,"mousedown",t),ca(o.scrollbarV,"mousedown",t),ca(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),ca(o.input,"keyup",function(t){Xi.call(e,t)}),ca(o.input,"input",function(){Zs&&er>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),_i(e)}),ca(o.input,"keydown",li(e,Yi)),ca(o.input,"keypress",li(e,Ji)),ca(o.input,"focus",ys(Ki,e)),ca(o.input,"blur",ys(Qi,e)),e.options.dragDrop&&(ca(o.scroller,"dragstart",function(t){Ni(e,t)}),ca(o.scroller,"dragenter",i),ca(o.scroller,"dragover",i),ca(o.scroller,"drop",li(e,Ii))),ca(o.scroller,"paste",function(t){Di(o,t)||(e.state.pasteIncoming=!0,xi(e),_i(e))}),ca(o.input,"paste",function(){if(tr&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=o.input.selectionStart,i=o.input.selectionEnd;o.input.value+="$",o.input.selectionEnd=i,o.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,_i(e)}),ca(o.input,"cut",n),ca(o.input,"copy",n),rr&&ca(o.sizer,"mouseup",function(){Ts()==o.input&&o.input.blur(),xi(e)})}function Ai(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize())}function Di(e,t){for(var i=ns(t);i!=e.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==e.sizer&&i!=e.mover)return!0}function Ei(e,t,i,n){var o=e.display;if(!i){var s=ns(t);if(s==o.scrollbarH||s==o.scrollbarV||s==o.scrollbarFiller||s==o.gutterFiller)return null}var r,a,l=o.lineSpace.getBoundingClientRect();try{r=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var c,u=Gt(e,r,a);if(n&&1==u.xRel&&(c=zo(e.doc,u.line).text).length==u.ch){var d=ba(c,c.length,e.options.tabSize)-c.length;u=br(u.line,Math.max(0,Math.round((r-Tt(e.display).left)/Kt(e.display))-d))}return u}function Pi(e){if(!as(this,e)){var t=this,i=t.display;if(i.shift=e.shiftKey,Di(i,e))return tr||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)),void 0;if(!Wi(t,e)){var n=Ei(t,e);switch(window.focus(),os(e)){case 1:n?Ri(t,e,n):ns(e)==i.scroller&&ra(e);break;case 2:tr&&(t.state.lastMiddleDown=+new Date),n&&nt(t.doc,n),setTimeout(ys(xi,t),20),ra(e);break;case 3:mr&&Zi(t,e)}}}}function Ri(e,t,i){setTimeout(ys(ki,e),0);var n,o=+new Date;Mr&&Mr.time>o-400&&0==yr(Mr.pos,i)?n="triple":_r&&_r.time>o-400&&0==yr(_r.pos,i)?(n="double",Mr={time:o,pos:i}):(n="single",_r={time:o,pos:i});var s=e.doc.sel,r=dr?t.metaKey:t.ctrlKey;e.options.dragDrop&&Pa&&!Si(e)&&"single"==n&&s.contains(i)>-1&&s.somethingSelected()?zi(e,t,i,r):Oi(e,t,i,n,r)}function zi(e,t,i,n){var o=e.display,s=li(e,function(r){tr&&(o.scroller.draggable=!1),e.state.draggingText=!1,ua(document,"mouseup",s),ua(o.scroller,"drop",s),Math.abs(t.clientX-r.clientX)+Math.abs(t.clientY-r.clientY)<10&&(ra(r),n||nt(e.doc,i),xi(e),Zs&&9==er&&setTimeout(function(){document.body.focus(),xi(e)},20))});tr&&(o.scroller.draggable=!0),e.state.draggingText=s,o.scroller.dragDrop&&o.scroller.dragDrop(),ca(document,"mouseup",s),ca(o.scroller,"drop",s)}function Oi(e,t,i,n,o){function s(t){if(0!=yr(m,t))if(m=t,"rect"==n){for(var o=[],s=e.options.tabSize,r=ba(zo(c,i.line).text,i.ch,s),a=ba(zo(c,t.line).text,t.ch,s),l=Math.min(r,a),p=Math.max(r,a),f=Math.min(i.line,t.line),g=Math.min(e.lastLine(),Math.max(i.line,t.line));g>=f;f++){var v=zo(c,f).text,b=hs(v,l,s);l==p?o.push(new G(br(f,b),br(f,b))):v.length>b&&o.push(new G(br(f,b),br(f,hs(v,p,s))))}o.length||o.push(new G(i,i)),ct(c,X(h.ranges.slice(0,d).concat(o),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=u,w=y.anchor,_=t;if("single"!=n){if("double"==n)var M=e.findWordAt(t);else var M=new G(br(t.line,0),Q(c,br(t.line+1,0)));yr(M.anchor,w)>0?(_=M.head,w=U(y.from(),M.anchor)):(_=M.anchor,w=$(y.to(),M.head))}var o=h.ranges.slice(0);o[d]=new G(Q(c,w),_),ct(c,X(o,d),ga)}}function r(t){var i=++b,o=Ei(e,t,!0,"rect"==n);if(o)if(0!=yr(o,m)){ki(e),s(o);var a=v(l,c);(o.line>=a.to||o.line<a.from)&&setTimeout(li(e,function(){b==i&&r(t)}),150)}else{var u=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;u&&setTimeout(li(e,function(){b==i&&(l.scroller.scrollTop+=u,r(t))}),50)}}function a(t){b=1/0,ra(t),xi(e),ua(document,"mousemove",y),ua(document,"mouseup",w),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;ra(t);var u,d,h=c.sel;if(o&&!t.shiftKey?(d=c.sel.contains(i),u=d>-1?c.sel.ranges[d]:new G(i,i)):u=c.sel.primary(),t.altKey)n="rect",o||(u=new G(i,i)),i=Ei(e,t,!0,!0),d=-1;else if("double"==n){var p=e.findWordAt(i);u=e.display.shift||c.extend?it(c,u,p.anchor,p.head):p}else if("triple"==n){var f=new G(br(i.line,0),Q(c,br(i.line+1,0)));u=e.display.shift||c.extend?it(c,u,f.anchor,f.head):f}else u=it(c,u,i);o?d>-1?st(c,d,u,ga):(d=c.sel.ranges.length,ct(c,X(c.sel.ranges.concat([u]),d),{scroll:!1,origin:"*mouse"})):(d=0,ct(c,new Y([u],0),ga),h=c.sel);var m=i,g=l.wrapper.getBoundingClientRect(),b=0,y=li(e,function(e){os(e)?r(e):a(e)}),w=li(e,a);ca(document,"mousemove",y),ca(document,"mouseup",w)}function Fi(e,t,i,n,o){try{var s=t.clientX,r=t.clientY}catch(t){return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ra(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(r>l.bottom||!cs(e,i))return is(t);r-=l.top-a.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var u=a.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=s){var d=No(e.doc,r),h=e.options.gutters[c];return o(e,i,e,d,h,t),is(t)}}}function Wi(e,t){return Fi(e,t,"gutterClick",!0,ss)}function Ii(e){var t=this;if(!as(t,e)&&!Di(t.display,e)){ra(e),Zs&&(Tr=+new Date);var i=Ei(t,e,!0),n=e.dataTransfer.files;if(i&&!Si(t))if(n&&n.length&&window.FileReader&&window.File)for(var o=n.length,s=Array(o),r=0,a=function(e,n){var a=new FileReader;a.onload=li(t,function(){if(s[n]=a.result,++r==o){i=Q(t.doc,i);var e={from:i,to:i,text:Ra(s.join("\n")),origin:"paste"};an(t.doc,e),lt(t.doc,J(i,Rr(e)))}}),a.readAsText(e)},l=0;o>l;++l)a(n[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),setTimeout(ys(xi,t),20),void 0;try{var s=e.dataTransfer.getData("Text");if(s){if(t.state.draggingText&&!(dr?e.metaKey:e.ctrlKey))var c=t.listSelections();if(ut(t.doc,J(i,i)),c)for(var l=0;l<c.length;++l)pn(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(s,"around","paste"),xi(t)}}catch(e){}}}}function Ni(e,t){if(Zs&&(!e.state.draggingText||+new Date-Tr<100))return la(t),void 0;if(!as(e,t)&&!Di(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!sr)){var i=Cs("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",or&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),or&&i.parentNode.removeChild(i)}}function Li(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Js||k(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Js&&k(e),_t(e,100))}function Bi(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,b(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Hi(e,t){var i=t.wheelDeltaX,n=t.wheelDeltaY;null==i&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(i=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var o=e.display,s=o.scroller;if(i&&s.scrollWidth>s.clientWidth||n&&s.scrollHeight>s.clientHeight){if(n&&dr&&tr)e:for(var r=t.target,a=o.view;r!=s;r=r.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==r){e.display.currentWheelTarget=r;break e}if(i&&!Js&&!or&&null!=Dr)return n&&Li(e,Math.max(0,Math.min(s.scrollTop+n*Dr,s.scrollHeight-s.clientHeight))),Bi(e,Math.max(0,Math.min(s.scrollLeft+i*Dr,s.scrollWidth-s.clientWidth))),ra(t),o.wheelStartX=null,void 0;if(n&&null!=Dr){var c=n*Dr,u=e.doc.scrollTop,d=u+o.wrapper.clientHeight;0>c?u=Math.max(0,u+c-50):d=Math.min(e.doc.height,d+c+50),k(e,{top:u,bottom:d})}20>Ar&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=i,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=s.scrollLeft-o.wheelStartX,t=s.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(Dr=(Dr*Ar+i)/(Ar+1),++Ar)}},200)):(o.wheelDX+=i,o.wheelDY+=n))}}function qi(e,t,i){if("string"==typeof t&&(t=Vr[t],!t))return!1;e.display.pollingFast&&Mi(e)&&(e.display.pollingFast=!1);var n=e.display.shift,o=!1;try{Si(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),o=t(e)!=fa}finally{e.display.shift=n,e.state.suppressEdits=!1}return o}function Vi(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var o=$r(t,e.state.keyMaps[n],i);if(o)return o}return e.options.extraKeys&&$r(t,e.options.extraKeys,i)||$r(t,e.options.keyMap,i)}function ji(e,t,i,n){var o=e.state.keySeq;if(o){if(Ur(t))return"handled";Er.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,Ci(e))}),t=o+" "+t}var s=Vi(e,t,n);return"multi"==s&&(e.state.keySeq=t),"handled"==s&&ss(e,"keyHandled",e,t,i),("handled"==s||"multi"==s)&&(ra(i),wt(e)),o&&!s&&/\'$/.test(t)?(ra(i),!0):!!s}function $i(e,t){var i=Yr(t,!0);return i?t.shiftKey&&!e.state.keySeq?ji(e,"Shift-"+i,t,function(t){return qi(e,t,!0)})||ji(e,i,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?qi(e,t):void 0}):ji(e,i,t,function(t){return qi(e,t)}):!1}function Ui(e,t,i){return ji(e,"'"+i+"'",t,function(t){return qi(e,t,!0)})}function Yi(e){var t=this;if(ki(t),!as(t,e)){Zs&&11>er&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var n=$i(t,e);or&&(Pr=n?i:null,!n&&88==i&&!Oa&&(dr?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Gi(t)}}function Gi(e){function t(e){18!=e.keyCode&&e.altKey||(Aa(i,"CodeMirror-crosshair"),ua(document,"keyup",t),ua(document,"mouseover",t))}var i=e.display.lineDiv;Da(i,"CodeMirror-crosshair"),ca(document,"keyup",t),ca(document,"mouseover",t)}function Xi(e){16==e.keyCode&&(this.doc.sel.shift=!1),as(this,e)}function Ji(e){var t=this;if(!(as(t,e)||e.ctrlKey&&!e.altKey||dr&&e.metaKey)){var i=e.keyCode,n=e.charCode;if(or&&i==Pr)return Pr=null,ra(e),void 0;if(!(or&&(!e.which||e.which<10)||rr)||!$i(t,e)){var o=String.fromCharCode(null==n?i:n);Ui(t,e,o)||(Zs&&er>=9&&(t.display.inputHasSelection=null),_i(t))}}}function Ki(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(da(e,"focus",e),e.state.focused=!0,Da(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(Ci(e),tr&&setTimeout(ys(Ci,e,!0),0))),wi(e),wt(e))}function Qi(e){e.state.focused&&(da(e,"blur",e),e.state.focused=!1,Aa(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Zi(e,t){function i(){if(null!=o.input.selectionStart){var t=e.somethingSelected(),i=o.input.value="​"+(t?o.input.value:"");o.prevInput=t?"":"​",o.input.selectionStart=1,o.input.selectionEnd=i.length,o.selForContextMenu=e.doc.sel}}function n(){if(o.inputDiv.style.position="relative",o.input.style.cssText=l,Zs&&9>er&&(o.scrollbarV.scrollTop=o.scroller.scrollTop=r),wi(e),null!=o.input.selectionStart){(!Zs||Zs&&9>er)&&i();var t=0,n=function(){o.selForContextMenu==e.doc.sel&&0==o.input.selectionStart?li(e,Vr.selectAll)(e):t++<10?o.detectingSelectAll=setTimeout(n,500):Ci(e)};o.detectingSelectAll=setTimeout(n,200)}}if(!as(e,t,"contextmenu")){var o=e.display;if(!Di(o,t)&&!en(e,t)){var s=Ei(e,t),r=o.scroller.scrollTop;if(s&&!or){var a=e.options.resetSelectionOnContextMenu;a&&-1==e.doc.sel.contains(s)&&li(e,ct)(e.doc,J(s),ma);var l=o.input.style.cssText;if(o.inputDiv.style.position="absolute",o.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Zs?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",tr)var c=window.scrollY;if(xi(e),tr&&window.scrollTo(null,c),Ci(e),e.somethingSelected()||(o.input.value=o.prevInput=" "),o.selForContextMenu=e.doc.sel,clearTimeout(o.detectingSelectAll),Zs&&er>=9&&i(),mr){la(t);var u=function(){ua(window,"mouseup",u),setTimeout(n,20)};ca(window,"mouseup",u)}else setTimeout(n,50)}}}}function en(e,t){return cs(e,"gutterContextMenu")?Fi(e,t,"gutterContextMenu",!1,da):!1}function tn(e,t){if(yr(e,t.from)<0)return e;if(yr(e,t.to)<=0)return Rr(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Rr(t).ch-t.to.ch),br(i,n)
}function nn(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var o=e.sel.ranges[n];i.push(new G(tn(o.anchor,t),tn(o.head,t)))}return X(i,e.sel.primIndex)}function on(e,t,i){return e.line==t.line?br(i.line,e.ch-t.ch+i.ch):br(i.line+(e.line-t.line),e.ch)}function sn(e,t,i){for(var n=[],o=br(e.first,0),s=o,r=0;r<t.length;r++){var a=t[r],l=on(a.from,o,s),c=on(Rr(a),o,s);if(o=a.to,s=c,"around"==i){var u=e.sel.ranges[r],d=yr(u.head,u.anchor)<0;n[r]=new G(d?c:l,d?l:c)}else n[r]=new G(l,l)}return new Y(n,e.sel.primIndex)}function rn(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,o){t&&(this.from=Q(e,t)),i&&(this.to=Q(e,i)),n&&(this.text=n),void 0!==o&&(this.origin=o)}),da(e,"beforeChange",e,n),e.cm&&da(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function an(e,t,i){if(e.cm){if(!e.cm.curOp)return li(e.cm,an)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(cs(e,"beforeChange")||e.cm&&cs(e.cm,"beforeChange"))||(t=rn(e,t,!0))){var n=gr&&!i&&Vn(e,t.from,t.to);if(n)for(var o=n.length-1;o>=0;--o)ln(e,{from:n[o].from,to:n[o].to,text:o?[""]:t.text});else ln(e,t)}}function ln(e,t){if(1!=t.text.length||""!=t.text[0]||0!=yr(t.from,t.to)){var i=nn(e,t);$o(e,t,i,e.cm?e.cm.curOp.id:0/0),dn(e,t,i,Bn(e,t));var n=[];Po(e,function(e,i){i||-1!=ms(n,e.history)||(ts(e.history,t),n.push(e.history)),dn(e,t,null,Bn(e,t))})}}function cn(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var n,o=e.history,s=e.sel,r="undo"==t?o.done:o.undone,a="undo"==t?o.undone:o.done,l=0;l<r.length&&(n=r[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=r.length){for(o.lastOrigin=o.lastSelOrigin=null;n=r.pop(),n.ranges;){if(Go(n,a),i&&!n.equals(e.sel))return ct(e,n,{clearRedo:!1}),void 0;s=n}var c=[];Go(s,a),a.push({changes:c,generation:o.generation}),o.generation=n.generation||++o.maxGeneration;for(var u=cs(e,"beforeChange")||e.cm&&cs(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var d=n.changes[l];if(d.origin=t,u&&!rn(e,d,!1))return r.length=0,void 0;c.push(qo(e,d));var h=l?nn(e,d):fs(r);dn(e,d,h,qn(e,d)),!l&&e.cm&&e.cm.scrollIntoView({from:d.from,to:Rr(d)});var p=[];Po(e,function(e,t){t||-1!=ms(p,e.history)||(ts(e.history,d),p.push(e.history)),dn(e,d,null,qn(e,d))})}}}}function un(e,t){if(0!=t&&(e.first+=t,e.sel=new Y(gs(e.sel.ranges,function(e){return new G(br(e.anchor.line+t,e.anchor.ch),br(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){pi(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)fi(e.cm,n,"gutter")}}function dn(e,t,i,n){if(e.cm&&!e.cm.curOp)return li(e.cm,dn)(e,t,i,n);if(t.to.line<e.first)return un(e,t.text.length-1-(t.to.line-t.from.line)),void 0;if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);un(e,o),t={from:br(e.first,0),to:br(t.to.line+o,t.to.ch),text:[fs(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:br(s,zo(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Oo(e,t.from,t.to),i||(i=nn(e,t)),e.cm?hn(e.cm,t,n):Ao(e,t,n),ut(e,i,ma)}}function hn(e,t,i){var n=e.doc,o=e.display,r=t.from,a=t.to,l=!1,c=r.line;e.options.lineWrapping||(c=Io(Zn(zo(n,r.line))),n.iter(c,a.line+1,function(e){return e==o.maxLine?(l=!0,!0):void 0})),n.sel.contains(t.from,t.to)>-1&&ls(e),Ao(n,t,i,s(e)),e.options.lineWrapping||(n.iter(c,r.line+t.text.length,function(e){var t=d(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,r.line),_t(e,400);var u=t.text.length-(a.line-r.line)-1;r.line!=a.line||1!=t.text.length||To(e.doc,t)?pi(e,r.line,a.line+1,u):fi(e,r.line,"text");var h=cs(e,"changes"),p=cs(e,"change");if(p||h){var f={from:r,to:a,text:t.text,removed:t.removed,origin:t.origin};p&&ss(e,"change",e,f),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function pn(e,t,i,n,o){if(n||(n=i),yr(n,i)<0){var s=n;n=i,i=s}"string"==typeof t&&(t=Ra(t)),an(e,{from:i,to:n,text:t,origin:o})}function fn(e,t){if(!as(e,"scrollCursorIntoView")){var i=e.display,n=i.sizer.getBoundingClientRect(),o=null;if(t.top+n.top<0?o=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!lr){var s=Cs("div","​",null,"position: absolute; top: "+(t.top-i.viewOffset-kt(e.display))+"px; height: "+(t.bottom-t.top+pa)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(o),e.display.lineSpace.removeChild(s)}}}function mn(e,t,i,n){null==n&&(n=0);for(var o=0;5>o;o++){var s=!1,r=$t(e,t),a=i&&i!=t?$t(e,i):r,l=vn(e,Math.min(r.left,a.left),Math.min(r.top,a.top)-n,Math.max(r.left,a.left),Math.max(r.bottom,a.bottom)+n),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(Li(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(s=!0)),null!=l.scrollLeft&&(Bi(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(s=!0)),!s)return r}}function gn(e,t,i,n,o){var s=vn(e,t,i,n,o);null!=s.scrollTop&&Li(e,s.scrollTop),null!=s.scrollLeft&&Bi(e,s.scrollLeft)}function vn(e,t,i,n,o){var s=e.display,r=Jt(e.display);0>i&&(i=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:s.scroller.scrollTop,l=s.scroller.clientHeight-pa,c={};o-i>l&&(o=i+l);var u=e.doc.height+St(s),d=r>i,h=o>u-r;if(a>i)c.scrollTop=d?0:i;else if(o>a+l){var p=Math.min(i,(h?u:o)-l);p!=a&&(c.scrollTop=p)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:s.scroller.scrollLeft,m=s.scroller.clientWidth-pa-s.gutters.offsetWidth,g=n-t>m;return g&&(n=t+m),10>t?c.scrollLeft=0:f>t?c.scrollLeft=Math.max(0,t-(g?0:10)):n>m+f-3&&(c.scrollLeft=n+(g?0:10)-m),c}function bn(e,t,i){(null!=t||null!=i)&&wn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function yn(e){wn(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?br(t.line,t.ch-1):t,n=br(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function wn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=Ut(e,t.from),n=Ut(e,t.to),o=vn(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(o.scrollLeft,o.scrollTop)}}function _n(e,t,i,n){var o,s=e.doc;null==i&&(i="add"),"smart"==i&&(s.mode.indent?o=xt(e,t):i="prev");var r=e.options.tabSize,a=zo(s,t),l=ba(a.text,null,r);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&(c=s.mode.indent(o,a.text.slice(u.length),a.text),c==fa||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>s.first?ba(zo(s,t-1).text,null,r):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/r);p;--p)h+=r,d+="	";if(c>h&&(d+=ps(c-h)),d!=u)pn(s,d,br(t,0),br(t,u.length),"+input");else for(var p=0;p<s.sel.ranges.length;p++){var f=s.sel.ranges[p];if(f.head.line==t&&f.head.ch<u.length){var h=br(t,u.length);st(s,p,new G(h,h));break}}a.stateAfter=null}function Mn(e,t,i,n){var o=t,s=t;return"number"==typeof t?s=zo(e,K(e,t)):o=Io(t),null==o?null:(n(s,o)&&e.cm&&fi(e.cm,o,i),s)}function Cn(e,t){for(var i=e.doc.sel.ranges,n=[],o=0;o<i.length;o++){for(var s=t(i[o]);n.length&&yr(s.from,fs(n).to)<=0;){var r=n.pop();if(yr(r.from,s.from)<0){s.from=r.from;break}}n.push(s)}ai(e,function(){for(var t=n.length-1;t>=0;t--)pn(e.doc,"",n[t].from,n[t].to,"+delete");yn(e)})}function xn(e,t,i,n,o){function s(){var t=a+i;return t<e.first||t>=e.first+e.size?d=!1:(a=t,u=zo(e,t))}function r(e){var t=(o?Gs:Xs)(u,l,i,!0);if(null==t){if(e||!s())return d=!1;l=o?(0>i?Hs:Bs)(u):0>i?u.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=i,u=zo(e,a),d=!0;if("char"==n)r();else if("column"==n)r(!0);else if("word"==n||"group"==n)for(var h=null,p="group"==n,f=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>i)||r(!m);m=!1){var g=u.text.charAt(l)||"\n",v=ws(g,f)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(!p||m||v||(v="s"),h&&h!=v){0>i&&(i=1,r());break}if(v&&(h=v),i>0&&!r(!m))break}var b=ft(e,br(a,l),c,!0);return d||(b.hitSide=!0),b}function kn(e,t,i,n){var o,s=e.doc,r=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+i*(a-(0>i?1.5:.5)*Jt(e.display))}else"line"==n&&(o=i>0?t.bottom+3:t.top-3);for(;;){var l=Gt(e,r,o);if(!l.outside)break;if(0>i?0>=o:o>=s.height){l.hitSide=!0;break}o+=5*i}return l}function Sn(t,i,n,o){e.defaults[t]=i,n&&(Or[t]=o?function(e,t,i){i!=Fr&&n(e,t,i)}:n)}function Tn(e){for(var t,i,n,o,s=e.split(/-(?!$)/),e=s[s.length-1],r=0;r<s.length-1;r++){var a=s[r];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function An(e){return"string"==typeof e?jr[e]:e}function Dn(e,t,i,n,o){if(n&&n.shared)return En(e,t,i,n,o);if(e.cm&&!e.cm.curOp)return li(e.cm,Dn)(e,t,i,n,o);var s=new Xr(e,o),r=yr(t,i);if(n&&bs(n,s,!1),r>0||0==r&&s.clearWhenEmpty!==!1)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=Cs("span",[s.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(s.widgetNode.ignoreEvents=!0),n.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(Qn(e,t.line,t,i,s)||t.line!=i.line&&Qn(e,i.line,t,i,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");vr=!0}s.addToHistory&&$o(e,{from:t,to:i,origin:"markText"},e.sel,0/0);var a,l=t.line,c=e.cm;if(e.iter(l,i.line+1,function(e){c&&s.collapsed&&!c.options.lineWrapping&&Zn(e)==c.display.maxLine&&(a=!0),s.collapsed&&l!=t.line&&Wo(e,0),In(e,new On(s,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),s.collapsed&&e.iter(t.line,i.line+1,function(t){no(e,t)&&Wo(t,0)}),s.clearOnEnter&&ca(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(gr=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++Jr,s.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),s.collapsed)pi(c,t.line,i.line+1);else if(s.className||s.title||s.startStyle||s.endStyle)for(var u=t.line;u<=i.line;u++)fi(c,u,"text");s.atomic&&ht(c.doc),ss(c,"markerAdded",c,s)}return s}function En(e,t,i,n,o){n=bs(n),n.shared=!1;var s=[Dn(e,t,i,n,o)],r=s[0],a=n.widgetNode;return Po(e,function(e){a&&(n.widgetNode=a.cloneNode(!0)),s.push(Dn(e,Q(e,t),Q(e,i),n,o));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;r=fs(s)}),new Kr(s,r)}function Pn(e){return e.findMarks(br(e.first,0),e.clipPos(br(e.lastLine())),function(e){return e.parent})}function Rn(e,t){for(var i=0;i<t.length;i++){var n=t[i],o=n.find(),s=e.clipPos(o.from),r=e.clipPos(o.to);if(yr(s,r)){var a=Dn(e,s,r,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function zn(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];Po(i.primary.doc,function(e){n.push(e)});for(var o=0;o<i.markers.length;o++){var s=i.markers[o];-1==ms(n,s.doc)&&(s.parent=null,i.markers.splice(o--,1))}}}function On(e,t,i){this.marker=e,this.from=t,this.to=i}function Fn(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Wn(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function In(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Nn(e,t,i){if(e)for(var n,o=0;o<e.length;++o){var s=e[o],r=s.marker,a=null==s.from||(r.inclusiveLeft?s.from<=t:s.from<t);if(a||s.from==t&&"bookmark"==r.type&&(!i||!s.marker.insertLeft)){var l=null==s.to||(r.inclusiveRight?s.to>=t:s.to>t);(n||(n=[])).push(new On(r,s.from,l?null:s.to))}}return n}function Ln(e,t,i){if(e)for(var n,o=0;o<e.length;++o){var s=e[o],r=s.marker,a=null==s.to||(r.inclusiveRight?s.to>=t:s.to>t);if(a||s.from==t&&"bookmark"==r.type&&(!i||s.marker.insertLeft)){var l=null==s.from||(r.inclusiveLeft?s.from<=t:s.from<t);(n||(n=[])).push(new On(r,l?null:s.from-t,null==s.to?null:s.to-t))}}return n}function Bn(e,t){var i=et(e,t.from.line)&&zo(e,t.from.line).markedSpans,n=et(e,t.to.line)&&zo(e,t.to.line).markedSpans;if(!i&&!n)return null;var o=t.from.ch,s=t.to.ch,r=0==yr(t.from,t.to),a=Nn(i,o,r),l=Ln(n,s,r),c=1==t.text.length,u=fs(t.text).length+(c?o:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var p=Fn(l,h.marker);p?c&&(h.to=null==p.to?null:p.to+u):h.to=o}}if(l)for(var d=0;d<l.length;++d){var h=l[d];if(null!=h.to&&(h.to+=u),null==h.from){var p=Fn(a,h.marker);p||(h.from=u,c&&(a||(a=[])).push(h))}else h.from+=u,c&&(a||(a=[])).push(h)}a&&(a=Hn(a)),l&&l!=a&&(l=Hn(l));var f=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var d=0;d<a.length;++d)null==a[d].to&&(m||(m=[])).push(new On(a[d].marker,null,null));for(var d=0;g>d;++d)f.push(m);f.push(l)}return f}function Hn(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function qn(e,t){var i=Ko(e,t),n=Bn(e,t);if(!i)return n;if(!n)return i;for(var o=0;o<i.length;++o){var s=i[o],r=n[o];if(s&&r)e:for(var a=0;a<r.length;++a){for(var l=r[a],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue e;s.push(l)}else r&&(i[o]=r)}return i}function Vn(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=ms(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var o=[{from:t,to:i}],s=0;s<n.length;++s)for(var r=n[s],a=r.find(0),l=0;l<o.length;++l){var c=o[l];if(!(yr(c.to,a.from)<0||yr(c.from,a.to)>0)){var u=[l,1],d=yr(c.from,a.from),h=yr(c.to,a.to);(0>d||!r.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!r.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),o.splice.apply(o,u),l+=u.length-1}}return o}function jn(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function $n(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Un(e){return e.inclusiveLeft?-1:0}function Yn(e){return e.inclusiveRight?1:0}function Gn(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),o=t.find(),s=yr(n.from,o.from)||Un(e)-Un(t);if(s)return-s;var r=yr(n.to,o.to)||Yn(e)-Yn(t);return r?r:t.id-e.id}function Xn(e,t){var i,n=vr&&e.markedSpans;if(n)for(var o,s=0;s<n.length;++s)o=n[s],o.marker.collapsed&&null==(t?o.from:o.to)&&(!i||Gn(i,o.marker)<0)&&(i=o.marker);return i}function Jn(e){return Xn(e,!0)}function Kn(e){return Xn(e,!1)}function Qn(e,t,i,n,o){var s=zo(e,t),r=vr&&s.markedSpans;if(r)for(var a=0;a<r.length;++a){var l=r[a];if(l.marker.collapsed){var c=l.marker.find(0),u=yr(c.from,i)||Un(l.marker)-Un(o),d=yr(c.to,n)||Yn(l.marker)-Yn(o);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(yr(c.to,i)>0||l.marker.inclusiveRight&&o.inclusiveLeft)||u>=0&&(yr(c.from,n)<0||l.marker.inclusiveLeft&&o.inclusiveRight)))return!0}}}function Zn(e){for(var t;t=Jn(e);)e=t.find(-1,!0).line;return e}function eo(e){for(var t,i;t=Kn(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function to(e,t){var i=zo(e,t),n=Zn(i);return i==n?t:Io(n)}function io(e,t){if(t>e.lastLine())return t;var i,n=zo(e,t);if(!no(e,n))return t;for(;i=Kn(n);)n=i.find(1,!0).line;return Io(n)+1}function no(e,t){var i=vr&&t.markedSpans;if(i)for(var n,o=0;o<i.length;++o)if(n=i[o],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&oo(e,t,n))return!0}}function oo(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return oo(e,n.line,Fn(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var o,s=0;s<t.markedSpans.length;++s)if(o=t.markedSpans[s],o.marker.collapsed&&!o.marker.widgetNode&&o.from==i.to&&(null==o.to||o.to!=i.from)&&(o.marker.inclusiveLeft||i.marker.inclusiveRight)&&oo(e,t,o))return!0}function so(e,t,i){Lo(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&bn(e,null,i)}function ro(e){if(null!=e.height)return e.height;if(!Ss(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),ks(e.cm.display.measure,Cs("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function ao(e,t,i,n){var o=new Qr(e,i,n);return o.noHScroll&&(e.display.alignWidgets=!0),Mn(e.doc,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==o.insertAt?i.push(o):i.splice(Math.min(i.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,!no(e.doc,t)){var n=Lo(t)<e.doc.scrollTop;Wo(t,t.height+ro(o)),n&&bn(e,null,o.height),e.curOp.forceUpdate=!0}return!0}),o}function lo(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),jn(e),$n(e,i);var o=n?n(e):1;o!=e.height&&Wo(e,o)}function co(e){e.parent=null,jn(e)}function uo(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function ho(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var n=e.innerMode(t,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function po(t,i,n,o){for(var s=0;10>s;s++){o&&(o[0]=e.innerMode(t,n).mode);var r=t.token(i,n);if(i.pos>i.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function fo(e,t,i,n){function o(e){return{start:d.start,end:d.pos,string:d.current(),type:s||null,state:e?Hr(r.mode,u):u}}var s,r=e.doc,a=r.mode;t=Q(r,t);var l,c=zo(r,t.line),u=xt(e,t.line,i),d=new Gr(c.text,e.options.tabSize);for(n&&(l=[]);(n||d.pos<t.ch)&&!d.eol();)d.start=d.pos,s=po(a,d,u),n&&l.push(o(!0));return n?l:o()}function mo(e,t,i,n,o,s,r){var a=i.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new Gr(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&uo(ho(i,n),s);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,r&&bo(e,t,n,d.pos),d.pos=t.length,l=null):l=uo(po(i,d,n,h),s),h){var p=h[0].name;p&&(l="m-"+(l?p+" "+l:p))}a&&u==l||(c<d.start&&o(d.start,u),c=d.start,u=l),d.start=d.pos}for(;c<d.pos;){var f=Math.min(d.pos,c+5e4);o(f,u),c=f}}function go(e,t,i,n){var o=[e.state.modeGen],s={};mo(e,t.text,e.doc.mode,i,function(e,t){o.push(e,t)},s,n);for(var r=0;r<e.state.overlays.length;++r){var a=e.state.overlays[r],l=1,c=0;mo(e,t.text,a.mode,!0,function(e,t){for(var i=l;e>c;){var n=o[l];n>e&&o.splice(l,1,e,o[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(a.opaque)o.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;l>i;i+=2){var s=o[i+1];o[i+1]=(s?s+" ":"")+"cm-overlay "+t}},s)}return{styles:o,classes:s.bgClass||s.textClass?s:null}}function vo(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=go(e,t,t.stateAfter=xt(e,Io(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.frontier&&e.doc.frontier++}return t.styles}function bo(e,t,i,n){var o=e.doc.mode,s=new Gr(t,e.options.tabSize);for(s.start=s.pos=n||0,""==t&&ho(o,i);!s.eol()&&s.pos<=e.options.maxHighlightLength;)po(o,s,i),s.start=s.pos}function yo(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?ta:ea;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function wo(e,t){var i=Cs("span",null,null,tr?"padding-right: .1px":null),n={pre:Cs("pre",[i]),content:i,col:0,pos:0,cm:e};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var s,r=o?t.rest[o-1]:t.line;n.pos=0,n.addToken=Mo,(Zs||tr)&&e.getOption("lineWrapping")&&(n.addToken=Co(n.addToken)),Fs(e.display.measure)&&(s=Bo(r))&&(n.addToken=xo(n.addToken,s)),n.map=[];var a=t!=e.display.externalMeasured&&Io(r);So(r,n,vo(e,r,a)),r.styleClasses&&(r.styleClasses.bgClass&&(n.bgClass=Ds(r.styleClasses.bgClass,n.bgClass||"")),r.styleClasses.textClass&&(n.textClass=Ds(r.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Os(e.display.measure))),0==o?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return tr&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),da(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Ds(n.pre.className,n.textClass||"")),n}function _o(e){var t=Cs("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function Mo(e,t,i,n,o,s){if(t){var r=e.cm.options.specialChars,a=!1;if(r.test(t))for(var l=document.createDocumentFragment(),c=0;;){r.lastIndex=c;var u=r.exec(t),d=u?u.index-c:t.length-c;if(d){var h=document.createTextNode(t.slice(c,c+d));Zs&&9>er?l.appendChild(Cs("span",[h])):l.appendChild(h),e.map.push(e.pos,e.pos+d,h),e.col+=d,e.pos+=d}if(!u)break;if(c+=d+1,"	"==u[0]){var p=e.cm.options.tabSize,f=p-e.col%p,h=l.appendChild(Cs("span",ps(f),"cm-tab"));e.col+=f}else{var h=e.cm.options.specialCharPlaceholder(u[0]);Zs&&9>er?l.appendChild(Cs("span",[h])):l.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),Zs&&9>er&&(a=!0),e.pos+=t.length}if(i||n||o||a){var m=i||"";n&&(m+=n),o&&(m+=o);var g=Cs("span",[l],m);return s&&(g.title=s),e.content.appendChild(g)}e.content.appendChild(l)}}function Co(e){function t(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":" ";return t+=" "}return function(i,n,o,s,r,a){e(i,n.replace(/ {3,}/g,t),o,s,r,a)}}function xo(e,t){return function(i,n,o,s,r,a){o=o?o+" cm-force-border":"cm-force-border";for(var l=i.pos,c=l+n.length;;){for(var u=0;u<t.length;u++){var d=t[u];if(d.to>l&&d.from<=l)break}if(d.to>=c)return e(i,n,o,s,r,a);e(i,n.slice(0,d.to-l),o,s,null,a),s=null,n=n.slice(d.to-l),l=d.to}}}function ko(e,t,i,n){var o=!n&&i.widgetNode;o&&(e.map.push(e.pos,e.pos+t,o),e.content.appendChild(o)),e.pos+=t}function So(e,t,i){var n=e.markedSpans,o=e.text,s=0;if(n)for(var r,a,l,c,u,d,h=o.length,p=0,f=1,m="",g=0;;){if(g==p){a=l=c=u="",d=null,g=1/0;for(var v=[],b=0;b<n.length;++b){var y=n[b],w=y.marker;y.from<=p&&(null==y.to||y.to>p)?(null!=y.to&&g>y.to&&(g=y.to,l=""),w.className&&(a+=" "+w.className),w.startStyle&&y.from==p&&(c+=" "+w.startStyle),w.endStyle&&y.to==g&&(l+=" "+w.endStyle),w.title&&!u&&(u=w.title),w.collapsed&&(!d||Gn(d.marker,w)<0)&&(d=y)):y.from>p&&g>y.from&&(g=y.from),"bookmark"==w.type&&y.from==p&&w.widgetNode&&v.push(w)}if(d&&(d.from||0)==p&&(ko(t,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var b=0;b<v.length;++b)ko(t,0,v[b])}if(p>=h)break;for(var _=Math.min(h,g);;){if(m){var M=p+m.length;if(!d){var C=M>_?m.slice(0,_-p):m;t.addToken(t,C,r?r+a:a,c,p+C.length==g?l:"",u)}if(M>=_){m=m.slice(_-p),p=_;break}p=M,c=""}m=o.slice(s,s=i[f++]),r=yo(i[f++],t.cm.options)}}else for(var f=1;f<i.length;f+=2)t.addToken(t,o.slice(s,s=i[f]),yo(i[f+1],t.cm.options))}function To(e,t){return 0==t.from.ch&&0==t.to.ch&&""==fs(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ao(e,t,i,n){function o(e){return i?i[e]:null}function s(e,i,o){lo(e,i,o,n),ss(e,"change",e,t)}var r=t.from,a=t.to,l=t.text,c=zo(e,r.line),u=zo(e,a.line),d=fs(l),h=o(l.length-1),p=a.line-r.line;if(To(e,t)){for(var f=0,m=[];f<l.length-1;++f)m.push(new Zr(l[f],o(f),n));s(u,u.text,h),p&&e.remove(r.line,p),m.length&&e.insert(r.line,m)}else if(c==u)if(1==l.length)s(c,c.text.slice(0,r.ch)+d+c.text.slice(a.ch),h);else{for(var m=[],f=1;f<l.length-1;++f)m.push(new Zr(l[f],o(f),n));m.push(new Zr(d+c.text.slice(a.ch),h,n)),s(c,c.text.slice(0,r.ch)+l[0],o(0)),e.insert(r.line+1,m)}else if(1==l.length)s(c,c.text.slice(0,r.ch)+l[0]+u.text.slice(a.ch),o(0)),e.remove(r.line+1,p);else{s(c,c.text.slice(0,r.ch)+l[0],o(0)),s(u,d+u.text.slice(a.ch),h);for(var f=1,m=[];f<l.length-1;++f)m.push(new Zr(l[f],o(f),n));p>1&&e.remove(r.line+1,p-1),e.insert(r.line+1,m)}ss(e,"change",e,t)}function Do(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function Eo(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var o=e[n];t+=o.chunkSize(),i+=o.height,o.parent=this}this.size=t,this.height=i,this.parent=null}function Po(e,t,i){function n(e,o,s){if(e.linked)for(var r=0;r<e.linked.length;++r){var a=e.linked[r];if(a.doc!=o){var l=s&&a.sharedHist;(!i||l)&&(t(a.doc,l),n(a.doc,e,l))}}}n(e,null,!0)}function Ro(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,r(e),i(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,pi(e)}function zo(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var o=i.children[n],s=o.chunkSize();if(s>t){i=o;break}t-=s}return i.lines[t]}function Oo(e,t,i){var n=[],o=t.line;return e.iter(t.line,i.line+1,function(e){var s=e.text;o==i.line&&(s=s.slice(0,i.ch)),o==t.line&&(s=s.slice(t.ch)),n.push(s),++o}),n}function Fo(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function Wo(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function Io(e){if(null==e.parent)return null;for(var t=e.parent,i=ms(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var o=0;n.children[o]!=t;++o)i+=n.children[o].chunkSize();return i+t.first}function No(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var o=e.children[n],s=o.height;if(s>t){e=o;continue e}t-=s,i+=o.chunkSize()}return i}while(!e.lines);for(var n=0;n<e.lines.length;++n){var r=e.lines[n],a=r.height;if(a>t)break;t-=a}return i+n}function Lo(e){e=Zn(e);for(var t=0,i=e.parent,n=0;n<i.lines.length;++n){var o=i.lines[n];if(o==e)break;t+=o.height}for(var s=i.parent;s;i=s,s=i.parent)for(var n=0;n<s.children.length;++n){var r=s.children[n];if(r==i)break;t+=r.height}return t}function Bo(e){var t=e.order;return null==t&&(t=e.order=Na(e.text)),t}function Ho(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function qo(e,t){var i={from:j(t.from),to:Rr(t),text:Oo(e,t.from,t.to)};return Xo(e,i,t.from.line,t.to.line+1),Po(e,function(e){Xo(e,i,t.from.line,t.to.line+1)},!0),i}function Vo(e){for(;e.length;){var t=fs(e);if(!t.ranges)break;e.pop()}}function jo(e,t){return t?(Vo(e.done),fs(e.done)):e.done.length&&!fs(e.done).ranges?fs(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),fs(e.done)):void 0}function $o(e,t,i,n){var o=e.history;o.undone.length=0;var s,r=+new Date;if((o.lastOp==n||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&o.lastModTime>r-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(s=jo(o,o.lastOp==n))){var a=fs(s.changes);0==yr(t.from,t.to)&&0==yr(t.from,a.to)?a.to=Rr(t):s.changes.push(qo(e,t))}else{var l=fs(o.done);for(l&&l.ranges||Go(e.sel,o.done),s={changes:[qo(e,t)],generation:o.generation},o.done.push(s);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(i),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=r,o.lastOp=o.lastSelOp=n,o.lastOrigin=o.lastSelOrigin=t.origin,a||da(e,"historyAdded")}function Uo(e,t,i,n){var o=t.charAt(0);return"*"==o||"+"==o&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Yo(e,t,i,n){var o=e.history,s=n&&n.origin;i==o.lastSelOp||s&&o.lastSelOrigin==s&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==s||Uo(e,s,fs(o.done),t))?o.done[o.done.length-1]=t:Go(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=s,o.lastSelOp=i,n&&n.clearRedo!==!1&&Vo(o.undone)}function Go(e,t){var i=fs(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Xo(e,t,i,n){var o=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((o||(o=t["spans_"+e.id]={}))[s]=i.markedSpans),++s})}function Jo(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Ko(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,o=[];n<t.text.length;++n)o.push(Jo(i[n]));return o}function Qo(e,t,i){for(var n=0,o=[];n<e.length;++n){var s=e[n];if(s.ranges)o.push(i?Y.prototype.deepCopy.call(s):s);else{var r=s.changes,a=[];o.push({changes:a});for(var l=0;l<r.length;++l){var c,u=r[l];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&ms(t,Number(c[1]))>-1&&(fs(a)[d]=u[d],delete u[d])}}}return o}function Zo(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function es(e,t,i,n){for(var o=0;o<e.length;++o){var s=e[o],r=!0;if(s.ranges){s.copied||(s=e[o]=s.deepCopy(),s.copied=!0);for(var a=0;a<s.ranges.length;a++)Zo(s.ranges[a].anchor,t,i,n),Zo(s.ranges[a].head,t,i,n)}else{for(var a=0;a<s.changes.length;++a){var l=s.changes[a];if(i<l.from.line)l.from=br(l.from.line+n,l.from.ch),l.to=br(l.to.line+n,l.to.ch);else if(t<=l.to.line){r=!1;break}}r||(e.splice(0,o+1),o=0)}}}function ts(e,t){var i=t.from.line,n=t.to.line,o=t.text.length-(n-i)-1;es(e.done,i,n,o),es(e.undone,i,n,o)}function is(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ns(e){return e.target||e.srcElement}function os(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),dr&&e.ctrlKey&&1==t&&(t=3),t}function ss(e,t){function i(e){return function(){e.apply(null,s)}}var n=e._handlers&&e._handlers[t];if(n){var o,s=Array.prototype.slice.call(arguments,2);xr?o=xr.delayedCallbacks:ha?o=ha:(o=ha=[],setTimeout(rs,0));for(var r=0;r<n.length;++r)o.push(i(n[r]))}}function rs(){var e=ha;ha=null;for(var t=0;t<e.length;++t)e[t]()}function as(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),da(e,i||t.type,e,t),is(t)||t.codemirrorIgnore}function ls(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==ms(i,t[n])&&i.push(t[n])}function cs(e,t){var i=e._handlers&&e._handlers[t];return i&&i.length>0}function us(e){e.prototype.on=function(e,t){ca(this,e,t)},e.prototype.off=function(e,t){ua(this,e,t)}}function ds(){this.id=null}function hs(e,t,i){for(var n=0,o=0;;){var s=e.indexOf("	",n);-1==s&&(s=e.length);var r=s-n;if(s==e.length||o+r>=t)return n+Math.min(r,t-o);if(o+=s-n,o+=i-o%i,n=s+1,o>=t)return n}}function ps(e){for(;ya.length<=e;)ya.push(fs(ya)+" ");return ya[e]}function fs(e){return e[e.length-1]}function ms(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function gs(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function vs(e,t){var i;if(Object.create)i=Object.create(e);else{var n=function(){};n.prototype=e,i=new n}return t&&bs(t,i),i}function bs(e,t,i){t||(t={});for(var n in e)!e.hasOwnProperty(n)||i===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function ys(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function ws(e,t){return t?t.source.indexOf("\\w")>-1&&Ca(e)?!0:t.test(e):Ca(e)}function _s(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Ms(e){return e.charCodeAt(0)>=768&&xa.test(e)}function Cs(e,t,i,n){var o=document.createElement(e);if(i&&(o.className=i),n&&(o.style.cssText=n),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)o.appendChild(t[s]);return o}function xs(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function ks(e,t){return xs(e).appendChild(t)}function Ss(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function Ts(){return document.activeElement}function As(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Ds(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!As(i[n]).test(t)&&(t+=" "+i[n]);
return t}function Es(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}function Ps(){Ea||(Rs(),Ea=!0)}function Rs(){var e;ca(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ka=null,Es(Ai)},100))}),ca(window,"blur",function(){Es(Qi)})}function zs(e){if(null!=ka)return ka;var t=Cs("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ks(e,t),t.offsetWidth&&(ka=t.offsetHeight-t.clientHeight),ka||0}function Os(e){if(null==Sa){var t=Cs("span","​");ks(e,Cs("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Sa=t.offsetWidth<=1&&t.offsetHeight>2&&!(Zs&&8>er))}return Sa?Cs("span","​"):Cs("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Fs(e){if(null!=Ta)return Ta;var t=ks(e,document.createTextNode("AخA")),i=_a(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=_a(t,1,2).getBoundingClientRect();return Ta=n.right-i.right<3}function Ws(e){if(null!=Fa)return Fa;var t=ks(e,Cs("span","x")),i=t.getBoundingClientRect(),n=_a(t,0,1).getBoundingClientRect();return Fa=Math.abs(i.left-n.left)>1}function Is(e,t,i,n){if(!e)return n(t,i,"ltr");for(var o=!1,s=0;s<e.length;++s){var r=e[s];(r.from<i&&r.to>t||t==i&&r.to==t)&&(n(Math.max(r.from,t),Math.min(r.to,i),1==r.level?"rtl":"ltr"),o=!0)}o||n(t,i,"ltr")}function Ns(e){return e.level%2?e.to:e.from}function Ls(e){return e.level%2?e.from:e.to}function Bs(e){var t=Bo(e);return t?Ns(t[0]):0}function Hs(e){var t=Bo(e);return t?Ls(fs(t)):e.text.length}function qs(e,t){var i=zo(e.doc,t),n=Zn(i);n!=i&&(t=Io(n));var o=Bo(n),s=o?o[0].level%2?Hs(n):Bs(n):0;return br(t,s)}function Vs(e,t){for(var i,n=zo(e.doc,t);i=Kn(n);)n=i.find(1,!0).line,t=null;var o=Bo(n),s=o?o[0].level%2?Bs(n):Hs(n):n.text.length;return br(null==t?Io(n):t,s)}function js(e,t){var i=qs(e,t.line),n=zo(e.doc,i.line),o=Bo(n);if(!o||0==o[0].level){var s=Math.max(0,n.text.search(/\S/)),r=t.line==i.line&&t.ch<=s&&t.ch;return br(i.line,r?0:s)}return i}function $s(e,t,i){var n=e[0].level;return t==n?!0:i==n?!1:i>t}function Us(e,t){Ia=null;for(var i,n=0;n<e.length;++n){var o=e[n];if(o.from<t&&o.to>t)return n;if(o.from==t||o.to==t){if(null!=i)return $s(e,o.level,e[i].level)?(o.from!=o.to&&(Ia=i),n):(o.from!=o.to&&(Ia=n),i);i=n}}return i}function Ys(e,t,i,n){if(!n)return t+i;do t+=i;while(t>0&&Ms(e.text.charAt(t)));return t}function Gs(e,t,i,n){var o=Bo(e);if(!o)return Xs(e,t,i,n);for(var s=Us(o,t),r=o[s],a=Ys(e,t,r.level%2?-i:i,n);;){if(a>r.from&&a<r.to)return a;if(a==r.from||a==r.to)return Us(o,a)==s?a:(r=o[s+=i],i>0==r.level%2?r.to:r.from);if(r=o[s+=i],!r)return null;a=i>0==r.level%2?Ys(e,r.to,-1,n):Ys(e,r.from,1,n)}}function Xs(e,t,i,n){var o=t+i;if(n)for(;o>0&&Ms(e.text.charAt(o));)o+=i;return 0>o||o>e.text.length?null:o}var Js=/gecko\/\d/i.test(navigator.userAgent),Ks=/MSIE \d/.test(navigator.userAgent),Qs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Zs=Ks||Qs,er=Zs&&(Ks?document.documentMode||6:Qs[1]),tr=/WebKit\//.test(navigator.userAgent),ir=tr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),nr=/Chrome\//.test(navigator.userAgent),or=/Opera\//.test(navigator.userAgent),sr=/Apple Computer/.test(navigator.vendor),rr=/KHTML\//.test(navigator.userAgent),ar=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),lr=/PhantomJS/.test(navigator.userAgent),cr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ur=cr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),dr=cr||/Mac/.test(navigator.platform),hr=/win/i.test(navigator.platform),pr=or&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);pr&&(pr=Number(pr[1])),pr&&pr>=15&&(or=!1,tr=!0);var fr=dr&&(ir||or&&(null==pr||12.11>pr)),mr=Js||Zs&&er>=9,gr=!1,vr=!1,br=e.Pos=function(e,t){return this instanceof br?(this.line=e,this.ch=t,void 0):new br(e,t)},yr=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};Y.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=yr(i.anchor,n.anchor)||0!=yr(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new G(j(this.ranges[t].anchor),j(this.ranges[t].head));return new Y(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(yr(t,n.from())>=0&&yr(e,n.to())<=0)return i}return-1}},G.prototype={from:function(){return U(this.anchor,this.head)},to:function(){return $(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var wr,_r,Mr,Cr={left:0,right:0,top:0,bottom:0},xr=null,kr=0,Sr=null,Tr=0,Ar=0,Dr=null;Zs?Dr=-.53:Js?Dr=15:nr?Dr=-.7:sr&&(Dr=-1/3);var Er=new ds,Pr=null,Rr=e.changeEnd=function(e){return e.text?br(e.from.line+e.text.length-1,fs(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),xi(this),_i(this)},setOption:function(e,t){var i=this.options,n=i[e];(i[e]!=t||"mode"==e)&&(i[e]=t,Or.hasOwnProperty(e)&&li(this,Or[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](An(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:ci(function(t,i){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,pi(this)}),removeOverlay:ci(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,pi(this),void 0}}),indentLine:ci(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),et(this.doc,e)&&_n(this,e,t,i)}),indentSelection:ci(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var o=t[n];if(o.empty())o.head.line>i&&(_n(this,o.head.line,e,!0),i=o.head.line,n==this.doc.sel.primIndex&&yn(this));else{var s=o.from(),r=o.to(),a=Math.max(i,s.line);i=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1;for(var l=a;i>l;++l)_n(this,l,e);var c=this.doc.sel.ranges;0==s.ch&&t.length==c.length&&c[n].from().ch>0&&st(this.doc,n,new G(s,c[n].to()),ma)}}}),getTokenAt:function(e,t){return fo(this,e,t)},getLineTokens:function(e,t){return fo(this,br(e),t,!0)},getTokenTypeAt:function(e){e=Q(this.doc,e);var t,i=vo(this,zo(this.doc,e.line)),n=0,o=(i.length-1)/2,s=e.ch;if(0==s)t=i[2];else for(;;){var r=n+o>>1;if((r?i[2*r-1]:0)>=s)o=r;else{if(!(i[2*r+1]<s)){t=i[2*r+2];break}n=r+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Br.hasOwnProperty(t))return Br;var n=Br[t],o=this.getModeAt(e);if("string"==typeof o[t])n[o[t]]&&i.push(n[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var r=n[o[t][s]];r&&i.push(r)}else o.helperType&&n[o.helperType]?i.push(n[o.helperType]):n[o.name]&&i.push(n[o.name]);for(var s=0;s<n._global.length;s++){var a=n._global[s];a.pred(o,this)&&-1==ms(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return e=K(i,null==e?i.first+i.size-1:e),xt(this,e+1,t)},cursorCoords:function(e,t){var i,n=this.doc.sel.primary();return i=null==e?n.head:"object"==typeof e?Q(this.doc,e):e?n.from():n.to(),$t(this,i,t||"page")},charCoords:function(e,t){return jt(this,Q(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Vt(this,e,t||"page"),Gt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Vt(this,{top:e,left:0},t||"page").top,No(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,i=!0);var o=zo(this.doc,e);return qt(this,o,{top:0,left:0},t||"page").top+(i?this.doc.height-Lo(o):0)},defaultTextHeight:function(){return Jt(this.display)},defaultCharWidth:function(){return Kt(this.display)},setGutterMarker:ci(function(e,t,i){return Mn(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&_s(n)&&(e.gutterMarkers=null),!0})}),clearGutter:ci(function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,fi(t,n,"gutter"),_s(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineWidget:ci(function(e,t,i){return ao(this,e,t,i)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!et(this.doc,e))return null;var t=e;if(e=zo(this.doc,e),!e)return null}else{var t=Io(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,o){var s=this.display;e=$t(this,Q(this.doc,e));var r=e.bottom,a=e.left;if(t.style.position="absolute",s.sizer.appendChild(t),"over"==n)r=e.top;else if("above"==n||"near"==n){var l=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?r=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(r=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=r+"px",t.style.left=t.style.right="","right"==o?(a=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&gn(this,a,r,a+t.offsetWidth,r+t.offsetHeight)},triggerOnKeyDown:ci(Yi),triggerOnKeyPress:ci(Ji),triggerOnKeyUp:Xi,execCommand:function(e){return Vr.hasOwnProperty(e)?Vr[e](this):void 0},findPosH:function(e,t,i,n){var o=1;0>t&&(o=-1,t=-t);for(var s=0,r=Q(this.doc,e);t>s&&(r=xn(this.doc,r,o,i,n),!r.hitSide);++s);return r},moveH:ci(function(e,t){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?xn(i.doc,n.head,e,t,i.options.rtlMoveVisually):0>e?n.from():n.to()},va)}),deleteH:ci(function(e,t){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Cn(this,function(i){var o=xn(n,i.head,e,t,!1);return 0>e?{from:o,to:i.head}:{from:i.head,to:o}})}),findPosV:function(e,t,i,n){var o=1,s=n;0>t&&(o=-1,t=-t);for(var r=0,a=Q(this.doc,e);t>r;++r){var l=$t(this,a,"div");if(null==s?s=l.left:l.left=s,a=kn(this,l,o,i),a.hitSide)break}return a},moveV:ci(function(e,t){var i=this,n=this.doc,o=[],s=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(r){if(s)return 0>e?r.from():r.to();var a=$t(i,r.head,"div");null!=r.goalColumn&&(a.left=r.goalColumn),o.push(a.left);var l=kn(i,a,e,t);return"page"==t&&r==n.sel.primary()&&bn(i,null,jt(i,l,"div").top-a.top),l},va),o.length)for(var r=0;r<n.sel.ranges.length;r++)n.sel.ranges[r].goalColumn=o[r]}),findWordAt:function(e){var t=this.doc,i=zo(t,e.line).text,n=e.ch,o=e.ch;if(i){var s=this.getHelper(e,"wordChars");(e.xRel<0||o==i.length)&&n?--n:++o;for(var r=i.charAt(n),a=ws(r,s)?function(e){return ws(e,s)}:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ws(e)};n>0&&a(i.charAt(n-1));)--n;for(;o<i.length&&a(i.charAt(o));)++o}return new G(br(e.line,n),br(e.line,o))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Da(this.display.cursorDiv,"CodeMirror-overwrite"):Aa(this.display.cursorDiv,"CodeMirror-overwrite"),da(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Ts()==this.display.input},scrollTo:ci(function(e,t){(null!=e||null!=t)&&wn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=pa;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:ci(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:br(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)wn(this),this.curOp.scrollToPos=e;else{var i=vn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:ci(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=i(e)),null!=t&&(n.display.wrapper.style.height=i(t)),n.options.lineWrapping&&Nt(this);var o=n.display.viewFrom;n.doc.iter(o,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){fi(n,o,"widget");break}++o}),n.curOp.forceUpdate=!0,da(n,"refresh",this)}),operation:function(e){return ai(this,e)},refresh:ci(function(){var e=this.display.cachedTextHeight;pi(this),this.curOp.forceUpdate=!0,Lt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-Jt(this.display))>.5)&&r(this),da(this,"refresh",this)}),swapDoc:ci(function(e){var t=this.doc;return t.cm=null,Ro(this,e),Lt(this),Ci(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ss(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},us(e);var zr=e.defaults={},Or=e.optionHandlers={},Fr=e.Init={toString:function(){return"CodeMirror.Init"}};Sn("value","",function(e,t){e.setValue(t)},!0),Sn("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),Sn("indentUnit",2,i,!0),Sn("indentWithTabs",!1),Sn("smartIndent",!0),Sn("tabSize",4,function(e){n(e),Lt(e),pi(e)},!0),Sn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),Sn("specialCharPlaceholder",_o,function(e){e.refresh()},!0),Sn("electricChars",!0),Sn("rtlMoveVisually",!hr),Sn("wholeLineUpdateBefore",!0),Sn("theme","default",function(e){a(e),l(e)},!0),Sn("keyMap","default",function(t,i,n){var o=An(i),s=n!=e.Init&&An(n);s&&s.detach&&s.detach(t,o),o.attach&&o.attach(t,s||null)}),Sn("extraKeys",null),Sn("lineWrapping",!1,o,!0),Sn("gutters",[],function(e){p(e.options),l(e)},!0),Sn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?_(e.display)+"px":"0",e.refresh()},!0),Sn("coverGutterNextToScrollbar",!1,g,!0),Sn("lineNumbers",!1,function(e){p(e.options),l(e)},!0),Sn("firstLineNumber",1,l,!0),Sn("lineNumberFormatter",function(e){return e},l,!0),Sn("showCursorWhenSelecting",!1,vt,!0),Sn("resetSelectionOnContextMenu",!0),Sn("readOnly",!1,function(e,t){"nocursor"==t?(Qi(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Ci(e))}),Sn("disableInput",!1,function(e,t){t||Ci(e)},!0),Sn("dragDrop",!0),Sn("cursorBlinkRate",530),Sn("cursorScrollMargin",0),Sn("cursorHeight",1,vt,!0),Sn("singleCursorHeightPerLine",!0,vt,!0),Sn("workTime",100),Sn("workDelay",100),Sn("flattenSpans",!0,n,!0),Sn("addModeClass",!1,n,!0),Sn("pollInterval",100),Sn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Sn("historyEventDelay",1250),Sn("viewportMargin",10,function(e){e.refresh()},!0),Sn("maxHighlightLength",1e4,n,!0),Sn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Sn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Sn("autofocus",null);var Wr=e.modes={},Ir=e.mimeModes={};e.defineMode=function(t,i){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Wr[t]=i},e.defineMIME=function(e,t){Ir[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Ir.hasOwnProperty(t))t=Ir[t];else if(t&&"string"==typeof t.name&&Ir.hasOwnProperty(t.name)){var i=Ir[t.name];"string"==typeof i&&(i={name:i}),t=vs(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){var i=e.resolveMode(i),n=Wr[i.name];if(!n)return e.getMode(t,"text/plain");var o=n(t,i);if(Nr.hasOwnProperty(i.name)){var s=Nr[i.name];for(var r in s)s.hasOwnProperty(r)&&(o.hasOwnProperty(r)&&(o["_"+r]=o[r]),o[r]=s[r])}if(o.name=i.name,i.helperType&&(o.helperType=i.helperType),i.modeProps)for(var r in i.modeProps)o[r]=i.modeProps[r];return o},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Nr=e.modeExtensions={};e.extendMode=function(e,t){var i=Nr.hasOwnProperty(e)?Nr[e]:Nr[e]={};bs(t,i)},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){na.prototype[e]=t},e.defineOption=Sn;var Lr=[];e.defineInitHook=function(e){Lr.push(e)};var Br=e.helpers={};e.registerHelper=function(t,i,n){Br.hasOwnProperty(t)||(Br[t]=e[t]={_global:[]}),Br[t][i]=n},e.registerGlobalHelper=function(t,i,n,o){e.registerHelper(t,i,o),Br[t]._global.push({pred:n,val:o})};var Hr=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var o=t[n];o instanceof Array&&(o=o.concat([])),i[n]=o}return i},qr=e.startState=function(e,t,i){return e.startState?e.startState(t,i):!0};e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var Vr=e.commands={selectAll:function(e){e.setSelection(br(e.firstLine(),0),br(e.lastLine()),ma)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ma)},killLine:function(e){Cn(e,function(t){if(t.empty()){var i=zo(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:br(t.head.line+1,0)}:{from:t.head,to:br(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Cn(e,function(t){return{from:br(t.from().line,0),to:Q(e.doc,br(t.to().line+1,0))}})},delLineLeft:function(e){Cn(e,function(e){return{from:br(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Cn(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){Cn(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(br(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(br(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return qs(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return js(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Vs(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},va)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},va)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return n.ch<e.getLine(n.line).search(/\S/)?js(e,t.head):n},va)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,o=0;o<i.length;o++){var s=i[o].from(),r=ba(e.getLine(s.line),s.ch,n);t.push(new Array(n-r%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){ai(e,function(){for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var o=t[n].head,s=zo(e.doc,o.line).text;if(s)if(o.ch==s.length&&(o=new br(o.line,o.ch-1)),o.ch>0)o=new br(o.line,o.ch+1),e.replaceRange(s.charAt(o.ch-1)+s.charAt(o.ch-2),br(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var r=zo(e.doc,o.line-1).text;r&&e.replaceRange(s.charAt(0)+"\n"+r.charAt(r.length-1),br(o.line-1,r.length-1),br(o.line,1),"+transpose")}i.push(new G(o,o))}e.setSelections(i)})},newlineAndIndent:function(e){ai(e,function(){for(var t=e.listSelections().length,i=0;t>i;i++){var n=e.listSelections()[i];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),yn(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},jr=e.keyMap={};jr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},jr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jr["default"]=dr?jr.macDefault:jr.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete e[i];continue}for(var o=gs(i.split(" "),Tn),s=0;s<o.length;s++){var r,a;s==o.length-1?(a=i,r=n):(a=o.slice(0,s+1).join(" "),r="...");var l=t[a];if(l){if(l!=r)throw new Error("Inconsistent bindings for "+a)}else t[a]=r}delete e[i]}for(var c in t)e[c]=t[c];return e};var $r=e.lookupKey=function(e,t,i){t=An(t);var n=t.call?t.call(e):t[e];if(n===!1)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return $r(e,t.fallthrough,i);for(var o=0;o<t.fallthrough.length;o++){var s=$r(e,t.fallthrough[o],i);if(s)return s}}},Ur=e.isModifierKey=function(e){var t="string"==typeof e?e:Wa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Yr=e.keyName=function(e,t){if(or&&34==e.keyCode&&e["char"])return!1;var i=Wa[e.keyCode],n=i;return null==n||e.altGraphKey?!1:(e.altKey&&"Alt"!=i&&(n="Alt-"+n),(fr?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(fr?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};e.fromTextArea=function(t,i){function n(){t.value=c.getValue()}if(i||(i={}),i.value=t.value,!i.tabindex&&t.tabindex&&(i.tabindex=t.tabindex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var o=Ts();i.autofocus=o==t||null!=t.getAttribute("autofocus")&&o==document.body}if(t.form&&(ca(t.form,"submit",n),!i.leaveSubmitMethodAlone)){var s=t.form,r=s.submit;try{var a=s.submit=function(){n(),s.submit=r,s.submit(),s.submit=a}}catch(l){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return c.save=n,c.getTextArea=function(){return t},c.toTextArea=function(){c.toTextArea=isNaN,n(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(ua(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=r))},c};var Gr=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Gr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));return i?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ba(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ba(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ba(this.string,null,this.tabSize)-(this.lineStart?ba(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var o=function(e){return i?e.toLowerCase():e},s=this.string.substr(this.pos,e.length);return o(s)==o(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Xr=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};us(Xr),Xr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Qt(e),cs(this,"clear")){var i=this.find();i&&ss(this,"clear",i.from,i.to)}for(var n=null,o=null,s=0;s<this.lines.length;++s){var r=this.lines[s],a=Fn(r.markedSpans,this);e&&!this.collapsed?fi(e,Io(r),"text"):e&&(null!=a.to&&(o=Io(r)),null!=a.from&&(n=Io(r))),r.markedSpans=Wn(r.markedSpans,a),null==a.from&&this.collapsed&&!no(this.doc,r)&&e&&Wo(r,Jt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var l=Zn(this.lines[s]),c=d(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&pi(e,n,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ht(e.doc)),e&&ss(e,"markerCleared",e,this),t&&ei(e),this.parent&&this.parent.clear()}},Xr.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,n,o=0;o<this.lines.length;++o){var s=this.lines[o],r=Fn(s.markedSpans,this);if(null!=r.from&&(i=br(t?s:Io(s),r.from),-1==e))return i;if(null!=r.to&&(n=br(t?s:Io(s),r.to),1==e))return n}return i&&{from:i,to:n}},Xr.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&ai(i,function(){var n=e.line,o=Io(e.line),s=Rt(i,o);if(s&&(It(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!no(t.doc,n)&&null!=t.height){var r=t.height;t.height=null;var a=ro(t)-r;a&&Wo(n,n.height+a)}})},Xr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ms(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Xr.prototype.detachLine=function(e){if(this.lines.splice(ms(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Jr=0,Kr=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};us(Kr),Kr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ss(this,"clear")}},Kr.prototype.find=function(e,t){return this.primary.find(e,t)};var Qr=e.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=e,this.node=t};us(Qr),Qr.prototype.clear=function(){var e=this.cm,t=this.line.widgets,i=this.line,n=Io(i);if(null!=n&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(i.widgets=null);var s=ro(this);ai(e,function(){so(e,i,-s),fi(e,n,"widget"),Wo(i,Math.max(0,i.height-s))})}},Qr.prototype.changed=function(){var e=this.height,t=this.cm,i=this.line;this.height=null;var n=ro(this)-e;n&&ai(t,function(){t.curOp.forceUpdate=!0,so(t,i,n),Wo(i,i.height+n)})};var Zr=e.Line=function(e,t,i){this.text=e,$n(this,t),this.height=i?i(this):1};us(Zr),Zr.prototype.lineNo=function(){return Io(this)};var ea={},ta={};Do.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;n>i;++i){var o=this.lines[i];this.height-=o.height,co(o),ss(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;n>e;++e)if(i(this.lines[e]))return!0
}},Eo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],o=n.chunkSize();if(o>e){var s=Math.min(t,o-e),r=n.height;if(n.removeInner(e,s),this.height-=r-n.height,o==s&&(this.children.splice(i--,1),n.parent=null),0==(t-=s))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Do))){var a=[];this.collapse(a),this.children=[new Do(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var o=this.children[n],s=o.chunkSize();if(s>=e){if(o.insertInner(e,t,i),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var r=o.lines.splice(o.lines.length-25,25),a=new Do(r);o.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new Eo(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=ms(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var o=new Eo(e.children);o.parent=e,e.children=[o,i],e=o}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var o=this.children[n],s=o.chunkSize();if(s>e){var r=Math.min(t,s-e);if(o.iterN(e,r,i))return!0;if(0==(t-=r))break;e=0}else e-=s}}};var ia=0,na=e.Doc=function(e,t,i){if(!(this instanceof na))return new na(e,t,i);null==i&&(i=0),Eo.call(this,[new Do([new Zr("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var n=br(i,0);this.sel=J(n),this.history=new Ho(null),this.id=++ia,this.modeOption=t,"string"==typeof e&&(e=Ra(e)),Ao(this,{from:n,to:n,text:e}),ct(this,J(n),ma)};na.prototype=vs(Eo.prototype,{constructor:na,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Fo(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:ui(function(e){var t=br(this.first,0),i=this.first+this.size-1;an(this,{from:t,to:br(i,zo(this,i).text.length),text:Ra(e),origin:"setValue"},!0),ct(this,J(t))}),replaceRange:function(e,t,i,n){t=Q(this,t),i=i?Q(this,i):t,pn(this,e,t,i,n)},getRange:function(e,t,i){var n=Oo(this,Q(this,e),Q(this,t));return i===!1?n:n.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return et(this,e)?zo(this,e):void 0},getLineNumber:function(e){return Io(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=zo(this,e)),Zn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Q(this,e)},getCursor:function(e){var t,i=this.sel.primary();return t=null==e||"head"==e?i.head:"anchor"==e?i.anchor:"end"==e||"to"==e||e===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ui(function(e,t,i){rt(this,Q(this,"number"==typeof e?br(e,t||0):e),null,i)}),setSelection:ui(function(e,t,i){rt(this,Q(this,e),Q(this,t||e),i)}),extendSelection:ui(function(e,t,i){nt(this,Q(this,e),t&&Q(this,t),i)}),extendSelections:ui(function(e,t){ot(this,tt(this,e,t))}),extendSelectionsBy:ui(function(e,t){ot(this,gs(this.sel.ranges,e),t)}),setSelections:ui(function(e,t,i){if(e.length){for(var n=0,o=[];n<e.length;n++)o[n]=new G(Q(this,e[n].anchor),Q(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ct(this,X(o,t),i)}}),addSelection:ui(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new G(Q(this,e),Q(this,t||e))),ct(this,X(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var o=Oo(this,i[n].from(),i[n].to());t=t?t.concat(o):o}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var o=Oo(this,i[n].from(),i[n].to());e!==!1&&(o=o.join(e||"\n")),t[n]=o}return t},replaceSelection:function(e,t,i){for(var n=[],o=0;o<this.sel.ranges.length;o++)n[o]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:ui(function(e,t,i){for(var n=[],o=this.sel,s=0;s<o.ranges.length;s++){var r=o.ranges[s];n[s]={from:r.from(),to:r.to(),text:Ra(e[s]),origin:i}}for(var a=t&&"end"!=t&&sn(this,n,t),s=n.length-1;s>=0;s--)an(this,n[s]);a?lt(this,a):this.cm&&yn(this.cm)}),undo:ui(function(){cn(this,"undo")}),redo:ui(function(){cn(this,"redo")}),undoSelection:ui(function(){cn(this,"undo",!0)}),redoSelection:ui(function(){cn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new Ho(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Qo(this.history.done),undone:Qo(this.history.undone)}},setHistory:function(e){var t=this.history=new Ho(this.history.maxGeneration);t.done=Qo(e.done.slice(0),null,!0),t.undone=Qo(e.undone.slice(0),null,!0)},addLineClass:ui(function(e,t,i){return Mn(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(As(i).test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:ui(function(e,t,i){return Mn(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",o=e[n];if(!o)return!1;if(null==i)e[n]=null;else{var s=o.match(As(i));if(!s)return!1;var r=s.index+s[0].length;e[n]=o.slice(0,s.index)+(s.index&&r!=o.length?" ":"")+o.slice(r)||null}return!0})}),markText:function(e,t,i){return Dn(this,Q(this,e),Q(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Q(this,e),Dn(this,e,e,i,"bookmark")},findMarksAt:function(e){e=Q(this,e);var t=[],i=zo(this,e.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var o=i[n];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,i){e=Q(this,e),t=Q(this,t);var n=[],o=e.line;return this.iter(e.line,t.line+1,function(s){var r=s.markedSpans;if(r)for(var a=0;a<r.length;a++){var l=r[a];o==e.line&&e.ch>l.to||null==l.from&&o!=e.line||o==t.line&&l.from>t.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++o}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(n){var o=n.text.length+1;return o>e?(t=e,!0):(e-=o,++i,void 0)}),Q(this,br(i,t))},indexFromPos:function(e){e=Q(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new na(Fo(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new na(Fo(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Rn(n,Pn(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==t){this.linked.splice(i,1),t.unlinkDoc(this),zn(Pn(this));break}}if(t.history==this.history){var o=[t.id];Po(t,function(e){o.push(e.id)},!0),t.history=new Ho(null),t.history.done=Qo(this.history.done,o),t.history.undone=Qo(this.history.undone,o)}},iterLinkedDocs:function(e){Po(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),na.prototype.eachLine=na.prototype.iter;var oa="iter insert remove copy getEditor".split(" ");for(var sa in na.prototype)na.prototype.hasOwnProperty(sa)&&ms(oa,sa)<0&&(e.prototype[sa]=function(e){return function(){return e.apply(this.doc,arguments)}}(na.prototype[sa]));us(na);var ra=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},aa=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},la=e.e_stop=function(e){ra(e),aa(e)},ca=e.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={}),o=n[t]||(n[t]=[]);o.push(i)}},ua=e.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var o=0;o<n.length;++o)if(n[o]==i){n.splice(o,1);break}}},da=e.signal=function(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var n=Array.prototype.slice.call(arguments,2),o=0;o<i.length;++o)i[o].apply(null,n)},ha=null,pa=30,fa=e.Pass={toString:function(){return"CodeMirror.Pass"}},ma={scroll:!1},ga={origin:"*mouse"},va={origin:"+move"};ds.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ba=e.countColumn=function(e,t,i,n,o){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var s=n||0,r=o||0;;){var a=e.indexOf("	",s);if(0>a||a>=t)return r+(t-s);r+=a-s,r+=i-r%i,s=a+1}},ya=[""],wa=function(e){e.select()};cr?wa=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Zs&&(wa=function(e){try{e.select()}catch(t){}}),[].indexOf&&(ms=function(e,t){return e.indexOf(t)}),[].map&&(gs=function(e,t){return e.map(t)});var _a,Ma=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ca=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ma.test(e))},xa=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;_a=document.createRange?function(e,t,i){var n=document.createRange();return n.setEnd(e,i),n.setStart(e,t),n}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(o){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n},Zs&&11>er&&(Ts=function(){try{return document.activeElement}catch(e){return document.body}});var ka,Sa,Ta,Aa=e.rmClass=function(e,t){var i=e.className,n=As(t).exec(i);if(n){var o=i.slice(n.index+n[0].length);e.className=i.slice(0,n.index)+(o?n[1]+o:"")}},Da=e.addClass=function(e,t){var i=e.className;As(t).test(i)||(e.className+=(i?" ":"")+t)},Ea=!1,Pa=function(){if(Zs&&9>er)return!1;var e=Cs("div");return"draggable"in e||"dragDrop"in e}(),Ra=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;n>=t;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var s=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),r=s.indexOf("\r");-1!=r?(i.push(s.slice(0,r)),t+=r+1):(i.push(s),t=o+1)}return i}:function(e){return e.split(/\r\n?|\n/)},za=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Oa=function(){var e=Cs("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Fa=null,Wa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Wa,function(){for(var e=0;10>e;e++)Wa[e+48]=Wa[e+96]=String(e);for(var e=65;90>=e;e++)Wa[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Wa[e+111]=Wa[e+63235]="F"+e}();var Ia,Na=function(){function e(e){return 247>=e?i.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?n.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,i){this.level=e,this.from=t,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=/[stwN]/,r=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(i){if(!o.test(i))return!1;for(var n,u=i.length,d=[],h=0;u>h;++h)d.push(n=e(i.charCodeAt(h)));for(var h=0,p=c;u>h;++h){var n=d[h];"m"==n?d[h]=p:p=n}for(var h=0,f=c;u>h;++h){var n=d[h];"1"==n&&"r"==f?d[h]="n":r.test(n)&&(f=n,"r"==n&&(d[h]="R"))}for(var h=1,p=d[0];u-1>h;++h){var n=d[h];"+"==n&&"1"==p&&"1"==d[h+1]?d[h]="1":","!=n||p!=d[h+1]||"1"!=p&&"n"!=p||(d[h]=p),p=n}for(var h=0;u>h;++h){var n=d[h];if(","==n)d[h]="N";else if("%"==n){for(var m=h+1;u>m&&"%"==d[m];++m);for(var g=h&&"!"==d[h-1]||u>m&&"1"==d[m]?"1":"N",v=h;m>v;++v)d[v]=g;h=m-1}}for(var h=0,f=c;u>h;++h){var n=d[h];"L"==f&&"1"==n?d[h]="L":r.test(n)&&(f=n)}for(var h=0;u>h;++h)if(s.test(d[h])){for(var m=h+1;u>m&&s.test(d[m]);++m);for(var b="L"==(h?d[h-1]:c),y="L"==(u>m?d[m]:c),g=b||y?"L":"R",v=h;m>v;++v)d[v]=g;h=m-1}for(var w,_=[],h=0;u>h;)if(a.test(d[h])){var M=h;for(++h;u>h&&a.test(d[h]);++h);_.push(new t(0,M,h))}else{var C=h,x=_.length;for(++h;u>h&&"L"!=d[h];++h);for(var v=C;h>v;)if(l.test(d[v])){v>C&&_.splice(x,0,new t(1,C,v));var k=v;for(++v;h>v&&l.test(d[v]);++v);_.splice(x,0,new t(2,k,v)),C=v}else++v;h>C&&_.splice(x,0,new t(1,C,h))}return 1==_[0].level&&(w=i.match(/^\s+/))&&(_[0].from=w[0].length,_.unshift(new t(0,0,w[0].length))),1==fs(_).level&&(w=i.match(/\s+$/))&&(fs(_).to-=w[0].length,_.push(new t(0,u-w[0].length,u))),_[0].level!=fs(_).level&&_.push(new t(_[0].level,u,u)),_}}();return e.version="4.8.0",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/mode/xml/xml",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("xml",function(t,i){function n(e,t){function i(i){return t.tokenize=i,i(e,t)}var n=e.next();if("<"==n)return e.eat("!")?e.eat("[")?e.match("CDATA[")?i(r("atom","]]>")):null:e.match("--")?i(r("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(a(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=r("meta","?>"),"meta"):(C=e.eat("/")?"closeTag":"openTag",t.tokenize=o,"tag bracket");if("&"==n){var s;return s=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),s?"atom":"error"}return e.eatWhile(/[^&<]/),null}function o(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=n,C=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return C="equals",null;if("<"==i){t.tokenize=n,t.state=d,t.tagName=t.tagStart=null;var o=t.tokenize(e,t);return o?o+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=s(i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function s(e){var t=function(t,i){for(;!t.eol();)if(t.next()==e){i.tokenize=o;break}return"string"};return t.isInAttribute=!0,t}function r(e,t){return function(i,o){for(;!i.eol();){if(i.match(t)){o.tokenize=n;break}i.next()}return e}}function a(e){return function(t,i){for(var o;null!=(o=t.next());){if("<"==o)return i.tokenize=a(e+1),i.tokenize(t,i);if(">"==o){if(1==e){i.tokenize=n;break}return i.tokenize=a(e-1),i.tokenize(t,i)}}return"meta"}}function l(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(k.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function u(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!k.contextGrabbers.hasOwnProperty(i)||!k.contextGrabbers[i].hasOwnProperty(t))return;c(e)}}function d(e,t,i){return"openTag"==e?(i.tagStart=t.column(),h):"closeTag"==e?p:d}function h(e,t,i){return"word"==e?(i.tagName=t.current(),x="tag",g):(x="error",h)}function p(e,t,i){if("word"==e){var n=t.current();return i.context&&i.context.tagName!=n&&k.implicitlyClosed.hasOwnProperty(i.context.tagName)&&c(i),i.context&&i.context.tagName==n?(x="tag",f):(x="tag error",m)}return x="error",m}function f(e,t,i){return"endTag"!=e?(x="error",f):(c(i),d)}function m(e,t,i){return x="error",f(e,t,i)}function g(e,t,i){if("word"==e)return x="attribute",v;if("endTag"==e||"selfcloseTag"==e){var n=i.tagName,o=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||k.autoSelfClosers.hasOwnProperty(n)?u(i,n):(u(i,n),i.context=new l(i,n,o==i.indented)),d}return x="error",g}function v(e,t,i){return"equals"==e?b:(k.allowMissing||(x="error"),g(e,t,i))}function b(e,t,i){return"string"==e?y:"word"==e&&k.allowUnquoted?(x="string",g):(x="error",g(e,t,i))}function y(e,t,i){return"string"==e?y:g(e,t,i)}var w=t.indentUnit,_=i.multilineTagIndentFactor||1,M=i.multilineTagIndentPastTag;null==M&&(M=!0);var C,x,k=i.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},S=i.alignCDATA;return{startState:function(){return{tokenize:n,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;C=null;var i=t.tokenize(e,t);return(i||C)&&"comment"!=i&&(x=null,t.state=t.state(C||i,e,t),x&&(i="error"==x?i+" error":x)),i},indent:function(t,i,s){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+w;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=o&&t.tokenize!=n)return s?s.match(/^(\s*)/)[0].length:0;if(t.tagName)return M?t.tagStart+t.tagName.length+2:t.tagStart+w*_;if(S&&/<!\[CDATA\[/.test(i))return 0;var a=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(a&&a[1])for(;r;){if(r.tagName==a[2]){r=r.prev;break}if(!k.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(a)for(;r;){var l=k.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(a[2]))break;r=r.prev}for(;r&&!r.startOfLine;)r=r.prev;return r?r.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("javascript",function(t,i){function n(e){for(var t,i=!1,n=!1;null!=(t=e.next());){if(!i){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}i=!i&&"\\"==t}}function o(e,t,i){return ft=e,mt=i,t}function s(e,t){var i=e.next();if('"'==i||"'"==i)return t.tokenize=r(i),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return o("number","number");if("."==i&&e.match(".."))return o("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return o(i);if("="==i&&e.eat(">"))return o("=>","operator");if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),o("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),o("number","number");if("/"==i)return e.eat("*")?(t.tokenize=a,a(e,t)):e.eat("/")?(e.skipToEnd(),o("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e),e.eatWhile(/[gimy]/),o("regexp","string-2")):(e.eatWhile(Ct),o("operator","operator",e.current()));if("`"==i)return t.tokenize=l,l(e,t);if("#"==i)return e.skipToEnd(),o("error","error");if(Ct.test(i))return e.eatWhile(Ct),o("operator","operator",e.current());if(_t.test(i)){e.eatWhile(_t);var s=e.current(),c=Mt.propertyIsEnumerable(s)&&Mt[s];return c&&"."!=t.lastType?o(c.type,c.style,s):o("variable","variable",s)}}function r(e){return function(t,i){var n,r=!1;if(bt&&"@"==t.peek()&&t.match(xt))return i.tokenize=s,o("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||r);)r=!r&&"\\"==n;return r||(i.tokenize=s),o("string","string")}}function a(e,t){for(var i,n=!1;i=e.next();){if("/"==i&&n){t.tokenize=s;break}n="*"==i}return o("comment","comment")}function l(e,t){for(var i,n=!1;null!=(i=e.next());){if(!n&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=s;break}n=!n&&"\\"==i}return o("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(0>i)){for(var n=0,o=!1,s=i-1;s>=0;--s){var r=e.string.charAt(s),a=kt.indexOf(r);if(a>=0&&3>a){if(!n){++s;break}if(0==--n)break}else if(a>=3&&6>a)++n;else if(_t.test(r))o=!0;else if(o&&!n){++s;break}}o&&!n&&(t.fatArrowAt=s)}}function u(e,t,i,n,o,s){this.indented=e,this.column=t,this.type=i,this.prev=o,this.info=s,null!=n&&(this.align=n)}function d(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var i=n.vars;i;i=i.next)if(i.name==t)return!0}function h(e,t,i,n,o){var s=e.cc;for(Tt.state=e,Tt.stream=o,Tt.marked=null,Tt.cc=s,Tt.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var r=s.length?s.pop():yt?M:_;if(r(i,n)){for(;s.length&&s[s.length-1].lex;)s.pop()();return Tt.marked?Tt.marked:"variable"==i&&d(e,n)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Tt.cc.push(arguments[e])}function f(){return p.apply(null,arguments),!0}function m(e){function t(t){for(var i=t;i;i=i.next)if(i.name==e)return!0;return!1}var n=Tt.state;if(n.context){if(Tt.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;i.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function g(){Tt.state.context={prev:Tt.state.context,vars:Tt.state.localVars},Tt.state.localVars=At}function v(){Tt.state.localVars=Tt.state.context.vars,Tt.state.context=Tt.state.context.prev}function b(e,t){var i=function(){var i=Tt.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var o=i.lexical;o&&")"==o.type&&o.align;o=o.prev)n=o.indented;i.lexical=new u(n,Tt.stream.column(),e,null,i.lexical,t)};return i.lex=!0,i}function y(){var e=Tt.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(i){return i==e?f():";"==e?p():f(t)}return t}function _(e,t){return"var"==e?f(b("vardef",t.length),V,w(";"),y):"keyword a"==e?f(b("form"),M,_,y):"keyword b"==e?f(b("form"),_,y):"{"==e?f(b("}"),B,y):";"==e?f():"if"==e?("else"==Tt.state.lexical.info&&Tt.state.cc[Tt.state.cc.length-1]==y&&Tt.state.cc.pop()(),f(b("form"),M,_,y,G)):"function"==e?f(et):"for"==e?f(b("form"),X,_,y):"variable"==e?f(b("stat"),z):"switch"==e?f(b("form"),M,b("}","switch"),w("{"),B,y,y):"case"==e?f(M,w(":")):"default"==e?f(w(":")):"catch"==e?f(b("form"),g,w("("),tt,w(")"),_,y,v):"module"==e?f(b("form"),g,rt,v,y):"class"==e?f(b("form"),it,y):"export"==e?f(b("form"),at,y):"import"==e?f(b("form"),lt,y):p(b("stat"),M,w(";"),y)}function M(e){return x(e,!1)}function C(e){return x(e,!0)}function x(e,t){if(Tt.state.fatArrowAt==Tt.stream.start){var i=t?R:P;if("("==e)return f(g,b(")"),N(j,")"),y,w("=>"),i,v);if("variable"==e)return p(g,j,w("=>"),i,v)}var n=t?A:T;return St.hasOwnProperty(e)?f(n):"function"==e?f(et,n):"keyword c"==e?f(t?S:k):"("==e?f(b(")"),k,pt,w(")"),y,n):"operator"==e||"spread"==e?f(t?C:M):"["==e?f(b("]"),dt,y,n):"{"==e?L(F,"}",null,n):"quasi"==e?p(D,n):f()}function k(e){return e.match(/[;\}\)\],]/)?p():p(M)}function S(e){return e.match(/[;\}\)\],]/)?p():p(C)}function T(e,t){return","==e?f(M):A(e,t,!1)}function A(e,t,i){var n=0==i?T:A,o=0==i?M:C;return"=>"==e?f(g,i?R:P,v):"operator"==e?/\+\+|--/.test(t)?f(n):"?"==t?f(M,w(":"),o):f(o):"quasi"==e?p(D,n):";"!=e?"("==e?L(C,")","call",n):"."==e?f(O,n):"["==e?f(b("]"),k,w("]"),y,n):void 0:void 0}function D(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?f(D):f(M,E)}function E(e){return"}"==e?(Tt.marked="string-2",Tt.state.tokenize=l,f(D)):void 0}function P(e){return c(Tt.stream,Tt.state),p("{"==e?_:M)}function R(e){return c(Tt.stream,Tt.state),p("{"==e?_:C)}function z(e){return":"==e?f(y,_):p(T,w(";"),y)}function O(e){return"variable"==e?(Tt.marked="property",f()):void 0}function F(e,t){return"variable"==e||"keyword"==Tt.style?(Tt.marked="property","get"==t||"set"==t?f(W):f(I)):"number"==e||"string"==e?(Tt.marked=bt?"property":Tt.style+" property",f(I)):"jsonld-keyword"==e?f(I):"["==e?f(M,w("]"),I):void 0}function W(e){return"variable"!=e?p(I):(Tt.marked="property",f(et))}function I(e){return":"==e?f(C):"("==e?p(et):void 0}function N(e,t){function i(n){if(","==n){var o=Tt.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),f(e,i)}return n==t?f():f(w(t))}return function(n){return n==t?f():p(e,i)}}function L(e,t,i){for(var n=3;n<arguments.length;n++)Tt.cc.push(arguments[n]);return f(b(t,i),N(e,t),y)}function B(e){return"}"==e?f():p(_,B)}function H(e){return wt&&":"==e?f(q):void 0}function q(e){return"variable"==e?(Tt.marked="variable-3",f()):void 0}function V(){return p(j,H,U,Y)}function j(e,t){return"variable"==e?(m(t),f()):"["==e?L(j,"]"):"{"==e?L($,"}"):void 0}function $(e,t){return"variable"!=e||Tt.stream.match(/^\s*:/,!1)?("variable"==e&&(Tt.marked="property"),f(w(":"),j,U)):(m(t),f(U))}function U(e,t){return"="==t?f(C):void 0}function Y(e){return","==e?f(V):void 0}function G(e,t){return"keyword b"==e&&"else"==t?f(b("form","else"),_,y):void 0}function X(e){return"("==e?f(b(")"),J,w(")"),y):void 0}function J(e){return"var"==e?f(V,w(";"),Q):";"==e?f(Q):"variable"==e?f(K):p(M,w(";"),Q)}function K(e,t){return"in"==t||"of"==t?(Tt.marked="keyword",f(M)):f(T,Q)}function Q(e,t){return";"==e?f(Z):"in"==t||"of"==t?(Tt.marked="keyword",f(M)):p(M,w(";"),Z)}function Z(e){")"!=e&&f(M)}function et(e,t){return"*"==t?(Tt.marked="keyword",f(et)):"variable"==e?(m(t),f(et)):"("==e?f(g,b(")"),N(tt,")"),y,_,v):void 0}function tt(e){return"spread"==e?f(tt):p(j,H)}function it(e,t){return"variable"==e?(m(t),f(nt)):void 0}function nt(e,t){return"extends"==t?f(M,nt):"{"==e?f(b("}"),ot,y):void 0}function ot(e,t){return"variable"==e||"keyword"==Tt.style?(Tt.marked="property","get"==t||"set"==t?f(st,et,ot):f(et,ot)):"*"==t?(Tt.marked="keyword",f(ot)):";"==e?f(ot):"}"==e?f():void 0}function st(e){return"variable"!=e?p():(Tt.marked="property",f())}function rt(e,t){return"string"==e?f(_):"variable"==e?(m(t),f(ut)):void 0}function at(e,t){return"*"==t?(Tt.marked="keyword",f(ut,w(";"))):"default"==t?(Tt.marked="keyword",f(M,w(";"))):p(_)}function lt(e){return"string"==e?f():p(ct,ut)}function ct(e,t){return"{"==e?L(ct,"}"):("variable"==e&&m(t),f())}function ut(e,t){return"from"==t?(Tt.marked="keyword",f(M)):void 0}function dt(e){return"]"==e?f():p(C,ht)}function ht(e){return"for"==e?p(pt,w("]")):","==e?f(N(S,"]")):p(N(C,"]"))}function pt(e){return"for"==e?f(X,pt):"if"==e?f(M,pt):void 0}var ft,mt,gt=t.indentUnit,vt=i.statementIndent,bt=i.jsonld,yt=i.json||bt,wt=i.typescript,_t=i.wordCharacters||/[\w$\xa1-\uffff]/,Mt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),n=e("keyword c"),o=e("operator"),s={type:"atom",style:"atom"},r={"if":e("if"),"while":t,"with":t,"else":i,"do":i,"try":i,"finally":i,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":o,"typeof":o,"instanceof":o,"true":s,"false":s,"null":s,undefined:s,NaN:s,Infinity:s,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),yield:n,"export":e("export"),"import":e("import"),"extends":n};if(wt){var a={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:a,number:a,bool:a,any:a};
for(var c in l)r[c]=l[c]}return r}(),Ct=/[+\-*&%=<>!?|~^]/,xt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,kt="([{}])",St={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Tt={state:null,column:null,marked:null,cc:null},At={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:s,lastType:"sof",cc:[],lexical:new u((e||0)-gt,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:0};return i.globalVars&&"object"==typeof i.globalVars&&(t.globalVars=i.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=a&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==ft?i:(t.lastType="operator"!=ft||"++"!=mt&&"--"!=mt?ft:"incdec",h(t,i,ft,mt,e))},indent:function(t,n){if(t.tokenize==a)return e.Pass;if(t.tokenize!=s)return 0;var o=n&&n.charAt(0),r=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var c=t.cc[l];if(c==y)r=r.prev;else if(c!=G)break}"stat"==r.type&&"}"==o&&(r=r.prev),vt&&")"==r.type&&"stat"==r.prev.type&&(r=r.prev);var u=r.type,d=o==u;return"vardef"==u?r.indented+("operator"==t.lastType||","==t.lastType?r.info+1:0):"form"==u&&"{"==o?r.indented:"form"==u?r.indented+gt:"stat"==u?r.indented+("operator"==t.lastType||","==t.lastType?vt||gt:0):"switch"!=r.info||d||0==i.doubleIndentSwitch?r.align?r.column+(d?0:1):r.indented+(d?0:gt):r.indented+(/^(?:case|default)\b/.test(n)?gt:2*gt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:yt?null:"/*",blockCommentEnd:yt?null:"*/",lineComment:yt?null:"//",fold:"brace",helperType:yt?"json":"javascript",jsonldMode:bt,jsonMode:yt}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}function i(e,t){for(var i,n=!1;null!=(i=e.next());){if(n&&"/"==i){t.tokenize=null;break}n="*"==i}return["comment","comment"]}function n(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,i){function n(e,t){return p=t,e}function o(e,t){var i=e.next();if(g[i]){var o=g[i](e,t);if(o!==!1)return o}return"@"==i?(e.eatWhile(/[\w\\\-]/),n("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?n(null,"compare"):'"'==i||"'"==i?(t.tokenize=s(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),n("atom","hash")):"!"==i?(e.match(/^\s*\w*/),n("keyword","important")):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),n("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?n(null,"select-op"):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?n("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?n(null,i):"u"==i&&e.match("rl(")?(e.backUp(1),t.tokenize=r,n("property","word")):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),n("property","word")):n(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),n("number","unit")):e.match(/^\w+-/)?n("meta","meta"):void 0}function s(e){return function(t,i){for(var o,s=!1;null!=(o=t.next());){if(o==e&&!s){")"==e&&t.backUp(1);break}s=!s&&"\\"==o}return(o==e||!s&&")"!=e)&&(i.tokenize=null),n("string","string")}}function r(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:s(")"),n(null,"(")}function a(e,t,i){this.type=e,this.indent=t,this.prev=i}function l(e,t,i){return e.context=new a(i,t.indentation()+m,e.context),i}function c(e){return e.context=e.context.prev,e.context.type}function u(e,t,i){return k[i.context.type](e,t,i)}function d(e,t,i,n){for(var o=n||1;o>0;o--)i.context=i.context.prev;return u(e,t,i)}function h(e){var t=e.current().toLowerCase();f=M.hasOwnProperty(t)?"atom":_.hasOwnProperty(t)?"keyword":"variable"}i.propertyKeywords||(i=e.resolveMode("text/css"));var p,f,m=t.indentUnit,g=i.tokenHooks,v=i.mediaTypes||{},b=i.mediaFeatures||{},y=i.propertyKeywords||{},w=i.nonStandardPropertyKeywords||{},_=i.colorKeywords||{},M=i.valueKeywords||{},C=i.fontProperties||{},x=i.allowNested,k={};return k.top=function(e,t,i){if("{"==e)return l(i,t,"block");if("}"==e&&i.context.prev)return c(i);if("@media"==e)return l(i,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(i,t,"at");if("hash"==e)f="builtin";else if("word"==e)f="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(i,t,"interpolation");if(":"==e)return"pseudo";if(x&&"("==e)return l(i,t,"parens")}return i.context.type},k.block=function(e,t,i){if("word"==e){var n=t.current().toLowerCase();return y.hasOwnProperty(n)?(f="property","maybeprop"):w.hasOwnProperty(n)?(f="string-2","maybeprop"):x?(f=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(f+=" error","maybeprop")}return"meta"==e?"block":x||"hash"!=e&&"qualifier"!=e?k.top(e,t,i):(f="error","block")},k.maybeprop=function(e,t,i){return":"==e?l(i,t,"prop"):u(e,t,i)},k.prop=function(e,t,i){if(";"==e)return c(i);if("{"==e&&x)return l(i,t,"propBlock");if("}"==e||"{"==e)return d(e,t,i);if("("==e)return l(i,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)h(t);else if("interpolation"==e)return l(i,t,"interpolation")}else f+=" error";return"prop"},k.propBlock=function(e,t,i){return"}"==e?c(i):"word"==e?(f="property","maybeprop"):i.context.type},k.parens=function(e,t,i){return"{"==e||"}"==e?d(e,t,i):")"==e?c(i):"("==e?l(i,t,"parens"):("word"==e&&h(t),"parens")},k.pseudo=function(e,t,i){return"word"==e?(f="variable-3",i.context.type):u(e,t,i)},k.media=function(e,t,i){if("("==e)return l(i,t,"media_parens");if("}"==e)return d(e,t,i);if("{"==e)return c(i)&&l(i,t,x?"block":"top");if("word"==e){var n=t.current().toLowerCase();f="only"==n||"not"==n||"and"==n?"keyword":v.hasOwnProperty(n)?"attribute":b.hasOwnProperty(n)?"property":"error"}return i.context.type},k.media_parens=function(e,t,i){return")"==e?c(i):"{"==e||"}"==e?d(e,t,i,2):k.media(e,t,i)},k.font_face_before=function(e,t,i){return"{"==e?l(i,t,"font_face"):u(e,t,i)},k.font_face=function(e,t,i){return"}"==e?c(i):"word"==e?(f=C.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},k.keyframes=function(e,t,i){return"word"==e?(f="variable","keyframes"):"{"==e?l(i,t,"top"):u(e,t,i)},k.at=function(e,t,i){return";"==e?c(i):"{"==e||"}"==e?d(e,t,i):("word"==e?f="tag":"hash"==e&&(f="builtin"),"at")},k.interpolation=function(e,t,i){return"}"==e?c(i):"{"==e||";"==e?d(e,t,i):("variable"!=e&&(f="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new a("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var i=(t.tokenize||o)(e,t);return i&&"object"==typeof i&&(p=i[1],i=i[0]),f=i,t.state=k[t.state](p,e,t),f},indent:function(e,t){var i=e.context,n=t&&t.charAt(0),o=i.indent;return"prop"!=i.type||"}"!=n&&")"!=n||(i=i.prev),!i.prev||("}"!=n||"block"!=i.type&&"top"!=i.type&&"interpolation"!=i.type&&"font_face"!=i.type)&&(")"!=n||"parens"!=i.type&&"media_parens"!=i.type)&&("{"!=n||"at"!=i.type&&"media"!=i.type)||(o=i.indent-m,i=i.prev),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var o=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],s=t(o),r=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],a=t(r),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=t(l),u=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],d=t(u),h=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],p=t(h),f=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],m=t(f),g=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=t(g),b=o.concat(r).concat(l).concat(u).concat(h).concat(f);e.registerHelper("hintWords","css",b),e.defineMIME("text/css",{mediaTypes:s,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:d,colorKeywords:p,valueKeywords:m,fontProperties:v,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=n,n(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=i,i(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:s,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:d,colorKeywords:p,valueKeywords:m,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:s,mediaFeatures:a,propertyKeywords:c,nonStandardPropertyKeywords:d,colorKeywords:p,valueKeywords:m,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){e.defineMode("htmlmixed",function(t,i){function n(e,t){var i=t.htmlState.tagName;i&&(i=i.toLowerCase());var n=a.token(e,t.htmlState);if("script"==i&&/\btag\b/.test(n)&&">"==e.current()){var o=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);o=o?o[1]:"",o&&/[\"\']/.test(o.charAt(0))&&(o=o.slice(1,o.length-1));for(var u=0;u<c.length;++u){var d=c[u];if("string"==typeof d.matches?o==d.matches:d.matches.test(o)){d.mode&&(t.token=s,t.localMode=d.mode,t.localState=d.mode.startState&&d.mode.startState(a.indent(t.htmlState,"")));break}}}else"style"==i&&/\btag\b/.test(n)&&">"==e.current()&&(t.token=r,t.localMode=l,t.localState=l.startState(a.indent(t.htmlState,"")));return n}function o(e,t,i){var n,o=e.current(),s=o.search(t);return s>-1?e.backUp(o.length-s):(n=o.match(/<\/?$/))&&(e.backUp(o.length),e.match(t,!1)||e.match(o)),i}function s(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,null):o(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function r(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,null):o(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var a=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag}),l=e.getMode(t,"css"),c=[],u=i&&i.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),u)for(var d=0;d<u.length;++d){var h=u[d];c.push({matches:h.matches,mode:h.mode&&e.getMode(t,h.mode)})}return c.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=a.startState();return{token:n,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var i=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:i,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,i){return!t.localMode||/^\s*<\//.test(i)?a.indent(t.htmlState,i):t.localMode.indent?t.localMode.indent(t.localState,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/addon/edit/matchbrackets",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n,o){var s=e.getLineHandle(t.line),l=t.ch-1,c=l>=0&&a[s.text.charAt(l)]||a[s.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(n&&u>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(r(t.line,l+1)),h=i(e,r(t.line,l+(u>0?1:0)),u,d||null,o);return null==h?null:{from:r(t.line,l),to:h&&h.pos,match:h&&h.ch==c.charAt(0),forward:u>0}}function i(e,t,i,n,o){for(var s=o&&o.maxScanLineLength||1e4,l=o&&o.maxScanLines||1e3,c=[],u=o&&o.bracketRegex?o.bracketRegex:/[(){}[\]]/,d=i>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),h=t.line;h!=d;h+=i){var p=e.getLine(h);if(p){var f=i>0?0:p.length-1,m=i>0?p.length:-1;if(!(p.length>s))for(h==t.line&&(f=t.ch-(0>i?1:0));f!=m;f+=i){var g=p.charAt(f);if(u.test(g)&&(void 0===n||e.getTokenTypeAt(r(h,f+1))==n)){var v=a[g];if(">"==v.charAt(1)==i>0)c.push(g);else{if(!c.length)return{pos:r(h,f),ch:g};c.pop()}}}}}return h-i==(i>0?e.lastLine():e.firstLine())?!1:null}function n(e,i,n){for(var o=e.state.matchBrackets.maxHighlightLineLength||1e3,a=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,!1,n);if(u&&e.getLine(u.from.line).length<=o){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(e.markText(u.from,r(u.from.line,u.from.ch+1),{className:d})),u.to&&e.getLine(u.to.line).length<=o&&a.push(e.markText(u.to,r(u.to.line,u.to.ch+1),{className:d}))}}if(a.length){s&&e.state.focused&&e.display.input.focus();var h=function(){e.operation(function(){for(var e=0;e<a.length;e++)a[e].clear()})};if(!i)return h;setTimeout(h,800)}}function o(e){e.operation(function(){l&&(l(),l=null),l=n(e,!1,e.state.matchBrackets)})}var s=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),r=e.Pos,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,i,n){n&&n!=e.Init&&t.off("cursorActivity",o),i&&(t.state.matchBrackets="object"==typeof i?i:{},t.on("cursorActivity",o))}),e.defineExtension("matchBrackets",function(){n(this,!0)}),e.defineExtension("findMatchingBracket",function(e,i,n){return t(this,e,i,n)}),e.defineExtension("scanForBracket",function(e,t,n,o){return i(this,e,t,n,o)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/addon/search/searchcursor",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,o,s){if(this.atOccurrence=!1,this.doc=e,null==s&&"string"==typeof t&&(s=!1),o=o?e.clipPos(o):n(0,0),this.pos={from:o,to:o},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(i,o){if(i){t.lastIndex=0;for(var s,r,a=e.getLine(o.line).slice(0,o.ch),l=0;;){t.lastIndex=l;var c=t.exec(a);if(!c)break;if(s=c,r=s.index,l=s.index+(s[0].length||1),l==a.length)break}var u=s&&s[0].length||0;u||(0==r&&0==a.length?s=void 0:r!=e.getLine(o.line).length&&u++)}else{t.lastIndex=o.ch;var a=e.getLine(o.line),s=t.exec(a),u=s&&s[0].length||0,r=s&&s.index;r+u==a.length||u||(u=1)}return s&&u?{from:n(o.line,r),to:n(o.line,r+u),match:s}:void 0};else{var r=t;s&&(t=t.toLowerCase());var a=s?function(e){return e.toLowerCase()}:function(e){return e},l=t.split("\n");if(1==l.length)this.matches=t.length?function(o,s){if(o){var l=e.getLine(s.line).slice(0,s.ch),c=a(l),u=c.lastIndexOf(t);if(u>-1)return u=i(l,c,u),{from:n(s.line,u),to:n(s.line,u+r.length)}}else{var l=e.getLine(s.line).slice(s.ch),c=a(l),u=c.indexOf(t);if(u>-1)return u=i(l,c,u)+s.ch,{from:n(s.line,u),to:n(s.line,u+r.length)}}}:function(){};else{var c=r.split("\n");this.matches=function(t,i){var o=l.length-1;if(t){if(i.line-(l.length-1)<e.firstLine())return;if(a(e.getLine(i.line).slice(0,c[o].length))!=l[l.length-1])return;for(var s=n(i.line,c[o].length),r=i.line-1,u=o-1;u>=1;--u,--r)if(l[u]!=a(e.getLine(r)))return;var d=e.getLine(r),h=d.length-c[0].length;if(a(d.slice(h))!=l[0])return;return{from:n(r,h),to:s}}if(!(i.line+(l.length-1)>e.lastLine())){var d=e.getLine(i.line),h=d.length-c[0].length;if(a(d.slice(h))==l[0]){for(var p=n(i.line,h),r=i.line+1,u=1;o>u;++u,++r)if(l[u]!=a(e.getLine(r)))return;if(a(e.getLine(r).slice(0,c[o].length))==l[o])return{from:p,to:n(r,c[o].length)}}}}}}}function i(e,t,i){if(e.length==t.length)return i;for(var n=Math.min(i,e.length);;){var o=e.slice(0,n).toLowerCase().length;if(i>o)++n;else{if(!(o>i))return n;--n}}}var n=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=n(e,0);return i.pos={from:t,to:t},i.atOccurrence=!1,!1}for(var i=this,o=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,o))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!o.line)return t(0);o=n(o.line-1,this.doc.getLine(o.line-1).length)}else{var s=this.doc.lineCount();if(o.line==s-1)return t(s);o=n(o.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to),this.pos.to=n(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,i,n){return new t(this.doc,e,i,n)}),e.defineDocExtension("getSearchCursor",function(e,i,n){return new t(this,e,i,n)}),e.defineExtension("selectMatches",function(t,i){for(var n,o=[],s=this.getSearchCursor(t,this.getCursor("from"),i);(n=s.findNext())&&!(e.cmpPos(s.to(),this.getCursor("to"))>0);)o.push({anchor:s.from(),head:s.to()});
o.length&&this.setSelections(o,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/addon/dialog/dialog",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,i){var n,o=e.getWrapperElement();return n=o.appendChild(document.createElement("div")),n.className=i?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?n.innerHTML=t:n.appendChild(t),n}function i(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(n,o,s){function r(e){if("string"==typeof e)d.value=e;else{if(c)return;c=!0,l.parentNode.removeChild(l),u.focus(),s.onClose&&s.onClose(l)}}s||(s={}),i(this,null);var a,l=t(this,n,s.bottom),c=!1,u=this,d=l.getElementsByTagName("input")[0];return d?(s.value&&(d.value=s.value,d.select()),s.onInput&&e.on(d,"input",function(e){s.onInput(e,d.value,r)}),s.onKeyUp&&e.on(d,"keyup",function(e){s.onKeyUp(e,d.value,r)}),e.on(d,"keydown",function(t){s&&s.onKeyDown&&s.onKeyDown(t,d.value,r)||((27==t.keyCode||s.closeOnEnter!==!1&&13==t.keyCode)&&(d.blur(),e.e_stop(t),r()),13==t.keyCode&&o(d.value))}),s.closeOnBlur!==!1&&e.on(d,"blur",r),d.focus()):(a=l.getElementsByTagName("button")[0])&&(e.on(a,"click",function(){r(),u.focus()}),s.closeOnBlur!==!1&&e.on(a,"blur",r),a.focus()),r}),e.defineExtension("openConfirm",function(n,o,s){function r(){c||(c=!0,a.parentNode.removeChild(a),u.focus())}i(this,null);var a=t(this,n,s&&s.bottom),l=a.getElementsByTagName("button"),c=!1,u=this,d=1;l[0].focus();for(var h=0;h<l.length;++h){var p=l[h];!function(t){e.on(p,"click",function(i){e.e_preventDefault(i),r(),t&&t(u)})}(o[h]),e.on(p,"blur",function(){--d,setTimeout(function(){0>=d&&r()},200)}),e.on(p,"focus",function(){++d})}}),e.defineExtension("openNotification",function(n,o){function s(){l||(l=!0,clearTimeout(r),a.parentNode.removeChild(a))}i(this,s);var r,a=t(this,n,o&&o.bottom),l=!1,c=o&&"undefined"!=typeof o.duration?o.duration:5e3;return e.on(a,"click",function(t){e.e_preventDefault(t),s()}),c&&(r=setTimeout(s,c)),s})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?_wAMD.define("codemirror/addon/search/search",["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var i=e.exec(t.string);return i&&i.index==t.pos?(t.pos+=i[0].length,"searching"):(i?t.pos=i.index:t.skipToEnd(),void 0)}}}function i(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function n(e){return e.state.search||(e.state.search=new i)}function o(e){return"string"==typeof e&&e==e.toLowerCase()}function s(e,t,i){return e.getSearchCursor(t,i,o(t))}function r(e,t,i,n,o){e.openDialog?e.openDialog(t,o,{value:n}):o(prompt(i,n))}function a(e,t,i,n){e.openConfirm?e.openConfirm(t,n):confirm(i)&&n[0]()}function l(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?(e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i"),e.test("")&&(e=/x^/)):""==e&&(e=/x^/),e}function c(e,i){var s=n(e);return s.query?u(e,i):(r(e,p,"Search for:",e.getSelection(),function(n){e.operation(function(){n&&!s.query&&(s.query=l(n),e.removeOverlay(s.overlay,o(s.query)),s.overlay=t(s.query,o(s.query)),e.addOverlay(s.overlay),s.posFrom=s.posTo=e.getCursor(),u(e,i))})}),void 0)}function u(t,i){t.operation(function(){var o=n(t),r=s(t,o.query,i?o.posFrom:o.posTo);(r.find(i)||(r=s(t,o.query,i?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),r.find(i)))&&(t.setSelection(r.from(),r.to()),t.scrollIntoView({from:r.from(),to:r.to()}),o.posFrom=r.from(),o.posTo=r.to())})}function d(e){e.operation(function(){var t=n(e);t.query&&(t.query=null,e.removeOverlay(t.overlay))})}function h(e,t){e.getOption("readOnly")||r(e,f,"Replace:",e.getSelection(),function(i){i&&(i=l(i),r(e,m,"Replace with:","",function(n){if(t)e.operation(function(){for(var t=s(e,i);t.findNext();)if("string"!=typeof i){var o=e.getRange(t.from(),t.to()).match(i);t.replace(n.replace(/\$(\d)/g,function(e,t){return o[t]}))}else t.replace(n)});else{d(e);var o=s(e,i,e.getCursor()),r=function(){var t,n=o.from();!(t=o.findNext())&&(o=s(e,i),!(t=o.findNext())||n&&o.from().line==n.line&&o.from().ch==n.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),a(e,g,"Replace?",[function(){l(t)},r]))},l=function(e){o.replace("string"==typeof i?n:n.replace(/\$(\d)/g,function(t,i){return e[i]})),r()};r()}}))})}var p='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',f='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',m='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',g="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){d(e),c(e)},e.commands.findNext=c,e.commands.findPrev=function(e){c(e,!0)},e.commands.clearSearch=d,e.commands.replace=h,e.commands.replaceAll=function(e){h(e,!0)}}),_wAMD.define("editor/theme-editor/view/CodeEditorView",["jquery","backbone-all","mustache","editor/app","editor/theme-editor/templates","codemirror/lib/codemirror","codemirror/mode/htmlmixed/htmlmixed","codemirror/addon/edit/matchbrackets","codemirror/addon/search/search","codemirror/addon/search/searchcursor","codemirror/addon/dialog/dialog"],function(e,t,i,n,o,s){var r={theme:"monokai",mode:"htmlmixed",lineNumbers:!0,textWrapping:!1,matchBrackets:!0,indentWithTabs:!0,smartIndent:!1,tabSize:4,indentUnit:4,electricChars:!1,extraKeys:{Tab:"indentMore","Shift-Tab":"indentLess"}},a=t.Marionette.ItemView.extend({className:"inner",template:i.compile(o.codeEditor),id:"te-code-editor",ui:{codePane:"#te-code-editor"},onBeforeRender:function(){},initialize:function(){},onRender:function(){var e,t=this;codeEditor=s(function(e){t.$el.find(".inner").html(e)},r),codeEditor.on("inputRead",function(){t.refreshCodeEditor()}),codeEditor.on("keyup",function(){t.refreshCodeEditor()}),codeEditor.on("scroll",function(){clearTimeout(e),e=setTimeout(function(){n.vent.trigger("themeEditor:saveEditorState")},1e3)})},refreshCodeEditor:function(){var e=this,t=e.model.get("activeFilePath"),i=e.model.get("$activeNode");i.data("contents",codeEditor.getValue());var o=t.substr(0,t.indexOf("/"));"layouts"==o?e.saveLayout(t):"partials"==o?e.savePartial(t):"assets"==o&&e.saveAssets(t),n.vent.trigger("themeEditor:saveEditorState"),e.model.get("autoRefresh")&&n.vent.trigger("themeEditor:refreshPreview")},saveLayout:function(e){var t=codeEditor.getValue(),i=e.substr(e.indexOf("/")+1);this.model.get("directory").layouts[i]=t},savePartial:function(e){var t=codeEditor.getValue();this.model.get("overridingPartials")["/"+e]=t},saveAssets:function(e){var t=e.substr(e.lastIndexOf("/")+1);"main_style.css"==t?this.model.get("directory").assets["main_style.css"]=codeEditor.getValue():(n.vent.trigger("themeEditor:updateAssetFileContents",t,e),this.model.get("updatedThemeFiles")[e]=codeEditor.getValue())}});return a}),_wAMD.define("editor/theme-editor/view/PreviewThemeView",["jquery","backbone-all","mustache","editor/app","editor/theme-editor/templates"],function(e,t,i,n,o){var s=t.Marionette.ItemView.extend({className:"inner",template:i.compile(o.preview),iframe:void 0,ui:{controls:"#preview-controls",codeOpen:"#preview-controls .open",codeClosed:"#preview-controls .closed",previewPane:".content",previewFrame:"#preview-iframe",popOutButton:"#te-popout-button"},events:{"mousedown .drag-resize":"dragControl","click @ui.codeOpen":"toggleEditor","click @ui.codeClosed":"toggleEditor","click @ui.popOutButton":"popout"},initialize:function(){e(window).on("resize.themeEditor",function(){n.vent.trigger("themeEditor:layoutResize")})},onRender:function(){},onShow:function(){n.vent.trigger("themeEditor:layoutResize")},onClose:function(){e(window).off("resize.themeEditor")},dragControl:function(e){n.vent.trigger("themeEditor:dragResize",e)},toggleEditor:function(e){n.vent.trigger("themeEditor:toggleEditor",e)},popout:function(){var e=window.open("/editor/themeEditorPopout.php","theme_editor_popout","status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,width=1100,height=750");this.model.set("popoutWindow",e)}});return s}),_wAMD.define("editor/theme-editor/view/FileInfoView",["jquery","backbone-all","mustache","editor/theme-editor/templates"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({className:"inner",template:i.compile(n.fileInfo),ui:{newFileInput:"#te-file-name-input input",fileName:"#te-file-name-text",fileCell:".te-fileinfo-td",inputFileCell:"#te-file-name-input"},events:{"click #te-file-rename":"showEditFileNameInput","click #te-file-delete":"deleteFile","click #te-save-file-name":"saveNewfileName","click #te-cancel-edit-file":"removeEditFileNameBox"},initialize:function(){},onRender:function(){},showEditFileNameInput:function(){this.ui.fileCell.hide(),this.ui.inputFileCell.show(),this.fileName=this.ui.fileName.html(),this.ui.newFileInput.val(this.fileName)},saveNewfileName:function(){var e=this.ui.newFileInput.val().strip(),t="/"+this.model.get("activeFilePath"),i=t.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")+"/"+e;editorApp.vent.trigger("themeEditor:update",t,i,!0),this.removeEditFileNameBox()},removeEditFileNameBox:function(){this.ui.inputFileCell.hide(),this.ui.fileCell.show()},deleteFile:function(){this.fileName=this.ui.fileName.html(),editorApp.vent.trigger("themeEditor:delete",this.fileName,"assets",this.model.get("activeFilePath"),!0)}});return o}),_wAMD.define("editor/theme-editor/ThemeEditorView",["jquery","backbone-all","mustache","editor/theme-editor/templates","editor/theme-editor/view/TopbarView","editor/theme-editor/view/SidebarView","editor/theme-editor/view/CodeEditorView","editor/theme-editor/view/PreviewThemeView","editor/theme-editor/view/FileInfoView"],function(e,t,i,n,o,s,r,a,l){var c=t.Marionette.Layout.extend({className:"inner",template:i.compile(n.mainTemplate),regions:{topbar:"#te-head",sidebar:"#te-sidebar",codeEditor:"#te-code",preview:"#te-preview",fileInfo:"#te-fileinfo"},events:{"mousedown #drag-vertical .drag-resize":"sidebarResize"},initialize:function(){},onRender:function(){this.topbar.show(new o({model:this.model})),this.sidebar.show(new s({model:this.model})),this.codeEditor.show(new r({model:this.model})),this.preview.show(new a({model:this.model})),this.fileInfo.show(new l({model:this.model})),editorApp.vent.trigger("themeEditor:showDefaultCode"),editorApp.vent.trigger("themeEditor:refreshPreview",!0),this.collapseSubFolders()},collapseSubFolders:function(){e("li.sidebar-top-folder").addClass("expanded").find("li.sidebar-folder").addClass("collapsed").children("ul").slideUp(0)},sidebarResize:function(e){editorApp.vent.trigger("themeEditor:sidebarResize",e)},initFileArea:function(){}});return c}),_wAMD.define("editor/theme-editor/module",["jquery","underscore","backbone-all","editor/app","editor/theme-editor/model/Theme","./ThemeEditorView","editor/theme-editor/view/FileInfoView","editor/theme-editor/view/SidebarView","editor/theme-editor/templates","util/base64"],function(e,t,i,n,o,s,r,a,l,c){n.module("ThemeEditor",function(r){var a=0,l=0,u={dirname:function(e){return e.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")},basename:function(e,t){var i=e,n=i.charAt(i.length-1);return("/"===n||"\\"===n)&&(i=i.slice(0,-1)),i=i.replace(/^.*[\/\\]/g,""),"string"==typeof t&&i.substr(i.length-t.length)==t&&(i=i.substr(0,i.length-t.length)),i},pathinfo:function(e,t){var i="",n="",o="",s=0,r={},a=0,l=0,c=!1,u=!1,d=!1;if(!e)return!1;t||(t="PATHINFO_ALL");var h={PATHINFO_DIRNAME:1,PATHINFO_BASENAME:2,PATHINFO_EXTENSION:4,PATHINFO_FILENAME:8,PATHINFO_ALL:0};for(o in h)h.hasOwnProperty(o)&&(h.PATHINFO_ALL=h.PATHINFO_ALL||h[o]);if("number"!=typeof t){for(t=[].concat(t),l=0;l<t.length;l++)h[t[l]]&&(s=s||h[t[l]]);t=s}var p=function(e){var t=e+"",i=t.lastIndexOf(".")+1;return i?i!==t.length?t.substr(i):"":!1};if(t&&h.PATHINFO_DIRNAME){var f=e.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"");r.dirname=f===e?".":f}t&&h.PATHINFO_BASENAME&&(!1===c&&(c=this.basename(e)),r.basename=c),t&&h.PATHINFO_EXTENSION&&(!1===c&&(c=this.basename(e)),!1===u&&(u=p(c)),!1!==u&&(r.extension=u)),t&&h.PATHINFO_FILENAME&&(!1===c&&(c=this.basename(e)),!1===u&&(u=p(c)),!1===d&&(d=c.slice(0,c.length-(u?u.length+1:u===!1?0:1))),r.filename=d),a=0;for(i in r)r.hasOwnProperty(i)&&(a++,n=i);return 1===a?r[n]:r},getTopLevelFolder:function(e){return e.split("/")[1]},getFileName:function(e){var t=new RegExp(/[^\\/]+\.[^\\/]+$/),i=e.match(t)||!1;if(i)i=i[0];else if("/"!==e[e.length-1]){var n=e.split("/");return n[n.length-1]}return i},pathHasFile:function(e){var t=this.getFileName(e)?!0:!1;return t},isImage:function(e){var t=u.pathinfo(e).extension.toLowerCase();return"jpg"==t||"jpeg"==t||"png"==t||"gif"==t||"bmp"==t}},d={open:function(){var t=new o;t.fetch().done(function(){var i=e("#theme-editor-container");r.layout=new s({model:t}),i.append(r.layout.el),r.layout.render()})},close:function(){var t=r.layout.model,i=t.get("popoutWindow"),n=!1;i&&(n=e(i.document).find("#te-preview-iframe").is(":visible"),n&&i.close()),r.layout.close(),e(window).off("resize.themeEditor"),Weebly.Editor.RPC.Theme.removePreviewPartials(t.get("meta").customThemeID)},toggleFolder:function(t){var i=e(t.currentTarget),o=function(){n.vent.trigger("themeEditor:nodeActivity")};i.children("ul").is(":visible")?(i.children("ul").slideUp("slow").promise().done(o),i.switchClass("expanded","collapsed")):(i.children("ul").slideDown("slow").promise().done(o),i.switchClass("collapsed","expanded"))},layoutResize:function(){var e,t,i=document.viewport.getDimensions(),n=i.width,o=i.height-r.layout.topbar.$el.height(),s=r.layout.sidebar.$el.width(),a=r.layout.preview.$el.find(".drag-resize").width(),c=r.layout.model.get("popoutWindow");0===l&&(l=.7*o),c?t={height:o,width:n-s}:(e={height:l-9,width:n-s},t={height:o-l,width:n-s},r.layout.preview.$el.css(e).end().find("iframe").css(e)),r.layout.codeEditor.$el.css(t).end().find(".CodeMirror").css(t),r.layout.preview.$el.find(".drag-resize").css({left:(n-s)/2-a/2}),codeEditor.refresh()},refreshPreview:function(t){var i=r.layout.model.get("popoutWindow");if(i){var n=e(i.document).find("#te-preview-iframe");n[0].contentWindow.PAGE_ID=e("#preview-iframe")[0].contentWindow.PAGE_ID}else var n=r.layout.preview.$el.find("#preview-iframe");var o=++a,s=t||-1==codeEditor.currentFile.indexOf("main_style.css")?!1:!0;setTimeout(function(){o==a&&d.generatePreviewIframe(n,codeEditor.currentFile,codeEditor.getValue(),s,t)},1e3)},generatePreviewIframe:function(e,t,i,n,o){var s=r.layout.model,a=s.get("meta").customThemeID,l={themeID:a||currentTheme,pageID:e[0].contentWindow.PAGE_ID||window.currentPage,siteID:currentSite,css:s.get("directory").assets["main_style.css"],initial:o?!0:!1,isMobile:Weebly.mobile.isMobileView,cookie:document.cookie};window.currentPage.match(/store/)&&(l.route=window.currentPage),n?(l.css=i,l.only_css=1):t&&-1!=t.indexOf(".tpl")?(l.partial=i,l.partialPath=codeEditor.currentFilePath):(l.pageType=t.replace(".html",""),l.template=i),new Ajax.Request("/editor/apps/preview.php",{parameters:l,onSuccess:function(t){if(n)d.injectPreviewCss(e,t);else{window.location.href.indexOf("#")>-1&&(window.location.hash="theme-editor");var i=e[0].contentWindow.document;i.open(),i.write(t.responseText),i.close()}}})},injectPreviewCss:function(e,t){var i=t.responseText.evalJSON(),n=i.css,o=i.fonts,s=e[0],r=e.contents().find("head"),a=s.contentWindow.document.createElement("style");a.setAttribute("id","preview-css"),a.setAttribute("type","text/css"),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(s.contentWindow.document.createTextNode(n)),e.contents().find("#preview-css").remove(),r.append(a),o&&(r.find("link.preview-font").remove(),r.append(o))},dragResize:function(t){function i(e){var t=s-e.pageY,i=a+t;i=Math.max(i,75),i=Math.min(i,c-75),l=i,n.vent.trigger("themeEditor:layoutResize")}function o(){e("body").off("mousemove",i).off("mouseup",o),r.layout.$el.find(".theme-editor").removeClass("no-select"),u.hide()}if(1!==!t.which){var s=t.pageY,a=l,c=document.viewport.getDimensions().height-9,u=r.layout.$el.find(".te-cover");r.layout.$el.find(".theme-editor").addClass("no-select"),u.show(),e("body").on("mousemove",i).on("mouseup",o)}},sidebarResize:function(t){function i(e){var t=s-e.pageX,i=r.layout.sidebar.$el.width(),o=i-t;if(!(234>o)){s=e.pageX,r.layout.sidebar.$el.css({width:o});var a=parseInt(r.layout.$el.find("#drag-vertical").css("left"),10),l=a-t;r.layout.$el.find("#drag-vertical").css({left:l}),r.layout.$el.find(".main .wrapper").css({"padding-left":o}),n.vent.trigger("themeEditor:layoutResize")}}function o(){e("body").off("mousemove",i).off("mouseup",o),r.layout.$el.find(".theme-editor").removeClass("no-select"),a.hide()}if(1!==!t.which){var s=t.pageX,a=r.layout.$el.find(".te-cover");r.layout.$el.find(".theme-editor").addClass("no-select"),a.show(),e("body").on("mousemove",i).on("mouseup",o)}},showDefaultCode:function(){r.layout.sidebar.$el.find("li[data-default]").trigger("click")},showFileInfoView:function(t){var i=r.layout.model;r.layout.codeEditor.$el.hide(),r.layout.preview.$el.hide(),r.layout.fileInfo.$el.show();var n=t.data("fileName");if(e("#te-file-name-text").html(n),u.isImage(n)){e("#te-fileinfo-image").show();var o=new Image,s=t.data("path"),a=s.split("/"),l=a.slice(1,a.length).join("/");o.src=i.get("meta").theme_path+"/files/"+l,e(o).load(function(){e("#te-fileinfo-dimensions").html(this.width+" x "+this.height),e("#te-fileinfo-image-tag").html(this);var t=e(window).height()-e("#te-fileinfo-image").offset().top-11;e("#te-fileinfo-image").css("height",t+"px")})}else e("#te-fileinfo-image").hide()},hideFileInfoView:function(){r.layout.fileInfo.$el.hide(),r.layout.codeEditor.$el.show(),r.layout.model.get("popoutWindow")||r.layout.preview.$el.show()},create:function(e,t,i){var n=r.layout.model,o=u.getTopLevelFolder(e),s=d.getNestedFolder(e),a=u.basename(e);if("partials"===o)n.get("overridingPartials")[e]=t;else if("layouts"===o)n.get("themeFilesToRevert")[a]={new_path:e};else if("assets"===o&&!u.pathHasFile(e)){var l=Weebly.Editor.RPC.Theme.createAssetsFolder(n.get("meta").customThemeID,e,null);l.done(function(){n.get("themeFilesToRevert")[a]={new_path:e}})}s&&(s[a]="partials"===o&&u.pathHasFile(e)?{contents:t,type:"override"}:t),i&&d.rerenderSidebar(a)},update:function(e,t,i){if(e!==t){var n=r.layout.model,o=u.getTopLevelFolder(e),s=d.getNestedFolder(t),a=u.basename(e),l=u.basename(t);if("partials"===o)n.get("partialsToDelete").push(e),s[a].contents?n.get("overridingPartials")[t]=s[a].contents:d.renamePartialFolder(t,s[a]);else if("assets"!==o||u.getFileName(e))"assets"===o&&(d.renameAsset(a,l),delete n.get("themeFilesToRevert")[a]);else{var c=Weebly.Editor.RPC.Theme.createAssetsFolder(n.get("meta").customThemeID,t,e);c.done(function(){delete n.get("themeFilesToRevert")[a],n.get("themeFilesToRevert")[l]={new_path:t}})}s[l]=s[a],delete s[a],i&&d.rerenderSidebar(l)}},"delete":function(e,t,i,n){e?d.deleteFile(e,t,i):d.deleteFolder(t,i),n&&d.rerenderSidebar()},deleteFolder:function(e,i){var n=r.layout.model,o=[],s=i.split("/"),a=s[s.length-2],l=s.slice(0,s.length-2),c=u.getTopLevelFolder("/"+i);"partials"===c?(o=t.clone(n.get("partialsToDelete")),o.push("/"+i),n.set("partialsToDelete",o)):(o=t.clone(n.get("foldersToDelete")),o.push("/"+i),n.set("foldersToDelete",o));for(var d=n.get("directory")[l.shift()],h=l.shift();h;)d.hasOwnProperty(h)&&(d=d[h],h=l.shift());delete d[a]},deleteFile:function(e,i,n){var o=r.layout.model,s=[];if("partials"===i){s=t.clone(o.get("partialsToDelete")),s.push("/"+n),o.set("partialsToDelete",s);var a=d.getNestedFolder("/"+n);delete a[n.split("/").last()]}else"assets"===i?(o.get("assetsToDelete").push(n),n=n.substr(0,n.lastIndexOf("/")+1),n?delete d.getNestedFolder("/"+n)[e]:delete o.get("directory")[i][e]):delete o.get("directory")[i][e]},renamePartialFolder:function(e,t){var i=r.layout.model;i.get("overridingPartials")[e]=t;for(var n in t)t[n].contents?i.get("overridingPartials")[e+n]=t[n].contents:d.renamePartialFolder(e+n+"/",t[n])},renameAsset:function(e,t){var i=r.layout.model,n=i.get("activeFilePath");d.checkUpdatedThemeFiles(t,n),n=n.substr(0,n.lastIndexOf("/")+1);var o=Weebly.Editor.RPC.Theme.renameThemeFile(i.get("meta").customThemeID,e,t,n);o.done(function(t){t=JSON.parse(t),i.get("themeFilesToRevert")[t.new_file_name]={old_path:n+e,new_path:n+t.new_file_name}})},renameTheme:function(e){var i=r.layout.model,n=t.clone(i.get("meta"));n.customThemeName=e,i.set("meta",n),i.set("themeName",e),d.rerenderSidebar(e)},updateAssetFileContents:function(e,t){var i=r.layout.model,n=t.substr(0,t.lastIndexOf("/")+1);if("assets/"!==n){var o=d.getNestedFolder("/"+n);o[e]=codeEditor.getValue()}else i.get("directory").assets[e]=c.encode(codeEditor.getValue())},getNestedFolder:function(e){var i,n=r.layout.model,o=n.get("directory")[u.getTopLevelFolder(e)];if(!o)return null;u.pathHasFile(e)&&(e=u.dirname(e)),i=t.compact(e.split("/")),i.shift();for(var s=i.shift();s;){if(!o.hasOwnProperty(s))return o;o=o[s],s=i.shift()}return o},updatePartialFolder:function(e,t){e=e.substr(e.indexOf("/")+1),t&&(t=t.substr(t.indexOf("/")+1));var i=Weebly.Editor.RPC.Theme.renameFolder(r.layout.model.get("meta").customThemeID,e,t);i.done(function(){})},checkUpdatedThemeFiles:function(e,t){var i=r.layout.model,n=i.get("updatedThemeFiles")[t];n&&(i.get("updatedThemeFiles")[u.dirname(t)+"/"+e]=n,delete i.get("updatedThemeFiles")[t])},rerenderSidebar:function(i){i=i||"main_style.css";var n=[],o=[],s=r.layout.$el.find(".expanded");t.each(s,function(e){n.push(e.id)});var a=r.layout.$el.find(".collapsed");t.each(a,function(e){o.push(e.id)}),r.layout.sidebar.currentView.render(),r.layout.collapseSubFolders(),t.each(n,function(t){var t='li[id="'+t+'"]';e(t).switchClass("collapsed","expanded"),e(t+" ul.file-directory:first").slideDown(0)}),t.each(o,function(t){var t='li[id="'+t+'"]';e(t).switchClass("expanded","collapsed"),e(t+" ul.file-directory:first").hide()}),r.layout.$el.find("[data-name='"+i+"']").trigger("click");var l=r.layout.sidebar.$el.find("li.active").position();r.layout.$el.find("#te-file-browser").scrollTop=l?l.top:0},cleanName:function(e){return e.replace(/[^a-zA-Z0-9-_.]/g,"")},selectText:function(e){var t=e.get(0).firstChild,i=e.get(0).innerHTML.lastIndexOf(".");if(-1==i&&(i=e.get(0).innerHTML.length),e.parent().css("text-overflow","clip"),e.siblings(".settings").hide(),e.addClass("editable-text").attr("contentEditable",!0).focus(),window.getSelection){var n=window.getSelection(),o=document.createRange();o.selectNodeContents(t),o.setEnd(t,i),n.removeAllRanges(),n.addRange(o)}},moveFile:function(e,i,n,o){function s(i){-1!==t.keys(i).indexOf(e)?(l=i[e],delete i[e]):t.each(i,function(e){e&&"object"==typeof e&&s(e)})}function a(t,i){return i.length<=0?(t[e]=l,void 0):(t=t[i[0]],i.splice(0,1),a(t,i),void 0)}var l,c=r.layout.model,u=i.split("/"),d=t.clone(c.get("directory"));if("partials"===o||"layouts"===o){s(d),a(d,u),c.set("directory",d);var h=t.clone(c.get("overridingPartials"));h["/"+i+"/"+e]=l,c.set("overridingPartials",h);var p=t.clone(c.get("partialsToDelete"));p.push(n+"/"+e),c.set("partialsToDelete",p)}if("assets"===o){var f=n+"/"+e,m=i+"/"+e,g=f.substr(f.indexOf("/")+1),v=m.substr(m.indexOf("/")+1),b=Weebly.Editor.RPC.Theme.moveAsset(c.get("meta").customThemeID,g,v);b.done(function(e){e&&(s(d),a(d,u),c.set("directory",d))})}},expandCodeEditor:function(){r.layout.preview.$el.hide();var e=r.layout.codeEditor.$el;e.find("#te-documentation-button").hide(),e.find("#te-preview-button").hide(),d.layoutResize()},popin:function(t){var i=r.layout.model,n=i.get("popoutWindow"),o=e(n.document).find("#te-preview-iframe").is(":visible");n.close(),n=null,i.set("popoutWindow",n),r.layout.preview.$el.show(),d.layoutResize(),o?(r.layout.preview.currentView.showPreview(),r.layout.preview.$el.find("#preview-iframe")[0].contentWindow.PAGE_ID!=t&&(r.layout.preview.$el.find("#preview-iframe")[0].contentWindow.PAGE_ID=t,d.refreshPreview(!0))):r.layout.preview.currentView.showDocumentation()},saveEditorState:function(){var e=r.layout.model,i=e.get("activeFilePath"),n=t.clone(e.get("codeState"));n[i]=codeEditor.getScrollerElement().scrollTop,e.set("codeState",n)}};r.vent=new i.Wreqr.EventAggregator,r.on("start",function(){n.vent.on({themeEditor:d.open,"themeEditor:close":d.close,"themeEditor:toggleFolder":d.toggleFolder,"themeEditor:layoutResize":d.layoutResize,"themeEditor:refreshPreview":d.refreshPreview,"themeEditor:dragResize":d.dragResize,"themeEditor:toggleEditor":d.toggleEditor,"themeEditor:showDefaultCode":d.showDefaultCode,"themeEditor:showFileInfoView":d.showFileInfoView,"themeEditor:hideFileInfoView":d.hideFileInfoView,"themeEditor:renameAsset":d.renameAsset,"themeEditor:renameTheme":d.renameTheme,"themeEditor:uploadFileSuccess":d.uploadFileSuccess,"themeEditor:selectText":d.selectText,"themeEditor:delete":d.delete,"themeEditor:update":d.update,"themeEditor:create":d.create,"themeEditor:updateAssetFileContents":d.updateAssetFileContents,"themeEditor:sidebarResize":d.sidebarResize,"themeEditor:updatePartialFolder":d.updatePartialFolder,"themeEditor:moveFile":d.moveFile,"themeEditor:rerenderSidebar":d.rerenderSidebar,"themeEditor:expandCodeEditor":d.expandCodeEditor,"themeEditor:popin":d.popin,"themeEditor:saveEditorState":d.saveEditorState}),n.reqres.setHandlers({"themeEditor:cleanName":d.cleanName})})})}),_wAMD.define("util/disqusSDK",[],function(){var e,t,i={};return i.getDisqusElement=function(){return document.getElementById("disqus_thread")},i.embed=function(t){if(i.getDisqusElement())if(e)i.reset(t);else{var n=t.shortname;t.identifier,t.url,t.config,e=document.createElement("script"),e.async=!0,e.type="text/javascript",e.src="//"+n+".disqus.com/embed.js",e.onload=function(){i.reset(t)},(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}},i.count=function(e){var i="",n=e.shortname;if(window.disqus_shortname=n,t&&t.parentNode){t.parentNode.removeChild(t),window.DISQUSWIDGETS=t=void 0,i="?_="+(new Date).getTime();for(var o,s=n+".disqus.com/count-data.js",r=document.getElementsByTagName("head")[0],a=r.childNodes,l=0;l<a.length;l++)o=a[l],"SCRIPT"===o.nodeName&&o.src.match(s)&&r.removeChild(o)}t=document.createElement("script"),t.async=!0,t.type="text/javascript",t.src="//"+n+".disqus.com/count.js"+i,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)},i.reset=function(e){var t=i.getDisqusElement();t&&(e.scheme&&(t.style.color="dark"===e.scheme?"#fff":"#000"),DISQUS.reset({reload:!0,config:function(){this.page.identifier=e.identifier,this.page.title=e.title,this.page.url=e.url}}))},i}),_wAMD.define("blog/editor/model/Blog",["backbone","moment","editor/app"],function(e){var t=e.Model.extend({sync:function(e,t,i){var n;switch(e){case"read":n=Weebly.Editor.RPC.Blog.getBlog(t.get("blog_id")),n.done(function(e){t.set(e)}),i.success&&n.done(function(e){i.success(e)}),i.error&&n.fail(function(e){i.error(e)});break;default:console.warn("unimplemented method on Blog",e)}return n}});return t}),_wAMD.define("blog/editor/model/Post",["jquery","backbone","moment","editor/app","./Blog"],function(e,t,i,n,o){var s=t.Model,r=s.prototype,a=s.extend({idAttribute:"post_id",defaults:{isNew:!1,date_format:"us"},initialize:function(){var e=this;e.get("post_id")&&(e.cleanDraftId=e.get("post_id").replace(/draft/,""))},get:function(t){if("blog"==t){if(!this._blogDefer){var i=this.get("blog_id"),n=new o({blog_id:i}),s=this._blogDefer=new e.Deferred;n.fetch().done(function(){s.resolve(n)})}return this._blogDefer.promise()}return r.get.apply(this,arguments)},getTimestamp:function(e,t){var n=i.tz(e,t,this.blog_time_zone);return n.isValid()?n.unix():!1},getMoment:function(){var e=this.get("post_created_date");return i.unix(e).tz(this.blog_time_zone)},setBlogProperties:function(e){this.blog_date_format=e.get("date_format"),this.blog_time_zone=e.get("time_zone")},parse:function(e){var n=i.tz(e.post_created_date,"America/Los_Angeles");e.post_created_date=n.unix();var o=_.map(e.tags,function(e){return{tag:e}});return e.tags=new t.Collection(o),e},sync:function(t,i,o){var s;switch(t){case"update":case"patch":var r=_.pick(i.toJSON(),["post_id","post_title","allow_comments","post_link","seo_title","seo_description"]);r.post_created_date=this.getFormattedDate(),r.tags=i.get("tags").pluck("tag").join(),r.shares=[],r.share_message=i.get("share_message"),i.isBusy=!0,s=n.blog.RPC.saveBlogPost(r),s.done(function(){i.set("isNew",!1)});break;case"read":var a=new e.Deferred;s=a.promise();var l=Weebly.Editor.RPC.Blog.getPost(i.get("post_id"));l.done(function(e){i.set("blog_id",e.blog_id),i.get("blog").done(function(t){i.setBlogProperties(t),a.resolve(e)})}).fail(function(e){a.reject(e)}),o.success&&s.done(function(e){o.success(e)}),o.error&&s.fail(function(e){o.error(e)});break;case"delete":i.isBusy=!0,s=n.blog.RPC.deleteBlogPost(i.get("post_id"));break;default:console.warn("unimplemented method on Post",t)}return s},isDraft:function(){return!!this.get("post_id").match(/draft/)},getFormattedDate:function(){var e=_W.siteContext.mdateFormat;return this.getMoment().format(e)},discard:function(){var e=this.get("post_id");return n.blog.RPC.discardBlogDraft(e)},publish:function(){var e=this,t={};return t=_.pick(e.toJSON(),["post_title","allow_comments","seo_title","seo_description"]),t.post_created_date=this.getFormattedDate(),t.page_id=e.get("draft_id")+"draft",t.tags=e.get("tags").pluck("tag").join(),t.shares=[],t.share_message=e.get("share_message"),e.isBusy=!0,n.blog.RPC.publishBlogPost(t).then(function(t){var i=e.parse(t.post);return e.set(i),t.published})},stash:function(){var e=this,t={};return t=_.pick(e.toJSON(),["post_id","post_title","allow_comments","post_link","seo_title","seo_description"]),t.post_created_date=this.getFormattedDate(),e.isBusy=!0,n.blog.RPC.stashBlogPost(t)},saveDraft:function(){var e=this,t={};return t=_.pick(e.toJSON(),["blog_id","draft_id","post_title","allow_comments","scheduled","share_message","ready_to_publish","seo_title","seo_description"]),t.post_created_date=e.getMoment().format(),t.tags=e.get("tags").pluck("tag").join(),t.shares=[],e.get("share_buttons").each(function(e){e.enabled&&t.shares.push(e.type)}),e.isBusy=!0,n.blog.RPC.saveBlogDraft(t)}});return a}),_wAMD.define("tpl!components/view/EditorLayover/editor-layover-branding",[],function(){return'{{#logo}}\n	<div class="editor-layover-logo"></div>\n{{/logo}}\n\n<span class="editor-layover-title">{{title}}</div>\n'}),_wAMD.define("components/views/EditorLayover/EditorLayoverBranding",["backbone-all","mustache","tpl!components/view/EditorLayover/editor-layover-branding"],function(e,t,i){var n=e.Marionette.ItemView.extend({template:t.compile(i),templateHelpers:function(){var e=this;return{logo:function(){return e.logo},title:function(){return e.title}}},title:"Editor",logo:!0,initialize:function(e){var t=this;e=e||{},t.title=e.title||t.title,t.logo=e.logo||t.logo,t.logo||this.$el.addClass("no-logo")}});return n}),_wAMD.define("tpl!components/view/EditorLayover/editor-layover-actions",[],function(){return'<li class="editor-layover-action" data-action="close">\n	<span>\n		{{#tl}}Close{{/tl}}\n	</span>\n</li>\n'}),_wAMD.define("components/views/EditorLayover/EditorLayoverActions",["backbone-all","mustache","tpl!components/view/EditorLayover/editor-layover-actions"],function(e,t,i){var n=e.Marionette.ItemView.extend({tagName:"ul",className:"editor-layover-actions-menu",template:t.compile(i),ui:{actions:"[data-action]"},events:{"click @ui.actions":"triggerAction"},initialize:function(e){this.wreqr=e.wreqr
},triggerAction:function(e){var t=e.currentTarget,i=t.getAttribute("data-action");i&&this.wreqr.vent.trigger("layover:"+i)}});return n}),_wAMD.define("tpl!components/layouts/editor-layover",[],function(){return'<div class="editor-layover-toolbar">\n	<div class="region editor-layover-branding"></div>\n	<div class="region editor-layover-accessory"></div>\n	<div class="region editor-layover-actions"></div>\n</div>\n\n<div class="editor-layover-stage">\n</div>\n\n<div class="editor-layover-footer">\n</div>\n'}),_wAMD.define("components/layouts/EditorLayover",["backbone-all","mustache","./LayoutWithDialogs","components/views/EditorLayover/EditorLayoverBranding","components/views/EditorLayover/EditorLayoverActions","tpl!components/layouts/editor-layover"],function(e,t,i,n,o,s){var r=i.extend({className:"w-ui editor-layover",getTemplate:function(){return t.compile(s)},regions:{branding:".editor-layover-branding",accessory:".editor-layover-accessory",actions:".editor-layover-actions",footer:".editor-layover-footer",stage:".editor-layover-stage"},BrandingView:n,AccessoryView:void 0,ActionsView:o,StageView:void 0,FooterView:void 0,animate:!1,theme:"blue",initialize:function(t){var i=this,n=[];t=t||{},i.animate=t.animate||i.animate,i.theme=t.theme||i.theme,i.wreqr={},i.wreqr.vent=new e.Wreqr.EventAggregator,i.wreqr.reqres=new e.Wreqr.RequestResponse,i.wreqr.commands=new e.Wreqr.Commands,i.wreqr.reqres.setHandler("layover:element",function(){return i.$el}),i.wreqr.vent.on("layover:close",function(){i.onTriggerClose()}),n.push(i.theme),i.animate&&n.push("animate"),"string"==typeof i.animate&&n.push(i.animate),i.$el.addClass(n.join(" "))},onRender:function(){var e=this,t={model:e.model,wreqr:e.wreqr,blog:e.blog};e.showBranding(t),e.showAccessory(t),e.showActions(t),e.showStage(t),e.showFooter(t),e.animate&&(setTimeout(function(){e.$el.addClass("show")},300),setTimeout(function(){e.$el.addClass("animated")},500))},onTriggerClose:function(){var e=this;e.animate?(e.$el.removeClass("show"),e.$el.removeClass("animated"),setTimeout(function(){e.close()},350)):e.close()},showBranding:function(e){var t,i=this,n=i.BrandingView;n&&(t=new n(e),i.branding.show(t))},showAccessory:function(e){var t,i=this,n=i.AccessoryView;n&&(t=new n(e),i.accessory.show(t))},showActions:function(e){var t,i=this,n=i.ActionsView;n&&(t=new n(e),i.actions.show(t))},showStage:function(e){var t,i=this,n=i.StageView;n?(t=new n(e),i.stage.show(t)):i.$el.find(i.stage.el).hide()},showFooter:function(e){var t,i=this,n=i.FooterView;n?(t=new n(e),i.footer.show(t)):i.$el.find(i.footer.el).hide()}});return r}),_wAMD.define("blog/editor/view/post/BlogPostLayoverBranding",["backbone-all","mustache","editor/app","components/views/EditorLayover/EditorLayoverBranding"],function(e,t,i,n){var o=n.extend({title:_W.tl("Blog Editor"),logo:!isClientSite,ui:{title:".editor-layover-title",status:".saving-status"},initialize:function(){var e=this;n.prototype.initialize.apply(e,arguments),e.listenTo(i.vent,"editor:saved",e.showSaved),e.listenTo(i.vent,"editor:saving",e.showSaving)},onRender:function(){this.ui.title.append('<span class="saving-status"></span>'),this.bindUIElements()},showSaving:function(){var e=this;clearTimeout(e.timeout),e.ui.status.text(_W.tl("Saving...")).css("opacity",1)},showSaved:function(){var e=this,t=e.ui.status;t.text(_W.tl("Saved")).css("opacity",1),e.timeout=setTimeout(function(){t.css("opacity",0)},1400)}});return o}),_wAMD.define("blog/editor/view/BlogConfirmView",["components/views/ConfirmView"],function(e){"use strict";var t=e.extend({className:"blog-confirmation-view",defaultDialog:{buttons:[{group:"control-buttons pull-right",buttons:[{className:"btn-cancel btn-com"},{className:"btn-confirm btn-com btn-danger-on"}]}]}});return t}),_wAMD.define("blog/editor/view/post/BlogPostConfirmDelete",["blog/editor/view/BlogConfirmView"],function(e){"use strict";var t=e.extend({message:_W.tl("Are you sure you want to delete this post? If you continue, the post will be discarded and cannot be retrieved."),title:_W.tl("Delete post?"),confirmText:_W.tl("Yes, delete post"),cancelText:_W.tl("No, keep post")});return t}),_wAMD.define("blog/editor/view/post/BlogPostConfirmDiscard",["blog/editor/view/BlogConfirmView"],function(e){"use strict";var t=e.extend({message:_W.tl("Are you sure you want to discard this post? If you continue, the post cannot be retrieved."),title:_W.tl("Discard post?"),confirmText:_W.tl("Yes, discard post"),cancelText:_W.tl("No, keep post")});return t}),_wAMD.define("blog/editor/view/post/BlogPostPublishReminder",[],function(){var e=Backbone.Marionette.ItemView.extend({template:function(){return _W.tl("Your post has been added to your blog page, but is not yet live. You will need to Publish your site for users to view your blog post.")},dialog:{title:_W.tl("Blog Post Added"),buttons:[{group:"close-group pull-right",buttons:[{text:"Close",className:"btn-com btn-success closeDialog"}]}]},events:{"click .closeDialog":"closeDialog"},closeDialog:function(){this.trigger("dialog:close")}});return e}),_wAMD.define("tpl!blog/editor/posts/layover-actions-edit",[],function(){return'{{! Blog edit specific actions }}\n\n<li class="editor-layover-action action-default" data-action="close">\n	<div class="editor-layover-action-inner">\n		{{#tl}}Close{{/tl}}\n	</div>\n</li>\n\n<li class="editor-layover-action action-warning" data-action="update">\n	<div class="editor-layover-action-inner">\n		{{#tl}}Update{{/tl}}\n	</div>\n</li>\n\n<li class="editor-layover-action action-warning action-dropdown" data-action="dropdown">\n	<div class="editor-layover-action-inner">\n		<span class="dropdown-icon w-icon-chevron-down"></span>\n	</div>\n	<ul class="action-dropdown-menu">\n		<li class="action-dropdown-item action-icons" data-action="delete">\n			<span class="action-icon w-icon-trash"></span>\n			{{#tl}}Delete Post{{/tl}}\n		</li>\n	</ul>\n\n	{{! Layover cover; summoned to black things out }}\n	<div class="editor-layover-cover"></div>\n</li>\n'}),_wAMD.define("tpl!blog/editor/posts/layover-actions-draft",[],function(){return'{{! Blog draft specific actions }}\n\n{{#isNew}}\n	<li class="editor-layover-action action-default" data-action="discard">\n		<div class="editor-layover-action-inner">\n			{{#tl}}Discard{{/tl}}\n		</div>\n	</li>\n{{/isNew}}\n{{^isNew}}\n	{{#isScheduled}}\n		<li class="editor-layover-action action-default" data-action="discard">\n			<div class="editor-layover-action-inner">\n				{{#tl}}Delete{{/tl}}\n			</div>\n		</li>\n	{{/isScheduled}}\n	{{^isScheduled}}\n		<li class="editor-layover-action action-default" data-action="draft">\n			<div class="editor-layover-action-inner">\n				{{#tl}}Save{{/tl}}\n			</div>\n		</li>\n	{{/isScheduled}}\n{{/isNew}}\n\n{{#futurePublishDate}}\n	<li class="editor-layover-action action-warning" data-action="schedule">\n		<div class="editor-layover-action-inner">\n			{{#tl}}Schedule{{/tl}}\n		</div>\n	</li>\n{{/futurePublishDate}}\n{{^futurePublishDate}}\n	<li class="editor-layover-action action-warning" data-action="post">\n		<div class="editor-layover-action-inner">\n			{{#tl}}Post{{/tl}}\n		</div>\n	</li>\n{{/futurePublishDate}}\n\n<li class="editor-layover-action action-warning action-dropdown" data-action="dropdown">\n	<div class="editor-layover-action-inner">\n		<span class="dropdown-icon w-icon-chevron-down"></span>\n	</div>\n	<ul class="action-dropdown-menu">\n		{{#isNew}}\n			<li class="action-dropdown-item" data-action="draft">\n				{{#tl}}Save as draft{{/tl}}\n			</li>\n		{{/isNew}}\n		{{^isNew}}\n			{{#isScheduled}}\n				<li class="action-dropdown-item" data-action="draft">\n					{{#tl}}Save as draft{{/tl}}\n				</li>\n			{{/isScheduled}}\n			{{^isScheduled}}\n				<li class="action-dropdown-item action-icons" data-action="discard">\n					<span class="action-icon w-icon-trash"></span>\n					{{#tl}}Discard Draft{{/tl}}\n				</li>\n			{{/isScheduled}}\n		{{/isNew}}\n	</ul>\n\n	{{! Layover cover; summoned to black things out }}\n	<div class="editor-layover-cover"></div>\n</li>\n'}),_wAMD.define("blog/editor/view/post/BlogPostLayoverActions",["jquery","underscore","backbone-all","mustache","editor/app","components/views/EditorLayover/EditorLayoverActions","./BlogPostConfirmDelete","./BlogPostConfirmDiscard","./BlogPostPublishReminder","tpl!blog/editor/posts/layover-actions-edit","tpl!blog/editor/posts/layover-actions-draft"],function($,_,Backbone,Mustache,editorApp,EditorLayoverActions,BlogPostConfirmDelete,BlogPostConfirmDiscard,BlogPostPublishReminder,editActionsTpl,draftActionsTpl){var BlogPostLayoverActions=EditorLayoverActions.extend({modelEvents:{"change:post_created_date":"render","change:scheduled":"render"},getTemplate:function(){var e=this.model.isDraft()?draftActionsTpl:editActionsTpl;return Mustache.compile(e)},ui:{dropdown:".action-dropdown",cover:".editor-layover-cover",items:".action-dropdown-menu li"},events:{"click [data-action=close]":"closePost","click [data-action=delete]":"deletePost","click [data-action=discard]":"discardPost","click [data-action=draft]":"saveAsDraft","click [data-action=post]":"createPost","click [data-action=schedule]":"schedulePost","click [data-action=update]":"updatePost","click @ui.dropdown":"showDropdown","click @ui.cover":"closeDropdown","click @ui.items":"closeDropdown"},templateHelpers:function(){var e=this.model,t="1"==e.get("scheduled");return{isScheduled:function(){return t},futurePublishDate:function(){return t&&e.getMoment().isAfter()}}},share_buttons:{},discardPost:function(){var e=this,t=e.model;editorApp.showDialog(new BlogPostConfirmDiscard({callback:function(i){i&&(startWait(),t.discard().done(function(){Pages.go("updateList",currentPage)}).fail(function(){}).always(function(){endWait(),e.wreqr.vent.trigger("layover:close"),e.updatePlatformElements()}))}}))},schedulePost:function(){var e=this,t=e.model;t.set("ready_to_publish","1"),e.saveDraft()},createPost:function(){var e=this,t=e.model;t.set("scheduled","0"),t.set("ready_to_publish","1"),t.get("share_buttons").each(function(t){e.share_buttons[t.type]=t}),currentPagePublished?(Weebly.PublishWindow.callback=function(){e.setSharingControls()},Weebly.PublishWindow.open(Weebly.PublishWindow.NewBlogPost)):e.openPublishReminderDialog(),t.publish().done(function(t){e.legacyFinish(t)}).fail(function(){console.warn("something went wrong")}).always(function(){e.wreqr.vent.trigger("layover:close"),e.updatePlatformElements()})},closePost:function(){var e=this,t=e.model,i=t.stash();i.done(function(){Pages.go("updateList",currentPage)}).fail(function(){console.warn("something went wrong")}).always(function(){e.wreqr.vent.trigger("layover:close"),e.updatePlatformElements()})},updatePost:function(){var e=this,t=e.model;currentPagePublished?(Weebly.PublishWindow.callback=function(){e.setSharingControls()},Weebly.PublishWindow.open(Weebly.PublishWindow.BlogPost)):e.openPublishReminderDialog(),t.get("share_buttons").each(function(t){e.share_buttons[t.type]=t}),t.save().done(function(t){e.legacyFinish(t)}).fail(function(){console.warn("something went wrong")}).always(function(){e.wreqr.vent.trigger("layover:close"),e.updatePlatformElements()})},updatePlatformElements:function(){setTimeout(function(){$("#content .blog-body").find(".element-script").each(function(index,script){eval(script.innerHTML)})},500)},setSharingControls:function(){var e=this,t=$("#exportText .share-on-publish-main");if(t.length){var i=t.find(".share-message");t.find(".share-post").on("click",{shareDialog:t,shareMessageInput:i},function(t){$("#exportText .share-on-publish-success").hide("slow"),$("#exportText .share-on-publish-error").hide("slow"),e.model.set("share_message",t.data.shareMessageInput.val()),e.model.save().done(function(){e.sharePostToServices(e,t.data)})}),e.shareInputs=t.find(".share-post-inputs"),t.on("click","input[type=checkbox]",function(t){e.toggleCheckbox(t)})}},sharePostToServices:function(e,t){var i=[];_.each(e.share_buttons,function(n){var o=n.type.charAt(0).toUpperCase()+n.type.slice(1);t.shareDialog.find('[data-type="'+o+'"]').is(":checked")&&(t.shareDialog.hide("slow"),i.push(editorApp.blog.RPC.blogPostShare(e.model.get("post_id"),n.type)))}),$.when.apply(null,i).done(function(){var i=[],n=[];e.filterShareResults(arguments,e,i,n),i.length&&e.showSuccessMessage(i),n.length&&e.showErrorMessage(n,t,e)})},filterShareResults:function(e,t,i,n){e[0]instanceof Array?_.each(e,function(e){t._filterShareResults(e,i,n)}):e.length&&t._filterShareResults(e,i,n)},_filterShareResults:function(e,t,i){"success"===e[0].status?t.push(e[0].type):i.push(e[0].type)},toggleCheckbox:function(e){var t=$(e.target);if(t.closest(".toggle-container").hasClass("shared"))return!1;var i=t.data("type").toLowerCase(),n=this.share_buttons[i];t.toggleClass("checked",t.prop("checked")),this.checkAuthentication(t,i,n)},showSuccessMessage:function(e){var t;_.each(e,function(e){var i=e.charAt(0).toUpperCase()+e.slice(1);$('#exportText input[data-type="'+i+'"]').closest(".toggle-container").remove(),t?t+=" and "+i:t=i}),$("#exportText .share-on-publish-text").text(sprintf(_W.tl("Post successfully shared to %s."),t)),$("#exportText .share-on-publish-success").show()},showErrorMessage:function(e,t,i){var n;t.shareDialog.show("slow"),_.each(e,function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);$('#exportText input[data-type="'+t+'"]').removeClass("checked").prop("checked",!1),editorApp.blog.RPC.toggleShareButton({blog_id:i.model.get("blog_id"),type:e,state:"off"}),i.share_buttons[e].data["has-auth"]=-1,n?n+=" and "+t:n=t}),$("#exportText .share-on-publish-error").html(sprintf(_W.tl("We encountered an unexpected error when trying to share to %s.<br>Turn sharing back on to reauthorize your account."),n)).show()},checkAuthentication:function(e,t,i){var n=this;if(1!==i.data["has-auth"]||0==i.data["has-link"]){t=t.charAt(0).toUpperCase()+t.substr(1);var o=function(){i.data["has-auth"]=1,i.data["has-link"]=1,editorApp.blog.RPC.toggleShareButton({blog_id:n.model.get("blog_id"),type:t,state:"on"}),i.enabled=!0,n.toggleShareInputs()},s=function(){e.removeClass("checked"),e.prop("checked",!1),editorApp.blog.RPC.toggleShareButton({blog_id:n.model.get("blog_id"),type:t,state:"off"})};"Facebook"==t?e.fbConnect({autoLaunch:!0,onSuccess:o,onClose:s}):new Weebly.BrowserWindow[t+"Auth"]({onSuccess:o,onFailure:s,onCancel:s})}else i.enabled=!i.enabled,editorApp.blog.RPC.toggleShareButton({blog_id:n.model.get("blog_id"),type:t,state:i.enabled?"on":"off"}),n.toggleShareInputs()},toggleShareInputs:function(){var e=this,t=!1,i=e.shareInputs.is(":visible");_.each(e.share_buttons,function(e){e.enabled&&(t=!0)}),t!=i&&e.shareInputs.slideToggle("slow")},saveAsDraft:function(){var e=this,t=e.model;t.set("ready_to_publish","0"),e.saveDraft()},saveDraft:function(){var e=this,t=e.model;t.saveDraft().done(function(){Pages.go("updateList",currentPage)}).fail(function(){console.warn("something went wrong")}).always(function(){e.wreqr.vent.trigger("layover:close")})},deletePost:function(){var e=this,t=e.model;editorApp.showDialog(new BlogPostConfirmDelete({callback:function(i){i&&t.destroy().done(function(){Pages.go("updateList",currentPage)}).fail(function(){}).always(function(){e.wreqr.vent.trigger("layover:close")})}}))},legacyFinish:function(e){currentPagePublished?(Weebly.PublishWindow.defer(e.html||e),Weebly.BlogEditor.allowSwitch=!0,Pages.go("blogPostPublishSuccess"),Weebly.BlogEditor.allowSwitch=!1):Pages.go("updateList",currentPage)},openPublishReminderDialog:function(){editorApp.showDialog(new BlogPostPublishReminder)},onItemClick:function(e){var t=this,i=e.target.getAttribute("data-action");t.ui.dropdown.hasClass("active")&&(t.closeDropdown(e),"draft"===i?t.saveDraft():"delete"===i&&t.deletePost())},showDropdown:function(){var e=this;e.ui.dropdown.addClass("active"),e.ui.cover.addClass("active").css("height",window.innerHeight)},closeDropdown:function(e){var t=this;t.ui.dropdown.removeClass("active"),t.ui.cover.removeClass("active"),e.stopPropagation()}});return BlogPostLayoverActions}),_wAMD.define("tpl!blog/editor/posts/options/publish-view",[],function(){return'<label class="post-option-title">{{#tl}}Publish{{/tl}}</label>\n\n<select name="publish-mode">\n	<option value="immediately" {{#publishImmediately}} selected{{/publishImmediately}}>\n		{{#tl}}Immediately{{/tl}}\n	</option>\n	<option value="later" {{^publishImmediately}} selected{{/publishImmediately}}>\n		{{#tl}}Scheduled Time{{/tl}}\n	</option>\n</select>\n\n{{^publishImmediately}}\n	<div class="publish-later">\n		<div class="option-row">\n			<input class="control-input control-inline" type="text" name="publish-date" value="{{publishDate}}">\n			<span class="publish-at">{{#tl}}at{{/tl}}</span>\n		</div>\n\n		<div class="option-row">\n			<input class="control-input" type="text" name="publish-time" value="{{publishTime}}">\n			<span class="publish-timezone-abbr">{{publishTimezoneAbbr}}<span>\n		</div>\n	</div>\n	{{#showShareOnPublish}}\n		<button class="btn-control edit-share-settings-btn" name="edit-share-settings">\n			<span class="pull-left">{{#tl}}Edit Share Settings{{/tl}}</span>\n		</button>\n	{{/showShareOnPublish}}\n{{/publishImmediately}}'}),_wAMD.define("tpl!blog/editor/posts/options/share-on-publish-view",[],function(){return'{{^isClientSite}}\n<div class="share-on-publish-view">\n	<div class="share-on-publish-success">\n		<span class="w-icon-check-mark-light"></span><span class="share-on-publish-text"></span>\n	</div>\n	<div class="share-on-publish-error">\n	</div>\n	<div class="share-on-publish-main">\n		{{#share_buttons}}\n		<div class="toggle-container {{#shared}}shared{{/shared}}">\n			<label for="post-option-toggle-publish-{{type}}-share">{{#tl}}Share{{#shared}}d{{/shared}} on {{type}}{{/tl}}</label>\n			<div class="toggle-switch control light">\n				<input type="checkbox" name="{{type}}-share" id="post-option-toggle-publish-{{type}}-share"\n				class="toggle-field {{#enabled}}checked{{/enabled}}"\n				{{#enabled}}checked="checked"{{/enabled}} data-type="{{type}}">\n\n				<label for="post-option-toggle-publish-{{type}}-share">\n					<div class="background-container">\n						<div class="background-slider">\n							<span class="label-on">{{#tl}}ON{{/tl}}</span>\n							<span class="label-off">{{#tl}}OFF{{/tl}}</span>\n						</div>\n					</div>\n					<span class="blob">\n						<span class="blob-inner"></span>\n					</span>\n				</label>\n			</div>\n		</div>\n		{{/share_buttons}}\n\n		<div class="share-post-inputs{{^show-share-message}} hide-post-inputs{{/show-share-message}}">\n			<div class="custom-message-description">\n				{{#tl}}Enter a custom message to share{{/tl}} <span class="de-emphasize-text">({{#tl}}optional{{/tl}})</span>\n			</div>\n			<div class="share-message-wrapper">\n				<textarea class="share-message">{{share_message}}</textarea>\n			</div>\n			{{#post_dialog}}\n			<div class="share-on-publish-button">\n				<button class="btn-com btn-info share-post">{{#tl}}Share{{/tl}}</button>\n			</div>\n			{{/post_dialog}}\n		</div>\n	</div>\n</div>\n{{/isClientSite}}\n'}),_wAMD.define("blog/editor/view/post/options/ShareOnPublishView",["jquery","backbone-all","mustache","tpl!blog/editor/posts/options/share-on-publish-view"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({templateHelpers:function(){var e=!1;return _.each(this.model.get("share_buttons"),function(t){t.enabled&&(e=!0)}),{"show-share-message":e}},template:i.compile(n),ui:{checkboxes:"input[type=checkbox]",shareMessage:".share-message"},dialog:{title:_W.tl("Share Settings"),width:"610px",buttons:[{text:_W.tl("Save"),className:"btn-com btn-success pull-right save-dialog"},{text:_W.tl("Cancel"),className:"btn-com pull-right close-dialog"}]},events:{"click .save-dialog":"saveDialog","click @ui.checkboxes":"toggleCheckbox"},triggers:{"click .close-dialog":"dialog:close"},onRender:function(){this.shareInputs=this.$el.find(".share-post-inputs")},saveDialog:function(){var e=this,t=e.model;e.model.get("share_buttons").each(function(i){i.enabled=e.ui.checkboxes.filter('[data-type="'+i.type+'"]').is(":checked"),editorApp.blog.RPC.toggleShareButton({blog_id:t.get("blog_id"),post_id:t.cleanDraftId,type:i.type,state:i.enabled?"on":"off"})}),e.model.set("share_message",e.ui.shareMessage.val()),e.trigger("dialog:close")},toggleCheckbox:function(t){var i=e(t.target);if(i.closest(".toggle-container").hasClass("shared"))return!1;var n=i.data("type"),o=_.findWhere(this.model.get("share_buttons"),{type:n});i.toggleClass("checked",i.prop("checked")),this.checkAuthentication(i,n,o)},checkAuthentication:function(e,t,i){var n=this;if(1!==i.data["has-auth"]||0==i.data["has-link"]){t=t.charAt(0).toUpperCase()+t.substr(1);var o=function(){i.data["has-auth"]=1,i.data["has-link"]=1,i.enabled=!0,n.toggleShareInputs()},s=function(){e.removeClass("checked"),e.prop("checked",!1),i.enabled=!1};"Facebook"==t?e.fbConnect({autoLaunch:!0,onSuccess:o,onClose:s}):new Weebly.BrowserWindow[t+"Auth"]({onSuccess:o,onFailure:s,onCancel:s})}else n.toggleShareInputs()},toggleShareInputs:function(){var e=this,t=e.shareInputs.is(":visible"),i=!1;_.each(e.model.get("share_buttons"),function(t){var n=e.ui.checkboxes.filter('[data-type="'+t.type+'"]').is(":checked");n&&(i=!0)}),i!=t&&e.shareInputs.toggle()}});return o}),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wInputSelectbox",["jquery","underscore","mustache"],t):t(e.jQuery,e._,e.Mustache)}(this,function(e,t){if("undefined"==typeof e.fn.wInputSelectbox){var i=function(t,i){i||(i={}),this.el=t,this.$el=e(t),e.data(t,"wInputSelectbox",this),this.initialize(i)};t.extend(i.prototype,{initialize:function(e){var i=this;e=e||{},i.suggestions=e.suggestions||[],i.maxHeight=e.maxHeight,i.preselect=t.result(e,"preselect"),i.$el.addClass("w-input-selectbox"),i.initializeEvents()},initializeEvents:function(){var e=this;e.$el.on({"focus.wInputSelectbox":function(){e.showSuggestions()},"blur.wInputSelectbox":function(t){e.onBlur(t)},"keypress.wInputSelectbox":function(t){e.onKeypress(t)}})},showSuggestions:function(){var t,i,n,o,s,r,a,l,c=this,u=e("body"),d="auto";c.dropdown||(c.dropdown=c.render(),c.list=c.dropdown.find("li"),c.dropdown.on("click.wInputSelectbox li",function(e){c.onSelect(e.target)}).one("mouseover.wInputSelectbox",function(){c.list.filter(".selected").removeClass("selected")}),u.append(c.dropdown),o=u.height(),l=c.dropdown.height(),s=c.$el.offset(),r=c.$el.outerHeight(),a=c.$el.outerWidth(),n=s.top+r,i=s.left,t=a,c.maxHeight&&l>c.maxHeight?d=c.maxHeight:s.top+l>o&&(d=l-(s.top+l-o)-40),c.dropdown.css({top:n,left:i,height:d,width:t}),c.preselect&&c.findPreselected())},findPreselected:function(){var e,t,i,n=this,o=n.dropdown.find("li");if(e=o.filter('[data-value="'+n.preselect+'"]'),e.addClass("selected"),t=e.index()){i=0;for(var s=0;t>s;s++)i+=o.eq(s).outerHeight();n.dropdown.scrollTop(i)}},hide:function(){var e=this;e.dropdown&&(e.dropdown.remove(),delete e.dropdown)},destroy:function(){var e=this;e.hide(),e.$el.removeClass("w-input-selectbox").removeData("wInputSelectbox").off(".wInputSelectbox")},render:function(){var i=this,n='<ul class="w-input-selectbox-list">';return t.each(i.suggestions,function(e){n+='<li class="w-selectbox-item" data-value="'+e+'">'+e+"</li>"}),n+="</ul>",e(document.createElement("div")).html(n).addClass("w-ui w-input-selectbox-dropdown")},onKeypress:function(e){13===e.keyCode&&this.hide()},onBlur:function(){var e=this;e.dropdown&&!e.dropdown.is(":hover")&&e.hide()},onSelect:function(e){var t=this;t.$el.val(e.getAttribute("data-value")),t.$el.trigger("change"),t.hide()}}),e.fn.extend({wInputSelectbox:function(){var n,o,s,r=Array.prototype.slice.call(arguments,0),a=["destroy","hide"];return this.each(function(l,c){if("undefined"==typeof r[0]||"object"==typeof r[0]){if("input"!==c.tagName.toLowerCase()||"text"!==c.type.toLowerCase())throw"Invalid input, wInputSelectbox only allowed for text inputs";s=r?t.extend({},r[0]):{},new i(c,s)}else{if("string"!=typeof r[0])throw"Invalid arguments: "+r;if(o=r[0],n=e(c).data("wInputSelectbox"),!n)throw"wInputSelectbox not initialized";if(-1===t.indexOf(a,o))throw"Method not found: "+o;n[o].apply(n,r.slice(1))}}),this}})}}),function(e,t){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("moment-timezone",["moment"],t):"object"==typeof exports?module.exports=t(require("moment")):t(e.moment)}(this,function(e){function t(e){return e>96?e-87:e>64?e-29:e-48}function i(e){var i,n=0,o=e.split("."),s=o[0],r=o[1]||"",a=1,l=0,c=1;for(45===e.charCodeAt(0)&&(n=1,c=-1),n;n<s.length;n++)i=t(s.charCodeAt(n)),l=60*l+i;for(n=0;n<r.length;n++)a/=60,i=t(r.charCodeAt(n)),l+=i*a;return l*c}function n(e){for(var t=0;t<e.length;t++)e[t]=i(e[t])}function o(e,t){for(var i=0;t>i;i++)e[i]=Math.round((e[i-1]||0)+6e4*e[i]);e[t-1]=1/0}function s(e,t){var i,n=[];for(i=0;i<t.length;i++)n[i]=e[t[i]];return n}function r(e){var t=e.split("|"),i=t[2].split(" "),r=t[3].split(""),a=t[4].split(" ");return n(i),n(r),n(a),o(a,r.length),{name:t[0],abbrs:s(t[1].split(" "),r),offsets:s(i,r),untils:a}}function a(e){e&&this._set(r(e))}function l(e){return(e||"").toLowerCase().replace(/\//g,"_")}function c(e){var t,i,n;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=new a(e[t]),n=l(i.name),x[n]=i,p(n)}function u(e){return x[l(e)]||null}function d(){var e,t=[];for(e in x)x.hasOwnProperty(e)&&x[e]&&t.push(x[e].name);return t.sort()}function h(e){var t,i;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=e[t].split("|"),m(i[0],i[1]),m(i[1],i[0])}function p(e){if(k[e]){var t,i=x[e],n=k[e];for(t=0;t<n.length;t++)f(i,n[t]);k[e]=null}}function f(e,t){var i=x[l(t)]=new a;i._set(e),i.name=t}function m(e,t){e=l(e),x[e]?f(x[e],t):(k[e]=k[e]||[],k[e].push(t))}function g(e){c(e.zones),h(e.links),w.dataVersion=e.version}function v(e){return v.didShowError||(v.didShowError=!0,"undefined"!=typeof console&&"function"==typeof console.error&&console.error("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!u(e)}function b(e){return!(!e._a||void 0!==e._tzm)}function y(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function w(){var t=Array.prototype.slice.call(arguments,0,-1),i=arguments[arguments.length-1],n=u(i),o=e.utc.apply(null,t);return n&&b(o)&&o.add(n.parse(o),"minutes"),o.tz(i),o}function _(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function M(e){return function(){return this._z=null,e.apply(this,arguments)}}if(void 0!==e.tz)return e;var C="0.2.1",x={},k={};a.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},_index:function(e){var t,i=+e,n=this.untils;for(t=0;t<n.length;t++)if(i<n[t])return t},parse:function(e){var t,i,n,o,s=+e,r=this.offsets,a=this.untils,l=a.length-1;for(o=0;l>o;o++)if(t=r[o],i=r[o+1],n=r[o?o-1:o],i>t&&w.moveAmbiguousForward?t=i:t>n&&w.moveInvalidForward&&(t=n),s<a[o]-6e4*t)return r[o];return r[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},w.version=C,w.dataVersion="",w._zones=x,w._links=k,w.add=c,w.link=h,w.load=g,w.zone=u,w.zoneExists=v,w.names=d,w.Zone=a,w.unpack=r,w.unpackBase60=i,w.needsOffset=b,w.moveInvalidForward=!0,w.moveAmbiguousForward=!1;var S=e.fn;e.tz=w,e.updateOffset=function(e,t){var i;e._z&&(i=e._z.offset(e),Math.abs(i)<16&&(i/=60),e.zone(i,t))},S.tz=function(t){return t?(this._z=u(t),this._z?e.updateOffset(this):y("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},S.zoneName=_(S.zoneName),S.zoneAbbr=_(S.zoneAbbr),S.utc=M(S.utc);var T=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(T)?(T.push("_z"),T.push("_a")):T._z=null,g({version:"2014e",zones:["Africa/Abidjan|LMT GMT|g.8 0|01|-2ldXH.Q","Africa/Accra|LMT GMT GHST|.Q 0 -k|0121212121212121|-26BbX.8 JrbX.8 MnE 1BAk MnE 1BAk MnE 1BAk MnE 1C0k MnE 1BAk MnE 1BAk MnE","Africa/Addis_Ababa|ADMT EAT|-2z.k -30|01|-1lVCz.k","Africa/Algiers|PMT WET WEST CET CEST|-9.l 0 -10 -10 -20|0121212121212121343431312123431213|-2nco9.l cNb9.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 DA0 Imo0 rd0 De0 9Xz0 1fb0 1ap0 16K0 2yo0 mEp0 hwL0 jxA0 11A0 dDd0 17b0 11B0 1cN0 2Dy0 1cN0 1fB0 1cL0","Africa/Bamako|LMT GMT WAT|w 0 10|0121|-2ldXs RULs 144p0","Africa/Bangui|LMT WAT|-1e.k -10|01|-2le1e.k","Africa/Banjul|LMT BMT WAT GMT|16.A 16.A 10 0|0123|-2ldWR.o U0o0 1aALR.o","Africa/Bissau|LMT WAT GMT|12.k 10 0|012|-2mFWV.E 2yQnV.E","Africa/Blantyre|LMT CAT|-2k -20|01|-2GJek","Africa/Brazzaville|LMT WAT|-11.8 -10|01|-2le11.8","Africa/Bujumbura|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-1bIO0 vb0 1ip0 11z0 1iN0 1nz0 12p0 1pz0 10N0 1pz0 16p0 1jz0 s3d0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1WL0 rd0 1Rz0 wp0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1qL0 Xd0 1oL0 11d0 1oL0 11d0 1pb0 11d0 1oL0 11d0 1oL0 11d0 1ny0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 WL0 1qN0 Rb0 1wp0 On0 1zd0 Lz0 1EN0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0 1o10 jz0 gN0 pb0 1qN0 dX0 e10 xz0 1o10 bb0 e10 An0 1o10 5z0 e10 FX0 1o10 2L0 e10 IL0 1C10 Lz0 1wp0 TX0 1qN0 WL0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0","Africa/Casablanca|LMT WET WEST CET|u.k 0 -10 -10|012121212121212121312121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2gMnt.E 130Lt.E rb0 Dd0 dVb0 b6p0 TX0 EoB0 LL0 gnd0 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4mn0 SyN0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0 11A0 5c0 e00 17A0 WM0 2o0 e00 1ao0 19A0 1g00 16M0 1iM0 1400 1lA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qo0 1200 1kM0 14M0 1i00","Africa/Ceuta|WET WEST CET CEST|0 -10 -10 -20|010101010101010101010232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-25KN0 11z0 drd0 18o0 3I00 17c0 1fA0 1a00 1io0 1a00 1y7p0 LL0 gnd0 rz0 43d0 AL0 1Nd0 XX0 1Cp0 pz0 dEp0 4VB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Conakry|LMT GMT WAT|S.Q 0 10|0121|-2ldX5.8 RUL5.8 12U10","Africa/Dakar|LMT WAT GMT|19.I 10 0|012|-2ldWO.g 1bBzO.g","Africa/Dar_es_Salaam|LMT EAT BEAUT|-2B.8 -30 -2J|0121|-1yW2B.8 FnzB.8 vDAf","Africa/Djibouti|LMT EAT|-2Q.A -30|01|-2mrCQ.A","Africa/Douala|LMT WAT|-C.M -10|01|-2le0C.M","Africa/El_Aaiun|LMT WAT WET WEST|Q.M 10 0 -10|0123232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1rDz7.c 1GVA7.c 6L0 AL0 1Nd0 XX0 1Cp0 pz0 1cBB0 AL0 1Nd0 wn0 1FB0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0 11A0 5c0 e00 17A0 WM0 2o0 e00 1ao0 19A0 1g00 16M0 1iM0 1400 1lA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qo0 1200 1kM0 14M0 1i00","Africa/Freetown|FMT WAT SLST WAT SLST GMT|R 10 k 0 -10 0|0121212121212121213454545454545|-2hLb7 Ry07 MLk 1BAE MLk 1BcE MLk 1BcE MLk 1BcE MLk 1BAE MLk 1BcE MLk 1BcE MLk yGoE 10n0 AL0 1Nd0 AL0 1Nd0 AL0 1NB0 AL0 1Nd0 AL0 1Nd0 AL0","Africa/Gaborone|SAST CAT CAST|-1u -20 -30|0121|-2GJdu 1CINu 1cL0","Africa/Harare|LMT CAT|-24.c -20|01|-2GJe4.c","Africa/Johannesburg|SAST SAST SAST|-1u -20 -30|012121|-2GJdu 1Ajdu 1cL0 1cN0 1cL0","Africa/Juba|LMT CAT CAST EAT|-2a.8 -20 -30 -30|01212121212121212121212121212121213|-1yW2a.8 1zK0a.8 16L0 1iN0 17b0 1jd0 17b0 1ip0 17z0 1i10 17X0 1hB0 18n0 1hd0 19b0 1gp0 19z0 1iN0 17b0 1ip0 17z0 1i10 18n0 1hd0 18L0 1gN0 19b0 1gp0 19z0 1iN0 17z0 1i10 17X0 yGd0","Africa/Kampala|LMT EAT BEAT BEAUT|-29.E -30 -2u -2J|01231|-1F3C9.E 3Dz9.E HNAu lTbJ","Africa/Kigali|LMT CAT|-20.g -20|01|-1ode0.g","Africa/Kinshasa|WAT|-10|0|","Africa/Lagos|LMT WAT|-d.A -10|01|-22y0d.A","Africa/Libreville|LMT WAT|-B.M -10|01|-2le0B.M","Africa/Lome|GMT|0|0|","Africa/Luanda|AOT WAT|-Q.4 -10|01|-2mG0Q.4","Africa/Lusaka|LMT CAT|-1R.8 -20|01|-2GJdR.8","Africa/Malabo|LMT GMT WAT|-z.8 0 -10|012|-2le0z.8 26uoz.8","Africa/Maputo|LMT CAT|-2a.k -20|01|-2GJea.k","Africa/Maseru|LMT SAST SAST|-1O -20 -30|0121|-2GJdO 1CINO 1cL0","Africa/Mbabane|LMT SAST|-24.o -20|01|-2GJe4.o","Africa/Mogadishu|EAT BEAT|-30 -2u|010|-1yW30 13iMu","Africa/Monrovia|MMT LRT GMT|H.8 I.u 0|012|-23Lzg.Q 29s01.m","Africa/Nairobi|LMT EAT BEAT BEAUT|-2r.g -30 -2u -2J|01231|-1F3Cr.g 3Dzr.g okMu MFXJ","Africa/Ndjamena|LMT WAT WAST|-10.c -10 -20|0121|-2le10.c 2J3c0.c Wn0","Africa/Niamey|LMT WAT GMT WAT|-8.s 10 0 -10|0123|-2le08.s RUN8.s 12TX0","Africa/Nouakchott|LMT GMT WAT|13.M 0 10|0121|-2ldWU.c RUKU.c 158N0","Africa/Ouagadougou|LMT GMT|6.4 0|01|-2ldXR.U","Africa/Porto-Novo|LMT GMT WAT|-a.s 0 -10|012|-2le0a.s RUMa.s","Africa/Sao_Tome|LMT GMT|A.w 0|01|-2ldXn.s","Africa/Tripoli|LMT CET CEST EET|-Q.I -10 -20 -20|012121213121212121212121213123123|-21JcQ.I 1hnBQ.I vx0 4iP0 xx0 4eN0 Bb0 7ip0 U0n0 A10 1db0 1cN0 1db0 1dd0 1db0 1eN0 1bb0 1e10 1cL0 1c10 1db0 1dd0 1db0 1cN0 1db0 1q10 fAn0 1ep0 1db0 AKq0 TA0 1o00","Africa/Tunis|PMT CET CEST|-9.l -10 -20|0121212121212121212121212121212121|-2nco9.l 18pa9.l 1qM0 DA0 3Tc0 11B0 1ze0 WM0 7z0 3d0 14L0 1cN0 1f90 1ar0 16J0 1gXB0 WM0 1rA0 11c0 nwo0 Ko0 1cM0 1cM0 1rA0 10M0 zuM0 10N0 1aN0 1qM0 WM0 1qM0 11A0 1o00","Africa/Windhoek|SWAT SAST SAST CAT WAT WAST|-1u -20 -30 -20 -10 -20|012134545454545454545454545454545454545454545454545454545454545454545454545454545454545454545|-2GJdu 1Ajdu 1cL0 1SqL0 9NA0 11D0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0","America/Adak|NST NWT NPT BST BDT AHST HAST HADT|b0 a0 a0 b0 a0 a0 a0 90|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17SX0 8wW0 iB0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|CAT CAWT CAPT AHST AHDT YST AKST AKDT|a0 90 90 a0 90 90 90 80|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17T00 8wX0 iA0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cm0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|LMT AST|46.4 40|01|-2kNvR.U","America/Antigua|LMT EST AST|47.c 50 40|012|-2kNvQ.M 1yxAQ.M","America/Araguaina|LMT BRT BRST|3c.M 30 20|0121212121212121212121212121212121212121212121212121|-2glwL.c HdKL.c 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 ny10 Lz0","America/Argentina/Buenos_Aires|CMT ART ARST ART ARST|4g.M 40 30 30 20|0121212121212121212121212121212121212121213434343434343234343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 g0p0 10M0 j3c0 uL0 1qN0 WL0","America/Argentina/Catamarca|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343454343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 ako0 7B0 8zb0 uL0","America/Argentina/Cordoba|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343454343234343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 j3c0 uL0 1qN0 WL0","America/Argentina/Jujuy|CMT ART ARST ART ARST WART WARST|4g.M 40 30 30 20 40 30|01212121212121212121212121212121212121212134343456543432343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1ze0 TX0 1ld0 WK0 1wp0 TX0 g0p0 10M0 j3c0 uL0","America/Argentina/La_Rioja|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|01212121212121212121212121212121212121212134343434534343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 g0p0 10M0 ako0 7B0 8zb0 uL0","America/Argentina/Mendoza|CMT ART ARST ART ARST WART WARST|4g.M 40 30 30 20 40 30|0121212121212121212121212121212121212121213434345656543235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1u20 SL0 1vd0 Tb0 1wp0 TW0 g0p0 10M0 agM0 Op0 7TX0 uL0","America/Argentina/Rio_Gallegos|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343434343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 g0p0 10M0 ako0 7B0 8zb0 uL0","America/Argentina/Salta|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|01212121212121212121212121212121212121212134343434543432343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 j3c0 uL0","America/Argentina/San_Juan|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|01212121212121212121212121212121212121212134343434534343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Qn0 qO0 16n0 Rb0 1wp0 TX0 g0p0 10M0 ak00 m10 8lb0 uL0","America/Argentina/San_Luis|CMT ART ARST ART ARST WART WARST|4g.M 40 30 30 20 40 30|01212121212121212121212121212121212121212134343456536353465653|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 XX0 1q20 SL0 AN0 kin0 10M0 ak00 m10 8lb0 8L0 jd0 1qN0 WL0 1qN0","America/Argentina/Tucuman|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|012121212121212121212121212121212121212121343434345434323534343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wq0 Ra0 1wp0 TX0 g0p0 10M0 ako0 4N0 8BX0 uL0 1qN0 WL0","America/Argentina/Ushuaia|CMT ART ARST ART ARST WART|4g.M 40 30 30 20 40|0121212121212121212121212121212121212121213434343434343235343|-20UHH.c pKnH.c Mn0 1iN0 Tb0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 1C10 LX0 1C10 LX0 1C10 LX0 1C10 Mn0 MN0 2jz0 MN0 4lX0 u10 5Lb0 1pB0 Fnz0 u10 uL0 1vd0 SL0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 zvd0 Bz0 1tB0 TX0 1wp0 Rb0 1wp0 Rb0 1wp0 TX0 g0p0 10M0 ajA0 8p0 8zb0 uL0","America/Aruba|LMT ANT AST|4z.L 4u 40|012|-2kV7o.d 28KLS.d","America/Asuncion|AMT PYT PYT PYST|3O.E 40 30 30|012131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|-1x589.k 1DKM9.k 3CL0 3Dd0 10L0 1pB0 10n0 1pB0 10n0 1pB0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1dd0 1cL0 1dd0 1cL0 1dd0 1db0 1dd0 1cL0 1lB0 14n0 1dd0 1cL0 1fd0 WL0 1rd0 1aL0 1dB0 Xz0 1qp0 Xb0 1qN0 10L0 1rB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 WN0 1qL0 11B0 1nX0 1ip0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 TX0 1tB0 19X0 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|CST CDT CWT CPT EST|60 50 50 50 50|0101234|-25TQ0 1in0 Rnb0 3je0 8x30 iw0","America/Bahia|LMT BRT BRST|2y.4 30 20|01212121212121212121212121212121212121212121212121212121212121|-2glxp.U HdLp.U 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 l5B0 Rb0","America/Bahia_Banderas|LMT MST CST PST MDT CDT|71 70 60 80 60 50|0121212131414141414141414141414141414152525252525252525252525252525252525252525252525252525252|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Barbados|LMT BMT AST ADT|3W.t 3W.t 40 30|01232323232|-1Q0I1.v jsM0 1ODC1.v IL0 1ip0 17b0 1ip0 17b0 1ld0 13b0","America/Belem|LMT BRT BRST|3d.U 30 20|012121212121212121212121212121|-2glwK.4 HdKK.4 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0","America/Belize|LMT CST CHDT CDT|5Q.M 60 5u 50|01212121212121212121212121212121212121212121212121213131|-2kBu7.c fPA7.c Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1wou Rbu 1zcu Onu 1zcu Onu 1zcu Rbu 1wou Rbu 1f0Mu qn0 lxB0 mn0","America/Blanc-Sablon|AST ADT AWT APT|40 30 30 30|010230|-25TS0 1in0 UGp0 8x50 iu0","America/Boa_Vista|LMT AMT AMST|42.E 40 30|0121212121212121212121212121212121|-2glvV.k HdKV.k 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 smp0 WL0 1tB0 2L0","America/Bogota|BMT COT COST|4U.g 50 40|0121|-2eb73.I 38yo3.I 2en0","America/Boise|PST PDT MST MWT MPT MDT|80 70 70 60 60 60|0101023425252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-261q0 1nX0 11B0 1nX0 8C10 JCL0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 Dd0 1Kn0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Cambridge_Bay|zzz MST MWT MPT MDDT MDT CST CDT EST|0 70 60 60 50 60 60 50 50|0123141515151515151515151515151515151515151515678651515151515151515151515151515151515151515151515151515151515151515151515151|-21Jc0 RO90 8x20 ix0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11A0 1nX0 2K0 WQ0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|LMT AMT AMST|3C.s 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwl.w HdLl.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0","America/Cancun|LMT CST EST EDT CDT|5L.4 60 50 40 50|0123232341414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQG0 2q2o0 yLB0 1lb0 14p0 1lb0 14p0 Lz0 xB0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Caracas|CMT VET VET|4r.E 4u 40|0121|-2kV7w.k 28KM2.k 1IwOu","America/Cayenne|LMT GFT GFT|3t.k 40 30|012|-2mrwu.E 2gWou.E","America/Cayman|KMT EST|57.b 50|01|-2l1uQ.N","America/Chicago|CST CDT EST CWT CPT|60 50 50 50 50|01010101010101010101010101010101010102010101010103401010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 1wp0 TX0 WN0 1qL0 1cN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 11B0 1Hz0 14p0 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|LMT MST CST CDT MDT|74.k 70 60 50 60|0121212323241414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 2zQN0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Costa_Rica|SJMT CST CDT|5A.d 60 50|0121212121|-1Xd6n.L 2lu0n.L Db0 1Kp0 Db0 pRB0 15b0 1kp0 mL0","America/Creston|MST PST|70 80|010|-29DR0 43B0","America/Cuiaba|LMT AMT AMST|3I.k 40 30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwf.E HdLf.E 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 4a10 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0","America/Danmarkshavn|LMT WGT WGST GMT|1e.E 30 20 0|01212121212121212121212121212121213|-2a5WJ.k 2z5fJ.k 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 DC0","America/Dawson|YST YDT YWT YPT YDDT PST PDT|90 80 80 80 70 80 70|0101023040565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-25TN0 1in0 1o10 13V0 Ser0 8x00 iz0 LCL0 1fA0 jrA0 fNd0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Dawson_Creek|PST PDT PWT PPT MST|80 70 70 70 70|0102301010101010101010101010101010101010101010101010101014|-25TO0 1in0 UGp0 8x10 iy0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 ML0","America/Denver|MST MDT MWT MPT|70 60 60 60|01010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 11B0 1qL0 WN0 mn0 Ord0 8x20 ix0 LCN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|LMT CST EST EWT EPT EDT|5w.b 60 50 40 40 40|01234252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-2Cgir.N peqr.N 156L0 8x40 iv0 6fd0 11z0 Jy10 SL0 dnB0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Edmonton|LMT MST MDT MWT MPT|7x.Q 70 60 60 60|01212121212121341212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2yd4q.8 shdq.8 1in0 17d0 hz0 2dB0 1fz0 1a10 11z0 1qN0 WL0 1qN0 11z0 IGN0 8x20 ix0 3NB0 11z0 LFB0 1cL0 3Cp0 1cL0 66N0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|LMT ACT ACST AMT|4D.s 50 40 40|0121212121212121212121212121212131|-2glvk.w HdLk.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0 yTd0 d5X0","America/El_Salvador|LMT CST CDT|5U.M 60 50|012121|-1XiG3.c 2Fvc3.c WL0 1qN0 WL0","America/Ensenada|LMT MST PST PDT PWT PPT|7M.4 70 80 70 70 70|012123245232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQE0 4PX0 8mM0 8lc0 SN0 1cL0 pHB0 83r0 zI0 5O10 1Rz0 cOP0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 BUp0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Fort_Wayne|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|010101023010101010101010101040454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 QI10 Db0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 5Tz0 1o10 qLb0 1cL0 1cN0 1cL0 1qhd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Fortaleza|LMT BRT BRST|2y 30 20|0121212121212121212121212121212121212121|-2glxq HdLq 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 5z0 2mN0 On0","America/Glace_Bay|LMT AST ADT AWT APT|3X.M 40 30 30 30|012134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsI0.c CwO0.c 1in0 UGp0 8x50 iu0 iq10 11z0 Jg10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|LMT WGT WGST|3q.U 30 20|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a5Ux.4 2z5dx.4 19U0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|NST NDT NST NDT NWT NPT AST ADT ADDT|3u.Q 2u.Q 3u 2u 2u 2u 40 30 20|010232323232323245232323232323232323232323232323232323232326767676767676767676767676767676767676767676768676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-25TSt.8 1in0 DXb0 2HbX.8 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 S10 g0u 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|KMT EST EDT|57.b 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2l1uQ.N 2HHBQ.N 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guatemala|LMT CST CDT|62.4 60 50|0121212121|-24KhV.U 2efXV.U An0 mtd0 Nz0 ifB0 17b0 zDB0 11z0","America/Guayaquil|QMT ECT|5e 50|01|-1yVSK","America/Guyana|LMT GBGT GYT GYT GYT|3Q.E 3J 3J 30 40|01234|-2dvU7.k 24JzQ.k mlc0 Bxbf","America/Halifax|LMT AST ADT AWT APT|4e.o 40 30 30 30|0121212121212121212121212121212121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsHJ.A xzzJ.A 1db0 3I30 1in0 3HX0 IL0 1E10 ML0 1yN0 Pb0 1Bd0 Mn0 1Bd0 Rz0 1w10 Xb0 1w10 LX0 1w10 Xb0 1w10 Lz0 1C10 Jz0 1E10 OL0 1yN0 Un0 1qp0 Xb0 1qp0 11X0 1w10 Lz0 1HB0 LX0 1C10 FX0 1w10 Xb0 1qp0 Xb0 1BB0 LX0 1td0 Xb0 1qp0 Xb0 Rf0 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 6i10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Havana|HMT CST CDT|5t.A 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Meuu.o 72zu.o ML0 sld0 An0 1Nd0 Db0 1Nd0 An0 6Ep0 An0 1Nd0 An0 JDd0 Mn0 1Ap0 On0 1fd0 11X0 1qN0 WL0 1wp0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 14n0 1ld0 14L0 1kN0 15b0 1kp0 1cL0 1cN0 1fz0 1a10 1fz0 1fB0 11z0 14p0 1nX0 11B0 1nX0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 1a10 1in0 1a10 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 17c0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 11A0 6i00 Rc0 1wo0 U00 1tA0 Rc0 1wo0 U00 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/Hermosillo|LMT MST CST PST MDT|7n.Q 70 60 80 60|0121212131414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0","America/Indiana/Knox|CST CDT CWT CPT EST|60 50 50 50 50|0101023010101010101010101010101010101040101010101010101010101010101010101010101010101010141010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 3NB0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 3Cn0 8wp0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 z8o0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Marengo|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101023010101010101010104545454545414545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 dyN0 11z0 6fd0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 jrz0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1e6p0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Petersburg|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010104010101010101010101010141014545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 njX0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 3Fb0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 19co0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Tell_City|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010454541010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 g0p0 11z0 1o10 11z0 1qL0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 caL0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vevay|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|010102304545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 kPB0 Awn0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1lnd0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Vincennes|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010454541014545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 g0p0 11z0 1o10 11z0 1qL0 WN0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 caL0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Indiana/Winamac|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|01010230101010101010101010101010101010454541054545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 jrz0 1cL0 1cN0 1cL0 1qhd0 1o00 Rd0 1za0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Inuvik|zzz PST PDDT MST MDT|0 80 60 70 60|0121343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-FnA0 tWU0 1fA0 wPe0 2pz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Iqaluit|zzz EWT EPT EST EDDT EDT CST CDT|0 40 40 50 30 40 60 50|01234353535353535353535353535353535353535353567353535353535353535353535353535353535353535353535353535353535353535353535353|-16K00 7nX0 iv0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Jamaica|KMT EST EDT|57.b 50 40|0121212121212121212121|-2l1uQ.N 2vwNQ.N 1cL0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0","America/Juneau|PST PWT PPT PDT YDT YST AKST AKDT|80 70 70 70 80 90 90 80|01203030303030303030303030403030356767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cM0 1cM0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Kentucky/Louisville|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101010102301010101010101010101010101454545454545414545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 3Fd0 Nb0 LPd0 11z0 RB0 8x30 iw0 Bb0 10N0 2bB0 8in0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 xz0 gso0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1VA0 LA0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Kentucky/Monticello|CST CDT CWT CPT EST EDT|60 50 50 50 50 40|0101023010101010101010101010101010101010101010101010101010101010101010101454545454545454545454545454545454545454545454545454545454545454545454545454|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 SWp0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/La_Paz|CMT BOST BOT|4w.A 3w.A 40|012|-1x37r.o 13b0","America/Lima|LMT PET PEST|58.A 50 40|0121212121212121|-2tyGP.o 1bDzP.o zX0 1aN0 1cL0 1cN0 1cL0 1PrB0 zX0 1O10 zX0 6Gp0 zX0 98p0 zX0","America/Los_Angeles|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 5Wp0 1Vb0 3dB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Maceio|LMT BRT BRST|2m.Q 30 20|012121212121212121212121212121212121212121|-2glxB.8 HdLB.8 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 dMN0 Lz0 8Q10 WL0 1tB0 5z0 2mN0 On0","America/Managua|MMT CST EST CDT|5J.c 60 50 50|0121313121213131|-1quie.M 1yAMe.M 4mn0 9Up0 Dz0 1K10 Dz0 s3F0 1KH0 DB0 9In0 k8p0 19X0 1o30 11y0","America/Manaus|LMT AMT AMST|40.4 40 30|01212121212121212121212121212121|-2glvX.U HdKX.U 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 dPB0 On0","America/Martinique|FFMT AST ADT|44.k 40 30|0121|-2mPTT.E 2LPbT.E 19X0","America/Matamoros|LMT CST CDT|6E 60 50|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1UQG0 2FjC0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Mazatlan|LMT MST CST PST MDT|75.E 70 60 80 60|0121212131414141414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 otX0 gmN0 P2N0 13Vd0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Menominee|CST CDT CWT CPT EST|60 50 50 50 50|01010230101041010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 1o10 11z0 LCN0 1fz0 6410 9Jb0 1cM0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Merida|LMT CST EST CDT|5W.s 60 50 50|0121313131313131313131313131313131313131313131313131313131313131313131313131313131313131|-1UQG0 2q2o0 2hz0 wu30 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Metlakatla|PST PWT PPT PDT MeST|80 70 70 70 80|0120303030303030303030303030303034|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0","America/Mexico_City|LMT MST CST CDT CWT|6A.A 70 60 50 50|012121232324232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 gEn0 TX0 3xd0 Jb0 6zB0 SL0 e5d0 17b0 1Pff0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Miquelon|LMT AST PMST PMDT|3I.E 40 30 20|012323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-2mKkf.k 2LTAf.k gQ10 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Moncton|EST AST ADT AWT APT|50 40 30 30 30|012121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsH0 CwN0 1in0 zAo0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1K10 Lz0 1zB0 NX0 1u10 Wn0 S20 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14n1 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 ReX 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Monterrey|LMT CST CDT|6F.g 60 50|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1UQG0 2FjC0 1nX0 i6p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Montevideo|MMT UYT UYHST UYST UYT UYHST|3I.I 3u 30 20 30 2u|012121212121212121212121213434343434345454543453434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-20UIf.g 8jzJ.g 1cLu 1dcu 1cLu 1dcu 1cLu ircu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu WLu 1qMu WLu 1qMu 11zu 1o0u 11zu NAu 11bu 2iMu zWu Dq10 19X0 pd0 jz0 cm10 19X0 1fB0 1on0 11d0 1oL0 1nB0 1fzu 1aou 1fzu 1aou 1fzu 3nAu Jb0 3MN0 1SLu 4jzu 2PB0 Lb0 3Dd0 1pb0 ixd0 An0 1MN0 An0 1wp0 On0 1wp0 Rb0 1zd0 On0 1wp0 Rb0 s8p0 1fB0 1ip0 11z0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Montreal|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101012301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-28tR0 bV0 2m30 1in0 121u 1nb0 1g10 11z0 1o0u 11zu 1o0u 11zu 3VAu Rzu 1qMu WLu 1qMu WLu 1qKu WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 4kO0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Nassau|LMT EST EDT|59.u 50 40|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2kNuO.u 26XdO.u 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Nipigon|EST EDT EWT EPT|50 40 40 40|010123010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TR0 1in0 Rnb0 3je0 8x40 iv0 19yN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Nome|NST NWT NPT BST BDT YST AKST AKDT|b0 a0 a0 b0 a0 90 90 80|012034343434343434343434343434343456767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676|-17SX0 8wW0 iB0 Qlb0 52O0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cl0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Noronha|LMT FNT FNST|29.E 20 10|0121212121212121212121212121212121212121|-2glxO.k HdKO.k 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0","America/North_Dakota/Beulah|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101014545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/Center|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101014545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/North_Dakota/New_Salem|MST MDT MWT MPT CST CDT|70 60 60 60 60 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101454545454545454545454545454545454545454545454545454545454545454545454|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14o0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Ojinaga|LMT MST CST CDT MDT|6V.E 70 60 50 60|0121212323241414141414141414141414141414141414141414141414141414141414141414141414141414141|-1UQF0 deL0 8lc0 17c0 10M0 1dd0 2zQN0 1lb0 14p0 1lb0 14q0 1lb0 14p0 1nX0 11B0 1nX0 1fB0 WL0 1fB0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 U10 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Panama|CMT EST|5j.A 50|01|-2uduE.o","America/Pangnirtung|zzz AST AWT APT ADDT ADT EDT EST CST CDT|0 40 30 30 20 30 40 50 60 50|012314151515151515151515151515151515167676767689767676767676767676767676767676767676767676767676767676767676767676767676767|-1XiM0 PnG0 8x50 iu0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1o00 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11C0 1nX0 11A0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|LMT PMT PMT NEGT SRT SRT|3E.E 3E.Q 3E.A 3u 3u 30|012345|-2nDUj.k Wqo0.c qanX.I 1dmLN.o lzc0","America/Phoenix|MST MDT MWT|70 60 60|01010202010|-261r0 1nX0 11B0 1nX0 SgN0 4Al1 Ap0 1db0 SWqX 1cL0","America/Port-au-Prince|PPMT EST EDT|4N 50 40|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-28RHb 2FnMb 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14q0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 i6n0 1nX0 11B0 1nX0 d430 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Porto_Acre|LMT ACT ACST AMT|4v.c 50 40 40|01212121212121212121212121212131|-2glvs.M HdLs.M 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 NBd0 d5X0","America/Porto_Velho|LMT AMT AMST|4f.A 40 30|012121212121212121212121212121|-2glvI.o HdKI.o 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0","America/Puerto_Rico|AST AWT APT|40 30 30|0120|-17lU0 7XT0 iu0","America/Rainy_River|CST CDT CWT CPT|60 50 50 50|010123010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TQ0 1in0 Rnb0 3je0 8x30 iw0 19yN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Rankin_Inlet|zzz CST CDDT CDT EST|0 60 40 50 50|012131313131313131313131313131313131313131313431313131313131313131313131313131313131313131313131313131313131313131313131|-vDc0 keu0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Recife|LMT BRT BRST|2j.A 30 20|0121212121212121212121212121212121212121|-2glxE.o HdLE.o 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 nsp0 WL0 1tB0 2L0 2pB0 On0","America/Regina|LMT MST MDT MWT MPT CST|6W.A 70 60 60 60 60|012121212121212121212121341212121212121212121212121215|-2AD51.o uHe1.o 1in0 s2L0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 66N0 1cL0 1cN0 19X0 1fB0 1cL0 1fB0 1cL0 1cN0 1cL0 M30 8x20 ix0 1ip0 1cL0 1ip0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 3NB0 1cL0 1cN0","America/Resolute|zzz CST CDDT CDT EST|0 60 40 50 50|012131313131313131313131313131313131313131313431313131313431313131313131313131313131313131313131313131313131313131313131|-SnA0 GWS0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|LMT MST PST PDT PWT PPT|7D.s 70 80 70 70 70|012123245232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UQE0 4PX0 8mM0 8lc0 SN0 1cL0 pHB0 83r0 zI0 5O10 1Rz0 cOP0 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 BUp0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santarem|LMT AMT AMST BRT|3C.M 40 30 30|0121212121212121212121212121213|-2glwl.c HdLl.c 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 qe10 xb0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 NBd0","America/Santiago|SMT CLT CLT CLST CLST|4G.K 50 40 40 30|010203131313131313124242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424|-2q5Th.e fNch.e 5gLG.K 21bh.e jRAG.K 1pbh.e 11d0 1oL0 11d0 1oL0 11d0 1oL0 11d0 1pb0 11d0 nHX0 op0 9UK0 1Je0 Qen0 WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1ld0 14n0 1qN0 11z0 1cN0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","America/Santo_Domingo|SDMT EST EDT EHDT AST|4E 50 40 4u 40|01213131313131414|-1ttjk 1lJMk Mn0 6sp0 Lbu 1Cou yLu 1RAu wLu 1QMu xzu 1Q0u xXu 1PAu 13jB0 e00","America/Sao_Paulo|LMT BRT BRST|36.s 30 20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-2glwR.w HdKR.w 1cc0 1e10 1bX0 Ezd0 So0 1vA0 Mn0 1BB0 ML0 1BB0 zX0 pTd0 PX0 2ep0 nz0 1C10 zX0 1C10 LX0 1C10 Mn0 H210 Rb0 1tB0 IL0 1Fd0 FX0 1EN0 FX0 1HB0 Lz0 1EN0 Lz0 1C10 IL0 1HB0 Db0 1HB0 On0 1zd0 On0 1zd0 Lz0 1zd0 Rb0 1wN0 Wn0 1tB0 Rb0 1tB0 WL0 1tB0 Rb0 1zd0 On0 1HB0 FX0 1C10 Lz0 1Ip0 HX0 1zd0 On0 1HB0 IL0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 Rb0 1wp0 On0 1C10 Lz0 1C10 On0 1zd0","America/Scoresbysund|LMT CGT CGST EGST EGT|1r.Q 20 10 0 10|0121343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-2a5Ww.8 2z5ew.8 1a00 1cK0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Sitka|PST PWT PPT PDT YST AKST AKDT|80 70 70 70 90 90 80|01203030303030303030303030303030345656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-17T20 8x10 iy0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 co0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/St_Johns|NST NDT NST NDT NWT NPT NDDT|3u.Q 2u.Q 3u 2u 2u 2u 1u|01010101010101010101010101010101010102323232323232324523232323232323232323232323232323232323232323232323232323232323232323232323232323232326232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-28oit.8 14L0 1nB0 1in0 1gm0 Dz0 1JB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1fB0 19X0 1fB0 19X0 10O0 eKX.8 19X0 1iq0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Swift_Current|LMT MST MDT MWT MPT CST|7b.k 70 60 60 60 60|012134121212121212121215|-2AD4M.E uHdM.E 1in0 UGp0 8x20 ix0 1o10 17b0 1ip0 11z0 1o10 11z0 1o10 11z0 isN0 1cL0 3Cp0 1cL0 1cN0 11z0 1qN0 WL0 pMp0","America/Tegucigalpa|LMT CST CDT|5M.Q 60 50|01212121|-1WGGb.8 2ETcb.8 WL0 1qN0 WL0 GRd0 AL0","America/Thule|LMT AST ADT|4z.8 40 30|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a5To.Q 31NBo.Q 1cL0 1cN0 1cL0 1fB0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Thunder_Bay|CST EST EWT EPT EDT|60 50 40 40 40|0123141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141|-2q5S0 1iaN0 8x40 iv0 XNB0 1cL0 1cN0 1fz0 1cN0 1cL0 3Cp0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Toronto|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101012301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TR0 1in0 11Wu 1nzu 1fD0 WJ0 1wr0 Nb0 1Ap0 On0 1zd0 On0 1wp0 TX0 1tB0 TX0 1tB0 TX0 1tB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 4kM0 8x40 iv0 1o10 11z0 1nX0 11z0 1o10 11z0 1o10 1qL0 11D0 1nX0 11B0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Vancouver|PST PDT PWT PPT|80 70 70 70|0102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-25TO0 1in0 UGp0 8x10 iy0 1o10 17b0 1ip0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Whitehorse|YST YDT YWT YPT YDDT PST PDT|90 80 80 80 70 80 70|0101023040565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565|-25TN0 1in0 1o10 13V0 Ser0 8x00 iz0 LCL0 1fA0 1Be0 xDz0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Winnipeg|CST CDT CWT CPT|60 50 50 50|010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aIi0 WL0 3ND0 1in0 Jap0 Rb0 aCN0 8x30 iw0 1tB0 11z0 1ip0 11z0 1o10 11z0 1o10 11z0 1rd0 10L0 1op0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 1cL0 1cN0 11z0 6i10 WL0 6i10 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1o00 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1o00 11A0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Yakutat|YST YWT YPT YDT AKST AKDT|90 80 80 80 90 80|01203030303030303030303030303030304545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-17T10 8x00 iz0 Vo10 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 cn0 10q0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Yellowknife|zzz MST MWT MPT MDDT MDT|0 70 60 60 50 60|012314151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151|-1pdA0 hix0 8x20 ix0 LCL0 1fA0 zgO0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|zzz WST CAST|0 -80 -b0|012121|-2q00 1DjS0 T90 40P0 KL0","Antarctica/Davis|zzz DAVT DAVT|0 -70 -50|01012121|-vyo0 iXt0 alj0 1D7v0 VB0 3Wn0 KN0","Antarctica/DumontDUrville|zzz PMT DDUT|0 -a0 -a0|0102|-U0o0 cfq0 bFm0","Antarctica/Macquarie|EST EST zzz MIST|-a0 -b0 0 -b0|0102010101010101010101010101010101010101010101010101010101010101010101010101010101010101013|-29E80 19X0 4SL0 1ayy0 Lvs0 1cM0 1o00 Rc0 1wo0 Rc0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0","Antarctica/Mawson|zzz MAWT MAWT|0 -60 -50|012|-CEo0 2fyk0","Antarctica/McMurdo|NZMT NZST NZST NZDT|-bu -cu -c0 -d0|01020202020202020202020202023232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323|-1GCVu Lz0 1tB0 11zu 1o0u 11zu 1o0u 11zu 1o0u 14nu 1lcu 14nu 1lcu 1lbu 11Au 1nXu 11Au 1nXu 11Au 1nXu 11Au 1nXu 11Au 1qLu WMu 1qLu 11Au 1n1bu IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Palmer|zzz ARST ART ART ARST CLT CLST|0 30 40 30 20 40 30|012121212123435656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656565656|-cao0 nD0 1vd0 SL0 1vd0 17z0 1cN0 1fz0 1cN0 1cL0 1cN0 asn0 Db0 jsN0 14N0 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1ld0 14n0 1qN0 11z0 1cN0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","Antarctica/Rothera|zzz ROTT|0 30|01|gOo0","Antarctica/Syowa|zzz SYOT|0 -30|01|-vs00","Antarctica/Troll|zzz UTC CEST|0 0 -20|01212121212121212121212121212121212121212121212121212121212121212121|1puo0 hd0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|zzz VOST|0 -60|01|-tjA0","Arctic/Longyearbyen|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2awM0 Qm0 W6o0 5pf0 WM0 1fA0 1cM0 1cM0 1cM0 1cM0 wJc0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1qM0 WM0 zpc0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Aden|LMT AST|-2X.S -30|01|-MG2X.S","Asia/Almaty|LMT ALMT ALMT ALMST|-57.M -50 -60 -70|0123232323232323232323232323232323232323232323232|-1Pc57.M eUo7.M 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 3Cl0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Amman|LMT EET EEST|-2n.I -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1yW2n.I 1HiMn.I KL0 1oN0 11b0 1oN0 11b0 1pd0 1dz0 1cp0 11b0 1op0 11b0 fO10 1db0 1e10 1cL0 1cN0 1cL0 1cN0 1fz0 1pd0 10n0 1ld0 14n0 1hB0 15b0 1ip0 19X0 1cN0 1cL0 1cN0 17b0 1ld0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1So0 y00 1fc0 1dc0 1co0 1dc0 1cM0 1cM0 1cM0 1o00 11A0 1lc0 17c0 1cM0 1cM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Asia/Anadyr|LMT ANAT ANAT ANAST ANAST ANAST ANAT|-bN.U -c0 -d0 -e0 -d0 -c0 -b0|01232414141414141414141561414141414141414141414141414141414141561|-1PcbN.U eUnN.U 23CL0 1db0 1cN0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Asia/Aqtau|LMT FORT FORT SHET SHET SHEST AQTT AQTST AQTST AQTT|-3l.4 -40 -50 -50 -60 -60 -50 -60 -50 -40|012345353535353535353536767676898989898989898989896|-1Pc3l.4 eUnl.4 1jcL0 JDc0 1cL0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2UK0 Fz0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cN0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 RW0","Asia/Aqtobe|LMT AKTT AKTT AKTST AKTT AQTT AQTST|-3M.E -40 -50 -60 -60 -50 -60|01234323232323232323232565656565656565656565656565|-1Pc3M.E eUnM.E 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2UK0 Fz0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Ashgabat|LMT ASHT ASHT ASHST ASHST TMT TMT|-3R.w -40 -50 -60 -50 -40 -50|012323232323232323232324156|-1Pc3R.w eUnR.w 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 ba0 xC0","Asia/Baghdad|BMT AST ADT|-2V.A -30 -40|012121212121212121212121212121212121212121212121212121|-26BeV.A 2ACnV.A 11b0 1cp0 1dz0 1dd0 1db0 1cN0 1cp0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1de0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0 1dc0 1dc0 1cM0 1dc0 1cM0 1dc0 1cM0 1dc0","Asia/Bahrain|LMT GST AST|-3m.k -40 -30|012|-21Jfm.k 27BXm.k","Asia/Baku|LMT BAKT BAKT BAKST BAKST AZST AZT AZT AZST|-3j.o -30 -40 -50 -40 -40 -30 -40 -50|0123232323232323232323245657878787878787878787878787878787878787878787878787878787878787878787878787878787878787|-1Pc3j.o 1jUoj.o WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 10K0 c30 1cJ0 1cL0 8wu0 1o00 11z0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|BMT ICT|-6G.4 -70|01|-218SG.4","Asia/Beirut|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-21aq0 1on0 1410 1db0 19B0 1in0 1ip0 WL0 1lQp0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 q6N0 En0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1op0 11b0 dA10 17b0 1iN0 17b0 1iN0 17b0 1iN0 17b0 1vB0 SL0 1mp0 13z0 1iN0 17b0 1iN0 17b0 1jd0 12n0 1a10 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|LMT FRUT FRUT FRUST FRUST KGT KGST KGT|-4W.o -50 -60 -70 -60 -50 -60 -60|01232323232323232323232456565656565656565656565656567|-1Pc4W.o eUnW.o 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 11c0 1tX0 17b0 1ip0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1cPu 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 T8u","Asia/Brunei|LMT BNT BNT|-7D.E -7u -80|012|-1KITD.E gDc9.E","Asia/Calcutta|HMT BURT IST IST|-5R.k -6u -5u -6u|01232|-18LFR.k 1unn.k HB0 7zX0","Asia/Choibalsan|LMT ULAT ULAT CHOST CHOT CHOT|-7C -70 -80 -a0 -90 -80|012343434343434343434343434343434343434343434345|-2APHC 2UkoC cKn0 1da0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 3Db0","Asia/Chongqing|LMT LONT CST CDT|-76.k -70 -80 -90|012323232323232|-1Ggv6.k 27pA6.k eBz0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0","Asia/Colombo|MMT IST IHST IST LKT LKT|-5j.w -5u -60 -6u -6u -60|01231451|-2zOtj.w 1rFbN.w 1zzu 7Apu 23dz0 11zu n3cu","Asia/Dacca|HMT BURT IST DACT BDT BDST|-5R.k -6u -5u -60 -60 -70|01213454|-18LFR.k 1unn.k HB0 m6n0 LqMu 1x6n0 1hXX","Asia/Damascus|LMT EET EEST|-2p.c -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-21Jep.c Hep.c 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1xRB0 11X0 1oN0 10L0 1pB0 11b0 1oN0 10L0 1mp0 13X0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 Nb0 1AN0 Nb0 bcp0 19X0 1gp0 19X0 3ld0 1xX0 Vd0 1Bz0 Sp0 1vX0 10p0 1dz0 1cN0 1cL0 1db0 1db0 1g10 1an0 1ap0 1db0 1fd0 1db0 1cN0 1db0 1dd0 1db0 1cp0 1dz0 1c10 1dX0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1db0 1cN0 1db0 1cN0 19z0 1fB0 1qL0 11B0 1on0 Wp0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0","Asia/Dili|LMT TLT JST TLT WITA|-8m.k -80 -90 -90 -80|012343|-2le8m.k 1dnXm.k 8HA0 1ew00 Xld0","Asia/Dubai|LMT GST|-3F.c -40|01|-21JfF.c","Asia/Dushanbe|LMT DUST DUST DUSST DUSST TJT|-4z.c -50 -60 -70 -60 -50|0123232323232323232323245|-1Pc4z.c eUnz.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 14N0","Asia/Gaza|EET EET EEST IST IDT|-20 -30 -30 -20 -30|010101010102020202020202020202023434343434343434343434343430202020202020202020202020202020202020202020202020202020202020202020202020202020202020|-1c2q0 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 pBd0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 dW0 hfB0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 11z0 1o10 14o0 1lA1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Harbin|LMT CHAT CST CHAT CDT|-8q.I -8u -80 -90 -90|012312424242424242|-1Ggwq.I a8nU.I j4Mu 146L0 y5Au eBAu Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0","Asia/Hebron|EET EET EEST IST IDT|-20 -30 -30 -20 -30|01010101010202020202020202020202343434343434343434343434343020202020202020202020202020202020202020202020202020202020202020202020202020202020202020|-1c2q0 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 pBd0 Vz0 1oN0 11b0 1oO0 10N0 1pz0 10N0 1pb0 10N0 1pb0 10N0 1pb0 10N0 1pz0 10N0 1pb0 10N0 1pb0 11d0 1oL0 dW0 hfB0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 M10 C00 17c0 1io0 17c0 1io0 17c0 1o00 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 17c0 1io0 18N0 1bz0 19z0 1gp0 1610 1iL0 12L0 1mN0 14o0 1lc0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Ho_Chi_Minh|LMT SMT ICT ICT|-76.E -76.k -70 -80|01232|-2yKT6.E byo1.k 2KM5.k Kfz0","Asia/Hong_Kong|LMT HKT HKST JST|-7A.G -80 -90 -90|0121312121212121212121212121212121212121212121212121212121212121212121|-2CFHA.G 1sEP6.G 1cL0 ylu 93X0 1qQu 1tX0 Rd0 1In0 NB0 1cL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1kL0 14N0 1nX0 U10 1tz0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 Rd0 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 17d0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 s10 1Vz0 1cN0 1cL0 1cN0 1cL0 6fd0 14n0","Asia/Hovd|LMT HOVT HOVT HOVST|-66.A -60 -70 -80|01232323232323232323232323232323232323232323232|-2APG6.A 2Uko6.A cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0","Asia/Irkutsk|IMT IRKT IRKT IRKST IRKST IRKT|-6V.k -70 -80 -90 -80 -90|01232323232323232323232412323232323232323232323232323232323232325|-21zGV.k pjXV.k 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Istanbul|IMT EET EEST TRST TRT|-1U.U -20 -30 -40 -30|012121212121212121212121212121212121212121212121212121234343434342121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ogNU.U dzzU.U 11b0 8tB0 1on0 1410 1db0 19B0 1in0 3Rd0 Un0 1oN0 11b0 zSp0 CL0 mN0 1Vz0 1gN0 1pz0 5Rd0 1fz0 1yp0 ML0 1kp0 17b0 1ip0 17b0 1fB0 19X0 1jB0 18L0 1ip0 17z0 qdd0 xX0 3S10 Tz0 dA10 11z0 1o10 11z0 1qN0 11z0 1ze0 11B0 WM0 1qO0 WI0 1nX0 1rB0 10L0 11B0 1in0 17d0 1in0 2pX0 19E0 1fU0 16Q0 1iI0 16Q0 1iI0 1Vd0 pb0 3Kp0 14o0 1df0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WO0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|BMT JAVT WIB JST WIB WIB|-77.c -7k -7u -90 -80 -70|01232425|-1Q0Tk luM0 mPzO 8vWu 6kpu 4PXu xhcu","Asia/Jayapura|LMT WIT CST|-9m.M -90 -9u|0121|-1uu9m.M sMMm.M L4nu","Asia/Jerusalem|JMT IST IDT IDDT|-2k.E -20 -30 -40|01212121212132121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-26Bek.E SyMk.E 5Rb0 10r0 1px0 10N0 1pz0 16p0 1jB0 16p0 1jx0 3LB0 Em0 or0 1cn0 1dB0 16n0 10O0 1ja0 1tC0 14o0 1cM0 1a00 11A0 1Na0 An0 1MP0 AJ0 1Kp0 LC0 1oo0 Wl0 EQN0 Db0 1fB0 Rb0 npB0 11z0 1C10 IL0 1s10 10n0 1o10 WL0 1zd0 On0 1ld0 11z0 1o10 14n0 1o10 14n0 1nd0 12n0 1nd0 Xz0 1q10 12n0 1hB0 1dX0 1ep0 1aL0 1eN0 17X0 1nf0 11z0 1tB0 19W0 1e10 17b0 1ep0 1gL0 18N0 1fz0 1eN0 17b0 1gq0 1gn0 19d0 1dz0 1c10 17X0 1hB0 1gn0 19d0 1dz0 1c10 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT AFT|-40 -4u|01|-10Qs0","Asia/Kamchatka|LMT PETT PETT PETST PETST|-ay.A -b0 -c0 -d0 -c0|01232323232323232323232412323232323232323232323232323232323232412|-1SLKy.A ivXy.A 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Asia/Karachi|LMT IST IST KART PKT PKST|-4s.c -5u -6u -50 -50 -60|012134545454|-2xoss.c 1qOKW.c 7zX0 eup0 LqMu 1fy01 1cL0 dK0X 11b0 1610 1jX0","Asia/Kashgar|LMT KAST KAST CST CDT|-53.U -5u -50 -80 -90|0123434343434343|-1Ggt3.U tdbx.U 1Ccou eBx0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0","Asia/Kathmandu|LMT IST NPT|-5F.g -5u -5J|012|-21JhF.g 2EGMb.g","Asia/Khandyga|LMT YAKT YAKT YAKST YAKST VLAT VLAST VLAT YAKT|-92.d -80 -90 -a0 -90 -a0 -b0 -b0 -a0|0123232323232323232323241232323232323232323232323256565656565656578|-21Q92.d pAp2.d 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 qK0 yN0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0","Asia/Krasnoyarsk|LMT KRAT KRAT KRAST KRAST KRAT|-6b.k -60 -70 -80 -70 -80|01232323232323232323232412323232323232323232323232323232323232325|-21Hib.k prAb.k 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Kuala_Lumpur|SMT MALT MALST MALT MALT JST MYT|-6T.p -70 -7k -7k -7u -90 -80|01234546|-2Bg6T.p 17anT.p 7hXE dM00 17bO 8Fyu 1so1u","Asia/Kuching|LMT BORT BORT BORTST JST MYT|-7l.k -7u -80 -8k -90 -80|01232323232323232425|-1KITl.k gDbP.k 6ynu AnE 1O0k AnE 1NAk AnE 1NAk AnE 1NAk AnE 1O0k AnE 1NAk AnE pAk 8Fz0 1so10","Asia/Kuwait|LMT AST|-3b.U -30|01|-MG3b.U","Asia/Macao|LMT MOT MOST CST|-7y.k -80 -90 -80|0121212121212121212121212121212121212121213|-2le7y.k 1XO34.k 1wn0 Rd0 1wn0 R9u 1wqu U10 1tz0 TVu 1tz0 17gu 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cJu 1cL0 1cN0 1fz0 1cN0 1cOu 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cJu 1cL0 1cN0 1fz0 1cN0 1cL0 KEp0","Asia/Magadan|LMT MAGT MAGT MAGST MAGST MAGT|-a3.c -a0 -b0 -c0 -b0 -c0|01232323232323232323232412323232323232323232323232323232323232325|-1Pca3.c eUo3.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Makassar|LMT MMT WITA JST|-7V.A -7V.A -80 -90|01232|-21JjV.A vfc0 myLV.A 8ML0","Asia/Manila|PHT PHST JST|-80 -90 -90|010201010|-1kJI0 AL0 cK10 65X0 mXB0 vX0 VK10 1db0","Asia/Muscat|LMT GST|-3S.o -40|01|-21JfS.o","Asia/Nicosia|LMT EET EEST|-2d.s -20 -30|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1Vc2d.s 2a3cd.s 1cL0 1qp0 Xz0 19B0 19X0 1fB0 1db0 1cp0 1cL0 1fB0 19X0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1o30 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|NMT KRAT KRAT KRAST KRAST NOVST NOVT NOVT|-5M.M -60 -70 -80 -70 -70 -60 -70|01232323232323232323232412323232323232323232323232323232323232567|-21HhM.M przM.M 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Asia/Novosibirsk|LMT NOVT NOVT NOVST NOVST|-5v.E -60 -70 -80 -70|012323232323232323232324123234141414141414141414141414141414141412|-21Qnv.E pAFv.E 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 ml0 Os0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Omsk|LMT OMST OMST OMSST OMSST OMST|-4R.A -50 -60 -70 -60 -70|01232323232323232323232412323232323232323232323232323232323232325|-224sR.A pMLR.A 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Oral|LMT URAT URAT URAST URAT URAST ORAT ORAST ORAT|-3p.o -40 -50 -60 -60 -50 -40 -50 -50|012343232323232323251516767676767676767676767676768|-1Pc3p.o eUnp.o 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 2UK0 Fz0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 RW0","Asia/Phnom_Penh|LMT SMT ICT ICT|-6X.E -76.k -70 -80|01232|-2yKSX.E bynS.k 2KM5.k Kfz0","Asia/Pontianak|LMT PMT WIB JST WIB WITA WIB|-7h.k -7h.k -7u -90 -80 -80 -70|012324256|-2ua7h.k XE00 munL.k 8Rau 6kpu 4PXu xhcu Wqnu","Asia/Pyongyang|KST KST KST|-8u -90 -80|010121|-2CsUu Ucnu 9Iou S5Xu hXB0","Asia/Qatar|LMT GST AST|-3q.8 -40 -30|012|-21Jfq.8 27BXq.8","Asia/Qyzylorda|LMT KIZT KIZT KIZST KIZT QYZT QYZT QYZST|-4l.Q -40 -50 -60 -60 -50 -60 -70|012343232323232323232325676767676767676767676767676|-1Pc4l.Q eUol.Q 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 2UK0 dC0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Rangoon|RMT BURT JST MMT|-6o.E -6u -90 -6u|0123|-21Jio.E SmnS.E 7j9u","Asia/Riyadh|LMT AST|-36.Q -30|01|-MG36.Q","Asia/Sakhalin|LMT CJT JST SAKT SAKST SAKST SAKT|-9u.M -90 -90 -b0 -c0 -b0 -a0|012343434343434343434343563434343434356565656565656565656565656563|-2AGVu.M 1iLAu.M iBc0 1qFa0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o10 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Samarkand|LMT SAMT SAMT SAMST TAST UZST UZT|-4r.c -40 -50 -60 -60 -60 -50|01234323232323232323232356|-1Pc4r.c eUor.c 23CL0 1db0 1cM0 1dc0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 11x0 bf0","Asia/Seoul|KST KST KST KDT KDT|-8u -90 -80 -90 -a0|0101232014141|-2CsUu Ucnu 9Iou S5Xu eWN0 Mn0 2cp0 hnzu JhXu 11z0 1o10 11z0","Asia/Shanghai|LMT CST CDT|-85.V -80 -90|012121212121212121|-1Ggw5.V ueM5.V LX0 16p0 1jz0 1Myp0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0","Asia/Singapore|SMT MALT MALST MALT MALT JST SGT SGT|-6T.p -70 -7k -7k -7u -90 -7u -80|012345467|-2Bg6T.p 17anT.p 7hXE dM00 17bO 8Fyu Mspu DTA0","Asia/Taipei|CST CDT|-80 -90|01010101010101010101010101010101010101010|-104w0 11b0 1oN0 11b0 1oN0 11b0 1pd0 11b0 1oN0 11b0 1oN0 11b0 1oN0 11b0 10N0 1BX0 10p0 1pz0 10p0 1pz0 10p0 1db0 1dd0 1db0 1cN0 1db0 1cN0 1db0 1cN0 1db0 1BB0 ML0 1Bd0 ML0 uq10 1db0 1cN0 1db0 97d0 AL0","Asia/Tashkent|LMT TAST TAST TASST TASST UZST UZT|-4B.c -50 -60 -70 -60 -60 -50|01232323232323232323232456|-1Pc4B.c eUnB.c 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 11y0 bf0","Asia/Tbilisi|TBMT TBIT TBIT TBIST TBIST GEST GET GET GEST|-2X.g -30 -40 -50 -40 -40 -30 -40 -50|0123232323232323232323245656565787878787878787878567|-1Pc2X.g 1jUnX.g WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 3y0 19f0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cM0 1cL0 1fB0 3Nz0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 An0 Os0 WM0","Asia/Tehran|LMT TMT IRST IRST IRDT IRDT|-3p.I -3p.I -3u -40 -50 -4u|01234325252525252525252525252525252525252525252525252525252525252525252525252525252525252525252525252|-2btDp.I 1d3c0 1huLT.I TXu 1pz0 sN0 vAu 1cL0 1dB0 1en0 pNB0 UL0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 64p0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|LMT IST BTT|-5W.A -5u -60|012|-Su5W.A 1BGMs.A","Asia/Tokyo|CJT JST JDT|-90 -90 -a0|0121212121|-1hTl0 p9C0 QL0 1lB0 13X0 1zB0 NX0 1zB0 NX0","Asia/Ulaanbaatar|LMT ULAT ULAT ULAST|-77.w -70 -80 -90|01232323232323232323232323232323232323232323232|-2APH7.w 2Uko7.w cKn0 1db0 1dd0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 6hD0 11z0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0","Asia/Urumqi|LMT URUT CST CDT|-5O.k -60 -80 -90|012323232323232|-1GgtO.k 27pzO.k eBy0 Rb0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0","Asia/Ust-Nera|LMT YAKT YAKT MAGST MAGT MAGST MAGT MAGT VLAT|-9w.S -80 -90 -c0 -b0 -b0 -a0 -c0 -b0|012343434343434343434345643434343434343434343434343434343434343478|-21Q9w.S pApw.S 23CL0 1d90 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 17V0","Asia/Vientiane|LMT SMT ICT ICT|-6O.o -76.k -70 -80|01232|-2yKSO.o bynJ.4 2KM5.k Kfz0","Asia/Vladivostok|LMT VLAT VLAT VLAST VLAST VLAT|-8L.I -90 -a0 -b0 -a0 -b0|01232323232323232323232412323232323232323232323232323232323232325|-1SJIL.I itXL.I 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Yakutsk|LMT YAKT YAKT YAKST YAKST YAKT|-8C.E -80 -90 -a0 -90 -a0|01232323232323232323232412323232323232323232323232323232323232325|-21Q8C.E pAoC.E 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Yekaterinburg|LMT SVET SVET SVEST SVEST YEKT YEKST YEKT|-42.o -40 -50 -60 -50 -50 -60 -60|01232323232323232323232415656565656565656565656565656565656565657|-22Rc2.o qBw2.o 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Asia/Yerevan|LMT YERT YERT YERST YERST AMST AMT AMT AMST|-2W -30 -40 -50 -40 -40 -30 -40 -50|0123232323232323232323245656565657878787878787878787878787878787|-1Pc2W 1jUnW WCL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1am0 2r0 1cJ0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fb0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Atlantic/Azores|HMT AZOT AZOST AZOMT AZOT AZOST WET|1S.w 20 10 0 10 0 0|01212121212121212121212121212121212121212121232123212321232121212121212121212121212121212121212121454545454545454545454545454545456545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2mGK5.s ckL5.s Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 qIl0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cL0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Bermuda|LMT AST ADT|4j.i 40 30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1BnRE.G 1LTbE.G 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Atlantic/Canary|LMT CANT WET WEST|11.A 10 0 -10|01232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-1UtaW.o XPAW.o 1lAK0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|LMT CVT CVST CVT|1y.4 20 10 10|01213|-2xomp.U 1qOMp.U 7zX0 1djf0","Atlantic/Faeroe|LMT WET WEST|r.4 0 -10|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2uSnw.U 2Wgow.U 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Madeira|FMT MADT MADST MADMT WET WEST|17.A 10 0 -10 0 -10|01212121212121212121212121212121212121212121232123212321232121212121212121212121212121212121212121454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2mGKQ.o ckKQ.o Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 qIl0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Reykjavik|RMT IST ISST GMT|1r.M 10 0 0|01212121212121212121212121212121212121212121212121212121212121213|-2uWmw.c mfaw.c 1Bd0 ML0 1LB0 NLX0 1pe0 zd0 1EL0 LA0 1C00 Oo0 1wo0 Rc0 1wo0 Rc0 1wo0 Rc0 1zc0 Oo0 1zc0 14o0 1lc0 14o0 1lc0 14o0 1o00 11A0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1lc0 14o0 1o00 14o0","Atlantic/South_Georgia|GST|20|0|","Atlantic/St_Helena|JMT GMT|m.M 0|01|-KfXB.c","Atlantic/Stanley|SMT FKT FKST FKT FKST|3P.o 40 30 30 20|0121212121212134343212121212121212121212121212121212121212121212121212|-2kJw8.A 12bA8.A 19X0 1fB0 19X0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 Cn0 1Cc10 WL0 1qL0 U10 1tz0 U10 1qM0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 U10 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1tz0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qL0 WN0 1qN0 U10 1wn0 Rd0 1wn0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1tz0 U10 1wn0 U10 1tz0 U10 1tz0 U10","Australia/ACT|EST EST|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|CST CST|-9u -au|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 WM0 1qM0 Rc0 1zc0 U00 1tA0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|EST EST|-a0 -b0|01010101010101010|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0","Australia/Broken_Hill|CST CST|-9u -au|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 14o0 1o00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1tA0 WM0 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Currie|EST EST|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-29E80 19X0 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Darwin|CST CST|-9u -au|010101010|-293lt xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0","Australia/Eucla|CWST CWST|-8J -9J|0101010101010101010|-293kI xcX 10jd0 yL0 1cN0 1cL0 1gSp0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0","Australia/Hobart|EST EST|-a0 -b0|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-29E80 19X0 10jd0 yL0 1cN0 1cL0 1fB0 19X0 VfB0 1cM0 1o00 Rc0 1wo0 Rc0 1wo0 U00 1wo0 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 11A0 1qM0 WM0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1wo0 WM0 1tA0 WM0 1tA0 U00 1tA0 U00 1tA0 11A0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 11A0 1o00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/LHI|EST LHST LHST LHST|-a0 -au -bu -b0|0121212121313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313131313|raC0 1zdu Rb0 1zd0 On0 1zd0 On0 1zd0 On0 1zd0 TXu 1qMu WLu 1tAu WLu 1tAu TXu 1tAu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu 11zu 1o0u 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 11Au 1nXu 1qMu 11zu 1o0u 11zu 1o0u 11zu 1qMu WLu 1qMu 11zu 1o0u WLu 1qMu 14nu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Lindeman|EST EST|-a0 -b0|010101010101010101010|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 H1A0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0","Australia/Melbourne|EST EST|-a0 -b0|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101|-293lX xcX 10jd0 yL0 1cN0 1cL0 1fB0 19X0 17c10 LA0 1C00 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 U00 1qM0 WM0 1qM0 11A0 1tA0 U00 1tA0 U00 1tA0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 11A0 1o00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 14o0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Perth|WST WST|-80 -90|0101010101010101010|-293jX xcX 10jd0 yL0 1cN0 1cL0 1gSp0 Oo0 l5A0 Oo0 iJA0 G00 zU00 IM0 1qM0 11A0 1o00 11A0","CET|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","CST6CDT|CST CDT CWT CPT|60 50 50 50|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 SgN0 8x30 iw0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Chile/EasterIsland|EMT EASST EAST EAST EASST|7h.s 60 70 60 50|012121212121212121212121212121213434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-1uSgG.w nHUG.w op0 9UK0 RXB0 WL0 1zd0 On0 1ip0 11z0 1o10 11z0 1qN0 WL0 1ld0 14n0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 WL0 1qN0 1cL0 1cN0 11z0 1ld0 14n0 1qN0 11z0 1cN0 19X0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1ip0 1fz0 1fB0 11z0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 17b0 1ip0 11z0 1o10 19X0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","EET|EET EEST|-20 -30|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","EST|EST|50|0|","EST5EDT|EST EDT EWT EPT|50 40 40 40|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 SgN0 8x40 iv0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Eire|DMT IST GMT BST IST|p.l -y.D 0 -10 -10|01232323232324242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242424242|-2ax9y.D Rc0 1fzy.D 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 g5X0 14p0 1wn0 17d0 1io0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Amsterdam|AMT NST NEST NET CEST CET|-j.w -1j.w -1k -k -20 -10|010101010101010101010101010101010101010101012323234545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545|-2aFcj.w 11b0 1iP0 11A0 1io0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1co0 1io0 1yo0 Pc0 1a00 1fA0 1Bc0 Mo0 1tc0 Uo0 1tA0 U00 1uo0 W00 1s00 VA0 1so0 Vc0 1sM0 UM0 1wo0 Rc0 1u00 Wo0 1rA0 W00 1s00 VA0 1sM0 UM0 1w00 fV0 BCX.w 1tA0 U00 1u00 Wo0 1sm0 601k WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Andorra|WET CET CEST|0 -10 -20|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-UBA0 1xIN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Athens|AMT EET EEST CEST CET|-1y.Q -20 -30 -20 -10|012123434121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2a61x.Q CNbx.Q mn0 kU10 9b0 3Es0 Xa0 1fb0 1dd0 k3X0 Nz0 SCp0 1vc0 SO0 1cM0 1a00 1ao0 1fc0 1a10 1fG0 1cg0 1dX0 1bX0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Belfast|GMT BST BDST|0 -10 -20|0101010101010101010101010101010101010101010101010121212121210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Belgrade|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19RC0 3IP0 WM0 1fA0 1cM0 1cM0 1rc0 Qo0 1vmo0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Berlin|CET CEST CEMT|-10 -20 -30|01010101010101210101210101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 kL0 Nc0 m10 WM0 1ao0 1cp0 dX0 jz0 Dd0 1io0 17c0 1fA0 1a00 1ehA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Bratislava|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 16M0 1lc0 1tA0 17A0 11c0 1io0 17c0 1io0 17c0 1fc0 1ao0 1bNc0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Brussels|WET CET CEST WEST|0 -10 -20 -10|0121212103030303030303030303030303030303030303030303212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ehc0 3zX0 11c0 1iO0 11A0 1o00 11A0 my0 Ic0 1qM0 Rc0 1EM0 UM0 1u00 10o0 1io0 1io0 17c0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a30 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 y00 5Wn0 WM0 1fA0 1cM0 16M0 1iM0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Bucharest|BMT EET EEST|-1I.o -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1xApI.o 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Axc0 On0 1fA0 1a10 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Budapest|CET CEST|-10 -20|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1ip0 1cn0 1jd0 11b0 1ld0 1bb0 NVc0 3O00 WM0 1fA0 1cM0 1cM0 1oJ0 1e00 Xf0 1fA0 1cM0 1cM0 1cM0 1cM0 1fA0 1a00 1iM0 1fA0 8Ha0 Rb0 1wN0 Rb0 1BB0 Lz0 1C20 LB0 SNX0 1a10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Busingen|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-19Lc0 11A0 1o00 11A0 1xG10 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Chisinau|CMT BMT EET EEST CEST CET MSK MSD|-1T -1I.o -20 -30 -20 -10 -30 -40|0123232323232323232345454676767676767676767623232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-26jdT wGMa.A 20LI.o RA0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 27A0 2en0 39g0 WM0 1fA0 1cM0 V90 1t7z0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1ty0 2bD0 1cM0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Copenhagen|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 Tz0 VuO0 60q0 WM0 1fA0 1cM0 1cM0 1cM0 S00 1HA0 Nc0 1C00 Dc0 1Nc0 Ao0 1h5A0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Gibraltar|GMT BST BDST CET CEST|0 -10 -20 -10 -20|010101010101010101010101010101010101010101010101012121212121010121010101010101010101034343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-2axa0 Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 10Jz0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Helsinki|HMT EET EEST|-1D.Q -20 -30|0121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-1WuND.Q OULD.Q 1db0 1xGP0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|CET CEST CET CEST MSK MSD EEST EET FET|-10 -20 -20 -30 -30 -40 -30 -20 -30|010101010101023245454545454545454545467676767676767676767676767676767676767678|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 Am0 Lb0 1en0 op0 1pNz0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1cJ0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Europe/Kiev|KMT EET MSK CEST CET MSD EEST|-22.4 -20 -30 -20 -10 -40 -30|0123434252525252525252525256161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161|-1Pc22.4 eUo2.4 rnz0 2Hg0 WM0 1fA0 da0 1v4m0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 Db0 3220 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Lisbon|LMT WET WEST WEMT CET CEST|A.w 0 -10 -20 -10 -20|012121212121212121212121212121212121212121212321232123212321212121212121212121212121212121212121214121212121212121212121212121212124545454212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ldXn.s aPWn.s Sp0 LX0 1vc0 Tc0 1uM0 SM0 1vc0 Tc0 1vc0 SM0 1vc0 6600 1co0 3E00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 3I00 17c0 1cM0 1cM0 3Fc0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 1tA0 1cM0 1dc0 1400 gL0 IM0 s10 U00 dX0 Rc0 pd0 Rc0 gL0 Oo0 pd0 Rc0 gL0 Oo0 pd0 14o0 1cM0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 3Co0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 pvy0 1cM0 1cM0 1fA0 1cM0 1cM0 1cN0 1cL0 1cN0 1cM0 1cM0 1cM0 1cM0 1cN0 1cL0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Luxembourg|LMT CET CEST WET WEST WEST WET|-o.A -10 -20 0 -10 -20 -10|0121212134343434343434343434343434343434343434343434565651212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2DG0o.A t6mo.A TB0 1nX0 Up0 1o20 11A0 rW0 CM0 1qP0 R90 1EO0 UK0 1u20 10m0 1ip0 1in0 17e0 19W0 1fB0 1db0 1cp0 1in0 17d0 1fz0 1a10 1in0 1a10 1in0 17f0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Dc0 vA0 60L0 WM0 1fA0 1cM0 17c0 1io0 16M0 1C00 Uo0 1eeo0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Madrid|WET WEST WEMT CET CEST|0 -10 -20 -10 -20|01010101010101010101010121212121234343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343|-28dd0 11A0 1go0 19A0 1co0 1dA0 b1A0 18o0 3I00 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 iyo0 Rc0 18o0 1hc0 1io0 1a00 14o0 5aL0 MM0 1vc0 17A0 1i00 1bc0 1eo0 17d0 1in0 17A0 6hA0 10N0 XIL0 1a10 1in0 17d0 19X0 1cN0 1fz0 1a10 1fX0 1cp0 1cO0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Malta|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2as10 M00 1cM0 1cM0 14o0 1o00 WM0 1qM0 17c0 1cM0 M3A0 5M20 WM0 1fA0 1cM0 1cM0 1cM0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 Lz0 1C10 Lz0 1EN0 Lz0 1C10 Lz0 1zd0 Oo0 1C00 On0 1cp0 1cM0 1lA0 Xc0 1qq0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1iN0 19z0 1fB0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Minsk|MMT EET MSK CEST CET MSD EEST FET|-1O -20 -30 -20 -10 -40 -30 -30|01234343252525252525252525261616161616161616161616161616161616161617|-1Pc1O eUnO qNX0 3gQ0 WM0 1fA0 1cM0 Al0 1tsn0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 3Fc0 1cN0 1cK0 1cM0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Europe/Monaco|PMT WET WEST WEMT CET CEST|-9.l 0 -10 -20 -10 -20|01212121212121212121212121212121212121212121212121232323232345454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-2nco9.l cNb9.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 2RV0 11z0 11B0 1ze0 WM0 1fA0 1cM0 1fa0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Moscow|MMT MMT MST MDST MSD MSK MSM EET EEST MSK|-2u -2u.M -3u.M -4u.M -40 -30 -50 -20 -30 -40|01213234546457545454545454545454545875454545454545454545454545454545454545459|-2ag2u 2pyX.c 1bA0 11X0 GN0 1Hb0 c20 imu.M 3DA0 dz0 15A0 c10 2q10 iM10 23CL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 IM0 rU0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Europe/Paris|PMT WET WEST CEST CET WEMT|-9.l 0 -10 -20 -10 -20|0121212121212121212121212121212121212121212121212123434352543434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434343434|-2nco8.l cNb8.l HA0 19A0 1iM0 11c0 1oo0 Wo0 1rc0 QM0 1EM0 UM0 1u00 10o0 1io0 1wo0 Rc0 1a00 1fA0 1cM0 1cM0 1io0 17c0 1fA0 1a00 1io0 1a00 1io0 17c0 1fA0 1a00 1io0 17c0 1cM0 1cM0 1a00 1io0 1cM0 1cM0 1a00 1fA0 1io0 17c0 1cM0 1cM0 1a00 1fA0 1io0 1qM0 Df0 Ik0 5M30 WM0 1fA0 1cM0 Vx0 hB0 1aq0 16M0 1ekn0 1cL0 1fC0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Riga|RMT LST EET MSK CEST CET MSD EEST|-1A.o -2A.o -20 -30 -20 -10 -40 -30|010102345454536363636363636363727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272727272|-25TzA.o 11A0 1iM0 ko0 gWm0 yDXA.o 2bX0 3fE0 WM0 1fA0 1cM0 1cM0 4m0 1sLy0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1o00 11A0 1o00 11A0 1qM0 3oo0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Rome|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2as10 M00 1cM0 1cM0 14o0 1o00 WM0 1qM0 17c0 1cM0 M3A0 5M20 WM0 1fA0 1cM0 16K0 1iO0 16m0 1de0 1lc0 14m0 1lc0 WO0 1qM0 GTW0 On0 1C10 Lz0 1C10 Lz0 1EN0 Lz0 1C10 Lz0 1zd0 Oo0 1C00 On0 1C10 Lz0 1zd0 On0 1C10 LA0 1C00 LA0 1zc0 Oo0 1C00 Oo0 1zc0 Oo0 1fC0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Samara|LMT SAMT SAMT KUYT KUYST KUYST KUYT KUYST SAMST SAMST|-3k.A -30 -40 -40 -50 -40 -30 -30 -50 -40|012343434343434343435656762828282828282828282828282828282828282912|-22WNk.A qHak.A bcn0 1Qqo0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cN0 8o0 14j0 1cL0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qN0 WM0","Europe/Simferopol|SMT EET MSK CEST CET MSD EEST MSK|-2g -20 -30 -20 -10 -40 -30 -40|01234343252525252525252525216161652525261616161616161616161616161616161617|-1Pc2g eUog rEn0 2qs0 WM0 1fA0 1cM0 3V0 1u0L0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 4eL0 1cL0 1cN0 1cL0 1cN0 dX0 WL0 1cN0 1cL0 1fB0 1o30 11B0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0","Europe/Sofia|EET CET CEST EEST|-20 -10 -20 -30|01212103030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030|-168L0 WM0 1fA0 1cM0 1cM0 1cN0 1mKH0 1dd0 1fb0 1ap0 1fb0 1a20 1fy0 1a30 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cK0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 1nX0 11E0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Stockholm|CET CEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2azC0 TB0 2yDe0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Tallinn|TMT CET CEST EET MSK MSD EEST|-1D -10 -20 -20 -30 -40 -30|012103421212454545454545454546363636363636363636363636363636363636363636363636363636363636363636363636363636363636363636363|-26oND teD 11A0 1Ta0 4rXl KSLD 2FX0 2Jg0 WM0 1fA0 1cM0 18J0 1sTX0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o10 11A0 1qM0 5QM0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Tirane|LMT CET CEST|-1j.k -10 -20|01212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2glBj.k 14pcj.k 5LC0 WM0 4M0 1fCK0 10n0 1op0 11z0 1pd0 11z0 1qN0 WL0 1qp0 Xb0 1qp0 Xb0 1qp0 11z0 1lB0 11z0 1qN0 11z0 1iN0 16n0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Uzhgorod|CET CEST MSK MSD EET EEST|-10 -20 -30 -40 -20 -30|010101023232323232323232320454545454545454545454545454545454545454545454545454545454545454545454545454545454545454545454|-1cqL0 6i00 WM0 1fA0 1cM0 1ml0 1Cp0 1r3W0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1Q00 1Nf0 2pw0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Vienna|CET CEST|-10 -20|0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 3KM0 14o0 LA00 6i00 WM0 1fA0 1cM0 1cM0 1cM0 400 2qM0 1a00 1cM0 1cM0 1io0 17c0 1gHa0 19X0 1cP0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Vilnius|WMT KMT CET EET MSK CEST MSD EEST|-1o -1z.A -10 -20 -30 -20 -40 -30|012324525254646464646464646464647373737373737352537373737373737373737373737373737373737373737373737373737373737373737373|-293do 6ILM.o 1Ooz.A zz0 Mfd0 29W0 3is0 WM0 1fA0 1cM0 LV0 1tgL0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11B0 1o00 11A0 1qM0 8io0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Volgograd|LMT TSAT STAT STAT VOLT VOLST VOLST VOLT|-2V.E -30 -30 -40 -40 -50 -40 -30|01234545454545454545467674676767676767676767676767676767676767674|-21IqV.E cLXV.E cEM0 1gqn0 Lco0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1fA0 1cM0 2pz0 1cJ0 1cQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0","Europe/Warsaw|WMT CET CEST EET EEST|-1o -10 -20 -20 -30|012121234312121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2ctdo 1LXo 11d0 1iO0 11A0 1o00 11A0 1on0 11A0 6zy0 HWP0 5IM0 WM0 1fA0 1cM0 1dz0 1mL0 1en0 15B0 1aq0 1nA0 11A0 1io0 17c0 1fA0 1a00 iDX0 LA0 1cM0 1cM0 1C00 Oo0 1cM0 1cM0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1C00 LA0 uso0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cN0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Zaporozhye|CUT EET MSK CEST CET MSD EEST|-2k -20 -30 -20 -10 -40 -30|01234342525252525252525252526161616161616161616161616161616161616161616161616161616161616161616161616161616161616161616161|-1Pc2k eUok rdb0 2RE0 WM0 1fA0 8m0 1v9a0 1db0 1cN0 1db0 1cN0 1db0 1dd0 1cO0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cK0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cQ0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","HST|HST|a0|0|","Indian/Antananarivo|LMT EAT EAST|-3a.4 -30 -40|0121|-2mrDa.4 1HRba.4 Ao0","Indian/Chagos|LMT IOT IOT|-4N.E -50 -60|012|-2xosN.E 3AGLN.E","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Comoro|LMT EAT|-2R.4 -30|01|-2mrCR.4","Indian/Kerguelen|zzz TFT|0 -50|01|-MG00","Indian/Mahe|LMT SCT|-3F.M -40|01|-2yO3F.M","Indian/Maldives|MMT MVT|-4S -50|01|-olgS","Indian/Mauritius|LMT MUT MUST|-3O -40 -50|012121|-2xorO 34unO 14L0 12kr0 11z0","Indian/Mayotte|LMT EAT|-30.U -30|01|-2mrD0.U","Indian/Reunion|LMT RET|-3F.Q -40|01|-2mDDF.Q","Kwajalein|MHT KWAT MHT|-b0 c0 -c0|012|-AX0 W9X0","MET|MET MEST|-10 -20|01010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-2aFe0 11d0 1iO0 11A0 1o00 11A0 Qrc0 6i00 WM0 1fA0 1cM0 1cM0 1cM0 16M0 1gMM0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","MST|MST|70|0|","MST7MDT|MST MDT MWT MPT|70 60 60 60|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 SgN0 8x20 ix0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","NZ-CHAT|LMT CHAST CHADT|-cd.M -cJ -dJ|012121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212|-vDod.M Hq2d.M IM0 1C00 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1qM0 14o0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1lc0 14o0 1lc0 14o0 1lc0 17c0 1io0 17c0 1io0 17c0 1io0 17c0 1io0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","PST8PDT|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 QwN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Pacific/Apia|LMT SAMT WST WSDT WSDT WST|bq.U bu b0 a0 -e0 -d0|01232345454545454545454545454545454545454545454545454545454|-2nDMx.4 1yW03.4 2rRbu 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|LMT VUT VUST|-bd.g -b0 -c0|0121212121212121212121|-2l9nd.g 2Szcd.g 1cL0 1oN0 10L0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 Lz0 1Nd0 An0","Pacific/Enderbury|PHOT PHOT PHOT|c0 b0 -d0|012|nIc0 B8n0","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|LMT FJT FJST|-bT.I -c0 -d0|012121212121212121212121212121212121212121212121212121212121212|-2bUzT.I 3m8NT.I LA0 1EM0 IM0 nJc0 LA0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1Q10 xz0 1Q10 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Q10 xz0 1Q10 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Q10 xz0 1Q10 xz0 1Q10 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Q10 xz0 1Q10 xz0 1Q10 An0 1Nd0 An0 1Nd0 An0 1Nd0 An0 1Q10 xz0 1Q10","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|LMT ECT GALT|5W.o 50 60|012|-1yVS1.A 2dTz1.A","Pacific/Gambier|LMT GAMT|8X.M 90|01|-2jof0.c","Pacific/Guadalcanal|LMT SBT|-aD.M -b0|01|-2joyD.M","Pacific/Guam|GST ChST|-a0 -a0|01|1fpq0","Pacific/Honolulu|HST HDT HST|au 9u a0|010102|-1thLu 8x0 lef0 8Pz0 46p0","Pacific/Kiritimati|LINT LINT LINT|aE a0 -e0|012|nIaE B8nk","Pacific/Kosrae|KOST KOST|-b0 -c0|010|-AX0 1bdz0","Pacific/Majuro|MHT MHT|-b0 -c0|01|-AX0","Pacific/Marquesas|LMT MART|9i 9u|01|-2joeG","Pacific/Midway|NST NDT BST SST|b0 a0 b0 b0|01023|-x3N0 An0 pJd0 EyM0","Pacific/Nauru|LMT NRT JST NRT|-b7.E -bu -90 -c0|01213|-1Xdn7.E PvzB.E 5RCu 1ouJu","Pacific/Niue|NUT NUT NUT|bk bu b0|012|-KfME 17y0a","Pacific/Norfolk|NMT NFT|-bc -bu|01|-Kgbc","Pacific/Noumea|LMT NCT NCST|-b5.M -b0 -c0|01212121|-2l9n5.M 2EqM5.M xX0 1PB0 yn0 HeP0 Ao0","Pacific/Pago_Pago|LMT SAMT NST BST SST|bm.M bu b0 b0 b0|01234|-2nDMB.c 1yW07.c FXzu EyM0","Pacific/Palau|PWT|-90|0|","Pacific/Pitcairn|PNT PST|8u 80|01|18Vku","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT CKHST CKT|au 9u a0|012121212121212121212121212|lyWu IL0 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Onu 1zcu Rbu 1zcu Onu 1zcu Onu 1zcu Onu","Pacific/Saipan|MPT MPT ChST|-90 -a0 -a0|012|-AV0 1g2n0","Pacific/Tahiti|LMT TAHT|9W.g a0|01|-2joe1.I","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT TOT TOST|-ck -d0 -e0|01212121|-1aB0k 2n5dk 15A0 1wo0 xz0 1Q10 xz0","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|","WET|WET WEST|0 -10|010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|hDB0 1a00 1fA0 1cM0 1cM0 1cM0 1fA0 1a00 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00"],links:["Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Bamako|Africa/Timbuktu","Africa/Bujumbura|Africa/Lubumbashi","Africa/Cairo|Egypt","Africa/Juba|Africa/Khartoum","Africa/Lome|Etc/GMT","Africa/Lome|Etc/GMT+0","Africa/Lome|Etc/GMT-0","Africa/Lome|Etc/GMT0","Africa/Lome|Etc/Greenwich","Africa/Lome|GMT","Africa/Lome|GMT+0","Africa/Lome|GMT-0","Africa/Lome|GMT0","Africa/Lome|Greenwich","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|US/Alaska","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Marigot","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Catamarca|America/Argentina/ComodRivadavia","America/Argentina/Catamarca|America/Catamarca","America/Argentina/Cordoba|America/Cordoba","America/Argentina/Cordoba|America/Rosario","America/Argentina/Jujuy|America/Jujuy","America/Argentina/Mendoza|America/Mendoza","America/Aruba|America/Curacao","America/Aruba|America/Kralendijk","America/Aruba|America/Lower_Princes","America/Atikokan|America/Coral_Harbour","America/Chicago|US/Central","America/Denver|America/Shiprock","America/Denver|Navajo","America/Denver|US/Mountain","America/Detroit|US/Michigan","America/Edmonton|Canada/Mountain","America/Ensenada|America/Tijuana","America/Ensenada|Mexico/BajaNorte","America/Fort_Wayne|America/Indiana/Indianapolis","America/Fort_Wayne|America/Indianapolis","America/Fort_Wayne|US/East-Indiana","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Indiana/Knox|America/Knox_IN","America/Indiana/Knox|US/Indiana-Starke","America/Jamaica|Jamaica","America/Kentucky/Louisville|America/Louisville","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Manaus|Brazil/West","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|Mexico/General","America/New_York|US/Eastern","America/Noronha|Brazil/DeNoronha","America/Phoenix|US/Arizona","America/Porto_Acre|America/Rio_Branco","America/Porto_Acre|Brazil/Acre","America/Regina|Canada/East-Saskatchewan","America/Regina|Canada/Saskatchewan","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Toronto|Canada/Eastern","America/Vancouver|Canada/Pacific","America/Whitehorse|Canada/Yukon","America/Winnipeg|Canada/Central","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Arctic/Longyearbyen|Atlantic/Jan_Mayen","Arctic/Longyearbyen|Europe/Oslo","Asia/Ashgabat|Asia/Ashkhabad","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Dacca|Asia/Dhaka","Asia/Ho_Chi_Minh|Asia/Saigon","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kathmandu|Asia/Katmandu","Asia/Macao|Asia/Macau","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|Europe/Nicosia","Asia/Seoul|ROK","Asia/Shanghai|PRC","Asia/Singapore|Singapore","Asia/Taipei|ROC","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Faeroe|Atlantic/Faroe","Atlantic/Reykjavik|Iceland","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/Adelaide|Australia/South","Australia/Brisbane|Australia/Queensland","Australia/Broken_Hill|Australia/Yancowinna","Australia/Darwin|Australia/North","Australia/Hobart|Australia/Tasmania","Australia/LHI|Australia/Lord_Howe","Australia/Melbourne|Australia/Victoria","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Belgrade|Europe/Ljubljana","Europe/Belgrade|Europe/Podgorica","Europe/Belgrade|Europe/Sarajevo","Europe/Belgrade|Europe/Skopje","Europe/Belgrade|Europe/Zagreb","Europe/Bratislava|Europe/Prague","Europe/Busingen|Europe/Vaduz","Europe/Busingen|Europe/Zurich","Europe/Chisinau|Europe/Tiraspol","Europe/Helsinki|Europe/Mariehamn","Europe/Lisbon|Portugal","Europe/Moscow|W-SU","Europe/Rome|Europe/San_Marino","Europe/Rome|Europe/Vatican","Europe/Warsaw|Poland","Kwajalein|Pacific/Kwajalein","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),e
}),_wAMD.define("blog/editor/view/post/options/PublishView",["jquery","underscore","backbone-all","mustache","moment","editor/app","util/general-utils","tpl!blog/editor/posts/options/publish-view","blog/editor/view/post/options/ShareOnPublishView","util/ui/wSelectbox","util/ui/wDatepicker","util/ui/wInputSelectbox","moment-timezone"],function(e,t,i,n,o,s,r,a,l){var c=i.Marionette.ItemView.extend({ui:{selects:"select",publishLater:".publish-later",publishMode:"[name=publish-mode]",publishTime:"[name=publish-time]",publishDate:"[name=publish-date]",editShareOnPublish:".edit-share-settings-btn"},events:{"change @ui.publishMode":"updatePublishMode","change @ui.publishDate":"onChangeScheduledPostDate","click @ui.editShareOnPublish":"onShareOnPublishEditClick"},modelEvents:{"change:post_created_date":"render"},templateHelpers:function(){var e=this.model.getMoment(),t=this.model.get("share_buttons").length;return{publishImmediately:this.publishImmediately,publishDate:e.format("MMMM D, YYYY"),publishTime:e.format("h:mm a"),publishTimezoneAbbr:e.zoneAbbr(),showShareOnPublish:t}},getTemplate:function(){return n.compile(a)},initialize:function(e){var t=this;t.publishImmediately="1"!=t.model.get("scheduled"),t.wreqr=e.wreqr},onRender:function(){var e=this,t=e.model,i=e.ui.publishDate,n=e.wreqr.reqres.request("layover:element");e.ui.selects.wSelectbox({theme:"control"}),i.datepicker({format:"MM d, yyyy",autoclose:!0,parentElement:n}).on("show",function(){var e=i.data("datepicker").picker;e.addClass("control blog-post-schedule-datepicker")});var o=t.getMoment().clone(),a=30*Math.ceil(o.minute()/30);o.minute(a),e.ui.publishTime.wInputSelectbox({suggestions:r.generateTimeInterval(12,30),maxHeight:250,preselect:o.format("h:mm a")}).on("change",function(){e.ui.publishTime.wInputSelectbox("destroy"),e.onChangeScheduledPostDate()}),e.listenTo(s.vent,{"editor:toolbar:hide":function(){s.reqres.request("editor:toolbar:isCollapsed")&&e.closeInputs()},"editor:toolbar:toggleCollapse":function(t){t&&e.closeInputs()}}),e.listenTo(e.wreqr.vent,{"view:resize":function(){e.closeInputs()}})},updatePublishMode:function(){var t=this,i=this.model,n=[];if(t.publishImmediately="later"!=t.ui.publishMode.val(),i.set("scheduled",t.publishImmediately?0:1),t.publishImmediately)i.set("post_created_date",o().unix());else{var r=i.getMoment(),a=30*Math.ceil(r.minute()/30);r.minute(a),i.set("post_created_date",r.unix())}i.get("share_buttons").each(function(e){t.publishImmediately?(n.push(s.blog.RPC.toggleShareButton({blog_id:i.get("blog_id"),post_id:i.cleanDraftId,type:e.type})),e.enabled=!1):n.push(s.blog.RPC.getShareButtonStatus({blog_id:i.get("blog_id"),post_id:i.cleanDraftId,type:e.type,scheduled:i.get("scheduled")}).done(function(t){e.enabled=t}))}),e.when.apply(null,n).done(function(){t.render(),t.wreqr.vent.trigger("view:change")})},closeInputs:function(){var e=this;e.ui.publishDate.blur().datepicker("hide"),e.ui.publishTime.data("wInputSelectbox")&&e.ui.publishTime.wInputSelectbox("hide")},onClose:function(){this.closeInputs()},onChangeScheduledPostDate:function(){var e=this,t=e.model,i=e.ui.publishDate.val(),n=e.ui.publishTime.val(),o=t.getTimestamp(i+" "+n,"MMM D, YYYY h:mm a");o?t.set("post_created_date",o):e.render()},onShareOnPublishEditClick:function(){s.showDialog(new l({model:this.model}))}});return c}),_wAMD.define("tpl!blog/editor/posts/options/comments-view",[],function(){return'<label class="post-option-title">{{#tl}}Comments{{/tl}}</label>\n\n<select class="comments-select-box">\n	<option value="open">\n		{{#defaultComments}}{{#tl}}Open{{/tl}}{{/defaultComments}}\n		{{^defaultComments}}{{#tl}}Show{{/tl}}{{/defaultComments}}\n	</option>\n	<option value="closed">\n		{{#defaultComments}}{{#tl}}Closed{{/tl}}{{/defaultComments}}\n		{{^defaultComments}}{{#tl}}Hide{{/tl}}{{/defaultComments}}\n	</option>\n	{{#defaultComments}}\n	<option value="approve">\n		{{#tl}}Require Approval{{/tl}}\n	</option>\n	{{/defaultComments}}\n</select>\n'}),_wAMD.define("blog/editor/view/post/options/CommentsView",["underscore","backbone-all","mustache","tpl!blog/editor/posts/options/comments-view","util/ui/wSelectbox"],function(e,t,i,n){var o=t.Marionette.ItemView.extend({getTemplate:function(){return i.compile(n)},selections:{open:"yes",approve:"noanon",closed:"no"},ui:{select:".comments-select-box"},events:{"change @ui.select":"updateModel"},templateHelpers:function(){var e=this.blog.get("commenting_system");return{defaultComments:function(){return"default"==e}}},initialize:function(e){this.blog=e.blog},onRender:function(){var t,i=this,n=i.model;e.some(i.selections,function(e,i){return e===n.get("allow_comments")?t=i:void 0}),i.ui.select.val(t).wSelectbox({theme:"control"})},updateModel:function(e){var t=this,i=e.currentTarget.value,n=t.selections[i]||t.selections.open;t.model.set("allow_comments",n)}});return o}),_wAMD.define("tpl!blog/editor/posts/options/tags/tag-item-view",[],function(){return'{{#editing}}\n<input type="text" class="control-input" value="{{tag}}">\n{{/editing}}\n{{^editing}}\n<span class="edit-tag">{{{tag}}}</span> <span class="delete-tag">&times;</span>\n{{/editing}}'}),_wAMD.define("blog/editor/view/post/options/tags/TagItemView",["backbone-all","blog/editor/view/BlogConfirmView","editor/app","tpl!blog/editor/posts/options/tags/tag-item-view"],function(e,t,i,n){var o=e.Marionette.ItemView.extend({editing:!1,getTemplate:function(){return Mustache.compile(n)},templateHelpers:function(){return{editing:this.editing}},tagName:"li",className:"tag-item",ui:{editArea:".edit-tag",deleteButton:".delete-tag",input:"input"},events:{"click @ui.editArea":"editTag","click @ui.deleteButton":"deleteTag","blur @ui.input":"validateInput","keyup @ui.input":"checkForEnter"},initialize:function(e){this.wreqr=e.wreqr},onRender:function(){this.editing&&this.ui.input.focus()},editTag:function(){this.editing=!0,this.render()},checkForEnter:function(e){13==e.which&&this.validateInput()},validateInput:function(){var e=this,t=e.ui.input.val();""===t.trim()||e.tagIsRepeat(t)?(e.editing=!1,e.render()):i.showDialog(new s({message:sprintf(_W.tl("Renaming the tag %s to %s will also rename the tag for all posts that are already using the tag. Are you sure?"),e.model.get("tag"),t),callback:function(i){i&&e.model.set("tag",t),e.editing=!1,e.render()}}))},tagIsRepeat:function(e){var t=this.wreqr.reqres.request("blog:tags:getAll");return t.any(function(t){return t.get("tag")==e})},deleteTag:function(){this.model.destroy()}}),s=t.extend({title:_W.tl("Rename tag. Are you sure?"),confirmText:_W.tl("Yes, rename the tag"),cancelText:_W.tl("No, don't rename it")});return o}),_wAMD.define("blog/editor/view/post/options/tags/TagListView",["backbone-all","./TagItemView"],function(e,t){var i=e.Marionette.CollectionView.extend({itemView:t,itemViewOptions:function(){return{wreqr:this.options.wreqr}},initialize:function(e){this.options=e},tagName:"ul",className:"tag-list"});return i}),_wAMD.define("tpl!blog/editor/posts/options/tags/layout",[],function(){return'<label class="post-option-title">{{#tl}}Categories{{/tl}}</label>\n\n<button class="btn-control add-tags-btn" name="add-tags">\n	<span class="pull-left">{{#tl}}Add categories{{/tl}}</span>\n	<span class="w-icon-increase pull-right"></span>\n</button>\n\n<div class="hover-toolbar hover-toolbar-below">\n	<div class="hover-toolbar-arrow hover-toolbar-arrow-border"></div>\n	<div class="hover-toolbar-arrow"></div>\n	<div class="hover-toolbar-inner">\n		<div class="hover-toolbar-inner2">\n			<div class="hover-toolbar-inner3 w-ui">\n				<span class="input-labeled input-search">\n					<input type="text" class="control-input"\n						   placeholder="{{#esc_attr}}{{#tl}}Search or add new{{/tl}}{{/esc_attr}}"\n						   name="search-tags">\n				</span>\n				<div class="all-tags-wrapper">\n					<div class="all-tags"></div>\n					<div class="new-tag hidden">\n						<div class="label">{{#tl}}New Category{{/tl}}</div>\n						<span class="preview"> </span>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<div class="tag-list-region option-row"></div>\n'}),_wAMD.define("tpl!blog/editor/posts/options/tags/all-tags-item-view",[],function(){return'<li {{#chosen}}class="chosen"{{/chosen}}>\n	<a class="all-tag">\n		{{label}}\n		<span class="w-icon-check-mark-light pull-right"></span>\n	</a>\n</li>'}),_wAMD.define("blog/editor/view/post/options/tags/TagsView",["jquery","underscore","backbone-all","mustache","editor/app","./TagListView","tpl!blog/editor/posts/options/tags/layout","tpl!blog/editor/posts/options/tags/all-tags-item-view","jquery-ui/autocomplete"],function(e,t,i,n,o,s,r,a){var l=i.Marionette.Layout.extend({getTemplate:function(){return n.compile(r)},regions:{tagListRegion:".tag-list-region"},ui:{add:".add-tags-btn",toolbar:".hover-toolbar",searchbox:'input[name="search-tags"]',newTagArea:".new-tag",newTagPreview:".preview",allTags:".all-tags",focusedTag:".ui-state-focus"},events:{"mousedown @ui.add":"openToolbar","blur @ui.searchbox":"closeToolbar","keyup @ui.searchbox":"updateNewTagPreview","keydown @ui.searchbox":"onKeydown","mousedown @ui.newTagArea":"createNewTag","focus @ui.searchbox":"autocompleteSearch","mouseleave @ui.allTags":"removeAllTagFocus"},initialize:function(s){var r,l=this,c=l.model;l.loading=!0,l.wreqr=s.wreqr,l.blogTags=new i.Collection,l.listenTo(c.get("tags"),"add remove",function(){setTimeout(function(){l.wreqr.vent.trigger("view:change")},50)}),l.listenTo(c.get("tags"),"change",function(e){var t=e._previousAttributes.tag,i=e.changed.tag;o.blog.RPC.renameBlogTag(c.get("blog_id"),t,i).done(function(e){l.renameTag(l.blogTags,t,e),l.ui.searchbox.autocomplete("option","source",l.blogTags.pluck("tag")),e!==i&&l.renameTag(c.get("tags"),i,e)})}),l.wreqr.reqres.setHandler("blog:tags:getAll",function(){return l.blogTags}),r=o.blog.RPC.getBlogTags(c.get("blog_id")),r.done(function(e){var i=t.map(e,function(e){return{tag:e}});l.blogTags.reset(i)}),e.when(r).done(function(){l.loading=!1,n.parse(a),l.render()})},onRender:function(){var t=this,i=this.model;if(!t.loading){t.tagListRegion.show(new s({collection:i.get("tags"),wreqr:t.wreqr}));var o=this.ui.searchbox.autocomplete({source:t.blogTags.pluck("tag"),minLength:0,appendTo:this.ui.allTags,messages:{noResults:"",results:function(){}},select:function(e,i){i.item.value="",t.createTag(i.item.label)}}).data("ui-autocomplete");o._renderItem=function(t,o){var s=i.get("tags").any(function(e){return e.get("tag")==o.label}),r=n.render(a,{label:o.label,chosen:s});return e(r).appendTo(t)}}},openToolbar:function(e){var t=this;e.preventDefault(),t.ui.searchbox.val(""),t.updateNewTagPreview(),t.ui.toolbar.toggleClass("open"),t.ui.searchbox.focus()},closeToolbar:function(){this.ui.toolbar.removeClass("open")},onKeydown:function(e){var t=this,i=e.target.value;13==e.which&&(e.preventDefault(),e.stopPropagation(),t.createTag(i),t.updateNewTagPreview())},createTag:function(e){var t=this,i=t.model,n=i.get("tags"),o=t.tagIsRepeat(n,e),s=t.tagIsRepeat(t.blogTags,e);if(""!==e.trim()){if(o){var r=n.filter(function(t){return t.get("tag")==e});n.remove(r)}else n.add({tag:e});s||(t.blogTags.add({tag:e}),t.ui.searchbox.autocomplete("option","source",t.blogTags.pluck("tag"))),t.ui.searchbox.val("").blur()}},createNewTag:function(){var e=this.ui.searchbox.val();this.createTag(e),this.updateNewTagPreview()},updateNewTagPreview:function(){var e=this,t=this.ui.searchbox.val();""==t||e.tagIsRepeat(e.blogTags,t)?this.ui.newTagArea.addClass("hidden"):this.ui.newTagArea.removeClass("hidden"),this.ui.newTagPreview.text(t)},removeAllTagFocus:function(){this.ui.searchbox.data("uiAutocomplete").menu.element.find(".all-tag").removeClass("ui-state-focus")},autocompleteSearch:function(){var e=this.ui.searchbox.val();this.ui.searchbox.autocomplete("search",e)},tagIsRepeat:function(e,t){return e.any(function(e){return e.get("tag")==t})},renameTag:function(e,t,i){e.remove(e.findWhere({tag:t})),e.add({tag:i})}});return l}),_wAMD.define("tpl!blog/editor/posts/options/draft-view",[],function(){return'<label for="post-draft-link"  class="post-option-title">{{#tl}}Secret Draft Link{{/tl}}</label>\n\n<input id="post-draft-link" class="control-input" type="text" name="post-draft-link" value="{{link}}" readonly>\n'}),_wAMD.define("blog/editor/view/post/options/DraftView",["backbone-all","mustache","tpl!blog/editor/posts/options/draft-view"],function(e,t,i){"use strict";var n=e.Marionette.ItemView.extend({getTemplate:function(){return t.compile(i)},templateHelpers:function(){var e=this.model;return{link:function(){var i="{{protocol}}//{{hostname}}/{{editorName}}/apps/readDraft.php?draftId={{draftId}}&userId={{userId}}",n=window.location;return t.render(i,{protocol:n.protocol,hostname:n.hostname,editorName:isClientSite?"editor":"weebly",draftId:e.get("draft_id"),userId:userID})}}},ui:{input:"[name=post-draft-link]"},events:{"click @ui.input":"onFocus"},onFocus:function(){this.ui.input.select()}});return n}),_wAMD.define("blog/editor/view/post/options/ConfirmPermalinkChange",["blog/editor/view/BlogConfirmView"],function(e){"use strict";var t=e.extend({message:_W.tl("Changing the permalink will cause all of the Facebook comments on this post to disappear. Are you sure you want to continue?"),title:_W.tl("Warning"),confirmText:_W.tl("Yes, change permalink"),cancelText:_W.tl("No, discard change")});return t}),_wAMD.define("tpl!blog/editor/posts/options/advanced-view",[],function(){return'<span class="post-option-title">{{#tl}}Advanced{{/tl}} <i class="toggle w-icon-increase"></i></span>\n\n<div class="advanced-settings">\n	{{#isPublished}}\n	<div class="option-row">\n		<label class="label" for="post-options-permalink">{{#tl}}Permalink{{/tl}}</label>\n		<div class="permalink-input-wrapper" data-path="/">\n			<input type="text" id="post-options-permalink" name="post_link" class="permalink control-input" value="{{post_link}}">\n		</div>\n	</div>\n	{{/isPublished}}\n	<div class="option-row">\n		<label class="label" for="post-options-seo-title" >{{#tl}}SEO Post Title{{/tl}}</label>\n		<input type="text" id="post-options-seo-title" name="seo_title" class="control-input" value="{{seo_title}}">\n	</div>\n	<div class="option-row">\n		<label class="label" for="post-options-seo-description">{{#tl}}SEO Post Description{{/tl}}</label>\n		<textarea id="post-options-seo-description" name="seo_description" class="control-input">{{seo_description}}</textarea>\n	</div>\n</div>\n'}),_wAMD.define("blog/editor/view/post/options/AdvancedView",["jquery","underscore","backbone-all","mustache","editor/app","./ConfirmPermalinkChange","tpl!blog/editor/posts/options/advanced-view","util/ui/wSelectbox"],function(e,t,i,n,o,s,r){var a=i.Marionette.ItemView.extend({getTemplate:function(){return n.compile(r)},ui:{title:".post-option-title",toggle:".toggle",settings:".advanced-settings",inputs:"input.control-input, textarea.control-input",permalinkInput:".permalink"},events:{"click @ui.title":"toggleSettings","change @ui.inputs":"change"},templateHelpers:function(){var e=this.model,t=e.get("post_link");return t&&(t=t.replace(".html","")),{isPublished:!e.isDraft(),post_link:t}},initialize:function(e){this.wreqr=e.wreqr},toggleSettings:function(){var e=this,t=e.ui;t.settings.slideToggle(100),t.toggle.toggleClass("w-icon-increase w-icon-decrease"),setTimeout(function(){e.wreqr.vent.trigger("view:change"),e.ui.settings.is(":visible")&&e.$el.find("input:first").focus()},200)},change:function(e){var t=this,i=t.model,n=e.target.name,o=e.target.value;return"post_link"==n&&"facebook"==i.get("commenting_system")?(t.permalinkWarning(o),void 0):(i.set(n,o),void 0)},permalinkWarning:function(t){var i=this,n=e.Deferred(),r=i.wreqr.reqres.request("layover:element"),a=r.find('.editor-layover-action[data-action="update"]'),l=a.is(":hover");i.model.loaded=n.promise();var c=new s({callback:function(e){e?(i.model.set("post_link",t),l?a.trigger("click"):i.wreqr.vent.trigger("blog:post:comments:hide")):i.resetPermalinkField(),n.resolve()}});o.showDialog(c)},resetPermalinkField:function(){var e=this,t=e.model.get("post_link"),i=t.replace(".html","");e.ui.permalinkInput.val(i)}});return a}),_wAMD.define("tpl!blog/editor/posts/layover-tray",[],function(){return'<div class="post-tray-header">\n	<button id="blog-post-options" class="btn-com btn-info post-tray-toggle">\n		{{#tl}}Post Options{{/tl}}\n		<span class="w-icon-chevron-up-light"></span>\n	</button>\n	<span class="post-tray-label hidden">\n		{{#tl}}Post Options{{/tl}} <i class="w-icon-chevron-down-light close-tray"></i>\n	</span>\n</div>\n\n<div class="post-tray-body w-massless-scroll">\n	<div class="w-scroll-outer">\n		<div class="w-scroll-inner">\n			<div>\n				{{#isDraft}}<div class="post-option publish"></div>{{/isDraft}}\n				<div class="post-option comments"></div>\n				<div class="post-option tags"></div>\n				{{#isDraft}}<div class="post-option draft"></div>{{/isDraft}}\n				<div class="post-option advanced"></div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),_wAMD.define("blog/editor/view/post/BlogPostLayoverTray",["jquery","underscore","backbone-all","mustache","editor/app","./options/PublishView","./options/CommentsView","./options/tags/TagsView","./options/DraftView","./options/AdvancedView","tpl!blog/editor/posts/layover-tray"],function(e,t,i,n,o,s,r,a,l,c,u){var d=i.Marionette.Layout.extend({className:"post-tray",template:n.compile(u),templateHelpers:function(){return{isDraft:this.model.isDraft()}},trayTopSpace:65,regions:{publishRegion:".publish",commentsRegion:".comments",tagsRegion:".tags",draftRegion:".draft",advancedRegion:".advanced"},ui:{toggle:".post-tray-toggle",close:".close-tray",label:".post-tray-label",scrollInner:".w-scroll-inner"},events:{"click @ui.toggle":"toggleTray","click @ui.label":"toggleTray",mouseenter:"showEditor",mouseleave:"hideEditor"},initialize:function(i){var n=this;n.blog=i.blog,n.wreqr=i.wreqr,e(window).on("resize.post-layover",t.throttle(n.onResize.bind(n),500)),n.listenTo(n.wreqr.vent,"view:change",n.reinitializeScroll)},onShow:function(){hasDoneUserEvent("blog-first-view-post")||setTimeout(function(){showEvent("blog-first-view-post")},800)},onClose:function(){e(window).off("resize.post-layover")},onResize:function(){var e=this;e.readjustHeight(),e.wreqr.vent.trigger("view:resize")},showRegions:function(){var e=this,t={model:e.model,wreqr:e.wreqr,blog:e.blog};e.publishRegion.show(new s(t)),e.commentsRegion.show(new r(t)),e.tagsRegion.show(new a(t)),e.model.isDraft()&&e.draftRegion.show(new l(t)),e.advancedRegion.show(new c(t))},closeRegions:function(){var e=this;e.publishRegion.close(),e.commentsRegion.close(),e.tagsRegion.close(),e.advancedRegion.close()},toggleTray:function(){var e=this;e.ui.toggle.toggleClass("hidden"),e.ui.label.toggleClass("hidden"),e.$el.toggleClass("open"),e.$el.hasClass("open")?(e.showRegions(),e.readjustHeight()):(e.closeRegions(),e.$el.css("height",""))},showEditor:function(){o.vent.trigger("editor:toolbar:show")},hideEditor:function(){setTimeout(function(){o.reqres.request("editor:toolbar:isHidden")||o.vent.trigger("editor:toolbar:hide")},500)},readjustHeight:function(){var t,i=this;i.$el.hasClass("open")&&(t=e("body").height(),i.$el.css("height",t-i.trayTopSpace),i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(function(){i.reinitializeScroll()},500))},reinitializeScroll:function(){var e,t=this,i=t.ui.scrollInner;e=i.data("weeblyScroll")?"update":void 0,i.weeblyScroll(e)}});return d}),_wAMD.define("blog/editor/view/post/BlogPostView",["jquery","underscore","backbone-all","mustache","moment","editor/app","util/disqusSDK","util/facebookSDK","blog/editor/model/Blog","components/layouts/EditorLayover","./BlogPostLayoverBranding","./BlogPostLayoverActions","./BlogPostLayoverTray","util/ui/wDatepicker"],function(e,t,i,n,o,s,r,a,l,c,u,d,h){var p=c,f=p.prototype,m=p.extend({className:"w-ui editor-layover blog-post-view",externalUI:{title:"#blog-post-title",dateText:".date-text",dateField:"#blog-date-field",commentArea:"#blogTable .blog-comment-area"},modelEvents:{"change:post_created_date":"updateDate"},theme:"dark",animate:"split",BrandingView:u,ActionsView:d,FooterView:h,initialize:function(e){var t=this,i=t.model,n=o().unix();i.isDraft()&&i.get("post_created_date")<n&&i.set("post_created_date",n),Weebly.BlogEditor.isEditing=!0,f.initialize.apply(t,arguments),t.blog=e.blog,t.listenTo(s.vent,{"editor:middle":t.reinitializeInterface,"editor:saving":t.onEditorSaving,"editor:pages:go":t.onPagesGo}),t.listenTo(t.wreqr.vent,{"blog:post:comments:hide":t.hideComments}),t.initializeInterface()},bindExternalUIElements:function(){if(this.externalUI){this._externalUIBindings||(this._externalUIBindings=this.externalUI);var i=t.result(this,"_externalUIBindings");this.externalUI={},t.each(t.keys(i),function(t){var n=i[t];this.externalUI[t]=e(n)},this)}},unbindExternalUIElements:function(){this.externalUI&&this._externalUIBindings&&(t.each(this.externalUI,function(e,t){delete this.externalUI[t]},this),this.externalUI=this._externalUIBindings,delete this._externalUIBindings)},reinitializeInterface:function(){var e=this;e.unbindExternalUIElements(),e.initializeInterface()},initializeInterface:function(){var e=this,t=this.model,i=e.blog.get("settings").commenting_system;e.bindExternalUIElements(),t.get("post_title")&&e.externalUI.title.text(t.get("post_title")),e.initializePostListeners(),e.shouldHideComments?e.hideComments():"facebook"===i?e.initializeFacebook():"disqus"===i&&e.initializeDisqus()},initializeFacebook:function(){a.parse()},initializeDisqus:function(){var t=this,i=t.model,n=t.blog.get("settings").disqus_shortname,o=e("#icontent").hasClass("wsite-theme-light");i.get("post_url")&&(r.embed({shortname:n,identifier:i.get("post_id"),url:i.get("post_url"),scheme:o?"light":"dark",config:function(){this.language="en"}}),r.count({shortname:n}))},initializePostListeners:function(){var e=this,t=e.model;e.externalUI.title.on({"focus.post-view":function(){var t=e.externalUI.title,i=t.text();t.data("default-value")===i&&t.text(""),e.sanitizeInput(t),window.disableBackspaceExit=!1},"blur.post-view":function(){var t=e.externalUI.title;""===t.text()&&t.text(t.data("default-value")),e.model.set("post_title",e.sanitizeInput(t)),window.disableBackspaceExit=!0},"paste.post-view":function(){setTimeout(function(){e.sanitizeInput(e.externalUI.title)},50)},"keydown.post-view":function(e){(13===e.keyCode||27===e.keyCode)&&this.blur()}}),e.externalUI.dateField.datepicker({format:_W.siteContext.jdateFormat,autoclose:!0,parentElement:e.wreqr.reqres.request("layover:element")}).on("show",function(){if(e.externalUI.dateText.length){var t=e.externalUI.dateText.offset(),i=e.externalUI.dateText.height(),n=e.externalUI.dateText.width();e.externalUI.dateField.data("datepicker").picker.css({top:t.top+i,left:t.left-n-40})}}),e.externalUI.dateText.on("click.post-view",function(){e.externalUI.dateField.datepicker("show")}),e.externalUI.dateField.on({"change.post-view":function(){var i=e.externalUI.dateField.val(),n=_W.siteContext.mdateFormat,o=t.getTimestamp(i,n);e.externalUI.dateText.text(i),e.model.set("post_created_date",o)}})},updateDate:function(){var e=this,t=e.model,i=t.getFormattedDate();e.externalUI.dateText.text(i),e.externalUI.dateField.val(i)},hideComments:function(){var e=this;e.externalUI.commentArea.hide(),e.shouldHideComments=!0},sanitizeInput:function(e){var t=e.text().replace(/[\n\r]+/g," ");return e.html(t),t},onClose:function(){var e=this;e.externalUI.title.off(".post-view"),e.externalUI.dateText.off(".post-view"),e.externalUI.dateField.off(".post-view"),Weebly.BlogEditor.isEditing=!1},onEditorSaving:function(){var e=this.externalUI.title;e.is(":focus")&&e.trigger("blur")},onPagesGo:function(){var e,t=this,i=t.model;i.isBusy||t.isStashing||(t.isStashing=!0,e=i.isDraft()?i.saveDraft():i.stash(),e.always(function(){t.isStashing=!1,i.isBusy=!1}))}});return m}),_wAMD.define("blog/editor/view/footer/CommentModerationView",["backbone-all","mustache"],function(e,t){var i=e.Marionette.ItemView.extend({dialog:{title:_W.tl("Manage Comments"),dialogClass:"blog-comment-moderation-dialog",cancelX:!0},className:"blog-comment-moderation-inner",getTemplate:function(){return t.compile("")},initialize:function(e){this.content=e.content},onRender:function(){var e=this;e.$el.html(e.content)},onShow:function(){var e=this;e.$el.find(".blog-moderation-filter .all").trigger("click"),e.$el.children(".close-x").blur()}});return i}),_wAMD.define("tpl!blog/editor/footer/dialog-item",[],function(){return'<td>{{post_title}}</td>\n<td>\n	{{date}}\n	<i class="w-icon-delete delete"></i>\n</td>\n'}),_wAMD.define("blog/editor/view/footer/ListDialogItemView",["jquery","backbone-all","mustache","moment","editor/app","blog/editor/view/post/BlogPostConfirmDiscard","tpl!blog/editor/footer/dialog-item"],function(e,t,i,n,o,s,r){var a=t.Marionette.ItemView.extend({tagName:"tr",ui:{deleteButton:".delete"},events:{click:"triggerEdit","click @ui.deleteButton":"triggerDelete"},getTemplate:function(){return i.compile(r)},templateHelpers:function(){var e=this.model;return{post_title:function(){return e.get("post_title")||_W.tl("Untitled")},date:function(){return e.getMoment().format("MMMM D YYYY, h:mm a")}}},triggerDelete:function(t){var i=this,n=i.model,r=i.$el.closest(".blog-dialog"),a=e.Deferred();a.always(function(){r.show()}),t.stopPropagation();var l=new s({modal:!1,callback:function(e){return e?(o.blog.RPC.discardBlogDraft(n.get("draft_id")+"draft").done(function(){n.destroy()}).fail(function(){console.error("draft unable to delete")}),a.resolve(),void 0):(a.resolve(),void 0)}});r.hide(),o.showDialog(l)},triggerEdit:function(){var e=this,t=e.model.get("draft_id")+"draft";o.vent.trigger("blog:post:edit",t)}});return a}),_wAMD.define("tpl!/blog/editor/footer/list-dialog",[],function(){return'\n<div class="table-wrapper">\n	<table class="list-dialog table">\n		<thead>\n			<tr>\n				{{#headerNames}}\n					<th>{{.}}</th>\n				{{/headerNames}}\n			</tr>\n		</thead>\n		<tbody>\n			{{! Populated by the CompositeView }}\n		</tbody>\n	</table>\n</div>\n'}),_wAMD.define("blog/editor/view/footer/ListDialogView",["backbone-all","mustache","editor/app","commerce/editor/store/general/list/ListLoadingView","./ListDialogItemView","tpl!/blog/editor/footer/list-dialog"],function(e,t,i,n,o,s){var r=e.Marionette.CompositeView.extend({className:"list-dialog-wrapper",itemViewContainer:".list-dialog",itemView:o,getTemplate:function(){return t.compile(s)},emptyView:n.extend({colspan:2,onRender:function(){this.showEmpty()}}),events:{"click .close-dialog":"closeDialog"},initialize:function(){var e=this;e.listenTo(i.vent,"blog:post:edit",e.closeDialog)},closeDialog:function(){this.trigger("dialog:close")}});return r}),_wAMD.define("blog/editor/view/footer/DraftListView",["backbone-all","./ListDialogView"],function(e,t){var i=t.extend({getEmptyView:function(){return e.Marionette.getOption(this,"emptyView").extend({emptyState:_W.tl("No draft posts")})},templateHelpers:{headerNames:[_W.tl("Post Title"),_W.tl("Last Edit Date")]},dialog:{title:_W.tl("Drafts"),dialogClass:"blog-dialog",maxHeight:330,buttons:[{group:"pull-right",buttons:[{text:_W.tl("Done"),className:"btn-com btn-success close-dialog"}]}]}});return i}),_wAMD.define("blog/editor/view/footer/ScheduledListView",["backbone-all","./ListDialogView"],function(e,t){var i=t.extend({getEmptyView:function(){return e.Marionette.getOption(this,"emptyView").extend({emptyState:_W.tl("No scheduled posts")})},templateHelpers:{headerNames:[_W.tl("Post Title"),_W.tl("Publish Date")]},dialog:{title:_W.tl("Scheduled Posts"),dialogClass:"blog-dialog",maxHeight:330,buttons:[{group:"pull-right",buttons:[{text:_W.tl("Done"),className:"btn-com btn-success close-dialog"}]}]}});return i}),_wAMD.define("tpl!blog/editor/footer/blog-footer",[],function(){return'<button class="btn-com comments"> {{#tl}}Comments{{/tl}} </button>\n{{#allow_settings}}\n	<button class="btn-com blog-settings-shortcut"> {{#tl}}Blog Settings{{/tl}} </button>\n{{/allow_settings}}\n\n<div class="pull-right">\n	{{#numScheduled}}\n		<button class="btn-com scheduled"> {{#tl}}Scheduled (<span class="scheduled-count">{{numScheduled}}</span>){{/tl}} </button>\n	{{/numScheduled}}\n	{{#numDrafts}}\n		<button class="btn-com drafts">  {{#tl}}Drafts (<span class="draft-count">{{numDrafts}}</span>){{/tl}}</button>\n	{{/numDrafts}}\n	<button class="btn-com btn-info new-post"> {{#tl}}New Post{{/tl}} </button>\n</div>\n'}),_wAMD.define("blog/editor/view/footer/BlogFooter",["underscore","backbone-all","mustache","editor/app","components/layouts/LayoutWithDialogs","./CommentModerationView","./DraftListView","./ScheduledListView","tpl!blog/editor/footer/blog-footer"],function(e,t,i,n,o,s,r,a,l){var c=o.extend({closeSpeed:500,getTemplate:function(){return i.compile(l)},templateHelpers:function(){var e=this;return{allow_settings:Weebly.Permissions.allow_settings,numDrafts:e.drafts.length,numScheduled:e.scheduled.length}},ui:{comments:".comments",blogSettings:".blog-settings-shortcut",scheduled:".scheduled",drafts:".drafts",newPost:".new-post",draftCount:".draft-count",scheduledCount:".scheduled-count"},className:"blog-footer",events:{"click @ui.comments":"showComments","click @ui.blogSettings":"toggleBlogSettings","click @ui.scheduled":"showScheduled","click @ui.drafts":"showDraftList","click @ui.newPost":"triggerNewPost"},initialize:function(e){var i=this;e=e||{},i.drafts=e.drafts||new t.Collection,i.scheduled=e.scheduled||new t.Collection,i.listenTo(i,"close",i.triggerClose),i.listenTo(i.drafts,"add remove",i.updateDraftCount),i.listenTo(i.scheduled,"add remove",i.updateScheduledCount)},onRender:function(){var e,t=this,i=t.model,n=i.get("settings").commenting_system;o.prototype.onRender.apply(t,arguments),"default"!==n?(e={trigger:"hover",placement:"top",container:"body"},"facebook"===n?e.content=_W.tl("You can moderate Facebook comments from the blog post"):"disqus"===n&&(e.content=_W.tl("Disqus comment moderation is done through the blog post")),t.ui.comments.addClass("disabled").popover(e)):t.ui.comments.wLoadButton({timeout:500})},onShow:function(){var e=this;setTimeout(function(){e.$el.addClass("show")},100)},triggerClose:function(){var e=this;e.$el.removeClass("show"),setTimeout(function(){e.close()},e.closeSpeed)},triggerNewPost:function(){n.vent.trigger("blog:post:new")},showComments:function(){var e=this;e.ui.comments.hasClass("disabled")||(e.ui.comments.wLoadButton("startWait"),n.blog.RPC.getBlogCommentModeration({blog_id:e.model.get("blog_id"),params:void 0}).done(function(t){e.dialogRegion.show(new s({content:t}))}).always(function(){e.ui.comments.wLoadButton("endWait")}))},showScheduled:function(){this.dialogRegion.show(new a({collection:this.scheduled}))},showDraftList:function(){this.dialogRegion.show(new r({collection:this.drafts}))},updateScheduledCount:function(){var e=this,t=e.scheduled.length;e.ui.scheduledCount.text(t),t?e.ui.scheduled.show():e.ui.scheduled.hide()},toggleBlogSettings:function(){n.vent.triggerCascade("settings:blog",this.model.get("blog_id"))},updateDraftCount:function(){var e=this,t=e.drafts.length;e.ui.draftCount.text(t),t?e.ui.drafts.show():e.ui.drafts.hide()}});return c}),_wAMD.define("blog/editor/module",["jquery","backbone-all","editor/app","util/disqusSDK","util/facebookSDK","./model/Blog","./model/Post","./view/post/BlogPostView","./view/footer/BlogFooter"],function(e,t,i,n,o,s,r,a,l){i.module("blog",function(c){c.startWithParent=!1,c.RPC=Weebly.Editor.RPC.Blog;var u,d,h,p,f,m={padding:10,current:void 0,open:function(){var t,i,n,o=this,s=e("#body"),r=e("#icontent_container"),a=e("#icontent"),l=a.find(".blog-body"),c=this.padding;s.height()>r.height()&&r.height("auto"),t=r.height()>=a.height()?r[0]:a[0],o.current&&o.close(),o.current=new Weebly.Spotlight({canvasElement:t,element:l,interval:100,light:!0,opacity:.3,padding:c,roundedCorners:!0,onReposition:function(){o.positionNav(l,i,n)}}),o.current.show(),i=e("#blog-navigation"),n=e(o.current.container[0]),n.append(i),o.positionNav(l,i,n)
},positionNav:function(e,t,i){var n=i.offset(),o=e.offset(),s=this.padding;t.css({width:e.outerWidth()+2*s,top:o.top-t.outerHeight()-n.top-s-8,left:o.left-n.left-s})},close:function(){this.current&&this.current.destroy(),this.current=null}},g={setCurrentBlog:function(t){var i=new e.Deferred;return p&&p.get("blog_id")==t?i.resolve():(p=new s({blog_id:t}),p.fetch().done(function(){i.resolve()})),i.promise()},updateCurrentPost:function(t){var i=new e.Deferred;return f&&f.get("post_id")==t?i.resolve():(f=new r({post_id:t}),f.fetch().done(function(){i.resolve()})),i.promise()},updateCurrentBlog:function(){p&&p.fetch()},initBlogIndex:function(a){var u,h;g.setCurrentBlog(a),showBlogSideBarCategory(),h=e("#blogTable"),u=h.find(".blog-post"),e("#icontent > .blog-navigation").remove(),u.length?h.on("click.blog-index",".blog-post",function(e){var t=e.currentTarget.id;t&&3==t.split("-").length&&i.vent.trigger("blog:post:edit",t.split("-")[2])}):h.find(".blog-postlist").prepend('<div id="empty-blog-posts">'+_W.tl("You don't have any blog posts")+"</div>"),Weebly.view.isMobileView?g.unitializeIndex():(startWait(),e.when.apply(e,[c.RPC.getBlog(a),c.RPC.getDrafts(a)]).done(function(a,c){a=a[0],c=c[0];var u=new s(a),h=new t.Collection([],{model:r}),p=new t.Collection([],{model:r}),f=u.get("settings");"facebook"===f.commenting_system?o.parse():"disqus"===f.commenting_system&&n.count({shortname:f.disqus_shortname}),_.each(c,function(e){var t=new r;t.setBlogProperties(u),t.set(t.parse(e)),"1"==t.get("scheduled")&&"1"==t.get("ready_to_publish")?p.add(t):h.add(t)}),d=new l({model:u,drafts:h,scheduled:p}),i.showFooter(d),e("#icontent_container").css({"margin-bottom":d.$el.outerHeight(),height:"auto"})}).always(endWait))},initBlogPost:function(t,i,n){h||e.when(g.setCurrentBlog(t),g.updateCurrentPost(i)).done(function(){var t=!!n;if(t){var i=p.get("allow_comments");f.set("allow_comments",i)}f.set({isNew:t}),h=new a({model:f,blog:p,newPost:n}),h.render(),e("#scroll_container").scrollTop(0),h.$el.prependTo(e("body"))}),m.open(),hideBlogSideBarCategory()},uninitialize:function(){g.unitializeIndex(),g.unitializePosts()},unitializeIndex:function(){d&&(d.trigger("close"),setTimeout(function(){d=void 0},d.closeSpeed+50),e("#icontent_container").css({"margin-bottom":"",height:""}))},unitializePosts:function(){u&&(u.off(".blog-index"),u=void 0),h&&(h.close(),h=void 0,e("#scroll_container").scrollTop(0)),f=void 0,m.close()},listenToMiddle:function(e){if(e.is_blog){var t,i,n=e.post_id;currentBlog.postId=n,i=currentPage.match(/^\d+/),i=i&&i[0],t=Weebly.PageManager.pages[i].blog_id,"0"!=currentBlog.postId?(g.unitializeIndex(),g.initBlogPost(t,n,e.newPost)):(g.unitializePosts(),g.initBlogIndex(t)),Behaviour.apply(),Weebly.PublishWindow.resolve()}else g.uninitialize()},onMobileShow:function(e){e.responsive&&(window.currentBlog.editingBlog=0,g.uninitialize())},newPost:function(){goNewBlogPost()},editPost:function(e){Pages.go("goBlogPost",e)},deletePost:function(e){return c.RPC.deleteBlogPost(e)},current:function(){return f},alreadyPublished:function(e){updateList(),g.editPost(e)}};c.on("start",function(){i.vent.on({"editor:middle":g.listenToMiddle,"editor:mobile:show":g.onMobileShow,"blog:post:new":g.newPost,"blog:post:edit":g.editPost,"blog:settings:saved":g.updateCurrentBlog,"blog:already_published":g.alreadyPublished}),i.reqres.setHandlers({"blog:post:delete":g.deletePost,"blog:post:current":g.current})})})}),_wAMD.define("page-layouts/editor/view/categories/CategoryListItemView",["jquery","underscore","backbone-all","mustache"],function(e,t,i,n){var o=i.Marionette.ItemView.extend({template:n.compile("{{name}}"),className:"btn-flat btn-flat-light",events:{click:"selectedCategory"},selectedCategory:function(){this.$el.siblings().removeClass("selected"),this.$el.addClass("selected"),e(this.el).trigger("categorySelected",[this.model])}});return o}),_wAMD.define("page-layouts/editor/view/categories/CategoryListView",["jquery","underscore","backbone-all","mustache","./CategoryListItemView"],function(e,t,i,n,o){var s=i.Marionette.CollectionView.extend({itemView:o,className:"btn-group nav-group"});return s}),_wAMD.define("tpl!page-layouts/editor/layouts/item",[],function(){return'<img src="{{preview_image}}" alt="{{name}}">'}),_wAMD.define("page-layouts/editor/view/layouts/LayoutListItemView",["jquery","underscore","backbone-all","mustache","editor/app","tpl!page-layouts/editor/layouts/item"],function(e,t,i,n,o,s){var r=i.Marionette.ItemView.extend({template:n.compile(s),tagName:"li",className:"layout-select",events:{"click img":"chooseLayout"},chooseLayout:function(){o.vent.trigger("page-layout:choose",this.model)}});return r}),_wAMD.define("tpl!page-layouts/editor/layouts/itemList",[],function(){return'{{^isFooter}}\n  <ul class="left-column"></ul>\n  <ul class="right-column"></ul>\n{{/isFooter}}\n{{#isFooter}}\n  <ul class="single-column"></ul>\n{{/isFooter}}'}),_wAMD.define("page-layouts/editor/view/layouts/LayoutListView",["jquery","underscore","backbone-all","mustache","./LayoutListItemView","tpl!page-layouts/editor/layouts/itemList","components/views/EmptyLoadingView"],function(e,t,i,n,o,s,r){var a=i.Marionette.CompositeView.extend({template:n.compile(s),itemView:o,emptyView:r.extend({loadingState:_W.tl("Loading layouts"),emptyState:_W.tl("No available layouts.")}),itemViewContainer:".left-column",initialize:function(e){this.area=e.area;var t=this;editorApp.vent.on({"pagelayouts:fetched":function(e){t.collection=e,t.render(),t.collection.length||t.children.first().showEmpty()}}),"footer"==this.area&&(this.itemViewContainer=".single-column")},templateHelpers:function(){var e=this;return{isFooter:"footer"==e.area}},onRender:function(){var t=this,i=t.$el.find(".right-column"),n=0;this.$el.find("li").each(function(o){var s=e(this);1==o%2&&"footer"!=t.area&&s.appendTo(i),function(){setTimeout(function(){s.css("opacity",1)},n+=200)}(s)})}});return a}),_wAMD.define("tpl!page-layouts/editor/layout",[],function(){return'<div class="layout-category-list"></div>\n\n<div class="layout-list"></div>'}),_wAMD.define("page-layouts/editor/view/PageLayoutGalleryView",["jquery","backbone-all","mustache","editor/app","components/views/LoadingView","page-layouts/editor/view/categories/CategoryListView","page-layouts/editor/view/layouts/LayoutListView","commerce/editor/store/general/list/ListLoadingView","tpl!page-layouts/editor/layout","editor/build/utils"],function(e,t,i,n,o,s,r,a,l,c){var u=t.Marionette.Layout.extend({template:i.compile(l),dialog:{dialogClass:"flat large-modal page-layout-gallery-view",title:_W.tl("Choose a Layout"),size:"1180x700",cancelX:!0,cancelBg:!0,enableScrolling:!0,modal:!0},regions:{categories:".layout-category-list",layouts:".layout-list"},ui:{preview:".layout-preview"},events:{categorySelected:"categorySelected","click .cancel-btn":"cancelPreview"},initialize:function(){var e=this;n.vent.on({"page-layout:choose":function(t){e.chooseLayout(t),e.close()}}),this.getPageTitle()},onRender:function(){var e=this;e.layouts.show(new r({collection:new t.Collection([]),area:this.options.area}));var i,n;_W.Editor.RPC.PageLayouts.getAvailableLayouts().done(function(o){if(o&&1==o.success){var s=o.data,r=_.clone(s),a=_.flatten(_.pluck(r,"page_layouts"));i=new t.Collection(r),n=new t.Collection(a),e.setCollection(i,n),e.afterRender()}else console.log(o)}).fail(function(e){console.log(e)})},afterRender:function(){function i(t){var i=n.fetchedCategories.where({name:t})[0];e(n.categories.el).find('div:contains("'+t+'")').addClass("selected"),n.categorySelected(null,i)}var n=this;if(""==this.options.area||null==this.options.area){var o=this.fetchedCategories.where({name:_W.tl("Footer")})[0],s=this.fetchedCategories;if(s.remove(o),this.renderCategoryListView(s),this.options.previousCategory){var r=this.fetchedCategories.where({page_layout_category_id:this.options.previousCategory});i(r[0].get("name"))}else{var a=n.getPageTitle();switch(a){case _W.tl("Home"):case _W.tl("Contact"):case _W.tl("About"):i(a);break;default:i(_W.tl("Home"))}}}else if("footer"==this.options.area){var o=this.fetchedCategories.where({name:_W.tl("Footer")})[0];new t.Collection(o),e(this.categories.el).find("li:first-of-type").addClass("selected"),this.categorySelected(null,o)}else console.log("Not support area for layout picker")},closeScreen:function(){var e=this;e.trigger("dialog:close")},close:function(){n.vent.off("page-layout:choose"),n.vent.off("pagelayouts:fetched"),"footer"==this.options.area&&e(".spotlight-controls-inner").find(".save-button").trigger("click")},setCollection:function(e,t){this.fetchedCategories=e,this.fetchedLayouts=t},categorySelected:function(e,i){var o=this.fetchedLayouts.where({page_layout_category_id:i.get("page_layout_category_id")}),s=new t.Collection(o);n.vent.trigger("pagelayouts:fetched",s)},renderCategoryListView:function(e){this.categories.show(new s({collection:e}))},chooseLayout:function(t){var i=this,o=!1;i.closeScreen(),startWait();var s="footer"==t.get("content_area")?"0":window.currentPage;"footer"==t.get("content_area")&&0!=e("#weebly-footer-list").find("li").length&&(o=!0,_W.Editor.RPC.PageLayouts.removeLayout(s,"footer")),_W.Editor.RPC.PageLayouts.applyLayout(t.get("page_layout_id"),s).done(function(){var e=c.renderPage(window.currentPage);e.done(function(){n.vent.trigger("pageLayouts:applied",t,o),endWait()})})},getPageTitle:function(){return _W.PageManager.pages[currentPage].title}});return u}),_wAMD.define("tpl!page-layouts/editor/spotlight/cover",[],function(){return'<div class="page-layout-spotlight-cover"></div>'}),_wAMD.define("tpl!page-layouts/editor/spotlight/preview-element-cover",[],function(){return'<div class="page-layout-element-cover"></div>'}),_wAMD.define("tpl!page-layouts/editor/spotlight/preview-tooltip",[],function(){return'<div class="spotlight-container">\n	<p class="title">{{#tl}}Layout Preview{{/tl}}</p>\n	<a class="cancel-btn min-btn" href="#">{{#tl}}Cancel{{/tl}}</a>\n	<a class="keep-btn min-btn" href="#">{{#tl}}Keep{{/tl}}</a>\n	<div class="arrow_box"></div>\n	<div class="top_arrow_box"></div>\n</div>'}),_wAMD.define("page-layouts/editor/view/spotlight/PageLayoutSpotlightView",["jquery","backbone-all","mustache","editor/app","editor/build/spotlights","editor/build/utils","tpl!page-layouts/editor/spotlight/cover","tpl!page-layouts/editor/spotlight/preview-element-cover","tpl!page-layouts/editor/spotlight/preview-tooltip"],function(e,t,i,n,o,s,r,a,l){var c=t.Marionette.ItemView.extend({template:i.compile(l),className:"page-layout-preview-tooltip",ui:{keepBtn:".keep-btn",cancelBtn:".cancel-btn"},events:{"click @ui.keepBtn":"keepLayout","click @ui.cancelBtn":"changeLayout"},onReady:function(){var t=this;e("#icontent")&&e("#icontent").addClass("page-layout-icontent"),o.showContentAreaSpotlights({opacity:.5,ants:!1,roundedCorners:!1,zIndex:100,element:e(t.options.contentAreaSelector)}),e(window).on("resize",{view:t},t.handleResize);var i=t.positionTooltip();if(e("#w-editor-left").append(r),e("#w-editor-top").append(r),e("#secondlistParent").append(a),t.$el.addClass("fade-in"),t.listenTo(n.vent,{"editor:toolbar:toggleCollapse":t.handleToolbarToggle,"editor:toolbar:toggle":t.handleToolbarToggle}),"footer"!=t.model.get("content_area")){var s;s=i?t.$el.position().top-20:t.$el.position().top+t.$el.height()+20,e("#scroll_container").animate({scrollTop:s},500)}t.saveButton=e(".spotlight-controls-inner").find(".save-button"),t.saveButton&&t.saveButton.hide()},handleToolbarToggle:function(){var e=this;e.toolbarToggleTimeout&&clearTimeout(e.toolbarToggleTimeout),e.toolbarToggleTimeout=setTimeout(function(){e.toolbarToggleTimeout=null,o.updateContentAreaSpotlights(),e.positionTooltip()},510)},handleResize:function(e){var t=e.data.view;o.updateContentAreaSpotlights(),t.positionTooltip()},positionTooltip:function(){var t=this,i=e(t.options.contentAreaSelector);t.$el.css("left",i.offset().left+i.width()/2-e("#view-container").offset().left);var n=i.offset().top-t.$el.height()-e("#w-editor-top").height()+e("#scroll_container").scrollTop()-20;return n>0?(t.$el.css("top",n),!0):(t.$el.addClass("top-arrow"),t.$el.css("top",i.offset().top+i.height()+e("#scroll_container").scrollTop()-10),!1)},closeView:function(){var t=this;o.hideContentAreaSpotlights(),e(window).off("resize",t.handleResize),e(".page-layout-spotlight-cover").remove(),e(".page-layout-element-cover").remove(),e("#icontent")&&e("#icontent").removeClass("page-layout-icontent"),t.saveButton&&t.saveButton.show(),t.remove(),t.unbind()},keepLayout:function(e){var t=this;e&&e.preventDefault(),t.closeView(),t.saveButton&&t.saveButton.trigger("click")},changeLayout:function(e){startWait();var t=this;e&&e.preventDefault(),_W.Editor.RPC.PageLayouts.removeLayout(window.currentPage,t.model.get("content_area")).done(function(){"footer"==t.model.get("content_area")&&t.options.hasDefaultFooter&&_W.Editor.RPC.PageLayouts.applyDefaultFooterBack();var e=s.renderPage(window.currentPage);e.done(function(){endWait(),n.vent.trigger("pageLayouts:gallery:show",t.model.get("content_area"),t.model.get("page_layout_category_id"))})}),t.closeView()}});return c}),_wAMD.define("page-layouts/editor/module",["jquery","backbone-all","editor/app","page-layouts/editor/view/PageLayoutGalleryView","page-layouts/editor/view/spotlight/PageLayoutSpotlightView"],function(e,t,i,n,o){return i.module("pageLayouts",function(){i.vent.on({"pageLayouts:gallery:show":function(e,t){i.showDialog(new n({area:e,previousCategory:t}))},"pageLayouts:applied":function(t,i){var n;switch(t.get("content_area")){case"footer":n=".wsite-footer";break;case"":default:n="#secondlistParent.wsite-elements.wsite-not-footer"}var s=new o({model:t,contentAreaSelector:n,hasDefaultFooter:i});s.render(),e("#scroll_container").append(s.$el),setTimeout(function(){s.onReady()},100)}})}),i.pageLayouts}),_wAMD.requirejs.config({paths:{config:"editor/config"}}),_wAMD.require(["jquery","mustache","underscore","backbone-all","util/misc","editor/commerce-init","editor/membership-init","vendor/jquery.swiper","vendor/cloud-zoom.1.0.2","vendor/jquery.pasteImageReader","util/ui/wInput"],function(){_wAMD.require(["commerce/editor/view/pages/PageTypeStorefrontLink","commerce/editor/view/pages/PageTypeStoreCategoryLink","commerce/editor/view/pages/PageTypeStoreProductLink","commerce/editor/view/elements/ProductPageEdit","commerce/editor/view/elements/CategoryPageEdit","commerce/site/view/CategoryPageView","commerce/site/view/ProductPageView","commerce/site/view/mobile/CategoryPageView","commerce/site/view/mobile/ProductPageView","legacy/classes/elements/CommerceProduct","commerce/site/view/mini-cart/MiniCart"],function(){_wAMD.require(["jquery","editor/core","editor/app","editor/build/module","editor/utils","editor/settings/module","editor/billing/module","editor/publish/module","editor/designer/module","editor/theme-background/module","editor/theme-editor/module","blog/editor/module","page-layouts/editor/module","commerce/editor/module"],function(e,t,i){e(function(){i.start(),i.blog.start(),i.commerce.start(),t.init()})})})}),_wAMD.define("editor/main-with-commerce",function(){});